var bo=Object.defineProperty;var so=a=>{throw TypeError(a)};var _o=(a,e,c)=>e in a?bo(a,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[e]=c;var nr=(a,e,c)=>_o(a,typeof e!="symbol"?e+"":e,c),js=(a,e,c)=>e.has(a)||so("Cannot "+c);var fr=(a,e,c)=>(js(a,e,"read from private field"),c?c.call(a):e.get(a)),Jr=(a,e,c)=>e.has(a)?so("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,c),Hr=(a,e,c,d)=>(js(a,e,"write to private field"),d?d.call(a,c):e.set(a,c),c),yn=(a,e,c)=>(js(a,e,"access private method"),c);var ks=(a,e,c,d)=>({set _(h){Hr(a,e,h,c)},get _(){return fr(a,e,d)}});function _mergeNamespaces(a,e){for(var c=0;c<e.length;c++){const d=e[c];if(typeof d!="string"&&!Array.isArray(d)){for(const h in d)if(h!=="default"&&!(h in a)){const g=Object.getOwnPropertyDescriptor(d,h);g&&Object.defineProperty(a,h,g.get?g:{enumerable:!0,get:()=>d[h]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const _ of g.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&d(_)}).observe(document,{childList:!0,subtree:!0});function c(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(h){if(h.ep)return;h.ep=!0;const g=c(h);fetch(h.href,g)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function getAugmentedNamespace(a){if(a.__esModule)return a;var e=a.default;if(typeof e=="function"){var c=function d(){return this instanceof d?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};c.prototype=e.prototype}else c={};return Object.defineProperty(c,"__esModule",{value:!0}),Object.keys(a).forEach(function(d){var h=Object.getOwnPropertyDescriptor(a,d);Object.defineProperty(c,d,h.get?h:{enumerable:!0,get:function(){return a[d]}})}),c}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(a){return a===null||typeof a!="object"?null:(a=z$1&&a[z$1]||a["@@iterator"],typeof a=="function"?a:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$2={};function E$2(a,e,c){this.props=a,this.context=e,this.refs=D$2,this.updater=c||B$1}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(a,e){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,e,"setState")};E$2.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F(){}F.prototype=E$2.prototype;function G$1(a,e,c){this.props=a,this.context=e,this.refs=D$2,this.updater=c||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$1(a,e,c){var d,h={},g=null,_=null;if(e!=null)for(d in e.ref!==void 0&&(_=e.ref),e.key!==void 0&&(g=""+e.key),e)J.call(e,d)&&!L$2.hasOwnProperty(d)&&(h[d]=e[d]);var _e=arguments.length-2;if(_e===1)h.children=c;else if(1<_e){for(var et=Array(_e),tt=0;tt<_e;tt++)et[tt]=arguments[tt+2];h.children=et}if(a&&a.defaultProps)for(d in _e=a.defaultProps,_e)h[d]===void 0&&(h[d]=_e[d]);return{$$typeof:l$1,type:a,key:g,ref:_,props:h,_owner:K$1.current}}function N$1(a,e){return{$$typeof:l$1,type:a.type,key:e,ref:a.ref,props:a.props,_owner:a._owner}}function O$1(a){return typeof a=="object"&&a!==null&&a.$$typeof===l$1}function escape(a){var e={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(c){return e[c]})}var P$2=/\/+/g;function Q$1(a,e){return typeof a=="object"&&a!==null&&a.key!=null?escape(""+a.key):e.toString(36)}function R$1(a,e,c,d,h){var g=typeof a;(g==="undefined"||g==="boolean")&&(a=null);var _=!1;if(a===null)_=!0;else switch(g){case"string":case"number":_=!0;break;case"object":switch(a.$$typeof){case l$1:case n$2:_=!0}}if(_)return _=a,h=h(_),a=d===""?"."+Q$1(_,0):d,I$1(h)?(c="",a!=null&&(c=a.replace(P$2,"$&/")+"/"),R$1(h,e,c,"",function(tt){return tt})):h!=null&&(O$1(h)&&(h=N$1(h,c+(!h.key||_&&_.key===h.key?"":(""+h.key).replace(P$2,"$&/")+"/")+a)),e.push(h)),1;if(_=0,d=d===""?".":d+":",I$1(a))for(var _e=0;_e<a.length;_e++){g=a[_e];var et=d+Q$1(g,_e);_+=R$1(g,e,c,et,h)}else if(et=A$1(a),typeof et=="function")for(a=et.call(a),_e=0;!(g=a.next()).done;)g=g.value,et=d+Q$1(g,_e++),_+=R$1(g,e,c,et,h);else if(g==="object")throw e=String(a),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return _}function S$1(a,e,c){if(a==null)return a;var d=[],h=0;return R$1(a,d,"","",function(g){return e.call(c,g,h++)}),d}function T$1(a){if(a._status===-1){var e=a._result;e=e(),e.then(function(c){(a._status===0||a._status===-1)&&(a._status=1,a._result=c)},function(c){(a._status===0||a._status===-1)&&(a._status=2,a._result=c)}),a._status===-1&&(a._status=0,a._result=e)}if(a._status===1)return a._result.default;throw a._result}var U$2={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(a,e,c){S$1(a,function(){e.apply(this,arguments)},c)},count:function(a){var e=0;return S$1(a,function(){e++}),e},toArray:function(a){return S$1(a,function(e){return e})||[]},only:function(a){if(!O$1(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};react_production_min.Component=E$2;react_production_min.Fragment=p$2;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$2;react_production_min.cloneElement=function(a,e,c){if(a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var d=C$1({},a.props),h=a.key,g=a.ref,_=a._owner;if(e!=null){if(e.ref!==void 0&&(g=e.ref,_=K$1.current),e.key!==void 0&&(h=""+e.key),a.type&&a.type.defaultProps)var _e=a.type.defaultProps;for(et in e)J.call(e,et)&&!L$2.hasOwnProperty(et)&&(d[et]=e[et]===void 0&&_e!==void 0?_e[et]:e[et])}var et=arguments.length-2;if(et===1)d.children=c;else if(1<et){_e=Array(et);for(var tt=0;tt<et;tt++)_e[tt]=arguments[tt+2];d.children=_e}return{$$typeof:l$1,type:a.type,key:h,ref:g,props:d,_owner:_}};react_production_min.createContext=function(a){return a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a.Provider={$$typeof:t$1,_context:a},a.Consumer=a};react_production_min.createElement=M$1;react_production_min.createFactory=function(a){var e=M$1.bind(null,a);return e.type=a,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:v$2,render:a}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T$1}};react_production_min.memo=function(a,e){return{$$typeof:x,type:a,compare:e===void 0?null:e}};react_production_min.startTransition=function(a){var e=V$1.transition;V$1.transition={};try{a()}finally{V$1.transition=e}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(a,e){return U$2.current.useCallback(a,e)};react_production_min.useContext=function(a){return U$2.current.useContext(a)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(a){return U$2.current.useDeferredValue(a)};react_production_min.useEffect=function(a,e){return U$2.current.useEffect(a,e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(a,e,c){return U$2.current.useImperativeHandle(a,e,c)};react_production_min.useInsertionEffect=function(a,e){return U$2.current.useInsertionEffect(a,e)};react_production_min.useLayoutEffect=function(a,e){return U$2.current.useLayoutEffect(a,e)};react_production_min.useMemo=function(a,e){return U$2.current.useMemo(a,e)};react_production_min.useReducer=function(a,e,c){return U$2.current.useReducer(a,e,c)};react_production_min.useRef=function(a){return U$2.current.useRef(a)};react_production_min.useState=function(a){return U$2.current.useState(a)};react_production_min.useSyncExternalStore=function(a,e,c){return U$2.current.useSyncExternalStore(a,e,c)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n$1=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(a,e,c){var d,h={},g=null,_=null;c!==void 0&&(g=""+c),e.key!==void 0&&(g=""+e.key),e.ref!==void 0&&(_=e.ref);for(d in e)m$1.call(e,d)&&!p$1.hasOwnProperty(d)&&(h[d]=e[d]);if(a&&a.defaultProps)for(d in e=a.defaultProps,e)h[d]===void 0&&(h[d]=e[d]);return{$$typeof:k,type:a,key:g,ref:_,props:h,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function e(At,Et){var zt=At.length;At.push(Et);e:for(;0<zt;){var er=zt-1>>>1,pr=At[er];if(0<h(pr,Et))At[er]=Et,At[zt]=pr,zt=er;else break e}}function c(At){return At.length===0?null:At[0]}function d(At){if(At.length===0)return null;var Et=At[0],zt=At.pop();if(zt!==Et){At[0]=zt;e:for(var er=0,pr=At.length,_r=pr>>>1;er<_r;){var Er=2*(er+1)-1,Tr=At[Er],wr=Er+1,gr=At[wr];if(0>h(Tr,zt))wr<pr&&0>h(gr,Tr)?(At[er]=gr,At[wr]=zt,er=wr):(At[er]=Tr,At[Er]=zt,er=Er);else if(wr<pr&&0>h(gr,zt))At[er]=gr,At[wr]=zt,er=wr;else break e}}return Et}function h(At,Et){var zt=At.sortIndex-Et.sortIndex;return zt!==0?zt:At.id-Et.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;a.unstable_now=function(){return g.now()}}else{var _=Date,_e=_.now();a.unstable_now=function(){return _.now()-_e}}var et=[],tt=[],rt=1,$=null,b=3,nt=!1,st=!1,ot=!1,it=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,lt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function dt(At){for(var Et=c(tt);Et!==null;){if(Et.callback===null)d(tt);else if(Et.startTime<=At)d(tt),Et.sortIndex=Et.expirationTime,e(et,Et);else break;Et=c(tt)}}function ht(At){if(ot=!1,dt(At),!st)if(c(et)!==null)st=!0,wt(pt);else{var Et=c(tt);Et!==null&&Rt(ht,Et.startTime-At)}}function pt(At,Et){st=!1,ot&&(ot=!1,at(xt),xt=-1),nt=!0;var zt=b;try{for(dt(Et),$=c(et);$!==null&&(!($.expirationTime>Et)||At&&!jt());){var er=$.callback;if(typeof er=="function"){$.callback=null,b=$.priorityLevel;var pr=er($.expirationTime<=Et);Et=a.unstable_now(),typeof pr=="function"?$.callback=pr:$===c(et)&&d(et),dt(Et)}else d(et);$=c(et)}if($!==null)var _r=!0;else{var Er=c(tt);Er!==null&&Rt(ht,Er.startTime-Et),_r=!1}return _r}finally{$=null,b=zt,nt=!1}}var mt=!1,yt=null,xt=-1,gt=5,bt=-1;function jt(){return!(a.unstable_now()-bt<gt)}function Mt(){if(yt!==null){var At=a.unstable_now();bt=At;var Et=!0;try{Et=yt(!0,At)}finally{Et?Pt():(mt=!1,yt=null)}}else mt=!1}var Pt;if(typeof lt=="function")Pt=function(){lt(Mt)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,St=Tt.port2;Tt.port1.onmessage=Mt,Pt=function(){St.postMessage(null)}}else Pt=function(){it(Mt,0)};function wt(At){yt=At,mt||(mt=!0,Pt())}function Rt(At,Et){xt=it(function(){At(a.unstable_now())},Et)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(At){At.callback=null},a.unstable_continueExecution=function(){st||nt||(st=!0,wt(pt))},a.unstable_forceFrameRate=function(At){0>At||125<At?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):gt=0<At?Math.floor(1e3/At):5},a.unstable_getCurrentPriorityLevel=function(){return b},a.unstable_getFirstCallbackNode=function(){return c(et)},a.unstable_next=function(At){switch(b){case 1:case 2:case 3:var Et=3;break;default:Et=b}var zt=b;b=Et;try{return At()}finally{b=zt}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(At,Et){switch(At){case 1:case 2:case 3:case 4:case 5:break;default:At=3}var zt=b;b=At;try{return Et()}finally{b=zt}},a.unstable_scheduleCallback=function(At,Et,zt){var er=a.unstable_now();switch(typeof zt=="object"&&zt!==null?(zt=zt.delay,zt=typeof zt=="number"&&0<zt?er+zt:er):zt=er,At){case 1:var pr=-1;break;case 2:pr=250;break;case 5:pr=1073741823;break;case 4:pr=1e4;break;default:pr=5e3}return pr=zt+pr,At={id:rt++,callback:Et,priorityLevel:At,startTime:zt,expirationTime:pr,sortIndex:-1},zt>er?(At.sortIndex=zt,e(tt,At),c(et)===null&&At===c(tt)&&(ot?(at(xt),xt=-1):ot=!0,Rt(ht,zt-er))):(At.sortIndex=pr,e(et,At),st||nt||(st=!0,wt(pt))),At},a.unstable_shouldYield=jt,a.unstable_wrapCallback=function(At){var Et=b;return function(){var zt=b;b=Et;try{return At.apply(this,arguments)}finally{b=zt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(a){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)e+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(a,e){ha(a,e),ha(a+"Capture",e)}function ha(a,e){for(ea[a]=e,a=0;a<e.length;a++)da.add(e[a])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(a){return ja.call(ma,a)?!0:ja.call(la,a)?!1:ka.test(a)?ma[a]=!0:(la[a]=!0,!1)}function pa(a,e,c,d){if(c!==null&&c.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return d?!1:c!==null?!c.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function qa(a,e,c,d){if(e===null||typeof e>"u"||pa(a,e,c,d))return!0;if(d)return!1;if(c!==null)switch(c.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$1(a,e,c,d,h,g,_){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=d,this.attributeNamespace=h,this.mustUseProperty=c,this.propertyName=a,this.type=e,this.sanitizeURL=g,this.removeEmptyString=_}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z[a]=new v$1(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var e=a[0];z[e]=new v$1(e,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z[a]=new v$1(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z[a]=new v$1(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z[a]=new v$1(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){z[a]=new v$1(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z[a]=new v$1(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z[a]=new v$1(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z[a]=new v$1(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var e=a.replace(ra,sa);z[e]=new v$1(e,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var e=a.replace(ra,sa);z[e]=new v$1(e,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var e=a.replace(ra,sa);z[e]=new v$1(e,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z[a]=new v$1(a,1,!1,a.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z[a]=new v$1(a,1,!1,a.toLowerCase(),null,!0,!0)});function ta(a,e,c,d){var h=z.hasOwnProperty(e)?z[e]:null;(h!==null?h.type!==0:d||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,c,h,d)&&(c=null),d||h===null?oa(e)&&(c===null?a.removeAttribute(e):a.setAttribute(e,""+c)):h.mustUseProperty?a[h.propertyName]=c===null?h.type===3?!1:"":c:(e=h.attributeName,d=h.attributeNamespace,c===null?a.removeAttribute(e):(h=h.type,c=h===3||h===4&&c===!0?"":""+c,d?a.setAttributeNS(d,e,c):a.setAttribute(e,c))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(a){return a===null||typeof a!="object"?null:(a=Ja&&a[Ja]||a["@@iterator"],typeof a=="function"?a:null)}var A=Object.assign,La;function Ma(a){if(La===void 0)try{throw Error()}catch(c){var e=c.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+a}var Na=!1;function Oa(a,e){if(!a||Na)return"";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(tt){var d=tt}Reflect.construct(a,[],e)}else{try{e.call()}catch(tt){d=tt}a.call(e.prototype)}else{try{throw Error()}catch(tt){d=tt}a()}}catch(tt){if(tt&&d&&typeof tt.stack=="string"){for(var h=tt.stack.split(`
`),g=d.stack.split(`
`),_=h.length-1,_e=g.length-1;1<=_&&0<=_e&&h[_]!==g[_e];)_e--;for(;1<=_&&0<=_e;_--,_e--)if(h[_]!==g[_e]){if(_!==1||_e!==1)do if(_--,_e--,0>_e||h[_]!==g[_e]){var et=`
`+h[_].replace(" at new "," at ");return a.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",a.displayName)),et}while(1<=_&&0<=_e);break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:"")?Ma(a):""}function Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return""}}function Qa(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ca:return(a.displayName||"Context")+".Consumer";case Ba:return(a._context.displayName||"Context")+".Provider";case Da:var e=a.render;return a=a.displayName,a||(a=e.displayName||e.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ga:return e=a.displayName||null,e!==null?e:Qa(a.type)||"Memo";case Ha:e=a._payload,a=a._init;try{return Qa(a(e))}catch{}}return null}function Ra(a){var e=a.type;switch(a.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=e.render,a=a.displayName||a.name||"",e.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ta(a){var e=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(a){var e=Ta(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,e),d=""+a[e];if(!a.hasOwnProperty(e)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var h=c.get,g=c.set;return Object.defineProperty(a,e,{configurable:!0,get:function(){return h.call(this)},set:function(_){d=""+_,g.call(this,_)}}),Object.defineProperty(a,e,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(_){d=""+_},stopTracking:function(){a._valueTracker=null,delete a[e]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var e=a._valueTracker;if(!e)return!0;var c=e.getValue(),d="";return a&&(d=Ta(a)?a.checked?"true":"false":a.value),a=d,a!==c?(e.setValue(a),!0):!1}function Xa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ya(a,e){var c=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??a._wrapperState.initialChecked})}function Za(a,e){var c=e.defaultValue==null?"":e.defaultValue,d=e.checked!=null?e.checked:e.defaultChecked;c=Sa(e.value!=null?e.value:c),a._wrapperState={initialChecked:d,initialValue:c,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(a,e){e=e.checked,e!=null&&ta(a,"checked",e,!1)}function bb(a,e){ab(a,e);var c=Sa(e.value),d=e.type;if(c!=null)d==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c);else if(d==="submit"||d==="reset"){a.removeAttribute("value");return}e.hasOwnProperty("value")?cb(a,e.type,c):e.hasOwnProperty("defaultValue")&&cb(a,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(a.defaultChecked=!!e.defaultChecked)}function db(a,e,c){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var d=e.type;if(!(d!=="submit"&&d!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+a._wrapperState.initialValue,c||e===a.value||(a.value=e),a.defaultValue=e}c=a.name,c!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,c!==""&&(a.name=c)}function cb(a,e,c){(e!=="number"||Xa(a.ownerDocument)!==a)&&(c==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}var eb=Array.isArray;function fb(a,e,c,d){if(a=a.options,e){e={};for(var h=0;h<c.length;h++)e["$"+c[h]]=!0;for(c=0;c<a.length;c++)h=e.hasOwnProperty("$"+a[c].value),a[c].selected!==h&&(a[c].selected=h),h&&d&&(a[c].defaultSelected=!0)}else{for(c=""+Sa(c),e=null,h=0;h<a.length;h++){if(a[h].value===c){a[h].selected=!0,d&&(a[h].defaultSelected=!0);return}e!==null||a[h].disabled||(e=a[h])}e!==null&&(e.selected=!0)}}function gb(a,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,e){var c=e.value;if(c==null){if(c=e.children,e=e.defaultValue,c!=null){if(e!=null)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}e=c}e==null&&(e=""),c=e}a._wrapperState={initialValue:Sa(c)}}function ib(a,e){var c=Sa(e.value),d=Sa(e.defaultValue);c!=null&&(c=""+c,c!==a.value&&(a.value=c),e.defaultValue==null&&a.defaultValue!==c&&(a.defaultValue=c)),d!=null&&(a.defaultValue=""+d)}function jb(a){var e=a.textContent;e===a._wrapperState.initialValue&&e!==""&&e!==null&&(a.value=e)}function kb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(a,e){return a==null||a==="http://www.w3.org/1999/xhtml"?kb(e):a==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mb,nb=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,c,d,h){MSApp.execUnsafeLocalFunction(function(){return a(e,c,d,h)})}:a}(function(a,e){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;e.firstChild;)a.appendChild(e.firstChild)}});function ob(a,e){if(e){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=e;return}}a.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(a){qb.forEach(function(e){e=e+a.charAt(0).toUpperCase()+a.substring(1),pb[e]=pb[a]})});function rb(a,e,c){return e==null||typeof e=="boolean"||e===""?"":c||typeof e!="number"||e===0||pb.hasOwnProperty(a)&&pb[a]?(""+e).trim():e+"px"}function sb(a,e){a=a.style;for(var c in e)if(e.hasOwnProperty(c)){var d=c.indexOf("--")===0,h=rb(c,e[c],d);c==="float"&&(c="cssFloat"),d?a.setProperty(c,h):a[c]=h}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(a,e){if(e){if(tb[a]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,a));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(a,e){if(a.indexOf("-")===-1)return typeof e.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yb=null,zb=null,Ab=null;function Bb(a){if(a=Cb(a)){if(typeof yb!="function")throw Error(p(280));var e=a.stateNode;e&&(e=Db(e),yb(a.stateNode,a.type,e))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,e=Ab;if(Ab=zb=null,Bb(a),e)for(a=0;a<e.length;a++)Bb(e[a])}}function Gb(a,e){return a(e)}function Hb(){}var Ib=!1;function Jb(a,e,c){if(Ib)return a(e,c);Ib=!0;try{return Gb(a,e,c)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(a,e){var c=a.stateNode;if(c===null)return null;var d=Db(c);if(d===null)return null;c=d[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(p(231,e,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(a,e,c,d,h,g,_,_e,et){var tt=Array.prototype.slice.call(arguments,3);try{e.apply(c,tt)}catch(rt){this.onError(rt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0,Pb=a}};function Tb(a,e,c,d,h,g,_,_e,et){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(a,e,c,d,h,g,_,_e,et){if(Tb.apply(this,arguments),Ob){if(Ob){var tt=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=tt)}}function Vb(a){var e=a,c=a;if(a.alternate)for(;e.return;)e=e.return;else{a=e;do e=a,e.flags&4098&&(c=e.return),a=e.return;while(a)}return e.tag===3?c:null}function Wb(a){if(a.tag===13){var e=a.memoizedState;if(e===null&&(a=a.alternate,a!==null&&(e=a.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188))}function Yb(a){var e=a.alternate;if(!e){if(e=Vb(a),e===null)throw Error(p(188));return e!==a?null:a}for(var c=a,d=e;;){var h=c.return;if(h===null)break;var g=h.alternate;if(g===null){if(d=h.return,d!==null){c=d;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===c)return Xb(h),a;if(g===d)return Xb(h),e;g=g.sibling}throw Error(p(188))}if(c.return!==d.return)c=h,d=g;else{for(var _=!1,_e=h.child;_e;){if(_e===c){_=!0,c=h,d=g;break}if(_e===d){_=!0,d=h,c=g;break}_e=_e.sibling}if(!_){for(_e=g.child;_e;){if(_e===c){_=!0,c=g,d=h;break}if(_e===d){_=!0,d=g,c=h;break}_e=_e.sibling}if(!_)throw Error(p(189))}}if(c.alternate!==d)throw Error(p(190))}if(c.tag!==3)throw Error(p(188));return c.stateNode.current===c?a:e}function Zb(a){return a=Yb(a),a!==null?$b(a):null}function $b(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var e=$b(a);if(e!==null)return e;a=a.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,a,void 0,(a.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){return a>>>=0,a===0?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;function tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function uc(a,e){var c=a.pendingLanes;if(c===0)return 0;var d=0,h=a.suspendedLanes,g=a.pingedLanes,_=c&268435455;if(_!==0){var _e=_&~h;_e!==0?d=tc(_e):(g&=_,g!==0&&(d=tc(g)))}else _=c&~h,_!==0?d=tc(_):g!==0&&(d=tc(g));if(d===0)return 0;if(e!==0&&e!==d&&!(e&h)&&(h=d&-d,g=e&-e,h>=g||h===16&&(g&4194240)!==0))return e;if(d&4&&(d|=c&16),e=a.entangledLanes,e!==0)for(a=a.entanglements,e&=d;0<e;)c=31-oc(e),h=1<<c,d|=a[c],e&=~h;return d}function vc(a,e){switch(a){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(a,e){for(var c=a.suspendedLanes,d=a.pingedLanes,h=a.expirationTimes,g=a.pendingLanes;0<g;){var _=31-oc(g),_e=1<<_,et=h[_];et===-1?(!(_e&c)||_e&d)&&(h[_]=vc(_e,e)):et<=e&&(a.expiredLanes|=_e),g&=~_e}}function xc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yc(){var a=rc;return rc<<=1,!(rc&4194240)&&(rc=64),a}function zc(a){for(var e=[],c=0;31>c;c++)e.push(a);return e}function Ac(a,e,c){a.pendingLanes|=e,e!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,e=31-oc(e),a[e]=c}function Bc(a,e){var c=a.pendingLanes&~e;a.pendingLanes=e,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=e,a.mutableReadLanes&=e,a.entangledLanes&=e,e=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var h=31-oc(c),g=1<<h;e[h]=0,d[h]=-1,a[h]=-1,c&=~g}}function Cc(a,e){var c=a.entangledLanes|=e;for(a=a.entanglements;c;){var d=31-oc(c),h=1<<d;h&e|a[d]&e&&(a[d]|=e),c&=~h}}var C=0;function Dc(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(a,e){switch(a){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(a,e,c,d,h,g){return a===null||a.nativeEvent!==g?(a={blockedOn:e,domEventName:c,eventSystemFlags:d,nativeEvent:g,targetContainers:[h]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),a):(a.eventSystemFlags|=d,e=a.targetContainers,h!==null&&e.indexOf(h)===-1&&e.push(h),a)}function Uc(a,e,c,d,h){switch(e){case"focusin":return Lc=Tc(Lc,a,e,c,d,h),!0;case"dragenter":return Mc=Tc(Mc,a,e,c,d,h),!0;case"mouseover":return Nc=Tc(Nc,a,e,c,d,h),!0;case"pointerover":var g=h.pointerId;return Oc.set(g,Tc(Oc.get(g)||null,a,e,c,d,h)),!0;case"gotpointercapture":return g=h.pointerId,Pc.set(g,Tc(Pc.get(g)||null,a,e,c,d,h)),!0}return!1}function Vc(a){var e=Wc(a.target);if(e!==null){var c=Vb(e);if(c!==null){if(e=c.tag,e===13){if(e=Wb(c),e!==null){a.blockedOn=e,Ic(a.priority,function(){Gc(c)});return}}else if(e===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xc(a){if(a.blockedOn!==null)return!1;for(var e=a.targetContainers;0<e.length;){var c=Yc(a.domEventName,a.eventSystemFlags,e[0],a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d,c.target.dispatchEvent(d),wb=null}else return e=Cb(c),e!==null&&Fc(e),a.blockedOn=c,!1;e.shift()}return!0}function Zc(a,e,c){Xc(a)&&c.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(a,e){a.blockedOn===e&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(a){function e(h){return ad(h,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}for(Lc!==null&&ad(Lc,a),Mc!==null&&ad(Mc,a),Nc!==null&&ad(Nc,a),Oc.forEach(e),Pc.forEach(e),c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],c.blockedOn===null);)Vc(c),c.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(a,e,c,d){var h=C,g=cd.transition;cd.transition=null;try{C=1,fd(a,e,c,d)}finally{C=h,cd.transition=g}}function gd(a,e,c,d){var h=C,g=cd.transition;cd.transition=null;try{C=4,fd(a,e,c,d)}finally{C=h,cd.transition=g}}function fd(a,e,c,d){if(dd){var h=Yc(a,e,c,d);if(h===null)hd(a,e,d,id,c),Sc(a,d);else if(Uc(h,a,e,c,d))d.stopPropagation();else if(Sc(a,d),e&4&&-1<Rc.indexOf(a)){for(;h!==null;){var g=Cb(h);if(g!==null&&Ec(g),g=Yc(a,e,c,d),g===null&&hd(a,e,d,id,c),g===h)break;h=g}h!==null&&d.stopPropagation()}else hd(a,e,d,null,c)}}var id=null;function Yc(a,e,c,d){if(id=null,a=xb(d),a=Wc(a),a!==null)if(e=Vb(a),e===null)a=null;else if(c=e.tag,c===13){if(a=Wb(e),a!==null)return a;a=null}else if(c===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;a=null}else e!==a&&(a=null);return id=a,null}function jd(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,e=ld,c=e.length,d,h="value"in kd?kd.value:kd.textContent,g=h.length;for(a=0;a<c&&e[a]===h[a];a++);var _=c-a;for(d=1;d<=_&&e[c-d]===h[g-d];d++);return md=h.slice(a,1<d?1-d:void 0)}function od(a){var e=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&e===13&&(a=13)):a=e,a===10&&(a=13),32<=a||a===13?a:0}function pd(){return!0}function qd(){return!1}function rd(a){function e(c,d,h,g,_){this._reactName=c,this._targetInst=h,this.type=d,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var _e in a)a.hasOwnProperty(_e)&&(c=a[_e],this[_e]=c?c(g):g[_e]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yd&&(yd&&a.type==="mousemove"?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a),wd)},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(a):(a=Od[a])?!!e[a]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(a){if(a.key){var e=Md[a.key]||a.key;if(e!=="Unidentified")return e}return a.type==="keypress"?(a=od(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return a.type==="keypress"?od(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?od(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae$1||be&&8<be&&11>=be),ee$1=" ",fe=!1;function ge(a,e){switch(a){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ie=!1;function je(a,e){switch(a){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee$1);case"textInput":return a=e.data,a===ee$1&&fe?null:a;default:return null}}function ke(a,e){if(ie)return a==="compositionend"||!ae$1&&ge(a,e)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var e=a&&a.nodeName&&a.nodeName.toLowerCase();return e==="input"?!!le[a.type]:e==="textarea"}function ne$1(a,e,c,d){Eb(d),e=oe$1(e,"onChange"),0<e.length&&(c=new td("onChange","change",null,c,d),a.push({event:c,listeners:e}))}var pe=null,qe=null;function re(a){se$1(a,0)}function te$1(a){var e=ue(a);if(Wa(e))return a}function ve(a,e){if(a==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(a){if(a.propertyName==="value"&&te$1(qe)){var e=[];ne$1(e,qe,a,xb(a)),Jb(re,e)}}function Ce(a,e,c){a==="focusin"?(Ae(),pe=e,qe=c,pe.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae()}function De(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return te$1(qe)}function Ee(a,e){if(a==="click")return te$1(e)}function Fe(a,e){if(a==="input"||a==="change")return te$1(e)}function Ge(a,e){return a===e&&(a!==0||1/a===1/e)||a!==a&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(a,e){if(He(a,e))return!0;if(typeof a!="object"||a===null||typeof e!="object"||e===null)return!1;var c=Object.keys(a),d=Object.keys(e);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var h=c[d];if(!ja.call(e,h)||!He(a[h],e[h]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ke(a,e){var c=Je(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=e&&d>=e)return{node:c,offset:e-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,e){return a&&e?a===e?!0:a&&a.nodeType===3?!1:e&&e.nodeType===3?Le(a,e.parentNode):"contains"in a?a.contains(e):a.compareDocumentPosition?!!(a.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var a=window,e=Xa();e instanceof a.HTMLIFrameElement;){try{var c=typeof e.contentWindow.location.href=="string"}catch{c=!1}if(c)a=e.contentWindow;else break;e=Xa(a.document)}return e}function Ne(a){var e=a&&a.nodeName&&a.nodeName.toLowerCase();return e&&(e==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||e==="textarea"||a.contentEditable==="true")}function Oe(a){var e=Me(),c=a.focusedElem,d=a.selectionRange;if(e!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(d!==null&&Ne(c)){if(e=d.start,a=d.end,a===void 0&&(a=e),"selectionStart"in c)c.selectionStart=e,c.selectionEnd=Math.min(a,c.value.length);else if(a=(e=c.ownerDocument||document)&&e.defaultView||window,a.getSelection){a=a.getSelection();var h=c.textContent.length,g=Math.min(d.start,h);d=d.end===void 0?g:Math.min(d.end,h),!a.extend&&g>d&&(h=d,d=g,g=h),h=Ke(c,g);var _=Ke(c,d);h&&_&&(a.rangeCount!==1||a.anchorNode!==h.node||a.anchorOffset!==h.offset||a.focusNode!==_.node||a.focusOffset!==_.offset)&&(e=e.createRange(),e.setStart(h.node,h.offset),a.removeAllRanges(),g>d?(a.addRange(e),a.extend(_.node,_.offset)):(e.setEnd(_.node,_.offset),a.addRange(e)))}}for(e=[],a=c;a=a.parentNode;)a.nodeType===1&&e.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<e.length;c++)a=e[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te$1=!1;function Ue(a,e,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Te$1||Qe==null||Qe!==Xa(d)||(d=Qe,"selectionStart"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe$1(Re,"onSelect"),0<d.length&&(e=new td("onSelect","select",null,e,c),a.push({event:e,listeners:d}),e.target=Qe)))}function Ve(a,e){var c={};return c[a.toLowerCase()]=e.toLowerCase(),c["Webkit"+a]="webkit"+e,c["Moz"+a]="moz"+e,c}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var e=We[a],c;for(c in e)if(e.hasOwnProperty(c)&&c in Ye)return Xe[a]=e[c];return a}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(a,e){df.set(a,e),fa(e,[a])}for(var gf=0;gf<ef.length;gf++){var hf$1=ef[gf],jf=hf$1.toLowerCase(),kf=hf$1[0].toUpperCase()+hf$1.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(a,e,c){var d=a.type||"unknown-event";a.currentTarget=c,Ub(d,e,void 0,a),a.currentTarget=null}function se$1(a,e){e=(e&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],h=d.event;d=d.listeners;e:{var g=void 0;if(e)for(var _=d.length-1;0<=_;_--){var _e=d[_],et=_e.instance,tt=_e.currentTarget;if(_e=_e.listener,et!==g&&h.isPropagationStopped())break e;nf(h,_e,tt),g=et}else for(_=0;_<d.length;_++){if(_e=d[_],et=_e.instance,tt=_e.currentTarget,_e=_e.listener,et!==g&&h.isPropagationStopped())break e;nf(h,_e,tt),g=et}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a}function D$1(a,e){var c=e[of];c===void 0&&(c=e[of]=new Set);var d=a+"__bubble";c.has(d)||(pf(e,a,2,!1),c.add(d))}function qf(a,e,c){var d=0;e&&(d|=4),pf(c,a,d,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0,da.forEach(function(c){c!=="selectionchange"&&(mf.has(c)||qf(c,!1,a),qf(c,!0,a))});var e=a.nodeType===9?a:a.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(a,e,c,d){switch(jd(e)){case 1:var h=ed;break;case 4:h=gd;break;default:h=fd}c=h.bind(null,e,c,a),h=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(h=!0),d?h!==void 0?a.addEventListener(e,c,{capture:!0,passive:h}):a.addEventListener(e,c,!0):h!==void 0?a.addEventListener(e,c,{passive:h}):a.addEventListener(e,c,!1)}function hd(a,e,c,d,h){var g=d;if(!(e&1)&&!(e&2)&&d!==null)e:for(;;){if(d===null)return;var _=d.tag;if(_===3||_===4){var _e=d.stateNode.containerInfo;if(_e===h||_e.nodeType===8&&_e.parentNode===h)break;if(_===4)for(_=d.return;_!==null;){var et=_.tag;if((et===3||et===4)&&(et=_.stateNode.containerInfo,et===h||et.nodeType===8&&et.parentNode===h))return;_=_.return}for(;_e!==null;){if(_=Wc(_e),_===null)return;if(et=_.tag,et===5||et===6){d=g=_;continue e}_e=_e.parentNode}}d=d.return}Jb(function(){var tt=g,rt=xb(c),$=[];e:{var b=df.get(a);if(b!==void 0){var nt=td,st=a;switch(a){case"keypress":if(od(c)===0)break e;case"keydown":case"keyup":nt=Rd;break;case"focusin":st="focus",nt=Fd;break;case"focusout":st="blur",nt=Fd;break;case"beforeblur":case"afterblur":nt=Fd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=Vd;break;case $e:case af:case bf:nt=Hd;break;case cf:nt=Xd;break;case"scroll":nt=vd;break;case"wheel":nt=Zd;break;case"copy":case"cut":case"paste":nt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=Td}var ot=(e&4)!==0,it=!ot&&a==="scroll",at=ot?b!==null?b+"Capture":null:b;ot=[];for(var lt=tt,dt;lt!==null;){dt=lt;var ht=dt.stateNode;if(dt.tag===5&&ht!==null&&(dt=ht,at!==null&&(ht=Kb(lt,at),ht!=null&&ot.push(tf(lt,ht,dt)))),it)break;lt=lt.return}0<ot.length&&(b=new nt(b,st,null,c,rt),$.push({event:b,listeners:ot}))}}if(!(e&7)){e:{if(b=a==="mouseover"||a==="pointerover",nt=a==="mouseout"||a==="pointerout",b&&c!==wb&&(st=c.relatedTarget||c.fromElement)&&(Wc(st)||st[uf]))break e;if((nt||b)&&(b=rt.window===rt?rt:(b=rt.ownerDocument)?b.defaultView||b.parentWindow:window,nt?(st=c.relatedTarget||c.toElement,nt=tt,st=st?Wc(st):null,st!==null&&(it=Vb(st),st!==it||st.tag!==5&&st.tag!==6)&&(st=null)):(nt=null,st=tt),nt!==st)){if(ot=Bd,ht="onMouseLeave",at="onMouseEnter",lt="mouse",(a==="pointerout"||a==="pointerover")&&(ot=Td,ht="onPointerLeave",at="onPointerEnter",lt="pointer"),it=nt==null?b:ue(nt),dt=st==null?b:ue(st),b=new ot(ht,lt+"leave",nt,c,rt),b.target=it,b.relatedTarget=dt,ht=null,Wc(rt)===tt&&(ot=new ot(at,lt+"enter",st,c,rt),ot.target=dt,ot.relatedTarget=it,ht=ot),it=ht,nt&&st)t:{for(ot=nt,at=st,lt=0,dt=ot;dt;dt=vf(dt))lt++;for(dt=0,ht=at;ht;ht=vf(ht))dt++;for(;0<lt-dt;)ot=vf(ot),lt--;for(;0<dt-lt;)at=vf(at),dt--;for(;lt--;){if(ot===at||at!==null&&ot===at.alternate)break t;ot=vf(ot),at=vf(at)}ot=null}else ot=null;nt!==null&&wf($,b,nt,ot,!1),st!==null&&it!==null&&wf($,it,st,ot,!0)}}e:{if(b=tt?ue(tt):window,nt=b.nodeName&&b.nodeName.toLowerCase(),nt==="select"||nt==="input"&&b.type==="file")var pt=ve;else if(me(b))if(we)pt=Fe;else{pt=De;var mt=Ce}else(nt=b.nodeName)&&nt.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(pt=Ee);if(pt&&(pt=pt(a,tt))){ne$1($,pt,c,rt);break e}mt&&mt(a,b,tt),a==="focusout"&&(mt=b._wrapperState)&&mt.controlled&&b.type==="number"&&cb(b,"number",b.value)}switch(mt=tt?ue(tt):window,a){case"focusin":(me(mt)||mt.contentEditable==="true")&&(Qe=mt,Re=tt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue($,c,rt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue($,c,rt)}var yt;if(ae$1)e:{switch(a){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else ie?ge(a,c)&&(xt="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(xt="onCompositionStart");xt&&(de&&c.locale!=="ko"&&(ie||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&ie&&(yt=nd()):(kd=rt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),mt=oe$1(tt,xt),0<mt.length&&(xt=new Ld(xt,a,null,c,rt),$.push({event:xt,listeners:mt}),yt?xt.data=yt:(yt=he(c),yt!==null&&(xt.data=yt)))),(yt=ce?je(a,c):ke(a,c))&&(tt=oe$1(tt,"onBeforeInput"),0<tt.length&&(rt=new Ld("onBeforeInput","beforeinput",null,c,rt),$.push({event:rt,listeners:tt}),rt.data=yt))}se$1($,e)})}function tf(a,e,c){return{instance:a,listener:e,currentTarget:c}}function oe$1(a,e){for(var c=e+"Capture",d=[];a!==null;){var h=a,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=Kb(a,c),g!=null&&d.unshift(tf(a,g,h)),g=Kb(a,e),g!=null&&d.push(tf(a,g,h))),a=a.return}return d}function vf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function wf(a,e,c,d,h){for(var g=e._reactName,_=[];c!==null&&c!==d;){var _e=c,et=_e.alternate,tt=_e.stateNode;if(et!==null&&et===d)break;_e.tag===5&&tt!==null&&(_e=tt,h?(et=Kb(c,g),et!=null&&_.unshift(tf(c,et,_e))):h||(et=Kb(c,g),et!=null&&_.push(tf(c,et,_e)))),c=c.return}_.length!==0&&a.push({event:e,listeners:_})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(a){return(typeof a=="string"?a:""+a).replace(xf,`
`).replace(yf,"")}function Af(a,e,c){if(e=zf(e),zf(a)!==e&&c)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(a,e){return a==="textarea"||a==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(a){return Hf.resolve(null).then(a).catch(If$2)}:Ff;function If$2(a){setTimeout(function(){throw a})}function Kf(a,e){var c=e,d=0;do{var h=c.nextSibling;if(a.removeChild(c),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(d===0){a.removeChild(h),bd(e);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=h}while(c);bd(e)}function Lf(a){for(;a!=null;a=a.nextSibling){var e=a.nodeType;if(e===1||e===3)break;if(e===8){if(e=a.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return a}function Mf(a){a=a.previousSibling;for(var e=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(e===0)return a;e--}else c==="/$"&&e++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(a){var e=a[Of];if(e)return e;for(var c=a.parentNode;c;){if(e=c[uf]||c[Of]){if(c=e.alternate,e.child!==null||c!==null&&c.child!==null)for(a=Mf(a);a!==null;){if(c=a[Of])return c;a=Mf(a)}return e}a=c,c=a.parentNode}return null}function Cb(a){return a=a[Of]||a[uf],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ue(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(p(33))}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}function E$1(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,e){Tf++,Sf[Tf]=a.current,a.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,e){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===e)return d.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in c)h[g]=e[g];return d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=h),h}function Zf(a){return a=a.childContextTypes,a!=null}function $f(){E$1(Wf),E$1(H)}function ag(a,e,c){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,c)}function bg(a,e,c){var d=a.stateNode;if(e=e.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var h in d)if(!(h in e))throw Error(p(108,Ra(a)||"Unknown",h));return A({},c,d)}function cg(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,a),G(Wf,Wf.current),!0}function dg(a,e,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,e,Xf),d.__reactInternalMemoizedMergedChildContext=a,E$1(Wf),E$1(H),G(H,a)):E$1(Wf),G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){eg===null?eg=[a]:eg.push(a)}function ig(a){fg=!0,hg(a)}function jg(){if(!gg&&eg!==null){gg=!0;var a=0,e=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(d!==null)}eg=null,fg=!1}catch(h){throw eg!==null&&(eg=eg.slice(a+1)),ac(fc,jg),h}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(a,e){kg[lg++]=ng,kg[lg++]=mg,mg=a,ng=e}function ug(a,e,c){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=a;var d=rg;a=sg;var h=32-oc(d)-1;d&=~(1<<h),c+=1;var g=32-oc(e)+h;if(30<g){var _=h-h%5;g=(d&(1<<_)-1).toString(32),d>>=_,h-=_,rg=1<<32-oc(e)+h|c<<h|d,sg=g+a}else rg=1<<g|c<<h|d,sg=a}function vg(a){a.return!==null&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(a,e){var c=Bg(5,null,null,0);c.elementType="DELETED",c.stateNode=e,c.return=a,e=a.deletions,e===null?(a.deletions=[c],a.flags|=16):e.push(c)}function Cg(a,e){switch(a.tag){case 5:var c=a.type;return e=e.nodeType!==1||c.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(a.stateNode=e,xg=a,yg=Lf(e.firstChild),!0):!1;case 6:return e=a.pendingProps===""||e.nodeType!==3?null:e,e!==null?(a.stateNode=e,xg=a,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(c=qg!==null?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:e,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=e,c.return=a,a.child=c,xg=a,yg=null,!0):!1;default:return!1}}function Dg(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Eg(a){if(I){var e=yg;if(e){var c=e;if(!Cg(a,e)){if(Dg(a))throw Error(p(418));e=Lf(c.nextSibling);var d=xg;e&&Cg(a,e)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2,I=!1,xg=a}}}function Fg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xg=a}function Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var e;if((e=a.tag!==3)&&!(e=a.tag!==5)&&(e=a.type,e=e!=="head"&&e!=="body"&&!Ef(a.type,a.memoizedProps)),e&&(e=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;e;)Ag(a,e),e=Lf(e.nextSibling)}if(Fg(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(p(317));e:{for(a=a.nextSibling,e=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"){if(e===0){yg=Lf(a.nextSibling);break e}e--}else c!=="$"&&c!=="$!"&&c!=="$?"||e++}a=a.nextSibling}yg=null}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(a){zg===null?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;function Lg(a,e,c){if(a=c.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var h=d,g=""+a;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===g?e.ref:(e=function(_){var _e=h.refs;_===null?delete _e[g]:_e[g]=_},e._stringRef=g,e)}if(typeof a!="string")throw Error(p(284));if(!c._owner)throw Error(p(290,a))}return a}function Mg(a,e){throw a=Object.prototype.toString.call(e),Error(p(31,a==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":a))}function Ng(a){var e=a._init;return e(a._payload)}function Og(a){function e(at,lt){if(a){var dt=at.deletions;dt===null?(at.deletions=[lt],at.flags|=16):dt.push(lt)}}function c(at,lt){if(!a)return null;for(;lt!==null;)e(at,lt),lt=lt.sibling;return null}function d(at,lt){for(at=new Map;lt!==null;)lt.key!==null?at.set(lt.key,lt):at.set(lt.index,lt),lt=lt.sibling;return at}function h(at,lt){return at=Pg(at,lt),at.index=0,at.sibling=null,at}function g(at,lt,dt){return at.index=dt,a?(dt=at.alternate,dt!==null?(dt=dt.index,dt<lt?(at.flags|=2,lt):dt):(at.flags|=2,lt)):(at.flags|=1048576,lt)}function _(at){return a&&at.alternate===null&&(at.flags|=2),at}function _e(at,lt,dt,ht){return lt===null||lt.tag!==6?(lt=Qg(dt,at.mode,ht),lt.return=at,lt):(lt=h(lt,dt),lt.return=at,lt)}function et(at,lt,dt,ht){var pt=dt.type;return pt===ya?rt(at,lt,dt.props.children,ht,dt.key):lt!==null&&(lt.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===Ha&&Ng(pt)===lt.type)?(ht=h(lt,dt.props),ht.ref=Lg(at,lt,dt),ht.return=at,ht):(ht=Rg(dt.type,dt.key,dt.props,null,at.mode,ht),ht.ref=Lg(at,lt,dt),ht.return=at,ht)}function tt(at,lt,dt,ht){return lt===null||lt.tag!==4||lt.stateNode.containerInfo!==dt.containerInfo||lt.stateNode.implementation!==dt.implementation?(lt=Sg(dt,at.mode,ht),lt.return=at,lt):(lt=h(lt,dt.children||[]),lt.return=at,lt)}function rt(at,lt,dt,ht,pt){return lt===null||lt.tag!==7?(lt=Tg(dt,at.mode,ht,pt),lt.return=at,lt):(lt=h(lt,dt),lt.return=at,lt)}function $(at,lt,dt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return lt=Qg(""+lt,at.mode,dt),lt.return=at,lt;if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case va:return dt=Rg(lt.type,lt.key,lt.props,null,at.mode,dt),dt.ref=Lg(at,null,lt),dt.return=at,dt;case wa:return lt=Sg(lt,at.mode,dt),lt.return=at,lt;case Ha:var ht=lt._init;return $(at,ht(lt._payload),dt)}if(eb(lt)||Ka(lt))return lt=Tg(lt,at.mode,dt,null),lt.return=at,lt;Mg(at,lt)}return null}function b(at,lt,dt,ht){var pt=lt!==null?lt.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number")return pt!==null?null:_e(at,lt,""+dt,ht);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case va:return dt.key===pt?et(at,lt,dt,ht):null;case wa:return dt.key===pt?tt(at,lt,dt,ht):null;case Ha:return pt=dt._init,b(at,lt,pt(dt._payload),ht)}if(eb(dt)||Ka(dt))return pt!==null?null:rt(at,lt,dt,ht,null);Mg(at,dt)}return null}function nt(at,lt,dt,ht,pt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return at=at.get(dt)||null,_e(lt,at,""+ht,pt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case va:return at=at.get(ht.key===null?dt:ht.key)||null,et(lt,at,ht,pt);case wa:return at=at.get(ht.key===null?dt:ht.key)||null,tt(lt,at,ht,pt);case Ha:var mt=ht._init;return nt(at,lt,dt,mt(ht._payload),pt)}if(eb(ht)||Ka(ht))return at=at.get(dt)||null,rt(lt,at,ht,pt,null);Mg(lt,ht)}return null}function st(at,lt,dt,ht){for(var pt=null,mt=null,yt=lt,xt=lt=0,gt=null;yt!==null&&xt<dt.length;xt++){yt.index>xt?(gt=yt,yt=null):gt=yt.sibling;var bt=b(at,yt,dt[xt],ht);if(bt===null){yt===null&&(yt=gt);break}a&&yt&&bt.alternate===null&&e(at,yt),lt=g(bt,lt,xt),mt===null?pt=bt:mt.sibling=bt,mt=bt,yt=gt}if(xt===dt.length)return c(at,yt),I&&tg(at,xt),pt;if(yt===null){for(;xt<dt.length;xt++)yt=$(at,dt[xt],ht),yt!==null&&(lt=g(yt,lt,xt),mt===null?pt=yt:mt.sibling=yt,mt=yt);return I&&tg(at,xt),pt}for(yt=d(at,yt);xt<dt.length;xt++)gt=nt(yt,at,xt,dt[xt],ht),gt!==null&&(a&&gt.alternate!==null&&yt.delete(gt.key===null?xt:gt.key),lt=g(gt,lt,xt),mt===null?pt=gt:mt.sibling=gt,mt=gt);return a&&yt.forEach(function(jt){return e(at,jt)}),I&&tg(at,xt),pt}function ot(at,lt,dt,ht){var pt=Ka(dt);if(typeof pt!="function")throw Error(p(150));if(dt=pt.call(dt),dt==null)throw Error(p(151));for(var mt=pt=null,yt=lt,xt=lt=0,gt=null,bt=dt.next();yt!==null&&!bt.done;xt++,bt=dt.next()){yt.index>xt?(gt=yt,yt=null):gt=yt.sibling;var jt=b(at,yt,bt.value,ht);if(jt===null){yt===null&&(yt=gt);break}a&&yt&&jt.alternate===null&&e(at,yt),lt=g(jt,lt,xt),mt===null?pt=jt:mt.sibling=jt,mt=jt,yt=gt}if(bt.done)return c(at,yt),I&&tg(at,xt),pt;if(yt===null){for(;!bt.done;xt++,bt=dt.next())bt=$(at,bt.value,ht),bt!==null&&(lt=g(bt,lt,xt),mt===null?pt=bt:mt.sibling=bt,mt=bt);return I&&tg(at,xt),pt}for(yt=d(at,yt);!bt.done;xt++,bt=dt.next())bt=nt(yt,at,xt,bt.value,ht),bt!==null&&(a&&bt.alternate!==null&&yt.delete(bt.key===null?xt:bt.key),lt=g(bt,lt,xt),mt===null?pt=bt:mt.sibling=bt,mt=bt);return a&&yt.forEach(function(Mt){return e(at,Mt)}),I&&tg(at,xt),pt}function it(at,lt,dt,ht){if(typeof dt=="object"&&dt!==null&&dt.type===ya&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case va:e:{for(var pt=dt.key,mt=lt;mt!==null;){if(mt.key===pt){if(pt=dt.type,pt===ya){if(mt.tag===7){c(at,mt.sibling),lt=h(mt,dt.props.children),lt.return=at,at=lt;break e}}else if(mt.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===Ha&&Ng(pt)===mt.type){c(at,mt.sibling),lt=h(mt,dt.props),lt.ref=Lg(at,mt,dt),lt.return=at,at=lt;break e}c(at,mt);break}else e(at,mt);mt=mt.sibling}dt.type===ya?(lt=Tg(dt.props.children,at.mode,ht,dt.key),lt.return=at,at=lt):(ht=Rg(dt.type,dt.key,dt.props,null,at.mode,ht),ht.ref=Lg(at,lt,dt),ht.return=at,at=ht)}return _(at);case wa:e:{for(mt=dt.key;lt!==null;){if(lt.key===mt)if(lt.tag===4&&lt.stateNode.containerInfo===dt.containerInfo&&lt.stateNode.implementation===dt.implementation){c(at,lt.sibling),lt=h(lt,dt.children||[]),lt.return=at,at=lt;break e}else{c(at,lt);break}else e(at,lt);lt=lt.sibling}lt=Sg(dt,at.mode,ht),lt.return=at,at=lt}return _(at);case Ha:return mt=dt._init,it(at,lt,mt(dt._payload),ht)}if(eb(dt))return st(at,lt,dt,ht);if(Ka(dt))return ot(at,lt,dt,ht);Mg(at,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"?(dt=""+dt,lt!==null&&lt.tag===6?(c(at,lt.sibling),lt=h(lt,dt),lt.return=at,at=lt):(c(at,lt),lt=Qg(dt,at.mode,ht),lt.return=at,at=lt),_(at)):c(at,lt)}return it}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(a){var e=Wg.current;E$1(Wg),a._currentValue=e}function bh(a,e,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&e)!==e?(a.childLanes|=e,d!==null&&(d.childLanes|=e)):d!==null&&(d.childLanes&e)!==e&&(d.childLanes|=e),a===c)break;a=a.return}}function ch(a,e){Xg=a,Zg=Yg=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&e&&(dh=!0),a.firstContext=null)}function eh(a){var e=a._currentValue;if(Zg!==a)if(a={context:a,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=a,Xg.dependencies={lanes:0,firstContext:a}}else Yg=Yg.next=a;return e}var fh=null;function gh(a){fh===null?fh=[a]:fh.push(a)}function hh(a,e,c,d){var h=e.interleaved;return h===null?(c.next=c,gh(e)):(c.next=h.next,h.next=c),e.interleaved=c,ih(a,d)}function ih(a,e){a.lanes|=e;var c=a.alternate;for(c!==null&&(c.lanes|=e),c=a,a=a.return;a!==null;)a.childLanes|=e,c=a.alternate,c!==null&&(c.childLanes|=e),c=a,a=a.return;return c.tag===3?c.stateNode:null}var jh=!1;function kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(a,e){a=a.updateQueue,e.updateQueue===a&&(e.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh(a,e){return{eventTime:a,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(a,e,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,K&2){var h=d.pending;return h===null?e.next=e:(e.next=h.next,h.next=e),d.pending=e,ih(a,c)}return h=d.interleaved,h===null?(e.next=e,gh(d)):(e.next=h.next,h.next=e),d.interleaved=e,ih(a,c)}function oh(a,e,c){if(e=e.updateQueue,e!==null&&(e=e.shared,(c&4194240)!==0)){var d=e.lanes;d&=a.pendingLanes,c|=d,e.lanes=c,Cc(a,c)}}function ph(a,e){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var h=null,g=null;if(c=c.firstBaseUpdate,c!==null){do{var _={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};g===null?h=g=_:g=g.next=_,c=c.next}while(c!==null);g===null?h=g=e:g=g.next=e}else h=g=e;c={baseState:d.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:d.shared,effects:d.effects},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=e:a.next=e,c.lastBaseUpdate=e}function qh(a,e,c,d){var h=a.updateQueue;jh=!1;var g=h.firstBaseUpdate,_=h.lastBaseUpdate,_e=h.shared.pending;if(_e!==null){h.shared.pending=null;var et=_e,tt=et.next;et.next=null,_===null?g=tt:_.next=tt,_=et;var rt=a.alternate;rt!==null&&(rt=rt.updateQueue,_e=rt.lastBaseUpdate,_e!==_&&(_e===null?rt.firstBaseUpdate=tt:_e.next=tt,rt.lastBaseUpdate=et))}if(g!==null){var $=h.baseState;_=0,rt=tt=et=null,_e=g;do{var b=_e.lane,nt=_e.eventTime;if((d&b)===b){rt!==null&&(rt=rt.next={eventTime:nt,lane:0,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null});e:{var st=a,ot=_e;switch(b=e,nt=c,ot.tag){case 1:if(st=ot.payload,typeof st=="function"){$=st.call(nt,$,b);break e}$=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=ot.payload,b=typeof st=="function"?st.call(nt,$,b):st,b==null)break e;$=A({},$,b);break e;case 2:jh=!0}}_e.callback!==null&&_e.lane!==0&&(a.flags|=64,b=h.effects,b===null?h.effects=[_e]:b.push(_e))}else nt={eventTime:nt,lane:b,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},rt===null?(tt=rt=nt,et=$):rt=rt.next=nt,_|=b;if(_e=_e.next,_e===null){if(_e=h.shared.pending,_e===null)break;b=_e,_e=b.next,b.next=null,h.lastBaseUpdate=b,h.shared.pending=null}}while(!0);if(rt===null&&(et=$),h.baseState=et,h.firstBaseUpdate=tt,h.lastBaseUpdate=rt,e=h.shared.interleaved,e!==null){h=e;do _|=h.lane,h=h.next;while(h!==e)}else g===null&&(h.shared.lanes=0);rh|=_,a.lanes=_,a.memoizedState=$}}function sh(a,e,c){if(a=e.effects,e.effects=null,a!==null)for(e=0;e<a.length;e++){var d=a[e],h=d.callback;if(h!==null){if(d.callback=null,d=c,typeof h!="function")throw Error(p(191,h));h.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(a){if(a===th)throw Error(p(174));return a}function yh(a,e){switch(G(wh,e),G(vh,a),G(uh,th),a=e.nodeType,a){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:a=a===8?e.parentNode:e,e=a.namespaceURI||null,a=a.tagName,e=lb(e,a)}E$1(uh),G(uh,e)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(a){xh(wh.current);var e=xh(uh.current),c=lb(e,a.type);e!==c&&(G(vh,a),G(uh,c))}function Bh(a){vh.current===a&&(E$1(uh),E$1(vh))}var L$1=Uf(0);function Ch(a){for(var e=a;e!==null;){if(e.tag===13){var c=e.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break;for(;e.sibling===null;){if(e.return===null||e.return===a)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p(321))}function Mh(a,e){if(e===null)return!1;for(var c=0;c<e.length&&c<a.length;c++)if(!He(a[c],e[c]))return!1;return!0}function Nh(a,e,c,d,h,g){if(Hh=g,M=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=a===null||a.memoizedState===null?Oh:Ph,a=c(d,h),Jh){g=0;do{if(Jh=!1,Kh=0,25<=g)throw Error(p(301));g+=1,O=N=null,e.updateQueue=null,Fh.current=Qh,a=c(d,h)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,e)throw Error(p(300));return a}function Sh(){var a=Kh!==0;return Kh=0,a}function Th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=a:O=O.next=a,O}function Uh(){if(N===null){var a=M.alternate;a=a!==null?a.memoizedState:null}else a=N.next;var e=O===null?M.memoizedState:O.next;if(e!==null)O=e,N=a;else{if(a===null)throw Error(p(310));N=a,a={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=a:O=O.next=a}return O}function Vh(a,e){return typeof e=="function"?e(a):e}function Wh(a){var e=Uh(),c=e.queue;if(c===null)throw Error(p(311));c.lastRenderedReducer=a;var d=N,h=d.baseQueue,g=c.pending;if(g!==null){if(h!==null){var _=h.next;h.next=g.next,g.next=_}d.baseQueue=h=g,c.pending=null}if(h!==null){g=h.next,d=d.baseState;var _e=_=null,et=null,tt=g;do{var rt=tt.lane;if((Hh&rt)===rt)et!==null&&(et=et.next={lane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),d=tt.hasEagerState?tt.eagerState:a(d,tt.action);else{var $={lane:rt,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null};et===null?(_e=et=$,_=d):et=et.next=$,M.lanes|=rt,rh|=rt}tt=tt.next}while(tt!==null&&tt!==g);et===null?_=d:et.next=_e,He(d,e.memoizedState)||(dh=!0),e.memoizedState=d,e.baseState=_,e.baseQueue=et,c.lastRenderedState=d}if(a=c.interleaved,a!==null){h=a;do g=h.lane,M.lanes|=g,rh|=g,h=h.next;while(h!==a)}else h===null&&(c.lanes=0);return[e.memoizedState,c.dispatch]}function Xh(a){var e=Uh(),c=e.queue;if(c===null)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,h=c.pending,g=e.memoizedState;if(h!==null){c.pending=null;var _=h=h.next;do g=a(g,_.action),_=_.next;while(_!==h);He(g,e.memoizedState)||(dh=!0),e.memoizedState=g,e.baseQueue===null&&(e.baseState=g),c.lastRenderedState=g}return[g,d]}function Yh(){}function Zh(a,e){var c=M,d=Uh(),h=e(),g=!He(d.memoizedState,h);if(g&&(d.memoizedState=h,dh=!0),d=d.queue,$h(ai.bind(null,c,d,a),[a]),d.getSnapshot!==e||g||O!==null&&O.memoizedState.tag&1){if(c.flags|=2048,bi(9,ci.bind(null,c,d,h,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(c,e,h)}return h}function di(a,e,c){a.flags|=16384,a={getSnapshot:e,value:c},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.stores=[a]):(c=e.stores,c===null?e.stores=[a]:c.push(a))}function ci(a,e,c,d){e.value=c,e.getSnapshot=d,ei(e)&&fi(a)}function ai(a,e,c){return c(function(){ei(e)&&fi(a)})}function ei(a){var e=a.getSnapshot;a=a.value;try{var c=e();return!He(a,c)}catch{return!0}}function fi(a){var e=ih(a,1);e!==null&&gi(e,a,1,-1)}function hi(a){var e=Th();return typeof a=="function"&&(a=a()),e.memoizedState=e.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a},e.queue=a,a=a.dispatch=ii.bind(null,M,a),[e.memoizedState,a]}function bi(a,e,c,d){return a={tag:a,create:e,destroy:c,deps:d,next:null},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.lastEffect=a.next=a):(c=e.lastEffect,c===null?e.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,e.lastEffect=a)),a}function ji(){return Uh().memoizedState}function ki(a,e,c,d){var h=Th();M.flags|=a,h.memoizedState=bi(1|e,c,void 0,d===void 0?null:d)}function li(a,e,c,d){var h=Uh();d=d===void 0?null:d;var g=void 0;if(N!==null){var _=N.memoizedState;if(g=_.destroy,d!==null&&Mh(d,_.deps)){h.memoizedState=bi(e,c,g,d);return}}M.flags|=a,h.memoizedState=bi(1|e,c,g,d)}function mi(a,e){return ki(8390656,8,a,e)}function $h(a,e){return li(2048,8,a,e)}function ni(a,e){return li(4,2,a,e)}function oi(a,e){return li(4,4,a,e)}function pi(a,e){if(typeof e=="function")return a=a(),e(a),function(){e(null)};if(e!=null)return a=a(),e.current=a,function(){e.current=null}}function qi(a,e,c){return c=c!=null?c.concat([a]):null,li(4,4,pi.bind(null,e,a),c)}function ri(){}function si(a,e){var c=Uh();e=e===void 0?null:e;var d=c.memoizedState;return d!==null&&e!==null&&Mh(e,d[1])?d[0]:(c.memoizedState=[a,e],a)}function ti(a,e){var c=Uh();e=e===void 0?null:e;var d=c.memoizedState;return d!==null&&e!==null&&Mh(e,d[1])?d[0]:(a=a(),c.memoizedState=[a,e],a)}function ui(a,e,c){return Hh&21?(He(c,e)||(c=yc(),M.lanes|=c,rh|=c,a.baseState=!0),e):(a.baseState&&(a.baseState=!1,dh=!0),a.memoizedState=c)}function vi(a,e){var c=C;C=c!==0&&4>c?c:4,a(!0);var d=Gh.transition;Gh.transition={};try{a(!1),e()}finally{C=c,Gh.transition=d}}function wi(){return Uh().memoizedState}function xi(a,e,c){var d=yi(a);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},zi(a))Ai(e,c);else if(c=hh(a,e,c,d),c!==null){var h=R();gi(c,a,d,h),Bi(c,e,d)}}function ii(a,e,c){var d=yi(a),h={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(e,h);else{var g=a.alternate;if(a.lanes===0&&(g===null||g.lanes===0)&&(g=e.lastRenderedReducer,g!==null))try{var _=e.lastRenderedState,_e=g(_,c);if(h.hasEagerState=!0,h.eagerState=_e,He(_e,_)){var et=e.interleaved;et===null?(h.next=h,gh(e)):(h.next=et.next,et.next=h),e.interleaved=h;return}}catch{}finally{}c=hh(a,e,h,d),c!==null&&(h=R(),gi(c,a,d,h),Bi(c,e,d))}}function zi(a){var e=a.alternate;return a===M||e!==null&&e===M}function Ai(a,e){Jh=Ih=!0;var c=a.pending;c===null?e.next=e:(e.next=c.next,c.next=e),a.pending=e}function Bi(a,e,c){if(c&4194240){var d=e.lanes;d&=a.pendingLanes,c|=d,e.lanes=c,Cc(a,c)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(a,e){return Th().memoizedState=[a,e===void 0?null:e],a},useContext:eh,useEffect:mi,useImperativeHandle:function(a,e,c){return c=c!=null?c.concat([a]):null,ki(4194308,4,pi.bind(null,e,a),c)},useLayoutEffect:function(a,e){return ki(4194308,4,a,e)},useInsertionEffect:function(a,e){return ki(4,2,a,e)},useMemo:function(a,e){var c=Th();return e=e===void 0?null:e,a=a(),c.memoizedState=[a,e],a},useReducer:function(a,e,c){var d=Th();return e=c!==void 0?c(e):e,d.memoizedState=d.baseState=e,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:e},d.queue=a,a=a.dispatch=xi.bind(null,M,a),[d.memoizedState,a]},useRef:function(a){var e=Th();return a={current:a},e.memoizedState=a},useState:hi,useDebugValue:ri,useDeferredValue:function(a){return Th().memoizedState=a},useTransition:function(){var a=hi(!1),e=a[0];return a=vi.bind(null,a[1]),Th().memoizedState=a,[e,a]},useMutableSource:function(){},useSyncExternalStore:function(a,e,c){var d=M,h=Th();if(I){if(c===void 0)throw Error(p(407));c=c()}else{if(c=e(),Q===null)throw Error(p(349));Hh&30||di(d,e,c)}h.memoizedState=c;var g={value:c,getSnapshot:e};return h.queue=g,mi(ai.bind(null,d,g,a),[a]),d.flags|=2048,bi(9,ci.bind(null,d,g,c,e),void 0,null),c},useId:function(){var a=Th(),e=Q.identifierPrefix;if(I){var c=sg,d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c,e=":"+e+"R"+c,c=Kh++,0<c&&(e+="H"+c.toString(32)),e+=":"}else c=Lh++,e=":"+e+"r"+c.toString(32)+":";return a.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var e=Uh();return ui(e,N.memoizedState,a)},useTransition:function(){var a=Wh(Vh)[0],e=Uh().memoizedState;return[a,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var e=Uh();return N===null?e.memoizedState=a:ui(e,N.memoizedState,a)},useTransition:function(){var a=Xh(Vh)[0],e=Uh().memoizedState;return[a,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(a,e){if(a&&a.defaultProps){e=A({},e),a=a.defaultProps;for(var c in a)e[c]===void 0&&(e[c]=a[c]);return e}return e}function Di(a,e,c,d){e=a.memoizedState,c=c(d,e),c=c==null?e:A({},e,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Ei={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,e,c){a=a._reactInternals;var d=R(),h=yi(a),g=mh(d,h);g.payload=e,c!=null&&(g.callback=c),e=nh(a,g,h),e!==null&&(gi(e,a,h,d),oh(e,a,h))},enqueueReplaceState:function(a,e,c){a=a._reactInternals;var d=R(),h=yi(a),g=mh(d,h);g.tag=1,g.payload=e,c!=null&&(g.callback=c),e=nh(a,g,h),e!==null&&(gi(e,a,h,d),oh(e,a,h))},enqueueForceUpdate:function(a,e){a=a._reactInternals;var c=R(),d=yi(a),h=mh(c,d);h.tag=2,e!=null&&(h.callback=e),e=nh(a,h,d),e!==null&&(gi(e,a,d,c),oh(e,a,d))}};function Fi(a,e,c,d,h,g,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,g,_):e.prototype&&e.prototype.isPureReactComponent?!Ie(c,d)||!Ie(h,g):!0}function Gi(a,e,c){var d=!1,h=Vf,g=e.contextType;return typeof g=="object"&&g!==null?g=eh(g):(h=Zf(e)?Xf:H.current,d=e.contextTypes,g=(d=d!=null)?Yf(a,h):Vf),e=new e(c,g),a.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,a.stateNode=e,e._reactInternals=a,d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=h,a.__reactInternalMemoizedMaskedChildContext=g),e}function Hi(a,e,c,d){a=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(c,d),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(c,d),e.state!==a&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(a,e,c,d){var h=a.stateNode;h.props=c,h.state=a.memoizedState,h.refs={},kh(a);var g=e.contextType;typeof g=="object"&&g!==null?h.context=eh(g):(g=Zf(e)?Xf:H.current,h.context=Yf(a,g)),h.state=a.memoizedState,g=e.getDerivedStateFromProps,typeof g=="function"&&(Di(a,e,g,c),h.state=a.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(e=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),e!==h.state&&Ei.enqueueReplaceState(h,h.state,null),qh(a,c,h,d),h.state=a.memoizedState),typeof h.componentDidMount=="function"&&(a.flags|=4194308)}function Ji(a,e){try{var c="",d=e;do c+=Pa(d),d=d.return;while(d);var h=c}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:a,source:e,stack:h,digest:null}}function Ki(a,e,c){return{value:a,source:null,stack:c??null,digest:e??null}}function Li(a,e){try{console.error(e.value)}catch(c){setTimeout(function(){throw c})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(a,e,c){c=mh(-1,c),c.tag=3,c.payload={element:null};var d=e.value;return c.callback=function(){Oi||(Oi=!0,Pi=d),Li(a,e)},c}function Qi(a,e,c){c=mh(-1,c),c.tag=3;var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var h=e.value;c.payload=function(){return d(h)},c.callback=function(){Li(a,e)}}var g=a.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(c.callback=function(){Li(a,e),typeof d!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var _=e.stack;this.componentDidCatch(e.value,{componentStack:_!==null?_:""})}),c}function Si(a,e,c){var d=a.pingCache;if(d===null){d=a.pingCache=new Mi;var h=new Set;d.set(e,h)}else h=d.get(e),h===void 0&&(h=new Set,d.set(e,h));h.has(c)||(h.add(c),a=Ti.bind(null,a,e,c),e.then(a,a))}function Ui(a){do{var e;if((e=a.tag===13)&&(e=a.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return a;a=a.return}while(a!==null);return null}function Vi(a,e,c,d,h){return a.mode&1?(a.flags|=65536,a.lanes=h,a):(a===e?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(e=mh(-1,1),e.tag=2,nh(c,e,1))),c.lanes|=1),a)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(a,e,c,d){e.child=a===null?Vg(e,null,c,d):Ug(e,a.child,c,d)}function Yi(a,e,c,d,h){c=c.render;var g=e.ref;return ch(e,h),d=Nh(a,e,c,d,g,h),c=Sh(),a!==null&&!dh?(e.updateQueue=a.updateQueue,e.flags&=-2053,a.lanes&=~h,Zi(a,e,h)):(I&&c&&vg(e),e.flags|=1,Xi(a,e,d,h),e.child)}function $i(a,e,c,d,h){if(a===null){var g=c.type;return typeof g=="function"&&!aj(g)&&g.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(e.tag=15,e.type=g,bj(a,e,g,d,h)):(a=Rg(c.type,null,d,e,e.mode,h),a.ref=e.ref,a.return=e,e.child=a)}if(g=a.child,!(a.lanes&h)){var _=g.memoizedProps;if(c=c.compare,c=c!==null?c:Ie,c(_,d)&&a.ref===e.ref)return Zi(a,e,h)}return e.flags|=1,a=Pg(g,d),a.ref=e.ref,a.return=e,e.child=a}function bj(a,e,c,d,h){if(a!==null){var g=a.memoizedProps;if(Ie(g,d)&&a.ref===e.ref)if(dh=!1,e.pendingProps=d=g,(a.lanes&h)!==0)a.flags&131072&&(dh=!0);else return e.lanes=a.lanes,Zi(a,e,h)}return cj(a,e,c,d,h)}function dj(a,e,c){var d=e.pendingProps,h=d.children,g=a!==null?a.memoizedState:null;if(d.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=c;else{if(!(c&1073741824))return a=g!==null?g.baseLanes|c:c,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:a,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=a,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:c,G(ej,fj),fj|=d}else g!==null?(d=g.baseLanes|c,e.memoizedState=null):d=c,G(ej,fj),fj|=d;return Xi(a,e,h,c),e.child}function gj(a,e){var c=e.ref;(a===null&&c!==null||a!==null&&a.ref!==c)&&(e.flags|=512,e.flags|=2097152)}function cj(a,e,c,d,h){var g=Zf(c)?Xf:H.current;return g=Yf(e,g),ch(e,h),c=Nh(a,e,c,d,g,h),d=Sh(),a!==null&&!dh?(e.updateQueue=a.updateQueue,e.flags&=-2053,a.lanes&=~h,Zi(a,e,h)):(I&&d&&vg(e),e.flags|=1,Xi(a,e,c,h),e.child)}function hj(a,e,c,d,h){if(Zf(c)){var g=!0;cg(e)}else g=!1;if(ch(e,h),e.stateNode===null)ij(a,e),Gi(e,c,d),Ii(e,c,d,h),d=!0;else if(a===null){var _=e.stateNode,_e=e.memoizedProps;_.props=_e;var et=_.context,tt=c.contextType;typeof tt=="object"&&tt!==null?tt=eh(tt):(tt=Zf(c)?Xf:H.current,tt=Yf(e,tt));var rt=c.getDerivedStateFromProps,$=typeof rt=="function"||typeof _.getSnapshotBeforeUpdate=="function";$||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(_e!==d||et!==tt)&&Hi(e,_,d,tt),jh=!1;var b=e.memoizedState;_.state=b,qh(e,d,_,h),et=e.memoizedState,_e!==d||b!==et||Wf.current||jh?(typeof rt=="function"&&(Di(e,c,rt,d),et=e.memoizedState),(_e=jh||Fi(e,c,_e,d,b,et,tt))?($||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(e.flags|=4194308)):(typeof _.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=d,e.memoizedState=et),_.props=d,_.state=et,_.context=tt,d=_e):(typeof _.componentDidMount=="function"&&(e.flags|=4194308),d=!1)}else{_=e.stateNode,lh(a,e),_e=e.memoizedProps,tt=e.type===e.elementType?_e:Ci(e.type,_e),_.props=tt,$=e.pendingProps,b=_.context,et=c.contextType,typeof et=="object"&&et!==null?et=eh(et):(et=Zf(c)?Xf:H.current,et=Yf(e,et));var nt=c.getDerivedStateFromProps;(rt=typeof nt=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(_e!==$||b!==et)&&Hi(e,_,d,et),jh=!1,b=e.memoizedState,_.state=b,qh(e,d,_,h);var st=e.memoizedState;_e!==$||b!==st||Wf.current||jh?(typeof nt=="function"&&(Di(e,c,nt,d),st=e.memoizedState),(tt=jh||Fi(e,c,tt,d,b,st,et)||!1)?(rt||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,st,et),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,st,et)),typeof _.componentDidUpdate=="function"&&(e.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof _.componentDidUpdate!="function"||_e===a.memoizedProps&&b===a.memoizedState||(e.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||_e===a.memoizedProps&&b===a.memoizedState||(e.flags|=1024),e.memoizedProps=d,e.memoizedState=st),_.props=d,_.state=st,_.context=et,d=tt):(typeof _.componentDidUpdate!="function"||_e===a.memoizedProps&&b===a.memoizedState||(e.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||_e===a.memoizedProps&&b===a.memoizedState||(e.flags|=1024),d=!1)}return jj(a,e,c,d,g,h)}function jj(a,e,c,d,h,g){gj(a,e);var _=(e.flags&128)!==0;if(!d&&!_)return h&&dg(e,c,!1),Zi(a,e,g);d=e.stateNode,Wi.current=e;var _e=_&&typeof c.getDerivedStateFromError!="function"?null:d.render();return e.flags|=1,a!==null&&_?(e.child=Ug(e,a.child,null,g),e.child=Ug(e,null,_e,g)):Xi(a,e,_e,g),e.memoizedState=d.state,h&&dg(e,c,!0),e.child}function kj(a){var e=a.stateNode;e.pendingContext?ag(a,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(a,e.context,!1),yh(a,e.containerInfo)}function lj(a,e,c,d,h){return Ig(),Jg(h),e.flags|=256,Xi(a,e,c,d),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}function oj(a,e,c){var d=e.pendingProps,h=L$1.current,g=!1,_=(e.flags&128)!==0,_e;if((_e=_)||(_e=a!==null&&a.memoizedState===null?!1:(h&2)!==0),_e?(g=!0,e.flags&=-129):(a===null||a.memoizedState!==null)&&(h|=1),G(L$1,h&1),a===null)return Eg(e),a=e.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(e.mode&1?a.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(_=d.children,a=d.fallback,g?(d=e.mode,g=e.child,_={mode:"hidden",children:_},!(d&1)&&g!==null?(g.childLanes=0,g.pendingProps=_):g=pj(_,d,0,null),a=Tg(a,d,c,null),g.return=e,a.return=e,g.sibling=a,e.child=g,e.child.memoizedState=nj(c),e.memoizedState=mj,a):qj(e,_));if(h=a.memoizedState,h!==null&&(_e=h.dehydrated,_e!==null))return rj(a,e,_,d,_e,h,c);if(g){g=d.fallback,_=e.mode,h=a.child,_e=h.sibling;var et={mode:"hidden",children:d.children};return!(_&1)&&e.child!==h?(d=e.child,d.childLanes=0,d.pendingProps=et,e.deletions=null):(d=Pg(h,et),d.subtreeFlags=h.subtreeFlags&14680064),_e!==null?g=Pg(_e,g):(g=Tg(g,_,c,null),g.flags|=2),g.return=e,d.return=e,d.sibling=g,e.child=d,d=g,g=e.child,_=a.child.memoizedState,_=_===null?nj(c):{baseLanes:_.baseLanes|c,cachePool:null,transitions:_.transitions},g.memoizedState=_,g.childLanes=a.childLanes&~c,e.memoizedState=mj,d}return g=a.child,a=g.sibling,d=Pg(g,{mode:"visible",children:d.children}),!(e.mode&1)&&(d.lanes=c),d.return=e,d.sibling=null,a!==null&&(c=e.deletions,c===null?(e.deletions=[a],e.flags|=16):c.push(a)),e.child=d,e.memoizedState=null,d}function qj(a,e){return e=pj({mode:"visible",children:e},a.mode,0,null),e.return=a,a.child=e}function sj(a,e,c,d){return d!==null&&Jg(d),Ug(e,a.child,null,c),a=qj(e,e.pendingProps.children),a.flags|=2,e.memoizedState=null,a}function rj(a,e,c,d,h,g,_){if(c)return e.flags&256?(e.flags&=-257,d=Ki(Error(p(422))),sj(a,e,_,d)):e.memoizedState!==null?(e.child=a.child,e.flags|=128,null):(g=d.fallback,h=e.mode,d=pj({mode:"visible",children:d.children},h,0,null),g=Tg(g,h,_,null),g.flags|=2,d.return=e,g.return=e,d.sibling=g,e.child=d,e.mode&1&&Ug(e,a.child,null,_),e.child.memoizedState=nj(_),e.memoizedState=mj,g);if(!(e.mode&1))return sj(a,e,_,null);if(h.data==="$!"){if(d=h.nextSibling&&h.nextSibling.dataset,d)var _e=d.dgst;return d=_e,g=Error(p(419)),d=Ki(g,d,void 0),sj(a,e,_,d)}if(_e=(_&a.childLanes)!==0,dh||_e){if(d=Q,d!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(d.suspendedLanes|_)?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,ih(a,h),gi(d,a,h,-1))}return tj(),d=Ki(Error(p(421))),sj(a,e,_,d)}return h.data==="$?"?(e.flags|=128,e.child=a.child,e=uj.bind(null,a),h._reactRetry=e,null):(a=g.treeContext,yg=Lf(h.nextSibling),xg=e,I=!0,zg=null,a!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=e),e=qj(e,d.children),e.flags|=4096,e)}function vj(a,e,c){a.lanes|=e;var d=a.alternate;d!==null&&(d.lanes|=e),bh(a.return,e,c)}function wj(a,e,c,d,h){var g=a.memoizedState;g===null?a.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:h}:(g.isBackwards=e,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=h)}function xj(a,e,c){var d=e.pendingProps,h=d.revealOrder,g=d.tail;if(Xi(a,e,d.children,c),d=L$1.current,d&2)d=d&1|2,e.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=e.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&vj(a,c,e);else if(a.tag===19)vj(a,c,e);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}if(G(L$1,d),!(e.mode&1))e.memoizedState=null;else switch(h){case"forwards":for(c=e.child,h=null;c!==null;)a=c.alternate,a!==null&&Ch(a)===null&&(h=c),c=c.sibling;c=h,c===null?(h=e.child,e.child=null):(h=c.sibling,c.sibling=null),wj(e,!1,h,c,g);break;case"backwards":for(c=null,h=e.child,e.child=null;h!==null;){if(a=h.alternate,a!==null&&Ch(a)===null){e.child=h;break}a=h.sibling,h.sibling=c,c=h,h=a}wj(e,!0,c,null,g);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(a,e){!(e.mode&1)&&a!==null&&(a.alternate=null,e.alternate=null,e.flags|=2)}function Zi(a,e,c){if(a!==null&&(e.dependencies=a.dependencies),rh|=e.lanes,!(c&e.childLanes))return null;if(a!==null&&e.child!==a.child)throw Error(p(153));if(e.child!==null){for(a=e.child,c=Pg(a,a.pendingProps),e.child=c,c.return=e;a.sibling!==null;)a=a.sibling,c=c.sibling=Pg(a,a.pendingProps),c.return=e;c.sibling=null}return e.child}function yj(a,e,c){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var d=e.type._context,h=e.memoizedProps.value;G(Wg,d._currentValue),d._currentValue=h;break;case 13:if(d=e.memoizedState,d!==null)return d.dehydrated!==null?(G(L$1,L$1.current&1),e.flags|=128,null):c&e.child.childLanes?oj(a,e,c):(G(L$1,L$1.current&1),a=Zi(a,e,c),a!==null?a.sibling:null);G(L$1,L$1.current&1);break;case 19:if(d=(c&e.childLanes)!==0,a.flags&128){if(d)return xj(a,e,c);e.flags|=128}if(h=e.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),G(L$1,L$1.current),d)break;return null;case 22:case 23:return e.lanes=0,dj(a,e,c)}return Zi(a,e,c)}var zj,Aj,Bj,Cj;zj=function(a,e){for(var c=e.child;c!==null;){if(c.tag===5||c.tag===6)a.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break;for(;c.sibling===null;){if(c.return===null||c.return===e)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};Aj=function(){};Bj=function(a,e,c,d){var h=a.memoizedProps;if(h!==d){a=e.stateNode,xh(uh.current);var g=null;switch(c){case"input":h=Ya(a,h),d=Ya(a,d),g=[];break;case"select":h=A({},h,{value:void 0}),d=A({},d,{value:void 0}),g=[];break;case"textarea":h=gb(a,h),d=gb(a,d),g=[];break;default:typeof h.onClick!="function"&&typeof d.onClick=="function"&&(a.onclick=Bf)}ub(c,d);var _;c=null;for(tt in h)if(!d.hasOwnProperty(tt)&&h.hasOwnProperty(tt)&&h[tt]!=null)if(tt==="style"){var _e=h[tt];for(_ in _e)_e.hasOwnProperty(_)&&(c||(c={}),c[_]="")}else tt!=="dangerouslySetInnerHTML"&&tt!=="children"&&tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&tt!=="autoFocus"&&(ea.hasOwnProperty(tt)?g||(g=[]):(g=g||[]).push(tt,null));for(tt in d){var et=d[tt];if(_e=h!=null?h[tt]:void 0,d.hasOwnProperty(tt)&&et!==_e&&(et!=null||_e!=null))if(tt==="style")if(_e){for(_ in _e)!_e.hasOwnProperty(_)||et&&et.hasOwnProperty(_)||(c||(c={}),c[_]="");for(_ in et)et.hasOwnProperty(_)&&_e[_]!==et[_]&&(c||(c={}),c[_]=et[_])}else c||(g||(g=[]),g.push(tt,c)),c=et;else tt==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,_e=_e?_e.__html:void 0,et!=null&&_e!==et&&(g=g||[]).push(tt,et)):tt==="children"?typeof et!="string"&&typeof et!="number"||(g=g||[]).push(tt,""+et):tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(tt)?(et!=null&&tt==="onScroll"&&D$1("scroll",a),g||_e===et||(g=[])):(g=g||[]).push(tt,et))}c&&(g=g||[]).push("style",c);var tt=g;(e.updateQueue=tt)&&(e.flags|=4)}};Cj=function(a,e,c,d){c!==d&&(e.flags|=4)};function Dj(a,e){if(!I)switch(a.tailMode){case"hidden":e=a.tail;for(var c=null;e!==null;)e.alternate!==null&&(c=e),e=e.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?e||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function S(a){var e=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(e)for(var h=a.child;h!==null;)c|=h.lanes|h.childLanes,d|=h.subtreeFlags&14680064,d|=h.flags&14680064,h.return=a,h=h.sibling;else for(h=a.child;h!==null;)c|=h.lanes|h.childLanes,d|=h.subtreeFlags,d|=h.flags,h.return=a,h=h.sibling;return a.subtreeFlags|=d,a.childLanes=c,e}function Ej(a,e,c){var d=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return d=e.stateNode,zh(),E$1(Wf),E$1(H),Eh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Gg(e)?e.flags|=4:a===null||a.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(a,e),S(e),null;case 5:Bh(e);var h=xh(wh.current);if(c=e.type,a!==null&&e.stateNode!=null)Bj(a,e,c,d,h),a.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!d){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(a=xh(uh.current),Gg(e)){d=e.stateNode,c=e.type;var g=e.memoizedProps;switch(d[Of]=e,d[Pf]=g,a=(e.mode&1)!==0,c){case"dialog":D$1("cancel",d),D$1("close",d);break;case"iframe":case"object":case"embed":D$1("load",d);break;case"video":case"audio":for(h=0;h<lf.length;h++)D$1(lf[h],d);break;case"source":D$1("error",d);break;case"img":case"image":case"link":D$1("error",d),D$1("load",d);break;case"details":D$1("toggle",d);break;case"input":Za(d,g),D$1("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},D$1("invalid",d);break;case"textarea":hb(d,g),D$1("invalid",d)}ub(c,g),h=null;for(var _ in g)if(g.hasOwnProperty(_)){var _e=g[_];_==="children"?typeof _e=="string"?d.textContent!==_e&&(g.suppressHydrationWarning!==!0&&Af(d.textContent,_e,a),h=["children",_e]):typeof _e=="number"&&d.textContent!==""+_e&&(g.suppressHydrationWarning!==!0&&Af(d.textContent,_e,a),h=["children",""+_e]):ea.hasOwnProperty(_)&&_e!=null&&_==="onScroll"&&D$1("scroll",d)}switch(c){case"input":Va(d),db(d,g,!0);break;case"textarea":Va(d),jb(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Bf)}d=h,e.updateQueue=d,d!==null&&(e.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=kb(c)),a==="http://www.w3.org/1999/xhtml"?c==="script"?(a=_.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof d.is=="string"?a=_.createElement(c,{is:d.is}):(a=_.createElement(c),c==="select"&&(_=a,d.multiple?_.multiple=!0:d.size&&(_.size=d.size))):a=_.createElementNS(a,c),a[Of]=e,a[Pf]=d,zj(a,e,!1,!1),e.stateNode=a;e:{switch(_=vb(c,d),c){case"dialog":D$1("cancel",a),D$1("close",a),h=d;break;case"iframe":case"object":case"embed":D$1("load",a),h=d;break;case"video":case"audio":for(h=0;h<lf.length;h++)D$1(lf[h],a);h=d;break;case"source":D$1("error",a),h=d;break;case"img":case"image":case"link":D$1("error",a),D$1("load",a),h=d;break;case"details":D$1("toggle",a),h=d;break;case"input":Za(a,d),h=Ya(a,d),D$1("invalid",a);break;case"option":h=d;break;case"select":a._wrapperState={wasMultiple:!!d.multiple},h=A({},d,{value:void 0}),D$1("invalid",a);break;case"textarea":hb(a,d),h=gb(a,d),D$1("invalid",a);break;default:h=d}ub(c,h),_e=h;for(g in _e)if(_e.hasOwnProperty(g)){var et=_e[g];g==="style"?sb(a,et):g==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,et!=null&&nb(a,et)):g==="children"?typeof et=="string"?(c!=="textarea"||et!=="")&&ob(a,et):typeof et=="number"&&ob(a,""+et):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(ea.hasOwnProperty(g)?et!=null&&g==="onScroll"&&D$1("scroll",a):et!=null&&ta(a,g,et,_))}switch(c){case"input":Va(a),db(a,d,!1);break;case"textarea":Va(a),jb(a);break;case"option":d.value!=null&&a.setAttribute("value",""+Sa(d.value));break;case"select":a.multiple=!!d.multiple,g=d.value,g!=null?fb(a,!!d.multiple,g,!1):d.defaultValue!=null&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:typeof h.onClick=="function"&&(a.onclick=Bf)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(a&&e.stateNode!=null)Cj(a,e,a.memoizedProps,d);else{if(typeof d!="string"&&e.stateNode===null)throw Error(p(166));if(c=xh(wh.current),xh(uh.current),Gg(e)){if(d=e.stateNode,c=e.memoizedProps,d[Of]=e,(g=d.nodeValue!==c)&&(a=xg,a!==null))switch(a.tag){case 3:Af(d.nodeValue,c,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Af(d.nodeValue,c,(a.mode&1)!==0)}g&&(e.flags|=4)}else d=(c.nodeType===9?c:c.ownerDocument).createTextNode(d),d[Of]=e,e.stateNode=d}return S(e),null;case 13:if(E$1(L$1),d=e.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,g=!1;else if(g=Gg(e),d!==null&&d.dehydrated!==null){if(a===null){if(!g)throw Error(p(318));if(g=e.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(p(317));g[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),g=!1}else zg!==null&&(Fj(zg),zg=null),g=!0;if(!g)return e.flags&65536?e:null}return e.flags&128?(e.lanes=c,e):(d=d!==null,d!==(a!==null&&a.memoizedState!==null)&&d&&(e.child.flags|=8192,e.mode&1&&(a===null||L$1.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(a,e),a===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E$1(L$1),g=e.memoizedState,g===null)return S(e),null;if(d=(e.flags&128)!==0,_=g.rendering,_===null)if(d)Dj(g,!1);else{if(T!==0||a!==null&&a.flags&128)for(a=e.child;a!==null;){if(_=Ch(a),_!==null){for(e.flags|=128,Dj(g,!1),d=_.updateQueue,d!==null&&(e.updateQueue=d,e.flags|=4),e.subtreeFlags=0,d=c,c=e.child;c!==null;)g=c,a=d,g.flags&=14680066,_=g.alternate,_===null?(g.childLanes=0,g.lanes=a,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=_.childLanes,g.lanes=_.lanes,g.child=_.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=_.memoizedProps,g.memoizedState=_.memoizedState,g.updateQueue=_.updateQueue,g.type=_.type,a=_.dependencies,g.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;return G(L$1,L$1.current&1|2),e.child}a=a.sibling}g.tail!==null&&B()>Gj&&(e.flags|=128,d=!0,Dj(g,!1),e.lanes=4194304)}else{if(!d)if(a=Ch(_),a!==null){if(e.flags|=128,d=!0,c=a.updateQueue,c!==null&&(e.updateQueue=c,e.flags|=4),Dj(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!I)return S(e),null}else 2*B()-g.renderingStartTime>Gj&&c!==1073741824&&(e.flags|=128,d=!0,Dj(g,!1),e.lanes=4194304);g.isBackwards?(_.sibling=e.child,e.child=_):(c=g.last,c!==null?c.sibling=_:e.child=_,g.last=_)}return g.tail!==null?(e=g.tail,g.rendering=e,g.tail=e.sibling,g.renderingStartTime=B(),e.sibling=null,c=L$1.current,G(L$1,d?c&1|2:c&1),e):(S(e),null);case 22:case 23:return Hj(),d=e.memoizedState!==null,a!==null&&a.memoizedState!==null!==d&&(e.flags|=8192),d&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(a,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),a=e.flags,a&65536?(e.flags=a&-65537|128,e):null;case 3:return zh(),E$1(Wf),E$1(H),Eh(),a=e.flags,a&65536&&!(a&128)?(e.flags=a&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E$1(L$1),a=e.memoizedState,a!==null&&a.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return a=e.flags,a&65536?(e.flags=a&-65537|128,e):null;case 19:return E$1(L$1),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(a,e){var c=a.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){W(a,e,d)}else c.current=null}function Mj(a,e,c){try{c()}catch(d){W(a,e,d)}}var Nj=!1;function Oj(a,e){if(Cf=dd,a=Me(),Ne(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var h=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{c.nodeType,g.nodeType}catch{c=null;break e}var _=0,_e=-1,et=-1,tt=0,rt=0,$=a,b=null;t:for(;;){for(var nt;$!==c||h!==0&&$.nodeType!==3||(_e=_+h),$!==g||d!==0&&$.nodeType!==3||(et=_+d),$.nodeType===3&&(_+=$.nodeValue.length),(nt=$.firstChild)!==null;)b=$,$=nt;for(;;){if($===a)break t;if(b===c&&++tt===h&&(_e=_),b===g&&++rt===d&&(et=_),(nt=$.nextSibling)!==null)break;$=b,b=$.parentNode}$=nt}c=_e===-1||et===-1?null:{start:_e,end:et}}else c=null}c=c||{start:0,end:0}}else c=null;for(Df={focusedElem:a,selectionRange:c},dd=!1,V=e;V!==null;)if(e=V,a=e.child,(e.subtreeFlags&1028)!==0&&a!==null)a.return=e,V=a;else for(;V!==null;){e=V;try{var st=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(st!==null){var ot=st.memoizedProps,it=st.memoizedState,at=e.stateNode,lt=at.getSnapshotBeforeUpdate(e.elementType===e.type?ot:Ci(e.type,ot),it);at.__reactInternalSnapshotBeforeUpdate=lt}break;case 3:var dt=e.stateNode.containerInfo;dt.nodeType===1?dt.textContent="":dt.nodeType===9&&dt.documentElement&&dt.removeChild(dt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(ht){W(e,e.return,ht)}if(a=e.sibling,a!==null){a.return=e.return,V=a;break}V=e.return}return st=Nj,Nj=!1,st}function Pj(a,e,c){var d=e.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var h=d=d.next;do{if((h.tag&a)===a){var g=h.destroy;h.destroy=void 0,g!==void 0&&Mj(e,c,g)}h=h.next}while(h!==d)}}function Qj(a,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var c=e=e.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==e)}}function Rj(a){var e=a.ref;if(e!==null){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}typeof e=="function"?e(a):e.current=a}}function Sj(a){var e=a.alternate;e!==null&&(a.alternate=null,Sj(e)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(e=a.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Tj(a){return a.tag===5||a.tag===3||a.tag===4}function Uj(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Tj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Vj(a,e,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,e?c.nodeType===8?c.parentNode.insertBefore(a,e):c.insertBefore(a,e):(c.nodeType===8?(e=c.parentNode,e.insertBefore(a,c)):(e=c,e.appendChild(a)),c=c._reactRootContainer,c!=null||e.onclick!==null||(e.onclick=Bf));else if(d!==4&&(a=a.child,a!==null))for(Vj(a,e,c),a=a.sibling;a!==null;)Vj(a,e,c),a=a.sibling}function Wj(a,e,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,e?c.insertBefore(a,e):c.appendChild(a);else if(d!==4&&(a=a.child,a!==null))for(Wj(a,e,c),a=a.sibling;a!==null;)Wj(a,e,c),a=a.sibling}var X$1=null,Xj=!1;function Yj(a,e,c){for(c=c.child;c!==null;)Zj(a,e,c),c=c.sibling}function Zj(a,e,c){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,c)}catch{}switch(c.tag){case 5:U$1||Lj(c,e);case 6:var d=X$1,h=Xj;X$1=null,Yj(a,e,c),X$1=d,Xj=h,X$1!==null&&(Xj?(a=X$1,c=c.stateNode,a.nodeType===8?a.parentNode.removeChild(c):a.removeChild(c)):X$1.removeChild(c.stateNode));break;case 18:X$1!==null&&(Xj?(a=X$1,c=c.stateNode,a.nodeType===8?Kf(a.parentNode,c):a.nodeType===1&&Kf(a,c),bd(a)):Kf(X$1,c.stateNode));break;case 4:d=X$1,h=Xj,X$1=c.stateNode.containerInfo,Xj=!0,Yj(a,e,c),X$1=d,Xj=h;break;case 0:case 11:case 14:case 15:if(!U$1&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){h=d=d.next;do{var g=h,_=g.destroy;g=g.tag,_!==void 0&&(g&2||g&4)&&Mj(c,e,_),h=h.next}while(h!==d)}Yj(a,e,c);break;case 1:if(!U$1&&(Lj(c,e),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(_e){W(c,e,_e)}Yj(a,e,c);break;case 21:Yj(a,e,c);break;case 22:c.mode&1?(U$1=(d=U$1)||c.memoizedState!==null,Yj(a,e,c),U$1=d):Yj(a,e,c);break;default:Yj(a,e,c)}}function ak(a){var e=a.updateQueue;if(e!==null){a.updateQueue=null;var c=a.stateNode;c===null&&(c=a.stateNode=new Kj),e.forEach(function(d){var h=bk.bind(null,a,d);c.has(d)||(c.add(d),d.then(h,h))})}}function ck(a,e){var c=e.deletions;if(c!==null)for(var d=0;d<c.length;d++){var h=c[d];try{var g=a,_=e,_e=_;e:for(;_e!==null;){switch(_e.tag){case 5:X$1=_e.stateNode,Xj=!1;break e;case 3:X$1=_e.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=_e.stateNode.containerInfo,Xj=!0;break e}_e=_e.return}if(X$1===null)throw Error(p(160));Zj(g,_,h),X$1=null,Xj=!1;var et=h.alternate;et!==null&&(et.return=null),h.return=null}catch(tt){W(h,e,tt)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,a),e=e.sibling}function dk(a,e){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ck(e,a),ek(a),d&4){try{Pj(3,a,a.return),Qj(3,a)}catch(ot){W(a,a.return,ot)}try{Pj(5,a,a.return)}catch(ot){W(a,a.return,ot)}}break;case 1:ck(e,a),ek(a),d&512&&c!==null&&Lj(c,c.return);break;case 5:if(ck(e,a),ek(a),d&512&&c!==null&&Lj(c,c.return),a.flags&32){var h=a.stateNode;try{ob(h,"")}catch(ot){W(a,a.return,ot)}}if(d&4&&(h=a.stateNode,h!=null)){var g=a.memoizedProps,_=c!==null?c.memoizedProps:g,_e=a.type,et=a.updateQueue;if(a.updateQueue=null,et!==null)try{_e==="input"&&g.type==="radio"&&g.name!=null&&ab(h,g),vb(_e,_);var tt=vb(_e,g);for(_=0;_<et.length;_+=2){var rt=et[_],$=et[_+1];rt==="style"?sb(h,$):rt==="dangerouslySetInnerHTML"?nb(h,$):rt==="children"?ob(h,$):ta(h,rt,$,tt)}switch(_e){case"input":bb(h,g);break;case"textarea":ib(h,g);break;case"select":var b=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var nt=g.value;nt!=null?fb(h,!!g.multiple,nt,!1):b!==!!g.multiple&&(g.defaultValue!=null?fb(h,!!g.multiple,g.defaultValue,!0):fb(h,!!g.multiple,g.multiple?[]:"",!1))}h[Pf]=g}catch(ot){W(a,a.return,ot)}}break;case 6:if(ck(e,a),ek(a),d&4){if(a.stateNode===null)throw Error(p(162));h=a.stateNode,g=a.memoizedProps;try{h.nodeValue=g}catch(ot){W(a,a.return,ot)}}break;case 3:if(ck(e,a),ek(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(ot){W(a,a.return,ot)}break;case 4:ck(e,a),ek(a);break;case 13:ck(e,a),ek(a),h=a.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(fk=B())),d&4&&ak(a);break;case 22:if(rt=c!==null&&c.memoizedState!==null,a.mode&1?(U$1=(tt=U$1)||rt,ck(e,a),U$1=tt):ck(e,a),ek(a),d&8192){if(tt=a.memoizedState!==null,(a.stateNode.isHidden=tt)&&!rt&&a.mode&1)for(V=a,rt=a.child;rt!==null;){for($=V=rt;V!==null;){switch(b=V,nt=b.child,b.tag){case 0:case 11:case 14:case 15:Pj(4,b,b.return);break;case 1:Lj(b,b.return);var st=b.stateNode;if(typeof st.componentWillUnmount=="function"){d=b,c=b.return;try{e=d,st.props=e.memoizedProps,st.state=e.memoizedState,st.componentWillUnmount()}catch(ot){W(d,c,ot)}}break;case 5:Lj(b,b.return);break;case 22:if(b.memoizedState!==null){gk($);continue}}nt!==null?(nt.return=b,V=nt):gk($)}rt=rt.sibling}e:for(rt=null,$=a;;){if($.tag===5){if(rt===null){rt=$;try{h=$.stateNode,tt?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(_e=$.stateNode,et=$.memoizedProps.style,_=et!=null&&et.hasOwnProperty("display")?et.display:null,_e.style.display=rb("display",_))}catch(ot){W(a,a.return,ot)}}}else if($.tag===6){if(rt===null)try{$.stateNode.nodeValue=tt?"":$.memoizedProps}catch(ot){W(a,a.return,ot)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===a)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===a)break e;for(;$.sibling===null;){if($.return===null||$.return===a)break e;rt===$&&(rt=null),$=$.return}rt===$&&(rt=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:ck(e,a),ek(a),d&4&&ak(a);break;case 21:break;default:ck(e,a),ek(a)}}function ek(a){var e=a.flags;if(e&2){try{e:{for(var c=a.return;c!==null;){if(Tj(c)){var d=c;break e}c=c.return}throw Error(p(160))}switch(d.tag){case 5:var h=d.stateNode;d.flags&32&&(ob(h,""),d.flags&=-33);var g=Uj(a);Wj(a,g,h);break;case 3:case 4:var _=d.stateNode.containerInfo,_e=Uj(a);Vj(a,_e,_);break;default:throw Error(p(161))}}catch(et){W(a,a.return,et)}a.flags&=-3}e&4096&&(a.flags&=-4097)}function hk(a,e,c){V=a,ik(a)}function ik(a,e,c){for(var d=(a.mode&1)!==0;V!==null;){var h=V,g=h.child;if(h.tag===22&&d){var _=h.memoizedState!==null||Jj;if(!_){var _e=h.alternate,et=_e!==null&&_e.memoizedState!==null||U$1;_e=Jj;var tt=U$1;if(Jj=_,(U$1=et)&&!tt)for(V=h;V!==null;)_=V,et=_.child,_.tag===22&&_.memoizedState!==null?jk(h):et!==null?(et.return=_,V=et):jk(h);for(;g!==null;)V=g,ik(g),g=g.sibling;V=h,Jj=_e,U$1=tt}kk(a)}else h.subtreeFlags&8772&&g!==null?(g.return=h,V=g):kk(a)}}function kk(a){for(;V!==null;){var e=V;if(e.flags&8772){var c=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U$1||Qj(5,e);break;case 1:var d=e.stateNode;if(e.flags&4&&!U$1)if(c===null)d.componentDidMount();else{var h=e.elementType===e.type?c.memoizedProps:Ci(e.type,c.memoizedProps);d.componentDidUpdate(h,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=e.updateQueue;g!==null&&sh(e,g,d);break;case 3:var _=e.updateQueue;if(_!==null){if(c=null,e.child!==null)switch(e.child.tag){case 5:c=e.child.stateNode;break;case 1:c=e.child.stateNode}sh(e,_,c)}break;case 5:var _e=e.stateNode;if(c===null&&e.flags&4){c=_e;var et=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":et.autoFocus&&c.focus();break;case"img":et.src&&(c.src=et.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var tt=e.alternate;if(tt!==null){var rt=tt.memoizedState;if(rt!==null){var $=rt.dehydrated;$!==null&&bd($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U$1||e.flags&512&&Rj(e)}catch(b){W(e,e.return,b)}}if(e===a){V=null;break}if(c=e.sibling,c!==null){c.return=e.return,V=c;break}V=e.return}}function gk(a){for(;V!==null;){var e=V;if(e===a){V=null;break}var c=e.sibling;if(c!==null){c.return=e.return,V=c;break}V=e.return}}function jk(a){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var c=e.return;try{Qj(4,e)}catch(et){W(e,c,et)}break;case 1:var d=e.stateNode;if(typeof d.componentDidMount=="function"){var h=e.return;try{d.componentDidMount()}catch(et){W(e,h,et)}}var g=e.return;try{Rj(e)}catch(et){W(e,g,et)}break;case 5:var _=e.return;try{Rj(e)}catch(et){W(e,_,et)}}}catch(et){W(e,e.return,et)}if(e===a){V=null;break}var _e=e.sibling;if(_e!==null){_e.return=e.return,V=_e;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(a){return a.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(a=C,a!==0||(a=window.event,a=a===void 0?16:jd(a.type)),a):1}function gi(a,e,c,d){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(a,c,d),(!(K&2)||a!==Q)&&(a===Q&&(!(K&2)&&(qk|=c),T===4&&Ck(a,Z)),Dk(a,d),c===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(a,e){var c=a.callbackNode;wc(a,e);var d=uc(a,a===Q?Z:0);if(d===0)c!==null&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(e=d&-d,a.callbackPriority!==e){if(c!=null&&bc(c),e===1)a.tag===0?ig(Ek.bind(null,a)):hg(Ek.bind(null,a)),Jf(function(){!(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Fk(c,Gk.bind(null,a))}a.callbackPriority=e,a.callbackNode=c}}function Gk(a,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var c=a.callbackNode;if(Hk()&&a.callbackNode!==c)return null;var d=uc(a,a===Q?Z:0);if(d===0)return null;if(d&30||d&a.expiredLanes||e)e=Ik(a,d);else{e=d;var h=K;K|=2;var g=Jk();(Q!==a||Z!==e)&&(uk=null,Gj=B()+500,Kk(a,e));do try{Lk();break}catch(_e){Mk(a,_e)}while(!0);$g(),mk.current=g,K=h,Y!==null?e=0:(Q=null,Z=0,e=T)}if(e!==0){if(e===2&&(h=xc(a),h!==0&&(d=h,e=Nk(a,h))),e===1)throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;if(e===6)Ck(a,d);else{if(h=a.current.alternate,!(d&30)&&!Ok(h)&&(e=Ik(a,d),e===2&&(g=xc(a),g!==0&&(d=g,e=Nk(a,g))),e===1))throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;switch(a.finishedWork=h,a.finishedLanes=d,e){case 0:case 1:throw Error(p(345));case 2:Pk(a,tk,uk);break;case 3:if(Ck(a,d),(d&130023424)===d&&(e=fk+500-B(),10<e)){if(uc(a,0)!==0)break;if(h=a.suspendedLanes,(h&d)!==d){R(),a.pingedLanes|=a.suspendedLanes&h;break}a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),e);break}Pk(a,tk,uk);break;case 4:if(Ck(a,d),(d&4194240)===d)break;for(e=a.eventTimes,h=-1;0<d;){var _=31-oc(d);g=1<<_,_=e[_],_>h&&(h=_),d&=~g}if(d=h,d=B()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*lk(d/1960))-d,10<d){a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),d);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p(329))}}}return Dk(a,B()),a.callbackNode===c?Gk.bind(null,a):null}function Nk(a,e){var c=sk;return a.current.memoizedState.isDehydrated&&(Kk(a,e).flags|=256),a=Ik(a,e),a!==2&&(e=tk,tk=c,e!==null&&Fj(e)),a}function Fj(a){tk===null?tk=a:tk.push.apply(tk,a)}function Ok(a){for(var e=a;;){if(e.flags&16384){var c=e.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var h=c[d],g=h.getSnapshot;h=h.value;try{if(!He(g(),h))return!1}catch{return!1}}}if(c=e.child,e.subtreeFlags&16384&&c!==null)c.return=e,e=c;else{if(e===a)break;for(;e.sibling===null;){if(e.return===null||e.return===a)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(a,e){for(e&=~rk,e&=~qk,a.suspendedLanes|=e,a.pingedLanes&=~e,a=a.expirationTimes;0<e;){var c=31-oc(e),d=1<<c;a[c]=-1,e&=~d}}function Ek(a){if(K&6)throw Error(p(327));Hk();var e=uc(a,0);if(!(e&1))return Dk(a,B()),null;var c=Ik(a,e);if(a.tag!==0&&c===2){var d=xc(a);d!==0&&(e=d,c=Nk(a,d))}if(c===1)throw c=pk,Kk(a,0),Ck(a,e),Dk(a,B()),c;if(c===6)throw Error(p(345));return a.finishedWork=a.current.alternate,a.finishedLanes=e,Pk(a,tk,uk),Dk(a,B()),null}function Qk(a,e){var c=K;K|=1;try{return a(e)}finally{K=c,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(a){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var c=ok.transition,d=C;try{if(ok.transition=null,C=1,a)return a()}finally{C=d,ok.transition=c,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(a,e){a.finishedWork=null,a.finishedLanes=0;var c=a.timeoutHandle;if(c!==-1&&(a.timeoutHandle=-1,Gf(c)),Y!==null)for(c=Y.return;c!==null;){var d=c;switch(wg(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H),Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}c=c.return}if(Q=a,Y=a=Pg(a.current,null),Z=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(c=fh[e],d=c.interleaved,d!==null){c.interleaved=null;var h=d.next,g=c.pending;if(g!==null){var _=g.next;g.next=h,d.next=_}c.pending=d}fh=null}return a}function Mk(a,e){do{var c=Y;try{if($g(),Fh.current=Rh,Ih){for(var d=M.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,c===null||c.return===null){T=1,pk=e,Y=null;break}e:{var g=a,_=c.return,_e=c,et=e;if(e=Z,_e.flags|=32768,et!==null&&typeof et=="object"&&typeof et.then=="function"){var tt=et,rt=_e,$=rt.tag;if(!(rt.mode&1)&&($===0||$===11||$===15)){var b=rt.alternate;b?(rt.updateQueue=b.updateQueue,rt.memoizedState=b.memoizedState,rt.lanes=b.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var nt=Ui(_);if(nt!==null){nt.flags&=-257,Vi(nt,_,_e,g,e),nt.mode&1&&Si(g,tt,e),e=nt,et=tt;var st=e.updateQueue;if(st===null){var ot=new Set;ot.add(et),e.updateQueue=ot}else st.add(et);break e}else{if(!(e&1)){Si(g,tt,e),tj();break e}et=Error(p(426))}}else if(I&&_e.mode&1){var it=Ui(_);if(it!==null){!(it.flags&65536)&&(it.flags|=256),Vi(it,_,_e,g,e),Jg(Ji(et,_e));break e}}g=et=Ji(et,_e),T!==4&&(T=2),sk===null?sk=[g]:sk.push(g),g=_;do{switch(g.tag){case 3:g.flags|=65536,e&=-e,g.lanes|=e;var at=Ni(g,et,e);ph(g,at);break e;case 1:_e=et;var lt=g.type,dt=g.stateNode;if(!(g.flags&128)&&(typeof lt.getDerivedStateFromError=="function"||dt!==null&&typeof dt.componentDidCatch=="function"&&(Ri===null||!Ri.has(dt)))){g.flags|=65536,e&=-e,g.lanes|=e;var ht=Qi(g,_e,e);ph(g,ht);break e}}g=g.return}while(g!==null)}Sk(c)}catch(pt){e=pt,Y===c&&c!==null&&(Y=c=c.return);continue}break}while(!0)}function Jk(){var a=mk.current;return mk.current=Rh,a===null?Rh:a}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(a,e){var c=K;K|=2;var d=Jk();(Q!==a||Z!==e)&&(uk=null,Kk(a,e));do try{Tk();break}catch(h){Mk(a,h)}while(!0);if($g(),K=c,mk.current=d,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(a){var e=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps,e===null?Sk(a):Y=e,nk.current=null}function Sk(a){var e=a;do{var c=e.alternate;if(a=e.return,e.flags&32768){if(c=Ij(c,e),c!==null){c.flags&=32767,Y=c;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6,Y=null;return}}else if(c=Ej(c,e,fj),c!==null){Y=c;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=a}while(e!==null);T===0&&(T=5)}function Pk(a,e,c){var d=C,h=ok.transition;try{ok.transition=null,C=1,Wk(a,e,c,d)}finally{ok.transition=h,C=d}return null}function Wk(a,e,c,d){do Hk();while(wk!==null);if(K&6)throw Error(p(327));c=a.finishedWork;var h=a.finishedLanes;if(c===null)return null;if(a.finishedWork=null,a.finishedLanes=0,c===a.current)throw Error(p(177));a.callbackNode=null,a.callbackPriority=0;var g=c.lanes|c.childLanes;if(Bc(a,g),a===Q&&(Y=Q=null,Z=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),g=(c.flags&15990)!==0,c.subtreeFlags&15990||g){g=ok.transition,ok.transition=null;var _=C;C=1;var _e=K;K|=4,nk.current=null,Oj(a,c),dk(c,a),Oe(Df),dd=!!Cf,Df=Cf=null,a.current=c,hk(c),dc(),K=_e,C=_,ok.transition=g}else a.current=c;if(vk&&(vk=!1,wk=a,xk=h),g=a.pendingLanes,g===0&&(Ri=null),mc(c.stateNode),Dk(a,B()),e!==null)for(d=a.onRecoverableError,c=0;c<e.length;c++)h=e[c],d(h.value,{componentStack:h.stack,digest:h.digest});if(Oi)throw Oi=!1,a=Pi,Pi=null,a;return xk&1&&a.tag!==0&&Hk(),g=a.pendingLanes,g&1?a===zk?yk++:(yk=0,zk=a):yk=0,jg(),null}function Hk(){if(wk!==null){var a=Dc(xk),e=ok.transition,c=C;try{if(ok.transition=null,C=16>a?16:a,wk===null)var d=!1;else{if(a=wk,wk=null,xk=0,K&6)throw Error(p(331));var h=K;for(K|=4,V=a.current;V!==null;){var g=V,_=g.child;if(V.flags&16){var _e=g.deletions;if(_e!==null){for(var et=0;et<_e.length;et++){var tt=_e[et];for(V=tt;V!==null;){var rt=V;switch(rt.tag){case 0:case 11:case 15:Pj(8,rt,g)}var $=rt.child;if($!==null)$.return=rt,V=$;else for(;V!==null;){rt=V;var b=rt.sibling,nt=rt.return;if(Sj(rt),rt===tt){V=null;break}if(b!==null){b.return=nt,V=b;break}V=nt}}}var st=g.alternate;if(st!==null){var ot=st.child;if(ot!==null){st.child=null;do{var it=ot.sibling;ot.sibling=null,ot=it}while(ot!==null)}}V=g}}if(g.subtreeFlags&2064&&_!==null)_.return=g,V=_;else e:for(;V!==null;){if(g=V,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Pj(9,g,g.return)}var at=g.sibling;if(at!==null){at.return=g.return,V=at;break e}V=g.return}}var lt=a.current;for(V=lt;V!==null;){_=V;var dt=_.child;if(_.subtreeFlags&2064&&dt!==null)dt.return=_,V=dt;else e:for(_=lt;V!==null;){if(_e=V,_e.flags&2048)try{switch(_e.tag){case 0:case 11:case 15:Qj(9,_e)}}catch(pt){W(_e,_e.return,pt)}if(_e===_){V=null;break e}var ht=_e.sibling;if(ht!==null){ht.return=_e.return,V=ht;break e}V=_e.return}}if(K=h,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,a)}catch{}d=!0}return d}finally{C=c,ok.transition=e}}return!1}function Xk(a,e,c){e=Ji(c,e),e=Ni(a,e,1),a=nh(a,e,1),e=R(),a!==null&&(Ac(a,1,e),Dk(a,e))}function W(a,e,c){if(a.tag===3)Xk(a,a,c);else for(;e!==null;){if(e.tag===3){Xk(e,a,c);break}else if(e.tag===1){var d=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ri===null||!Ri.has(d))){a=Ji(c,a),a=Qi(e,a,1),e=nh(e,a,1),a=R(),e!==null&&(Ac(e,1,a),Dk(e,a));break}}e=e.return}}function Ti(a,e,c){var d=a.pingCache;d!==null&&d.delete(e),e=R(),a.pingedLanes|=a.suspendedLanes&c,Q===a&&(Z&c)===c&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(a,0):rk|=c),Dk(a,e)}function Yk(a,e){e===0&&(a.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var c=R();a=ih(a,e),a!==null&&(Ac(a,e,c),Dk(a,c))}function uj(a){var e=a.memoizedState,c=0;e!==null&&(c=e.retryLane),Yk(a,c)}function bk(a,e){var c=0;switch(a.tag){case 13:var d=a.stateNode,h=a.memoizedState;h!==null&&(c=h.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314))}d!==null&&d.delete(e),Yk(a,c)}var Vk;Vk=function(a,e,c){if(a!==null)if(a.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(a.lanes&c)&&!(e.flags&128))return dh=!1,yj(a,e,c);dh=!!(a.flags&131072)}else dh=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var d=e.type;ij(a,e),a=e.pendingProps;var h=Yf(e,H.current);ch(e,c),h=Nh(null,e,d,a,h,c);var g=Sh();return e.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(d)?(g=!0,cg(e)):g=!1,e.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,kh(e),h.updater=Ei,e.stateNode=h,h._reactInternals=e,Ii(e,d,a,c),e=jj(null,e,d,!0,g,c)):(e.tag=0,I&&g&&vg(e),Xi(null,e,h,c),e=e.child),e;case 16:d=e.elementType;e:{switch(ij(a,e),a=e.pendingProps,h=d._init,d=h(d._payload),e.type=d,h=e.tag=Zk(d),a=Ci(d,a),h){case 0:e=cj(null,e,d,a,c);break e;case 1:e=hj(null,e,d,a,c);break e;case 11:e=Yi(null,e,d,a,c);break e;case 14:e=$i(null,e,d,Ci(d.type,a),c);break e}throw Error(p(306,d,""))}return e;case 0:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Ci(d,h),cj(a,e,d,h,c);case 1:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Ci(d,h),hj(a,e,d,h,c);case 3:e:{if(kj(e),a===null)throw Error(p(387));d=e.pendingProps,g=e.memoizedState,h=g.element,lh(a,e),qh(e,d,null,c);var _=e.memoizedState;if(d=_.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},e.updateQueue.baseState=g,e.memoizedState=g,e.flags&256){h=Ji(Error(p(423)),e),e=lj(a,e,d,c,h);break e}else if(d!==h){h=Ji(Error(p(424)),e),e=lj(a,e,d,c,h);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,c=Vg(e,null,d,c),e.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ig(),d===h){e=Zi(a,e,c);break e}Xi(a,e,d,c)}e=e.child}return e;case 5:return Ah(e),a===null&&Eg(e),d=e.type,h=e.pendingProps,g=a!==null?a.memoizedProps:null,_=h.children,Ef(d,h)?_=null:g!==null&&Ef(d,g)&&(e.flags|=32),gj(a,e),Xi(a,e,_,c),e.child;case 6:return a===null&&Eg(e),null;case 13:return oj(a,e,c);case 4:return yh(e,e.stateNode.containerInfo),d=e.pendingProps,a===null?e.child=Ug(e,null,d,c):Xi(a,e,d,c),e.child;case 11:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Ci(d,h),Yi(a,e,d,h,c);case 7:return Xi(a,e,e.pendingProps,c),e.child;case 8:return Xi(a,e,e.pendingProps.children,c),e.child;case 12:return Xi(a,e,e.pendingProps.children,c),e.child;case 10:e:{if(d=e.type._context,h=e.pendingProps,g=e.memoizedProps,_=h.value,G(Wg,d._currentValue),d._currentValue=_,g!==null)if(He(g.value,_)){if(g.children===h.children&&!Wf.current){e=Zi(a,e,c);break e}}else for(g=e.child,g!==null&&(g.return=e);g!==null;){var _e=g.dependencies;if(_e!==null){_=g.child;for(var et=_e.firstContext;et!==null;){if(et.context===d){if(g.tag===1){et=mh(-1,c&-c),et.tag=2;var tt=g.updateQueue;if(tt!==null){tt=tt.shared;var rt=tt.pending;rt===null?et.next=et:(et.next=rt.next,rt.next=et),tt.pending=et}}g.lanes|=c,et=g.alternate,et!==null&&(et.lanes|=c),bh(g.return,c,e),_e.lanes|=c;break}et=et.next}}else if(g.tag===10)_=g.type===e.type?null:g.child;else if(g.tag===18){if(_=g.return,_===null)throw Error(p(341));_.lanes|=c,_e=_.alternate,_e!==null&&(_e.lanes|=c),bh(_,c,e),_=g.sibling}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===e){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}Xi(a,e,h.children,c),e=e.child}return e;case 9:return h=e.type,d=e.pendingProps.children,ch(e,c),h=eh(h),d=d(h),e.flags|=1,Xi(a,e,d,c),e.child;case 14:return d=e.type,h=Ci(d,e.pendingProps),h=Ci(d.type,h),$i(a,e,d,h,c);case 15:return bj(a,e,e.type,e.pendingProps,c);case 17:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Ci(d,h),ij(a,e),e.tag=1,Zf(d)?(a=!0,cg(e)):a=!1,ch(e,c),Gi(e,d,h),Ii(e,d,h,c),jj(null,e,d,!0,a,c);case 19:return xj(a,e,c);case 22:return dj(a,e,c)}throw Error(p(156,e.tag))};function Fk(a,e){return ac(a,e)}function $k(a,e,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(a,e,c,d){return new $k(a,e,c,d)}function aj(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Zk(a){if(typeof a=="function")return aj(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Da)return 11;if(a===Ga)return 14}return 2}function Pg(a,e){var c=a.alternate;return c===null?(c=Bg(a.tag,e,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=e,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&14680064,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,e=a.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c}function Rg(a,e,c,d,h,g){var _=2;if(d=a,typeof a=="function")aj(a)&&(_=1);else if(typeof a=="string")_=5;else e:switch(a){case ya:return Tg(c.children,h,g,e);case za:_=8,h|=8;break;case Aa:return a=Bg(12,c,e,h|2),a.elementType=Aa,a.lanes=g,a;case Ea:return a=Bg(13,c,e,h),a.elementType=Ea,a.lanes=g,a;case Fa:return a=Bg(19,c,e,h),a.elementType=Fa,a.lanes=g,a;case Ia:return pj(c,h,g,e);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ba:_=10;break e;case Ca:_=9;break e;case Da:_=11;break e;case Ga:_=14;break e;case Ha:_=16,d=null;break e}throw Error(p(130,a==null?a:typeof a,""))}return e=Bg(_,c,e,h),e.elementType=a,e.type=d,e.lanes=g,e}function Tg(a,e,c,d){return a=Bg(7,a,d,e),a.lanes=c,a}function pj(a,e,c,d){return a=Bg(22,a,d,e),a.elementType=Ia,a.lanes=c,a.stateNode={isHidden:!1},a}function Qg(a,e,c){return a=Bg(6,a,null,e),a.lanes=c,a}function Sg(a,e,c){return e=Bg(4,a.children!==null?a.children:[],a.key,e),e.lanes=c,e.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},e}function al(a,e,c,d,h){this.tag=e,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=d,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function bl(a,e,c,d,h,g,_,_e,et){return a=new al(a,e,c,_e,et),e===1?(e=1,g===!0&&(e|=8)):e=0,g=Bg(3,null,null,e),a.current=g,g.stateNode=a,g.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(g),a}function cl(a,e,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:d==null?null:""+d,children:a,containerInfo:e,implementation:c}}function dl(a){if(!a)return Vf;a=a._reactInternals;e:{if(Vb(a)!==a||a.tag!==1)throw Error(p(170));var e=a;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(a.tag===1){var c=a.type;if(Zf(c))return bg(a,c,e)}return e}function el(a,e,c,d,h,g,_,_e,et){return a=bl(c,d,!0,a,h,g,_,_e,et),a.context=dl(null),c=a.current,d=R(),h=yi(c),g=mh(d,h),g.callback=e??null,nh(c,g,h),a.current.lanes=h,Ac(a,h,d),Dk(a,d),a}function fl(a,e,c,d){var h=e.current,g=R(),_=yi(h);return c=dl(c),e.context===null?e.context=c:e.pendingContext=c,e=mh(g,_),e.payload={element:a},d=d===void 0?null:d,d!==null&&(e.callback=d),a=nh(h,e,_),a!==null&&(gi(a,h,_,g),oh(a,h,_)),_}function gl(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl(a,e){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<e?c:e}}function il(a,e){hl(a,e),(a=a.alternate)&&hl(a,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(a){console.error(a)};function ll(a){this._internalRoot=a}ml.prototype.render=ll.prototype.render=function(a){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(a,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var e=a.containerInfo;Rk(function(){fl(null,a,null,null)}),e[uf]=null}};function ml(a){this._internalRoot=a}ml.prototype.unstable_scheduleHydration=function(a){if(a){var e=Hc();a={blockedOn:null,target:a,priority:e};for(var c=0;c<Qc.length&&e!==0&&e<Qc[c].priority;c++);Qc.splice(c,0,a),c===0&&Vc(a)}};function nl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function ol(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(a,e,c,d,h){if(h){if(typeof d=="function"){var g=d;d=function(){var tt=gl(_);g.call(tt)}}var _=el(e,d,a,0,null,!1,!1,"",pl);return a._reactRootContainer=_,a[uf]=_.current,sf(a.nodeType===8?a.parentNode:a),Rk(),_}for(;h=a.lastChild;)a.removeChild(h);if(typeof d=="function"){var _e=d;d=function(){var tt=gl(et);_e.call(tt)}}var et=bl(a,0,!1,null,null,!1,!1,"",pl);return a._reactRootContainer=et,a[uf]=et.current,sf(a.nodeType===8?a.parentNode:a),Rk(function(){fl(e,et,c,d)}),et}function rl(a,e,c,d,h){var g=c._reactRootContainer;if(g){var _=g;if(typeof h=="function"){var _e=h;h=function(){var et=gl(_);_e.call(et)}}fl(e,_,a,h)}else _=ql(c,e,a,h,d);return gl(_)}Ec=function(a){switch(a.tag){case 3:var e=a.stateNode;if(e.current.memoizedState.isDehydrated){var c=tc(e.pendingLanes);c!==0&&(Cc(e,c|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var d=ih(a,1);if(d!==null){var h=R();gi(d,a,1,h)}}),il(a,1)}};Fc=function(a){if(a.tag===13){var e=ih(a,134217728);if(e!==null){var c=R();gi(e,a,134217728,c)}il(a,134217728)}};Gc=function(a){if(a.tag===13){var e=yi(a),c=ih(a,e);if(c!==null){var d=R();gi(c,a,e,d)}il(a,e)}};Hc=function(){return C};Ic=function(a,e){var c=C;try{return C=a,e()}finally{C=c}};yb=function(a,e,c){switch(e){case"input":if(bb(a,c),e=c.name,c.type==="radio"&&e!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<c.length;e++){var d=c[e];if(d!==a&&d.form===a.form){var h=Db(d);if(!h)throw Error(p(90));Wa(d),bb(d,h)}}}break;case"textarea":ib(a,c);break;case"select":e=c.value,e!=null&&fb(a,!!c.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Zb(a),a===null?null:a.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(a,e){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(a,e,null,c)};reactDom_production_min.createRoot=function(a,e){if(!nl(a))throw Error(p(299));var c=!1,d="",h=kl;return e!=null&&(e.unstable_strictMode===!0&&(c=!0),e.identifierPrefix!==void 0&&(d=e.identifierPrefix),e.onRecoverableError!==void 0&&(h=e.onRecoverableError)),e=bl(a,1,!1,null,null,c,!1,d,h),a[uf]=e.current,sf(a.nodeType===8?a.parentNode:a),new ll(e)};reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var e=a._reactInternals;if(e===void 0)throw typeof a.render=="function"?Error(p(188)):(a=Object.keys(a).join(","),Error(p(268,a)));return a=Zb(e),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a){return Rk(a)};reactDom_production_min.hydrate=function(a,e,c){if(!ol(e))throw Error(p(200));return rl(null,a,e,!0,c)};reactDom_production_min.hydrateRoot=function(a,e,c){if(!nl(a))throw Error(p(405));var d=c!=null&&c.hydratedSources||null,h=!1,g="",_=kl;if(c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(_=c.onRecoverableError)),e=el(e,null,a,1,c??null,h,!1,g,_),a[uf]=e.current,sf(a),d)for(a=0;a<d.length;a++)c=d[a],h=c._getVersion,h=h(c._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[c,h]:e.mutableSourceEagerHydrationData.push(c,h);return new ml(e)};reactDom_production_min.render=function(a,e,c){if(!ol(e))throw Error(p(200));return rl(null,a,e,!1,c)};reactDom_production_min.unmountComponentAtNode=function(a){if(!ol(a))throw Error(p(40));return a._reactRootContainer?(Rk(function(){rl(null,null,a,!1,function(){a._reactRootContainer=null,a[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,e,c,d){if(!ol(c))throw Error(p(200));if(a==null||a._reactInternals===void 0)throw Error(p(38));return rl(a,e,c,!1,d)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const Gt=getDefaultExportFromCjs(reactDomExports);var m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var c=arguments[e];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_extends$2.apply(this,arguments)}var Action$1;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(Action$1||(Action$1={}));const PopStateEventType="popstate";function createHashHistory(a){a===void 0&&(a={});function e(h,g){let{pathname:_="/",search:_e="",hash:et=""}=parsePath(h.location.hash.substr(1));return!_.startsWith("/")&&!_.startsWith(".")&&(_="/"+_),createLocation("",{pathname:_,search:_e,hash:et},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}function c(h,g){let _=h.document.querySelector("base"),_e="";if(_&&_.getAttribute("href")){let et=h.location.href,tt=et.indexOf("#");_e=tt===-1?et:et.slice(0,tt)}return _e+"#"+(typeof g=="string"?g:createPath(g))}function d(h,g){warning(h.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(g)+")")}return getUrlBasedHistory(e,c,d,a)}function invariant(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function warning(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(a,e){return{usr:a.state,key:a.key,idx:e}}function createLocation(a,e,c,d){return c===void 0&&(c=null),_extends$2({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:c,key:e&&e.key||d||createKey()})}function createPath(a){let{pathname:e="/",search:c="",hash:d=""}=a;return c&&c!=="?"&&(e+=c.charAt(0)==="?"?c:"?"+c),d&&d!=="#"&&(e+=d.charAt(0)==="#"?d:"#"+d),e}function parsePath(a){let e={};if(a){let c=a.indexOf("#");c>=0&&(e.hash=a.substr(c),a=a.substr(0,c));let d=a.indexOf("?");d>=0&&(e.search=a.substr(d),a=a.substr(0,d)),a&&(e.pathname=a)}return e}function getUrlBasedHistory(a,e,c,d){d===void 0&&(d={});let{window:h=document.defaultView,v5Compat:g=!1}=d,_=h.history,_e=Action$1.Pop,et=null,tt=rt();tt==null&&(tt=0,_.replaceState(_extends$2({},_.state,{idx:tt}),""));function rt(){return(_.state||{idx:null}).idx}function $(){_e=Action$1.Pop;let it=rt(),at=it==null?null:it-tt;tt=it,et&&et({action:_e,location:ot.location,delta:at})}function b(it,at){_e=Action$1.Push;let lt=createLocation(ot.location,it,at);c&&c(lt,it),tt=rt()+1;let dt=getHistoryState(lt,tt),ht=ot.createHref(lt);try{_.pushState(dt,"",ht)}catch(pt){if(pt instanceof DOMException&&pt.name==="DataCloneError")throw pt;h.location.assign(ht)}g&&et&&et({action:_e,location:ot.location,delta:1})}function nt(it,at){_e=Action$1.Replace;let lt=createLocation(ot.location,it,at);c&&c(lt,it),tt=rt();let dt=getHistoryState(lt,tt),ht=ot.createHref(lt);_.replaceState(dt,"",ht),g&&et&&et({action:_e,location:ot.location,delta:0})}function st(it){let at=h.location.origin!=="null"?h.location.origin:h.location.href,lt=typeof it=="string"?it:createPath(it);return lt=lt.replace(/ $/,"%20"),invariant(at,"No window.location.(origin|href) available to create URL for href: "+lt),new URL(lt,at)}let ot={get action(){return _e},get location(){return a(h,_)},listen(it){if(et)throw new Error("A history only accepts one active listener");return h.addEventListener(PopStateEventType,$),et=it,()=>{h.removeEventListener(PopStateEventType,$),et=null}},createHref(it){return e(h,it)},createURL:st,encodeLocation(it){let at=st(it);return{pathname:at.pathname,search:at.search,hash:at.hash}},push:b,replace:nt,go(it){return _.go(it)}};return ot}var ResultType;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(ResultType||(ResultType={}));function matchRoutes(a,e,c){return c===void 0&&(c="/"),matchRoutesImpl(a,e,c,!1)}function matchRoutesImpl(a,e,c,d){let h=typeof e=="string"?parsePath(e):e,g=stripBasename(h.pathname||"/",c);if(g==null)return null;let _=flattenRoutes(a);rankRouteBranches(_);let _e=null;for(let et=0;_e==null&&et<_.length;++et){let tt=decodePath(g);_e=matchRouteBranch(_[et],tt,d)}return _e}function flattenRoutes(a,e,c,d){e===void 0&&(e=[]),c===void 0&&(c=[]),d===void 0&&(d="");let h=(g,_,_e)=>{let et={relativePath:_e===void 0?g.path||"":_e,caseSensitive:g.caseSensitive===!0,childrenIndex:_,route:g};et.relativePath.startsWith("/")&&(invariant(et.relativePath.startsWith(d),'Absolute route path "'+et.relativePath+'" nested under path '+('"'+d+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),et.relativePath=et.relativePath.slice(d.length));let tt=joinPaths([d,et.relativePath]),rt=c.concat(et);g.children&&g.children.length>0&&(invariant(g.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+tt+'".')),flattenRoutes(g.children,e,rt,tt)),!(g.path==null&&!g.index)&&e.push({path:tt,score:computeScore(tt,g.index),routesMeta:rt})};return a.forEach((g,_)=>{var _e;if(g.path===""||!((_e=g.path)!=null&&_e.includes("?")))h(g,_);else for(let et of explodeOptionalSegments(g.path))h(g,_,et)}),e}function explodeOptionalSegments(a){let e=a.split("/");if(e.length===0)return[];let[c,...d]=e,h=c.endsWith("?"),g=c.replace(/\?$/,"");if(d.length===0)return h?[g,""]:[g];let _=explodeOptionalSegments(d.join("/")),_e=[];return _e.push(..._.map(et=>et===""?g:[g,et].join("/"))),h&&_e.push(..._),_e.map(et=>a.startsWith("/")&&et===""?"/":et)}function rankRouteBranches(a){a.sort((e,c)=>e.score!==c.score?c.score-e.score:compareIndexes(e.routesMeta.map(d=>d.childrenIndex),c.routesMeta.map(d=>d.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=a=>a==="*";function computeScore(a,e){let c=a.split("/"),d=c.length;return c.some(isSplat)&&(d+=splatPenalty),e&&(d+=indexRouteValue),c.filter(h=>!isSplat(h)).reduce((h,g)=>h+(paramRe.test(g)?dynamicSegmentValue:g===""?emptySegmentValue:staticSegmentValue),d)}function compareIndexes(a,e){return a.length===e.length&&a.slice(0,-1).every((d,h)=>d===e[h])?a[a.length-1]-e[e.length-1]:0}function matchRouteBranch(a,e,c){let{routesMeta:d}=a,h={},g="/",_=[];for(let _e=0;_e<d.length;++_e){let et=d[_e],tt=_e===d.length-1,rt=g==="/"?e:e.slice(g.length)||"/",$=matchPath({path:et.relativePath,caseSensitive:et.caseSensitive,end:tt},rt),b=et.route;if(!$&&tt&&c&&!d[d.length-1].route.index&&($=matchPath({path:et.relativePath,caseSensitive:et.caseSensitive,end:!1},rt)),!$)return null;Object.assign(h,$.params),_.push({params:h,pathname:joinPaths([g,$.pathname]),pathnameBase:normalizePathname(joinPaths([g,$.pathnameBase])),route:b}),$.pathnameBase!=="/"&&(g=joinPaths([g,$.pathnameBase]))}return _}function matchPath(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[c,d]=compilePath(a.path,a.caseSensitive,a.end),h=e.match(c);if(!h)return null;let g=h[0],_=g.replace(/(.)\/+$/,"$1"),_e=h.slice(1);return{params:d.reduce((tt,rt,$)=>{let{paramName:b,isOptional:nt}=rt;if(b==="*"){let ot=_e[$]||"";_=g.slice(0,g.length-ot.length).replace(/(.)\/+$/,"$1")}const st=_e[$];return nt&&!st?tt[b]=void 0:tt[b]=(st||"").replace(/%2F/g,"/"),tt},{}),pathname:g,pathnameBase:_,pattern:a}}function compilePath(a,e,c){e===void 0&&(e=!1),c===void 0&&(c=!0),warning(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let d=[],h="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(_,_e,et)=>(d.push({paramName:_e,isOptional:et!=null}),et?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(d.push({paramName:"*"}),h+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?h+="\\/*$":a!==""&&a!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,e?void 0:"i"),d]}function decodePath(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),a}}function stripBasename(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let c=e.endsWith("/")?e.length-1:e.length,d=a.charAt(c);return d&&d!=="/"?null:a.slice(c)||"/"}function resolvePath(a,e){e===void 0&&(e="/");let{pathname:c,search:d="",hash:h=""}=typeof a=="string"?parsePath(a):a;return{pathname:c?c.startsWith("/")?c:resolvePathname(c,e):e,search:normalizeSearch(d),hash:normalizeHash(h)}}function resolvePathname(a,e){let c=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(h=>{h===".."?c.length>1&&c.pop():h!=="."&&c.push(h)}),c.length>1?c.join("/"):"/"}function getInvalidPathError(a,e,c,d){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(d)+"].  Please separate it out to the ")+("`to."+c+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(a){return a.filter((e,c)=>c===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(a,e){let c=getPathContributingMatches(a);return e?c.map((d,h)=>h===c.length-1?d.pathname:d.pathnameBase):c.map(d=>d.pathnameBase)}function resolveTo(a,e,c,d){d===void 0&&(d=!1);let h;typeof a=="string"?h=parsePath(a):(h=_extends$2({},a),invariant(!h.pathname||!h.pathname.includes("?"),getInvalidPathError("?","pathname","search",h)),invariant(!h.pathname||!h.pathname.includes("#"),getInvalidPathError("#","pathname","hash",h)),invariant(!h.search||!h.search.includes("#"),getInvalidPathError("#","search","hash",h)));let g=a===""||h.pathname==="",_=g?"/":h.pathname,_e;if(_==null)_e=c;else{let $=e.length-1;if(!d&&_.startsWith("..")){let b=_.split("/");for(;b[0]==="..";)b.shift(),$-=1;h.pathname=b.join("/")}_e=$>=0?e[$]:"/"}let et=resolvePath(h,_e),tt=_&&_!=="/"&&_.endsWith("/"),rt=(g||_===".")&&c.endsWith("/");return!et.pathname.endsWith("/")&&(tt||rt)&&(et.pathname+="/"),et}const joinPaths=a=>a.join("/").replace(/\/\/+/g,"/"),normalizePathname=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,normalizeHash=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function isRouteErrorResponse(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var c=arguments[e];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(a,e){let{relative:c}=e===void 0?{}:e;useInRouterContext()||invariant(!1);let{basename:d,navigator:h}=reactExports.useContext(NavigationContext),{hash:g,pathname:_,search:_e}=useResolvedPath(a,{relative:c}),et=_;return d!=="/"&&(et=_==="/"?d:joinPaths([d,_])),h.createHref({pathname:et,search:_e,hash:g})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(a){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(a)}function useNavigate(){let{isDataRoute:a}=reactExports.useContext(RouteContext);return a?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let a=reactExports.useContext(DataRouterContext),{basename:e,future:c,navigator:d}=reactExports.useContext(NavigationContext),{matches:h}=reactExports.useContext(RouteContext),{pathname:g}=useLocation(),_=JSON.stringify(getResolveToMatches(h,c.v7_relativeSplatPath)),_e=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{_e.current=!0}),reactExports.useCallback(function(tt,rt){if(rt===void 0&&(rt={}),!_e.current)return;if(typeof tt=="number"){d.go(tt);return}let $=resolveTo(tt,JSON.parse(_),g,rt.relative==="path");a==null&&e!=="/"&&($.pathname=$.pathname==="/"?e:joinPaths([e,$.pathname])),(rt.replace?d.replace:d.push)($,rt.state,rt)},[e,d,_,g,a])}const OutletContext=reactExports.createContext(null);function useOutlet(a){let e=reactExports.useContext(RouteContext).outlet;return e&&reactExports.createElement(OutletContext.Provider,{value:a},e)}function useParams(){let{matches:a}=reactExports.useContext(RouteContext),e=a[a.length-1];return e?e.params:{}}function useResolvedPath(a,e){let{relative:c}=e===void 0?{}:e,{future:d}=reactExports.useContext(NavigationContext),{matches:h}=reactExports.useContext(RouteContext),{pathname:g}=useLocation(),_=JSON.stringify(getResolveToMatches(h,d.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(a,JSON.parse(_),g,c==="path"),[a,_,g,c])}function useRoutes(a,e){return useRoutesImpl(a,e)}function useRoutesImpl(a,e,c,d){useInRouterContext()||invariant(!1);let{navigator:h}=reactExports.useContext(NavigationContext),{matches:g}=reactExports.useContext(RouteContext),_=g[g.length-1],_e=_?_.params:{};_&&_.pathname;let et=_?_.pathnameBase:"/";_&&_.route;let tt=useLocation(),rt;if(e){var $;let it=typeof e=="string"?parsePath(e):e;et==="/"||($=it.pathname)!=null&&$.startsWith(et)||invariant(!1),rt=it}else rt=tt;let b=rt.pathname||"/",nt=b;if(et!=="/"){let it=et.replace(/^\//,"").split("/");nt="/"+b.replace(/^\//,"").split("/").slice(it.length).join("/")}let st=matchRoutes(a,{pathname:nt}),ot=_renderMatches(st&&st.map(it=>Object.assign({},it,{params:Object.assign({},_e,it.params),pathname:joinPaths([et,h.encodeLocation?h.encodeLocation(it.pathname).pathname:it.pathname]),pathnameBase:it.pathnameBase==="/"?et:joinPaths([et,h.encodeLocation?h.encodeLocation(it.pathnameBase).pathname:it.pathnameBase])})),g,c,d);return e&&ot?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},rt),navigationType:Action$1.Pop}},ot):ot}function DefaultErrorComponent(){let a=useRouteError(),e=isRouteErrorResponse(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),c=a instanceof Error?a.stack:null,h={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),c?reactExports.createElement("pre",{style:h},c):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,c){return c.location!==e.location||c.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:c.error,location:c.location,revalidation:e.revalidation||c.revalidation}}componentDidCatch(e,c){console.error("React Router caught the following error during render",e,c)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(a){let{routeContext:e,match:c,children:d}=a,h=reactExports.useContext(DataRouterContext);return h&&h.static&&h.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=c.route.id),reactExports.createElement(RouteContext.Provider,{value:e},d)}function _renderMatches(a,e,c,d){var h;if(e===void 0&&(e=[]),c===void 0&&(c=null),d===void 0&&(d=null),a==null){var g;if(!c)return null;if(c.errors)a=c.matches;else if((g=d)!=null&&g.v7_partialHydration&&e.length===0&&!c.initialized&&c.matches.length>0)a=c.matches;else return null}let _=a,_e=(h=c)==null?void 0:h.errors;if(_e!=null){let rt=_.findIndex($=>$.route.id&&(_e==null?void 0:_e[$.route.id])!==void 0);rt>=0||invariant(!1),_=_.slice(0,Math.min(_.length,rt+1))}let et=!1,tt=-1;if(c&&d&&d.v7_partialHydration)for(let rt=0;rt<_.length;rt++){let $=_[rt];if(($.route.HydrateFallback||$.route.hydrateFallbackElement)&&(tt=rt),$.route.id){let{loaderData:b,errors:nt}=c,st=$.route.loader&&b[$.route.id]===void 0&&(!nt||nt[$.route.id]===void 0);if($.route.lazy||st){et=!0,tt>=0?_=_.slice(0,tt+1):_=[_[0]];break}}}return _.reduceRight((rt,$,b)=>{let nt,st=!1,ot=null,it=null;c&&(nt=_e&&$.route.id?_e[$.route.id]:void 0,ot=$.route.errorElement||defaultErrorElement,et&&(tt<0&&b===0?(st=!0,it=null):tt===b&&(st=!0,it=$.route.hydrateFallbackElement||null)));let at=e.concat(_.slice(0,b+1)),lt=()=>{let dt;return nt?dt=ot:st?dt=it:$.route.Component?dt=reactExports.createElement($.route.Component,null):$.route.element?dt=$.route.element:dt=rt,reactExports.createElement(RenderedRoute,{match:$,routeContext:{outlet:rt,matches:at,isDataRoute:c!=null},children:dt})};return c&&($.route.ErrorBoundary||$.route.errorElement||b===0)?reactExports.createElement(RenderErrorBoundary,{location:c.location,revalidation:c.revalidation,component:ot,error:nt,children:lt(),routeContext:{outlet:null,matches:at,isDataRoute:!0}}):lt()},null)}var DataRouterHook$1=function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a}(DataRouterHook$1||{}),DataRouterStateHook$1=function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a}(DataRouterStateHook$1||{});function useDataRouterContext(a){let e=reactExports.useContext(DataRouterContext);return e||invariant(!1),e}function useDataRouterState(a){let e=reactExports.useContext(DataRouterStateContext);return e||invariant(!1),e}function useRouteContext(a){let e=reactExports.useContext(RouteContext);return e||invariant(!1),e}function useCurrentRouteId(a){let e=useRouteContext(),c=e.matches[e.matches.length-1];return c.route.id||invariant(!1),c.route.id}function useRouteError(){var a;let e=reactExports.useContext(RouteErrorContext),c=useDataRouterState(DataRouterStateHook$1.UseRouteError),d=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return e!==void 0?e:(a=c.errors)==null?void 0:a[d]}function useNavigateStable(){let{router:a}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),c=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{c.current=!0}),reactExports.useCallback(function(h,g){g===void 0&&(g={}),c.current&&(typeof h=="number"?a.navigate(h):a.navigate(h,_extends$1({fromRouteId:e},g)))},[a,e])}function Outlet(a){return useOutlet(a.context)}function Route(a){invariant(!1)}function Router(a){let{basename:e="/",children:c=null,location:d,navigationType:h=Action$1.Pop,navigator:g,static:_=!1,future:_e}=a;useInRouterContext()&&invariant(!1);let et=e.replace(/^\/*/,"/"),tt=reactExports.useMemo(()=>({basename:et,navigator:g,static:_,future:_extends$1({v7_relativeSplatPath:!1},_e)}),[et,_e,g,_]);typeof d=="string"&&(d=parsePath(d));let{pathname:rt="/",search:$="",hash:b="",state:nt=null,key:st="default"}=d,ot=reactExports.useMemo(()=>{let it=stripBasename(rt,et);return it==null?null:{location:{pathname:it,search:$,hash:b,state:nt,key:st},navigationType:h}},[et,rt,$,b,nt,st,h]);return ot==null?null:reactExports.createElement(NavigationContext.Provider,{value:tt},reactExports.createElement(LocationContext.Provider,{children:c,value:ot}))}function Routes(a){let{children:e,location:c}=a;return useRoutes(createRoutesFromChildren(e),c)}new Promise(()=>{});function createRoutesFromChildren(a,e){e===void 0&&(e=[]);let c=[];return reactExports.Children.forEach(a,(d,h)=>{if(!reactExports.isValidElement(d))return;let g=[...e,h];if(d.type===reactExports.Fragment){c.push.apply(c,createRoutesFromChildren(d.props.children,g));return}d.type!==Route&&invariant(!1),!d.props.index||!d.props.children||invariant(!1);let _={id:d.props.id||g.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,loader:d.props.loader,action:d.props.action,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(_.children=createRoutesFromChildren(d.props.children,g)),c.push(_)}),c}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var c=arguments[e];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(a,e){if(a==null)return{};var c={},d=Object.keys(a),h,g;for(g=0;g<d.length;g++)h=d[g],!(e.indexOf(h)>=0)&&(c[h]=a[h]);return c}function isModifiedEvent(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function shouldProcessLinkClick(a,e){return a.button===0&&(!e||e==="_self")&&!isModifiedEvent(a)}const _excluded$1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function HashRouter(a){let{basename:e,children:c,future:d,window:h}=a,g=reactExports.useRef();g.current==null&&(g.current=createHashHistory({window:h,v5Compat:!0}));let _=g.current,[_e,et]=reactExports.useState({action:_.action,location:_.location}),{v7_startTransition:tt}=d||{},rt=reactExports.useCallback($=>{tt&&startTransitionImpl?startTransitionImpl(()=>et($)):et($)},[et,tt]);return reactExports.useLayoutEffect(()=>_.listen(rt),[_,rt]),reactExports.createElement(Router,{basename:e,children:c,location:_e.location,navigationType:_e.action,navigator:_,future:d})}const isBrowser$3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,c){let{onClick:d,relative:h,reloadDocument:g,replace:_,state:_e,target:et,to:tt,preventScrollReset:rt,viewTransition:$}=e,b=_objectWithoutPropertiesLoose$1(e,_excluded$1),{basename:nt}=reactExports.useContext(NavigationContext),st,ot=!1;if(typeof tt=="string"&&ABSOLUTE_URL_REGEX.test(tt)&&(st=tt,isBrowser$3))try{let dt=new URL(window.location.href),ht=tt.startsWith("//")?new URL(dt.protocol+tt):new URL(tt),pt=stripBasename(ht.pathname,nt);ht.origin===dt.origin&&pt!=null?tt=pt+ht.search+ht.hash:ot=!0}catch{}let it=useHref(tt,{relative:h}),at=useLinkClickHandler(tt,{replace:_,state:_e,target:et,preventScrollReset:rt,relative:h,viewTransition:$});function lt(dt){d&&d(dt),dt.defaultPrevented||at(dt)}return reactExports.createElement("a",_extends({},b,{href:st||it,onClick:ot||g?d:lt,ref:c,target:et}))});var DataRouterHook;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(a){a.UseFetcher="useFetcher",a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(a,e){let{target:c,replace:d,state:h,preventScrollReset:g,relative:_,viewTransition:_e}=e===void 0?{}:e,et=useNavigate(),tt=useLocation(),rt=useResolvedPath(a,{relative:_});return reactExports.useCallback($=>{if(shouldProcessLinkClick($,c)){$.preventDefault();let b=d!==void 0?d:createPath(tt)===createPath(rt);et(a,{replace:b,state:h,preventScrollReset:g,relative:_,viewTransition:_e})}},[tt,et,rt,d,h,c,a,g,_,_e])}const TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count$2=0;function genId(){return count$2=(count$2+1)%Number.MAX_SAFE_INTEGER,count$2.toString()}const toastTimeouts=new Map,addToRemoveQueue=a=>{if(toastTimeouts.has(a))return;const e=setTimeout(()=>{toastTimeouts.delete(a),dispatch({type:"REMOVE_TOAST",toastId:a})},TOAST_REMOVE_DELAY);toastTimeouts.set(a,e)},reducer=(a,e)=>{switch(e.type){case"ADD_TOAST":return{...a,toasts:[e.toast,...a.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(c=>c.id===e.toast.id?{...c,...e.toast}:c)};case"DISMISS_TOAST":{const{toastId:c}=e;return c?addToRemoveQueue(c):a.toasts.forEach(d=>{addToRemoveQueue(d.id)}),{...a,toasts:a.toasts.map(d=>d.id===c||c===void 0?{...d,open:!1}:d)}}case"REMOVE_TOAST":return e.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(c=>c.id!==e.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(a){memoryState=reducer(memoryState,a),listeners.forEach(e=>{e(memoryState)})}function toast({...a}){const e=genId(),c=h=>dispatch({type:"UPDATE_TOAST",toast:{...h,id:e}}),d=()=>dispatch({type:"DISMISS_TOAST",toastId:e});return dispatch({type:"ADD_TOAST",toast:{...a,id:e,open:!0,onOpenChange:h=>{h||d()}}}),{id:e,dismiss:d,update:c}}function useToast(){const[a,e]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push(e),()=>{const c=listeners.indexOf(e);c>-1&&listeners.splice(c,1)}),[a]),{...a,toast,dismiss:c=>dispatch({type:"DISMISS_TOAST",toastId:c})}}function composeEventHandlers(a,e,{checkForDefaultPrevented:c=!0}={}){return function(h){if(a==null||a(h),c===!1||!h.defaultPrevented)return e==null?void 0:e(h)}}function setRef(a,e){typeof a=="function"?a(e):a!=null&&(a.current=e)}function composeRefs(...a){return e=>a.forEach(c=>setRef(c,e))}function useComposedRefs(...a){return reactExports.useCallback(composeRefs(...a),a)}function createContextScope$3(a,e=[]){let c=[];function d(g,_){const _e=reactExports.createContext(_),et=c.length;c=[...c,_];function tt($){const{scope:b,children:nt,...st}=$,ot=(b==null?void 0:b[a][et])||_e,it=reactExports.useMemo(()=>st,Object.values(st));return jsxRuntimeExports.jsx(ot.Provider,{value:it,children:nt})}function rt($,b){const nt=(b==null?void 0:b[a][et])||_e,st=reactExports.useContext(nt);if(st)return st;if(_!==void 0)return _;throw new Error(`\`${$}\` must be used within \`${g}\``)}return tt.displayName=g+"Provider",[tt,rt]}const h=()=>{const g=c.map(_=>reactExports.createContext(_));return function(_e){const et=(_e==null?void 0:_e[a])||g;return reactExports.useMemo(()=>({[`__scope${a}`]:{..._e,[a]:et}}),[_e,et])}};return h.scopeName=a,[d,composeContextScopes$3(h,...e)]}function composeContextScopes$3(...a){const e=a[0];if(a.length===1)return e;const c=()=>{const d=a.map(h=>({useScope:h(),scopeName:h.scopeName}));return function(g){const _=d.reduce((_e,{useScope:et,scopeName:tt})=>{const $=et(g)[`__scope${tt}`];return{..._e,...$}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:_}),[_])}};return c.scopeName=e.scopeName,c}var Slot=reactExports.forwardRef((a,e)=>{const{children:c,...d}=a,h=reactExports.Children.toArray(c),g=h.find(isSlottable);if(g){const _=g.props.children,_e=h.map(et=>et===g?reactExports.Children.count(_)>1?reactExports.Children.only(null):reactExports.isValidElement(_)?_.props.children:null:et);return jsxRuntimeExports.jsx(SlotClone,{...d,ref:e,children:reactExports.isValidElement(_)?reactExports.cloneElement(_,void 0,_e):null})}return jsxRuntimeExports.jsx(SlotClone,{...d,ref:e,children:c})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((a,e)=>{const{children:c,...d}=a;if(reactExports.isValidElement(c)){const h=getElementRef$1(c);return reactExports.cloneElement(c,{...mergeProps(d,c.props),ref:e?composeRefs(e,h):h})}return reactExports.Children.count(c)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:a})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:a});function isSlottable(a){return reactExports.isValidElement(a)&&a.type===Slottable}function mergeProps(a,e){const c={...e};for(const d in e){const h=a[d],g=e[d];/^on[A-Z]/.test(d)?h&&g?c[d]=(..._e)=>{g(..._e),h(..._e)}:h&&(c[d]=h):d==="style"?c[d]={...h,...g}:d==="className"&&(c[d]=[h,g].filter(Boolean).join(" "))}return{...a,...c}}function getElementRef$1(a){var d,h;let e=(d=Object.getOwnPropertyDescriptor(a.props,"ref"))==null?void 0:d.get,c=e&&"isReactWarning"in e&&e.isReactWarning;return c?a.ref:(e=(h=Object.getOwnPropertyDescriptor(a,"ref"))==null?void 0:h.get,c=e&&"isReactWarning"in e&&e.isReactWarning,c?a.props.ref:a.props.ref||a.ref)}function createCollection(a){const e=a+"CollectionProvider",[c,d]=createContextScope$3(e),[h,g]=c(e,{collectionRef:{current:null},itemMap:new Map}),_=nt=>{const{scope:st,children:ot}=nt,it=React.useRef(null),at=React.useRef(new Map).current;return jsxRuntimeExports.jsx(h,{scope:st,itemMap:at,collectionRef:it,children:ot})};_.displayName=e;const _e=a+"CollectionSlot",et=React.forwardRef((nt,st)=>{const{scope:ot,children:it}=nt,at=g(_e,ot),lt=useComposedRefs(st,at.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:lt,children:it})});et.displayName=_e;const tt=a+"CollectionItemSlot",rt="data-radix-collection-item",$=React.forwardRef((nt,st)=>{const{scope:ot,children:it,...at}=nt,lt=React.useRef(null),dt=useComposedRefs(st,lt),ht=g(tt,ot);return React.useEffect(()=>(ht.itemMap.set(lt,{ref:lt,...at}),()=>void ht.itemMap.delete(lt))),jsxRuntimeExports.jsx(Slot,{[rt]:"",ref:dt,children:it})});$.displayName=tt;function b(nt){const st=g(a+"CollectionConsumer",nt);return React.useCallback(()=>{const it=st.collectionRef.current;if(!it)return[];const at=Array.from(it.querySelectorAll(`[${rt}]`));return Array.from(st.itemMap.values()).sort((ht,pt)=>at.indexOf(ht.ref.current)-at.indexOf(pt.ref.current))},[st.collectionRef,st.itemMap])}return[{Provider:_,Slot:et,ItemSlot:$},b,d]}function createContextScope$2(a,e=[]){let c=[];function d(g,_){const _e=reactExports.createContext(_),et=c.length;c=[...c,_];const tt=$=>{var at;const{scope:b,children:nt,...st}=$,ot=((at=b==null?void 0:b[a])==null?void 0:at[et])||_e,it=reactExports.useMemo(()=>st,Object.values(st));return jsxRuntimeExports.jsx(ot.Provider,{value:it,children:nt})};tt.displayName=g+"Provider";function rt($,b){var ot;const nt=((ot=b==null?void 0:b[a])==null?void 0:ot[et])||_e,st=reactExports.useContext(nt);if(st)return st;if(_!==void 0)return _;throw new Error(`\`${$}\` must be used within \`${g}\``)}return[tt,rt]}const h=()=>{const g=c.map(_=>reactExports.createContext(_));return function(_e){const et=(_e==null?void 0:_e[a])||g;return reactExports.useMemo(()=>({[`__scope${a}`]:{..._e,[a]:et}}),[_e,et])}};return h.scopeName=a,[d,composeContextScopes$2(h,...e)]}function composeContextScopes$2(...a){const e=a[0];if(a.length===1)return e;const c=()=>{const d=a.map(h=>({useScope:h(),scopeName:h.scopeName}));return function(g){const _=d.reduce((_e,{useScope:et,scopeName:tt})=>{const $=et(g)[`__scope${tt}`];return{..._e,...$}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:_}),[_])}};return c.scopeName=e.scopeName,c}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((a,e)=>{const c=reactExports.forwardRef((d,h)=>{const{asChild:g,..._}=d,_e=g?Slot:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(_e,{..._,ref:h})});return c.displayName=`Primitive.${e}`,{...a,[e]:c}},{});function dispatchDiscreteCustomEvent(a,e){a&&reactDomExports.flushSync(()=>a.dispatchEvent(e))}function useCallbackRef$1(a){const e=reactExports.useRef(a);return reactExports.useEffect(()=>{e.current=a}),reactExports.useMemo(()=>(...c)=>{var d;return(d=e.current)==null?void 0:d.call(e,...c)},[])}function useEscapeKeydown(a,e=globalThis==null?void 0:globalThis.document){const c=useCallbackRef$1(a);reactExports.useEffect(()=>{const d=h=>{h.key==="Escape"&&c(h)};return e.addEventListener("keydown",d,{capture:!0}),()=>e.removeEventListener("keydown",d,{capture:!0})},[c,e])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((a,e)=>{const{disableOutsidePointerEvents:c=!1,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:g,onInteractOutside:_,onDismiss:_e,...et}=a,tt=reactExports.useContext(DismissableLayerContext),[rt,$]=reactExports.useState(null),b=(rt==null?void 0:rt.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,nt]=reactExports.useState({}),st=useComposedRefs(e,yt=>$(yt)),ot=Array.from(tt.layers),[it]=[...tt.layersWithOutsidePointerEventsDisabled].slice(-1),at=ot.indexOf(it),lt=rt?ot.indexOf(rt):-1,dt=tt.layersWithOutsidePointerEventsDisabled.size>0,ht=lt>=at,pt=usePointerDownOutside(yt=>{const xt=yt.target,gt=[...tt.branches].some(bt=>bt.contains(xt));!ht||gt||(h==null||h(yt),_==null||_(yt),yt.defaultPrevented||_e==null||_e())},b),mt=useFocusOutside(yt=>{const xt=yt.target;[...tt.branches].some(bt=>bt.contains(xt))||(g==null||g(yt),_==null||_(yt),yt.defaultPrevented||_e==null||_e())},b);return useEscapeKeydown(yt=>{lt===tt.layers.size-1&&(d==null||d(yt),!yt.defaultPrevented&&_e&&(yt.preventDefault(),_e()))},b),reactExports.useEffect(()=>{if(rt)return c&&(tt.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),tt.layersWithOutsidePointerEventsDisabled.add(rt)),tt.layers.add(rt),dispatchUpdate(),()=>{c&&tt.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=originalBodyPointerEvents)}},[rt,b,c,tt]),reactExports.useEffect(()=>()=>{rt&&(tt.layers.delete(rt),tt.layersWithOutsidePointerEventsDisabled.delete(rt),dispatchUpdate())},[rt,tt]),reactExports.useEffect(()=>{const yt=()=>nt({});return document.addEventListener(CONTEXT_UPDATE,yt),()=>document.removeEventListener(CONTEXT_UPDATE,yt)},[]),jsxRuntimeExports.jsx(Primitive.div,{...et,ref:st,style:{pointerEvents:dt?ht?"auto":"none":void 0,...a.style},onFocusCapture:composeEventHandlers(a.onFocusCapture,mt.onFocusCapture),onBlurCapture:composeEventHandlers(a.onBlurCapture,mt.onBlurCapture),onPointerDownCapture:composeEventHandlers(a.onPointerDownCapture,pt.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((a,e)=>{const c=reactExports.useContext(DismissableLayerContext),d=reactExports.useRef(null),h=useComposedRefs(e,d);return reactExports.useEffect(()=>{const g=d.current;if(g)return c.branches.add(g),()=>{c.branches.delete(g)}},[c.branches]),jsxRuntimeExports.jsx(Primitive.div,{...a,ref:h})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(a,e=globalThis==null?void 0:globalThis.document){const c=useCallbackRef$1(a),d=reactExports.useRef(!1),h=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const g=_e=>{if(_e.target&&!d.current){let et=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,c,tt,{discrete:!0})};const tt={originalEvent:_e};_e.pointerType==="touch"?(e.removeEventListener("click",h.current),h.current=et,e.addEventListener("click",h.current,{once:!0})):et()}else e.removeEventListener("click",h.current);d.current=!1},_=window.setTimeout(()=>{e.addEventListener("pointerdown",g)},0);return()=>{window.clearTimeout(_),e.removeEventListener("pointerdown",g),e.removeEventListener("click",h.current)}},[e,c]),{onPointerDownCapture:()=>d.current=!0}}function useFocusOutside(a,e=globalThis==null?void 0:globalThis.document){const c=useCallbackRef$1(a),d=reactExports.useRef(!1);return reactExports.useEffect(()=>{const h=g=>{g.target&&!d.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,c,{originalEvent:g},{discrete:!1})};return e.addEventListener("focusin",h),()=>e.removeEventListener("focusin",h)},[e,c]),{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}function dispatchUpdate(){const a=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(a)}function handleAndDispatchCustomEvent$1(a,e,c,{discrete:d}){const h=c.originalEvent.target,g=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});e&&h.addEventListener(a,e,{once:!0}),d?dispatchDiscreteCustomEvent(h,g):h.dispatchEvent(g)}var Root$8=DismissableLayer,Branch=DismissableLayerBranch,useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$4="Portal",Portal$2=reactExports.forwardRef((a,e)=>{var _e;const{container:c,...d}=a,[h,g]=reactExports.useState(!1);useLayoutEffect2(()=>g(!0),[]);const _=c||h&&((_e=globalThis==null?void 0:globalThis.document)==null?void 0:_e.body);return _?Gt.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...d,ref:e}),_):null});Portal$2.displayName=PORTAL_NAME$4;function useStateMachine$1(a,e){return reactExports.useReducer((c,d)=>e[c][d]??c,a)}var Presence=a=>{const{present:e,children:c}=a,d=usePresence(e),h=typeof c=="function"?c({present:d.isPresent}):reactExports.Children.only(c),g=useComposedRefs(d.ref,getElementRef(h));return typeof c=="function"||d.isPresent?reactExports.cloneElement(h,{ref:g}):null};Presence.displayName="Presence";function usePresence(a){const[e,c]=reactExports.useState(),d=reactExports.useRef({}),h=reactExports.useRef(a),g=reactExports.useRef("none"),_=a?"mounted":"unmounted",[_e,et]=useStateMachine$1(_,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const tt=getAnimationName(d.current);g.current=_e==="mounted"?tt:"none"},[_e]),useLayoutEffect2(()=>{const tt=d.current,rt=h.current;if(rt!==a){const b=g.current,nt=getAnimationName(tt);a?et("MOUNT"):nt==="none"||(tt==null?void 0:tt.display)==="none"?et("UNMOUNT"):et(rt&&b!==nt?"ANIMATION_OUT":"UNMOUNT"),h.current=a}},[a,et]),useLayoutEffect2(()=>{if(e){let tt;const rt=e.ownerDocument.defaultView??window,$=nt=>{const ot=getAnimationName(d.current).includes(nt.animationName);if(nt.target===e&&ot&&(et("ANIMATION_END"),!h.current)){const it=e.style.animationFillMode;e.style.animationFillMode="forwards",tt=rt.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=it)})}},b=nt=>{nt.target===e&&(g.current=getAnimationName(d.current))};return e.addEventListener("animationstart",b),e.addEventListener("animationcancel",$),e.addEventListener("animationend",$),()=>{rt.clearTimeout(tt),e.removeEventListener("animationstart",b),e.removeEventListener("animationcancel",$),e.removeEventListener("animationend",$)}}else et("ANIMATION_END")},[e,et]),{isPresent:["mounted","unmountSuspended"].includes(_e),ref:reactExports.useCallback(tt=>{tt&&(d.current=getComputedStyle(tt)),c(tt)},[])}}function getAnimationName(a){return(a==null?void 0:a.animationName)||"none"}function getElementRef(a){var d,h;let e=(d=Object.getOwnPropertyDescriptor(a.props,"ref"))==null?void 0:d.get,c=e&&"isReactWarning"in e&&e.isReactWarning;return c?a.ref:(e=(h=Object.getOwnPropertyDescriptor(a,"ref"))==null?void 0:h.get,c=e&&"isReactWarning"in e&&e.isReactWarning,c?a.props.ref:a.props.ref||a.ref)}function useControllableState({prop:a,defaultProp:e,onChange:c=()=>{}}){const[d,h]=useUncontrolledState({defaultProp:e,onChange:c}),g=a!==void 0,_=g?a:d,_e=useCallbackRef$1(c),et=reactExports.useCallback(tt=>{if(g){const $=typeof tt=="function"?tt(a):tt;$!==a&&_e($)}else h(tt)},[g,a,h,_e]);return[_,et]}function useUncontrolledState({defaultProp:a,onChange:e}){const c=reactExports.useState(a),[d]=c,h=reactExports.useRef(d),g=useCallbackRef$1(e);return reactExports.useEffect(()=>{h.current!==d&&(g(d),h.current=d)},[d,h,g]),c}var NAME$3="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((a,e)=>jsxRuntimeExports.jsx(Primitive.span,{...a,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...a.style}}));VisuallyHidden.displayName=NAME$3;var Root$7=VisuallyHidden,PROVIDER_NAME$1="ToastProvider",[Collection$3,useCollection$3,createCollectionScope$3]=createCollection("Toast"),[createToastContext,createToastScope]=createContextScope$2("Toast",[createCollectionScope$3]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME$1),ToastProvider$1=a=>{const{__scopeToast:e,label:c="Notification",duration:d=5e3,swipeDirection:h="right",swipeThreshold:g=50,children:_}=a,[_e,et]=reactExports.useState(null),[tt,rt]=reactExports.useState(0),$=reactExports.useRef(!1),b=reactExports.useRef(!1);return c.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME$1}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection$3.Provider,{scope:e,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:e,label:c,duration:d,swipeDirection:h,swipeThreshold:g,toastCount:tt,viewport:_e,onViewportChange:et,onToastAdd:reactExports.useCallback(()=>rt(nt=>nt+1),[]),onToastRemove:reactExports.useCallback(()=>rt(nt=>nt-1),[]),isFocusedToastEscapeKeyDownRef:$,isClosePausedRef:b,children:_})})};ToastProvider$1.displayName=PROVIDER_NAME$1;var VIEWPORT_NAME$2="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport$1=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,hotkey:d=VIEWPORT_DEFAULT_HOTKEY,label:h="Notifications ({hotkey})",...g}=a,_=useToastProviderContext(VIEWPORT_NAME$2,c),_e=useCollection$3(c),et=reactExports.useRef(null),tt=reactExports.useRef(null),rt=reactExports.useRef(null),$=reactExports.useRef(null),b=useComposedRefs(e,$,_.onViewportChange),nt=d.join("+").replace(/Key/g,"").replace(/Digit/g,""),st=_.toastCount>0;reactExports.useEffect(()=>{const it=at=>{var dt;d.length!==0&&d.every(ht=>at[ht]||at.code===ht)&&((dt=$.current)==null||dt.focus())};return document.addEventListener("keydown",it),()=>document.removeEventListener("keydown",it)},[d]),reactExports.useEffect(()=>{const it=et.current,at=$.current;if(st&&it&&at){const lt=()=>{if(!_.isClosePausedRef.current){const mt=new CustomEvent(VIEWPORT_PAUSE);at.dispatchEvent(mt),_.isClosePausedRef.current=!0}},dt=()=>{if(_.isClosePausedRef.current){const mt=new CustomEvent(VIEWPORT_RESUME);at.dispatchEvent(mt),_.isClosePausedRef.current=!1}},ht=mt=>{!it.contains(mt.relatedTarget)&&dt()},pt=()=>{it.contains(document.activeElement)||dt()};return it.addEventListener("focusin",lt),it.addEventListener("focusout",ht),it.addEventListener("pointermove",lt),it.addEventListener("pointerleave",pt),window.addEventListener("blur",lt),window.addEventListener("focus",dt),()=>{it.removeEventListener("focusin",lt),it.removeEventListener("focusout",ht),it.removeEventListener("pointermove",lt),it.removeEventListener("pointerleave",pt),window.removeEventListener("blur",lt),window.removeEventListener("focus",dt)}}},[st,_.isClosePausedRef]);const ot=reactExports.useCallback(({tabbingDirection:it})=>{const lt=_e().map(dt=>{const ht=dt.ref.current,pt=[ht,...getTabbableCandidates$1(ht)];return it==="forwards"?pt:pt.reverse()});return(it==="forwards"?lt.reverse():lt).flat()},[_e]);return reactExports.useEffect(()=>{const it=$.current;if(it){const at=lt=>{var pt,mt,yt;const dt=lt.altKey||lt.ctrlKey||lt.metaKey;if(lt.key==="Tab"&&!dt){const xt=document.activeElement,gt=lt.shiftKey;if(lt.target===it&&gt){(pt=tt.current)==null||pt.focus();return}const Mt=ot({tabbingDirection:gt?"backwards":"forwards"}),Pt=Mt.findIndex(Tt=>Tt===xt);focusFirst$3(Mt.slice(Pt+1))?lt.preventDefault():gt?(mt=tt.current)==null||mt.focus():(yt=rt.current)==null||yt.focus()}};return it.addEventListener("keydown",at),()=>it.removeEventListener("keydown",at)}},[_e,ot]),jsxRuntimeExports.jsxs(Branch,{ref:et,role:"region","aria-label":h.replace("{hotkey}",nt),tabIndex:-1,style:{pointerEvents:st?void 0:"none"},children:[st&&jsxRuntimeExports.jsx(FocusProxy,{ref:tt,onFocusFromOutsideViewport:()=>{const it=ot({tabbingDirection:"forwards"});focusFirst$3(it)}}),jsxRuntimeExports.jsx(Collection$3.Slot,{scope:c,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,...g,ref:b})}),st&&jsxRuntimeExports.jsx(FocusProxy,{ref:rt,onFocusFromOutsideViewport:()=>{const it=ot({tabbingDirection:"backwards"});focusFirst$3(it)}})]})});ToastViewport$1.displayName=VIEWPORT_NAME$2;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,onFocusFromOutsideViewport:d,...h}=a,g=useToastProviderContext(FOCUS_PROXY_NAME,c);return jsxRuntimeExports.jsx(VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...h,ref:e,style:{position:"fixed"},onFocus:_=>{var tt;const _e=_.relatedTarget;!((tt=g.viewport)!=null&&tt.contains(_e))&&d()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast$1=reactExports.forwardRef((a,e)=>{const{forceMount:c,open:d,defaultOpen:h,onOpenChange:g,..._}=a,[_e=!0,et]=useControllableState({prop:d,defaultProp:h,onChange:g});return jsxRuntimeExports.jsx(Presence,{present:c||_e,children:jsxRuntimeExports.jsx(ToastImpl,{open:_e,..._,ref:e,onClose:()=>et(!1),onPause:useCallbackRef$1(a.onPause),onResume:useCallbackRef$1(a.onResume),onSwipeStart:composeEventHandlers(a.onSwipeStart,tt=>{tt.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers(a.onSwipeMove,tt=>{const{x:rt,y:$}=tt.detail.delta;tt.currentTarget.setAttribute("data-swipe","move"),tt.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${rt}px`),tt.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${$}px`)}),onSwipeCancel:composeEventHandlers(a.onSwipeCancel,tt=>{tt.currentTarget.setAttribute("data-swipe","cancel"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers(a.onSwipeEnd,tt=>{const{x:rt,y:$}=tt.detail.delta;tt.currentTarget.setAttribute("data-swipe","end"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),tt.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${rt}px`),tt.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${$}px`),et(!1)})})})});Toast$1.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,type:d="foreground",duration:h,open:g,onClose:_,onEscapeKeyDown:_e,onPause:et,onResume:tt,onSwipeStart:rt,onSwipeMove:$,onSwipeCancel:b,onSwipeEnd:nt,...st}=a,ot=useToastProviderContext(TOAST_NAME,c),[it,at]=reactExports.useState(null),lt=useComposedRefs(e,Tt=>at(Tt)),dt=reactExports.useRef(null),ht=reactExports.useRef(null),pt=h||ot.duration,mt=reactExports.useRef(0),yt=reactExports.useRef(pt),xt=reactExports.useRef(0),{onToastAdd:gt,onToastRemove:bt}=ot,jt=useCallbackRef$1(()=>{var St;(it==null?void 0:it.contains(document.activeElement))&&((St=ot.viewport)==null||St.focus()),_()}),Mt=reactExports.useCallback(Tt=>{!Tt||Tt===1/0||(window.clearTimeout(xt.current),mt.current=new Date().getTime(),xt.current=window.setTimeout(jt,Tt))},[jt]);reactExports.useEffect(()=>{const Tt=ot.viewport;if(Tt){const St=()=>{Mt(yt.current),tt==null||tt()},wt=()=>{const Rt=new Date().getTime()-mt.current;yt.current=yt.current-Rt,window.clearTimeout(xt.current),et==null||et()};return Tt.addEventListener(VIEWPORT_PAUSE,wt),Tt.addEventListener(VIEWPORT_RESUME,St),()=>{Tt.removeEventListener(VIEWPORT_PAUSE,wt),Tt.removeEventListener(VIEWPORT_RESUME,St)}}},[ot.viewport,pt,et,tt,Mt]),reactExports.useEffect(()=>{g&&!ot.isClosePausedRef.current&&Mt(pt)},[g,pt,ot.isClosePausedRef,Mt]),reactExports.useEffect(()=>(gt(),()=>bt()),[gt,bt]);const Pt=reactExports.useMemo(()=>it?getAnnounceTextContent(it):null,[it]);return ot.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Pt&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:c,role:"status","aria-live":d==="foreground"?"assertive":"polite","aria-atomic":!0,children:Pt}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:c,onClose:jt,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection$3.ItemSlot,{scope:c,children:jsxRuntimeExports.jsx(Root$8,{asChild:!0,onEscapeKeyDown:composeEventHandlers(_e,()=>{ot.isFocusedToastEscapeKeyDownRef.current||jt(),ot.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":g?"open":"closed","data-swipe-direction":ot.swipeDirection,...st,ref:lt,style:{userSelect:"none",touchAction:"none",...a.style},onKeyDown:composeEventHandlers(a.onKeyDown,Tt=>{Tt.key==="Escape"&&(_e==null||_e(Tt.nativeEvent),Tt.nativeEvent.defaultPrevented||(ot.isFocusedToastEscapeKeyDownRef.current=!0,jt()))}),onPointerDown:composeEventHandlers(a.onPointerDown,Tt=>{Tt.button===0&&(dt.current={x:Tt.clientX,y:Tt.clientY})}),onPointerMove:composeEventHandlers(a.onPointerMove,Tt=>{if(!dt.current)return;const St=Tt.clientX-dt.current.x,wt=Tt.clientY-dt.current.y,Rt=!!ht.current,At=["left","right"].includes(ot.swipeDirection),Et=["left","up"].includes(ot.swipeDirection)?Math.min:Math.max,zt=At?Et(0,St):0,er=At?0:Et(0,wt),pr=Tt.pointerType==="touch"?10:2,_r={x:zt,y:er},Er={originalEvent:Tt,delta:_r};Rt?(ht.current=_r,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,$,Er,{discrete:!1})):isDeltaInDirection(_r,ot.swipeDirection,pr)?(ht.current=_r,handleAndDispatchCustomEvent(TOAST_SWIPE_START,rt,Er,{discrete:!1}),Tt.target.setPointerCapture(Tt.pointerId)):(Math.abs(St)>pr||Math.abs(wt)>pr)&&(dt.current=null)}),onPointerUp:composeEventHandlers(a.onPointerUp,Tt=>{const St=ht.current,wt=Tt.target;if(wt.hasPointerCapture(Tt.pointerId)&&wt.releasePointerCapture(Tt.pointerId),ht.current=null,dt.current=null,St){const Rt=Tt.currentTarget,At={originalEvent:Tt,delta:St};isDeltaInDirection(St,ot.swipeDirection,ot.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,nt,At,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,b,At,{discrete:!0}),Rt.addEventListener("click",Et=>Et.preventDefault(),{once:!0})}})})})}),ot.viewport)})]}):null}),ToastAnnounce=a=>{const{__scopeToast:e,children:c,...d}=a,h=useToastProviderContext(TOAST_NAME,e),[g,_]=reactExports.useState(!1),[_e,et]=reactExports.useState(!1);return useNextFrame(()=>_(!0)),reactExports.useEffect(()=>{const tt=window.setTimeout(()=>et(!0),1e3);return()=>window.clearTimeout(tt)},[]),_e?null:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...d,children:g&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[h.label," ",c]})})})},TITLE_NAME="ToastTitle",ToastTitle$1=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{...d,ref:e})});ToastTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="ToastDescription",ToastDescription$1=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{...d,ref:e})});ToastDescription$1.displayName=DESCRIPTION_NAME;var ACTION_NAME="ToastAction",ToastAction$1=reactExports.forwardRef((a,e)=>{const{altText:c,...d}=a;return c.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:c,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose$1,{...d,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME}\`. Expected non-empty \`string\`.`),null)});ToastAction$1.displayName=ACTION_NAME;var CLOSE_NAME="ToastClose",ToastClose$1=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,...d}=a,h=useToastInteractiveContext(CLOSE_NAME,c);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...d,ref:e,onClick:composeEventHandlers(a.onClick,h.onClose)})})});ToastClose$1.displayName=CLOSE_NAME;var ToastAnnounceExclude=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,altText:d,...h}=a;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":d||void 0,...h,ref:e})});function getAnnounceTextContent(a){const e=[];return Array.from(a.childNodes).forEach(d=>{if(d.nodeType===d.TEXT_NODE&&d.textContent&&e.push(d.textContent),isHTMLElement$2(d)){const h=d.ariaHidden||d.hidden||d.style.display==="none",g=d.dataset.radixToastAnnounceExclude==="";if(!h)if(g){const _=d.dataset.radixToastAnnounceAlt;_&&e.push(_)}else e.push(...getAnnounceTextContent(d))}}),e}function handleAndDispatchCustomEvent(a,e,c,{discrete:d}){const h=c.originalEvent.currentTarget,g=new CustomEvent(a,{bubbles:!0,cancelable:!0,detail:c});e&&h.addEventListener(a,e,{once:!0}),d?dispatchDiscreteCustomEvent(h,g):h.dispatchEvent(g)}var isDeltaInDirection=(a,e,c=0)=>{const d=Math.abs(a.x),h=Math.abs(a.y),g=d>h;return e==="left"||e==="right"?g&&d>c:!g&&h>c};function useNextFrame(a=()=>{}){const e=useCallbackRef$1(a);useLayoutEffect2(()=>{let c=0,d=0;return c=window.requestAnimationFrame(()=>d=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(c),window.cancelAnimationFrame(d)}},[e])}function isHTMLElement$2(a){return a.nodeType===a.ELEMENT_NODE}function getTabbableCandidates$1(a){const e=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:d=>{const h=d.tagName==="INPUT"&&d.type==="hidden";return d.disabled||d.hidden||h?NodeFilter.FILTER_SKIP:d.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)e.push(c.currentNode);return e}function focusFirst$3(a){const e=document.activeElement;return a.some(c=>c===e?!0:(c.focus(),document.activeElement!==e))}var Provider$1=ToastProvider$1,Viewport$2=ToastViewport$1,Root2$5=Toast$1,Title=ToastTitle$1,Description=ToastDescription$1,Action=ToastAction$1,Close=ToastClose$1;function r$1(a){var e,c,d="";if(typeof a=="string"||typeof a=="number")d+=a;else if(typeof a=="object")if(Array.isArray(a)){var h=a.length;for(e=0;e<h;e++)a[e]&&(c=r$1(a[e]))&&(d&&(d+=" "),d+=c)}else for(c in a)a[c]&&(d&&(d+=" "),d+=c);return d}function clsx(){for(var a,e,c=0,d="",h=arguments.length;c<h;c++)(a=arguments[c])&&(e=r$1(a))&&(d&&(d+=" "),d+=e);return d}const falsyToString=a=>typeof a=="boolean"?`${a}`:a===0?"0":a,cx=clsx,cva=(a,e)=>c=>{var d;if((e==null?void 0:e.variants)==null)return cx(a,c==null?void 0:c.class,c==null?void 0:c.className);const{variants:h,defaultVariants:g}=e,_=Object.keys(h).map(tt=>{const rt=c==null?void 0:c[tt],$=g==null?void 0:g[tt];if(rt===null)return null;const b=falsyToString(rt)||falsyToString($);return h[tt][b]}),_e=c&&Object.entries(c).reduce((tt,rt)=>{let[$,b]=rt;return b===void 0||(tt[$]=b),tt},{}),et=e==null||(d=e.compoundVariants)===null||d===void 0?void 0:d.reduce((tt,rt)=>{let{class:$,className:b,...nt}=rt;return Object.entries(nt).every(st=>{let[ot,it]=st;return Array.isArray(it)?it.includes({...g,..._e}[ot]):{...g,..._e}[ot]===it})?[...tt,$,b]:tt},[]);return cx(a,_,et,c==null?void 0:c.class,c==null?void 0:c.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...a)=>a.filter((e,c,d)=>!!e&&e.trim()!==""&&d.indexOf(e)===c).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon$1=reactExports.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:h="",children:g,iconNode:_,..._e},et)=>reactExports.createElement("svg",{ref:et,...defaultAttributes,width:e,height:e,stroke:a,strokeWidth:d?Number(c)*24/Number(e):c,className:mergeClasses("lucide",h),..._e},[..._.map(([tt,rt])=>reactExports.createElement(tt,rt)),...Array.isArray(g)?g:[g]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(a,e)=>{const c=reactExports.forwardRef(({className:d,...h},g)=>reactExports.createElement(Icon$1,{ref:g,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(a)}`,d),...h}));return c.displayName=`${a}`,c};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CreditCard=createLucideIcon("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EyeOff=createLucideIcon("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=createLucideIcon("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Image$2=createLucideIcon("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LoaderCircle=createLucideIcon("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogOut=createLucideIcon("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mail=createLucideIcon("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MapPin=createLucideIcon("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Menu$1=createLucideIcon("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageCircle=createLucideIcon("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Minus=createLucideIcon("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Package=createLucideIcon("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phone=createLucideIcon("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Send=createLucideIcon("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ShoppingCart=createLucideIcon("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),CLASS_PART_SEPARATOR="-",createClassGroupUtils=a=>{const e=createClassMap(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;return{getClassGroupId:_=>{const _e=_.split(CLASS_PART_SEPARATOR);return _e[0]===""&&_e.length!==1&&_e.shift(),getGroupRecursive(_e,e)||getGroupIdForArbitraryProperty(_)},getConflictingClassGroupIds:(_,_e)=>{const et=c[_]||[];return _e&&d[_]?[...et,...d[_]]:et}}},getGroupRecursive=(a,e)=>{var _;if(a.length===0)return e.classGroupId;const c=a[0],d=e.nextPart.get(c),h=d?getGroupRecursive(a.slice(1),d):void 0;if(h)return h;if(e.validators.length===0)return;const g=a.join(CLASS_PART_SEPARATOR);return(_=e.validators.find(({validator:_e})=>_e(g)))==null?void 0:_.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=a=>{if(arbitraryPropertyRegex.test(a)){const e=arbitraryPropertyRegex.exec(a)[1],c=e==null?void 0:e.substring(0,e.indexOf(":"));if(c)return"arbitrary.."+c}},createClassMap=a=>{const{theme:e,prefix:c}=a,d={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(a.classGroups),c).forEach(([g,_])=>{processClassesRecursively(_,d,g,e)}),d},processClassesRecursively=(a,e,c,d)=>{a.forEach(h=>{if(typeof h=="string"){const g=h===""?e:getPart(e,h);g.classGroupId=c;return}if(typeof h=="function"){if(isThemeGetter(h)){processClassesRecursively(h(d),e,c,d);return}e.validators.push({validator:h,classGroupId:c});return}Object.entries(h).forEach(([g,_])=>{processClassesRecursively(_,getPart(e,g),c,d)})})},getPart=(a,e)=>{let c=a;return e.split(CLASS_PART_SEPARATOR).forEach(d=>{c.nextPart.has(d)||c.nextPart.set(d,{nextPart:new Map,validators:[]}),c=c.nextPart.get(d)}),c},isThemeGetter=a=>a.isThemeGetter,getPrefixedClassGroupEntries=(a,e)=>e?a.map(([c,d])=>{const h=d.map(g=>typeof g=="string"?e+g:typeof g=="object"?Object.fromEntries(Object.entries(g).map(([_,_e])=>[e+_,_e])):g);return[c,h]}):a,createLruCache=a=>{if(a<1)return{get:()=>{},set:()=>{}};let e=0,c=new Map,d=new Map;const h=(g,_)=>{c.set(g,_),e++,e>a&&(e=0,d=c,c=new Map)};return{get(g){let _=c.get(g);if(_!==void 0)return _;if((_=d.get(g))!==void 0)return h(g,_),_},set(g,_){c.has(g)?c.set(g,_):h(g,_)}}},IMPORTANT_MODIFIER="!",createParseClassName=a=>{const{separator:e,experimentalParseClassName:c}=a,d=e.length===1,h=e[0],g=e.length,_=_e=>{const et=[];let tt=0,rt=0,$;for(let it=0;it<_e.length;it++){let at=_e[it];if(tt===0){if(at===h&&(d||_e.slice(it,it+g)===e)){et.push(_e.slice(rt,it)),rt=it+g;continue}if(at==="/"){$=it;continue}}at==="["?tt++:at==="]"&&tt--}const b=et.length===0?_e:_e.substring(rt),nt=b.startsWith(IMPORTANT_MODIFIER),st=nt?b.substring(1):b,ot=$&&$>rt?$-rt:void 0;return{modifiers:et,hasImportantModifier:nt,baseClassName:st,maybePostfixModifierPosition:ot}};return c?_e=>c({className:_e,parseClassName:_}):_},sortModifiers=a=>{if(a.length<=1)return a;const e=[];let c=[];return a.forEach(d=>{d[0]==="["?(e.push(...c.sort(),d),c=[]):c.push(d)}),e.push(...c.sort()),e},createConfigUtils=a=>({cache:createLruCache(a.cacheSize),parseClassName:createParseClassName(a),...createClassGroupUtils(a)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(a,e)=>{const{parseClassName:c,getClassGroupId:d,getConflictingClassGroupIds:h}=e,g=[],_=a.trim().split(SPLIT_CLASSES_REGEX);let _e="";for(let et=_.length-1;et>=0;et-=1){const tt=_[et],{modifiers:rt,hasImportantModifier:$,baseClassName:b,maybePostfixModifierPosition:nt}=c(tt);let st=!!nt,ot=d(st?b.substring(0,nt):b);if(!ot){if(!st){_e=tt+(_e.length>0?" "+_e:_e);continue}if(ot=d(b),!ot){_e=tt+(_e.length>0?" "+_e:_e);continue}st=!1}const it=sortModifiers(rt).join(":"),at=$?it+IMPORTANT_MODIFIER:it,lt=at+ot;if(g.includes(lt))continue;g.push(lt);const dt=h(ot,st);for(let ht=0;ht<dt.length;++ht){const pt=dt[ht];g.push(at+pt)}_e=tt+(_e.length>0?" "+_e:_e)}return _e};function twJoin(){let a=0,e,c,d="";for(;a<arguments.length;)(e=arguments[a++])&&(c=toValue(e))&&(d&&(d+=" "),d+=c);return d}const toValue=a=>{if(typeof a=="string")return a;let e,c="";for(let d=0;d<a.length;d++)a[d]&&(e=toValue(a[d]))&&(c&&(c+=" "),c+=e);return c};function createTailwindMerge(a,...e){let c,d,h,g=_;function _(et){const tt=e.reduce((rt,$)=>$(rt),a());return c=createConfigUtils(tt),d=c.cache.get,h=c.cache.set,g=_e,_e(et)}function _e(et){const tt=d(et);if(tt)return tt;const rt=mergeClassList(et,c);return h(et,rt),rt}return function(){return g(twJoin.apply(null,arguments))}}const fromTheme=a=>{const e=c=>c[a]||[];return e.isThemeGetter=!0,e},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=a=>isNumber(a)||stringLengths.has(a)||fractionRegex.test(a),isArbitraryLength=a=>getIsArbitraryValue(a,"length",isLengthOnly),isNumber=a=>!!a&&!Number.isNaN(Number(a)),isArbitraryNumber=a=>getIsArbitraryValue(a,"number",isNumber),isInteger$3=a=>!!a&&Number.isInteger(Number(a)),isPercent=a=>a.endsWith("%")&&isNumber(a.slice(0,-1)),isArbitraryValue=a=>arbitraryValueRegex.test(a),isTshirtSize=a=>tshirtUnitRegex.test(a),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=a=>getIsArbitraryValue(a,sizeLabels,isNever),isArbitraryPosition=a=>getIsArbitraryValue(a,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=a=>getIsArbitraryValue(a,imageLabels,isImage),isArbitraryShadow=a=>getIsArbitraryValue(a,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(a,e,c)=>{const d=arbitraryValueRegex.exec(a);return d?d[1]?typeof e=="string"?d[1]===e:e.has(d[1]):c(d[2]):!1},isLengthOnly=a=>lengthUnitRegex.test(a)&&!colorFunctionRegex.test(a),isNever=()=>!1,isShadow=a=>shadowRegex.test(a),isImage=a=>imageRegex.test(a),getDefaultConfig=()=>{const a=fromTheme("colors"),e=fromTheme("spacing"),c=fromTheme("blur"),d=fromTheme("brightness"),h=fromTheme("borderColor"),g=fromTheme("borderRadius"),_=fromTheme("borderSpacing"),_e=fromTheme("borderWidth"),et=fromTheme("contrast"),tt=fromTheme("grayscale"),rt=fromTheme("hueRotate"),$=fromTheme("invert"),b=fromTheme("gap"),nt=fromTheme("gradientColorStops"),st=fromTheme("gradientColorStopPositions"),ot=fromTheme("inset"),it=fromTheme("margin"),at=fromTheme("opacity"),lt=fromTheme("padding"),dt=fromTheme("saturate"),ht=fromTheme("scale"),pt=fromTheme("sepia"),mt=fromTheme("skew"),yt=fromTheme("space"),xt=fromTheme("translate"),gt=()=>["auto","contain","none"],bt=()=>["auto","hidden","clip","visible","scroll"],jt=()=>["auto",isArbitraryValue,e],Mt=()=>[isArbitraryValue,e],Pt=()=>["",isLength,isArbitraryLength],Tt=()=>["auto",isNumber,isArbitraryValue],St=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],wt=()=>["solid","dashed","dotted","double","none"],Rt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],At=()=>["start","end","center","between","around","evenly","stretch"],Et=()=>["","0",isArbitraryValue],zt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],er=()=>[isNumber,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:er(),borderColor:[a],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:Mt(),borderWidth:Pt(),contrast:er(),grayscale:Et(),hueRotate:er(),invert:Et(),gap:Mt(),gradientColorStops:[a],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:jt(),margin:jt(),opacity:er(),padding:Mt(),saturate:er(),scale:er(),sepia:Et(),skew:er(),space:Mt(),translate:Mt()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":zt()}],"break-before":[{"break-before":zt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...St(),isArbitraryValue]}],overflow:[{overflow:bt()}],"overflow-x":[{"overflow-x":bt()}],"overflow-y":[{"overflow-y":bt()}],overscroll:[{overscroll:gt()}],"overscroll-x":[{"overscroll-x":gt()}],"overscroll-y":[{"overscroll-y":gt()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[ot]}],"inset-x":[{"inset-x":[ot]}],"inset-y":[{"inset-y":[ot]}],start:[{start:[ot]}],end:[{end:[ot]}],top:[{top:[ot]}],right:[{right:[ot]}],bottom:[{bottom:[ot]}],left:[{left:[ot]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger$3,isArbitraryValue]}],basis:[{basis:jt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:Et()}],shrink:[{shrink:Et()}],order:[{order:["first","last","none",isInteger$3,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger$3,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":Tt()}],"col-end":[{"col-end":Tt()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger$3,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":Tt()}],"row-end":[{"row-end":Tt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...At()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...At(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...At(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[lt]}],px:[{px:[lt]}],py:[{py:[lt]}],ps:[{ps:[lt]}],pe:[{pe:[lt]}],pt:[{pt:[lt]}],pr:[{pr:[lt]}],pb:[{pb:[lt]}],pl:[{pl:[lt]}],m:[{m:[it]}],mx:[{mx:[it]}],my:[{my:[it]}],ms:[{ms:[it]}],me:[{me:[it]}],mt:[{mt:[it]}],mr:[{mr:[it]}],mb:[{mb:[it]}],ml:[{ml:[it]}],"space-x":[{"space-x":[yt]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[yt]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,e]}],"min-w":[{"min-w":[isArbitraryValue,e,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,e,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[a]}],"placeholder-opacity":[{"placeholder-opacity":[at]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[a]}],"text-opacity":[{"text-opacity":[at]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...wt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[a]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Mt()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[at]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...St(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[a]}],"gradient-from-pos":[{from:[st]}],"gradient-via-pos":[{via:[st]}],"gradient-to-pos":[{to:[st]}],"gradient-from":[{from:[nt]}],"gradient-via":[{via:[nt]}],"gradient-to":[{to:[nt]}],rounded:[{rounded:[g]}],"rounded-s":[{"rounded-s":[g]}],"rounded-e":[{"rounded-e":[g]}],"rounded-t":[{"rounded-t":[g]}],"rounded-r":[{"rounded-r":[g]}],"rounded-b":[{"rounded-b":[g]}],"rounded-l":[{"rounded-l":[g]}],"rounded-ss":[{"rounded-ss":[g]}],"rounded-se":[{"rounded-se":[g]}],"rounded-ee":[{"rounded-ee":[g]}],"rounded-es":[{"rounded-es":[g]}],"rounded-tl":[{"rounded-tl":[g]}],"rounded-tr":[{"rounded-tr":[g]}],"rounded-br":[{"rounded-br":[g]}],"rounded-bl":[{"rounded-bl":[g]}],"border-w":[{border:[_e]}],"border-w-x":[{"border-x":[_e]}],"border-w-y":[{"border-y":[_e]}],"border-w-s":[{"border-s":[_e]}],"border-w-e":[{"border-e":[_e]}],"border-w-t":[{"border-t":[_e]}],"border-w-r":[{"border-r":[_e]}],"border-w-b":[{"border-b":[_e]}],"border-w-l":[{"border-l":[_e]}],"border-opacity":[{"border-opacity":[at]}],"border-style":[{border:[...wt(),"hidden"]}],"divide-x":[{"divide-x":[_e]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[_e]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[at]}],"divide-style":[{divide:wt()}],"border-color":[{border:[h]}],"border-color-x":[{"border-x":[h]}],"border-color-y":[{"border-y":[h]}],"border-color-s":[{"border-s":[h]}],"border-color-e":[{"border-e":[h]}],"border-color-t":[{"border-t":[h]}],"border-color-r":[{"border-r":[h]}],"border-color-b":[{"border-b":[h]}],"border-color-l":[{"border-l":[h]}],"divide-color":[{divide:[h]}],"outline-style":[{outline:["",...wt()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[a]}],"ring-w":[{ring:Pt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[a]}],"ring-opacity":[{"ring-opacity":[at]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[a]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[at]}],"mix-blend":[{"mix-blend":[...Rt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Rt()}],filter:[{filter:["","none"]}],blur:[{blur:[c]}],brightness:[{brightness:[d]}],contrast:[{contrast:[et]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[tt]}],"hue-rotate":[{"hue-rotate":[rt]}],invert:[{invert:[$]}],saturate:[{saturate:[dt]}],sepia:[{sepia:[pt]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[c]}],"backdrop-brightness":[{"backdrop-brightness":[d]}],"backdrop-contrast":[{"backdrop-contrast":[et]}],"backdrop-grayscale":[{"backdrop-grayscale":[tt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[rt]}],"backdrop-invert":[{"backdrop-invert":[$]}],"backdrop-opacity":[{"backdrop-opacity":[at]}],"backdrop-saturate":[{"backdrop-saturate":[dt]}],"backdrop-sepia":[{"backdrop-sepia":[pt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[_]}],"border-spacing-x":[{"border-spacing-x":[_]}],"border-spacing-y":[{"border-spacing-y":[_]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:er()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:er()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[ht]}],"scale-x":[{"scale-x":[ht]}],"scale-y":[{"scale-y":[ht]}],rotate:[{rotate:[isInteger$3,isArbitraryValue]}],"translate-x":[{"translate-x":[xt]}],"translate-y":[{"translate-y":[xt]}],"skew-x":[{"skew-x":[mt]}],"skew-y":[{"skew-y":[mt]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",a]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[a]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Mt()}],"scroll-mx":[{"scroll-mx":Mt()}],"scroll-my":[{"scroll-my":Mt()}],"scroll-ms":[{"scroll-ms":Mt()}],"scroll-me":[{"scroll-me":Mt()}],"scroll-mt":[{"scroll-mt":Mt()}],"scroll-mr":[{"scroll-mr":Mt()}],"scroll-mb":[{"scroll-mb":Mt()}],"scroll-ml":[{"scroll-ml":Mt()}],"scroll-p":[{"scroll-p":Mt()}],"scroll-px":[{"scroll-px":Mt()}],"scroll-py":[{"scroll-py":Mt()}],"scroll-ps":[{"scroll-ps":Mt()}],"scroll-pe":[{"scroll-pe":Mt()}],"scroll-pt":[{"scroll-pt":Mt()}],"scroll-pr":[{"scroll-pr":Mt()}],"scroll-pb":[{"scroll-pb":Mt()}],"scroll-pl":[{"scroll-pl":Mt()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[a,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[a,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...a){return twMerge(clsx(a))}const ToastProvider=Provider$1,ToastViewport=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Viewport$2,{ref:c,className:cn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...e}));ToastViewport.displayName=Viewport$2.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:a,variant:e,...c},d)=>jsxRuntimeExports.jsx(Root2$5,{ref:d,className:cn(toastVariants({variant:e}),a),...c}));Toast.displayName=Root2$5.displayName;const ToastAction=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Action,{ref:c,className:cn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...e}));ToastAction.displayName=Action.displayName;const ToastClose=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Close,{ref:c,className:cn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...e,children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})}));ToastClose.displayName=Close.displayName;const ToastTitle=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Title,{ref:c,className:cn("text-sm font-semibold",a),...e}));ToastTitle.displayName=Title.displayName;const ToastDescription=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Description,{ref:c,className:cn("text-sm opacity-90",a),...e}));ToastDescription.displayName=Description.displayName;function Toaster$1(){const{toasts:a}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[a.map(function({id:e,title:c,description:d,action:h,...g}){return jsxRuntimeExports.jsxs(Toast,{...g,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[c&&jsxRuntimeExports.jsx(ToastTitle,{children:c}),d&&jsxRuntimeExports.jsx(ToastDescription,{children:d})]}),h,jsxRuntimeExports.jsx(ToastClose,{})]},e)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}var P=["light","dark"],E="(prefers-color-scheme: dark)",L=reactExports.createContext(void 0),D={setTheme:a=>{},themes:[]},j=()=>{var a;return(a=reactExports.useContext(L))!=null?a:D};reactExports.memo(({forcedTheme:a,storageKey:e,attribute:c,enableSystem:d,enableColorScheme:h,defaultTheme:g,value:_,attrs:_e,nonce:et})=>{let tt=g==="system",rt=c==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${_e.map(st=>`'${st}'`).join(",")})`};`:`var d=document.documentElement,n='${c}',s='setAttribute';`,$=h?P.includes(g)&&g?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${g}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",b=(st,ot=!1,it=!0)=>{let at=_?_[st]:st,lt=ot?st+"|| ''":`'${at}'`,dt="";return h&&it&&!ot&&P.includes(st)&&(dt+=`d.style.colorScheme = '${st}';`),c==="class"?ot||at?dt+=`c.add(${lt})`:dt+="null":at&&(dt+=`d[s](n,${lt})`),dt},nt=a?`!function(){${rt}${b(a)}}()`:d?`!function(){try{${rt}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${tt})){var t='${E}',m=window.matchMedia(t);if(m.media!==t||m.matches){${b("dark")}}else{${b("light")}}}else if(e){${_?`var x=${JSON.stringify(_)};`:""}${b(_?"x[e]":"e",!0)}}${tt?"":"else{"+b(g,!1,!1)+"}"}${$}}catch(e){}}()`:`!function(){try{${rt}var e=localStorage.getItem('${e}');if(e){${_?`var x=${JSON.stringify(_)};`:""}${b(_?"x[e]":"e",!0)}}else{${b(g,!1,!1)};}${$}}catch(t){}}();`;return reactExports.createElement("script",{nonce:et,dangerouslySetInnerHTML:{__html:nt}})});var Ct=a=>{switch(a){case"success":return $t;case"info":return _t;case"warning":return Wt;case"error":return Ut;default:return null}},Ft=Array(12).fill(0),It=({visible:a})=>React.createElement("div",{className:"sonner-loading-wrapper","data-visible":a},React.createElement("div",{className:"sonner-spinner"},Ft.map((e,c)=>React.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${c}`})))),$t=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Wt=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_t=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ut=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Dt=()=>{let[a,e]=React.useState(document.hidden);return React.useEffect(()=>{let c=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",c),()=>window.removeEventListener("visibilitychange",c)},[]),a},ct=1,ut=class{constructor(){this.subscribe=a=>(this.subscribers.push(a),()=>{let e=this.subscribers.indexOf(a);this.subscribers.splice(e,1)}),this.publish=a=>{this.subscribers.forEach(e=>e(a))},this.addToast=a=>{this.publish(a),this.toasts=[...this.toasts,a]},this.create=a=>{var e;let{message:c,...d}=a,h=typeof(a==null?void 0:a.id)=="number"||((e=a.id)==null?void 0:e.length)>0?a.id:ct++,g=this.toasts.find(_e=>_e.id===h),_=a.dismissible===void 0?!0:a.dismissible;return g?this.toasts=this.toasts.map(_e=>_e.id===h?(this.publish({..._e,...a,id:h,title:c}),{..._e,...a,id:h,dismissible:_,title:c}):_e):this.addToast({title:c,...d,dismissible:_,id:h}),h},this.dismiss=a=>(a||this.toasts.forEach(e=>{this.subscribers.forEach(c=>c({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:a,dismiss:!0})),a),this.message=(a,e)=>this.create({...e,message:a}),this.error=(a,e)=>this.create({...e,message:a,type:"error"}),this.success=(a,e)=>this.create({...e,type:"success",message:a}),this.info=(a,e)=>this.create({...e,type:"info",message:a}),this.warning=(a,e)=>this.create({...e,type:"warning",message:a}),this.loading=(a,e)=>this.create({...e,type:"loading",message:a}),this.promise=(a,e)=>{if(!e)return;let c;e.loading!==void 0&&(c=this.create({...e,promise:a,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let d=a instanceof Promise?a:a(),h=c!==void 0;return d.then(async g=>{if(Ot(g)&&!g.ok){h=!1;let _=typeof e.error=="function"?await e.error(`HTTP error! status: ${g.status}`):e.error,_e=typeof e.description=="function"?await e.description(`HTTP error! status: ${g.status}`):e.description;this.create({id:c,type:"error",message:_,description:_e})}else if(e.success!==void 0){h=!1;let _=typeof e.success=="function"?await e.success(g):e.success,_e=typeof e.description=="function"?await e.description(g):e.description;this.create({id:c,type:"success",message:_,description:_e})}}).catch(async g=>{if(e.error!==void 0){h=!1;let _=typeof e.error=="function"?await e.error(g):e.error,_e=typeof e.description=="function"?await e.description(g):e.description;this.create({id:c,type:"error",message:_,description:_e})}}).finally(()=>{var g;h&&(this.dismiss(c),c=void 0),(g=e.finally)==null||g.call(e)}),c},this.custom=(a,e)=>{let c=(e==null?void 0:e.id)||ct++;return this.create({jsx:a(c),id:c,...e}),c},this.subscribers=[],this.toasts=[]}},v=new ut,Vt=(a,e)=>{let c=(e==null?void 0:e.id)||ct++;return v.addToast({title:a,...e,id:c}),c},Ot=a=>a&&typeof a=="object"&&"ok"in a&&typeof a.ok=="boolean"&&"status"in a&&typeof a.status=="number",Kt=Vt,Xt=()=>v.toasts;Object.assign(Kt,{success:v.success,info:v.info,warning:v.warning,error:v.error,custom:v.custom,message:v.message,promise:v.promise,dismiss:v.dismiss,loading:v.loading},{getHistory:Xt});function ft(a,{insertAt:e}={}){if(typeof document>"u")return;let c=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css",e==="top"&&c.firstChild?c.insertBefore(d,c.firstChild):c.appendChild(d),d.styleSheet?d.styleSheet.cssText=a:d.appendChild(document.createTextNode(a))}ft(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function U(a){return a.label!==void 0}var qt=3,Qt="32px",Zt=4e3,te=356,ee=14,oe=20,ae=200;function ne(...a){return a.filter(Boolean).join(" ")}var se=a=>{var e,c,d,h,g,_,_e,et,tt,rt;let{invert:$,toast:b,unstyled:nt,interacting:st,setHeights:ot,visibleToasts:it,heights:at,index:lt,toasts:dt,expanded:ht,removeToast:pt,defaultRichColors:mt,closeButton:yt,style:xt,cancelButtonStyle:gt,actionButtonStyle:bt,className:jt="",descriptionClassName:Mt="",duration:Pt,position:Tt,gap:St,loadingIcon:wt,expandByDefault:Rt,classNames:At,icons:Et,closeButtonAriaLabel:zt="Close toast",pauseWhenPageIsHidden:er,cn:pr}=a,[_r,Er]=React.useState(!1),[Tr,wr]=React.useState(!1),[gr,Pr]=React.useState(!1),[Nr,Ar]=React.useState(!1),[Rr,Ir]=React.useState(0),[Ur,Fr]=React.useState(0),nn=React.useRef(null),en=React.useRef(null),on=lt===0,Yt=lt+1<=it,rr=b.type,ar=b.dismissible!==!1,yr=b.className||"",hr=b.descriptionClassName||"",mr=React.useMemo(()=>at.findIndex($r=>$r.toastId===b.id)||0,[at,b.id]),kr=React.useMemo(()=>{var $r;return($r=b.closeButton)!=null?$r:yt},[b.closeButton,yt]),vr=React.useMemo(()=>b.duration||Pt||Zt,[b.duration,Pt]),rn=React.useRef(0),Qr=React.useRef(0),bn=React.useRef(0),fn=React.useRef(null),[En,kn]=Tt.split("-"),ln=React.useMemo(()=>at.reduce(($r,Cr,Xr)=>Xr>=mr?$r:$r+Cr.height,0),[at,mr]),Tn=Dt(),Mr=b.invert||$,_n=rr==="loading";Qr.current=React.useMemo(()=>mr*St+ln,[mr,ln]),React.useEffect(()=>{Er(!0)},[]),React.useLayoutEffect(()=>{if(!_r)return;let $r=en.current,Cr=$r.style.height;$r.style.height="auto";let Xr=$r.getBoundingClientRect().height;$r.style.height=Cr,Fr(Xr),ot(gn=>gn.find(hn=>hn.toastId===b.id)?gn.map(hn=>hn.toastId===b.id?{...hn,height:Xr}:hn):[{toastId:b.id,height:Xr,position:b.position},...gn])},[_r,b.title,b.description,ot,b.id]);let Sn=React.useCallback(()=>{wr(!0),Ir(Qr.current),ot($r=>$r.filter(Cr=>Cr.toastId!==b.id)),setTimeout(()=>{pt(b)},ae)},[b,pt,ot,Qr]);React.useEffect(()=>{if(b.promise&&rr==="loading"||b.duration===1/0||b.type==="loading")return;let $r,Cr=vr;return ht||st||er&&Tn?(()=>{if(bn.current<rn.current){let Xr=new Date().getTime()-rn.current;Cr=Cr-Xr}bn.current=new Date().getTime()})():Cr!==1/0&&(rn.current=new Date().getTime(),$r=setTimeout(()=>{var Xr;(Xr=b.onAutoClose)==null||Xr.call(b,b),Sn()},Cr)),()=>clearTimeout($r)},[ht,st,Rt,b,vr,Sn,b.promise,rr,er,Tn]),React.useEffect(()=>{let $r=en.current;if($r){let Cr=$r.getBoundingClientRect().height;return Fr(Cr),ot(Xr=>[{toastId:b.id,height:Cr,position:b.position},...Xr]),()=>ot(Xr=>Xr.filter(gn=>gn.toastId!==b.id))}},[ot,b.id]),React.useEffect(()=>{b.delete&&Sn()},[Sn,b.delete]);function Xn(){return Et!=null&&Et.loading?React.createElement("div",{className:"sonner-loader","data-visible":rr==="loading"},Et.loading):wt?React.createElement("div",{className:"sonner-loader","data-visible":rr==="loading"},wt):React.createElement(It,{visible:rr==="loading"})}return React.createElement("li",{"aria-live":b.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:en,className:pr(jt,yr,At==null?void 0:At.toast,(e=b==null?void 0:b.classNames)==null?void 0:e.toast,At==null?void 0:At.default,At==null?void 0:At[rr],(c=b==null?void 0:b.classNames)==null?void 0:c[rr]),"data-sonner-toast":"","data-rich-colors":(d=b.richColors)!=null?d:mt,"data-styled":!(b.jsx||b.unstyled||nt),"data-mounted":_r,"data-promise":!!b.promise,"data-removed":Tr,"data-visible":Yt,"data-y-position":En,"data-x-position":kn,"data-index":lt,"data-front":on,"data-swiping":gr,"data-dismissible":ar,"data-type":rr,"data-invert":Mr,"data-swipe-out":Nr,"data-expanded":!!(ht||Rt&&_r),style:{"--index":lt,"--toasts-before":lt,"--z-index":dt.length-lt,"--offset":`${Tr?Rr:Qr.current}px`,"--initial-height":Rt?"auto":`${Ur}px`,...xt,...b.style},onPointerDown:$r=>{_n||!ar||(nn.current=new Date,Ir(Qr.current),$r.target.setPointerCapture($r.pointerId),$r.target.tagName!=="BUTTON"&&(Pr(!0),fn.current={x:$r.clientX,y:$r.clientY}))},onPointerUp:()=>{var $r,Cr,Xr,gn;if(Nr||!ar)return;fn.current=null;let hn=Number((($r=en.current)==null?void 0:$r.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Lr=new Date().getTime()-((Cr=nn.current)==null?void 0:Cr.getTime()),Dr=Math.abs(hn)/Lr;if(Math.abs(hn)>=oe||Dr>.11){Ir(Qr.current),(Xr=b.onDismiss)==null||Xr.call(b,b),Sn(),Ar(!0);return}(gn=en.current)==null||gn.style.setProperty("--swipe-amount","0px"),Pr(!1)},onPointerMove:$r=>{var Cr;if(!fn.current||!ar)return;let Xr=$r.clientY-fn.current.y,gn=$r.clientX-fn.current.x,hn=(En==="top"?Math.min:Math.max)(0,Xr),Lr=$r.pointerType==="touch"?10:2;Math.abs(hn)>Lr?(Cr=en.current)==null||Cr.style.setProperty("--swipe-amount",`${Xr}px`):Math.abs(gn)>Lr&&(fn.current=null)}},kr&&!b.jsx?React.createElement("button",{"aria-label":zt,"data-disabled":_n,"data-close-button":!0,onClick:_n||!ar?()=>{}:()=>{var $r;Sn(),($r=b.onDismiss)==null||$r.call(b,b)},className:pr(At==null?void 0:At.closeButton,(h=b==null?void 0:b.classNames)==null?void 0:h.closeButton)},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,b.jsx||React.isValidElement(b.title)?b.jsx||b.title:React.createElement(React.Fragment,null,rr||b.icon||b.promise?React.createElement("div",{"data-icon":"",className:pr(At==null?void 0:At.icon,(g=b==null?void 0:b.classNames)==null?void 0:g.icon)},b.promise||b.type==="loading"&&!b.icon?b.icon||Xn():null,b.type!=="loading"?b.icon||(Et==null?void 0:Et[rr])||Ct(rr):null):null,React.createElement("div",{"data-content":"",className:pr(At==null?void 0:At.content,(_=b==null?void 0:b.classNames)==null?void 0:_.content)},React.createElement("div",{"data-title":"",className:pr(At==null?void 0:At.title,(_e=b==null?void 0:b.classNames)==null?void 0:_e.title)},b.title),b.description?React.createElement("div",{"data-description":"",className:pr(Mt,hr,At==null?void 0:At.description,(et=b==null?void 0:b.classNames)==null?void 0:et.description)},b.description):null),React.isValidElement(b.cancel)?b.cancel:b.cancel&&U(b.cancel)?React.createElement("button",{"data-button":!0,"data-cancel":!0,style:b.cancelButtonStyle||gt,onClick:$r=>{var Cr,Xr;U(b.cancel)&&ar&&((Xr=(Cr=b.cancel).onClick)==null||Xr.call(Cr,$r),Sn())},className:pr(At==null?void 0:At.cancelButton,(tt=b==null?void 0:b.classNames)==null?void 0:tt.cancelButton)},b.cancel.label):null,React.isValidElement(b.action)?b.action:b.action&&U(b.action)?React.createElement("button",{"data-button":!0,"data-action":!0,style:b.actionButtonStyle||bt,onClick:$r=>{var Cr,Xr;U(b.action)&&($r.defaultPrevented||((Xr=(Cr=b.action).onClick)==null||Xr.call(Cr,$r),Sn()))},className:pr(At==null?void 0:At.actionButton,(rt=b==null?void 0:b.classNames)==null?void 0:rt.actionButton)},b.action.label):null))};function Ht(){if(typeof window>"u"||typeof document>"u")return"ltr";let a=document.documentElement.getAttribute("dir");return a==="auto"||!a?window.getComputedStyle(document.documentElement).direction:a}var Te=a=>{let{invert:e,position:c="bottom-right",hotkey:d=["altKey","KeyT"],expand:h,closeButton:g,className:_,offset:_e,theme:et="light",richColors:tt,duration:rt,style:$,visibleToasts:b=qt,toastOptions:nt,dir:st=Ht(),gap:ot=ee,loadingIcon:it,icons:at,containerAriaLabel:lt="Notifications",pauseWhenPageIsHidden:dt,cn:ht=ne}=a,[pt,mt]=React.useState([]),yt=React.useMemo(()=>Array.from(new Set([c].concat(pt.filter(er=>er.position).map(er=>er.position)))),[pt,c]),[xt,gt]=React.useState([]),[bt,jt]=React.useState(!1),[Mt,Pt]=React.useState(!1),[Tt,St]=React.useState(et!=="system"?et:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),wt=React.useRef(null),Rt=d.join("+").replace(/Key/g,"").replace(/Digit/g,""),At=React.useRef(null),Et=React.useRef(!1),zt=React.useCallback(er=>{var pr;(pr=pt.find(_r=>_r.id===er.id))!=null&&pr.delete||v.dismiss(er.id),mt(_r=>_r.filter(({id:Er})=>Er!==er.id))},[pt]);return React.useEffect(()=>v.subscribe(er=>{if(er.dismiss){mt(pr=>pr.map(_r=>_r.id===er.id?{..._r,delete:!0}:_r));return}setTimeout(()=>{Gt.flushSync(()=>{mt(pr=>{let _r=pr.findIndex(Er=>Er.id===er.id);return _r!==-1?[...pr.slice(0,_r),{...pr[_r],...er},...pr.slice(_r+1)]:[er,...pr]})})})}),[]),React.useEffect(()=>{if(et!=="system"){St(et);return}et==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?St("dark"):St("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:er})=>{St(er?"dark":"light")})},[et]),React.useEffect(()=>{pt.length<=1&&jt(!1)},[pt]),React.useEffect(()=>{let er=pr=>{var _r,Er;d.every(Tr=>pr[Tr]||pr.code===Tr)&&(jt(!0),(_r=wt.current)==null||_r.focus()),pr.code==="Escape"&&(document.activeElement===wt.current||(Er=wt.current)!=null&&Er.contains(document.activeElement))&&jt(!1)};return document.addEventListener("keydown",er),()=>document.removeEventListener("keydown",er)},[d]),React.useEffect(()=>{if(wt.current)return()=>{At.current&&(At.current.focus({preventScroll:!0}),At.current=null,Et.current=!1)}},[wt.current]),pt.length?React.createElement("section",{"aria-label":`${lt} ${Rt}`,tabIndex:-1},yt.map((er,pr)=>{var _r;let[Er,Tr]=er.split("-");return React.createElement("ol",{key:er,dir:st==="auto"?Ht():st,tabIndex:-1,ref:wt,className:_,"data-sonner-toaster":!0,"data-theme":Tt,"data-y-position":Er,"data-x-position":Tr,style:{"--front-toast-height":`${((_r=xt[0])==null?void 0:_r.height)||0}px`,"--offset":typeof _e=="number"?`${_e}px`:_e||Qt,"--width":`${te}px`,"--gap":`${ot}px`,...$},onBlur:wr=>{Et.current&&!wr.currentTarget.contains(wr.relatedTarget)&&(Et.current=!1,At.current&&(At.current.focus({preventScroll:!0}),At.current=null))},onFocus:wr=>{wr.target instanceof HTMLElement&&wr.target.dataset.dismissible==="false"||Et.current||(Et.current=!0,At.current=wr.relatedTarget)},onMouseEnter:()=>jt(!0),onMouseMove:()=>jt(!0),onMouseLeave:()=>{Mt||jt(!1)},onPointerDown:wr=>{wr.target instanceof HTMLElement&&wr.target.dataset.dismissible==="false"||Pt(!0)},onPointerUp:()=>Pt(!1)},pt.filter(wr=>!wr.position&&pr===0||wr.position===er).map((wr,gr)=>{var Pr,Nr;return React.createElement(se,{key:wr.id,icons:at,index:gr,toast:wr,defaultRichColors:tt,duration:(Pr=nt==null?void 0:nt.duration)!=null?Pr:rt,className:nt==null?void 0:nt.className,descriptionClassName:nt==null?void 0:nt.descriptionClassName,invert:e,visibleToasts:b,closeButton:(Nr=nt==null?void 0:nt.closeButton)!=null?Nr:g,interacting:Mt,position:er,style:nt==null?void 0:nt.style,unstyled:nt==null?void 0:nt.unstyled,classNames:nt==null?void 0:nt.classNames,cancelButtonStyle:nt==null?void 0:nt.cancelButtonStyle,actionButtonStyle:nt==null?void 0:nt.actionButtonStyle,removeToast:zt,toasts:pt.filter(Ar=>Ar.position==wr.position),heights:xt.filter(Ar=>Ar.position==wr.position),setHeights:gt,expandByDefault:h,gap:ot,loadingIcon:it,expanded:bt,pauseWhenPageIsHidden:dt,cn:ht})}))})):null};const Toaster=({...a})=>{const{theme:e="system"}=j();return jsxRuntimeExports.jsx(Te,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...a})};var useReactId=React$1.useId||(()=>{}),count$1=0;function useId(a){const[e,c]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{a||c(d=>d??String(count$1++))},[a]),a||(e?`radix-${e}`:"")}const sides=["top","right","bottom","left"],min$1=Math.min,max$1=Math.max,round$1=Math.round,floor=Math.floor,createCoords=a=>({x:a,y:a}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(a,e,c){return max$1(a,min$1(e,c))}function evaluate(a,e){return typeof a=="function"?a(e):a}function getSide(a){return a.split("-")[0]}function getAlignment(a){return a.split("-")[1]}function getOppositeAxis(a){return a==="x"?"y":"x"}function getAxisLength(a){return a==="y"?"height":"width"}function getSideAxis(a){return["top","bottom"].includes(getSide(a))?"y":"x"}function getAlignmentAxis(a){return getOppositeAxis(getSideAxis(a))}function getAlignmentSides(a,e,c){c===void 0&&(c=!1);const d=getAlignment(a),h=getAlignmentAxis(a),g=getAxisLength(h);let _=h==="x"?d===(c?"end":"start")?"right":"left":d==="start"?"bottom":"top";return e.reference[g]>e.floating[g]&&(_=getOppositePlacement(_)),[_,getOppositePlacement(_)]}function getExpandedPlacements(a){const e=getOppositePlacement(a);return[getOppositeAlignmentPlacement(a),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(a){return a.replace(/start|end/g,e=>oppositeAlignmentMap[e])}function getSideList(a,e,c){const d=["left","right"],h=["right","left"],g=["top","bottom"],_=["bottom","top"];switch(a){case"top":case"bottom":return c?e?h:d:e?d:h;case"left":case"right":return e?g:_;default:return[]}}function getOppositeAxisPlacements(a,e,c,d){const h=getAlignment(a);let g=getSideList(getSide(a),c==="start",d);return h&&(g=g.map(_=>_+"-"+h),e&&(g=g.concat(g.map(getOppositeAlignmentPlacement)))),g}function getOppositePlacement(a){return a.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(a){return{top:0,right:0,bottom:0,left:0,...a}}function getPaddingObject(a){return typeof a!="number"?expandPaddingObject(a):{top:a,right:a,bottom:a,left:a}}function rectToClientRect(a){const{x:e,y:c,width:d,height:h}=a;return{width:d,height:h,top:c,left:e,right:e+d,bottom:c+h,x:e,y:c}}function computeCoordsFromPlacement(a,e,c){let{reference:d,floating:h}=a;const g=getSideAxis(e),_=getAlignmentAxis(e),_e=getAxisLength(_),et=getSide(e),tt=g==="y",rt=d.x+d.width/2-h.width/2,$=d.y+d.height/2-h.height/2,b=d[_e]/2-h[_e]/2;let nt;switch(et){case"top":nt={x:rt,y:d.y-h.height};break;case"bottom":nt={x:rt,y:d.y+d.height};break;case"right":nt={x:d.x+d.width,y:$};break;case"left":nt={x:d.x-h.width,y:$};break;default:nt={x:d.x,y:d.y}}switch(getAlignment(e)){case"start":nt[_]-=b*(c&&tt?-1:1);break;case"end":nt[_]+=b*(c&&tt?-1:1);break}return nt}const computePosition$1=async(a,e,c)=>{const{placement:d="bottom",strategy:h="absolute",middleware:g=[],platform:_}=c,_e=g.filter(Boolean),et=await(_.isRTL==null?void 0:_.isRTL(e));let tt=await _.getElementRects({reference:a,floating:e,strategy:h}),{x:rt,y:$}=computeCoordsFromPlacement(tt,d,et),b=d,nt={},st=0;for(let ot=0;ot<_e.length;ot++){const{name:it,fn:at}=_e[ot],{x:lt,y:dt,data:ht,reset:pt}=await at({x:rt,y:$,initialPlacement:d,placement:b,strategy:h,middlewareData:nt,rects:tt,platform:_,elements:{reference:a,floating:e}});rt=lt??rt,$=dt??$,nt={...nt,[it]:{...nt[it],...ht}},pt&&st<=50&&(st++,typeof pt=="object"&&(pt.placement&&(b=pt.placement),pt.rects&&(tt=pt.rects===!0?await _.getElementRects({reference:a,floating:e,strategy:h}):pt.rects),{x:rt,y:$}=computeCoordsFromPlacement(tt,b,et)),ot=-1)}return{x:rt,y:$,placement:b,strategy:h,middlewareData:nt}};async function detectOverflow(a,e){var c;e===void 0&&(e={});const{x:d,y:h,platform:g,rects:_,elements:_e,strategy:et}=a,{boundary:tt="clippingAncestors",rootBoundary:rt="viewport",elementContext:$="floating",altBoundary:b=!1,padding:nt=0}=evaluate(e,a),st=getPaddingObject(nt),it=_e[b?$==="floating"?"reference":"floating":$],at=rectToClientRect(await g.getClippingRect({element:(c=await(g.isElement==null?void 0:g.isElement(it)))==null||c?it:it.contextElement||await(g.getDocumentElement==null?void 0:g.getDocumentElement(_e.floating)),boundary:tt,rootBoundary:rt,strategy:et})),lt=$==="floating"?{x:d,y:h,width:_.floating.width,height:_.floating.height}:_.reference,dt=await(g.getOffsetParent==null?void 0:g.getOffsetParent(_e.floating)),ht=await(g.isElement==null?void 0:g.isElement(dt))?await(g.getScale==null?void 0:g.getScale(dt))||{x:1,y:1}:{x:1,y:1},pt=rectToClientRect(g.convertOffsetParentRelativeRectToViewportRelativeRect?await g.convertOffsetParentRelativeRectToViewportRelativeRect({elements:_e,rect:lt,offsetParent:dt,strategy:et}):lt);return{top:(at.top-pt.top+st.top)/ht.y,bottom:(pt.bottom-at.bottom+st.bottom)/ht.y,left:(at.left-pt.left+st.left)/ht.x,right:(pt.right-at.right+st.right)/ht.x}}const arrow$3=a=>({name:"arrow",options:a,async fn(e){const{x:c,y:d,placement:h,rects:g,platform:_,elements:_e,middlewareData:et}=e,{element:tt,padding:rt=0}=evaluate(a,e)||{};if(tt==null)return{};const $=getPaddingObject(rt),b={x:c,y:d},nt=getAlignmentAxis(h),st=getAxisLength(nt),ot=await _.getDimensions(tt),it=nt==="y",at=it?"top":"left",lt=it?"bottom":"right",dt=it?"clientHeight":"clientWidth",ht=g.reference[st]+g.reference[nt]-b[nt]-g.floating[st],pt=b[nt]-g.reference[nt],mt=await(_.getOffsetParent==null?void 0:_.getOffsetParent(tt));let yt=mt?mt[dt]:0;(!yt||!await(_.isElement==null?void 0:_.isElement(mt)))&&(yt=_e.floating[dt]||g.floating[st]);const xt=ht/2-pt/2,gt=yt/2-ot[st]/2-1,bt=min$1($[at],gt),jt=min$1($[lt],gt),Mt=bt,Pt=yt-ot[st]-jt,Tt=yt/2-ot[st]/2+xt,St=clamp$1(Mt,Tt,Pt),wt=!et.arrow&&getAlignment(h)!=null&&Tt!==St&&g.reference[st]/2-(Tt<Mt?bt:jt)-ot[st]/2<0,Rt=wt?Tt<Mt?Tt-Mt:Tt-Pt:0;return{[nt]:b[nt]+Rt,data:{[nt]:St,centerOffset:Tt-St-Rt,...wt&&{alignmentOffset:Rt}},reset:wt}}}),flip$2=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(e){var c,d;const{placement:h,middlewareData:g,rects:_,initialPlacement:_e,platform:et,elements:tt}=e,{mainAxis:rt=!0,crossAxis:$=!0,fallbackPlacements:b,fallbackStrategy:nt="bestFit",fallbackAxisSideDirection:st="none",flipAlignment:ot=!0,...it}=evaluate(a,e);if((c=g.arrow)!=null&&c.alignmentOffset)return{};const at=getSide(h),lt=getSideAxis(_e),dt=getSide(_e)===_e,ht=await(et.isRTL==null?void 0:et.isRTL(tt.floating)),pt=b||(dt||!ot?[getOppositePlacement(_e)]:getExpandedPlacements(_e)),mt=st!=="none";!b&&mt&&pt.push(...getOppositeAxisPlacements(_e,ot,st,ht));const yt=[_e,...pt],xt=await detectOverflow(e,it),gt=[];let bt=((d=g.flip)==null?void 0:d.overflows)||[];if(rt&&gt.push(xt[at]),$){const Tt=getAlignmentSides(h,_,ht);gt.push(xt[Tt[0]],xt[Tt[1]])}if(bt=[...bt,{placement:h,overflows:gt}],!gt.every(Tt=>Tt<=0)){var jt,Mt;const Tt=(((jt=g.flip)==null?void 0:jt.index)||0)+1,St=yt[Tt];if(St)return{data:{index:Tt,overflows:bt},reset:{placement:St}};let wt=(Mt=bt.filter(Rt=>Rt.overflows[0]<=0).sort((Rt,At)=>Rt.overflows[1]-At.overflows[1])[0])==null?void 0:Mt.placement;if(!wt)switch(nt){case"bestFit":{var Pt;const Rt=(Pt=bt.filter(At=>{if(mt){const Et=getSideAxis(At.placement);return Et===lt||Et==="y"}return!0}).map(At=>[At.placement,At.overflows.filter(Et=>Et>0).reduce((Et,zt)=>Et+zt,0)]).sort((At,Et)=>At[1]-Et[1])[0])==null?void 0:Pt[0];Rt&&(wt=Rt);break}case"initialPlacement":wt=_e;break}if(h!==wt)return{reset:{placement:wt}}}return{}}}};function getSideOffsets(a,e){return{top:a.top-e.height,right:a.right-e.width,bottom:a.bottom-e.height,left:a.left-e.width}}function isAnySideFullyClipped(a){return sides.some(e=>a[e]>=0)}const hide$2=function(a){return a===void 0&&(a={}),{name:"hide",options:a,async fn(e){const{rects:c}=e,{strategy:d="referenceHidden",...h}=evaluate(a,e);switch(d){case"referenceHidden":{const g=await detectOverflow(e,{...h,elementContext:"reference"}),_=getSideOffsets(g,c.reference);return{data:{referenceHiddenOffsets:_,referenceHidden:isAnySideFullyClipped(_)}}}case"escaped":{const g=await detectOverflow(e,{...h,altBoundary:!0}),_=getSideOffsets(g,c.floating);return{data:{escapedOffsets:_,escaped:isAnySideFullyClipped(_)}}}default:return{}}}}};async function convertValueToCoords(a,e){const{placement:c,platform:d,elements:h}=a,g=await(d.isRTL==null?void 0:d.isRTL(h.floating)),_=getSide(c),_e=getAlignment(c),et=getSideAxis(c)==="y",tt=["left","top"].includes(_)?-1:1,rt=g&&et?-1:1,$=evaluate(e,a);let{mainAxis:b,crossAxis:nt,alignmentAxis:st}=typeof $=="number"?{mainAxis:$,crossAxis:0,alignmentAxis:null}:{mainAxis:$.mainAxis||0,crossAxis:$.crossAxis||0,alignmentAxis:$.alignmentAxis};return _e&&typeof st=="number"&&(nt=_e==="end"?st*-1:st),et?{x:nt*rt,y:b*tt}:{x:b*tt,y:nt*rt}}const offset$2=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(e){var c,d;const{x:h,y:g,placement:_,middlewareData:_e}=e,et=await convertValueToCoords(e,a);return _===((c=_e.offset)==null?void 0:c.placement)&&(d=_e.arrow)!=null&&d.alignmentOffset?{}:{x:h+et.x,y:g+et.y,data:{...et,placement:_}}}}},shift$2=function(a){return a===void 0&&(a={}),{name:"shift",options:a,async fn(e){const{x:c,y:d,placement:h}=e,{mainAxis:g=!0,crossAxis:_=!1,limiter:_e={fn:it=>{let{x:at,y:lt}=it;return{x:at,y:lt}}},...et}=evaluate(a,e),tt={x:c,y:d},rt=await detectOverflow(e,et),$=getSideAxis(getSide(h)),b=getOppositeAxis($);let nt=tt[b],st=tt[$];if(g){const it=b==="y"?"top":"left",at=b==="y"?"bottom":"right",lt=nt+rt[it],dt=nt-rt[at];nt=clamp$1(lt,nt,dt)}if(_){const it=$==="y"?"top":"left",at=$==="y"?"bottom":"right",lt=st+rt[it],dt=st-rt[at];st=clamp$1(lt,st,dt)}const ot=_e.fn({...e,[b]:nt,[$]:st});return{...ot,data:{x:ot.x-c,y:ot.y-d,enabled:{[b]:g,[$]:_}}}}}},limitShift$2=function(a){return a===void 0&&(a={}),{options:a,fn(e){const{x:c,y:d,placement:h,rects:g,middlewareData:_}=e,{offset:_e=0,mainAxis:et=!0,crossAxis:tt=!0}=evaluate(a,e),rt={x:c,y:d},$=getSideAxis(h),b=getOppositeAxis($);let nt=rt[b],st=rt[$];const ot=evaluate(_e,e),it=typeof ot=="number"?{mainAxis:ot,crossAxis:0}:{mainAxis:0,crossAxis:0,...ot};if(et){const dt=b==="y"?"height":"width",ht=g.reference[b]-g.floating[dt]+it.mainAxis,pt=g.reference[b]+g.reference[dt]-it.mainAxis;nt<ht?nt=ht:nt>pt&&(nt=pt)}if(tt){var at,lt;const dt=b==="y"?"width":"height",ht=["top","left"].includes(getSide(h)),pt=g.reference[$]-g.floating[dt]+(ht&&((at=_.offset)==null?void 0:at[$])||0)+(ht?0:it.crossAxis),mt=g.reference[$]+g.reference[dt]+(ht?0:((lt=_.offset)==null?void 0:lt[$])||0)-(ht?it.crossAxis:0);st<pt?st=pt:st>mt&&(st=mt)}return{[b]:nt,[$]:st}}}},size$2=function(a){return a===void 0&&(a={}),{name:"size",options:a,async fn(e){var c,d;const{placement:h,rects:g,platform:_,elements:_e}=e,{apply:et=()=>{},...tt}=evaluate(a,e),rt=await detectOverflow(e,tt),$=getSide(h),b=getAlignment(h),nt=getSideAxis(h)==="y",{width:st,height:ot}=g.floating;let it,at;$==="top"||$==="bottom"?(it=$,at=b===(await(_.isRTL==null?void 0:_.isRTL(_e.floating))?"start":"end")?"left":"right"):(at=$,it=b==="end"?"top":"bottom");const lt=ot-rt.top-rt.bottom,dt=st-rt.left-rt.right,ht=min$1(ot-rt[it],lt),pt=min$1(st-rt[at],dt),mt=!e.middlewareData.shift;let yt=ht,xt=pt;if((c=e.middlewareData.shift)!=null&&c.enabled.x&&(xt=dt),(d=e.middlewareData.shift)!=null&&d.enabled.y&&(yt=lt),mt&&!b){const bt=max$1(rt.left,0),jt=max$1(rt.right,0),Mt=max$1(rt.top,0),Pt=max$1(rt.bottom,0);nt?xt=st-2*(bt!==0||jt!==0?bt+jt:max$1(rt.left,rt.right)):yt=ot-2*(Mt!==0||Pt!==0?Mt+Pt:max$1(rt.top,rt.bottom))}await et({...e,availableWidth:xt,availableHeight:yt});const gt=await _.getDimensions(_e.floating);return st!==gt.width||ot!==gt.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(a){return isNode$2(a)?(a.nodeName||"").toLowerCase():"#document"}function getWindow(a){var e;return(a==null||(e=a.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(a){var e;return(e=(isNode$2(a)?a.ownerDocument:a.document)||window.document)==null?void 0:e.documentElement}function isNode$2(a){return hasWindow()?a instanceof Node||a instanceof getWindow(a).Node:!1}function isElement(a){return hasWindow()?a instanceof Element||a instanceof getWindow(a).Element:!1}function isHTMLElement$1(a){return hasWindow()?a instanceof HTMLElement||a instanceof getWindow(a).HTMLElement:!1}function isShadowRoot(a){return!hasWindow()||typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof getWindow(a).ShadowRoot}function isOverflowElement(a){const{overflow:e,overflowX:c,overflowY:d,display:h}=getComputedStyle$1(a);return/auto|scroll|overlay|hidden|clip/.test(e+d+c)&&!["inline","contents"].includes(h)}function isTableElement(a){return["table","td","th"].includes(getNodeName(a))}function isTopLayer(a){return[":popover-open",":modal"].some(e=>{try{return a.matches(e)}catch{return!1}})}function isContainingBlock(a){const e=isWebKit(),c=isElement(a)?getComputedStyle$1(a):a;return c.transform!=="none"||c.perspective!=="none"||(c.containerType?c.containerType!=="normal":!1)||!e&&(c.backdropFilter?c.backdropFilter!=="none":!1)||!e&&(c.filter?c.filter!=="none":!1)||["transform","perspective","filter"].some(d=>(c.willChange||"").includes(d))||["paint","layout","strict","content"].some(d=>(c.contain||"").includes(d))}function getContainingBlock(a){let e=getParentNode(a);for(;isHTMLElement$1(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;if(isTopLayer(e))return null;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(a){return["html","body","#document"].includes(getNodeName(a))}function getComputedStyle$1(a){return getWindow(a).getComputedStyle(a)}function getNodeScroll(a){return isElement(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function getParentNode(a){if(getNodeName(a)==="html")return a;const e=a.assignedSlot||a.parentNode||isShadowRoot(a)&&a.host||getDocumentElement(a);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(a){const e=getParentNode(a);return isLastTraversableNode(e)?a.ownerDocument?a.ownerDocument.body:a.body:isHTMLElement$1(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(a,e,c){var d;e===void 0&&(e=[]),c===void 0&&(c=!0);const h=getNearestOverflowAncestor(a),g=h===((d=a.ownerDocument)==null?void 0:d.body),_=getWindow(h);if(g){const _e=getFrameElement(_);return e.concat(_,_.visualViewport||[],isOverflowElement(h)?h:[],_e&&c?getOverflowAncestors(_e):[])}return e.concat(h,getOverflowAncestors(h,[],c))}function getFrameElement(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function getCssDimensions(a){const e=getComputedStyle$1(a);let c=parseFloat(e.width)||0,d=parseFloat(e.height)||0;const h=isHTMLElement$1(a),g=h?a.offsetWidth:c,_=h?a.offsetHeight:d,_e=round$1(c)!==g||round$1(d)!==_;return _e&&(c=g,d=_),{width:c,height:d,$:_e}}function unwrapElement(a){return isElement(a)?a:a.contextElement}function getScale(a){const e=unwrapElement(a);if(!isHTMLElement$1(e))return createCoords(1);const c=e.getBoundingClientRect(),{width:d,height:h,$:g}=getCssDimensions(e);let _=(g?round$1(c.width):c.width)/d,_e=(g?round$1(c.height):c.height)/h;return(!_||!Number.isFinite(_))&&(_=1),(!_e||!Number.isFinite(_e))&&(_e=1),{x:_,y:_e}}const noOffsets=createCoords(0);function getVisualOffsets(a){const e=getWindow(a);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(a,e,c){return e===void 0&&(e=!1),!c||e&&c!==getWindow(a)?!1:e}function getBoundingClientRect(a,e,c,d){e===void 0&&(e=!1),c===void 0&&(c=!1);const h=a.getBoundingClientRect(),g=unwrapElement(a);let _=createCoords(1);e&&(d?isElement(d)&&(_=getScale(d)):_=getScale(a));const _e=shouldAddVisualOffsets(g,c,d)?getVisualOffsets(g):createCoords(0);let et=(h.left+_e.x)/_.x,tt=(h.top+_e.y)/_.y,rt=h.width/_.x,$=h.height/_.y;if(g){const b=getWindow(g),nt=d&&isElement(d)?getWindow(d):d;let st=b,ot=getFrameElement(st);for(;ot&&d&&nt!==st;){const it=getScale(ot),at=ot.getBoundingClientRect(),lt=getComputedStyle$1(ot),dt=at.left+(ot.clientLeft+parseFloat(lt.paddingLeft))*it.x,ht=at.top+(ot.clientTop+parseFloat(lt.paddingTop))*it.y;et*=it.x,tt*=it.y,rt*=it.x,$*=it.y,et+=dt,tt+=ht,st=getWindow(ot),ot=getFrameElement(st)}}return rectToClientRect({width:rt,height:$,x:et,y:tt})}function convertOffsetParentRelativeRectToViewportRelativeRect(a){let{elements:e,rect:c,offsetParent:d,strategy:h}=a;const g=h==="fixed",_=getDocumentElement(d),_e=e?isTopLayer(e.floating):!1;if(d===_||_e&&g)return c;let et={scrollLeft:0,scrollTop:0},tt=createCoords(1);const rt=createCoords(0),$=isHTMLElement$1(d);if(($||!$&&!g)&&((getNodeName(d)!=="body"||isOverflowElement(_))&&(et=getNodeScroll(d)),isHTMLElement$1(d))){const b=getBoundingClientRect(d);tt=getScale(d),rt.x=b.x+d.clientLeft,rt.y=b.y+d.clientTop}return{width:c.width*tt.x,height:c.height*tt.y,x:c.x*tt.x-et.scrollLeft*tt.x+rt.x,y:c.y*tt.y-et.scrollTop*tt.y+rt.y}}function getClientRects(a){return Array.from(a.getClientRects())}function getWindowScrollBarX(a,e){const c=getNodeScroll(a).scrollLeft;return e?e.left+c:getBoundingClientRect(getDocumentElement(a)).left+c}function getDocumentRect(a){const e=getDocumentElement(a),c=getNodeScroll(a),d=a.ownerDocument.body,h=max$1(e.scrollWidth,e.clientWidth,d.scrollWidth,d.clientWidth),g=max$1(e.scrollHeight,e.clientHeight,d.scrollHeight,d.clientHeight);let _=-c.scrollLeft+getWindowScrollBarX(a);const _e=-c.scrollTop;return getComputedStyle$1(d).direction==="rtl"&&(_+=max$1(e.clientWidth,d.clientWidth)-h),{width:h,height:g,x:_,y:_e}}function getViewportRect(a,e){const c=getWindow(a),d=getDocumentElement(a),h=c.visualViewport;let g=d.clientWidth,_=d.clientHeight,_e=0,et=0;if(h){g=h.width,_=h.height;const tt=isWebKit();(!tt||tt&&e==="fixed")&&(_e=h.offsetLeft,et=h.offsetTop)}return{width:g,height:_,x:_e,y:et}}function getInnerBoundingClientRect(a,e){const c=getBoundingClientRect(a,!0,e==="fixed"),d=c.top+a.clientTop,h=c.left+a.clientLeft,g=isHTMLElement$1(a)?getScale(a):createCoords(1),_=a.clientWidth*g.x,_e=a.clientHeight*g.y,et=h*g.x,tt=d*g.y;return{width:_,height:_e,x:et,y:tt}}function getClientRectFromClippingAncestor(a,e,c){let d;if(e==="viewport")d=getViewportRect(a,c);else if(e==="document")d=getDocumentRect(getDocumentElement(a));else if(isElement(e))d=getInnerBoundingClientRect(e,c);else{const h=getVisualOffsets(a);d={...e,x:e.x-h.x,y:e.y-h.y}}return rectToClientRect(d)}function hasFixedPositionAncestor(a,e){const c=getParentNode(a);return c===e||!isElement(c)||isLastTraversableNode(c)?!1:getComputedStyle$1(c).position==="fixed"||hasFixedPositionAncestor(c,e)}function getClippingElementAncestors(a,e){const c=e.get(a);if(c)return c;let d=getOverflowAncestors(a,[],!1).filter(_e=>isElement(_e)&&getNodeName(_e)!=="body"),h=null;const g=getComputedStyle$1(a).position==="fixed";let _=g?getParentNode(a):a;for(;isElement(_)&&!isLastTraversableNode(_);){const _e=getComputedStyle$1(_),et=isContainingBlock(_);!et&&_e.position==="fixed"&&(h=null),(g?!et&&!h:!et&&_e.position==="static"&&!!h&&["absolute","fixed"].includes(h.position)||isOverflowElement(_)&&!et&&hasFixedPositionAncestor(a,_))?d=d.filter(rt=>rt!==_):h=_e,_=getParentNode(_)}return e.set(a,d),d}function getClippingRect(a){let{element:e,boundary:c,rootBoundary:d,strategy:h}=a;const _=[...c==="clippingAncestors"?isTopLayer(e)?[]:getClippingElementAncestors(e,this._c):[].concat(c),d],_e=_[0],et=_.reduce((tt,rt)=>{const $=getClientRectFromClippingAncestor(e,rt,h);return tt.top=max$1($.top,tt.top),tt.right=min$1($.right,tt.right),tt.bottom=min$1($.bottom,tt.bottom),tt.left=max$1($.left,tt.left),tt},getClientRectFromClippingAncestor(e,_e,h));return{width:et.right-et.left,height:et.bottom-et.top,x:et.left,y:et.top}}function getDimensions(a){const{width:e,height:c}=getCssDimensions(a);return{width:e,height:c}}function getRectRelativeToOffsetParent(a,e,c){const d=isHTMLElement$1(e),h=getDocumentElement(e),g=c==="fixed",_=getBoundingClientRect(a,!0,g,e);let _e={scrollLeft:0,scrollTop:0};const et=createCoords(0);if(d||!d&&!g)if((getNodeName(e)!=="body"||isOverflowElement(h))&&(_e=getNodeScroll(e)),d){const nt=getBoundingClientRect(e,!0,g,e);et.x=nt.x+e.clientLeft,et.y=nt.y+e.clientTop}else h&&(et.x=getWindowScrollBarX(h));let tt=0,rt=0;if(h&&!d&&!g){const nt=h.getBoundingClientRect();rt=nt.top+_e.scrollTop,tt=nt.left+_e.scrollLeft-getWindowScrollBarX(h,nt)}const $=_.left+_e.scrollLeft-et.x-tt,b=_.top+_e.scrollTop-et.y-rt;return{x:$,y:b,width:_.width,height:_.height}}function isStaticPositioned(a){return getComputedStyle$1(a).position==="static"}function getTrueOffsetParent(a,e){if(!isHTMLElement$1(a)||getComputedStyle$1(a).position==="fixed")return null;if(e)return e(a);let c=a.offsetParent;return getDocumentElement(a)===c&&(c=c.ownerDocument.body),c}function getOffsetParent(a,e){const c=getWindow(a);if(isTopLayer(a))return c;if(!isHTMLElement$1(a)){let h=getParentNode(a);for(;h&&!isLastTraversableNode(h);){if(isElement(h)&&!isStaticPositioned(h))return h;h=getParentNode(h)}return c}let d=getTrueOffsetParent(a,e);for(;d&&isTableElement(d)&&isStaticPositioned(d);)d=getTrueOffsetParent(d,e);return d&&isLastTraversableNode(d)&&isStaticPositioned(d)&&!isContainingBlock(d)?c:d||getContainingBlock(a)||c}const getElementRects=async function(a){const e=this.getOffsetParent||getOffsetParent,c=this.getDimensions,d=await c(a.floating);return{reference:getRectRelativeToOffsetParent(a.reference,await e(a.floating),a.strategy),floating:{x:0,y:0,width:d.width,height:d.height}}};function isRTL(a){return getComputedStyle$1(a).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(a,e){let c=null,d;const h=getDocumentElement(a);function g(){var _e;clearTimeout(d),(_e=c)==null||_e.disconnect(),c=null}function _(_e,et){_e===void 0&&(_e=!1),et===void 0&&(et=1),g();const{left:tt,top:rt,width:$,height:b}=a.getBoundingClientRect();if(_e||e(),!$||!b)return;const nt=floor(rt),st=floor(h.clientWidth-(tt+$)),ot=floor(h.clientHeight-(rt+b)),it=floor(tt),lt={rootMargin:-nt+"px "+-st+"px "+-ot+"px "+-it+"px",threshold:max$1(0,min$1(1,et))||1};let dt=!0;function ht(pt){const mt=pt[0].intersectionRatio;if(mt!==et){if(!dt)return _();mt?_(!1,mt):d=setTimeout(()=>{_(!1,1e-7)},1e3)}dt=!1}try{c=new IntersectionObserver(ht,{...lt,root:h.ownerDocument})}catch{c=new IntersectionObserver(ht,lt)}c.observe(a)}return _(!0),g}function autoUpdate(a,e,c,d){d===void 0&&(d={});const{ancestorScroll:h=!0,ancestorResize:g=!0,elementResize:_=typeof ResizeObserver=="function",layoutShift:_e=typeof IntersectionObserver=="function",animationFrame:et=!1}=d,tt=unwrapElement(a),rt=h||g?[...tt?getOverflowAncestors(tt):[],...getOverflowAncestors(e)]:[];rt.forEach(at=>{h&&at.addEventListener("scroll",c,{passive:!0}),g&&at.addEventListener("resize",c)});const $=tt&&_e?observeMove(tt,c):null;let b=-1,nt=null;_&&(nt=new ResizeObserver(at=>{let[lt]=at;lt&&lt.target===tt&&nt&&(nt.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var dt;(dt=nt)==null||dt.observe(e)})),c()}),tt&&!et&&nt.observe(tt),nt.observe(e));let st,ot=et?getBoundingClientRect(a):null;et&&it();function it(){const at=getBoundingClientRect(a);ot&&(at.x!==ot.x||at.y!==ot.y||at.width!==ot.width||at.height!==ot.height)&&c(),ot=at,st=requestAnimationFrame(it)}return c(),()=>{var at;rt.forEach(lt=>{h&&lt.removeEventListener("scroll",c),g&&lt.removeEventListener("resize",c)}),$==null||$(),(at=nt)==null||at.disconnect(),nt=null,et&&cancelAnimationFrame(st)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(a,e,c)=>{const d=new Map,h={platform,...c},g={...h.platform,_c:d};return computePosition$1(a,e,{...h,platform:g})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual$1(a,e){if(a===e)return!0;if(typeof a!=typeof e)return!1;if(typeof a=="function"&&a.toString()===e.toString())return!0;let c,d,h;if(a&&e&&typeof a=="object"){if(Array.isArray(a)){if(c=a.length,c!==e.length)return!1;for(d=c;d--!==0;)if(!deepEqual$1(a[d],e[d]))return!1;return!0}if(h=Object.keys(a),c=h.length,c!==Object.keys(e).length)return!1;for(d=c;d--!==0;)if(!{}.hasOwnProperty.call(e,h[d]))return!1;for(d=c;d--!==0;){const g=h[d];if(!(g==="_owner"&&a.$$typeof)&&!deepEqual$1(a[g],e[g]))return!1}return!0}return a!==a&&e!==e}function getDPR(a){return typeof window>"u"?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(a,e){const c=getDPR(a);return Math.round(e*c)/c}function useLatestRef(a){const e=reactExports.useRef(a);return index(()=>{e.current=a}),e}function useFloating(a){a===void 0&&(a={});const{placement:e="bottom",strategy:c="absolute",middleware:d=[],platform:h,elements:{reference:g,floating:_}={},transform:_e=!0,whileElementsMounted:et,open:tt}=a,[rt,$]=reactExports.useState({x:0,y:0,strategy:c,placement:e,middlewareData:{},isPositioned:!1}),[b,nt]=reactExports.useState(d);deepEqual$1(b,d)||nt(d);const[st,ot]=reactExports.useState(null),[it,at]=reactExports.useState(null),lt=reactExports.useCallback(At=>{At!==mt.current&&(mt.current=At,ot(At))},[]),dt=reactExports.useCallback(At=>{At!==yt.current&&(yt.current=At,at(At))},[]),ht=g||st,pt=_||it,mt=reactExports.useRef(null),yt=reactExports.useRef(null),xt=reactExports.useRef(rt),gt=et!=null,bt=useLatestRef(et),jt=useLatestRef(h),Mt=useLatestRef(tt),Pt=reactExports.useCallback(()=>{if(!mt.current||!yt.current)return;const At={placement:e,strategy:c,middleware:b};jt.current&&(At.platform=jt.current),computePosition(mt.current,yt.current,At).then(Et=>{const zt={...Et,isPositioned:Mt.current!==!1};Tt.current&&!deepEqual$1(xt.current,zt)&&(xt.current=zt,reactDomExports.flushSync(()=>{$(zt)}))})},[b,e,c,jt,Mt]);index(()=>{tt===!1&&xt.current.isPositioned&&(xt.current.isPositioned=!1,$(At=>({...At,isPositioned:!1})))},[tt]);const Tt=reactExports.useRef(!1);index(()=>(Tt.current=!0,()=>{Tt.current=!1}),[]),index(()=>{if(ht&&(mt.current=ht),pt&&(yt.current=pt),ht&&pt){if(bt.current)return bt.current(ht,pt,Pt);Pt()}},[ht,pt,Pt,bt,gt]);const St=reactExports.useMemo(()=>({reference:mt,floating:yt,setReference:lt,setFloating:dt}),[lt,dt]),wt=reactExports.useMemo(()=>({reference:ht,floating:pt}),[ht,pt]),Rt=reactExports.useMemo(()=>{const At={position:c,left:0,top:0};if(!wt.floating)return At;const Et=roundByDPR(wt.floating,rt.x),zt=roundByDPR(wt.floating,rt.y);return _e?{...At,transform:"translate("+Et+"px, "+zt+"px)",...getDPR(wt.floating)>=1.5&&{willChange:"transform"}}:{position:c,left:Et,top:zt}},[c,_e,wt.floating,rt.x,rt.y]);return reactExports.useMemo(()=>({...rt,update:Pt,refs:St,elements:wt,floatingStyles:Rt}),[rt,Pt,St,wt,Rt])}const arrow$1=a=>{function e(c){return{}.hasOwnProperty.call(c,"current")}return{name:"arrow",options:a,fn(c){const{element:d,padding:h}=typeof a=="function"?a(c):a;return d&&e(d)?d.current!=null?arrow$2({element:d.current,padding:h}).fn(c):{}:d?arrow$2({element:d,padding:h}).fn(c):{}}}},offset=(a,e)=>({...offset$1(a),options:[a,e]}),shift=(a,e)=>({...shift$1(a),options:[a,e]}),limitShift=(a,e)=>({...limitShift$1(a),options:[a,e]}),flip=(a,e)=>({...flip$1(a),options:[a,e]}),size=(a,e)=>({...size$1(a),options:[a,e]}),hide=(a,e)=>({...hide$1(a),options:[a,e]}),arrow=(a,e)=>({...arrow$1(a),options:[a,e]});var NAME$2="Arrow",Arrow$1=reactExports.forwardRef((a,e)=>{const{children:c,width:d=10,height:h=5,...g}=a;return jsxRuntimeExports.jsx(Primitive.svg,{...g,ref:e,width:d,height:h,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?c:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$2;var Root$6=Arrow$1;function createContextScope$1(a,e=[]){let c=[];function d(g,_){const _e=reactExports.createContext(_),et=c.length;c=[...c,_];function tt($){const{scope:b,children:nt,...st}=$,ot=(b==null?void 0:b[a][et])||_e,it=reactExports.useMemo(()=>st,Object.values(st));return jsxRuntimeExports.jsx(ot.Provider,{value:it,children:nt})}function rt($,b){const nt=(b==null?void 0:b[a][et])||_e,st=reactExports.useContext(nt);if(st)return st;if(_!==void 0)return _;throw new Error(`\`${$}\` must be used within \`${g}\``)}return tt.displayName=g+"Provider",[tt,rt]}const h=()=>{const g=c.map(_=>reactExports.createContext(_));return function(_e){const et=(_e==null?void 0:_e[a])||g;return reactExports.useMemo(()=>({[`__scope${a}`]:{..._e,[a]:et}}),[_e,et])}};return h.scopeName=a,[d,composeContextScopes$1(h,...e)]}function composeContextScopes$1(...a){const e=a[0];if(a.length===1)return e;const c=()=>{const d=a.map(h=>({useScope:h(),scopeName:h.scopeName}));return function(g){const _=d.reduce((_e,{useScope:et,scopeName:tt})=>{const $=et(g)[`__scope${tt}`];return{..._e,...$}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:_}),[_])}};return c.scopeName=e.scopeName,c}function useSize(a){const[e,c]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});const d=new ResizeObserver(h=>{if(!Array.isArray(h)||!h.length)return;const g=h[0];let _,_e;if("borderBoxSize"in g){const et=g.borderBoxSize,tt=Array.isArray(et)?et[0]:et;_=tt.inlineSize,_e=tt.blockSize}else _=a.offsetWidth,_e=a.offsetHeight;c({width:_,height:_e})});return d.observe(a,{box:"border-box"}),()=>d.unobserve(a)}else c(void 0)},[a]),e}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope$1(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=a=>{const{__scopePopper:e,children:c}=a,[d,h]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:e,anchor:d,onAnchorChange:h,children:c})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef((a,e)=>{const{__scopePopper:c,virtualRef:d,...h}=a,g=usePopperContext(ANCHOR_NAME$1,c),_=reactExports.useRef(null),_e=useComposedRefs(e,_);return reactExports.useEffect(()=>{g.onAnchorChange((d==null?void 0:d.current)||_.current)}),d?null:jsxRuntimeExports.jsx(Primitive.div,{...h,ref:_e})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$5="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$5),PopperContent=reactExports.forwardRef((a,e)=>{var gr,Pr,Nr,Ar,Rr,Ir;const{__scopePopper:c,side:d="bottom",sideOffset:h=0,align:g="center",alignOffset:_=0,arrowPadding:_e=0,avoidCollisions:et=!0,collisionBoundary:tt=[],collisionPadding:rt=0,sticky:$="partial",hideWhenDetached:b=!1,updatePositionStrategy:nt="optimized",onPlaced:st,...ot}=a,it=usePopperContext(CONTENT_NAME$5,c),[at,lt]=reactExports.useState(null),dt=useComposedRefs(e,Ur=>lt(Ur)),[ht,pt]=reactExports.useState(null),mt=useSize(ht),yt=(mt==null?void 0:mt.width)??0,xt=(mt==null?void 0:mt.height)??0,gt=d+(g!=="center"?"-"+g:""),bt=typeof rt=="number"?rt:{top:0,right:0,bottom:0,left:0,...rt},jt=Array.isArray(tt)?tt:[tt],Mt=jt.length>0,Pt={padding:bt,boundary:jt.filter(isNotNull),altBoundary:Mt},{refs:Tt,floatingStyles:St,placement:wt,isPositioned:Rt,middlewareData:At}=useFloating({strategy:"fixed",placement:gt,whileElementsMounted:(...Ur)=>autoUpdate(...Ur,{animationFrame:nt==="always"}),elements:{reference:it.anchor},middleware:[offset({mainAxis:h+xt,alignmentAxis:_}),et&&shift({mainAxis:!0,crossAxis:!1,limiter:$==="partial"?limitShift():void 0,...Pt}),et&&flip({...Pt}),size({...Pt,apply:({elements:Ur,rects:Fr,availableWidth:nn,availableHeight:en})=>{const{width:on,height:Yt}=Fr.reference,rr=Ur.floating.style;rr.setProperty("--radix-popper-available-width",`${nn}px`),rr.setProperty("--radix-popper-available-height",`${en}px`),rr.setProperty("--radix-popper-anchor-width",`${on}px`),rr.setProperty("--radix-popper-anchor-height",`${Yt}px`)}}),ht&&arrow({element:ht,padding:_e}),transformOrigin({arrowWidth:yt,arrowHeight:xt}),b&&hide({strategy:"referenceHidden",...Pt})]}),[Et,zt]=getSideAndAlignFromPlacement(wt),er=useCallbackRef$1(st);useLayoutEffect2(()=>{Rt&&(er==null||er())},[Rt,er]);const pr=(gr=At.arrow)==null?void 0:gr.x,_r=(Pr=At.arrow)==null?void 0:Pr.y,Er=((Nr=At.arrow)==null?void 0:Nr.centerOffset)!==0,[Tr,wr]=reactExports.useState();return useLayoutEffect2(()=>{at&&wr(window.getComputedStyle(at).zIndex)},[at]),jsxRuntimeExports.jsx("div",{ref:Tt.setFloating,"data-radix-popper-content-wrapper":"",style:{...St,transform:Rt?St.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Tr,"--radix-popper-transform-origin":[(Ar=At.transformOrigin)==null?void 0:Ar.x,(Rr=At.transformOrigin)==null?void 0:Rr.y].join(" "),...((Ir=At.hide)==null?void 0:Ir.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:c,placedSide:Et,onArrowChange:pt,arrowX:pr,arrowY:_r,shouldHideArrow:Er,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":Et,"data-align":zt,...ot,ref:dt,style:{...ot.style,animation:Rt?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$5;var ARROW_NAME$4="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(e,c){const{__scopePopper:d,...h}=e,g=useContentContext(ARROW_NAME$4,d),_=OPPOSITE_SIDE[g.placedSide];return jsxRuntimeExports.jsx("span",{ref:g.onArrowChange,style:{position:"absolute",left:g.arrowX,top:g.arrowY,[_]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[g.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[g.placedSide],visibility:g.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$6,{...h,ref:c,style:{...h.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$4;function isNotNull(a){return a!==null}var transformOrigin=a=>({name:"transformOrigin",options:a,fn(e){var it,at,lt;const{placement:c,rects:d,middlewareData:h}=e,_=((it=h.arrow)==null?void 0:it.centerOffset)!==0,_e=_?0:a.arrowWidth,et=_?0:a.arrowHeight,[tt,rt]=getSideAndAlignFromPlacement(c),$={start:"0%",center:"50%",end:"100%"}[rt],b=(((at=h.arrow)==null?void 0:at.x)??0)+_e/2,nt=(((lt=h.arrow)==null?void 0:lt.y)??0)+et/2;let st="",ot="";return tt==="bottom"?(st=_?$:`${b}px`,ot=`${-et}px`):tt==="top"?(st=_?$:`${b}px`,ot=`${d.floating.height+et}px`):tt==="right"?(st=`${-et}px`,ot=_?$:`${nt}px`):tt==="left"&&(st=`${d.floating.width+et}px`,ot=_?$:`${nt}px`),{data:{x:st,y:ot}}}});function getSideAndAlignFromPlacement(a){const[e,c="center"]=a.split("-");return[e,c]}var Root2$4=Popper,Anchor=PopperAnchor,Content$1=PopperContent,Arrow=PopperArrow,[createTooltipContext,createTooltipScope]=createContextScope$2("Tooltip",[createPopperScope]),usePopperScope$2=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider$1=a=>{const{__scopeTooltip:e,delayDuration:c=DEFAULT_DELAY_DURATION,skipDelayDuration:d=300,disableHoverableContent:h=!1,children:g}=a,[_,_e]=reactExports.useState(!0),et=reactExports.useRef(!1),tt=reactExports.useRef(0);return reactExports.useEffect(()=>{const rt=tt.current;return()=>window.clearTimeout(rt)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:e,isOpenDelayed:_,delayDuration:c,onOpen:reactExports.useCallback(()=>{window.clearTimeout(tt.current),_e(!1)},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(tt.current),tt.current=window.setTimeout(()=>_e(!0),d)},[d]),isPointerInTransitRef:et,onPointerInTransitChange:reactExports.useCallback(rt=>{et.current=rt},[]),disableHoverableContent:h,children:g})};TooltipProvider$1.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),TRIGGER_NAME$3="TooltipTrigger",TooltipTrigger=reactExports.forwardRef((a,e)=>{const{__scopeTooltip:c,...d}=a,h=useTooltipContext(TRIGGER_NAME$3,c),g=useTooltipProviderContext(TRIGGER_NAME$3,c),_=usePopperScope$2(c),_e=reactExports.useRef(null),et=useComposedRefs(e,_e,h.onTriggerChange),tt=reactExports.useRef(!1),rt=reactExports.useRef(!1),$=reactExports.useCallback(()=>tt.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",$),[$]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,..._,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":h.open?h.contentId:void 0,"data-state":h.stateAttribute,...d,ref:et,onPointerMove:composeEventHandlers(a.onPointerMove,b=>{b.pointerType!=="touch"&&!rt.current&&!g.isPointerInTransitRef.current&&(h.onTriggerEnter(),rt.current=!0)}),onPointerLeave:composeEventHandlers(a.onPointerLeave,()=>{h.onTriggerLeave(),rt.current=!1}),onPointerDown:composeEventHandlers(a.onPointerDown,()=>{tt.current=!0,document.addEventListener("pointerup",$,{once:!0})}),onFocus:composeEventHandlers(a.onFocus,()=>{tt.current||h.onOpen()}),onBlur:composeEventHandlers(a.onBlur,h.onClose),onClick:composeEventHandlers(a.onClick,h.onClose)})})});TooltipTrigger.displayName=TRIGGER_NAME$3;var PORTAL_NAME$3="TooltipPortal",[PortalProvider$1,usePortalContext$1]=createTooltipContext(PORTAL_NAME$3,{forceMount:void 0}),CONTENT_NAME$4="TooltipContent",TooltipContent$1=reactExports.forwardRef((a,e)=>{const c=usePortalContext$1(CONTENT_NAME$4,a.__scopeTooltip),{forceMount:d=c.forceMount,side:h="top",...g}=a,_=useTooltipContext(CONTENT_NAME$4,a.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:d||_.open,children:_.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:h,...g,ref:e}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:h,...g,ref:e})})}),TooltipContentHoverable=reactExports.forwardRef((a,e)=>{const c=useTooltipContext(CONTENT_NAME$4,a.__scopeTooltip),d=useTooltipProviderContext(CONTENT_NAME$4,a.__scopeTooltip),h=reactExports.useRef(null),g=useComposedRefs(e,h),[_,_e]=reactExports.useState(null),{trigger:et,onClose:tt}=c,rt=h.current,{onPointerInTransitChange:$}=d,b=reactExports.useCallback(()=>{_e(null),$(!1)},[$]),nt=reactExports.useCallback((st,ot)=>{const it=st.currentTarget,at={x:st.clientX,y:st.clientY},lt=getExitSideFromRect(at,it.getBoundingClientRect()),dt=getPaddedExitPoints(at,lt),ht=getPointsFromRect(ot.getBoundingClientRect()),pt=getHull([...dt,...ht]);_e(pt),$(!0)},[$]);return reactExports.useEffect(()=>()=>b(),[b]),reactExports.useEffect(()=>{if(et&&rt){const st=it=>nt(it,rt),ot=it=>nt(it,et);return et.addEventListener("pointerleave",st),rt.addEventListener("pointerleave",ot),()=>{et.removeEventListener("pointerleave",st),rt.removeEventListener("pointerleave",ot)}}},[et,rt,nt,b]),reactExports.useEffect(()=>{if(_){const st=ot=>{const it=ot.target,at={x:ot.clientX,y:ot.clientY},lt=(et==null?void 0:et.contains(it))||(rt==null?void 0:rt.contains(it)),dt=!isPointInPolygon$1(at,_);lt?b():dt&&(b(),tt())};return document.addEventListener("pointermove",st),()=>document.removeEventListener("pointermove",st)}},[et,rt,_,tt,b]),jsxRuntimeExports.jsx(TooltipContentImpl,{...a,ref:g})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),TooltipContentImpl=reactExports.forwardRef((a,e)=>{const{__scopeTooltip:c,children:d,"aria-label":h,onEscapeKeyDown:g,onPointerDownOutside:_,..._e}=a,et=useTooltipContext(CONTENT_NAME$4,c),tt=usePopperScope$2(c),{onClose:rt}=et;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,rt),()=>document.removeEventListener(TOOLTIP_OPEN,rt)),[rt]),reactExports.useEffect(()=>{if(et.trigger){const $=b=>{const nt=b.target;nt!=null&&nt.contains(et.trigger)&&rt()};return window.addEventListener("scroll",$,{capture:!0}),()=>window.removeEventListener("scroll",$,{capture:!0})}},[et.trigger,rt]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:g,onPointerDownOutside:_,onFocusOutside:$=>$.preventDefault(),onDismiss:rt,children:jsxRuntimeExports.jsxs(Content$1,{"data-state":et.stateAttribute,...tt,..._e,ref:e,style:{..._e.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:d}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:c,isInside:!0,children:jsxRuntimeExports.jsx(Root$7,{id:et.contentId,role:"tooltip",children:h||d})})]})})});TooltipContent$1.displayName=CONTENT_NAME$4;var ARROW_NAME$3="TooltipArrow",TooltipArrow=reactExports.forwardRef((a,e)=>{const{__scopeTooltip:c,...d}=a,h=usePopperScope$2(c);return useVisuallyHiddenContentContext(ARROW_NAME$3,c).isInside?null:jsxRuntimeExports.jsx(Arrow,{...h,...d,ref:e})});TooltipArrow.displayName=ARROW_NAME$3;function getExitSideFromRect(a,e){const c=Math.abs(e.top-a.y),d=Math.abs(e.bottom-a.y),h=Math.abs(e.right-a.x),g=Math.abs(e.left-a.x);switch(Math.min(c,d,h,g)){case g:return"left";case h:return"right";case c:return"top";case d:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(a,e,c=5){const d=[];switch(e){case"top":d.push({x:a.x-c,y:a.y+c},{x:a.x+c,y:a.y+c});break;case"bottom":d.push({x:a.x-c,y:a.y-c},{x:a.x+c,y:a.y-c});break;case"left":d.push({x:a.x+c,y:a.y-c},{x:a.x+c,y:a.y+c});break;case"right":d.push({x:a.x-c,y:a.y-c},{x:a.x-c,y:a.y+c});break}return d}function getPointsFromRect(a){const{top:e,right:c,bottom:d,left:h}=a;return[{x:h,y:e},{x:c,y:e},{x:c,y:d},{x:h,y:d}]}function isPointInPolygon$1(a,e){const{x:c,y:d}=a;let h=!1;for(let g=0,_=e.length-1;g<e.length;_=g++){const _e=e[g].x,et=e[g].y,tt=e[_].x,rt=e[_].y;et>d!=rt>d&&c<(tt-_e)*(d-et)/(rt-et)+_e&&(h=!h)}return h}function getHull(a){const e=a.slice();return e.sort((c,d)=>c.x<d.x?-1:c.x>d.x?1:c.y<d.y?-1:c.y>d.y?1:0),getHullPresorted(e)}function getHullPresorted(a){if(a.length<=1)return a.slice();const e=[];for(let d=0;d<a.length;d++){const h=a[d];for(;e.length>=2;){const g=e[e.length-1],_=e[e.length-2];if((g.x-_.x)*(h.y-_.y)>=(g.y-_.y)*(h.x-_.x))e.pop();else break}e.push(h)}e.pop();const c=[];for(let d=a.length-1;d>=0;d--){const h=a[d];for(;c.length>=2;){const g=c[c.length-1],_=c[c.length-2];if((g.x-_.x)*(h.y-_.y)>=(g.y-_.y)*(h.x-_.x))c.pop();else break}c.push(h)}return c.pop(),e.length===1&&c.length===1&&e[0].x===c[0].x&&e[0].y===c[0].y?e:e.concat(c)}var Provider=TooltipProvider$1,Content2$3=TooltipContent$1;const TooltipProvider=Provider,TooltipContent=reactExports.forwardRef(({className:a,sideOffset:e=4,...c},d)=>jsxRuntimeExports.jsx(Content2$3,{ref:d,sideOffset:e,className:cn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c}));TooltipContent.displayName=Content2$3.displayName;var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(a){return this.listeners.add(a),this.onSubscribe(),()=>{this.listeners.delete(a),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer$1=typeof window>"u"||"Deno"in globalThis;function noop$2(){}function functionalUpdate(a,e){return typeof a=="function"?a(e):a}function isValidTimeout(a){return typeof a=="number"&&a>=0&&a!==1/0}function timeUntilStale(a,e){return Math.max(a+(e||0)-Date.now(),0)}function resolveStaleTime(a,e){return typeof a=="function"?a(e):a}function resolveEnabled(a,e){return typeof a=="function"?a(e):a}function matchQuery(a,e){const{type:c="all",exact:d,fetchStatus:h,predicate:g,queryKey:_,stale:_e}=a;if(_){if(d){if(e.queryHash!==hashQueryKeyByOptions(_,e.options))return!1}else if(!partialMatchKey(e.queryKey,_))return!1}if(c!=="all"){const et=e.isActive();if(c==="active"&&!et||c==="inactive"&&et)return!1}return!(typeof _e=="boolean"&&e.isStale()!==_e||h&&h!==e.state.fetchStatus||g&&!g(e))}function matchMutation(a,e){const{exact:c,status:d,predicate:h,mutationKey:g}=a;if(g){if(!e.options.mutationKey)return!1;if(c){if(hashKey(e.options.mutationKey)!==hashKey(g))return!1}else if(!partialMatchKey(e.options.mutationKey,g))return!1}return!(d&&e.state.status!==d||h&&!h(e))}function hashQueryKeyByOptions(a,e){return((e==null?void 0:e.queryKeyHashFn)||hashKey)(a)}function hashKey(a){return JSON.stringify(a,(e,c)=>isPlainObject$1(c)?Object.keys(c).sort().reduce((d,h)=>(d[h]=c[h],d),{}):c)}function partialMatchKey(a,e){return a===e?!0:typeof a!=typeof e?!1:a&&e&&typeof a=="object"&&typeof e=="object"?!Object.keys(e).some(c=>!partialMatchKey(a[c],e[c])):!1}function replaceEqualDeep(a,e){if(a===e)return a;const c=isPlainArray(a)&&isPlainArray(e);if(c||isPlainObject$1(a)&&isPlainObject$1(e)){const d=c?a:Object.keys(a),h=d.length,g=c?e:Object.keys(e),_=g.length,_e=c?[]:{};let et=0;for(let tt=0;tt<_;tt++){const rt=c?tt:g[tt];(!c&&d.includes(rt)||c)&&a[rt]===void 0&&e[rt]===void 0?(_e[rt]=void 0,et++):(_e[rt]=replaceEqualDeep(a[rt],e[rt]),_e[rt]===a[rt]&&a[rt]!==void 0&&et++)}return h===_&&et===h?a:_e}return e}function isPlainArray(a){return Array.isArray(a)&&a.length===Object.keys(a).length}function isPlainObject$1(a){if(!hasObjectPrototype(a))return!1;const e=a.constructor;if(e===void 0)return!0;const c=e.prototype;return!(!hasObjectPrototype(c)||!c.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(a)!==Object.prototype)}function hasObjectPrototype(a){return Object.prototype.toString.call(a)==="[object Object]"}function sleep$1(a){return new Promise(e=>{setTimeout(e,a)})}function replaceData(a,e,c){return typeof c.structuralSharing=="function"?c.structuralSharing(a,e):c.structuralSharing!==!1?replaceEqualDeep(a,e):e}function addToEnd(a,e,c=0){const d=[...a,e];return c&&d.length>c?d.slice(1):d}function addToStart(a,e,c=0){const d=[e,...a];return c&&d.length>c?d.slice(0,-1):d}var skipToken=Symbol();function ensureQueryFn(a,e){return!a.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!a.queryFn||a.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${a.queryHash}'`)):a.queryFn}var Wn,Un,Jn,oo,FocusManager=(oo=class extends Subscribable{constructor(){super();Jr(this,Wn);Jr(this,Un);Jr(this,Jn);Hr(this,Jn,e=>{if(!isServer$1&&window.addEventListener){const c=()=>e();return window.addEventListener("visibilitychange",c,!1),()=>{window.removeEventListener("visibilitychange",c)}}})}onSubscribe(){fr(this,Un)||this.setEventListener(fr(this,Jn))}onUnsubscribe(){var e;this.hasListeners()||((e=fr(this,Un))==null||e.call(this),Hr(this,Un,void 0))}setEventListener(e){var c;Hr(this,Jn,e),(c=fr(this,Un))==null||c.call(this),Hr(this,Un,e(d=>{typeof d=="boolean"?this.setFocused(d):this.onFocus()}))}setFocused(e){fr(this,Wn)!==e&&(Hr(this,Wn,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(c=>{c(e)})}isFocused(){var e;return typeof fr(this,Wn)=="boolean"?fr(this,Wn):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Wn=new WeakMap,Un=new WeakMap,Jn=new WeakMap,oo),focusManager=new FocusManager,es,Bn,ts,io,OnlineManager=(io=class extends Subscribable{constructor(){super();Jr(this,es,!0);Jr(this,Bn);Jr(this,ts);Hr(this,ts,e=>{if(!isServer$1&&window.addEventListener){const c=()=>e(!0),d=()=>e(!1);return window.addEventListener("online",c,!1),window.addEventListener("offline",d,!1),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",d)}}})}onSubscribe(){fr(this,Bn)||this.setEventListener(fr(this,ts))}onUnsubscribe(){var e;this.hasListeners()||((e=fr(this,Bn))==null||e.call(this),Hr(this,Bn,void 0))}setEventListener(e){var c;Hr(this,ts,e),(c=fr(this,Bn))==null||c.call(this),Hr(this,Bn,e(this.setOnline.bind(this)))}setOnline(e){fr(this,es)!==e&&(Hr(this,es,e),this.listeners.forEach(d=>{d(e)}))}isOnline(){return fr(this,es)}},es=new WeakMap,Bn=new WeakMap,ts=new WeakMap,io),onlineManager=new OnlineManager;function pendingThenable(){let a,e;const c=new Promise((h,g)=>{a=h,e=g});c.status="pending",c.catch(()=>{});function d(h){Object.assign(c,h),delete c.resolve,delete c.reject}return c.resolve=h=>{d({status:"fulfilled",value:h}),a(h)},c.reject=h=>{d({status:"rejected",reason:h}),e(h)},c}function defaultRetryDelay(a){return Math.min(1e3*2**a,3e4)}function canFetch(a){return(a??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(a){super("CancelledError"),this.revert=a==null?void 0:a.revert,this.silent=a==null?void 0:a.silent}};function isCancelledError(a){return a instanceof CancelledError}function createRetryer(a){let e=!1,c=0,d=!1,h;const g=pendingThenable(),_=ot=>{var it;d||(b(new CancelledError(ot)),(it=a.abort)==null||it.call(a))},_e=()=>{e=!0},et=()=>{e=!1},tt=()=>focusManager.isFocused()&&(a.networkMode==="always"||onlineManager.isOnline())&&a.canRun(),rt=()=>canFetch(a.networkMode)&&a.canRun(),$=ot=>{var it;d||(d=!0,(it=a.onSuccess)==null||it.call(a,ot),h==null||h(),g.resolve(ot))},b=ot=>{var it;d||(d=!0,(it=a.onError)==null||it.call(a,ot),h==null||h(),g.reject(ot))},nt=()=>new Promise(ot=>{var it;h=at=>{(d||tt())&&ot(at)},(it=a.onPause)==null||it.call(a)}).then(()=>{var ot;h=void 0,d||(ot=a.onContinue)==null||ot.call(a)}),st=()=>{if(d)return;let ot;const it=c===0?a.initialPromise:void 0;try{ot=it??a.fn()}catch(at){ot=Promise.reject(at)}Promise.resolve(ot).then($).catch(at=>{var mt;if(d)return;const lt=a.retry??(isServer$1?0:3),dt=a.retryDelay??defaultRetryDelay,ht=typeof dt=="function"?dt(c,at):dt,pt=lt===!0||typeof lt=="number"&&c<lt||typeof lt=="function"&&lt(c,at);if(e||!pt){b(at);return}c++,(mt=a.onFail)==null||mt.call(a,c,at),sleep$1(ht).then(()=>tt()?void 0:nt()).then(()=>{e?b(at):st()})})};return{promise:g,cancel:_,continue:()=>(h==null||h(),g),cancelRetry:_e,continueRetry:et,canStart:rt,start:()=>(rt()?st():nt().then(st),g)}}function createNotifyManager(){let a=[],e=0,c=_e=>{_e()},d=_e=>{_e()},h=_e=>setTimeout(_e,0);const g=_e=>{e?a.push(_e):h(()=>{c(_e)})},_=()=>{const _e=a;a=[],_e.length&&h(()=>{d(()=>{_e.forEach(et=>{c(et)})})})};return{batch:_e=>{let et;e++;try{et=_e()}finally{e--,e||_()}return et},batchCalls:_e=>(...et)=>{g(()=>{_e(...et)})},schedule:g,setNotifyFunction:_e=>{c=_e},setBatchNotifyFunction:_e=>{d=_e},setScheduler:_e=>{h=_e}}}var notifyManager=createNotifyManager(),Kn,ao,Removable=(ao=class{constructor(){Jr(this,Kn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&Hr(this,Kn,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(a){this.gcTime=Math.max(this.gcTime||0,a??(isServer$1?1/0:5*60*1e3))}clearGcTimeout(){fr(this,Kn)&&(clearTimeout(fr(this,Kn)),Hr(this,Kn,void 0))}},Kn=new WeakMap,ao),rs,ns,Rn,xn,vs,Yn,In,Ln,lo,Query=(lo=class extends Removable{constructor(e){super();Jr(this,In);Jr(this,rs);Jr(this,ns);Jr(this,Rn);Jr(this,xn);Jr(this,vs);Jr(this,Yn);Hr(this,Yn,!1),Hr(this,vs,e.defaultOptions),this.setOptions(e.options),this.observers=[],Hr(this,Rn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Hr(this,rs,getDefaultState$1(this.options)),this.state=e.state??fr(this,rs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=fr(this,xn))==null?void 0:e.promise}setOptions(e){this.options={...fr(this,vs),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&fr(this,Rn).remove(this)}setData(e,c){const d=replaceData(this.state.data,e,this.options);return yn(this,In,Ln).call(this,{data:d,type:"success",dataUpdatedAt:c==null?void 0:c.updatedAt,manual:c==null?void 0:c.manual}),d}setState(e,c){yn(this,In,Ln).call(this,{type:"setState",state:e,setStateOptions:c})}cancel(e){var d,h;const c=(d=fr(this,xn))==null?void 0:d.promise;return(h=fr(this,xn))==null||h.cancel(e),c?c.then(noop$2).catch(noop$2):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(fr(this,rs))}isActive(){return this.observers.some(e=>resolveEnabled(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){var c;const e=this.observers.find(d=>d.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(c=fr(this,xn))==null||c.continue()}onOnline(){var c;const e=this.observers.find(d=>d.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(c=fr(this,xn))==null||c.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),fr(this,Rn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(c=>c!==e),this.observers.length||(fr(this,xn)&&(fr(this,Yn)?fr(this,xn).cancel({revert:!0}):fr(this,xn).cancelRetry()),this.scheduleGc()),fr(this,Rn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||yn(this,In,Ln).call(this,{type:"invalidate"})}fetch(e,c){var et,tt,rt;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(c!=null&&c.cancelRefetch))this.cancel({silent:!0});else if(fr(this,xn))return fr(this,xn).continueRetry(),fr(this,xn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const $=this.observers.find(b=>b.options.queryFn);$&&this.setOptions($.options)}const d=new AbortController,h=$=>{Object.defineProperty($,"signal",{enumerable:!0,get:()=>(Hr(this,Yn,!0),d.signal)})},g=()=>{const $=ensureQueryFn(this.options,c),b={queryKey:this.queryKey,meta:this.meta};return h(b),Hr(this,Yn,!1),this.options.persister?this.options.persister($,b,this):$(b)},_={fetchOptions:c,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:g};h(_),(et=this.options.behavior)==null||et.onFetch(_,this),Hr(this,ns,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((tt=_.fetchOptions)==null?void 0:tt.meta))&&yn(this,In,Ln).call(this,{type:"fetch",meta:(rt=_.fetchOptions)==null?void 0:rt.meta});const _e=$=>{var b,nt,st,ot;isCancelledError($)&&$.silent||yn(this,In,Ln).call(this,{type:"error",error:$}),isCancelledError($)||((nt=(b=fr(this,Rn).config).onError)==null||nt.call(b,$,this),(ot=(st=fr(this,Rn).config).onSettled)==null||ot.call(st,this.state.data,$,this)),this.scheduleGc()};return Hr(this,xn,createRetryer({initialPromise:c==null?void 0:c.initialPromise,fn:_.fetchFn,abort:d.abort.bind(d),onSuccess:$=>{var b,nt,st,ot;if($===void 0){_e(new Error(`${this.queryHash} data is undefined`));return}try{this.setData($)}catch(it){_e(it);return}(nt=(b=fr(this,Rn).config).onSuccess)==null||nt.call(b,$,this),(ot=(st=fr(this,Rn).config).onSettled)==null||ot.call(st,$,this.state.error,this),this.scheduleGc()},onError:_e,onFail:($,b)=>{yn(this,In,Ln).call(this,{type:"failed",failureCount:$,error:b})},onPause:()=>{yn(this,In,Ln).call(this,{type:"pause"})},onContinue:()=>{yn(this,In,Ln).call(this,{type:"continue"})},retry:_.options.retry,retryDelay:_.options.retryDelay,networkMode:_.options.networkMode,canRun:()=>!0})),fr(this,xn).start()}},rs=new WeakMap,ns=new WeakMap,Rn=new WeakMap,xn=new WeakMap,vs=new WeakMap,Yn=new WeakMap,In=new WeakSet,Ln=function(e){const c=d=>{switch(e.type){case"failed":return{...d,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...d,fetchStatus:"paused"};case"continue":return{...d,fetchStatus:"fetching"};case"fetch":return{...d,...fetchState(d.data,this.options),fetchMeta:e.meta??null};case"success":return{...d,data:e.data,dataUpdateCount:d.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const h=e.error;return isCancelledError(h)&&h.revert&&fr(this,ns)?{...fr(this,ns),fetchStatus:"idle"}:{...d,error:h,errorUpdateCount:d.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:d.fetchFailureCount+1,fetchFailureReason:h,fetchStatus:"idle",status:"error"};case"invalidate":return{...d,isInvalidated:!0};case"setState":return{...d,...e.state}}};this.state=c(this.state),notifyManager.batch(()=>{this.observers.forEach(d=>{d.onQueryUpdate()}),fr(this,Rn).notify({query:this,type:"updated",action:e})})},lo);function fetchState(a,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(e.networkMode)?"fetching":"paused",...a===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(a){const e=typeof a.initialData=="function"?a.initialData():a.initialData,c=e!==void 0,d=c?typeof a.initialDataUpdatedAt=="function"?a.initialDataUpdatedAt():a.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:c?d??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:c?"success":"pending",fetchStatus:"idle"}}var jn,co,QueryCache=(co=class extends Subscribable{constructor(e={}){super();Jr(this,jn);this.config=e,Hr(this,jn,new Map)}build(e,c,d){const h=c.queryKey,g=c.queryHash??hashQueryKeyByOptions(h,c);let _=this.get(g);return _||(_=new Query({cache:this,queryKey:h,queryHash:g,options:e.defaultQueryOptions(c),state:d,defaultOptions:e.getQueryDefaults(h)}),this.add(_)),_}add(e){fr(this,jn).has(e.queryHash)||(fr(this,jn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const c=fr(this,jn).get(e.queryHash);c&&(e.destroy(),c===e&&fr(this,jn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return fr(this,jn).get(e)}getAll(){return[...fr(this,jn).values()]}find(e){const c={exact:!0,...e};return this.getAll().find(d=>matchQuery(c,d))}findAll(e={}){const c=this.getAll();return Object.keys(e).length>0?c.filter(d=>matchQuery(e,d)):c}notify(e){notifyManager.batch(()=>{this.listeners.forEach(c=>{c(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},jn=new WeakMap,co),Nn,vn,Zn,Mn,Fn,uo,Mutation=(uo=class extends Removable{constructor(e){super();Jr(this,Mn);Jr(this,Nn);Jr(this,vn);Jr(this,Zn);this.mutationId=e.mutationId,Hr(this,vn,e.mutationCache),Hr(this,Nn,[]),this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){fr(this,Nn).includes(e)||(fr(this,Nn).push(e),this.clearGcTimeout(),fr(this,vn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Hr(this,Nn,fr(this,Nn).filter(c=>c!==e)),this.scheduleGc(),fr(this,vn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){fr(this,Nn).length||(this.state.status==="pending"?this.scheduleGc():fr(this,vn).remove(this))}continue(){var e;return((e=fr(this,Zn))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var h,g,_,_e,et,tt,rt,$,b,nt,st,ot,it,at,lt,dt,ht,pt,mt,yt;Hr(this,Zn,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(xt,gt)=>{yn(this,Mn,Fn).call(this,{type:"failed",failureCount:xt,error:gt})},onPause:()=>{yn(this,Mn,Fn).call(this,{type:"pause"})},onContinue:()=>{yn(this,Mn,Fn).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>fr(this,vn).canRun(this)}));const c=this.state.status==="pending",d=!fr(this,Zn).canStart();try{if(!c){yn(this,Mn,Fn).call(this,{type:"pending",variables:e,isPaused:d}),await((g=(h=fr(this,vn).config).onMutate)==null?void 0:g.call(h,e,this));const gt=await((_e=(_=this.options).onMutate)==null?void 0:_e.call(_,e));gt!==this.state.context&&yn(this,Mn,Fn).call(this,{type:"pending",context:gt,variables:e,isPaused:d})}const xt=await fr(this,Zn).start();return await((tt=(et=fr(this,vn).config).onSuccess)==null?void 0:tt.call(et,xt,e,this.state.context,this)),await(($=(rt=this.options).onSuccess)==null?void 0:$.call(rt,xt,e,this.state.context)),await((nt=(b=fr(this,vn).config).onSettled)==null?void 0:nt.call(b,xt,null,this.state.variables,this.state.context,this)),await((ot=(st=this.options).onSettled)==null?void 0:ot.call(st,xt,null,e,this.state.context)),yn(this,Mn,Fn).call(this,{type:"success",data:xt}),xt}catch(xt){try{throw await((at=(it=fr(this,vn).config).onError)==null?void 0:at.call(it,xt,e,this.state.context,this)),await((dt=(lt=this.options).onError)==null?void 0:dt.call(lt,xt,e,this.state.context)),await((pt=(ht=fr(this,vn).config).onSettled)==null?void 0:pt.call(ht,void 0,xt,this.state.variables,this.state.context,this)),await((yt=(mt=this.options).onSettled)==null?void 0:yt.call(mt,void 0,xt,e,this.state.context)),xt}finally{yn(this,Mn,Fn).call(this,{type:"error",error:xt})}}finally{fr(this,vn).runNext(this)}}},Nn=new WeakMap,vn=new WeakMap,Zn=new WeakMap,Mn=new WeakSet,Fn=function(e){const c=d=>{switch(e.type){case"failed":return{...d,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...d,isPaused:!0};case"continue":return{...d,isPaused:!1};case"pending":return{...d,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...d,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...d,data:void 0,error:e.error,failureCount:d.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=c(this.state),notifyManager.batch(()=>{fr(this,Nn).forEach(d=>{d.onMutationUpdate(e)}),fr(this,vn).notify({mutation:this,type:"updated",action:e})})},uo);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var An,ws,po,MutationCache=(po=class extends Subscribable{constructor(e={}){super();Jr(this,An);Jr(this,ws);this.config=e,Hr(this,An,new Map),Hr(this,ws,Date.now())}build(e,c,d){const h=new Mutation({mutationCache:this,mutationId:++ks(this,ws)._,options:e.defaultMutationOptions(c),state:d});return this.add(h),h}add(e){const c=scopeFor(e),d=fr(this,An).get(c)??[];d.push(e),fr(this,An).set(c,d),this.notify({type:"added",mutation:e})}remove(e){var d;const c=scopeFor(e);if(fr(this,An).has(c)){const h=(d=fr(this,An).get(c))==null?void 0:d.filter(g=>g!==e);h&&(h.length===0?fr(this,An).delete(c):fr(this,An).set(c,h))}this.notify({type:"removed",mutation:e})}canRun(e){var d;const c=(d=fr(this,An).get(scopeFor(e)))==null?void 0:d.find(h=>h.state.status==="pending");return!c||c===e}runNext(e){var d;const c=(d=fr(this,An).get(scopeFor(e)))==null?void 0:d.find(h=>h!==e&&h.state.isPaused);return(c==null?void 0:c.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...fr(this,An).values()].flat()}find(e){const c={exact:!0,...e};return this.getAll().find(d=>matchMutation(c,d))}findAll(e={}){return this.getAll().filter(c=>matchMutation(e,c))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(c=>{c(e)})})}resumePausedMutations(){const e=this.getAll().filter(c=>c.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(c=>c.continue().catch(noop$2))))}},An=new WeakMap,ws=new WeakMap,po);function scopeFor(a){var e;return((e=a.options.scope)==null?void 0:e.id)??String(a.mutationId)}function infiniteQueryBehavior(a){return{onFetch:(e,c)=>{var rt,$,b,nt,st;const d=e.options,h=(b=($=(rt=e.fetchOptions)==null?void 0:rt.meta)==null?void 0:$.fetchMore)==null?void 0:b.direction,g=((nt=e.state.data)==null?void 0:nt.pages)||[],_=((st=e.state.data)==null?void 0:st.pageParams)||[];let _e={pages:[],pageParams:[]},et=0;const tt=async()=>{let ot=!1;const it=dt=>{Object.defineProperty(dt,"signal",{enumerable:!0,get:()=>(e.signal.aborted?ot=!0:e.signal.addEventListener("abort",()=>{ot=!0}),e.signal)})},at=ensureQueryFn(e.options,e.fetchOptions),lt=async(dt,ht,pt)=>{if(ot)return Promise.reject();if(ht==null&&dt.pages.length)return Promise.resolve(dt);const mt={queryKey:e.queryKey,pageParam:ht,direction:pt?"backward":"forward",meta:e.options.meta};it(mt);const yt=await at(mt),{maxPages:xt}=e.options,gt=pt?addToStart:addToEnd;return{pages:gt(dt.pages,yt,xt),pageParams:gt(dt.pageParams,ht,xt)}};if(h&&g.length){const dt=h==="backward",ht=dt?getPreviousPageParam:getNextPageParam,pt={pages:g,pageParams:_},mt=ht(d,pt);_e=await lt(pt,mt,dt)}else{const dt=a??g.length;do{const ht=et===0?_[0]??d.initialPageParam:getNextPageParam(d,_e);if(et>0&&ht==null)break;_e=await lt(_e,ht),et++}while(et<dt)}return _e};e.options.persister?e.fetchFn=()=>{var ot,it;return(it=(ot=e.options).persister)==null?void 0:it.call(ot,tt,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},c)}:e.fetchFn=tt}}}function getNextPageParam(a,{pages:e,pageParams:c}){const d=e.length-1;return e.length>0?a.getNextPageParam(e[d],e,c[d],c):void 0}function getPreviousPageParam(a,{pages:e,pageParams:c}){var d;return e.length>0?(d=a.getPreviousPageParam)==null?void 0:d.call(a,e[0],e,c[0],c):void 0}var dn,Vn,zn,ss,os,Hn,is,as,fo,QueryClient=(fo=class{constructor(a={}){Jr(this,dn);Jr(this,Vn);Jr(this,zn);Jr(this,ss);Jr(this,os);Jr(this,Hn);Jr(this,is);Jr(this,as);Hr(this,dn,a.queryCache||new QueryCache),Hr(this,Vn,a.mutationCache||new MutationCache),Hr(this,zn,a.defaultOptions||{}),Hr(this,ss,new Map),Hr(this,os,new Map),Hr(this,Hn,0)}mount(){ks(this,Hn)._++,fr(this,Hn)===1&&(Hr(this,is,focusManager.subscribe(async a=>{a&&(await this.resumePausedMutations(),fr(this,dn).onFocus())})),Hr(this,as,onlineManager.subscribe(async a=>{a&&(await this.resumePausedMutations(),fr(this,dn).onOnline())})))}unmount(){var a,e;ks(this,Hn)._--,fr(this,Hn)===0&&((a=fr(this,is))==null||a.call(this),Hr(this,is,void 0),(e=fr(this,as))==null||e.call(this),Hr(this,as,void 0))}isFetching(a){return fr(this,dn).findAll({...a,fetchStatus:"fetching"}).length}isMutating(a){return fr(this,Vn).findAll({...a,status:"pending"}).length}getQueryData(a){var c;const e=this.defaultQueryOptions({queryKey:a});return(c=fr(this,dn).get(e.queryHash))==null?void 0:c.state.data}ensureQueryData(a){const e=this.getQueryData(a.queryKey);if(e===void 0)return this.fetchQuery(a);{const c=this.defaultQueryOptions(a),d=fr(this,dn).build(this,c);return a.revalidateIfStale&&d.isStaleByTime(resolveStaleTime(c.staleTime,d))&&this.prefetchQuery(c),Promise.resolve(e)}}getQueriesData(a){return fr(this,dn).findAll(a).map(({queryKey:e,state:c})=>{const d=c.data;return[e,d]})}setQueryData(a,e,c){const d=this.defaultQueryOptions({queryKey:a}),h=fr(this,dn).get(d.queryHash),g=h==null?void 0:h.state.data,_=functionalUpdate(e,g);if(_!==void 0)return fr(this,dn).build(this,d).setData(_,{...c,manual:!0})}setQueriesData(a,e,c){return notifyManager.batch(()=>fr(this,dn).findAll(a).map(({queryKey:d})=>[d,this.setQueryData(d,e,c)]))}getQueryState(a){var c;const e=this.defaultQueryOptions({queryKey:a});return(c=fr(this,dn).get(e.queryHash))==null?void 0:c.state}removeQueries(a){const e=fr(this,dn);notifyManager.batch(()=>{e.findAll(a).forEach(c=>{e.remove(c)})})}resetQueries(a,e){const c=fr(this,dn),d={type:"active",...a};return notifyManager.batch(()=>(c.findAll(a).forEach(h=>{h.reset()}),this.refetchQueries(d,e)))}cancelQueries(a={},e={}){const c={revert:!0,...e},d=notifyManager.batch(()=>fr(this,dn).findAll(a).map(h=>h.cancel(c)));return Promise.all(d).then(noop$2).catch(noop$2)}invalidateQueries(a={},e={}){return notifyManager.batch(()=>{if(fr(this,dn).findAll(a).forEach(d=>{d.invalidate()}),a.refetchType==="none")return Promise.resolve();const c={...a,type:a.refetchType??a.type??"active"};return this.refetchQueries(c,e)})}refetchQueries(a={},e){const c={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},d=notifyManager.batch(()=>fr(this,dn).findAll(a).filter(h=>!h.isDisabled()).map(h=>{let g=h.fetch(void 0,c);return c.throwOnError||(g=g.catch(noop$2)),h.state.fetchStatus==="paused"?Promise.resolve():g}));return Promise.all(d).then(noop$2)}fetchQuery(a){const e=this.defaultQueryOptions(a);e.retry===void 0&&(e.retry=!1);const c=fr(this,dn).build(this,e);return c.isStaleByTime(resolveStaleTime(e.staleTime,c))?c.fetch(e):Promise.resolve(c.state.data)}prefetchQuery(a){return this.fetchQuery(a).then(noop$2).catch(noop$2)}fetchInfiniteQuery(a){return a.behavior=infiniteQueryBehavior(a.pages),this.fetchQuery(a)}prefetchInfiniteQuery(a){return this.fetchInfiniteQuery(a).then(noop$2).catch(noop$2)}ensureInfiniteQueryData(a){return a.behavior=infiniteQueryBehavior(a.pages),this.ensureQueryData(a)}resumePausedMutations(){return onlineManager.isOnline()?fr(this,Vn).resumePausedMutations():Promise.resolve()}getQueryCache(){return fr(this,dn)}getMutationCache(){return fr(this,Vn)}getDefaultOptions(){return fr(this,zn)}setDefaultOptions(a){Hr(this,zn,a)}setQueryDefaults(a,e){fr(this,ss).set(hashKey(a),{queryKey:a,defaultOptions:e})}getQueryDefaults(a){const e=[...fr(this,ss).values()];let c={};return e.forEach(d=>{partialMatchKey(a,d.queryKey)&&(c={...c,...d.defaultOptions})}),c}setMutationDefaults(a,e){fr(this,os).set(hashKey(a),{mutationKey:a,defaultOptions:e})}getMutationDefaults(a){const e=[...fr(this,os).values()];let c={};return e.forEach(d=>{partialMatchKey(a,d.mutationKey)&&(c={...c,...d.defaultOptions})}),c}defaultQueryOptions(a){if(a._defaulted)return a;const e={...fr(this,zn).queries,...this.getQueryDefaults(a.queryKey),...a,_defaulted:!0};return e.queryHash||(e.queryHash=hashQueryKeyByOptions(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===skipToken&&(e.enabled=!1),e}defaultMutationOptions(a){return a!=null&&a._defaulted?a:{...fr(this,zn).mutations,...(a==null?void 0:a.mutationKey)&&this.getMutationDefaults(a.mutationKey),...a,_defaulted:!0}}clear(){fr(this,dn).clear(),fr(this,Vn).clear()}},dn=new WeakMap,Vn=new WeakMap,zn=new WeakMap,ss=new WeakMap,os=new WeakMap,Hn=new WeakMap,is=new WeakMap,as=new WeakMap,fo),QueryClientContext=reactExports.createContext(void 0),QueryClientProvider=({client:a,children:e})=>(reactExports.useEffect(()=>(a.mount(),()=>{a.unmount()}),[a]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:a,children:e}));const scriptRel="modulepreload",assetsURL=function(a){return"/cake-ordering-gateway/"+a},seen={},__vitePreload=function(e,c,d){let h=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),_e=(_==null?void 0:_.nonce)||(_==null?void 0:_.getAttribute("nonce"));h=Promise.allSettled(c.map(et=>{if(et=assetsURL(et),et in seen)return;seen[et]=!0;const tt=et.endsWith(".css"),rt=tt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${et}"]${rt}`))return;const $=document.createElement("link");if($.rel=tt?"stylesheet":scriptRel,tt||($.as="script"),$.crossOrigin="",$.href=et,_e&&$.setAttribute("nonce",_e),document.head.appendChild($),tt)return new Promise((b,nt)=>{$.addEventListener("load",b),$.addEventListener("error",()=>nt(new Error(`Unable to preload CSS for ${et}`)))})}))}function g(_){const _e=new Event("vite:preloadError",{cancelable:!0});if(_e.payload=_,window.dispatchEvent(_e),!_e.defaultPrevented)throw _}return h.then(_=>{for(const _e of _||[])_e.status==="rejected"&&g(_e.reason);return e().catch(g)})},resolveFetch$3=a=>{let e;return a?e=a:typeof fetch>"u"?e=(...c)=>__vitePreload(async()=>{const{default:d}=await Promise.resolve().then(()=>browser);return{default:d}},void 0).then(({default:d})=>d(...c)):e=fetch,(...c)=>e(...c)};class FunctionsError extends Error{constructor(e,c="FunctionsError",d){super(e),this.name=c,this.context=d}}class FunctionsFetchError extends FunctionsError{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class FunctionsRelayError extends FunctionsError{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class FunctionsHttpError extends FunctionsError{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var FunctionRegion;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$7=function(a,e,c,d){function h(g){return g instanceof c?g:new c(function(_){_(g)})}return new(c||(c=Promise))(function(g,_){function _e(rt){try{tt(d.next(rt))}catch($){_($)}}function et(rt){try{tt(d.throw(rt))}catch($){_($)}}function tt(rt){rt.done?g(rt.value):h(rt.value).then(_e,et)}tt((d=d.apply(a,e||[])).next())})};class FunctionsClient{constructor(e,{headers:c={},customFetch:d,region:h=FunctionRegion.Any}={}){this.url=e,this.headers=c,this.region=h,this.fetch=resolveFetch$3(d)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,c={}){var d;return __awaiter$7(this,void 0,void 0,function*(){try{const{headers:h,method:g,body:_}=c;let _e={},{region:et}=c;et||(et=this.region),et&&et!=="any"&&(_e["x-region"]=et);let tt;_&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)&&(typeof Blob<"u"&&_ instanceof Blob||_ instanceof ArrayBuffer?(_e["Content-Type"]="application/octet-stream",tt=_):typeof _=="string"?(_e["Content-Type"]="text/plain",tt=_):typeof FormData<"u"&&_ instanceof FormData?tt=_:(_e["Content-Type"]="application/json",tt=JSON.stringify(_)));const rt=yield this.fetch(`${this.url}/${e}`,{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},_e),this.headers),h),body:tt}).catch(st=>{throw new FunctionsFetchError(st)}),$=rt.headers.get("x-relay-error");if($&&$==="true")throw new FunctionsRelayError(rt);if(!rt.ok)throw new FunctionsHttpError(rt);let b=((d=rt.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),nt;return b==="application/json"?nt=yield rt.json():b==="application/octet-stream"?nt=yield rt.blob():b==="text/event-stream"?nt=rt:b==="multipart/form-data"?nt=yield rt.formData():nt=yield rt.text(),{data:nt,error:null}}catch(h){return{data:null,error:h}}})}}var cjs={},PostgrestClient$2={},PostgrestQueryBuilder$2={},PostgrestFilterBuilder$2={},PostgrestTransformBuilder$2={},PostgrestBuilder$2={},getGlobal=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request=globalObject.Request,Response$1=globalObject.Response,browser=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(browser);var PostgrestError$2={};Object.defineProperty(PostgrestError$2,"__esModule",{value:!0});let PostgrestError$1=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};PostgrestError$2.default=PostgrestError$1;var __importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PostgrestBuilder$2,"__esModule",{value:!0});const node_fetch_1=__importDefault$5(require$$0$1),PostgrestError_1$1=__importDefault$5(PostgrestError$2);let PostgrestBuilder$1=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=node_fetch_1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,c){return this.headers=Object.assign({},this.headers),this.headers[e]=c,this}then(e,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var _,_e,et;let tt=null,rt=null,$=null,b=g.status,nt=g.statusText;if(g.ok){if(this.method!=="HEAD"){const at=await g.text();at===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?rt=at:rt=JSON.parse(at))}const ot=(_=this.headers.Prefer)===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),it=(_e=g.headers.get("content-range"))===null||_e===void 0?void 0:_e.split("/");ot&&it&&it.length>1&&($=parseInt(it[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(rt)&&(rt.length>1?(tt={code:"PGRST116",details:`Results contain ${rt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},rt=null,$=null,b=406,nt="Not Acceptable"):rt.length===1?rt=rt[0]:rt=null)}else{const ot=await g.text();try{tt=JSON.parse(ot),Array.isArray(tt)&&g.status===404&&(rt=[],tt=null,b=200,nt="OK")}catch{g.status===404&&ot===""?(b=204,nt="No Content"):tt={message:ot}}if(tt&&this.isMaybeSingle&&(!((et=tt==null?void 0:tt.details)===null||et===void 0)&&et.includes("0 rows"))&&(tt=null,b=200,nt="OK"),tt&&this.shouldThrowOnError)throw new PostgrestError_1$1.default(tt)}return{error:tt,data:rt,count:$,status:b,statusText:nt}});return this.shouldThrowOnError||(h=h.catch(g=>{var _,_e,et;return{error:{message:`${(_=g==null?void 0:g.name)!==null&&_!==void 0?_:"FetchError"}: ${g==null?void 0:g.message}`,details:`${(_e=g==null?void 0:g.stack)!==null&&_e!==void 0?_e:""}`,hint:"",code:`${(et=g==null?void 0:g.code)!==null&&et!==void 0?et:""}`},data:null,count:null,status:0,statusText:""}})),h.then(e,c)}returns(){return this}overrideTypes(){return this}};PostgrestBuilder$2.default=PostgrestBuilder$1;var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PostgrestTransformBuilder$2,"__esModule",{value:!0});const PostgrestBuilder_1$1=__importDefault$4(PostgrestBuilder$2);let PostgrestTransformBuilder$1=class extends PostgrestBuilder_1$1.default{select(e){let c=!1;const d=(e??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",d),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:c=!0,nullsFirst:d,foreignTable:h,referencedTable:g=h}={}){const _=g?`${g}.order`:"order",_e=this.url.searchParams.get(_);return this.url.searchParams.set(_,`${_e?`${_e},`:""}${e}.${c?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:c,referencedTable:d=c}={}){const h=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${e}`),this}range(e,c,{foreignTable:d,referencedTable:h=d}={}){const g=typeof h>"u"?"offset":`${h}.offset`,_=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${e}`),this.url.searchParams.set(_,`${c-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:c=!1,settings:d=!1,buffers:h=!1,wal:g=!1,format:_="text"}={}){var _e;const et=[e?"analyze":null,c?"verbose":null,d?"settings":null,h?"buffers":null,g?"wal":null].filter(Boolean).join("|"),tt=(_e=this.headers.Accept)!==null&&_e!==void 0?_e:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${_}; for="${tt}"; options=${et};`,_==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};PostgrestTransformBuilder$2.default=PostgrestTransformBuilder$1;var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PostgrestFilterBuilder$2,"__esModule",{value:!0});const PostgrestTransformBuilder_1$1=__importDefault$3(PostgrestTransformBuilder$2);let PostgrestFilterBuilder$1=class extends PostgrestTransformBuilder_1$1.default{eq(e,c){return this.url.searchParams.append(e,`eq.${c}`),this}neq(e,c){return this.url.searchParams.append(e,`neq.${c}`),this}gt(e,c){return this.url.searchParams.append(e,`gt.${c}`),this}gte(e,c){return this.url.searchParams.append(e,`gte.${c}`),this}lt(e,c){return this.url.searchParams.append(e,`lt.${c}`),this}lte(e,c){return this.url.searchParams.append(e,`lte.${c}`),this}like(e,c){return this.url.searchParams.append(e,`like.${c}`),this}likeAllOf(e,c){return this.url.searchParams.append(e,`like(all).{${c.join(",")}}`),this}likeAnyOf(e,c){return this.url.searchParams.append(e,`like(any).{${c.join(",")}}`),this}ilike(e,c){return this.url.searchParams.append(e,`ilike.${c}`),this}ilikeAllOf(e,c){return this.url.searchParams.append(e,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(e,c){return this.url.searchParams.append(e,`ilike(any).{${c.join(",")}}`),this}is(e,c){return this.url.searchParams.append(e,`is.${c}`),this}in(e,c){const d=Array.from(new Set(c)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(e,`in.(${d})`),this}contains(e,c){return typeof c=="string"?this.url.searchParams.append(e,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(e,`cs.{${c.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(c)}`),this}containedBy(e,c){return typeof c=="string"?this.url.searchParams.append(e,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(e,`cd.{${c.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(c)}`),this}rangeGt(e,c){return this.url.searchParams.append(e,`sr.${c}`),this}rangeGte(e,c){return this.url.searchParams.append(e,`nxl.${c}`),this}rangeLt(e,c){return this.url.searchParams.append(e,`sl.${c}`),this}rangeLte(e,c){return this.url.searchParams.append(e,`nxr.${c}`),this}rangeAdjacent(e,c){return this.url.searchParams.append(e,`adj.${c}`),this}overlaps(e,c){return typeof c=="string"?this.url.searchParams.append(e,`ov.${c}`):this.url.searchParams.append(e,`ov.{${c.join(",")}}`),this}textSearch(e,c,{config:d,type:h}={}){let g="";h==="plain"?g="pl":h==="phrase"?g="ph":h==="websearch"&&(g="w");const _=d===void 0?"":`(${d})`;return this.url.searchParams.append(e,`${g}fts${_}.${c}`),this}match(e){return Object.entries(e).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(e,c,d){return this.url.searchParams.append(e,`not.${c}.${d}`),this}or(e,{foreignTable:c,referencedTable:d=c}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${e})`),this}filter(e,c,d){return this.url.searchParams.append(e,`${c}.${d}`),this}};PostgrestFilterBuilder$2.default=PostgrestFilterBuilder$1;var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PostgrestQueryBuilder$2,"__esModule",{value:!0});const PostgrestFilterBuilder_1$2=__importDefault$2(PostgrestFilterBuilder$2);let PostgrestQueryBuilder$1=class{constructor(e,{headers:c={},schema:d,fetch:h}){this.url=e,this.headers=c,this.schema=d,this.fetch=h}select(e,{head:c=!1,count:d}={}){const h=c?"HEAD":"GET";let g=!1;const _=(e??"*").split("").map(_e=>/\s/.test(_e)&&!g?"":(_e==='"'&&(g=!g),_e)).join("");return this.url.searchParams.set("select",_),d&&(this.headers.Prefer=`count=${d}`),new PostgrestFilterBuilder_1$2.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:c,defaultToNull:d=!0}={}){const h="POST",g=[];if(this.headers.Prefer&&g.push(this.headers.Prefer),c&&g.push(`count=${c}`),d||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(e)){const _=e.reduce((_e,et)=>_e.concat(Object.keys(et)),[]);if(_.length>0){const _e=[...new Set(_)].map(et=>`"${et}"`);this.url.searchParams.set("columns",_e.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:c,ignoreDuplicates:d=!1,count:h,defaultToNull:g=!0}={}){const _="POST",_e=[`resolution=${d?"ignore":"merge"}-duplicates`];if(c!==void 0&&this.url.searchParams.set("on_conflict",c),this.headers.Prefer&&_e.push(this.headers.Prefer),h&&_e.push(`count=${h}`),g||_e.push("missing=default"),this.headers.Prefer=_e.join(","),Array.isArray(e)){const et=e.reduce((tt,rt)=>tt.concat(Object.keys(rt)),[]);if(et.length>0){const tt=[...new Set(et)].map(rt=>`"${rt}"`);this.url.searchParams.set("columns",tt.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:c}={}){const d="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),c&&h.push(`count=${c}`),this.headers.Prefer=h.join(","),new PostgrestFilterBuilder_1$2.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const c="DELETE",d=[];return e&&d.push(`count=${e}`),this.headers.Prefer&&d.unshift(this.headers.Prefer),this.headers.Prefer=d.join(","),new PostgrestFilterBuilder_1$2.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};PostgrestQueryBuilder$2.default=PostgrestQueryBuilder$1;var constants={},version$4={};Object.defineProperty(version$4,"__esModule",{value:!0});version$4.version=void 0;version$4.version="0.0.0-automated";Object.defineProperty(constants,"__esModule",{value:!0});constants.DEFAULT_HEADERS=void 0;const version_1=version$4;constants.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${version_1.version}`};var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PostgrestClient$2,"__esModule",{value:!0});const PostgrestQueryBuilder_1$1=__importDefault$1(PostgrestQueryBuilder$2),PostgrestFilterBuilder_1$1=__importDefault$1(PostgrestFilterBuilder$2),constants_1=constants;let PostgrestClient$1=class mo{constructor(e,{headers:c={},schema:d,fetch:h}={}){this.url=e,this.headers=Object.assign(Object.assign({},constants_1.DEFAULT_HEADERS),c),this.schemaName=d,this.fetch=h}from(e){const c=new URL(`${this.url}/${e}`);return new PostgrestQueryBuilder_1$1.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new mo(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,c={},{head:d=!1,get:h=!1,count:g}={}){let _;const _e=new URL(`${this.url}/rpc/${e}`);let et;d||h?(_=d?"HEAD":"GET",Object.entries(c).filter(([rt,$])=>$!==void 0).map(([rt,$])=>[rt,Array.isArray($)?`{${$.join(",")}}`:`${$}`]).forEach(([rt,$])=>{_e.searchParams.append(rt,$)})):(_="POST",et=c);const tt=Object.assign({},this.headers);return g&&(tt.Prefer=`count=${g}`),new PostgrestFilterBuilder_1$1.default({method:_,url:_e,headers:tt,schema:this.schemaName,body:et,fetch:this.fetch,allowEmpty:!1})}};PostgrestClient$2.default=PostgrestClient$1;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(cjs,"__esModule",{value:!0});cjs.PostgrestError=cjs.PostgrestBuilder=cjs.PostgrestTransformBuilder=cjs.PostgrestFilterBuilder=cjs.PostgrestQueryBuilder=cjs.PostgrestClient=void 0;const PostgrestClient_1=__importDefault(PostgrestClient$2);cjs.PostgrestClient=PostgrestClient_1.default;const PostgrestQueryBuilder_1=__importDefault(PostgrestQueryBuilder$2);cjs.PostgrestQueryBuilder=PostgrestQueryBuilder_1.default;const PostgrestFilterBuilder_1=__importDefault(PostgrestFilterBuilder$2);cjs.PostgrestFilterBuilder=PostgrestFilterBuilder_1.default;const PostgrestTransformBuilder_1=__importDefault(PostgrestTransformBuilder$2);cjs.PostgrestTransformBuilder=PostgrestTransformBuilder_1.default;const PostgrestBuilder_1=__importDefault(PostgrestBuilder$2);cjs.PostgrestBuilder=PostgrestBuilder_1.default;const PostgrestError_1=__importDefault(PostgrestError$2);cjs.PostgrestError=PostgrestError_1.default;var _default$1=cjs.default={PostgrestClient:PostgrestClient_1.default,PostgrestQueryBuilder:PostgrestQueryBuilder_1.default,PostgrestFilterBuilder:PostgrestFilterBuilder_1.default,PostgrestTransformBuilder:PostgrestTransformBuilder_1.default,PostgrestBuilder:PostgrestBuilder_1.default,PostgrestError:PostgrestError_1.default};const{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=_default$1,version$3="2.11.2",DEFAULT_HEADERS$3={"X-Client-Info":`realtime-js/${version$3}`},VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3;var SOCKET_STATES;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(a){a.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1}decode(e,c){return e.constructor===ArrayBuffer?c(this._binaryDecode(e)):c(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const c=new DataView(e),d=new TextDecoder;return this._decodeBroadcast(e,c,d)}_decodeBroadcast(e,c,d){const h=c.getUint8(1),g=c.getUint8(2);let _=this.HEADER_LENGTH+2;const _e=d.decode(e.slice(_,_+h));_=_+h;const et=d.decode(e.slice(_,_+g));_=_+g;const tt=JSON.parse(d.decode(e.slice(_,e.byteLength)));return{ref:null,topic:_e,event:et,payload:tt}}}class Timer{constructor(e,c){this.callback=e,this.timerCalc=c,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=c}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(a,e,c={})=>{var d;const h=(d=c.skipTypes)!==null&&d!==void 0?d:[];return Object.keys(e).reduce((g,_)=>(g[_]=convertColumn(_,a,e,h),g),{})},convertColumn=(a,e,c,d)=>{const h=e.find(_e=>_e.name===a),g=h==null?void 0:h.type,_=c[a];return g&&!d.includes(g)?convertCell(g,_):noop$1(_)},convertCell=(a,e)=>{if(a.charAt(0)==="_"){const c=a.slice(1,a.length);return toArray$2(e,c)}switch(a){case PostgresTypes.bool:return toBoolean(e);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(e);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(e);case PostgresTypes.timestamp:return toTimestampString(e);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$1(e);default:return noop$1(e)}},noop$1=a=>a,toBoolean=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},toNumber=a=>{if(typeof a=="string"){const e=parseFloat(a);if(!Number.isNaN(e))return e}return a},toJson=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch(e){return console.log(`JSON parse error: ${e}`),a}return a},toArray$2=(a,e)=>{if(typeof a!="string")return a;const c=a.length-1,d=a[c];if(a[0]==="{"&&d==="}"){let g;const _=a.slice(1,c);try{g=JSON.parse("["+_+"]")}catch{g=_?_.split(","):[]}return g.map(_e=>convertCell(e,_e))}return a},toTimestampString=a=>typeof a=="string"?a.replace(" ","T"):a,httpEndpointURL=a=>{let e=a;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Push{constructor(e,c,d={},h=DEFAULT_TIMEOUT){this.channel=e,this.event=c,this.payload=d,this.timeout=h,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,c){var d;return this._hasReceived(e)&&c((d=this.receivedResp)===null||d===void 0?void 0:d.response),this.recHooks.push({status:e,callback:c}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=c=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=c,this._matchReceive(c)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,c){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:c})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:c}){this.recHooks.filter(d=>d.status===e).forEach(d=>d.callback(c))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(e,c){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const d=(c==null?void 0:c.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(d.state,{},h=>{const{onJoin:g,onLeave:_,onSync:_e}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,h,g,_),this.pendingDiffs.forEach(et=>{this.state=RealtimePresence.syncDiff(this.state,et,g,_)}),this.pendingDiffs=[],_e()}),this.channel._on(d.diff,{},h=>{const{onJoin:g,onLeave:_,onSync:_e}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(h):(this.state=RealtimePresence.syncDiff(this.state,h,g,_),_e())}),this.onJoin((h,g,_)=>{this.channel._trigger("presence",{event:"join",key:h,currentPresences:g,newPresences:_})}),this.onLeave((h,g,_)=>{this.channel._trigger("presence",{event:"leave",key:h,currentPresences:g,leftPresences:_})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,c,d,h){const g=this.cloneDeep(e),_=this.transformState(c),_e={},et={};return this.map(g,(tt,rt)=>{_[tt]||(et[tt]=rt)}),this.map(_,(tt,rt)=>{const $=g[tt];if($){const b=rt.map(it=>it.presence_ref),nt=$.map(it=>it.presence_ref),st=rt.filter(it=>nt.indexOf(it.presence_ref)<0),ot=$.filter(it=>b.indexOf(it.presence_ref)<0);st.length>0&&(_e[tt]=st),ot.length>0&&(et[tt]=ot)}else _e[tt]=rt}),this.syncDiff(g,{joins:_e,leaves:et},d,h)}static syncDiff(e,c,d,h){const{joins:g,leaves:_}={joins:this.transformState(c.joins),leaves:this.transformState(c.leaves)};return d||(d=()=>{}),h||(h=()=>{}),this.map(g,(_e,et)=>{var tt;const rt=(tt=e[_e])!==null&&tt!==void 0?tt:[];if(e[_e]=this.cloneDeep(et),rt.length>0){const $=e[_e].map(nt=>nt.presence_ref),b=rt.filter(nt=>$.indexOf(nt.presence_ref)<0);e[_e].unshift(...b)}d(_e,rt,et)}),this.map(_,(_e,et)=>{let tt=e[_e];if(!tt)return;const rt=et.map($=>$.presence_ref);tt=tt.filter($=>rt.indexOf($.presence_ref)<0),e[_e]=tt,h(_e,tt,et),tt.length===0&&delete e[_e]}),e}static map(e,c){return Object.getOwnPropertyNames(e).map(d=>c(d,e[d]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((c,d)=>{const h=e[d];return"metas"in h?c[d]=h.metas.map(g=>(g.presence_ref=g.phx_ref,delete g.phx_ref,delete g.phx_ref_prev,g)):c[d]=h,c},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(e,c={config:{}},d){this.topic=e,this.params=c,this.socket=d,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},c.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,c=this.timeout){var d,h;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:g,presence:_,private:_e}}=this.params;this._onError(rt=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,rt)),this._onClose(()=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CLOSED));const et={},tt={broadcast:g,presence:_,postgres_changes:(h=(d=this.bindings.postgres_changes)===null||d===void 0?void 0:d.map(rt=>rt.filter))!==null&&h!==void 0?h:[],private:_e};this.socket.accessTokenValue&&(et.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:tt},et)),this.joinedOnce=!0,this._rejoin(c),this.joinPush.receive("ok",async({postgres_changes:rt})=>{var $;if(this.socket.setAuth(),rt===void 0){e==null||e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,nt=($=b==null?void 0:b.length)!==null&&$!==void 0?$:0,st=[];for(let ot=0;ot<nt;ot++){const it=b[ot],{filter:{event:at,schema:lt,table:dt,filter:ht}}=it,pt=rt&&rt[ot];if(pt&&pt.event===at&&pt.schema===lt&&pt.table===dt&&pt.filter===ht)st.push(Object.assign(Object.assign({},it),{id:pt.id}));else{this.unsubscribe(),e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=st,e&&e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",rt=>{e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(rt).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,c={}){return await this.send({type:"presence",event:"track",payload:e},c.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,c,d){return this._on(e,c,d)}async send(e,c={}){var d,h;if(!this._canPush()&&e.type==="broadcast"){const{event:g,payload:_}=e,et={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:g,payload:_,private:this.private}]})};try{const tt=await this._fetchWithTimeout(this.broadcastEndpointURL,et,(d=c.timeout)!==null&&d!==void 0?d:this.timeout);return await((h=tt.body)===null||h===void 0?void 0:h.cancel()),tt.ok?"ok":"error"}catch(tt){return tt.name==="AbortError"?"timed out":"error"}}else return new Promise(g=>{var _,_e,et;const tt=this._push(e.type,e,c.timeout||this.timeout);e.type==="broadcast"&&!(!((et=(_e=(_=this.params)===null||_===void 0?void 0:_.config)===null||_e===void 0?void 0:_e.broadcast)===null||et===void 0)&&et.ack)&&g("ok"),tt.receive("ok",()=>g("ok")),tt.receive("error",()=>g("error")),tt.receive("timeout",()=>g("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=CHANNEL_STATES.leaving;const c=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(d=>{const h=new Push(this,CHANNEL_EVENTS.leave,{},e);h.receive("ok",()=>{c(),d("ok")}).receive("timeout",()=>{c(),d("timed out")}).receive("error",()=>{d("error")}),h.send(),this._canPush()||h.trigger("ok",{})})}async _fetchWithTimeout(e,c,d){const h=new AbortController,g=setTimeout(()=>h.abort(),d),_=await this.socket.fetch(e,Object.assign(Object.assign({},c),{signal:h.signal}));return clearTimeout(g),_}_push(e,c,d=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let h=new Push(this,e,c,d);return this._canPush()?h.send():(h.startTimeout(),this.pushBuffer.push(h)),h}_onMessage(e,c,d){return c}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,c,d){var h,g;const _=e.toLocaleLowerCase(),{close:_e,error:et,leave:tt,join:rt}=CHANNEL_EVENTS;if(d&&[_e,et,tt,rt].indexOf(_)>=0&&d!==this._joinRef())return;let b=this._onMessage(_,c,d);if(c&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(_)?(h=this.bindings.postgres_changes)===null||h===void 0||h.filter(nt=>{var st,ot,it;return((st=nt.filter)===null||st===void 0?void 0:st.event)==="*"||((it=(ot=nt.filter)===null||ot===void 0?void 0:ot.event)===null||it===void 0?void 0:it.toLocaleLowerCase())===_}).map(nt=>nt.callback(b,d)):(g=this.bindings[_])===null||g===void 0||g.filter(nt=>{var st,ot,it,at,lt,dt;if(["broadcast","presence","postgres_changes"].includes(_))if("id"in nt){const ht=nt.id,pt=(st=nt.filter)===null||st===void 0?void 0:st.event;return ht&&((ot=c.ids)===null||ot===void 0?void 0:ot.includes(ht))&&(pt==="*"||(pt==null?void 0:pt.toLocaleLowerCase())===((it=c.data)===null||it===void 0?void 0:it.type.toLocaleLowerCase()))}else{const ht=(lt=(at=nt==null?void 0:nt.filter)===null||at===void 0?void 0:at.event)===null||lt===void 0?void 0:lt.toLocaleLowerCase();return ht==="*"||ht===((dt=c==null?void 0:c.event)===null||dt===void 0?void 0:dt.toLocaleLowerCase())}else return nt.type.toLocaleLowerCase()===_}).map(nt=>{if(typeof b=="object"&&"ids"in b){const st=b.data,{schema:ot,table:it,commit_timestamp:at,type:lt,errors:dt}=st;b=Object.assign(Object.assign({},{schema:ot,table:it,commit_timestamp:at,eventType:lt,new:{},old:{},errors:dt}),this._getPayloadRecords(st))}nt.callback(b,d)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,c,d){const h=e.toLocaleLowerCase(),g={type:h,filter:c,callback:d};return this.bindings[h]?this.bindings[h].push(g):this.bindings[h]=[g],this}_off(e,c){const d=e.toLocaleLowerCase();return this.bindings[d]=this.bindings[d].filter(h=>{var g;return!(((g=h.type)===null||g===void 0?void 0:g.toLocaleLowerCase())===d&&RealtimeChannel.isEqual(h.filter,c))}),this}static isEqual(e,c){if(Object.keys(e).length!==Object.keys(c).length)return!1;for(const d in e)if(e[d]!==c[d])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(CHANNEL_EVENTS.close,{},e)}_onError(e){this._on(CHANNEL_EVENTS.error,{},c=>e(c))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const c={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(c.new=convertChangeData(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(c.old=convertChangeData(e.columns,e.old_record)),c}}const noop=()=>{},NATIVE_WEBSOCKET_AVAILABLE=typeof WebSocket<"u",WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(e,c){var d;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=DEFAULT_HEADERS$3,this.params={},this.timeout=DEFAULT_TIMEOUT,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=g=>{let _;return g?_=g:typeof fetch>"u"?_=(..._e)=>__vitePreload(async()=>{const{default:et}=await Promise.resolve().then(()=>browser);return{default:et}},void 0).then(({default:et})=>et(..._e)):_=fetch,(..._e)=>_(..._e)},this.endPoint=`${e}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(e),c!=null&&c.transport?this.transport=c.transport:this.transport=null,c!=null&&c.params&&(this.params=c.params),c!=null&&c.headers&&(this.headers=Object.assign(Object.assign({},this.headers),c.headers)),c!=null&&c.timeout&&(this.timeout=c.timeout),c!=null&&c.logger&&(this.logger=c.logger),c!=null&&c.heartbeatIntervalMs&&(this.heartbeatIntervalMs=c.heartbeatIntervalMs);const h=(d=c==null?void 0:c.params)===null||d===void 0?void 0:d.apikey;if(h&&(this.accessTokenValue=h,this.apiKey=h),this.reconnectAfterMs=c!=null&&c.reconnectAfterMs?c.reconnectAfterMs:g=>[1e3,2e3,5e3,1e4][g-1]||1e4,this.encode=c!=null&&c.encode?c.encode:(g,_)=>_(JSON.stringify(g)),this.decode=c!=null&&c.decode?c.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Timer(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(c==null?void 0:c.fetch),c!=null&&c.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(c==null?void 0:c.worker)||!1,this.workerUrl=c==null?void 0:c.workerUrl}this.accessToken=(c==null?void 0:c.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(NATIVE_WEBSOCKET_AVAILABLE){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new WSWebSocketDummy(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),__vitePreload(async()=>{const{default:e}=await import("./browser-BP7bxIQK.js").then(c=>c.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}disconnect(e,c){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,c??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const c=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),c}async removeAllChannels(){const e=await Promise.all(this.channels.map(c=>c.unsubscribe()));return this.disconnect(),e}log(e,c,d){this.logger(e,c,d)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}channel(e,c={config:{}}){const d=new RealtimeChannel(`realtime:${e}`,c,this);return this.channels.push(d),d}push(e){const{topic:c,event:d,payload:h,ref:g}=e,_=()=>{this.encode(e,_e=>{var et;(et=this.conn)===null||et===void 0||et.send(_e)})};this.log("push",`${c} ${d} (${g})`,h),this.isConnected()?_():this.sendBuffer.push(_)}async setAuth(e=null){let c=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(c){let d=null;try{d=JSON.parse(atob(c.split(".")[1]))}catch{}if(d&&d.exp&&!(Math.floor(Date.now()/1e3)-d.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${d.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${d.exp}`);this.accessTokenValue=c,this.channels.forEach(h=>{c&&h.updateJoinPayload({access_token:c}),h.joinedOnce&&h._isJoined()&&h._push(CHANNEL_EVENTS.access_token,{access_token:c})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(WS_CLOSE_NORMAL,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let c=this.channels.find(d=>d.topic===e&&(d._isJoined()||d._isJoining()));c&&(this.log("transport",`leaving duplicate topic "${e}"`),c.unsubscribe())}_remove(e){this.channels=this.channels.filter(c=>c._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,c=>{let{topic:d,event:h,payload:g,ref:_}=c;_&&_===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${g.status||""} ${d} ${h} ${_&&"("+_+")"||""}`,g),this.channels.filter(_e=>_e._isMember(d)).forEach(_e=>_e._trigger(h,g,_)),this.stateChangeCallbacks.message.forEach(_e=>_e(c))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=c=>{this.log("worker","worker error",c.message),this.workerRef.terminate()},this.workerRef.onmessage=c=>{c.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(c=>c(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(c=>c(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(CHANNEL_EVENTS.error))}_appendParams(e,c){if(Object.keys(c).length===0)return e;const d=e.match(/\?/)?"&":"?",h=new URLSearchParams(c);return`${e}${d}${h}`}_workerObjectUrl(e){let c;if(e)c=e;else{const d=new Blob([WORKER_SCRIPT],{type:"application/javascript"});c=URL.createObjectURL(d)}return c}}class WSWebSocketDummy{constructor(e,c,d){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=SOCKET_STATES.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=d.close}}class StorageError extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}class StorageApiError extends StorageError{constructor(e,c){super(e),this.name="StorageApiError",this.status=c}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class StorageUnknownError extends StorageError{constructor(e,c){super(e),this.name="StorageUnknownError",this.originalError=c}}var __awaiter$6=function(a,e,c,d){function h(g){return g instanceof c?g:new c(function(_){_(g)})}return new(c||(c=Promise))(function(g,_){function _e(rt){try{tt(d.next(rt))}catch($){_($)}}function et(rt){try{tt(d.throw(rt))}catch($){_($)}}function tt(rt){rt.done?g(rt.value):h(rt.value).then(_e,et)}tt((d=d.apply(a,e||[])).next())})};const resolveFetch$2=a=>{let e;return a?e=a:typeof fetch>"u"?e=(...c)=>__vitePreload(async()=>{const{default:d}=await Promise.resolve().then(()=>browser);return{default:d}},void 0).then(({default:d})=>d(...c)):e=fetch,(...c)=>e(...c)},resolveResponse=()=>__awaiter$6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser),void 0)).Response:Response}),recursiveToCamel=a=>{if(Array.isArray(a))return a.map(c=>recursiveToCamel(c));if(typeof a=="function"||a!==Object(a))return a;const e={};return Object.entries(a).forEach(([c,d])=>{const h=c.replace(/([-_][a-z])/gi,g=>g.toUpperCase().replace(/[-_]/g,""));e[h]=recursiveToCamel(d)}),e};var __awaiter$5=function(a,e,c,d){function h(g){return g instanceof c?g:new c(function(_){_(g)})}return new(c||(c=Promise))(function(g,_){function _e(rt){try{tt(d.next(rt))}catch($){_($)}}function et(rt){try{tt(d.throw(rt))}catch($){_($)}}function tt(rt){rt.done?g(rt.value):h(rt.value).then(_e,et)}tt((d=d.apply(a,e||[])).next())})};const _getErrorMessage$1=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),handleError$2=(a,e,c)=>__awaiter$5(void 0,void 0,void 0,function*(){const d=yield resolveResponse();a instanceof d&&!(c!=null&&c.noResolveJson)?a.json().then(h=>{e(new StorageApiError(_getErrorMessage$1(h),a.status||500))}).catch(h=>{e(new StorageUnknownError(_getErrorMessage$1(h),h))}):e(new StorageUnknownError(_getErrorMessage$1(a),a))}),_getRequestParams$1=(a,e,c,d)=>{const h={method:a,headers:(e==null?void 0:e.headers)||{}};return a==="GET"?h:(h.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),d&&(h.body=JSON.stringify(d)),Object.assign(Object.assign({},h),c))};function _handleRequest$1(a,e,c,d,h,g){return __awaiter$5(this,void 0,void 0,function*(){return new Promise((_,_e)=>{a(c,_getRequestParams$1(e,d,h,g)).then(et=>{if(!et.ok)throw et;return d!=null&&d.noResolveJson?et:et.json()}).then(et=>_(et)).catch(et=>handleError$2(et,_e,d))})})}function get$1(a,e,c,d){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(a,"GET",e,c,d)})}function post(a,e,c,d,h){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(a,"POST",e,d,h,c)})}function put(a,e,c,d,h){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(a,"PUT",e,d,h,c)})}function head(a,e,c,d){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(a,"HEAD",e,Object.assign(Object.assign({},c),{noResolveJson:!0}),d)})}function remove(a,e,c,d,h){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(a,"DELETE",e,d,h,c)})}var __awaiter$4=function(a,e,c,d){function h(g){return g instanceof c?g:new c(function(_){_(g)})}return new(c||(c=Promise))(function(g,_){function _e(rt){try{tt(d.next(rt))}catch($){_($)}}function et(rt){try{tt(d.throw(rt))}catch($){_($)}}function tt(rt){rt.done?g(rt.value):h(rt.value).then(_e,et)}tt((d=d.apply(a,e||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(e,c={},d,h){this.url=e,this.headers=c,this.bucketId=d,this.fetch=resolveFetch$2(h)}uploadOrUpdate(e,c,d,h){return __awaiter$4(this,void 0,void 0,function*(){try{let g;const _=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),h);let _e=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(_.upsert)});const et=_.metadata;typeof Blob<"u"&&d instanceof Blob?(g=new FormData,g.append("cacheControl",_.cacheControl),et&&g.append("metadata",this.encodeMetadata(et)),g.append("",d)):typeof FormData<"u"&&d instanceof FormData?(g=d,g.append("cacheControl",_.cacheControl),et&&g.append("metadata",this.encodeMetadata(et))):(g=d,_e["cache-control"]=`max-age=${_.cacheControl}`,_e["content-type"]=_.contentType,et&&(_e["x-metadata"]=this.toBase64(this.encodeMetadata(et)))),h!=null&&h.headers&&(_e=Object.assign(Object.assign({},_e),h.headers));const tt=this._removeEmptyFolders(c),rt=this._getFinalPath(tt),$=yield this.fetch(`${this.url}/object/${rt}`,Object.assign({method:e,body:g,headers:_e},_!=null&&_.duplex?{duplex:_.duplex}:{})),b=yield $.json();return $.ok?{data:{path:tt,id:b.Id,fullPath:b.Key},error:null}:{data:null,error:b}}catch(g){if(isStorageError(g))return{data:null,error:g};throw g}})}upload(e,c,d){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,c,d)})}uploadToSignedUrl(e,c,d,h){return __awaiter$4(this,void 0,void 0,function*(){const g=this._removeEmptyFolders(e),_=this._getFinalPath(g),_e=new URL(this.url+`/object/upload/sign/${_}`);_e.searchParams.set("token",c);try{let et;const tt=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},h),rt=Object.assign(Object.assign({},this.headers),{"x-upsert":String(tt.upsert)});typeof Blob<"u"&&d instanceof Blob?(et=new FormData,et.append("cacheControl",tt.cacheControl),et.append("",d)):typeof FormData<"u"&&d instanceof FormData?(et=d,et.append("cacheControl",tt.cacheControl)):(et=d,rt["cache-control"]=`max-age=${tt.cacheControl}`,rt["content-type"]=tt.contentType);const $=yield this.fetch(_e.toString(),{method:"PUT",body:et,headers:rt}),b=yield $.json();return $.ok?{data:{path:g,fullPath:b.Key},error:null}:{data:null,error:b}}catch(et){if(isStorageError(et))return{data:null,error:et};throw et}})}createSignedUploadUrl(e,c){return __awaiter$4(this,void 0,void 0,function*(){try{let d=this._getFinalPath(e);const h=Object.assign({},this.headers);c!=null&&c.upsert&&(h["x-upsert"]="true");const g=yield post(this.fetch,`${this.url}/object/upload/sign/${d}`,{},{headers:h}),_=new URL(this.url+g.url),_e=_.searchParams.get("token");if(!_e)throw new StorageError("No token returned by API");return{data:{signedUrl:_.toString(),path:e,token:_e},error:null}}catch(d){if(isStorageError(d))return{data:null,error:d};throw d}})}update(e,c,d){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,c,d)})}move(e,c,d){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:c,destinationBucket:d==null?void 0:d.destinationBucket},{headers:this.headers}),error:null}}catch(h){if(isStorageError(h))return{data:null,error:h};throw h}})}copy(e,c,d){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:c,destinationBucket:d==null?void 0:d.destinationBucket},{headers:this.headers})).Key},error:null}}catch(h){if(isStorageError(h))return{data:null,error:h};throw h}})}createSignedUrl(e,c,d){return __awaiter$4(this,void 0,void 0,function*(){try{let h=this._getFinalPath(e),g=yield post(this.fetch,`${this.url}/object/sign/${h}`,Object.assign({expiresIn:c},d!=null&&d.transform?{transform:d.transform}:{}),{headers:this.headers});const _=d!=null&&d.download?`&download=${d.download===!0?"":d.download}`:"";return g={signedUrl:encodeURI(`${this.url}${g.signedURL}${_}`)},{data:g,error:null}}catch(h){if(isStorageError(h))return{data:null,error:h};throw h}})}createSignedUrls(e,c,d){return __awaiter$4(this,void 0,void 0,function*(){try{const h=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:c,paths:e},{headers:this.headers}),g=d!=null&&d.download?`&download=${d.download===!0?"":d.download}`:"";return{data:h.map(_=>Object.assign(Object.assign({},_),{signedUrl:_.signedURL?encodeURI(`${this.url}${_.signedURL}${g}`):null})),error:null}}catch(h){if(isStorageError(h))return{data:null,error:h};throw h}})}download(e,c){return __awaiter$4(this,void 0,void 0,function*(){const h=typeof(c==null?void 0:c.transform)<"u"?"render/image/authenticated":"object",g=this.transformOptsToQueryString((c==null?void 0:c.transform)||{}),_=g?`?${g}`:"";try{const _e=this._getFinalPath(e);return{data:yield(yield get$1(this.fetch,`${this.url}/${h}/${_e}${_}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(_e){if(isStorageError(_e))return{data:null,error:_e};throw _e}})}info(e){return __awaiter$4(this,void 0,void 0,function*(){const c=this._getFinalPath(e);try{const d=yield get$1(this.fetch,`${this.url}/object/info/${c}`,{headers:this.headers});return{data:recursiveToCamel(d),error:null}}catch(d){if(isStorageError(d))return{data:null,error:d};throw d}})}exists(e){return __awaiter$4(this,void 0,void 0,function*(){const c=this._getFinalPath(e);try{return yield head(this.fetch,`${this.url}/object/${c}`,{headers:this.headers}),{data:!0,error:null}}catch(d){if(isStorageError(d)&&d instanceof StorageUnknownError){const h=d.originalError;if([400,404].includes(h==null?void 0:h.status))return{data:!1,error:d}}throw d}})}getPublicUrl(e,c){const d=this._getFinalPath(e),h=[],g=c!=null&&c.download?`download=${c.download===!0?"":c.download}`:"";g!==""&&h.push(g);const _e=typeof(c==null?void 0:c.transform)<"u"?"render/image":"object",et=this.transformOptsToQueryString((c==null?void 0:c.transform)||{});et!==""&&h.push(et);let tt=h.join("&");return tt!==""&&(tt=`?${tt}`),{data:{publicUrl:encodeURI(`${this.url}/${_e}/public/${d}${tt}`)}}}remove(e){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(c){if(isStorageError(c))return{data:null,error:c};throw c}})}list(e,c,d){return __awaiter$4(this,void 0,void 0,function*(){try{const h=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),c),{prefix:e||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,h,{headers:this.headers},d),error:null}}catch(h){if(isStorageError(h))return{data:null,error:h};throw h}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const c=[];return e.width&&c.push(`width=${e.width}`),e.height&&c.push(`height=${e.height}`),e.resize&&c.push(`resize=${e.resize}`),e.format&&c.push(`format=${e.format}`),e.quality&&c.push(`quality=${e.quality}`),c.join("&")}}const version$2="2.7.1",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var __awaiter$3=function(a,e,c,d){function h(g){return g instanceof c?g:new c(function(_){_(g)})}return new(c||(c=Promise))(function(g,_){function _e(rt){try{tt(d.next(rt))}catch($){_($)}}function et(rt){try{tt(d.throw(rt))}catch($){_($)}}function tt(rt){rt.done?g(rt.value):h(rt.value).then(_e,et)}tt((d=d.apply(a,e||[])).next())})};class StorageBucketApi{constructor(e,c={},d){this.url=e,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),c),this.fetch=resolveFetch$2(d)}listBuckets(){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get$1(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(isStorageError(e))return{data:null,error:e};throw e}})}getBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get$1(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(c){if(isStorageError(c))return{data:null,error:c};throw c}})}createBucket(e,c={public:!1}){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:c.public,file_size_limit:c.fileSizeLimit,allowed_mime_types:c.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(isStorageError(d))return{data:null,error:d};throw d}})}updateBucket(e,c){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:c.public,file_size_limit:c.fileSizeLimit,allowed_mime_types:c.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(isStorageError(d))return{data:null,error:d};throw d}})}emptyBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(c){if(isStorageError(c))return{data:null,error:c};throw c}})}deleteBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(c){if(isStorageError(c))return{data:null,error:c};throw c}})}}class StorageClient extends StorageBucketApi{constructor(e,c={},d){super(e,c,d)}from(e){return new StorageFileApi(this.url,this.headers,e,this.fetch)}}const version$1="2.49.4";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$1}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$2=function(a,e,c,d){function h(g){return g instanceof c?g:new c(function(_){_(g)})}return new(c||(c=Promise))(function(g,_){function _e(rt){try{tt(d.next(rt))}catch($){_($)}}function et(rt){try{tt(d.throw(rt))}catch($){_($)}}function tt(rt){rt.done?g(rt.value):h(rt.value).then(_e,et)}tt((d=d.apply(a,e||[])).next())})};const resolveFetch$1=a=>{let e;return a?e=a:typeof fetch>"u"?e=nodeFetch:e=fetch,(...c)=>e(...c)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(a,e,c)=>{const d=resolveFetch$1(c),h=resolveHeadersConstructor();return(g,_)=>__awaiter$2(void 0,void 0,void 0,function*(){var _e;const et=(_e=yield e())!==null&&_e!==void 0?_e:a;let tt=new h(_==null?void 0:_.headers);return tt.has("apikey")||tt.set("apikey",a),tt.has("Authorization")||tt.set("Authorization",`Bearer ${et}`),d(g,Object.assign(Object.assign({},_),{headers:tt}))})};var __awaiter$1=function(a,e,c,d){function h(g){return g instanceof c?g:new c(function(_){_(g)})}return new(c||(c=Promise))(function(g,_){function _e(rt){try{tt(d.next(rt))}catch($){_($)}}function et(rt){try{tt(d.throw(rt))}catch($){_($)}}function tt(rt){rt.done?g(rt.value):h(rt.value).then(_e,et)}tt((d=d.apply(a,e||[])).next())})};function stripTrailingSlash(a){return a.replace(/\/$/,"")}function applySettingDefaults(a,e){const{db:c,auth:d,realtime:h,global:g}=a,{db:_,auth:_e,realtime:et,global:tt}=e,rt={db:Object.assign(Object.assign({},_),c),auth:Object.assign(Object.assign({},_e),d),realtime:Object.assign(Object.assign({},et),h),global:Object.assign(Object.assign({},tt),g),accessToken:()=>__awaiter$1(this,void 0,void 0,function*(){return""})};return a.accessToken?rt.accessToken=a.accessToken:delete rt.accessToken,rt}const version="2.69.1",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=6e5;class AuthError extends Error{constructor(e,c,d){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=c,this.code=d}}function isAuthError(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class AuthApiError extends AuthError{constructor(e,c,d){super(e,c,d),this.name="AuthApiError",this.status=c,this.code=d}}function isAuthApiError(a){return isAuthError(a)&&a.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(e,c){super(e),this.name="AuthUnknownError",this.originalError=c}}class CustomAuthError extends AuthError{constructor(e,c,d,h){super(e,d,h),this.name=c,this.status=d}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(a){return isAuthError(a)&&a.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(e,c=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=c}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(a){return isAuthError(a)&&a.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(e,c=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=c}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(e,c){super(e,"AuthRetryableFetchError",c,void 0)}}function isAuthRetryableFetchError(a){return isAuthError(a)&&a.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(e,c,d){super(e,"AuthWeakPasswordError",c,"weak_password"),this.reasons=d}}class AuthInvalidJwtError extends CustomAuthError{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const a=new Array(128);for(let e=0;e<a.length;e+=1)a[e]=-1;for(let e=0;e<IGNORE_BASE64URL.length;e+=1)a[IGNORE_BASE64URL[e].charCodeAt(0)]=-2;for(let e=0;e<TO_BASE64URL.length;e+=1)a[TO_BASE64URL[e].charCodeAt(0)]=e;return a})();function byteFromBase64URL(a,e,c){const d=FROM_BASE64URL[a];if(d>-1)for(e.queue=e.queue<<6|d,e.queuedBits+=6;e.queuedBits>=8;)c(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(d===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function stringFromBase64URL(a){const e=[],c=_=>{e.push(String.fromCodePoint(_))},d={utf8seq:0,codepoint:0},h={queue:0,queuedBits:0},g=_=>{stringFromUTF8(_,d,c)};for(let _=0;_<a.length;_+=1)byteFromBase64URL(a.charCodeAt(_),h,g);return e.join("")}function codepointToUTF8(a,e){if(a<=127){e(a);return}else if(a<=2047){e(192|a>>6),e(128|a&63);return}else if(a<=65535){e(224|a>>12),e(128|a>>6&63),e(128|a&63);return}else if(a<=1114111){e(240|a>>18),e(128|a>>12&63),e(128|a>>6&63),e(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function stringToUTF8(a,e){for(let c=0;c<a.length;c+=1){let d=a.charCodeAt(c);if(d>55295&&d<=56319){const h=(d-55296)*1024&65535;d=(a.charCodeAt(c+1)-56320&65535|h)+65536,c+=1}codepointToUTF8(d,e)}}function stringFromUTF8(a,e,c){if(e.utf8seq===0){if(a<=127){c(a);return}for(let d=1;d<6;d+=1)if(!(a>>7-d&1)){e.utf8seq=d;break}if(e.utf8seq===2)e.codepoint=a&31;else if(e.utf8seq===3)e.codepoint=a&15;else if(e.utf8seq===4)e.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|a&63,e.utf8seq-=1,e.utf8seq===0&&c(e.codepoint)}}function base64UrlToUint8Array(a){const e=[],c={queue:0,queuedBits:0},d=h=>{e.push(h)};for(let h=0;h<a.length;h+=1)byteFromBase64URL(a.charCodeAt(h),c,d);return new Uint8Array(e)}function stringToUint8Array(a){const e=[];return stringToUTF8(a,c=>e.push(c)),new Uint8Array(e)}function expiresAt(a){return Math.round(Date.now()/1e3)+a}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){const e=Math.random()*16|0;return(a=="x"?e:e&3|8).toString(16)})}const isBrowser$2=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser$2())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(a){const e={},c=new URL(a);if(c.hash&&c.hash[0]==="#")try{new URLSearchParams(c.hash.substring(1)).forEach((h,g)=>{e[g]=h})}catch{}return c.searchParams.forEach((d,h)=>{e[h]=d}),e}const resolveFetch=a=>{let e;return a?e=a:typeof fetch>"u"?e=(...c)=>__vitePreload(async()=>{const{default:d}=await Promise.resolve().then(()=>browser);return{default:d}},void 0).then(({default:d})=>d(...c)):e=fetch,(...c)=>e(...c)},looksLikeFetchResponse=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",setItemAsync=async(a,e,c)=>{await a.setItem(e,JSON.stringify(c))},getItemAsync=async(a,e)=>{const c=await a.getItem(e);if(!c)return null;try{return JSON.parse(c)}catch{return c}},removeItemAsync=async(a,e)=>{await a.removeItem(e)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((e,c)=>{this.resolve=e,this.reject=c})}}Deferred.promiseConstructor=Promise;function decodeJWT(a){const e=a.split(".");if(e.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let d=0;d<e.length;d++)if(!BASE64URL_REGEX.test(e[d]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(e[0])),payload:JSON.parse(stringFromBase64URL(e[1])),signature:base64UrlToUint8Array(e[2]),raw:{header:e[0],payload:e[1]}}}async function sleep(a){return await new Promise(e=>{setTimeout(()=>e(null),a)})}function retryable(a,e){return new Promise((d,h)=>{(async()=>{for(let g=0;g<1/0;g++)try{const _=await a(g);if(!e(g,null,_)){d(_);return}}catch(_){if(!e(g,_)){h(_);return}}})()})}function dec2hex(a){return("0"+a.toString(16)).substr(-2)}function generatePKCEVerifier(){const e=new Uint32Array(56);if(typeof crypto>"u"){const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",d=c.length;let h="";for(let g=0;g<56;g++)h+=c.charAt(Math.floor(Math.random()*d));return h}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}async function sha256(a){const c=new TextEncoder().encode(a),d=await crypto.subtle.digest("SHA-256",c),h=new Uint8Array(d);return Array.from(h).map(g=>String.fromCharCode(g)).join("")}async function generatePKCEChallenge(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const c=await sha256(a);return btoa(c).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(a,e,c=!1){const d=generatePKCEVerifier();let h=d;c&&(h+="/PASSWORD_RECOVERY"),await setItemAsync(a,`${e}-code-verifier`,h);const g=await generatePKCEChallenge(d);return[g,d===g?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(a){const e=a.headers.get(API_VERSION_HEADER_NAME);if(!e||!e.match(API_VERSION_REGEX))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function validateExp(a){if(!a)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(a<=e)throw new Error("JWT has expired")}function getAlgorithm(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var __rest$3=function(a,e){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&e.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(a);h<d.length;h++)e.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(a,d[h])&&(c[d[h]]=a[d[h]]);return c};const _getErrorMessage=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),NETWORK_ERROR_CODES=[502,503,504];async function handleError$1(a){var e;if(!looksLikeFetchResponse(a))throw new AuthRetryableFetchError(_getErrorMessage(a),0);if(NETWORK_ERROR_CODES.includes(a.status))throw new AuthRetryableFetchError(_getErrorMessage(a),a.status);let c;try{c=await a.json()}catch(g){throw new AuthUnknownError(_getErrorMessage(g),g)}let d;const h=parseResponseAPIVersion(a);if(h&&h.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof c=="object"&&c&&typeof c.code=="string"?d=c.code:typeof c=="object"&&c&&typeof c.error_code=="string"&&(d=c.error_code),d){if(d==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(c),a.status,((e=c.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(d==="session_not_found")throw new AuthSessionMissingError}else if(typeof c=="object"&&c&&typeof c.weak_password=="object"&&c.weak_password&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.reasons.reduce((g,_)=>g&&typeof _=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(c),a.status,c.weak_password.reasons);throw new AuthApiError(_getErrorMessage(c),a.status||500,d)}const _getRequestParams=(a,e,c,d)=>{const h={method:a,headers:(e==null?void 0:e.headers)||{}};return a==="GET"?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),h.body=JSON.stringify(d),Object.assign(Object.assign({},h),c))};async function _request(a,e,c,d){var h;const g=Object.assign({},d==null?void 0:d.headers);g[API_VERSION_HEADER_NAME]||(g[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),d!=null&&d.jwt&&(g.Authorization=`Bearer ${d.jwt}`);const _=(h=d==null?void 0:d.query)!==null&&h!==void 0?h:{};d!=null&&d.redirectTo&&(_.redirect_to=d.redirectTo);const _e=Object.keys(_).length?"?"+new URLSearchParams(_).toString():"",et=await _handleRequest(a,e,c+_e,{headers:g,noResolveJson:d==null?void 0:d.noResolveJson},{},d==null?void 0:d.body);return d!=null&&d.xform?d==null?void 0:d.xform(et):{data:Object.assign({},et),error:null}}async function _handleRequest(a,e,c,d,h,g){const _=_getRequestParams(e,d,h,g);let _e;try{_e=await a(c,Object.assign({},_))}catch(et){throw console.error(et),new AuthRetryableFetchError(_getErrorMessage(et),0)}if(_e.ok||await handleError$1(_e),d!=null&&d.noResolveJson)return _e;try{return await _e.json()}catch(et){await handleError$1(et)}}function _sessionResponse(a){var e;let c=null;hasSession(a)&&(c=Object.assign({},a),a.expires_at||(c.expires_at=expiresAt(a.expires_in)));const d=(e=a.user)!==null&&e!==void 0?e:a;return{data:{session:c,user:d},error:null}}function _sessionResponsePassword(a){const e=_sessionResponse(a);return!e.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0)&&(e.data.weak_password=a.weak_password),e}function _userResponse(a){var e;return{data:{user:(e=a.user)!==null&&e!==void 0?e:a},error:null}}function _ssoResponse(a){return{data:a,error:null}}function _generateLinkResponse(a){const{action_link:e,email_otp:c,hashed_token:d,redirect_to:h,verification_type:g}=a,_=__rest$3(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),_e={action_link:e,email_otp:c,hashed_token:d,redirect_to:h,verification_type:g},et=Object.assign({},_);return{data:{properties:_e,user:et},error:null}}function _noResolveJsonResponse(a){return a}function hasSession(a){return a.access_token&&a.refresh_token&&a.expires_in}var __rest$2=function(a,e){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&e.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(a);h<d.length;h++)e.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(a,d[h])&&(c[d[h]]=a[d[h]]);return c};class GoTrueAdminApi{constructor({url:e="",headers:c={},fetch:d}){this.url=e,this.headers=c,this.fetch=resolveFetch(d),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,c="global"){try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${c}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(d){if(isAuthError(d))return{data:null,error:d};throw d}}async inviteUserByEmail(e,c={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:c.data},headers:this.headers,redirectTo:c.redirectTo,xform:_userResponse})}catch(d){if(isAuthError(d))return{data:{user:null},error:d};throw d}}async generateLink(e){try{const{options:c}=e,d=__rest$2(e,["options"]),h=Object.assign(Object.assign({},d),c);return"newEmail"in d&&(h.new_email=d==null?void 0:d.newEmail,delete h.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:h,headers:this.headers,xform:_generateLinkResponse,redirectTo:c==null?void 0:c.redirectTo})}catch(c){if(isAuthError(c))return{data:{properties:null,user:null},error:c};throw c}}async createUser(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_userResponse})}catch(c){if(isAuthError(c))return{data:{user:null},error:c};throw c}}async listUsers(e){var c,d,h,g,_,_e,et;try{const tt={nextPage:null,lastPage:0,total:0},rt=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(d=(c=e==null?void 0:e.page)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:"",per_page:(g=(h=e==null?void 0:e.perPage)===null||h===void 0?void 0:h.toString())!==null&&g!==void 0?g:""},xform:_noResolveJsonResponse});if(rt.error)throw rt.error;const $=await rt.json(),b=(_=rt.headers.get("x-total-count"))!==null&&_!==void 0?_:0,nt=(et=(_e=rt.headers.get("link"))===null||_e===void 0?void 0:_e.split(","))!==null&&et!==void 0?et:[];return nt.length>0&&(nt.forEach(st=>{const ot=parseInt(st.split(";")[0].split("=")[1].substring(0,1)),it=JSON.parse(st.split(";")[1].split("=")[1]);tt[`${it}Page`]=ot}),tt.total=parseInt(b)),{data:Object.assign(Object.assign({},$),tt),error:null}}catch(tt){if(isAuthError(tt))return{data:{users:[]},error:tt};throw tt}}async getUserById(e){try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_userResponse})}catch(c){if(isAuthError(c))return{data:{user:null},error:c};throw c}}async updateUserById(e,c){try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:c,headers:this.headers,xform:_userResponse})}catch(d){if(isAuthError(d))return{data:{user:null},error:d};throw d}}async deleteUser(e,c=!1){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:c},xform:_userResponse})}catch(d){if(isAuthError(d))return{data:{user:null},error:d};throw d}}async _listFactors(e){try{const{data:c,error:d}=await _request(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:h=>({data:{factors:h},error:null})});return{data:c,error:d}}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}async _deleteFactor(e){try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}}const localStorageAdapter={getItem:a=>supportsLocalStorage()?globalThis.localStorage.getItem(a):null,setItem:(a,e)=>{supportsLocalStorage()&&globalThis.localStorage.setItem(a,e)},removeItem:a=>{supportsLocalStorage()&&globalThis.localStorage.removeItem(a)}};function memoryLocalStorageAdapter(a={}){return{getItem:e=>a[e]||null,setItem:(e,c)=>{a[e]=c},removeItem:e=>{delete a[e]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(a,e,c){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,e);const d=new globalThis.AbortController;return e>0&&setTimeout(()=>{d.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:d.signal},async h=>{if(h){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,h.name);try{return await c()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,h.name)}}else{if(e===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(internals.debug)try{const g=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(g,null,"  "))}catch(g){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",g)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await c()}}))}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lockNoOp(a,e,c){return await c()}class GoTrueClient{constructor(e){var c,d;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser$2()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const h=Object.assign(Object.assign({},DEFAULT_OPTIONS),e);if(this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.persistSession=h.persistSession,this.storageKey=h.storageKey,this.autoRefreshToken=h.autoRefreshToken,this.admin=new GoTrueAdminApi({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=resolveFetch(h.fetch),this.lock=h.lock||lockNoOp,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,h.lock?this.lock=h.lock:isBrowser$2()&&(!((c=globalThis==null?void 0:globalThis.navigator)===null||c===void 0)&&c.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?h.storage?this.storage=h.storage:supportsLocalStorage()?this.storage=localStorageAdapter:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser$2()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(g){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",g)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async g=>{this._debug("received broadcast notification from other tab or client",g),await this._notifyAllSubscribers(g.data.event,g.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const c=parseParametersFromURL(window.location.href);let d="none";if(this._isImplicitGrantCallback(c)?d="implicit":await this._isPKCECallback(c)&&(d="pkce"),isBrowser$2()&&this.detectSessionInUrl&&d!=="none"){const{data:h,error:g}=await this._getSessionFromURL(c,d);if(g){if(this._debug("#_initialize()","error detecting session from URL",g),isAuthImplicitGrantRedirectError(g)){const et=(e=g.details)===null||e===void 0?void 0:e.code;if(et==="identity_already_exists"||et==="identity_not_found"||et==="single_identity_not_deletable")return{error:g}}return await this._removeSession(),{error:g}}const{session:_,redirectType:_e}=h;return this._debug("#_initialize()","detected session in URL",_,"redirect type",_e),await this._saveSession(_),setTimeout(async()=>{_e==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",_):await this._notifyAllSubscribers("SIGNED_IN",_)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(c){return isAuthError(c)?{error:c}:{error:new AuthUnknownError("Unexpected error during initialization",c)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var c,d,h;try{const g=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(d=(c=e==null?void 0:e.options)===null||c===void 0?void 0:c.data)!==null&&d!==void 0?d:{},gotrue_meta_security:{captcha_token:(h=e==null?void 0:e.options)===null||h===void 0?void 0:h.captchaToken}},xform:_sessionResponse}),{data:_,error:_e}=g;if(_e||!_)return{data:{user:null,session:null},error:_e};const et=_.session,tt=_.user;return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",et)),{data:{user:tt,session:et},error:null}}catch(g){if(isAuthError(g))return{data:{user:null,session:null},error:g};throw g}}async signUp(e){var c,d,h;try{let g;if("email"in e){const{email:rt,password:$,options:b}=e;let nt=null,st=null;this.flowType==="pkce"&&([nt,st]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),g=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:rt,password:$,data:(c=b==null?void 0:b.data)!==null&&c!==void 0?c:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:nt,code_challenge_method:st},xform:_sessionResponse})}else if("phone"in e){const{phone:rt,password:$,options:b}=e;g=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:rt,password:$,data:(d=b==null?void 0:b.data)!==null&&d!==void 0?d:{},channel:(h=b==null?void 0:b.channel)!==null&&h!==void 0?h:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:_,error:_e}=g;if(_e||!_)return{data:{user:null,session:null},error:_e};const et=_.session,tt=_.user;return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",et)),{data:{user:tt,session:et},error:null}}catch(g){if(isAuthError(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithPassword(e){try{let c;if("email"in e){const{email:g,password:_,options:_e}=e;c=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:g,password:_,gotrue_meta_security:{captcha_token:_e==null?void 0:_e.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in e){const{phone:g,password:_,options:_e}=e;c=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:g,password:_,gotrue_meta_security:{captcha_token:_e==null?void 0:_e.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:d,error:h}=c;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign({user:d.user,session:d.session},d.weak_password?{weakPassword:d.weak_password}:null),error:h})}catch(c){if(isAuthError(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithOAuth(e){var c,d,h,g;return await this._handleProviderSignIn(e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:(g=e.options)===null||g===void 0?void 0:g.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const c=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[d,h]=(c??"").split("/");try{const{data:g,error:_}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:d},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),_)throw _;return!g||!g.session||!g.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign(Object.assign({},g),{redirectType:h??null}),error:_})}catch(g){if(isAuthError(g))return{data:{user:null,session:null,redirectType:null},error:g};throw g}}async signInWithIdToken(e){try{const{options:c,provider:d,token:h,access_token:g,nonce:_}=e,_e=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:d,id_token:h,access_token:g,nonce:_,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:_sessionResponse}),{data:et,error:tt}=_e;return tt?{data:{user:null,session:null},error:tt}:!et||!et.session||!et.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(et.session&&(await this._saveSession(et.session),await this._notifyAllSubscribers("SIGNED_IN",et.session)),{data:et,error:tt})}catch(c){if(isAuthError(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithOtp(e){var c,d,h,g,_;try{if("email"in e){const{email:_e,options:et}=e;let tt=null,rt=null;this.flowType==="pkce"&&([tt,rt]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:$}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:_e,data:(c=et==null?void 0:et.data)!==null&&c!==void 0?c:{},create_user:(d=et==null?void 0:et.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:et==null?void 0:et.captchaToken},code_challenge:tt,code_challenge_method:rt},redirectTo:et==null?void 0:et.emailRedirectTo});return{data:{user:null,session:null},error:$}}if("phone"in e){const{phone:_e,options:et}=e,{data:tt,error:rt}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:_e,data:(h=et==null?void 0:et.data)!==null&&h!==void 0?h:{},create_user:(g=et==null?void 0:et.shouldCreateUser)!==null&&g!==void 0?g:!0,gotrue_meta_security:{captcha_token:et==null?void 0:et.captchaToken},channel:(_=et==null?void 0:et.channel)!==null&&_!==void 0?_:"sms"}});return{data:{user:null,session:null,messageId:tt==null?void 0:tt.message_id},error:rt}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(_e){if(isAuthError(_e))return{data:{user:null,session:null},error:_e};throw _e}}async verifyOtp(e){var c,d;try{let h,g;"options"in e&&(h=(c=e.options)===null||c===void 0?void 0:c.redirectTo,g=(d=e.options)===null||d===void 0?void 0:d.captchaToken);const{data:_,error:_e}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:g}}),redirectTo:h,xform:_sessionResponse});if(_e)throw _e;if(!_)throw new Error("An error occurred on token verification.");const et=_.session,tt=_.user;return et!=null&&et.access_token&&(await this._saveSession(et),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",et)),{data:{user:tt,session:et},error:null}}catch(h){if(isAuthError(h))return{data:{user:null,session:null},error:h};throw h}}async signInWithSSO(e){var c,d,h;try{let g=null,_=null;return this.flowType==="pkce"&&([g,_]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(d=(c=e.options)===null||c===void 0?void 0:c.redirectTo)!==null&&d!==void 0?d:void 0}),!((h=e==null?void 0:e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:_}),headers:this.headers,xform:_ssoResponse})}catch(g){if(isAuthError(g))return{data:null,error:g};throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:c},error:d}=e;if(d)throw d;if(!c)throw new AuthSessionMissingError;const{error:h}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:c.access_token});return{data:{user:null,session:null},error:h}})}catch(e){if(isAuthError(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const c=`${this.url}/resend`;if("email"in e){const{email:d,type:h,options:g}=e,{error:_}=await _request(this.fetch,"POST",c,{headers:this.headers,body:{email:d,type:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:_}}else if("phone"in e){const{phone:d,type:h,options:g}=e,{data:_,error:_e}=await _request(this.fetch,"POST",c,{headers:this.headers,body:{phone:d,type:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}}});return{data:{user:null,session:null,messageId:_==null?void 0:_.message_id},error:_e}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(c){if(isAuthError(c))return{data:{user:null,session:null},error:c};throw c}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async c=>c))}async _acquireLock(e,c){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const d=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),h=(async()=>(await d,await c()))();return this.pendingInLock.push((async()=>{try{await h}catch{}})()),h}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const d=c();for(this.pendingInLock.push((async()=>{try{await d}catch{}})()),await d;this.pendingInLock.length;){const h=[...this.pendingInLock];await Promise.all(h),this.pendingInLock.splice(0,h.length)}return await d}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const c=await this.__loadSession();return await e(c)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const c=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",c),c!==null&&(this._isValidSession(c)?e=c:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const d=e.expires_at?e.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${d?"":" not"} expired`,"expires_at",e.expires_at),!d){if(this.storage.isServer){let _=this.suppressGetSessionWarning;e=new Proxy(e,{get:(et,tt,rt)=>(!_&&tt==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),_=!0,this.suppressGetSessionWarning=!0),Reflect.get(et,tt,rt))})}return{data:{session:e},error:null}}const{session:h,error:g}=await this._callRefreshToken(e.refresh_token);return g?{data:{session:null},error:g}:{data:{session:h},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_userResponse}):await this._useSession(async c=>{var d,h,g;const{data:_,error:_e}=c;if(_e)throw _e;return!(!((d=_.session)===null||d===void 0)&&d.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(g=(h=_.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0,xform:_userResponse})})}catch(c){if(isAuthError(c))return isAuthSessionMissingError(c)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:c};throw c}}async updateUser(e,c={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,c))}async _updateUser(e,c={}){try{return await this._useSession(async d=>{const{data:h,error:g}=d;if(g)throw g;if(!h.session)throw new AuthSessionMissingError;const _=h.session;let _e=null,et=null;this.flowType==="pkce"&&e.email!=null&&([_e,et]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:tt,error:rt}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:c==null?void 0:c.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:_e,code_challenge_method:et}),jwt:_.access_token,xform:_userResponse});if(rt)throw rt;return _.user=tt.user,await this._saveSession(_),await this._notifyAllSubscribers("USER_UPDATED",_),{data:{user:_.user},error:null}})}catch(d){if(isAuthError(d))return{data:{user:null},error:d};throw d}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new AuthSessionMissingError;const c=Date.now()/1e3;let d=c,h=!0,g=null;const{payload:_}=decodeJWT(e.access_token);if(_.exp&&(d=_.exp,h=d<=c),h){const{session:_e,error:et}=await this._callRefreshToken(e.refresh_token);if(et)return{data:{user:null,session:null},error:et};if(!_e)return{data:{user:null,session:null},error:null};g=_e}else{const{data:_e,error:et}=await this._getUser(e.access_token);if(et)throw et;g={access_token:e.access_token,refresh_token:e.refresh_token,user:_e.user,token_type:"bearer",expires_in:d-c,expires_at:d},await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)}return{data:{user:g.user,session:g},error:null}}catch(c){if(isAuthError(c))return{data:{session:null,user:null},error:c};throw c}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async c=>{var d;if(!e){const{data:_,error:_e}=c;if(_e)throw _e;e=(d=_.session)!==null&&d!==void 0?d:void 0}if(!(e!=null&&e.refresh_token))throw new AuthSessionMissingError;const{session:h,error:g}=await this._callRefreshToken(e.refresh_token);return g?{data:{user:null,session:null},error:g}:h?{data:{user:h.user,session:h},error:null}:{data:{user:null,session:null},error:null}})}catch(c){if(isAuthError(c))return{data:{user:null,session:null},error:c};throw c}}async _getSessionFromURL(e,c){try{if(!isBrowser$2())throw new AuthImplicitGrantRedirectError("No browser detected.");if(e.error||e.error_description||e.error_code)throw new AuthImplicitGrantRedirectError(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(c){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(c==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:lt,error:dt}=await this._exchangeCodeForSession(e.code);if(dt)throw dt;const ht=new URL(window.location.href);return ht.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ht.toString()),{data:{session:lt.session,redirectType:null},error:null}}const{provider_token:d,provider_refresh_token:h,access_token:g,refresh_token:_,expires_in:_e,expires_at:et,token_type:tt}=e;if(!g||!_e||!_||!tt)throw new AuthImplicitGrantRedirectError("No session defined in URL");const rt=Math.round(Date.now()/1e3),$=parseInt(_e);let b=rt+$;et&&(b=parseInt(et));const nt=b-rt;nt*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${nt}s, should have been closer to ${$}s`);const st=b-$;rt-st>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",st,b,rt):rt-st<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",st,b,rt);const{data:ot,error:it}=await this._getUser(g);if(it)throw it;const at={provider_token:d,provider_refresh_token:h,access_token:g,expires_in:$,expires_at:b,refresh_token:_,token_type:tt,user:ot.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:at,redirectType:e.type},error:null}}catch(d){if(isAuthError(d))return{data:{session:null,redirectType:null},error:d};throw d}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const c=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&c)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async c=>{var d;const{data:h,error:g}=c;if(g)return{error:g};const _=(d=h.session)===null||d===void 0?void 0:d.access_token;if(_){const{error:_e}=await this.admin.signOut(_,e);if(_e&&!(isAuthApiError(_e)&&(_e.status===404||_e.status===401||_e.status===403)))return{error:_e}}return e!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const c=uuid(),d={id:c,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",c),this.stateChangeEmitters.delete(c)}};return this._debug("#onAuthStateChange()","registered callback with id",c),this.stateChangeEmitters.set(c,d),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(c)})))(),{data:{subscription:d}}}async _emitInitialSession(e){return await this._useSession(async c=>{var d,h;try{const{data:{session:g},error:_}=c;if(_)throw _;await((d=this.stateChangeEmitters.get(e))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",g)),this._debug("INITIAL_SESSION","callback id",e,"session",g)}catch(g){await((h=this.stateChangeEmitters.get(e))===null||h===void 0?void 0:h.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",g),console.error(g)}})}async resetPasswordForEmail(e,c={}){let d=null,h=null;this.flowType==="pkce"&&([d,h]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:d,code_challenge_method:h,gotrue_meta_security:{captcha_token:c.captchaToken}},headers:this.headers,redirectTo:c.redirectTo})}catch(g){if(isAuthError(g))return{data:null,error:g};throw g}}async getUserIdentities(){var e;try{const{data:c,error:d}=await this.getUser();if(d)throw d;return{data:{identities:(e=c.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}async linkIdentity(e){var c;try{const{data:d,error:h}=await this._useSession(async g=>{var _,_e,et,tt,rt;const{data:$,error:b}=g;if(b)throw b;const nt=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(_=e.options)===null||_===void 0?void 0:_.redirectTo,scopes:(_e=e.options)===null||_e===void 0?void 0:_e.scopes,queryParams:(et=e.options)===null||et===void 0?void 0:et.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",nt,{headers:this.headers,jwt:(rt=(tt=$.session)===null||tt===void 0?void 0:tt.access_token)!==null&&rt!==void 0?rt:void 0})});if(h)throw h;return isBrowser$2()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(d==null?void 0:d.url),{data:{provider:e.provider,url:d==null?void 0:d.url},error:null}}catch(d){if(isAuthError(d))return{data:{provider:e.provider,url:null},error:d};throw d}}async unlinkIdentity(e){try{return await this._useSession(async c=>{var d,h;const{data:g,error:_}=c;if(_)throw _;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(h=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})})}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}async _refreshAccessToken(e){const c=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(c,"begin");try{const d=Date.now();return await retryable(async h=>(h>0&&await sleep(200*Math.pow(2,h-1)),this._debug(c,"refreshing attempt",h),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_sessionResponse})),(h,g)=>{const _=200*Math.pow(2,h);return g&&isAuthRetryableFetchError(g)&&Date.now()+_-d<AUTO_REFRESH_TICK_DURATION_MS})}catch(d){if(this._debug(c,"error",d),isAuthError(d))return{data:{session:null,user:null},error:d};throw d}finally{this._debug(c,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,c){const d=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:c.redirectTo,scopes:c.scopes,queryParams:c.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",c,"url",d),isBrowser$2()&&!c.skipBrowserRedirect&&window.location.assign(d),{data:{provider:e,url:d},error:null}}async _recoverAndRefresh(){var e;const c="#_recoverAndRefresh()";this._debug(c,"begin");try{const d=await getItemAsync(this.storage,this.storageKey);if(this._debug(c,"session from storage",d),!this._isValidSession(d)){this._debug(c,"session is not valid"),d!==null&&await this._removeSession();return}const h=((e=d.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(c,`session has${h?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),h){if(this.autoRefreshToken&&d.refresh_token){const{error:g}=await this._callRefreshToken(d.refresh_token);g&&(console.error(g),isAuthRetryableFetchError(g)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",g),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(c,"error",d),console.error(d);return}finally{this._debug(c,"end")}}async _callRefreshToken(e){var c,d;if(!e)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const h=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(h,"begin");try{this.refreshingDeferred=new Deferred;const{data:g,error:_}=await this._refreshAccessToken(e);if(_)throw _;if(!g.session)throw new AuthSessionMissingError;await this._saveSession(g.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",g.session);const _e={session:g.session,error:null};return this.refreshingDeferred.resolve(_e),_e}catch(g){if(this._debug(h,"error",g),isAuthError(g)){const _={session:null,error:g};return isAuthRetryableFetchError(g)||await this._removeSession(),(c=this.refreshingDeferred)===null||c===void 0||c.resolve(_),_}throw(d=this.refreshingDeferred)===null||d===void 0||d.reject(g),g}finally{this.refreshingDeferred=null,this._debug(h,"end")}}async _notifyAllSubscribers(e,c,d=!0){const h=`#_notifyAllSubscribers(${e})`;this._debug(h,"begin",c,`broadcast = ${d}`);try{this.broadcastChannel&&d&&this.broadcastChannel.postMessage({event:e,session:c});const g=[],_=Array.from(this.stateChangeEmitters.values()).map(async _e=>{try{await _e.callback(e,c)}catch(et){g.push(et)}});if(await Promise.all(_),g.length>0){for(let _e=0;_e<g.length;_e+=1)console.error(g[_e]);throw g[0]}}finally{this._debug(h,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await setItemAsync(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser$2()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(c){console.error("removing visibilitychange callback failed",c)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async c=>{const{data:{session:d}}=c;if(!d||!d.refresh_token||!d.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const h=Math.floor((d.expires_at*1e3-e)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${h} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),h<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(d.refresh_token)})}catch(c){console.error("Auto refresh tick failed with error. This is likely a transient error.",c)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser$2()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const c=`#_onVisibilityChanged(${e})`;this._debug(c,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(c,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,c,d){const h=[`provider=${encodeURIComponent(c)}`];if(d!=null&&d.redirectTo&&h.push(`redirect_to=${encodeURIComponent(d.redirectTo)}`),d!=null&&d.scopes&&h.push(`scopes=${encodeURIComponent(d.scopes)}`),this.flowType==="pkce"){const[g,_]=await getCodeChallengeAndMethod(this.storage,this.storageKey),_e=new URLSearchParams({code_challenge:`${encodeURIComponent(g)}`,code_challenge_method:`${encodeURIComponent(_)}`});h.push(_e.toString())}if(d!=null&&d.queryParams){const g=new URLSearchParams(d.queryParams);h.push(g.toString())}return d!=null&&d.skipBrowserRedirect&&h.push(`skip_http_redirect=${d.skipBrowserRedirect}`),`${e}?${h.join("&")}`}async _unenroll(e){try{return await this._useSession(async c=>{var d;const{data:h,error:g}=c;return g?{data:null,error:g}:await _request(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(d=h==null?void 0:h.session)===null||d===void 0?void 0:d.access_token})})}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}async _enroll(e){try{return await this._useSession(async c=>{var d,h;const{data:g,error:_}=c;if(_)return{data:null,error:_};const _e=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:et,error:tt}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:_e,headers:this.headers,jwt:(d=g==null?void 0:g.session)===null||d===void 0?void 0:d.access_token});return tt?{data:null,error:tt}:(e.factorType==="totp"&&(!((h=et==null?void 0:et.totp)===null||h===void 0)&&h.qr_code)&&(et.totp.qr_code=`data:image/svg+xml;utf-8,${et.totp.qr_code}`),{data:et,error:null})})}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async c=>{var d;const{data:h,error:g}=c;if(g)return{data:null,error:g};const{data:_,error:_e}=await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(d=h==null?void 0:h.session)===null||d===void 0?void 0:d.access_token});return _e?{data:null,error:_e}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+_.expires_in},_)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",_),{data:_,error:_e})})}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async c=>{var d;const{data:h,error:g}=c;return g?{data:null,error:g}:await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(d=h==null?void 0:h.session)===null||d===void 0?void 0:d.access_token})})}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}})}async _challengeAndVerify(e){const{data:c,error:d}=await this._challenge({factorId:e.factorId});return d?{data:null,error:d}:await this._verify({factorId:e.factorId,challengeId:c.id,code:e.code})}async _listFactors(){const{data:{user:e},error:c}=await this.getUser();if(c)return{data:null,error:c};const d=(e==null?void 0:e.factors)||[],h=d.filter(_=>_.factor_type==="totp"&&_.status==="verified"),g=d.filter(_=>_.factor_type==="phone"&&_.status==="verified");return{data:{all:d,totp:h,phone:g},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var c,d;const{data:{session:h},error:g}=e;if(g)return{data:null,error:g};if(!h)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:_}=decodeJWT(h.access_token);let _e=null;_.aal&&(_e=_.aal);let et=_e;((d=(c=h.user.factors)===null||c===void 0?void 0:c.filter($=>$.status==="verified"))!==null&&d!==void 0?d:[]).length>0&&(et="aal2");const rt=_.amr||[];return{data:{currentLevel:_e,nextLevel:et,currentAuthenticationMethods:rt},error:null}}))}async fetchJwk(e,c={keys:[]}){let d=c.keys.find(_=>_.kid===e);if(d||(d=this.jwks.keys.find(_=>_.kid===e),d&&this.jwks_cached_at+JWKS_TTL>Date.now()))return d;const{data:h,error:g}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(g)throw g;if(!h.keys||h.keys.length===0)throw new AuthInvalidJwtError("JWKS is empty");if(this.jwks=h,this.jwks_cached_at=Date.now(),d=h.keys.find(_=>_.kid===e),!d)throw new AuthInvalidJwtError("No matching signing key found in JWKS");return d}async getClaims(e,c={keys:[]}){try{let d=e;if(!d){const{data:nt,error:st}=await this.getSession();if(st||!nt.session)return{data:null,error:st};d=nt.session.access_token}const{header:h,payload:g,signature:_,raw:{header:_e,payload:et}}=decodeJWT(d);if(validateExp(g.exp),!h.kid||h.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:nt}=await this.getUser(d);if(nt)throw nt;return{data:{claims:g,header:h,signature:_},error:null}}const tt=getAlgorithm(h.alg),rt=await this.fetchJwk(h.kid,c),$=await crypto.subtle.importKey("jwk",rt,tt,!0,["verify"]);if(!await crypto.subtle.verify(tt,$,_,stringToUint8Array(`${_e}.${et}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:g,header:h,signature:_},error:null}}catch(d){if(isAuthError(d))return{data:null,error:d};throw d}}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(e){super(e)}}var __awaiter=function(a,e,c,d){function h(g){return g instanceof c?g:new c(function(_){_(g)})}return new(c||(c=Promise))(function(g,_){function _e(rt){try{tt(d.next(rt))}catch($){_($)}}function et(rt){try{tt(d.throw(rt))}catch($){_($)}}function tt(rt){rt.done?g(rt.value):h(rt.value).then(_e,et)}tt((d=d.apply(a,e||[])).next())})};class SupabaseClient{constructor(e,c,d){var h,g,_;if(this.supabaseUrl=e,this.supabaseKey=c,!e)throw new Error("supabaseUrl is required.");if(!c)throw new Error("supabaseKey is required.");const _e=stripTrailingSlash(e);this.realtimeUrl=`${_e}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_e}/auth/v1`,this.storageUrl=`${_e}/storage/v1`,this.functionsUrl=`${_e}/functions/v1`;const et=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,tt={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:et}),global:DEFAULT_GLOBAL_OPTIONS},rt=applySettingDefaults(d??{},tt);this.storageKey=(h=rt.auth.storageKey)!==null&&h!==void 0?h:"",this.headers=(g=rt.global.headers)!==null&&g!==void 0?g:{},rt.accessToken?(this.accessToken=rt.accessToken,this.auth=new Proxy({},{get:($,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((_=rt.auth)!==null&&_!==void 0?_:{},this.headers,rt.global.fetch),this.fetch=fetchWithAuth(c,this._getAccessToken.bind(this),rt.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},rt.realtime)),this.rest=new PostgrestClient(`${_e}/rest/v1`,{headers:this.headers,schema:rt.db.schema,fetch:this.fetch}),rt.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new StorageClient(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,c={},d={}){return this.rest.rpc(e,c,d)}channel(e,c={config:{}}){return this.realtime.channel(e,c)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,c;return __awaiter(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:d}=yield this.auth.getSession();return(c=(e=d.session)===null||e===void 0?void 0:e.access_token)!==null&&c!==void 0?c:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:c,detectSessionInUrl:d,storage:h,storageKey:g,flowType:_,lock:_e,debug:et},tt,rt){const $={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl,headers:Object.assign(Object.assign({},$),tt),storageKey:g,autoRefreshToken:e,persistSession:c,detectSessionInUrl:d,storage:h,flowType:_,lock:_e,debug:et,fetch:rt,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new RealtimeClient(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((c,d)=>{this._handleTokenChanged(c,"CLIENT",d==null?void 0:d.access_token)})}_handleTokenChanged(e,c,d){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==d?this.changedAccessToken=d:e==="SIGNED_OUT"&&(this.realtime.setAuth(),c=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(a,e,c)=>new SupabaseClient(a,e,c);console.error("Missing Supabase environment variables");const supabase$1=createClient("",""),supabase=supabase$1,AuthContext=reactExports.createContext(void 0),AuthProvider=({children:a})=>{const[e,c]=reactExports.useState(null),[d,h]=reactExports.useState(null),[g,_]=reactExports.useState(!0),_e=useNavigate();reactExports.useEffect(()=>{(async()=>{var st;try{const{data:ot}=await supabase.auth.getSession();h(ot.session),c(((st=ot.session)==null?void 0:st.user)||null)}catch(ot){console.error("Error getting session:",ot)}finally{_(!1)}})();const{data:{subscription:nt}}=supabase.auth.onAuthStateChange((st,ot)=>{h(ot),c((ot==null?void 0:ot.user)||null),_(!1)});return()=>{nt.unsubscribe()}},[]);const et=async(b,nt)=>{_(!0);try{const{data:st,error:ot}=await supabase.auth.signInWithPassword({email:b,password:nt});if(ot)throw console.error("Sign in error:",ot),ot;toast({title:"Welcome back!",description:"You have been successfully signed in."}),_e("/")}catch(st){console.error("Sign in error details:",st),toast({variant:"destructive",title:"Error signing in",description:st.message||"An unexpected error occurred"})}finally{_(!1)}},tt=async(b,nt,st,ot)=>{_(!0);try{const{data:it,error:at}=await supabase.auth.signUp({email:b,password:nt,options:{data:{first_name:st,last_name:ot},emailRedirectTo:`${window.location.origin}/auth/callback`}});if(at)throw console.error("Signup error:",at),at;if(it.user)try{const{error:lt}=await supabase.from("profiles").upsert({id:it.user.id,first_name:st,last_name:ot,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),avatar_url:null});if(lt)throw console.error("Error creating profile:",lt),new Error(lt.message||"Failed to save profile information.");toast({title:"Account created successfully!",description:"Please check your email for verification instructions."}),_e("/")}catch(lt){throw console.error("Exception during profile creation/saving:",lt),lt}else throw new Error("Failed to create user account (no user data returned from auth).")}catch(it){console.error("Sign up process error:",it),toast({variant:"destructive",title:"Error creating account",description:it.message||"An unexpected error occurred"})}finally{_(!1)}},rt=async()=>{try{_(!0),console.log("Current URL:",window.location.href),console.log("Current origin:",window.location.origin);const b=`${window.location.origin}/auth/callback`;console.log("Redirect URL:",b);const{data:nt,error:st}=await supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:b,scopes:"email profile"}});if(st)throw console.error("OAuth error:",st),st;return nt}catch(b){throw console.error("Google sign-in error:",b),_(!1),b}},$=async()=>{_(!0);try{const{error:b}=await supabase.auth.signOut();if(b)throw b;toast({title:"Signed out",description:"You have been successfully signed out."}),_e("/")}catch(b){toast({variant:"destructive",title:"Error signing out",description:(b==null?void 0:b.message)||"An unexpected error occurred"})}finally{_(!1)}};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:e,session:d,isLoading:g,signIn:et,signUp:tt,signOut:$,signInWithGoogle:rt},children:a})},useAuth=()=>{const a=reactExports.useContext(AuthContext);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},getProductById=async a=>{const{data:e,error:c}=await supabase.from("products").select("*").eq("id",a).single();return c?(console.error("Error fetching product:",c),null):e},USER_UPLOADS_BUCKET="user-uploads",getProductImageUrl=a=>a?a.startsWith("http")||a.startsWith("/")?a:(console.error("Supabase URL not found in environment variables"),"/images/placeholder-cake.jpg"):"/images/placeholder-cake.jpg",uploadProductImage=async(a,e)=>{try{const c=new Date().getTime(),d=Math.random().toString(36).substring(2,10),h=`user/${c}-${d}-${e.replace(/\s+/g,"-")}`;console.log(`Attempting to upload file to ${USER_UPLOADS_BUCKET}/${h}`);const{data:g,error:_}=await supabase.storage.from(USER_UPLOADS_BUCKET).upload(h,a,{cacheControl:"3600",upsert:!0});if(_){if(console.error("Error uploading image:",_),_.message.includes("Permission denied")||_.message.includes("violates row-level security policy")){console.log("Attempting alternative upload method with signed URL...");try{const{data:_e,error:et}=await supabase.storage.from(USER_UPLOADS_BUCKET).createSignedUploadUrl(h);if(et)return console.error("Error creating signed URL:",et),null;const{path:tt,signedUrl:rt}=_e,$=await fetch(rt,{method:"PUT",headers:{"Content-Type":a.type},body:a});if(!$.ok)throw new Error(`Upload failed with status: ${$.status}`);return console.log("Upload successful using signed URL:",tt),tt}catch(_e){console.error("Error with signed URL upload:",_e);try{return await convertFileToDataUrl(a)}catch(et){return console.error("Failed to create data URL:",et),null}}}return null}return console.log("Upload successful:",g),g.path}catch(c){return console.error("Error uploading image:",c),null}},convertFileToDataUrl=a=>new Promise((e,c)=>{const d=new FileReader;d.onload=()=>{typeof d.result=="string"?e(d.result):c(new Error("Failed to convert file to data URL"))},d.onerror=()=>{c(d.error||new Error("Unknown error occurred during file reading"))},d.readAsDataURL(a)}),buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:a,variant:e,size:c,asChild:d=!1,...h},g)=>{const _=d?Slot:"button";return jsxRuntimeExports.jsx(_,{className:cn(buttonVariants({variant:e,size:c,className:a})),ref:g,...h})});Button.displayName="Button";var DirectionContext=reactExports.createContext(void 0);function useDirection(a){const e=reactExports.useContext(DirectionContext);return a||e||"ltr"}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",a[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),count--}},[])}function createFocusGuard(){const a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((a,e)=>{const{loop:c=!1,trapped:d=!1,onMountAutoFocus:h,onUnmountAutoFocus:g,..._}=a,[_e,et]=reactExports.useState(null),tt=useCallbackRef$1(h),rt=useCallbackRef$1(g),$=reactExports.useRef(null),b=useComposedRefs(e,ot=>et(ot)),nt=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(d){let ot=function(dt){if(nt.paused||!_e)return;const ht=dt.target;_e.contains(ht)?$.current=ht:focus($.current,{select:!0})},it=function(dt){if(nt.paused||!_e)return;const ht=dt.relatedTarget;ht!==null&&(_e.contains(ht)||focus($.current,{select:!0}))},at=function(dt){if(document.activeElement===document.body)for(const pt of dt)pt.removedNodes.length>0&&focus(_e)};document.addEventListener("focusin",ot),document.addEventListener("focusout",it);const lt=new MutationObserver(at);return _e&&lt.observe(_e,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",ot),document.removeEventListener("focusout",it),lt.disconnect()}}},[d,_e,nt.paused]),reactExports.useEffect(()=>{if(_e){focusScopesStack.add(nt);const ot=document.activeElement;if(!_e.contains(ot)){const at=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);_e.addEventListener(AUTOFOCUS_ON_MOUNT,tt),_e.dispatchEvent(at),at.defaultPrevented||(focusFirst$2(removeLinks(getTabbableCandidates(_e)),{select:!0}),document.activeElement===ot&&focus(_e))}return()=>{_e.removeEventListener(AUTOFOCUS_ON_MOUNT,tt),setTimeout(()=>{const at=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);_e.addEventListener(AUTOFOCUS_ON_UNMOUNT,rt),_e.dispatchEvent(at),at.defaultPrevented||focus(ot??document.body,{select:!0}),_e.removeEventListener(AUTOFOCUS_ON_UNMOUNT,rt),focusScopesStack.remove(nt)},0)}}},[_e,tt,rt,nt]);const st=reactExports.useCallback(ot=>{if(!c&&!d||nt.paused)return;const it=ot.key==="Tab"&&!ot.altKey&&!ot.ctrlKey&&!ot.metaKey,at=document.activeElement;if(it&&at){const lt=ot.currentTarget,[dt,ht]=getTabbableEdges(lt);dt&&ht?!ot.shiftKey&&at===ht?(ot.preventDefault(),c&&focus(dt,{select:!0})):ot.shiftKey&&at===dt&&(ot.preventDefault(),c&&focus(ht,{select:!0})):at===lt&&ot.preventDefault()}},[c,d,nt.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,..._,ref:b,onKeyDown:st})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$2(a,{select:e=!1}={}){const c=document.activeElement;for(const d of a)if(focus(d,{select:e}),document.activeElement!==c)return}function getTabbableEdges(a){const e=getTabbableCandidates(a),c=findVisible(e,a),d=findVisible(e.reverse(),a);return[c,d]}function getTabbableCandidates(a){const e=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:d=>{const h=d.tagName==="INPUT"&&d.type==="hidden";return d.disabled||d.hidden||h?NodeFilter.FILTER_SKIP:d.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)e.push(c.currentNode);return e}function findVisible(a,e){for(const c of a)if(!isHidden(c,{upTo:e}))return c}function isHidden(a,{upTo:e}){if(getComputedStyle(a).visibility==="hidden")return!0;for(;a;){if(e!==void 0&&a===e)return!1;if(getComputedStyle(a).display==="none")return!0;a=a.parentElement}return!1}function isSelectableInput(a){return a instanceof HTMLInputElement&&"select"in a}function focus(a,{select:e=!1}={}){if(a&&a.focus){const c=document.activeElement;a.focus({preventScroll:!0}),a!==c&&isSelectableInput(a)&&e&&a.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let a=[];return{add(e){const c=a[0];e!==c&&(c==null||c.pause()),a=arrayRemove(a,e),a.unshift(e)},remove(e){var c;a=arrayRemove(a,e),(c=a[0])==null||c.resume()}}}function arrayRemove(a,e){const c=[...a],d=c.indexOf(e);return d!==-1&&c.splice(d,1),c}function removeLinks(a){return a.filter(e=>e.tagName!=="A")}function createContextScope(a,e=[]){let c=[];function d(g,_){const _e=reactExports.createContext(_),et=c.length;c=[...c,_];function tt($){const{scope:b,children:nt,...st}=$,ot=(b==null?void 0:b[a][et])||_e,it=reactExports.useMemo(()=>st,Object.values(st));return jsxRuntimeExports.jsx(ot.Provider,{value:it,children:nt})}function rt($,b){const nt=(b==null?void 0:b[a][et])||_e,st=reactExports.useContext(nt);if(st)return st;if(_!==void 0)return _;throw new Error(`\`${$}\` must be used within \`${g}\``)}return tt.displayName=g+"Provider",[tt,rt]}const h=()=>{const g=c.map(_=>reactExports.createContext(_));return function(_e){const et=(_e==null?void 0:_e[a])||g;return reactExports.useMemo(()=>({[`__scope${a}`]:{..._e,[a]:et}}),[_e,et])}};return h.scopeName=a,[d,composeContextScopes(h,...e)]}function composeContextScopes(...a){const e=a[0];if(a.length===1)return e;const c=()=>{const d=a.map(h=>({useScope:h(),scopeName:h.scopeName}));return function(g){const _=d.reduce((_e,{useScope:et,scopeName:tt})=>{const $=et(g)[`__scope${tt}`];return{..._e,...$}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:_}),[_])}};return c.scopeName=e.scopeName,c}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$3="RovingFocusGroup",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(GROUP_NAME$3),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$3,[createCollectionScope$2]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$3),RovingFocusGroup=reactExports.forwardRef((a,e)=>jsxRuntimeExports.jsx(Collection$2.Provider,{scope:a.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:a.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{...a,ref:e})})}));RovingFocusGroup.displayName=GROUP_NAME$3;var RovingFocusGroupImpl=reactExports.forwardRef((a,e)=>{const{__scopeRovingFocusGroup:c,orientation:d,loop:h=!1,dir:g,currentTabStopId:_,defaultCurrentTabStopId:_e,onCurrentTabStopIdChange:et,onEntryFocus:tt,preventScrollOnEntryFocus:rt=!1,...$}=a,b=reactExports.useRef(null),nt=useComposedRefs(e,b),st=useDirection(g),[ot=null,it]=useControllableState({prop:_,defaultProp:_e,onChange:et}),[at,lt]=reactExports.useState(!1),dt=useCallbackRef$1(tt),ht=useCollection$2(c),pt=reactExports.useRef(!1),[mt,yt]=reactExports.useState(0);return reactExports.useEffect(()=>{const xt=b.current;if(xt)return xt.addEventListener(ENTRY_FOCUS,dt),()=>xt.removeEventListener(ENTRY_FOCUS,dt)},[dt]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:c,orientation:d,dir:st,loop:h,currentTabStopId:ot,onItemFocus:reactExports.useCallback(xt=>it(xt),[it]),onItemShiftTab:reactExports.useCallback(()=>lt(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>yt(xt=>xt+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>yt(xt=>xt-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:at||mt===0?-1:0,"data-orientation":d,...$,ref:nt,style:{outline:"none",...a.style},onMouseDown:composeEventHandlers(a.onMouseDown,()=>{pt.current=!0}),onFocus:composeEventHandlers(a.onFocus,xt=>{const gt=!pt.current;if(xt.target===xt.currentTarget&&gt&&!at){const bt=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(xt.currentTarget.dispatchEvent(bt),!bt.defaultPrevented){const jt=ht().filter(wt=>wt.focusable),Mt=jt.find(wt=>wt.active),Pt=jt.find(wt=>wt.id===ot),St=[Mt,Pt,...jt].filter(Boolean).map(wt=>wt.ref.current);focusFirst$1(St,rt)}}pt.current=!1}),onBlur:composeEventHandlers(a.onBlur,()=>lt(!1))})})}),ITEM_NAME$4="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((a,e)=>{const{__scopeRovingFocusGroup:c,focusable:d=!0,active:h=!1,tabStopId:g,..._}=a,_e=useId(),et=g||_e,tt=useRovingFocusContext(ITEM_NAME$4,c),rt=tt.currentTabStopId===et,$=useCollection$2(c),{onFocusableItemAdd:b,onFocusableItemRemove:nt}=tt;return reactExports.useEffect(()=>{if(d)return b(),()=>nt()},[d,b,nt]),jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:c,id:et,focusable:d,active:h,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:rt?0:-1,"data-orientation":tt.orientation,..._,ref:e,onMouseDown:composeEventHandlers(a.onMouseDown,st=>{d?tt.onItemFocus(et):st.preventDefault()}),onFocus:composeEventHandlers(a.onFocus,()=>tt.onItemFocus(et)),onKeyDown:composeEventHandlers(a.onKeyDown,st=>{if(st.key==="Tab"&&st.shiftKey){tt.onItemShiftTab();return}if(st.target!==st.currentTarget)return;const ot=getFocusIntent(st,tt.orientation,tt.dir);if(ot!==void 0){if(st.metaKey||st.ctrlKey||st.altKey||st.shiftKey)return;st.preventDefault();let at=$().filter(lt=>lt.focusable).map(lt=>lt.ref.current);if(ot==="last")at.reverse();else if(ot==="prev"||ot==="next"){ot==="prev"&&at.reverse();const lt=at.indexOf(st.currentTarget);at=tt.loop?wrapArray$2(at,lt+1):at.slice(lt+1)}setTimeout(()=>focusFirst$1(at))}})})})});RovingFocusGroupItem.displayName=ITEM_NAME$4;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(a,e){return e!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function getFocusIntent(a,e,c){const d=getDirectionAwareKey(a.key,c);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(d))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(d)))return MAP_KEY_TO_FOCUS_INTENT[d]}function focusFirst$1(a,e=!1){const c=document.activeElement;for(const d of a)if(d===c||(d.focus({preventScroll:e}),document.activeElement!==c))return}function wrapArray$2(a,e){return a.map((c,d)=>a[(e+d)%a.length])}var Root$5=RovingFocusGroup,Item$1=RovingFocusGroupItem,getDefaultParent=function(a){if(typeof document>"u")return null;var e=Array.isArray(a)?a[0]:a;return e.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(a){return a&&(a.host||unwrapHost(a.parentNode))},correctTargets=function(a,e){return e.map(function(c){if(a.contains(c))return c;var d=unwrapHost(c);return d&&a.contains(d)?d:(console.error("aria-hidden",c,"in not contained inside",a,". Doing nothing"),null)}).filter(function(c){return!!c})},applyAttributeToOthers=function(a,e,c,d){var h=correctTargets(e,Array.isArray(a)?a:[a]);markerMap[c]||(markerMap[c]=new WeakMap);var g=markerMap[c],_=[],_e=new Set,et=new Set(h),tt=function($){!$||_e.has($)||(_e.add($),tt($.parentNode))};h.forEach(tt);var rt=function($){!$||et.has($)||Array.prototype.forEach.call($.children,function(b){if(_e.has(b))rt(b);else try{var nt=b.getAttribute(d),st=nt!==null&&nt!=="false",ot=(counterMap.get(b)||0)+1,it=(g.get(b)||0)+1;counterMap.set(b,ot),g.set(b,it),_.push(b),ot===1&&st&&uncontrolledNodes.set(b,!0),it===1&&b.setAttribute(c,"true"),st||b.setAttribute(d,"true")}catch(at){console.error("aria-hidden: cannot operate on ",b,at)}})};return rt(e),_e.clear(),lockCount++,function(){_.forEach(function($){var b=counterMap.get($)-1,nt=g.get($)-1;counterMap.set($,b),g.set($,nt),b||(uncontrolledNodes.has($)||$.removeAttribute(d),uncontrolledNodes.delete($)),nt||$.removeAttribute(c)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(a,e,c){c===void 0&&(c="data-aria-hidden");var d=Array.from(Array.isArray(a)?a:[a]),h=getDefaultParent(a);return h?(d.push.apply(d,Array.from(h.querySelectorAll("[aria-live]"))),applyAttributeToOthers(d,h,c,"aria-hidden")):function(){return null}},__assign$1=function(){return __assign$1=Object.assign||function(e){for(var c,d=1,h=arguments.length;d<h;d++){c=arguments[d];for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(e[g]=c[g])}return e},__assign$1.apply(this,arguments)};function __rest(a,e){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&e.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(a);h<d.length;h++)e.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(a,d[h])&&(c[d[h]]=a[d[h]]);return c}function __spreadArray$1(a,e,c){if(c||arguments.length===2)for(var d=0,h=e.length,g;d<h;d++)(g||!(d in e))&&(g||(g=Array.prototype.slice.call(e,0,d)),g[d]=e[d]);return a.concat(g||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(a,e){return typeof a=="function"?a(e):a&&(a.current=e),a}function useCallbackRef(a,e){var c=reactExports.useState(function(){return{value:a,callback:e,facade:{get current(){return c.value},set current(d){var h=c.value;h!==d&&(c.value=d,c.callback(d,h))}}}})[0];return c.callback=e,c.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(a,e){var c=useCallbackRef(null,function(d){return a.forEach(function(h){return assignRef(h,d)})});return useIsomorphicLayoutEffect(function(){var d=currentValues.get(c);if(d){var h=new Set(d),g=new Set(a),_=c.current;h.forEach(function(_e){g.has(_e)||assignRef(_e,null)}),g.forEach(function(_e){h.has(_e)||assignRef(_e,_)})}currentValues.set(c,a)},[a]),c}function ItoI(a){return a}function innerCreateMedium(a,e){e===void 0&&(e=ItoI);var c=[],d=!1,h={read:function(){if(d)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return c.length?c[c.length-1]:a},useMedium:function(g){var _=e(g,d);return c.push(_),function(){c=c.filter(function(_e){return _e!==_})}},assignSyncMedium:function(g){for(d=!0;c.length;){var _=c;c=[],_.forEach(g)}c={push:function(_e){return g(_e)},filter:function(){return c}}},assignMedium:function(g){d=!0;var _=[];if(c.length){var _e=c;c=[],_e.forEach(g),_=c}var et=function(){var rt=_;_=[],rt.forEach(g)},tt=function(){return Promise.resolve().then(et)};tt(),c={push:function(rt){_.push(rt),tt()},filter:function(rt){return _=_.filter(rt),c}}}};return h}function createSidecarMedium(a){a===void 0&&(a={});var e=innerCreateMedium(null);return e.options=__assign$1({async:!0,ssr:!1},a),e}var SideCar$1=function(a){var e=a.sideCar,c=__rest(a,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var d=e.read();if(!d)throw new Error("Sidecar medium not found");return reactExports.createElement(d,__assign$1({},c))};SideCar$1.isSideCarExport=!0;function exportSidecar(a,e){return a.useMedium(e),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(a,e){var c=reactExports.useRef(null),d=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),h=d[0],g=d[1],_=a.forwardProps,_e=a.children,et=a.className,tt=a.removeScrollBar,rt=a.enabled,$=a.shards,b=a.sideCar,nt=a.noIsolation,st=a.inert,ot=a.allowPinchZoom,it=a.as,at=it===void 0?"div":it,lt=a.gapMode,dt=__rest(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),ht=b,pt=useMergeRefs([c,e]),mt=__assign$1(__assign$1({},dt),h);return reactExports.createElement(reactExports.Fragment,null,rt&&reactExports.createElement(ht,{sideCar:effectCar,removeScrollBar:tt,shards:$,noIsolation:nt,inert:st,setCallbacks:g,allowPinchZoom:!!ot,lockRef:c,gapMode:lt}),_?reactExports.cloneElement(reactExports.Children.only(_e),__assign$1(__assign$1({},mt),{ref:pt})):reactExports.createElement(at,__assign$1({},mt,{className:et,ref:pt}),_e))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var e=getNonce();return e&&a.setAttribute("nonce",e),a}function injectStyles(a,e){a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}function insertStyleTag(a){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(a)}var stylesheetSingleton=function(){var a=0,e=null;return{add:function(c){a==0&&(e=makeStyleTag())&&(injectStyles(e,c),insertStyleTag(e)),a++},remove:function(){a--,!a&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},styleHookSingleton=function(){var a=stylesheetSingleton();return function(e,c){reactExports.useEffect(function(){return a.add(e),function(){a.remove()}},[e&&c])}},styleSingleton=function(){var a=styleHookSingleton(),e=function(c){var d=c.styles,h=c.dynamic;return a(d,h),null};return e},zeroGap={left:0,top:0,right:0,gap:0},parse$2=function(a){return parseInt(a||"",10)||0},getOffset=function(a){var e=window.getComputedStyle(document.body),c=e[a==="padding"?"paddingLeft":"marginLeft"],d=e[a==="padding"?"paddingTop":"marginTop"],h=e[a==="padding"?"paddingRight":"marginRight"];return[parse$2(c),parse$2(d),parse$2(h)]},getGapWidth=function(a){if(a===void 0&&(a="margin"),typeof window>"u")return zeroGap;var e=getOffset(a),c=document.documentElement.clientWidth,d=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,d-c+e[2]-e[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(a,e,c,d){var h=a.left,g=a.top,_=a.right,_e=a.gap;return c===void 0&&(c="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(d,`;
   padding-right: `).concat(_e,"px ").concat(d,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(d,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(d,";"),c==="margin"&&`
    padding-left: `.concat(h,`px;
    padding-top: `).concat(g,`px;
    padding-right: `).concat(_,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(_e,"px ").concat(d,`;
    `),c==="padding"&&"padding-right: ".concat(_e,"px ").concat(d,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(_e,"px ").concat(d,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(_e,"px ").concat(d,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(d,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(d,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(_e,`px;
  }
`)},getCurrentUseCounter=function(){var a=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(a)?a:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var a=getCurrentUseCounter()-1;a<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,a.toString())}},[])},RemoveScrollBar=function(a){var e=a.noRelative,c=a.noImportant,d=a.gapMode,h=d===void 0?"margin":d;useLockAttribute();var g=reactExports.useMemo(function(){return getGapWidth(h)},[h]);return reactExports.createElement(Style,{styles:getStyles(g,!e,h,c?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(a){return a.tagName==="TEXTAREA"},elementCanBeScrolled=function(a,e){if(!(a instanceof Element))return!1;var c=window.getComputedStyle(a);return c[e]!=="hidden"&&!(c.overflowY===c.overflowX&&!alwaysContainsScroll(a)&&c[e]==="visible")},elementCouldBeVScrolled=function(a){return elementCanBeScrolled(a,"overflowY")},elementCouldBeHScrolled=function(a){return elementCanBeScrolled(a,"overflowX")},locationCouldBeScrolled=function(a,e){var c=e.ownerDocument,d=e;do{typeof ShadowRoot<"u"&&d instanceof ShadowRoot&&(d=d.host);var h=elementCouldBeScrolled(a,d);if(h){var g=getScrollVariables(a,d),_=g[1],_e=g[2];if(_>_e)return!0}d=d.parentNode}while(d&&d!==c.body);return!1},getVScrollVariables=function(a){var e=a.scrollTop,c=a.scrollHeight,d=a.clientHeight;return[e,c,d]},getHScrollVariables=function(a){var e=a.scrollLeft,c=a.scrollWidth,d=a.clientWidth;return[e,c,d]},elementCouldBeScrolled=function(a,e){return a==="v"?elementCouldBeVScrolled(e):elementCouldBeHScrolled(e)},getScrollVariables=function(a,e){return a==="v"?getVScrollVariables(e):getHScrollVariables(e)},getDirectionFactor=function(a,e){return a==="h"&&e==="rtl"?-1:1},handleScroll=function(a,e,c,d,h){var g=getDirectionFactor(a,window.getComputedStyle(e).direction),_=g*d,_e=c.target,et=e.contains(_e),tt=!1,rt=_>0,$=0,b=0;do{var nt=getScrollVariables(a,_e),st=nt[0],ot=nt[1],it=nt[2],at=ot-it-g*st;(st||at)&&elementCouldBeScrolled(a,_e)&&($+=at,b+=st),_e instanceof ShadowRoot?_e=_e.host:_e=_e.parentNode}while(!et&&_e!==document.body||et&&(e.contains(_e)||e===_e));return(rt&&(Math.abs($)<1||!h)||!rt&&(Math.abs(b)<1||!h))&&(tt=!0),tt},getTouchXY=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(a){return[a.deltaX,a.deltaY]},extractRef=function(a){return a&&"current"in a?a.current:a},deltaCompare=function(a,e){return a[0]===e[0]&&a[1]===e[1]},generateStyle=function(a){return`
  .block-interactivity-`.concat(a,` {pointer-events: none;}
  .allow-interactivity-`).concat(a,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(a){var e=reactExports.useRef([]),c=reactExports.useRef([0,0]),d=reactExports.useRef(),h=reactExports.useState(idCounter++)[0],g=reactExports.useState(styleSingleton)[0],_=reactExports.useRef(a);reactExports.useEffect(function(){_.current=a},[a]),reactExports.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(h));var ot=__spreadArray$1([a.lockRef.current],(a.shards||[]).map(extractRef),!0).filter(Boolean);return ot.forEach(function(it){return it.classList.add("allow-interactivity-".concat(h))}),function(){document.body.classList.remove("block-interactivity-".concat(h)),ot.forEach(function(it){return it.classList.remove("allow-interactivity-".concat(h))})}}},[a.inert,a.lockRef.current,a.shards]);var _e=reactExports.useCallback(function(ot,it){if("touches"in ot&&ot.touches.length===2||ot.type==="wheel"&&ot.ctrlKey)return!_.current.allowPinchZoom;var at=getTouchXY(ot),lt=c.current,dt="deltaX"in ot?ot.deltaX:lt[0]-at[0],ht="deltaY"in ot?ot.deltaY:lt[1]-at[1],pt,mt=ot.target,yt=Math.abs(dt)>Math.abs(ht)?"h":"v";if("touches"in ot&&yt==="h"&&mt.type==="range")return!1;var xt=locationCouldBeScrolled(yt,mt);if(!xt)return!0;if(xt?pt=yt:(pt=yt==="v"?"h":"v",xt=locationCouldBeScrolled(yt,mt)),!xt)return!1;if(!d.current&&"changedTouches"in ot&&(dt||ht)&&(d.current=pt),!pt)return!0;var gt=d.current||pt;return handleScroll(gt,it,ot,gt==="h"?dt:ht,!0)},[]),et=reactExports.useCallback(function(ot){var it=ot;if(!(!lockStack.length||lockStack[lockStack.length-1]!==g)){var at="deltaY"in it?getDeltaXY(it):getTouchXY(it),lt=e.current.filter(function(pt){return pt.name===it.type&&(pt.target===it.target||it.target===pt.shadowParent)&&deltaCompare(pt.delta,at)})[0];if(lt&&lt.should){it.cancelable&&it.preventDefault();return}if(!lt){var dt=(_.current.shards||[]).map(extractRef).filter(Boolean).filter(function(pt){return pt.contains(it.target)}),ht=dt.length>0?_e(it,dt[0]):!_.current.noIsolation;ht&&it.cancelable&&it.preventDefault()}}},[]),tt=reactExports.useCallback(function(ot,it,at,lt){var dt={name:ot,delta:it,target:at,should:lt,shadowParent:getOutermostShadowParent(at)};e.current.push(dt),setTimeout(function(){e.current=e.current.filter(function(ht){return ht!==dt})},1)},[]),rt=reactExports.useCallback(function(ot){c.current=getTouchXY(ot),d.current=void 0},[]),$=reactExports.useCallback(function(ot){tt(ot.type,getDeltaXY(ot),ot.target,_e(ot,a.lockRef.current))},[]),b=reactExports.useCallback(function(ot){tt(ot.type,getTouchXY(ot),ot.target,_e(ot,a.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(g),a.setCallbacks({onScrollCapture:$,onWheelCapture:$,onTouchMoveCapture:b}),document.addEventListener("wheel",et,nonPassive),document.addEventListener("touchmove",et,nonPassive),document.addEventListener("touchstart",rt,nonPassive),function(){lockStack=lockStack.filter(function(ot){return ot!==g}),document.removeEventListener("wheel",et,nonPassive),document.removeEventListener("touchmove",et,nonPassive),document.removeEventListener("touchstart",rt,nonPassive)}},[]);var nt=a.removeScrollBar,st=a.inert;return reactExports.createElement(reactExports.Fragment,null,st?reactExports.createElement(g,{styles:generateStyle(h)}):null,nt?reactExports.createElement(RemoveScrollBar,{gapMode:a.gapMode}):null)}function getOutermostShadowParent(a){for(var e=null;a!==null;)a instanceof ShadowRoot&&(e=a.host,a=a.host),a=a.parentNode;return e}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(a,e){return reactExports.createElement(RemoveScroll,__assign$1({},a,{ref:e,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var SELECTION_KEYS$1=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS$1,"ArrowRight"],rtl:[...SELECTION_KEYS$1,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME="Menu",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(MENU_NAME),[createMenuContext,createMenuScope]=createContextScope$2(MENU_NAME,[createCollectionScope$1,createPopperScope,createRovingFocusGroupScope]),usePopperScope$1=createPopperScope(),useRovingFocusGroupScope$2=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME),Menu=a=>{const{__scopeMenu:e,open:c=!1,children:d,dir:h,onOpenChange:g,modal:_=!0}=a,_e=usePopperScope$1(e),[et,tt]=reactExports.useState(null),rt=reactExports.useRef(!1),$=useCallbackRef$1(g),b=useDirection(h);return reactExports.useEffect(()=>{const nt=()=>{rt.current=!0,document.addEventListener("pointerdown",st,{capture:!0,once:!0}),document.addEventListener("pointermove",st,{capture:!0,once:!0})},st=()=>rt.current=!1;return document.addEventListener("keydown",nt,{capture:!0}),()=>{document.removeEventListener("keydown",nt,{capture:!0}),document.removeEventListener("pointerdown",st,{capture:!0}),document.removeEventListener("pointermove",st,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2$4,{..._e,children:jsxRuntimeExports.jsx(MenuProvider,{scope:e,open:c,onOpenChange:$,content:et,onContentChange:tt,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:e,onClose:reactExports.useCallback(()=>$(!1),[$]),isUsingKeyboardRef:rt,dir:b,modal:_,children:d})})})};Menu.displayName=MENU_NAME;var ANCHOR_NAME="MenuAnchor",MenuAnchor=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,...d}=a,h=usePopperScope$1(c);return jsxRuntimeExports.jsx(Anchor,{...h,...d,ref:e})});MenuAnchor.displayName=ANCHOR_NAME;var PORTAL_NAME$2="MenuPortal",[PortalProvider,usePortalContext]=createMenuContext(PORTAL_NAME$2,{forceMount:void 0}),MenuPortal=a=>{const{__scopeMenu:e,forceMount:c,children:d,container:h}=a,g=useMenuContext(PORTAL_NAME$2,e);return jsxRuntimeExports.jsx(PortalProvider,{scope:e,forceMount:c,children:jsxRuntimeExports.jsx(Presence,{present:c||g.open,children:jsxRuntimeExports.jsx(Portal$2,{asChild:!0,container:h,children:d})})})};MenuPortal.displayName=PORTAL_NAME$2;var CONTENT_NAME$3="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$3),MenuContent=reactExports.forwardRef((a,e)=>{const c=usePortalContext(CONTENT_NAME$3,a.__scopeMenu),{forceMount:d=c.forceMount,...h}=a,g=useMenuContext(CONTENT_NAME$3,a.__scopeMenu),_=useMenuRootContext(CONTENT_NAME$3,a.__scopeMenu);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:a.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:d||g.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:a.__scopeMenu,children:_.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...h,ref:e}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...h,ref:e})})})})}),MenuRootContentModal=reactExports.forwardRef((a,e)=>{const c=useMenuContext(CONTENT_NAME$3,a.__scopeMenu),d=reactExports.useRef(null),h=useComposedRefs(e,d);return reactExports.useEffect(()=>{const g=d.current;if(g)return hideOthers(g)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{...a,ref:h,trapFocus:c.open,disableOutsidePointerEvents:c.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers(a.onFocusOutside,g=>g.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>c.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef((a,e)=>{const c=useMenuContext(CONTENT_NAME$3,a.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{...a,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>c.onOpenChange(!1)})}),MenuContentImpl=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,loop:d=!1,trapFocus:h,onOpenAutoFocus:g,onCloseAutoFocus:_,disableOutsidePointerEvents:_e,onEntryFocus:et,onEscapeKeyDown:tt,onPointerDownOutside:rt,onFocusOutside:$,onInteractOutside:b,onDismiss:nt,disableOutsideScroll:st,...ot}=a,it=useMenuContext(CONTENT_NAME$3,c),at=useMenuRootContext(CONTENT_NAME$3,c),lt=usePopperScope$1(c),dt=useRovingFocusGroupScope$2(c),ht=useCollection$1(c),[pt,mt]=reactExports.useState(null),yt=reactExports.useRef(null),xt=useComposedRefs(e,yt,it.onContentChange),gt=reactExports.useRef(0),bt=reactExports.useRef(""),jt=reactExports.useRef(0),Mt=reactExports.useRef(null),Pt=reactExports.useRef("right"),Tt=reactExports.useRef(0),St=st?ReactRemoveScroll:reactExports.Fragment,wt=st?{as:Slot,allowPinchZoom:!0}:void 0,Rt=Et=>{var gr,Pr;const zt=bt.current+Et,er=ht().filter(Nr=>!Nr.disabled),pr=document.activeElement,_r=(gr=er.find(Nr=>Nr.ref.current===pr))==null?void 0:gr.textValue,Er=er.map(Nr=>Nr.textValue),Tr=getNextMatch(Er,zt,_r),wr=(Pr=er.find(Nr=>Nr.textValue===Tr))==null?void 0:Pr.ref.current;(function Nr(Ar){bt.current=Ar,window.clearTimeout(gt.current),Ar!==""&&(gt.current=window.setTimeout(()=>Nr(""),1e3))})(zt),wr&&setTimeout(()=>wr.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(gt.current),[]),useFocusGuards();const At=reactExports.useCallback(Et=>{var er,pr;return Pt.current===((er=Mt.current)==null?void 0:er.side)&&isPointerInGraceArea(Et,(pr=Mt.current)==null?void 0:pr.area)},[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:c,searchRef:bt,onItemEnter:reactExports.useCallback(Et=>{At(Et)&&Et.preventDefault()},[At]),onItemLeave:reactExports.useCallback(Et=>{var zt;At(Et)||((zt=yt.current)==null||zt.focus(),mt(null))},[At]),onTriggerLeave:reactExports.useCallback(Et=>{At(Et)&&Et.preventDefault()},[At]),pointerGraceTimerRef:jt,onPointerGraceIntentChange:reactExports.useCallback(Et=>{Mt.current=Et},[]),children:jsxRuntimeExports.jsx(St,{...wt,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:h,onMountAutoFocus:composeEventHandlers(g,Et=>{var zt;Et.preventDefault(),(zt=yt.current)==null||zt.focus({preventScroll:!0})}),onUnmountAutoFocus:_,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:_e,onEscapeKeyDown:tt,onPointerDownOutside:rt,onFocusOutside:$,onInteractOutside:b,onDismiss:nt,children:jsxRuntimeExports.jsx(Root$5,{asChild:!0,...dt,dir:at.dir,orientation:"vertical",loop:d,currentTabStopId:pt,onCurrentTabStopIdChange:mt,onEntryFocus:composeEventHandlers(et,Et=>{at.isUsingKeyboardRef.current||Et.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content$1,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(it.open),"data-radix-menu-content":"",dir:at.dir,...lt,...ot,ref:xt,style:{outline:"none",...ot.style},onKeyDown:composeEventHandlers(ot.onKeyDown,Et=>{const er=Et.target.closest("[data-radix-menu-content]")===Et.currentTarget,pr=Et.ctrlKey||Et.altKey||Et.metaKey,_r=Et.key.length===1;er&&(Et.key==="Tab"&&Et.preventDefault(),!pr&&_r&&Rt(Et.key));const Er=yt.current;if(Et.target!==Er||!FIRST_LAST_KEYS.includes(Et.key))return;Et.preventDefault();const wr=ht().filter(gr=>!gr.disabled).map(gr=>gr.ref.current);LAST_KEYS.includes(Et.key)&&wr.reverse(),focusFirst(wr)}),onBlur:composeEventHandlers(a.onBlur,Et=>{Et.currentTarget.contains(Et.target)||(window.clearTimeout(gt.current),bt.current="")}),onPointerMove:composeEventHandlers(a.onPointerMove,whenMouse(Et=>{const zt=Et.target,er=Tt.current!==Et.clientX;if(Et.currentTarget.contains(zt)&&er){const pr=Et.clientX>Tt.current?"right":"left";Pt.current=pr,Tt.current=Et.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$3;var GROUP_NAME$2="MenuGroup",MenuGroup=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...d,ref:e})});MenuGroup.displayName=GROUP_NAME$2;var LABEL_NAME$2="MenuLabel",MenuLabel=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{...d,ref:e})});MenuLabel.displayName=LABEL_NAME$2;var ITEM_NAME$3="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef((a,e)=>{const{disabled:c=!1,onSelect:d,...h}=a,g=reactExports.useRef(null),_=useMenuRootContext(ITEM_NAME$3,a.__scopeMenu),_e=useMenuContentContext(ITEM_NAME$3,a.__scopeMenu),et=useComposedRefs(e,g),tt=reactExports.useRef(!1),rt=()=>{const $=g.current;if(!c&&$){const b=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});$.addEventListener(ITEM_SELECT,nt=>d==null?void 0:d(nt),{once:!0}),dispatchDiscreteCustomEvent($,b),b.defaultPrevented?tt.current=!1:_.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...h,ref:et,disabled:c,onClick:composeEventHandlers(a.onClick,rt),onPointerDown:$=>{var b;(b=a.onPointerDown)==null||b.call(a,$),tt.current=!0},onPointerUp:composeEventHandlers(a.onPointerUp,$=>{var b;tt.current||(b=$.currentTarget)==null||b.click()}),onKeyDown:composeEventHandlers(a.onKeyDown,$=>{const b=_e.searchRef.current!=="";c||b&&$.key===" "||SELECTION_KEYS$1.includes($.key)&&($.currentTarget.click(),$.preventDefault())})})});MenuItem.displayName=ITEM_NAME$3;var MenuItemImpl=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,disabled:d=!1,textValue:h,...g}=a,_=useMenuContentContext(ITEM_NAME$3,c),_e=useRovingFocusGroupScope$2(c),et=reactExports.useRef(null),tt=useComposedRefs(e,et),[rt,$]=reactExports.useState(!1),[b,nt]=reactExports.useState("");return reactExports.useEffect(()=>{const st=et.current;st&&nt((st.textContent??"").trim())},[g.children]),jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:c,disabled:d,textValue:h??b,children:jsxRuntimeExports.jsx(Item$1,{asChild:!0,..._e,focusable:!d,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":rt?"":void 0,"aria-disabled":d||void 0,"data-disabled":d?"":void 0,...g,ref:tt,onPointerMove:composeEventHandlers(a.onPointerMove,whenMouse(st=>{d?_.onItemLeave(st):(_.onItemEnter(st),st.defaultPrevented||st.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers(a.onPointerLeave,whenMouse(st=>_.onItemLeave(st))),onFocus:composeEventHandlers(a.onFocus,()=>$(!0)),onBlur:composeEventHandlers(a.onBlur,()=>$(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef((a,e)=>{const{checked:c=!1,onCheckedChange:d,...h}=a;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:a.__scopeMenu,checked:c,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate$1(c)?"mixed":c,...h,ref:e,"data-state":getCheckedState(c),onSelect:composeEventHandlers(h.onSelect,()=>d==null?void 0:d(isIndeterminate$1(c)?!0:!c),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$2="MenuRadioGroup",[RadioGroupProvider$1,useRadioGroupContext$1]=createMenuContext(RADIO_GROUP_NAME$2,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef((a,e)=>{const{value:c,onValueChange:d,...h}=a,g=useCallbackRef$1(d);return jsxRuntimeExports.jsx(RadioGroupProvider$1,{scope:a.__scopeMenu,value:c,onValueChange:g,children:jsxRuntimeExports.jsx(MenuGroup,{...h,ref:e})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$2;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef((a,e)=>{const{value:c,...d}=a,h=useRadioGroupContext$1(RADIO_ITEM_NAME$1,a.__scopeMenu),g=c===h.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:a.__scopeMenu,checked:g,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":g,...d,ref:e,"data-state":getCheckedState(g),onSelect:composeEventHandlers(d.onSelect,()=>{var _;return(_=h.onValueChange)==null?void 0:_.call(h,c)},{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME$1="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME$1,{checked:!1}),MenuItemIndicator=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,forceMount:d,...h}=a,g=useItemIndicatorContext(ITEM_INDICATOR_NAME$1,c);return jsxRuntimeExports.jsx(Presence,{present:d||isIndeterminate$1(g.checked)||g.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...h,ref:e,"data-state":getCheckedState(g.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME$1;var SEPARATOR_NAME$2="MenuSeparator",MenuSeparator=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...d,ref:e})});MenuSeparator.displayName=SEPARATOR_NAME$2;var ARROW_NAME$2="MenuArrow",MenuArrow=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,...d}=a,h=usePopperScope$1(c);return jsxRuntimeExports.jsx(Arrow,{...h,...d,ref:e})});MenuArrow.displayName=ARROW_NAME$2;var SUB_NAME="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME),SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef((a,e)=>{const c=useMenuContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),d=useMenuRootContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),h=useMenuSubContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),g=useMenuContentContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),_=reactExports.useRef(null),{pointerGraceTimerRef:_e,onPointerGraceIntentChange:et}=g,tt={__scopeMenu:a.__scopeMenu},rt=reactExports.useCallback(()=>{_.current&&window.clearTimeout(_.current),_.current=null},[]);return reactExports.useEffect(()=>rt,[rt]),reactExports.useEffect(()=>{const $=_e.current;return()=>{window.clearTimeout($),et(null)}},[_e,et]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...tt,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:h.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":h.contentId,"data-state":getOpenState(c.open),...a,ref:composeRefs(e,h.onTriggerChange),onClick:$=>{var b;(b=a.onClick)==null||b.call(a,$),!(a.disabled||$.defaultPrevented)&&($.currentTarget.focus(),c.open||c.onOpenChange(!0))},onPointerMove:composeEventHandlers(a.onPointerMove,whenMouse($=>{g.onItemEnter($),!$.defaultPrevented&&!a.disabled&&!c.open&&!_.current&&(g.onPointerGraceIntentChange(null),_.current=window.setTimeout(()=>{c.onOpenChange(!0),rt()},100))})),onPointerLeave:composeEventHandlers(a.onPointerLeave,whenMouse($=>{var nt,st;rt();const b=(nt=c.content)==null?void 0:nt.getBoundingClientRect();if(b){const ot=(st=c.content)==null?void 0:st.dataset.side,it=ot==="right",at=it?-5:5,lt=b[it?"left":"right"],dt=b[it?"right":"left"];g.onPointerGraceIntentChange({area:[{x:$.clientX+at,y:$.clientY},{x:lt,y:b.top},{x:dt,y:b.top},{x:dt,y:b.bottom},{x:lt,y:b.bottom}],side:ot}),window.clearTimeout(_e.current),_e.current=window.setTimeout(()=>g.onPointerGraceIntentChange(null),300)}else{if(g.onTriggerLeave($),$.defaultPrevented)return;g.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers(a.onKeyDown,$=>{var nt;const b=g.searchRef.current!=="";a.disabled||b&&$.key===" "||SUB_OPEN_KEYS[d.dir].includes($.key)&&(c.onOpenChange(!0),(nt=c.content)==null||nt.focus(),$.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef((a,e)=>{const c=usePortalContext(CONTENT_NAME$3,a.__scopeMenu),{forceMount:d=c.forceMount,...h}=a,g=useMenuContext(CONTENT_NAME$3,a.__scopeMenu),_=useMenuRootContext(CONTENT_NAME$3,a.__scopeMenu),_e=useMenuSubContext(SUB_CONTENT_NAME$1,a.__scopeMenu),et=reactExports.useRef(null),tt=useComposedRefs(e,et);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:a.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:d||g.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:a.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:_e.contentId,"aria-labelledby":_e.triggerId,...h,ref:tt,align:"start",side:_.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:rt=>{var $;_.isUsingKeyboardRef.current&&(($=et.current)==null||$.focus()),rt.preventDefault()},onCloseAutoFocus:rt=>rt.preventDefault(),onFocusOutside:composeEventHandlers(a.onFocusOutside,rt=>{rt.target!==_e.trigger&&g.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers(a.onEscapeKeyDown,rt=>{_.onClose(),rt.preventDefault()}),onKeyDown:composeEventHandlers(a.onKeyDown,rt=>{var nt;const $=rt.currentTarget.contains(rt.target),b=SUB_CLOSE_KEYS[_.dir].includes(rt.key);$&&b&&(g.onOpenChange(!1),(nt=_e.trigger)==null||nt.focus(),rt.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState(a){return a?"open":"closed"}function isIndeterminate$1(a){return a==="indeterminate"}function getCheckedState(a){return isIndeterminate$1(a)?"indeterminate":a?"checked":"unchecked"}function focusFirst(a){const e=document.activeElement;for(const c of a)if(c===e||(c.focus(),document.activeElement!==e))return}function wrapArray$1(a,e){return a.map((c,d)=>a[(e+d)%a.length])}function getNextMatch(a,e,c){const h=e.length>1&&Array.from(e).every(tt=>tt===e[0])?e[0]:e,g=c?a.indexOf(c):-1;let _=wrapArray$1(a,Math.max(g,0));h.length===1&&(_=_.filter(tt=>tt!==c));const et=_.find(tt=>tt.toLowerCase().startsWith(h.toLowerCase()));return et!==c?et:void 0}function isPointInPolygon(a,e){const{x:c,y:d}=a;let h=!1;for(let g=0,_=e.length-1;g<e.length;_=g++){const _e=e[g].x,et=e[g].y,tt=e[_].x,rt=e[_].y;et>d!=rt>d&&c<(tt-_e)*(d-et)/(rt-et)+_e&&(h=!h)}return h}function isPointerInGraceArea(a,e){if(!e)return!1;const c={x:a.clientX,y:a.clientY};return isPointInPolygon(c,e)}function whenMouse(a){return e=>e.pointerType==="mouse"?a(e):void 0}var Root3=Menu,Anchor2=MenuAnchor,Portal$1=MenuPortal,Content2$2=MenuContent,Group=MenuGroup,Label$3=MenuLabel,Item2$2=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup$2=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator$1=MenuItemIndicator,Separator$3=MenuSeparator,Arrow2=MenuArrow,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,DROPDOWN_MENU_NAME="DropdownMenu",[createDropdownMenuContext,createDropdownMenuScope]=createContextScope$2(DROPDOWN_MENU_NAME,[createMenuScope]),useMenuScope=createMenuScope(),[DropdownMenuProvider,useDropdownMenuContext]=createDropdownMenuContext(DROPDOWN_MENU_NAME),DropdownMenu$1=a=>{const{__scopeDropdownMenu:e,children:c,dir:d,open:h,defaultOpen:g,onOpenChange:_,modal:_e=!0}=a,et=useMenuScope(e),tt=reactExports.useRef(null),[rt=!1,$]=useControllableState({prop:h,defaultProp:g,onChange:_});return jsxRuntimeExports.jsx(DropdownMenuProvider,{scope:e,triggerId:useId(),triggerRef:tt,contentId:useId(),open:rt,onOpenChange:$,onOpenToggle:reactExports.useCallback(()=>$(b=>!b),[$]),modal:_e,children:jsxRuntimeExports.jsx(Root3,{...et,open:rt,onOpenChange:$,dir:d,modal:_e,children:c})})};DropdownMenu$1.displayName=DROPDOWN_MENU_NAME;var TRIGGER_NAME$2="DropdownMenuTrigger",DropdownMenuTrigger$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,disabled:d=!1,...h}=a,g=useDropdownMenuContext(TRIGGER_NAME$2,c),_=useMenuScope(c);return jsxRuntimeExports.jsx(Anchor2,{asChild:!0,..._,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",id:g.triggerId,"aria-haspopup":"menu","aria-expanded":g.open,"aria-controls":g.open?g.contentId:void 0,"data-state":g.open?"open":"closed","data-disabled":d?"":void 0,disabled:d,...h,ref:composeRefs(e,g.triggerRef),onPointerDown:composeEventHandlers(a.onPointerDown,_e=>{!d&&_e.button===0&&_e.ctrlKey===!1&&(g.onOpenToggle(),g.open||_e.preventDefault())}),onKeyDown:composeEventHandlers(a.onKeyDown,_e=>{d||(["Enter"," "].includes(_e.key)&&g.onOpenToggle(),_e.key==="ArrowDown"&&g.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(_e.key)&&_e.preventDefault())})})})});DropdownMenuTrigger$1.displayName=TRIGGER_NAME$2;var PORTAL_NAME$1="DropdownMenuPortal",DropdownMenuPortal=a=>{const{__scopeDropdownMenu:e,...c}=a,d=useMenuScope(e);return jsxRuntimeExports.jsx(Portal$1,{...d,...c})};DropdownMenuPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$2="DropdownMenuContent",DropdownMenuContent$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useDropdownMenuContext(CONTENT_NAME$2,c),g=useMenuScope(c),_=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$2,{id:h.contentId,"aria-labelledby":h.triggerId,...g,...d,ref:e,onCloseAutoFocus:composeEventHandlers(a.onCloseAutoFocus,_e=>{var et;_.current||(et=h.triggerRef.current)==null||et.focus(),_.current=!1,_e.preventDefault()}),onInteractOutside:composeEventHandlers(a.onInteractOutside,_e=>{const et=_e.detail.originalEvent,tt=et.button===0&&et.ctrlKey===!0,rt=et.button===2||tt;(!h.modal||rt)&&(_.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuContent$1.displayName=CONTENT_NAME$2;var GROUP_NAME$1="DropdownMenuGroup",DropdownMenuGroup=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(Group,{...h,...d,ref:e})});DropdownMenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="DropdownMenuLabel",DropdownMenuLabel$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(Label$3,{...h,...d,ref:e})});DropdownMenuLabel$1.displayName=LABEL_NAME$1;var ITEM_NAME$2="DropdownMenuItem",DropdownMenuItem$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(Item2$2,{...h,...d,ref:e})});DropdownMenuItem$1.displayName=ITEM_NAME$2;var CHECKBOX_ITEM_NAME="DropdownMenuCheckboxItem",DropdownMenuCheckboxItem$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(CheckboxItem,{...h,...d,ref:e})});DropdownMenuCheckboxItem$1.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME$1="DropdownMenuRadioGroup",DropdownMenuRadioGroup=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(RadioGroup$2,{...h,...d,ref:e})});DropdownMenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME="DropdownMenuRadioItem",DropdownMenuRadioItem$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(RadioItem,{...h,...d,ref:e})});DropdownMenuRadioItem$1.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME$2="DropdownMenuItemIndicator",DropdownMenuItemIndicator=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(ItemIndicator$1,{...h,...d,ref:e})});DropdownMenuItemIndicator.displayName=INDICATOR_NAME$2;var SEPARATOR_NAME$1="DropdownMenuSeparator",DropdownMenuSeparator$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(Separator$3,{...h,...d,ref:e})});DropdownMenuSeparator$1.displayName=SEPARATOR_NAME$1;var ARROW_NAME$1="DropdownMenuArrow",DropdownMenuArrow=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(Arrow2,{...h,...d,ref:e})});DropdownMenuArrow.displayName=ARROW_NAME$1;var SUB_TRIGGER_NAME="DropdownMenuSubTrigger",DropdownMenuSubTrigger$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(SubTrigger,{...h,...d,ref:e})});DropdownMenuSubTrigger$1.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="DropdownMenuSubContent",DropdownMenuSubContent$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(SubContent,{...h,...d,ref:e,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuSubContent$1.displayName=SUB_CONTENT_NAME;var Root2$3=DropdownMenu$1,Trigger$2=DropdownMenuTrigger$1,Portal2=DropdownMenuPortal,Content2$1=DropdownMenuContent$1,Label2=DropdownMenuLabel$1,Item2$1=DropdownMenuItem$1,CheckboxItem2=DropdownMenuCheckboxItem$1,RadioItem2=DropdownMenuRadioItem$1,ItemIndicator2=DropdownMenuItemIndicator,Separator2=DropdownMenuSeparator$1,SubTrigger2=DropdownMenuSubTrigger$1,SubContent2=DropdownMenuSubContent$1;const DropdownMenu=Root2$3,DropdownMenuTrigger=Trigger$2,DropdownMenuSubTrigger=reactExports.forwardRef(({className:a,inset:e,children:c,...d},h)=>jsxRuntimeExports.jsxs(SubTrigger2,{ref:h,className:cn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",a),...d,children:[c,jsxRuntimeExports.jsx(ChevronRight,{className:"ml-auto h-4 w-4"})]}));DropdownMenuSubTrigger.displayName=SubTrigger2.displayName;const DropdownMenuSubContent=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(SubContent2,{ref:c,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...e}));DropdownMenuSubContent.displayName=SubContent2.displayName;const DropdownMenuContent=reactExports.forwardRef(({className:a,sideOffset:e=4,...c},d)=>jsxRuntimeExports.jsx(Portal2,{children:jsxRuntimeExports.jsx(Content2$1,{ref:d,sideOffset:e,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c})}));DropdownMenuContent.displayName=Content2$1.displayName;const DropdownMenuItem=reactExports.forwardRef(({className:a,inset:e,...c},d)=>jsxRuntimeExports.jsx(Item2$1,{ref:d,className:cn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",a),...c}));DropdownMenuItem.displayName=Item2$1.displayName;const DropdownMenuCheckboxItem=reactExports.forwardRef(({className:a,children:e,checked:c,...d},h)=>jsxRuntimeExports.jsxs(CheckboxItem2,{ref:h,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:c,...d,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),e]}));DropdownMenuCheckboxItem.displayName=CheckboxItem2.displayName;const DropdownMenuRadioItem=reactExports.forwardRef(({className:a,children:e,...c},d)=>jsxRuntimeExports.jsxs(RadioItem2,{ref:d,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Circle,{className:"h-2 w-2 fill-current"})})}),e]}));DropdownMenuRadioItem.displayName=RadioItem2.displayName;const DropdownMenuLabel=reactExports.forwardRef(({className:a,inset:e,...c},d)=>jsxRuntimeExports.jsx(Label2,{ref:d,className:cn("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",a),...c}));DropdownMenuLabel.displayName=Label2.displayName;const DropdownMenuSeparator=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Separator2,{ref:c,className:cn("-mx-1 my-1 h-px bg-muted",a),...e}));DropdownMenuSeparator.displayName=Separator2.displayName;const MOBILE_BREAKPOINT=768;function useIsMobile(){const[a,e]=reactExports.useState(void 0);return reactExports.useEffect(()=>{const c=window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT-1}px)`),d=()=>{e(window.innerWidth<MOBILE_BREAKPOINT)};return c.addEventListener("change",d),e(window.innerWidth<MOBILE_BREAKPOINT),()=>c.removeEventListener("change",d)},[]),!!a}const Greeting=()=>{const{user:a,isLoading:e}=useAuth(),[c,d]=reactExports.useState(""),[h,g]=reactExports.useState(""),_=useIsMobile(),[_e,et]=reactExports.useState(!1);return reactExports.useEffect(()=>{const tt=()=>{const $=new Date().getHours();return $>=5&&$<12?"Good Morning":$>=12&&$<18?"Good Afternoon":"Good Evening"};d(tt());const rt=setInterval(()=>{d(tt())},6e4);return()=>clearInterval(rt)},[]),reactExports.useEffect(()=>{const tt=()=>{window.scrollY>50?et(!0):et(!1)};return window.addEventListener("scroll",tt),()=>window.removeEventListener("scroll",tt)},[]),reactExports.useEffect(()=>{(async()=>{if(a)try{const{data:rt}=await supabase.from("profiles").select("first_name").eq("id",a.id).single();rt&&rt.first_name&&g(rt.first_name)}catch(rt){console.error("Error fetching user profile:",rt)}})()},[a]),e?null:jsxRuntimeExports.jsx("div",{className:`
      font-bold transition-all duration-300
      ${_e?"text-gray-800":"text-white"}
      ${_?"text-xs py-1 px-2 text-center truncate":"text-lg py-2 px-4"}
    `,children:jsxRuntimeExports.jsxs("span",{children:[c,h?`, ${h}`:""]})})},Logo=({className:a="",textClassName:e="",size:c="md",showText:d=!1})=>{const h={sm:"h-8",md:"h-12",lg:"h-16",xl:"h-20"};return jsxRuntimeExports.jsxs(Link,{to:"/",className:`flex items-center gap-2 ${a}`,children:[jsxRuntimeExports.jsx("img",{src:"/lovable-uploads/68760ac8-ff16-4532-815c-85929b52d119.png",alt:"Cake A Day Logo",className:`${h[c]} transition-transform hover:scale-105`}),d&&jsxRuntimeExports.jsxs("span",{className:`font-montserrat font-semibold text-foreground ${c==="sm"?"text-lg":c==="md"?"text-2xl":c==="lg"?"text-4xl":"text-5xl"} ${e}`,children:["Cake",jsxRuntimeExports.jsx("span",{className:"text-cake-pink",children:"A"}),"Day"]})]})},CartContext=reactExports.createContext(void 0),CartProvider=({children:a})=>{const[e,c]=reactExports.useState([]),[d,h]=reactExports.useState(0),[g,_]=reactExports.useState(0),_e=150;reactExports.useEffect(()=>{const nt=localStorage.getItem("cart");if(nt)try{const ot=JSON.parse(nt).map(it=>({id:it.id,name:it.name??null,price:it.price??null,description:it.description??null,image_url:it.image_url??null,category:it.category??null,created_at:it.created_at??null,updated_at:it.updated_at??null,embedding:it.embedding??null,is_vegan:typeof it.is_vegan=="boolean"?it.is_vegan:null,options:it.options??null,popular:typeof it.popular=="boolean"?it.popular:null,quantity:typeof it.quantity=="number"&&it.quantity>0?it.quantity:1})).filter(it=>typeof it.id=="number"&&it.name!==null&&it.price!==null);c(ot)}catch(st){console.error("Failed to parse cart from localStorage:",st),localStorage.removeItem("cart")}},[]),reactExports.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(e));const nt=e.reduce((ot,it)=>{const at=typeof it.price=="number"?it.price:0,lt=typeof it.quantity=="number"?it.quantity:0;return ot+at*lt},0),st=e.reduce((ot,it)=>ot+(typeof it.quantity=="number"?it.quantity:0),0);h(nt),_(st)},[e]);const et=(nt,st)=>{c(ot=>{const it=ot.findIndex(at=>at.id===nt.id);if(it>-1){const at=[...ot],lt=at[it],dt=typeof lt.quantity=="number"?lt.quantity:0;return at[it]={...lt,quantity:dt+st},at}else{const at={...nt,quantity:st};return[...ot,at]}})},tt=nt=>{c(st=>st.filter(ot=>ot.id!==nt))},rt=(nt,st)=>{if(st<=0){tt(nt);return}c(ot=>ot.map(it=>it.id===nt?{...it,quantity:st}:it))},$=()=>{c([])},b=()=>e.reduce((nt,st)=>nt+(typeof st.quantity=="number"?st.quantity:0),0);return jsxRuntimeExports.jsx(CartContext.Provider,{value:{cart:e,addToCart:et,removeFromCart:tt,updateQuantity:rt,clearCart:$,cartTotal:d,cartCount:g,deliveryFee:_e,getCartItemCount:b},children:a})},useCart=()=>{const a=reactExports.useContext(CartContext);if(a===void 0)throw new Error("useCart must be used within a CartProvider");return a},NavLink=({to:a,children:e,isScrolled:c,current:d})=>jsxRuntimeExports.jsx(Link,{to:a,className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${d===a?"text-cake-pink":c?"text-foreground hover:text-cake-pink":"text-white hover:text-white/80"}`,children:e}),MobileNavLink=({to:a,children:e})=>jsxRuntimeExports.jsx(Link,{to:a,className:"block px-3 py-2 rounded-md text-base font-medium text-foreground hover:bg-muted",children:e}),Navbar=()=>{const[a,e]=reactExports.useState(!1),[c,d]=reactExports.useState(!1),h=useLocation(),{user:g,signOut:_}=useAuth(),{getCartItemCount:_e}=useCart(),et=()=>e(!a);return reactExports.useEffect(()=>{const tt=()=>{d(window.scrollY>50)};return window.addEventListener("scroll",tt),()=>window.removeEventListener("scroll",tt)},[]),reactExports.useEffect(()=>{e(!1)},[h]),jsxRuntimeExports.jsxs("header",{className:`fixed top-0 w-full z-50 transition-all duration-300 ${c?"bg-white/90 backdrop-blur-md shadow-sm":"bg-transparent"}`,children:[jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 md:px-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-16 md:h-20",children:[jsxRuntimeExports.jsx(Logo,{size:"lg",textClassName:c?"":"md:text-white",showText:!1}),jsxRuntimeExports.jsx("div",{className:"md:hidden flex-1 mx-2",children:jsxRuntimeExports.jsx(Greeting,{})}),jsxRuntimeExports.jsx("div",{className:"hidden md:block",children:jsxRuntimeExports.jsx(Greeting,{})}),jsxRuntimeExports.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[jsxRuntimeExports.jsx(NavLink,{to:"/",isScrolled:c,current:h.pathname,children:"Home"}),jsxRuntimeExports.jsx(NavLink,{to:"/products",isScrolled:c,current:h.pathname,children:"Products"}),jsxRuntimeExports.jsx(NavLink,{to:"/about",isScrolled:c,current:h.pathname,children:"About"}),jsxRuntimeExports.jsx(NavLink,{to:"/contact",isScrolled:c,current:h.pathname,children:"Contact"})]}),jsxRuntimeExports.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Link,{to:"/cart",children:jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"icon",className:`relative ${c?"":"text-white hover:bg-white/20"}`,children:[jsxRuntimeExports.jsx(ShoppingCart,{size:20}),_e()>0&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 bg-cake-pink text-xs font-semibold rounded-full w-5 h-5 flex items-center justify-center",children:_e()})]})}),g?jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",className:c?"":"text-white hover:bg-white/20",children:jsxRuntimeExports.jsx(User,{size:20})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",children:[jsxRuntimeExports.jsx(DropdownMenuItem,{asChild:!0,children:jsxRuntimeExports.jsx(Link,{to:"/profile",className:"cursor-pointer w-full",children:"My Profile"})}),jsxRuntimeExports.jsx(DropdownMenuItem,{asChild:!0,children:jsxRuntimeExports.jsx(Link,{to:"/orders",className:"cursor-pointer w-full",children:"My Orders"})}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:_,className:"cursor-pointer text-destructive",children:[jsxRuntimeExports.jsx(LogOut,{size:16,className:"mr-2"}),"Sign Out"]})]})]}):jsxRuntimeExports.jsx(Link,{to:"/signin",children:jsxRuntimeExports.jsx(Button,{className:"bg-cake-pink hover:bg-cake-pink/90 text-foreground font-medium",children:"Sign In"})})]}),jsxRuntimeExports.jsx("button",{className:"md:hidden",onClick:et,"aria-label":"Toggle menu",children:a?jsxRuntimeExports.jsx(X,{size:24,className:c?"text-foreground":"text-white"}):jsxRuntimeExports.jsx(Menu$1,{size:24,className:c?"text-foreground":"text-white"})})]})}),a&&jsxRuntimeExports.jsx("div",{className:"md:hidden bg-background animate-slide-up",children:jsxRuntimeExports.jsxs("div",{className:"pt-2 pb-4 px-4 space-y-1",children:[jsxRuntimeExports.jsx(MobileNavLink,{to:"/",children:"Home"}),jsxRuntimeExports.jsx(MobileNavLink,{to:"/products",children:"Products"}),jsxRuntimeExports.jsx(MobileNavLink,{to:"/about",children:"About"}),jsxRuntimeExports.jsx(MobileNavLink,{to:"/contact",children:"Contact"}),g&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MobileNavLink,{to:"/profile",children:"My Profile"}),jsxRuntimeExports.jsx(MobileNavLink,{to:"/orders",children:"My Orders"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t",children:[jsxRuntimeExports.jsxs(Link,{to:"/cart",className:"flex items-center gap-2 px-3 py-2 rounded-md text-foreground relative",children:[jsxRuntimeExports.jsx(ShoppingCart,{size:20}),jsxRuntimeExports.jsx("span",{children:"Cart"}),_e()>0&&jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 bg-cake-pink text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:_e()})]}),g?jsxRuntimeExports.jsxs(Button,{onClick:_,variant:"destructive",className:"text-foreground",children:[jsxRuntimeExports.jsx(LogOut,{size:16,className:"mr-2"}),"Sign Out"]}):jsxRuntimeExports.jsx(Link,{to:"/signin",children:jsxRuntimeExports.jsx(Button,{className:"bg-cake-pink hover:bg-cake-pink/90 text-foreground",children:"Sign In"})})]})]})})]})},ProductDetail=()=>{const{id:a}=useParams(),[e,c]=reactExports.useState(null),[d,h]=reactExports.useState(1),[g,_]=reactExports.useState(0),[_e,et]=reactExports.useState(!0),[tt,rt]=reactExports.useState(null),{addToCart:$}=useCart(),{toast:b}=useToast();if(reactExports.useEffect(()=>{(async()=>{if(a)try{et(!0);const it=await getProductById(a);if(it){console.log("Product data:",it);const at=it.image_url||"";console.log("Image URL:",at),c({...it,image_url:at}),_(it.price?it.price*d:0)}else rt("Product not found")}catch(it){rt("Failed to fetch product"),console.error("Error fetching product:",it)}finally{et(!1)}})()},[a]),reactExports.useEffect(()=>{e&&_(e.price*d)},[d,e]),_e)return jsxRuntimeExports.jsx("div",{children:"Loading..."});if(tt)return jsxRuntimeExports.jsxs("div",{children:["Error: ",tt]});if(!e)return jsxRuntimeExports.jsx("div",{children:"Product not found"});const nt=ot=>{ot>0&&h(ot)},st=()=>{e&&($(e,d),b({title:"Added to cart",description:`${d}  ${e.name} added to your cart`,duration:3e3}))};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background page-transition",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 md:px-8 pt-32 pb-20",children:[jsxRuntimeExports.jsxs(Link,{to:"/products",className:"inline-flex items-center text-muted-foreground hover:text-foreground mb-8",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16,className:"mr-2"})," Back to Products"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"relative rounded-2xl overflow-hidden aspect-square",children:jsxRuntimeExports.jsx("img",{src:getProductImageUrl(e.image_url),alt:e.name,className:"w-full h-full object-cover",onError:ot=>{console.error(`Failed to load image for ${e.name}:`,e.image_url),ot.currentTarget.src="/placeholder.svg"}})}),e.popular&&jsxRuntimeExports.jsx("div",{className:"absolute top-4 left-4 bg-cake-pink/90 text-white text-sm font-medium px-3 py-1 rounded-full",children:"Popular"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:e.name}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("p",{className:"text-2xl font-semibold text-cake-pink",children:["R",g.toFixed(2)]})}),jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none mb-8 text-muted-foreground",children:jsxRuntimeExports.jsx("p",{children:e.description})}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium block mb-2",children:"Quantity:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>nt(d-1),className:"w-10 h-10 rounded-l-md flex items-center justify-center bg-muted hover:bg-muted/80 transition-colors",disabled:d<=1,children:jsxRuntimeExports.jsx(Minus,{size:16})}),jsxRuntimeExports.jsx("input",{type:"number",value:d,readOnly:!0,className:"w-16 h-10 text-center border-y border-input focus:outline-none focus:ring-0"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>nt(d+1),className:"w-10 h-10 rounded-r-md flex items-center justify-center bg-muted hover:bg-muted/80 transition-colors",children:jsxRuntimeExports.jsx(Plus,{size:16})})]})]}),jsxRuntimeExports.jsxs(Button,{size:"lg",className:"w-full bg-cake-pink hover:bg-cake-pink/90 mb-4",onClick:st,children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"mr-2 h-5 w-5"})," Add to Cart"]}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-6 mt-8",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-3",children:"Additional Information"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[jsxRuntimeExports.jsx("li",{children:"Made fresh to order in Durban, South Africa"}),jsxRuntimeExports.jsx("li",{children:"Delivery options available (R150 flat rate)"}),jsxRuntimeExports.jsx("li",{children:"Customization options available - contact us for details"}),jsxRuntimeExports.jsx("li",{children:"Allow 48 hours for preparation"})]})]})]})]})]})]})},Hero=()=>jsxRuntimeExports.jsxs("section",{className:"relative min-h-[90vh] overflow-hidden flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-cake-purple/30 to-cake-lightpurple/30 z-0"}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 z-0",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 to-black/30 mix-blend-multiply"}),jsxRuntimeExports.jsx("img",{src:"public/lovable-uploads/picnic image.jpg",alt:"Delicious cake",className:"w-full h-full object-cover object-center"})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/4 right-10 w-16 h-16 rounded-full bg-cake-pink/20 backdrop-blur-sm animate-float"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-1/4 left-10 w-24 h-24 rounded-full bg-cake-purple/20 backdrop-blur-sm animate-float",style:{animationDelay:"1s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/3 left-1/4 w-12 h-12 rounded-full bg-cake-yellow/20 backdrop-blur-sm animate-float",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"container relative z-10 mx-auto px-4 md:px-8 pt-20",children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl text-white",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-4 font-montserrat",children:"Delightful Cakes for Every Occasion"}),jsxRuntimeExports.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-8",children:"Handcrafted with love in Durban, South Africa. Our cakes bring joy to your special moments, one delicious bite at a time."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[jsxRuntimeExports.jsx(Link,{to:"/products",children:jsxRuntimeExports.jsxs(Button,{size:"lg",className:"bg-cake-pink hover:bg-cake-pink/90 text-foreground font-semibold px-8",children:["Order Now ",jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"ml-2"})]})}),jsxRuntimeExports.jsx(Link,{to:"/about",children:jsxRuntimeExports.jsx(Button,{size:"lg",variant:"outline",className:"border-white text-black hover:bg-white/10",children:"About Us"})})]})]})})]}),CategorySection=({categories:a})=>jsxRuntimeExports.jsx("section",{className:"py-16 bg-gradient-to-b from-cake-lightpurple/10 to-transparent",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Explore Our Categories"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"From traditional birthday cakes to creative custom designs, we have something delicious for every celebration."})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map(e=>jsxRuntimeExports.jsx(CategoryCard,{category:e},e.id))})]})}),CategoryCard=({category:a})=>jsxRuntimeExports.jsxs(Link,{to:`/products?category=${a.slug}`,className:"group relative overflow-hidden rounded-2xl h-64 hover-lift",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent z-10"}),jsxRuntimeExports.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover transition-transform duration-700 ease-in-out group-hover:scale-110"}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-6 z-20",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-xl font-semibold mb-1",children:a.name}),jsxRuntimeExports.jsx("p",{className:"text-white/80 text-sm mb-3 line-clamp-2",children:a.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-cake-pink opacity-0 transform translate-y-2 transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"View Collection"}),jsxRuntimeExports.jsx(ArrowRight,{className:"h-4 w-4 ml-1"})]})]})]}),CakeCard=({product:a})=>{const{addToCart:e}=useCart(),[c,d]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{if(a.image_url){const _e=await getProductImageUrl(a.image_url);d(_e)}}catch(_e){console.error("Error loading image URL:",_e)}})()},[a.image_url]);const h=()=>{e(a,1)},g=_=>{_.currentTarget.src="/images/placeholder-cake.jpg"};return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card rounded-lg shadow-sm overflow-hidden transition-all hover:shadow-md flex flex-col h-full",children:[jsxRuntimeExports.jsxs(Link,{to:`/product/${a.id}`,className:"block relative pt-[75%]",children:[" ",jsxRuntimeExports.jsx("img",{src:c||"/images/placeholder-cake.jpg",alt:a.name,className:"absolute inset-0 w-full h-full object-cover transition-transform hover:scale-105",onError:g})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[jsxRuntimeExports.jsx(Link,{to:`/product/${a.id}`,children:jsxRuntimeExports.jsx("h3",{className:"font-medium text-lg mb-1 hover:text-cake-pink transition-colors",children:a.name})}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground text-sm mb-3 line-clamp-2",children:a.description}),jsxRuntimeExports.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"font-semibold text-cake-pink",children:["R",a.price.toFixed(2)]}),jsxRuntimeExports.jsx(Button,{onClick:h,size:"sm",className:"bg-cake-pink hover:bg-cake-pink/90",children:"Add to Cart"})]})]})]})},featuredProducts=[{id:1,name:"Rainbow Birthday Cake",description:"A colorful layered cake perfect for birthdays, with rainbow frosting and decorative toppings.",price:300,category:"cakes",image_url:"/lovable-uploads/rainbow birthday cake.jpg",popular:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_vegan:!1,embedding:null,options:null},{id:2,name:"Gold & Black Cake",description:"Elegant gold and black number cake for milestone birthdays with luxurious decorations.",price:400,category:"cakes",image_url:"/lovable-uploads/gold and black cake.jpg",popular:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_vegan:!1,embedding:null,options:null},{id:3,name:"Baby Blue Shower Cake",description:"Delicate blue cake with cloud decorations, perfect for baby showers.",price:350,category:"cakes",image_url:"/lovable-uploads/blue cake.jpg",popular:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_vegan:!1,embedding:null,options:null},{id:4,name:"Custom Number Cake",description:"Shaped cake in any number you need for birthdays or anniversaries.",price:350,category:"cakes",image_url:"/lovable-uploads/custom numbers cake.jpg",popular:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_vegan:!1,embedding:null,options:null}],categories$1=[{id:"cakes",name:"Cakes",slug:"cakes",description:"From custom birthdays to elegant weddings - our signature cakes for every occasion",image:"public/lovable-uploads/Bible cake.jpg"},{id:"cupcakes",name:"Cupcakes",slug:"cupcakes",description:"Delightful individual treats in a variety of flavors and decorations",image:"public/lovable-uploads/cupcakes.jpg"},{id:"tarts",name:"Tarts & Pies",slug:"tarts",description:"Sweet and savory tarts and pies made with the freshest ingredients",image:"public/lovable-uploads/tarts and pies.jpg"}],Index=()=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background page-transition",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx(Hero,{}),jsxRuntimeExports.jsx("section",{className:"py-20 bg-gradient-to-r from-cake-lightpurple/10 to-cake-pink/10",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 md:px-8",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-xl",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Design Your Favorite Sweet Treats"}),jsxRuntimeExports.jsx("p",{className:"text-lg mb-4",children:"Create your own cake and get it delivered to you within 48 hours."}),jsxRuntimeExports.jsx(Link,{to:"/design-cake",children:jsxRuntimeExports.jsx(Button,{size:"lg",variant:"outline",className:"border-cake-pink text-cake-pink hover:bg-cake-pink/10 font-semibold px-8",children:"Design Cake"})})]}),jsxRuntimeExports.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg",children:jsxRuntimeExports.jsxs("video",{className:"w-full h-auto object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,controls:!0,children:[jsxRuntimeExports.jsx("source",{src:"/lovable-uploads/Cake video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})]})})}),jsxRuntimeExports.jsx("section",{className:"py-10",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-end mb-10",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Featured Cakes"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground max-w-2xl",children:"Our most popular creations that bring smiles to every celebration."})]}),jsxRuntimeExports.jsxs(Link,{to:"/products",className:"hidden md:flex items-center text-cake-pink hover:text-cake-pink/80 transition-colors",children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:"View All"}),jsxRuntimeExports.jsx(ArrowRight,{size:16})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:featuredProducts.map(a=>jsxRuntimeExports.jsx(CakeCard,{product:a},a.id))}),jsxRuntimeExports.jsx("div",{className:"text-center mt-10 md:hidden",children:jsxRuntimeExports.jsx(Link,{to:"/products",children:jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"border-cake-pink text-cake-pink hover:bg-cake-pink/10",children:["View All Cakes ",jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"ml-2"})]})})})]})}),jsxRuntimeExports.jsx(CategorySection,{categories:categories$1}),jsxRuntimeExports.jsx("section",{className:"py-20 bg-gradient-to-b from-transparent to-cake-lightpurple/20",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Choose Your Cake Plan"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Select the perfect subscription tier for your cake needs"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-8 rounded-2xl text-center hover-lift",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-3",children:"Basic"}),jsxRuntimeExports.jsxs("ul",{className:"text-left space-y-2 mb-6",children:[jsxRuntimeExports.jsx("li",{children:" Choose your cake"}),jsxRuntimeExports.jsx("li",{children:" Order your cake"}),jsxRuntimeExports.jsx("li",{children:" Get your cake delivered"}),jsxRuntimeExports.jsx("li",{className:"text-sm text-muted-foreground",children:"(Free delivery excluded)"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-cake-pink mb-4",children:"Free"}),jsxRuntimeExports.jsx(Link,{to:"/everyday-cake-plan",children:jsxRuntimeExports.jsx(Button,{variant:"outline",className:"w-full",children:"Select Plan"})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-8 rounded-2xl text-center hover-lift",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-3",children:"Standard"}),jsxRuntimeExports.jsxs("ul",{className:"text-left space-y-2 mb-6",children:[jsxRuntimeExports.jsx("li",{children:" Choose your cake"}),jsxRuntimeExports.jsx("li",{children:" 1 Box of sweet treats p/m"}),jsxRuntimeExports.jsx("li",{children:" Order your cake"}),jsxRuntimeExports.jsx("li",{children:" Free delivery"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-cake-pink mb-4",children:"R150 pm"}),jsxRuntimeExports.jsx(Link,{to:"/cake-lovers-plan",children:jsxRuntimeExports.jsx(Button,{variant:"outline",className:"w-full",children:"Select Plan"})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-8 rounded-2xl text-center hover-lift",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-3",children:"Premium"}),jsxRuntimeExports.jsxs("ul",{className:"text-left space-y-2 mb-6",children:[jsxRuntimeExports.jsx("li",{children:" Choose your cake combo"}),jsxRuntimeExports.jsx("li",{children:" 2 Boxes of sweets treats p/m"}),jsxRuntimeExports.jsx("li",{children:" Order your cake combo"}),jsxRuntimeExports.jsx("li",{children:" Free delivery"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-cake-pink mb-4",children:"R350 pm"}),jsxRuntimeExports.jsx(Link,{to:"/super-cake-lovers-plan",children:jsxRuntimeExports.jsx(Button,{variant:"outline",className:"w-full",children:"Select Plan"})})]})]})]})}),jsxRuntimeExports.jsxs("section",{className:"py-20 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cake-purple/30 to-cake-pink/30 z-0"}),jsxRuntimeExports.jsx("div",{className:"container relative z-10 mx-auto px-4 md:px-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Order Your Perfect Cake?"}),jsxRuntimeExports.jsx("p",{className:"text-lg mb-8",children:"Join our satisfied customers and make your next celebration extra special with our handcrafted cakes"}),jsxRuntimeExports.jsx(Link,{to:"/products",children:jsxRuntimeExports.jsxs(Button,{size:"lg",className:"bg-cake-pink hover:bg-cake-pink/90 text-foreground font-semibold px-8 mb-4",children:["Order Now ",jsxRuntimeExports.jsx(ArrowRight,{size:16,className:"ml-2"})]})})]})}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-5 -right-5 w-40 h-40 rounded-full bg-cake-yellow/10 backdrop-blur-sm"}),jsxRuntimeExports.jsx("div",{className:"absolute top-10 -left-10 w-32 h-32 rounded-full bg-cake-purple/10 backdrop-blur-sm"})]}),jsxRuntimeExports.jsx("footer",{className:"bg-white dark:bg-card py-12",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 md:px-8",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Logo,{size:"md",showText:!0,className:"mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Bringing sweetness to your special moments in Durban, South Africa."}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",new Date().getFullYear()," Cake A Day. All rights reserved."]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-4",children:"Quick Links"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2",children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/",className:"text-muted-foreground hover:text-cake-pink",children:"Home"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/products",className:"text-muted-foreground hover:text-cake-pink",children:"Products"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/about",className:"text-muted-foreground hover:text-cake-pink",children:"About Us"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/contact",className:"text-muted-foreground hover:text-cake-pink",children:"Contact"})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-4",children:"Categories"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2",children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/products?category=cakes",className:"text-muted-foreground hover:text-cake-pink",children:"Cakes"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/products?category=cupcakes",className:"text-muted-foreground hover:text-cake-pink",children:"Cupcakes"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/products?category=tarts",className:"text-muted-foreground hover:text-cake-pink",children:"Tarts & Pies"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{to:"/products?category=specials",className:"text-muted-foreground hover:text-cake-pink",children:"Specials"})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-4",children:"Contact Us"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[jsxRuntimeExports.jsx("li",{children:"Durban, South Africa"}),jsxRuntimeExports.jsx("li",{children:"Phone: +27 73 599 9972"}),jsxRuntimeExports.jsx("li",{children:"Email: info@cakeaday.co.za"})]})]})]})})})]}),Input=reactExports.forwardRef(({className:a,type:e,...c},d)=>jsxRuntimeExports.jsx("input",{type:e,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:d,...c}));Input.displayName="Input";var NAME$1="Label",Label$2=reactExports.forwardRef((a,e)=>jsxRuntimeExports.jsx(Primitive.label,{...a,ref:e,onMouseDown:c=>{var h;c.target.closest("button, input, select, textarea")||((h=a.onMouseDown)==null||h.call(a,c),!c.defaultPrevented&&c.detail>1&&c.preventDefault())}}));Label$2.displayName=NAME$1;var Root$4=Label$2;const labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label$1=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Root$4,{ref:c,className:cn(labelVariants(),a),...e}));Label$1.displayName=Root$4.displayName;function usePrevious$1(a){const e=reactExports.useRef({value:a,previous:a});return reactExports.useMemo(()=>(e.current.value!==a&&(e.current.previous=e.current.value,e.current.value=a),e.current.previous),[a])}var CHECKBOX_NAME="Checkbox",[createCheckboxContext,createCheckboxScope]=createContextScope$2(CHECKBOX_NAME),[CheckboxProvider,useCheckboxContext]=createCheckboxContext(CHECKBOX_NAME),Checkbox$1=reactExports.forwardRef((a,e)=>{const{__scopeCheckbox:c,name:d,checked:h,defaultChecked:g,required:_,disabled:_e,value:et="on",onCheckedChange:tt,form:rt,...$}=a,[b,nt]=reactExports.useState(null),st=useComposedRefs(e,ht=>nt(ht)),ot=reactExports.useRef(!1),it=b?rt||!!b.closest("form"):!0,[at=!1,lt]=useControllableState({prop:h,defaultProp:g,onChange:tt}),dt=reactExports.useRef(at);return reactExports.useEffect(()=>{const ht=b==null?void 0:b.form;if(ht){const pt=()=>lt(dt.current);return ht.addEventListener("reset",pt),()=>ht.removeEventListener("reset",pt)}},[b,lt]),jsxRuntimeExports.jsxs(CheckboxProvider,{scope:c,state:at,disabled:_e,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"checkbox","aria-checked":isIndeterminate(at)?"mixed":at,"aria-required":_,"data-state":getState$1(at),"data-disabled":_e?"":void 0,disabled:_e,value:et,...$,ref:st,onKeyDown:composeEventHandlers(a.onKeyDown,ht=>{ht.key==="Enter"&&ht.preventDefault()}),onClick:composeEventHandlers(a.onClick,ht=>{lt(pt=>isIndeterminate(pt)?!0:!pt),it&&(ot.current=ht.isPropagationStopped(),ot.current||ht.stopPropagation())})}),it&&jsxRuntimeExports.jsx(BubbleInput$1,{control:b,bubbles:!ot.current,name:d,value:et,checked:at,required:_,disabled:_e,form:rt,style:{transform:"translateX(-100%)"},defaultChecked:isIndeterminate(g)?!1:g})]})});Checkbox$1.displayName=CHECKBOX_NAME;var INDICATOR_NAME$1="CheckboxIndicator",CheckboxIndicator=reactExports.forwardRef((a,e)=>{const{__scopeCheckbox:c,forceMount:d,...h}=a,g=useCheckboxContext(INDICATOR_NAME$1,c);return jsxRuntimeExports.jsx(Presence,{present:d||isIndeterminate(g.state)||g.state===!0,children:jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState$1(g.state),"data-disabled":g.disabled?"":void 0,...h,ref:e,style:{pointerEvents:"none",...a.style}})})});CheckboxIndicator.displayName=INDICATOR_NAME$1;var BubbleInput$1=a=>{const{control:e,checked:c,bubbles:d=!0,defaultChecked:h,...g}=a,_=reactExports.useRef(null),_e=usePrevious$1(c),et=useSize(e);reactExports.useEffect(()=>{const rt=_.current,$=window.HTMLInputElement.prototype,nt=Object.getOwnPropertyDescriptor($,"checked").set;if(_e!==c&&nt){const st=new Event("click",{bubbles:d});rt.indeterminate=isIndeterminate(c),nt.call(rt,isIndeterminate(c)?!1:c),rt.dispatchEvent(st)}},[_e,c,d]);const tt=reactExports.useRef(isIndeterminate(c)?!1:c);return jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:h??tt.current,...g,tabIndex:-1,ref:_,style:{...a.style,...et,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function isIndeterminate(a){return a==="indeterminate"}function getState$1(a){return isIndeterminate(a)?"indeterminate":a?"checked":"unchecked"}var Root$3=Checkbox$1,Indicator$1=CheckboxIndicator;const Checkbox=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Root$3,{ref:c,className:cn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...e,children:jsxRuntimeExports.jsx(Indicator$1,{className:cn("flex items-center justify-center text-current"),children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}));Checkbox.displayName=Root$3.displayName;const SubscriptionForm=({planName:a,planPrice:e,planFeatures:c})=>{const d=h=>{h.preventDefault(),alert(`Thank you for subscribing to the ${a} plan!`)};return jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-card rounded-xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold mb-4",children:[a," Plan"]}),jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-cake-pink mb-6",children:e}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-3",children:"Plan Features:"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:c.map((h,g)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"text-cake-pink mr-2",children:""}),jsxRuntimeExports.jsx("span",{children:h})]},g))})]}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-cake-lightpurple/10 rounded-lg mb-6",children:jsxRuntimeExports.jsxs("p",{className:"text-sm",children:["By subscribing to our ",a," plan, you'll enjoy all these benefits and make your cake ordering experience even sweeter!"]})})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("form",{onSubmit:d,children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"name",children:"Full Name"}),jsxRuntimeExports.jsx(Input,{id:"name",placeholder:"Your full name",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"email",children:"Email Address"}),jsxRuntimeExports.jsx(Input,{id:"email",type:"email",placeholder:"Your email address",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"phone",children:"Phone Number"}),jsxRuntimeExports.jsx(Input,{id:"phone",placeholder:"Your phone number",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-2 pt-2",children:[jsxRuntimeExports.jsx(Checkbox,{id:"terms"}),jsxRuntimeExports.jsx(Label$1,{htmlFor:"terms",className:"text-sm font-normal",children:"I agree to the terms and conditions and privacy policy"})]}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full bg-cake-pink hover:bg-cake-pink/90",children:"Subscribe Now"})]})})})]})})},EverydayCakePlan=()=>{const a=["Choose your cake","Design your cake","Order your cake","Get your cake delivered (Free delivery excluded)"];return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background page-transition",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("section",{className:"pt-32 pb-20",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center mb-8",children:jsxRuntimeExports.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center text-muted-foreground hover:text-foreground",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back"]})}),jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Everyday Cake Plan"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Our basic plan for ordering custom cakes"})]}),jsxRuntimeExports.jsx(SubscriptionForm,{planName:"Everyday Cake",planPrice:"Free",planFeatures:a})]})]})})]})},CakeLoversPlan=()=>{const a=["Choose your cake","Design your cake","Order your cake","Free delivery"];return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background page-transition",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("section",{className:"pt-32 pb-20",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center mb-8",children:jsxRuntimeExports.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center text-muted-foreground hover:text-foreground",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back"]})}),jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Cake Lovers Plan"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Subscribe to our premium plan with free delivery"})]}),jsxRuntimeExports.jsx(SubscriptionForm,{planName:"Cake Lovers",planPrice:"R150 pm",planFeatures:a})]})]})})]})},SuperCakeLoversPlan=()=>{const a=["Choose your cake combo","Design your cake combo","Order your cake combo","Free delivery"];return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background page-transition",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("section",{className:"pt-32 pb-20",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center mb-8",children:jsxRuntimeExports.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center text-muted-foreground hover:text-foreground",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back"]})}),jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Super Cake Lovers Plan"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Subscribe to our ultimate plan with cake combos and free delivery"})]}),jsxRuntimeExports.jsx(SubscriptionForm,{planName:"Super Cake Lovers",planPrice:"R350 pm",planFeatures:a})]})]})})]})};var isCheckBoxInput=a=>a.type==="checkbox",isDateObject=a=>a instanceof Date,isNullOrUndefined=a=>a==null;const isObjectType=a=>typeof a=="object";var isObject=a=>!isNullOrUndefined(a)&&!Array.isArray(a)&&isObjectType(a)&&!isDateObject(a),getEventValue=a=>isObject(a)&&a.target?isCheckBoxInput(a.target)?a.target.checked:a.target.value:a,getNodeParentName=a=>a.substring(0,a.search(/\.\d+(\.|$)/))||a,isNameInFieldArray=(a,e)=>a.has(getNodeParentName(e)),isPlainObject=a=>{const e=a.constructor&&a.constructor.prototype;return isObject(e)&&e.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(a){let e;const c=Array.isArray(a);if(a instanceof Date)e=new Date(a);else if(a instanceof Set)e=new Set(a);else if(!(isWeb&&(a instanceof Blob||a instanceof FileList))&&(c||isObject(a)))if(e=c?[]:{},!c&&!isPlainObject(a))e=a;else for(const d in a)a.hasOwnProperty(d)&&(e[d]=cloneObject(a[d]));else return a;return e}var compact=a=>Array.isArray(a)?a.filter(Boolean):[],isUndefined=a=>a===void 0,get=(a,e,c)=>{if(!e||!isObject(a))return c;const d=compact(e.split(/[,[\].]+?/)).reduce((h,g)=>isNullOrUndefined(h)?h:h[g],a);return isUndefined(d)||d===a?isUndefined(a[e])?c:a[e]:d},isBoolean=a=>typeof a=="boolean",isKey=a=>/^\w*$/.test(a),stringToPath=a=>compact(a.replace(/["|']|\]/g,"").split(/\.|\[/)),set=(a,e,c)=>{let d=-1;const h=isKey(e)?[e]:stringToPath(e),g=h.length,_=g-1;for(;++d<g;){const _e=h[d];let et=c;if(d!==_){const tt=a[_e];et=isObject(tt)||Array.isArray(tt)?tt:isNaN(+h[d+1])?{}:[]}if(_e==="__proto__")return;a[_e]=et,a=a[_e]}return a};const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React.createContext(null),useFormContext=()=>React.useContext(HookFormContext),FormProvider=a=>{const{children:e,...c}=a;return React.createElement(HookFormContext.Provider,{value:c},e)};var getProxyFormState=(a,e,c,d=!0)=>{const h={defaultValues:e._defaultValues};for(const g in a)Object.defineProperty(h,g,{get:()=>{const _=g;return e._proxyFormState[_]!==VALIDATION_MODE.all&&(e._proxyFormState[_]=!d||VALIDATION_MODE.all),c&&(c[_]=!0),a[_]}});return h},isEmptyObject=a=>isObject(a)&&!Object.keys(a).length,shouldRenderFormState=(a,e,c,d)=>{c(a);const{name:h,...g}=a;return isEmptyObject(g)||Object.keys(g).length>=Object.keys(e).length||Object.keys(g).find(_=>e[_]===(!d||VALIDATION_MODE.all))},convertToArrayPayload=a=>Array.isArray(a)?a:[a],shouldSubscribeByName=(a,e,c)=>!a||!e||a===e||convertToArrayPayload(a).some(d=>d&&(c?d===e:d.startsWith(e)||e.startsWith(d)));function useSubscribe(a){const e=React.useRef(a);e.current=a,React.useEffect(()=>{const c=!a.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{c&&c.unsubscribe()}},[a.disabled])}function useFormState(a){const e=useFormContext(),{control:c=e.control,disabled:d,name:h,exact:g}=a||{},[_,_e]=React.useState(c._formState),et=React.useRef(!0),tt=React.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),rt=React.useRef(h);return rt.current=h,useSubscribe({disabled:d,next:$=>et.current&&shouldSubscribeByName(rt.current,$.name,g)&&shouldRenderFormState($,tt.current,c._updateFormState)&&_e({...c._formState,...$}),subject:c._subjects.state}),React.useEffect(()=>(et.current=!0,tt.current.isValid&&c._updateValid(!0),()=>{et.current=!1}),[c]),getProxyFormState(_,c,tt.current,!1)}var isString=a=>typeof a=="string",generateWatchOutput=(a,e,c,d,h)=>isString(a)?(d&&e.watch.add(a),get(c,a,h)):Array.isArray(a)?a.map(g=>(d&&e.watch.add(g),get(c,g))):(d&&(e.watchAll=!0),c);function useWatch(a){const e=useFormContext(),{control:c=e.control,name:d,defaultValue:h,disabled:g,exact:_}=a||{},_e=React.useRef(d);_e.current=d,useSubscribe({disabled:g,subject:c._subjects.values,next:rt=>{shouldSubscribeByName(_e.current,rt.name,_)&&tt(cloneObject(generateWatchOutput(_e.current,c._names,rt.values||c._formValues,!1,h)))}});const[et,tt]=React.useState(c._getWatch(d,h));return React.useEffect(()=>c._removeUnmounted()),et}function useController(a){const e=useFormContext(),{name:c,disabled:d,control:h=e.control,shouldUnregister:g}=a,_=isNameInFieldArray(h._names.array,c),_e=useWatch({control:h,name:c,defaultValue:get(h._formValues,c,get(h._defaultValues,c,a.defaultValue)),exact:!0}),et=useFormState({control:h,name:c,exact:!0}),tt=React.useRef(h.register(c,{...a.rules,value:_e,...isBoolean(a.disabled)?{disabled:a.disabled}:{}}));return React.useEffect(()=>{const rt=h._options.shouldUnregister||g,$=(b,nt)=>{const st=get(h._fields,b);st&&st._f&&(st._f.mount=nt)};if($(c,!0),rt){const b=cloneObject(get(h._options.defaultValues,c));set(h._defaultValues,c,b),isUndefined(get(h._formValues,c))&&set(h._formValues,c,b)}return()=>{(_?rt&&!h._state.action:rt)?h.unregister(c):$(c,!1)}},[c,h,_,g]),React.useEffect(()=>{get(h._fields,c)&&h._updateDisabledField({disabled:d,fields:h._fields,name:c,value:get(h._fields,c)._f.value})},[d,c,h]),{field:{name:c,value:_e,...isBoolean(d)||et.disabled?{disabled:et.disabled||d}:{},onChange:React.useCallback(rt=>tt.current.onChange({target:{value:getEventValue(rt),name:c},type:EVENTS.CHANGE}),[c]),onBlur:React.useCallback(()=>tt.current.onBlur({target:{value:get(h._formValues,c),name:c},type:EVENTS.BLUR}),[c,h]),ref:React.useCallback(rt=>{const $=get(h._fields,c);$&&rt&&($._f.ref={focus:()=>rt.focus(),select:()=>rt.select(),setCustomValidity:b=>rt.setCustomValidity(b),reportValidity:()=>rt.reportValidity()})},[h._fields,c])},formState:et,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get(et.errors,c)},isDirty:{enumerable:!0,get:()=>!!get(et.dirtyFields,c)},isTouched:{enumerable:!0,get:()=>!!get(et.touchedFields,c)},isValidating:{enumerable:!0,get:()=>!!get(et.validatingFields,c)},error:{enumerable:!0,get:()=>get(et.errors,c)}})}}const Controller=a=>a.render(useController(a));var appendErrors=(a,e,c,d,h)=>e?{...c[a],types:{...c[a]&&c[a].types?c[a].types:{},[d]:h||!0}}:{},getValidationModes=a=>({isOnSubmit:!a||a===VALIDATION_MODE.onSubmit,isOnBlur:a===VALIDATION_MODE.onBlur,isOnChange:a===VALIDATION_MODE.onChange,isOnAll:a===VALIDATION_MODE.all,isOnTouch:a===VALIDATION_MODE.onTouched}),isWatched=(a,e,c)=>!c&&(e.watchAll||e.watch.has(a)||[...e.watch].some(d=>a.startsWith(d)&&/^\.\w+/.test(a.slice(d.length))));const iterateFieldsByAction=(a,e,c,d)=>{for(const h of c||Object.keys(a)){const g=get(a,h);if(g){const{_f:_,..._e}=g;if(_){if(_.refs&&_.refs[0]&&e(_.refs[0],h)&&!d)return!0;if(_.ref&&e(_.ref,_.name)&&!d)return!0;if(iterateFieldsByAction(_e,e))break}else if(isObject(_e)&&iterateFieldsByAction(_e,e))break}}};var updateFieldArrayRootError=(a,e,c)=>{const d=convertToArrayPayload(get(a,c));return set(d,"root",e[c]),set(a,c,d),a},isFileInput=a=>a.type==="file",isFunction=a=>typeof a=="function",isHTMLElement=a=>{if(!isWeb)return!1;const e=a?a.ownerDocument:0;return a instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},isMessage=a=>isString(a),isRadioInput=a=>a.type==="radio",isRegex=a=>a instanceof RegExp;const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=a=>{if(Array.isArray(a)){if(a.length>1){const e=a.filter(c=>c&&c.checked&&!c.disabled).map(c=>c.value);return{value:e,isValid:!!e.length}}return a[0].checked&&!a[0].disabled?a[0].attributes&&!isUndefined(a[0].attributes.value)?isUndefined(a[0].value)||a[0].value===""?validResult:{value:a[0].value,isValid:!0}:validResult:defaultResult}return defaultResult};const defaultReturn={isValid:!1,value:null};var getRadioValue=a=>Array.isArray(a)?a.reduce((e,c)=>c&&c.checked&&!c.disabled?{isValid:!0,value:c.value}:e,defaultReturn):defaultReturn;function getValidateError(a,e,c="validate"){if(isMessage(a)||Array.isArray(a)&&a.every(isMessage)||isBoolean(a)&&!a)return{type:c,message:isMessage(a)?a:"",ref:e}}var getValueAndMessage=a=>isObject(a)&&!isRegex(a)?a:{value:a,message:""},validateField=async(a,e,c,d,h)=>{const{ref:g,refs:_,required:_e,maxLength:et,minLength:tt,min:rt,max:$,pattern:b,validate:nt,name:st,valueAsNumber:ot,mount:it,disabled:at}=a._f,lt=get(e,st);if(!it||at)return{};const dt=_?_[0]:g,ht=Mt=>{d&&dt.reportValidity&&(dt.setCustomValidity(isBoolean(Mt)?"":Mt||""),dt.reportValidity())},pt={},mt=isRadioInput(g),yt=isCheckBoxInput(g),xt=mt||yt,gt=(ot||isFileInput(g))&&isUndefined(g.value)&&isUndefined(lt)||isHTMLElement(g)&&g.value===""||lt===""||Array.isArray(lt)&&!lt.length,bt=appendErrors.bind(null,st,c,pt),jt=(Mt,Pt,Tt,St=INPUT_VALIDATION_RULES.maxLength,wt=INPUT_VALIDATION_RULES.minLength)=>{const Rt=Mt?Pt:Tt;pt[st]={type:Mt?St:wt,message:Rt,ref:g,...bt(Mt?St:wt,Rt)}};if(h?!Array.isArray(lt)||!lt.length:_e&&(!xt&&(gt||isNullOrUndefined(lt))||isBoolean(lt)&&!lt||yt&&!getCheckboxValue(_).isValid||mt&&!getRadioValue(_).isValid)){const{value:Mt,message:Pt}=isMessage(_e)?{value:!!_e,message:_e}:getValueAndMessage(_e);if(Mt&&(pt[st]={type:INPUT_VALIDATION_RULES.required,message:Pt,ref:dt,...bt(INPUT_VALIDATION_RULES.required,Pt)},!c))return ht(Pt),pt}if(!gt&&(!isNullOrUndefined(rt)||!isNullOrUndefined($))){let Mt,Pt;const Tt=getValueAndMessage($),St=getValueAndMessage(rt);if(!isNullOrUndefined(lt)&&!isNaN(lt)){const wt=g.valueAsNumber||lt&&+lt;isNullOrUndefined(Tt.value)||(Mt=wt>Tt.value),isNullOrUndefined(St.value)||(Pt=wt<St.value)}else{const wt=g.valueAsDate||new Date(lt),Rt=zt=>new Date(new Date().toDateString()+" "+zt),At=g.type=="time",Et=g.type=="week";isString(Tt.value)&&lt&&(Mt=At?Rt(lt)>Rt(Tt.value):Et?lt>Tt.value:wt>new Date(Tt.value)),isString(St.value)&&lt&&(Pt=At?Rt(lt)<Rt(St.value):Et?lt<St.value:wt<new Date(St.value))}if((Mt||Pt)&&(jt(!!Mt,Tt.message,St.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!c))return ht(pt[st].message),pt}if((et||tt)&&!gt&&(isString(lt)||h&&Array.isArray(lt))){const Mt=getValueAndMessage(et),Pt=getValueAndMessage(tt),Tt=!isNullOrUndefined(Mt.value)&&lt.length>+Mt.value,St=!isNullOrUndefined(Pt.value)&&lt.length<+Pt.value;if((Tt||St)&&(jt(Tt,Mt.message,Pt.message),!c))return ht(pt[st].message),pt}if(b&&!gt&&isString(lt)){const{value:Mt,message:Pt}=getValueAndMessage(b);if(isRegex(Mt)&&!lt.match(Mt)&&(pt[st]={type:INPUT_VALIDATION_RULES.pattern,message:Pt,ref:g,...bt(INPUT_VALIDATION_RULES.pattern,Pt)},!c))return ht(Pt),pt}if(nt){if(isFunction(nt)){const Mt=await nt(lt,e),Pt=getValidateError(Mt,dt);if(Pt&&(pt[st]={...Pt,...bt(INPUT_VALIDATION_RULES.validate,Pt.message)},!c))return ht(Pt.message),pt}else if(isObject(nt)){let Mt={};for(const Pt in nt){if(!isEmptyObject(Mt)&&!c)break;const Tt=getValidateError(await nt[Pt](lt,e),dt,Pt);Tt&&(Mt={...Tt,...bt(Pt,Tt.message)},ht(Tt.message),c&&(pt[st]=Mt))}if(!isEmptyObject(Mt)&&(pt[st]={ref:dt,...Mt},!c))return pt}}return ht(!0),pt};function baseGet(a,e){const c=e.slice(0,-1).length;let d=0;for(;d<c;)a=isUndefined(a)?d++:a[e[d++]];return a}function isEmptyArray(a){for(const e in a)if(a.hasOwnProperty(e)&&!isUndefined(a[e]))return!1;return!0}function unset(a,e){const c=Array.isArray(e)?e:isKey(e)?[e]:stringToPath(e),d=c.length===1?a:baseGet(a,c),h=c.length-1,g=c[h];return d&&delete d[g],h!==0&&(isObject(d)&&isEmptyObject(d)||Array.isArray(d)&&isEmptyArray(d))&&unset(a,c.slice(0,-1)),a}var createSubject=()=>{let a=[];return{get observers(){return a},next:h=>{for(const g of a)g.next&&g.next(h)},subscribe:h=>(a.push(h),{unsubscribe:()=>{a=a.filter(g=>g!==h)}}),unsubscribe:()=>{a=[]}}},isPrimitive=a=>isNullOrUndefined(a)||!isObjectType(a);function deepEqual(a,e){if(isPrimitive(a)||isPrimitive(e))return a===e;if(isDateObject(a)&&isDateObject(e))return a.getTime()===e.getTime();const c=Object.keys(a),d=Object.keys(e);if(c.length!==d.length)return!1;for(const h of c){const g=a[h];if(!d.includes(h))return!1;if(h!=="ref"){const _=e[h];if(isDateObject(g)&&isDateObject(_)||isObject(g)&&isObject(_)||Array.isArray(g)&&Array.isArray(_)?!deepEqual(g,_):g!==_)return!1}}return!0}var isMultipleSelect=a=>a.type==="select-multiple",isRadioOrCheckbox=a=>isRadioInput(a)||isCheckBoxInput(a),live=a=>isHTMLElement(a)&&a.isConnected,objectHasFunction=a=>{for(const e in a)if(isFunction(a[e]))return!0;return!1};function markFieldsDirty(a,e={}){const c=Array.isArray(a);if(isObject(a)||c)for(const d in a)Array.isArray(a[d])||isObject(a[d])&&!objectHasFunction(a[d])?(e[d]=Array.isArray(a[d])?[]:{},markFieldsDirty(a[d],e[d])):isNullOrUndefined(a[d])||(e[d]=!0);return e}function getDirtyFieldsFromDefaultValues(a,e,c){const d=Array.isArray(a);if(isObject(a)||d)for(const h in a)Array.isArray(a[h])||isObject(a[h])&&!objectHasFunction(a[h])?isUndefined(e)||isPrimitive(c[h])?c[h]=Array.isArray(a[h])?markFieldsDirty(a[h],[]):{...markFieldsDirty(a[h])}:getDirtyFieldsFromDefaultValues(a[h],isNullOrUndefined(e)?{}:e[h],c[h]):c[h]=!deepEqual(a[h],e[h]);return c}var getDirtyFields=(a,e)=>getDirtyFieldsFromDefaultValues(a,e,markFieldsDirty(e)),getFieldValueAs=(a,{valueAsNumber:e,valueAsDate:c,setValueAs:d})=>isUndefined(a)?a:e?a===""?NaN:a&&+a:c&&isString(a)?new Date(a):d?d(a):a;function getFieldValue(a){const e=a.ref;if(!(a.refs?a.refs.every(c=>c.disabled):e.disabled))return isFileInput(e)?e.files:isRadioInput(e)?getRadioValue(a.refs).value:isMultipleSelect(e)?[...e.selectedOptions].map(({value:c})=>c):isCheckBoxInput(e)?getCheckboxValue(a.refs).value:getFieldValueAs(isUndefined(e.value)?a.ref.value:e.value,a)}var getResolverOptions=(a,e,c,d)=>{const h={};for(const g of a){const _=get(e,g);_&&set(h,g,_._f)}return{criteriaMode:c,names:[...a],fields:h,shouldUseNativeValidation:d}},getRuleValue=a=>isUndefined(a)?a:isRegex(a)?a.source:isObject(a)?isRegex(a.value)?a.value.source:a.value:a;const ASYNC_FUNCTION="AsyncFunction";var hasPromiseValidation=a=>(!a||!a.validate)&&!!(isFunction(a.validate)&&a.validate.constructor.name===ASYNC_FUNCTION||isObject(a.validate)&&Object.values(a.validate).find(e=>e.constructor.name===ASYNC_FUNCTION)),hasValidation=a=>a.mount&&(a.required||a.min||a.max||a.maxLength||a.minLength||a.pattern||a.validate);function schemaErrorLookup(a,e,c){const d=get(a,c);if(d||isKey(c))return{error:d,name:c};const h=c.split(".");for(;h.length;){const g=h.join("."),_=get(e,g),_e=get(a,g);if(_&&!Array.isArray(_)&&c!==g)return{name:c};if(_e&&_e.type)return{name:g,error:_e};h.pop()}return{name:c}}var skipValidation=(a,e,c,d,h)=>h.isOnAll?!1:!c&&h.isOnTouch?!(e||a):(c?d.isOnBlur:h.isOnBlur)?!a:(c?d.isOnChange:h.isOnChange)?a:!0,unsetEmptyArray=(a,e)=>!compact(get(a,e)).length&&unset(a,e);const defaultOptions={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(a={}){let e={...defaultOptions,...a},c={submitCount:0,isDirty:!1,isLoading:isFunction(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},d={},h=isObject(e.defaultValues)||isObject(e.values)?cloneObject(e.defaultValues||e.values)||{}:{},g=e.shouldUnregister?{}:cloneObject(h),_={action:!1,mount:!1,watch:!1},_e={mount:new Set,unMount:new Set,array:new Set,watch:new Set},et,tt=0;const rt={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},$={values:createSubject(),array:createSubject(),state:createSubject()},b=getValidationModes(e.mode),nt=getValidationModes(e.reValidateMode),st=e.criteriaMode===VALIDATION_MODE.all,ot=Yt=>rr=>{clearTimeout(tt),tt=setTimeout(Yt,rr)},it=async Yt=>{if(!a.disabled&&(rt.isValid||Yt)){const rr=e.resolver?isEmptyObject((await xt()).errors):await bt(d,!0);rr!==c.isValid&&$.state.next({isValid:rr})}},at=(Yt,rr)=>{!a.disabled&&(rt.isValidating||rt.validatingFields)&&((Yt||Array.from(_e.mount)).forEach(ar=>{ar&&(rr?set(c.validatingFields,ar,rr):unset(c.validatingFields,ar))}),$.state.next({validatingFields:c.validatingFields,isValidating:!isEmptyObject(c.validatingFields)}))},lt=(Yt,rr=[],ar,yr,hr=!0,mr=!0)=>{if(yr&&ar&&!a.disabled){if(_.action=!0,mr&&Array.isArray(get(d,Yt))){const kr=ar(get(d,Yt),yr.argA,yr.argB);hr&&set(d,Yt,kr)}if(mr&&Array.isArray(get(c.errors,Yt))){const kr=ar(get(c.errors,Yt),yr.argA,yr.argB);hr&&set(c.errors,Yt,kr),unsetEmptyArray(c.errors,Yt)}if(rt.touchedFields&&mr&&Array.isArray(get(c.touchedFields,Yt))){const kr=ar(get(c.touchedFields,Yt),yr.argA,yr.argB);hr&&set(c.touchedFields,Yt,kr)}rt.dirtyFields&&(c.dirtyFields=getDirtyFields(h,g)),$.state.next({name:Yt,isDirty:Mt(Yt,rr),dirtyFields:c.dirtyFields,errors:c.errors,isValid:c.isValid})}else set(g,Yt,rr)},dt=(Yt,rr)=>{set(c.errors,Yt,rr),$.state.next({errors:c.errors})},ht=Yt=>{c.errors=Yt,$.state.next({errors:c.errors,isValid:!1})},pt=(Yt,rr,ar,yr)=>{const hr=get(d,Yt);if(hr){const mr=get(g,Yt,isUndefined(ar)?get(h,Yt):ar);isUndefined(mr)||yr&&yr.defaultChecked||rr?set(g,Yt,rr?mr:getFieldValue(hr._f)):St(Yt,mr),_.mount&&it()}},mt=(Yt,rr,ar,yr,hr)=>{let mr=!1,kr=!1;const vr={name:Yt};if(!a.disabled){const rn=!!(get(d,Yt)&&get(d,Yt)._f&&get(d,Yt)._f.disabled);if(!ar||yr){rt.isDirty&&(kr=c.isDirty,c.isDirty=vr.isDirty=Mt(),mr=kr!==vr.isDirty);const Qr=rn||deepEqual(get(h,Yt),rr);kr=!!(!rn&&get(c.dirtyFields,Yt)),Qr||rn?unset(c.dirtyFields,Yt):set(c.dirtyFields,Yt,!0),vr.dirtyFields=c.dirtyFields,mr=mr||rt.dirtyFields&&kr!==!Qr}if(ar){const Qr=get(c.touchedFields,Yt);Qr||(set(c.touchedFields,Yt,ar),vr.touchedFields=c.touchedFields,mr=mr||rt.touchedFields&&Qr!==ar)}mr&&hr&&$.state.next(vr)}return mr?vr:{}},yt=(Yt,rr,ar,yr)=>{const hr=get(c.errors,Yt),mr=rt.isValid&&isBoolean(rr)&&c.isValid!==rr;if(a.delayError&&ar?(et=ot(()=>dt(Yt,ar)),et(a.delayError)):(clearTimeout(tt),et=null,ar?set(c.errors,Yt,ar):unset(c.errors,Yt)),(ar?!deepEqual(hr,ar):hr)||!isEmptyObject(yr)||mr){const kr={...yr,...mr&&isBoolean(rr)?{isValid:rr}:{},errors:c.errors,name:Yt};c={...c,...kr},$.state.next(kr)}},xt=async Yt=>{at(Yt,!0);const rr=await e.resolver(g,e.context,getResolverOptions(Yt||_e.mount,d,e.criteriaMode,e.shouldUseNativeValidation));return at(Yt),rr},gt=async Yt=>{const{errors:rr}=await xt(Yt);if(Yt)for(const ar of Yt){const yr=get(rr,ar);yr?set(c.errors,ar,yr):unset(c.errors,ar)}else c.errors=rr;return rr},bt=async(Yt,rr,ar={valid:!0})=>{for(const yr in Yt){const hr=Yt[yr];if(hr){const{_f:mr,...kr}=hr;if(mr){const vr=_e.array.has(mr.name),rn=hr._f&&hasPromiseValidation(hr._f);rn&&rt.validatingFields&&at([yr],!0);const Qr=await validateField(hr,g,st,e.shouldUseNativeValidation&&!rr,vr);if(rn&&rt.validatingFields&&at([yr]),Qr[mr.name]&&(ar.valid=!1,rr))break;!rr&&(get(Qr,mr.name)?vr?updateFieldArrayRootError(c.errors,Qr,mr.name):set(c.errors,mr.name,Qr[mr.name]):unset(c.errors,mr.name))}!isEmptyObject(kr)&&await bt(kr,rr,ar)}}return ar.valid},jt=()=>{for(const Yt of _e.unMount){const rr=get(d,Yt);rr&&(rr._f.refs?rr._f.refs.every(ar=>!live(ar)):!live(rr._f.ref))&&wr(Yt)}_e.unMount=new Set},Mt=(Yt,rr)=>!a.disabled&&(Yt&&rr&&set(g,Yt,rr),!deepEqual(er(),h)),Pt=(Yt,rr,ar)=>generateWatchOutput(Yt,_e,{..._.mount?g:isUndefined(rr)?h:isString(Yt)?{[Yt]:rr}:rr},ar,rr),Tt=Yt=>compact(get(_.mount?g:h,Yt,a.shouldUnregister?get(h,Yt,[]):[])),St=(Yt,rr,ar={})=>{const yr=get(d,Yt);let hr=rr;if(yr){const mr=yr._f;mr&&(!mr.disabled&&set(g,Yt,getFieldValueAs(rr,mr)),hr=isHTMLElement(mr.ref)&&isNullOrUndefined(rr)?"":rr,isMultipleSelect(mr.ref)?[...mr.ref.options].forEach(kr=>kr.selected=hr.includes(kr.value)):mr.refs?isCheckBoxInput(mr.ref)?mr.refs.length>1?mr.refs.forEach(kr=>(!kr.defaultChecked||!kr.disabled)&&(kr.checked=Array.isArray(hr)?!!hr.find(vr=>vr===kr.value):hr===kr.value)):mr.refs[0]&&(mr.refs[0].checked=!!hr):mr.refs.forEach(kr=>kr.checked=kr.value===hr):isFileInput(mr.ref)?mr.ref.value="":(mr.ref.value=hr,mr.ref.type||$.values.next({name:Yt,values:{...g}})))}(ar.shouldDirty||ar.shouldTouch)&&mt(Yt,hr,ar.shouldTouch,ar.shouldDirty,!0),ar.shouldValidate&&zt(Yt)},wt=(Yt,rr,ar)=>{for(const yr in rr){const hr=rr[yr],mr=`${Yt}.${yr}`,kr=get(d,mr);(_e.array.has(Yt)||isObject(hr)||kr&&!kr._f)&&!isDateObject(hr)?wt(mr,hr,ar):St(mr,hr,ar)}},Rt=(Yt,rr,ar={})=>{const yr=get(d,Yt),hr=_e.array.has(Yt),mr=cloneObject(rr);set(g,Yt,mr),hr?($.array.next({name:Yt,values:{...g}}),(rt.isDirty||rt.dirtyFields)&&ar.shouldDirty&&$.state.next({name:Yt,dirtyFields:getDirtyFields(h,g),isDirty:Mt(Yt,mr)})):yr&&!yr._f&&!isNullOrUndefined(mr)?wt(Yt,mr,ar):St(Yt,mr,ar),isWatched(Yt,_e)&&$.state.next({...c}),$.values.next({name:_.mount?Yt:void 0,values:{...g}})},At=async Yt=>{_.mount=!0;const rr=Yt.target;let ar=rr.name,yr=!0;const hr=get(d,ar),mr=()=>rr.type?getFieldValue(hr._f):getEventValue(Yt),kr=vr=>{yr=Number.isNaN(vr)||isDateObject(vr)&&isNaN(vr.getTime())||deepEqual(vr,get(g,ar,vr))};if(hr){let vr,rn;const Qr=mr(),bn=Yt.type===EVENTS.BLUR||Yt.type===EVENTS.FOCUS_OUT,fn=!hasValidation(hr._f)&&!e.resolver&&!get(c.errors,ar)&&!hr._f.deps||skipValidation(bn,get(c.touchedFields,ar),c.isSubmitted,nt,b),En=isWatched(ar,_e,bn);set(g,ar,Qr),bn?(hr._f.onBlur&&hr._f.onBlur(Yt),et&&et(0)):hr._f.onChange&&hr._f.onChange(Yt);const kn=mt(ar,Qr,bn,!1),ln=!isEmptyObject(kn)||En;if(!bn&&$.values.next({name:ar,type:Yt.type,values:{...g}}),fn)return rt.isValid&&(a.mode==="onBlur"?bn&&it():it()),ln&&$.state.next({name:ar,...En?{}:kn});if(!bn&&En&&$.state.next({...c}),e.resolver){const{errors:Tn}=await xt([ar]);if(kr(Qr),yr){const Mr=schemaErrorLookup(c.errors,d,ar),_n=schemaErrorLookup(Tn,d,Mr.name||ar);vr=_n.error,ar=_n.name,rn=isEmptyObject(Tn)}}else at([ar],!0),vr=(await validateField(hr,g,st,e.shouldUseNativeValidation))[ar],at([ar]),kr(Qr),yr&&(vr?rn=!1:rt.isValid&&(rn=await bt(d,!0)));yr&&(hr._f.deps&&zt(hr._f.deps),yt(ar,rn,vr,kn))}},Et=(Yt,rr)=>{if(get(c.errors,rr)&&Yt.focus)return Yt.focus(),1},zt=async(Yt,rr={})=>{let ar,yr;const hr=convertToArrayPayload(Yt);if(e.resolver){const mr=await gt(isUndefined(Yt)?Yt:hr);ar=isEmptyObject(mr),yr=Yt?!hr.some(kr=>get(mr,kr)):ar}else Yt?(yr=(await Promise.all(hr.map(async mr=>{const kr=get(d,mr);return await bt(kr&&kr._f?{[mr]:kr}:kr)}))).every(Boolean),!(!yr&&!c.isValid)&&it()):yr=ar=await bt(d);return $.state.next({...!isString(Yt)||rt.isValid&&ar!==c.isValid?{}:{name:Yt},...e.resolver||!Yt?{isValid:ar}:{},errors:c.errors}),rr.shouldFocus&&!yr&&iterateFieldsByAction(d,Et,Yt?hr:_e.mount),yr},er=Yt=>{const rr={..._.mount?g:h};return isUndefined(Yt)?rr:isString(Yt)?get(rr,Yt):Yt.map(ar=>get(rr,ar))},pr=(Yt,rr)=>({invalid:!!get((rr||c).errors,Yt),isDirty:!!get((rr||c).dirtyFields,Yt),error:get((rr||c).errors,Yt),isValidating:!!get(c.validatingFields,Yt),isTouched:!!get((rr||c).touchedFields,Yt)}),_r=Yt=>{Yt&&convertToArrayPayload(Yt).forEach(rr=>unset(c.errors,rr)),$.state.next({errors:Yt?c.errors:{}})},Er=(Yt,rr,ar)=>{const yr=(get(d,Yt,{_f:{}})._f||{}).ref,hr=get(c.errors,Yt)||{},{ref:mr,message:kr,type:vr,...rn}=hr;set(c.errors,Yt,{...rn,...rr,ref:yr}),$.state.next({name:Yt,errors:c.errors,isValid:!1}),ar&&ar.shouldFocus&&yr&&yr.focus&&yr.focus()},Tr=(Yt,rr)=>isFunction(Yt)?$.values.subscribe({next:ar=>Yt(Pt(void 0,rr),ar)}):Pt(Yt,rr,!0),wr=(Yt,rr={})=>{for(const ar of Yt?convertToArrayPayload(Yt):_e.mount)_e.mount.delete(ar),_e.array.delete(ar),rr.keepValue||(unset(d,ar),unset(g,ar)),!rr.keepError&&unset(c.errors,ar),!rr.keepDirty&&unset(c.dirtyFields,ar),!rr.keepTouched&&unset(c.touchedFields,ar),!rr.keepIsValidating&&unset(c.validatingFields,ar),!e.shouldUnregister&&!rr.keepDefaultValue&&unset(h,ar);$.values.next({values:{...g}}),$.state.next({...c,...rr.keepDirty?{isDirty:Mt()}:{}}),!rr.keepIsValid&&it()},gr=({disabled:Yt,name:rr,field:ar,fields:yr,value:hr})=>{if(isBoolean(Yt)&&_.mount||Yt){const mr=Yt?void 0:isUndefined(hr)?getFieldValue(ar?ar._f:get(yr,rr)._f):hr;set(g,rr,mr),mt(rr,mr,!1,!1,!0)}},Pr=(Yt,rr={})=>{let ar=get(d,Yt);const yr=isBoolean(rr.disabled)||isBoolean(a.disabled);return set(d,Yt,{...ar||{},_f:{...ar&&ar._f?ar._f:{ref:{name:Yt}},name:Yt,mount:!0,...rr}}),_e.mount.add(Yt),ar?gr({field:ar,disabled:isBoolean(rr.disabled)?rr.disabled:a.disabled,name:Yt,value:rr.value}):pt(Yt,!0,rr.value),{...yr?{disabled:rr.disabled||a.disabled}:{},...e.progressive?{required:!!rr.required,min:getRuleValue(rr.min),max:getRuleValue(rr.max),minLength:getRuleValue(rr.minLength),maxLength:getRuleValue(rr.maxLength),pattern:getRuleValue(rr.pattern)}:{},name:Yt,onChange:At,onBlur:At,ref:hr=>{if(hr){Pr(Yt,rr),ar=get(d,Yt);const mr=isUndefined(hr.value)&&hr.querySelectorAll&&hr.querySelectorAll("input,select,textarea")[0]||hr,kr=isRadioOrCheckbox(mr),vr=ar._f.refs||[];if(kr?vr.find(rn=>rn===mr):mr===ar._f.ref)return;set(d,Yt,{_f:{...ar._f,...kr?{refs:[...vr.filter(live),mr,...Array.isArray(get(h,Yt))?[{}]:[]],ref:{type:mr.type,name:Yt}}:{ref:mr}}}),pt(Yt,!1,void 0,mr)}else ar=get(d,Yt,{}),ar._f&&(ar._f.mount=!1),(e.shouldUnregister||rr.shouldUnregister)&&!(isNameInFieldArray(_e.array,Yt)&&_.action)&&_e.unMount.add(Yt)}}},Nr=()=>e.shouldFocusError&&iterateFieldsByAction(d,Et,_e.mount),Ar=Yt=>{isBoolean(Yt)&&($.state.next({disabled:Yt}),iterateFieldsByAction(d,(rr,ar)=>{const yr=get(d,ar);yr&&(rr.disabled=yr._f.disabled||Yt,Array.isArray(yr._f.refs)&&yr._f.refs.forEach(hr=>{hr.disabled=yr._f.disabled||Yt}))},0,!1))},Rr=(Yt,rr)=>async ar=>{let yr;ar&&(ar.preventDefault&&ar.preventDefault(),ar.persist&&ar.persist());let hr=cloneObject(g);if($.state.next({isSubmitting:!0}),e.resolver){const{errors:mr,values:kr}=await xt();c.errors=mr,hr=kr}else await bt(d);if(unset(c.errors,"root"),isEmptyObject(c.errors)){$.state.next({errors:{}});try{await Yt(hr,ar)}catch(mr){yr=mr}}else rr&&await rr({...c.errors},ar),Nr(),setTimeout(Nr);if($.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(c.errors)&&!yr,submitCount:c.submitCount+1,errors:c.errors}),yr)throw yr},Ir=(Yt,rr={})=>{get(d,Yt)&&(isUndefined(rr.defaultValue)?Rt(Yt,cloneObject(get(h,Yt))):(Rt(Yt,rr.defaultValue),set(h,Yt,cloneObject(rr.defaultValue))),rr.keepTouched||unset(c.touchedFields,Yt),rr.keepDirty||(unset(c.dirtyFields,Yt),c.isDirty=rr.defaultValue?Mt(Yt,cloneObject(get(h,Yt))):Mt()),rr.keepError||(unset(c.errors,Yt),rt.isValid&&it()),$.state.next({...c}))},Ur=(Yt,rr={})=>{const ar=Yt?cloneObject(Yt):h,yr=cloneObject(ar),hr=isEmptyObject(Yt),mr=hr?h:yr;if(rr.keepDefaultValues||(h=ar),!rr.keepValues){if(rr.keepDirtyValues){const kr=new Set([..._e.mount,...Object.keys(getDirtyFields(h,g))]);for(const vr of Array.from(kr))get(c.dirtyFields,vr)?set(mr,vr,get(g,vr)):Rt(vr,get(mr,vr))}else{if(isWeb&&isUndefined(Yt))for(const kr of _e.mount){const vr=get(d,kr);if(vr&&vr._f){const rn=Array.isArray(vr._f.refs)?vr._f.refs[0]:vr._f.ref;if(isHTMLElement(rn)){const Qr=rn.closest("form");if(Qr){Qr.reset();break}}}}d={}}g=a.shouldUnregister?rr.keepDefaultValues?cloneObject(h):{}:cloneObject(mr),$.array.next({values:{...mr}}),$.values.next({values:{...mr}})}_e={mount:rr.keepDirtyValues?_e.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},_.mount=!rt.isValid||!!rr.keepIsValid||!!rr.keepDirtyValues,_.watch=!!a.shouldUnregister,$.state.next({submitCount:rr.keepSubmitCount?c.submitCount:0,isDirty:hr?!1:rr.keepDirty?c.isDirty:!!(rr.keepDefaultValues&&!deepEqual(Yt,h)),isSubmitted:rr.keepIsSubmitted?c.isSubmitted:!1,dirtyFields:hr?{}:rr.keepDirtyValues?rr.keepDefaultValues&&g?getDirtyFields(h,g):c.dirtyFields:rr.keepDefaultValues&&Yt?getDirtyFields(h,Yt):rr.keepDirty?c.dirtyFields:{},touchedFields:rr.keepTouched?c.touchedFields:{},errors:rr.keepErrors?c.errors:{},isSubmitSuccessful:rr.keepIsSubmitSuccessful?c.isSubmitSuccessful:!1,isSubmitting:!1})},Fr=(Yt,rr)=>Ur(isFunction(Yt)?Yt(g):Yt,rr);return{control:{register:Pr,unregister:wr,getFieldState:pr,handleSubmit:Rr,setError:Er,_executeSchema:xt,_getWatch:Pt,_getDirty:Mt,_updateValid:it,_removeUnmounted:jt,_updateFieldArray:lt,_updateDisabledField:gr,_getFieldArray:Tt,_reset:Ur,_resetDefaultValues:()=>isFunction(e.defaultValues)&&e.defaultValues().then(Yt=>{Fr(Yt,e.resetOptions),$.state.next({isLoading:!1})}),_updateFormState:Yt=>{c={...c,...Yt}},_disableForm:Ar,_subjects:$,_proxyFormState:rt,_setErrors:ht,get _fields(){return d},get _formValues(){return g},get _state(){return _},set _state(Yt){_=Yt},get _defaultValues(){return h},get _names(){return _e},set _names(Yt){_e=Yt},get _formState(){return c},set _formState(Yt){c=Yt},get _options(){return e},set _options(Yt){e={...e,...Yt}}},trigger:zt,register:Pr,handleSubmit:Rr,watch:Tr,setValue:Rt,getValues:er,reset:Fr,resetField:Ir,clearErrors:_r,unregister:wr,setError:Er,setFocus:(Yt,rr={})=>{const ar=get(d,Yt),yr=ar&&ar._f;if(yr){const hr=yr.refs?yr.refs[0]:yr.ref;hr.focus&&(hr.focus(),rr.shouldSelect&&hr.select())}},getFieldState:pr}}function useForm(a={}){const e=React.useRef(),c=React.useRef(),[d,h]=React.useState({isDirty:!1,isValidating:!1,isLoading:isFunction(a.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1,defaultValues:isFunction(a.defaultValues)?void 0:a.defaultValues});e.current||(e.current={...createFormControl(a),formState:d});const g=e.current.control;return g._options=a,useSubscribe({subject:g._subjects.state,next:_=>{shouldRenderFormState(_,g._proxyFormState,g._updateFormState,!0)&&h({...g._formState})}}),React.useEffect(()=>g._disableForm(a.disabled),[g,a.disabled]),React.useEffect(()=>{if(g._proxyFormState.isDirty){const _=g._getDirty();_!==d.isDirty&&g._subjects.state.next({isDirty:_})}},[g,d.isDirty]),React.useEffect(()=>{a.values&&!deepEqual(a.values,c.current)?(g._reset(a.values,g._options.resetOptions),c.current=a.values,h(_=>({..._}))):g._resetDefaultValues()},[a.values,g]),React.useEffect(()=>{a.errors&&g._setErrors(a.errors)},[a.errors,g]),React.useEffect(()=>{g._state.mount||(g._updateValid(),g._state.mount=!0),g._state.watch&&(g._state.watch=!1,g._subjects.state.next({...g._formState})),g._removeUnmounted()}),React.useEffect(()=>{a.shouldUnregister&&g._subjects.values.next({values:g._getWatch()})},[a.shouldUnregister,g]),React.useEffect(()=>{e.current&&(e.current.watch=e.current.watch.bind({}))},[d]),e.current.formState=getProxyFormState(d,g),e.current}const s=(a,e,c)=>{if(a&&"reportValidity"in a){const d=get(c,e);a.setCustomValidity(d&&d.message||""),a.reportValidity()}},o=(a,e)=>{for(const c in e.fields){const d=e.fields[c];d&&d.ref&&"reportValidity"in d.ref?s(d.ref,c,a):d.refs&&d.refs.forEach(h=>s(h,c,a))}},r=(a,e)=>{e.shouldUseNativeValidation&&o(a,e);const c={};for(const d in a){const h=get(e.fields,d),g=Object.assign(a[d]||{},{ref:h&&h.ref});if(i$1(e.names||Object.keys(a),d)){const _=Object.assign({},get(c,d));set(_,"root",g),set(c,d,_)}else set(c,d,g)}return c},i$1=(a,e)=>a.some(c=>c.startsWith(e+"."));var n=function(a,e){for(var c={};a.length;){var d=a[0],h=d.code,g=d.message,_=d.path.join(".");if(!c[_])if("unionErrors"in d){var _e=d.unionErrors[0].errors[0];c[_]={message:_e.message,type:_e.code}}else c[_]={message:g,type:h};if("unionErrors"in d&&d.unionErrors.forEach(function(rt){return rt.errors.forEach(function($){return a.push($)})}),e){var et=c[_].types,tt=et&&et[d.code];c[_]=appendErrors(_,e,c,h,tt?[].concat(tt,d.message):d.message)}a.shift()}return c},t=function(a,e,c){return c===void 0&&(c={}),function(d,h,g){try{return Promise.resolve(function(_,_e){try{var et=Promise.resolve(a[c.mode==="sync"?"parse":"parseAsync"](d,e)).then(function(tt){return g.shouldUseNativeValidation&&o({},g),{errors:{},values:c.raw?d:tt}})}catch(tt){return _e(tt)}return et&&et.then?et.then(void 0,_e):et}(0,function(_){if(function(_e){return Array.isArray(_e==null?void 0:_e.errors)}(_))return{values:{},errors:r(n(_.errors,!g.shouldUseNativeValidation&&g.criteriaMode==="all"),g)};throw _}))}catch(_){return Promise.reject(_)}}},util;(function(a){a.assertEqual=h=>h;function e(h){}a.assertIs=e;function c(h){throw new Error}a.assertNever=c,a.arrayToEnum=h=>{const g={};for(const _ of h)g[_]=_;return g},a.getValidEnumValues=h=>{const g=a.objectKeys(h).filter(_e=>typeof h[h[_e]]!="number"),_={};for(const _e of g)_[_e]=h[_e];return a.objectValues(_)},a.objectValues=h=>a.objectKeys(h).map(function(g){return h[g]}),a.objectKeys=typeof Object.keys=="function"?h=>Object.keys(h):h=>{const g=[];for(const _ in h)Object.prototype.hasOwnProperty.call(h,_)&&g.push(_);return g},a.find=(h,g)=>{for(const _ of h)if(g(_))return _},a.isInteger=typeof Number.isInteger=="function"?h=>Number.isInteger(h):h=>typeof h=="number"&&isFinite(h)&&Math.floor(h)===h;function d(h,g=" | "){return h.map(_=>typeof _=="string"?`'${_}'`:_).join(g)}a.joinValues=d,a.jsonStringifyReplacer=(h,g)=>typeof g=="bigint"?g.toString():g})(util||(util={}));var objectUtil;(function(a){a.mergeShapes=(e,c)=>({...e,...c})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=a=>{switch(typeof a){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(a)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(a)?ZodParsedType.array:a===null?ZodParsedType.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&a instanceof Map?ZodParsedType.map:typeof Set<"u"&&a instanceof Set?ZodParsedType.set:typeof Date<"u"&&a instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=d=>{this.issues=[...this.issues,d]},this.addIssues=(d=[])=>{this.issues=[...this.issues,...d]};const c=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,c):this.__proto__=c,this.name="ZodError",this.issues=e}format(e){const c=e||function(g){return g.message},d={_errors:[]},h=g=>{for(const _ of g.issues)if(_.code==="invalid_union")_.unionErrors.map(h);else if(_.code==="invalid_return_type")h(_.returnTypeError);else if(_.code==="invalid_arguments")h(_.argumentsError);else if(_.path.length===0)d._errors.push(c(_));else{let _e=d,et=0;for(;et<_.path.length;){const tt=_.path[et];et===_.path.length-1?(_e[tt]=_e[tt]||{_errors:[]},_e[tt]._errors.push(c(_))):_e[tt]=_e[tt]||{_errors:[]},_e=_e[tt],et++}}};return h(this),d}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=c=>c.message){const c={},d=[];for(const h of this.issues)h.path.length>0?(c[h.path[0]]=c[h.path[0]]||[],c[h.path[0]].push(e(h))):d.push(e(h));return{formErrors:d,fieldErrors:c}}get formErrors(){return this.flatten()}}ZodError.create=a=>new ZodError(a);const errorMap=(a,e)=>{let c;switch(a.code){case ZodIssueCode.invalid_type:a.received===ZodParsedType.undefined?c="Required":c=`Expected ${a.expected}, received ${a.received}`;break;case ZodIssueCode.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(a.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:c=`Unrecognized key(s) in object: ${util.joinValues(a.keys,", ")}`;break;case ZodIssueCode.invalid_union:c="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${util.joinValues(a.options)}`;break;case ZodIssueCode.invalid_enum_value:c=`Invalid enum value. Expected ${util.joinValues(a.options)}, received '${a.received}'`;break;case ZodIssueCode.invalid_arguments:c="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:c="Invalid function return type";break;case ZodIssueCode.invalid_date:c="Invalid date";break;case ZodIssueCode.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(c=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(c=`${c} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?c=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?c=`Invalid input: must end with "${a.validation.endsWith}"`:util.assertNever(a.validation):a.validation!=="regex"?c=`Invalid ${a.validation}`:c="Invalid";break;case ZodIssueCode.too_small:a.type==="array"?c=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?c=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?c=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?c=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:c="Invalid input";break;case ZodIssueCode.too_big:a.type==="array"?c=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?c=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?c=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?c=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?c=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:c="Invalid input";break;case ZodIssueCode.custom:c="Invalid input";break;case ZodIssueCode.invalid_intersection_types:c="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:c=`Number must be a multiple of ${a.multipleOf}`;break;case ZodIssueCode.not_finite:c="Number must be finite";break;default:c=e.defaultError,util.assertNever(a)}return{message:c}};let overrideErrorMap=errorMap;function getErrorMap(){return overrideErrorMap}const makeIssue=a=>{const{data:e,path:c,errorMaps:d,issueData:h}=a,g=[...c,...h.path||[]],_={...h,path:g};if(h.message!==void 0)return{...h,path:g,message:h.message};let _e="";const et=d.filter(tt=>!!tt).slice().reverse();for(const tt of et)_e=tt(_,{data:e,defaultError:_e}).message;return{...h,path:g,message:_e}};function addIssueToContext(a,e){const c=getErrorMap(),d=makeIssue({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,c,c===errorMap?void 0:errorMap].filter(h=>!!h)});a.common.issues.push(d)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,c){const d=[];for(const h of c){if(h.status==="aborted")return INVALID;h.status==="dirty"&&e.dirty(),d.push(h.value)}return{status:e.value,value:d}}static async mergeObjectAsync(e,c){const d=[];for(const h of c){const g=await h.key,_=await h.value;d.push({key:g,value:_})}return ParseStatus.mergeObjectSync(e,d)}static mergeObjectSync(e,c){const d={};for(const h of c){const{key:g,value:_}=h;if(g.status==="aborted"||_.status==="aborted")return INVALID;g.status==="dirty"&&e.dirty(),_.status==="dirty"&&e.dirty(),g.value!=="__proto__"&&(typeof _.value<"u"||h.alwaysSet)&&(d[g.value]=_.value)}return{status:e.value,value:d}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=a=>({status:"dirty",value:a}),OK=a=>({status:"valid",value:a}),isAborted=a=>a.status==="aborted",isDirty=a=>a.status==="dirty",isValid=a=>a.status==="valid",isAsync=a=>typeof Promise<"u"&&a instanceof Promise;function __classPrivateFieldGet(a,e,c,d){if(typeof e=="function"?a!==e||!d:!e.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(a)}function __classPrivateFieldSet(a,e,c,d,h){if(typeof e=="function"?a!==e||!h:!e.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(a,c),c}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(e,c,d,h){this._cachedPath=[],this.parent=e,this.data=c,this._path=d,this._key=h}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(a,e)=>{if(isValid(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const c=new ZodError(a.common.issues);return this._error=c,this._error}}};function processCreateParams(a){if(!a)return{};const{errorMap:e,invalid_type_error:c,required_error:d,description:h}=a;if(e&&(c||d))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:h}:{errorMap:(_,_e)=>{var et,tt;const{message:rt}=a;return _.code==="invalid_enum_value"?{message:rt??_e.defaultError}:typeof _e.data>"u"?{message:(et=rt??d)!==null&&et!==void 0?et:_e.defaultError}:_.code!=="invalid_type"?{message:_e.defaultError}:{message:(tt=rt??c)!==null&&tt!==void 0?tt:_e.defaultError}},description:h}}class ZodType{get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,c){return c||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const c=this._parse(e);if(isAsync(c))throw new Error("Synchronous parse encountered promise.");return c}_parseAsync(e){const c=this._parse(e);return Promise.resolve(c)}parse(e,c){const d=this.safeParse(e,c);if(d.success)return d.data;throw d.error}safeParse(e,c){var d;const h={common:{issues:[],async:(d=c==null?void 0:c.async)!==null&&d!==void 0?d:!1,contextualErrorMap:c==null?void 0:c.errorMap},path:(c==null?void 0:c.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},g=this._parseSync({data:e,path:h.path,parent:h});return handleResult(h,g)}"~validate"(e){var c,d;const h={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)};if(!this["~standard"].async)try{const g=this._parseSync({data:e,path:[],parent:h});return isValid(g)?{value:g.value}:{issues:h.common.issues}}catch(g){!((d=(c=g==null?void 0:g.message)===null||c===void 0?void 0:c.toLowerCase())===null||d===void 0)&&d.includes("encountered")&&(this["~standard"].async=!0),h.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:h}).then(g=>isValid(g)?{value:g.value}:{issues:h.common.issues})}async parseAsync(e,c){const d=await this.safeParseAsync(e,c);if(d.success)return d.data;throw d.error}async safeParseAsync(e,c){const d={common:{issues:[],contextualErrorMap:c==null?void 0:c.errorMap,async:!0},path:(c==null?void 0:c.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},h=this._parse({data:e,path:d.path,parent:d}),g=await(isAsync(h)?h:Promise.resolve(h));return handleResult(d,g)}refine(e,c){const d=h=>typeof c=="string"||typeof c>"u"?{message:c}:typeof c=="function"?c(h):c;return this._refinement((h,g)=>{const _=e(h),_e=()=>g.addIssue({code:ZodIssueCode.custom,...d(h)});return typeof Promise<"u"&&_ instanceof Promise?_.then(et=>et?!0:(_e(),!1)):_?!0:(_e(),!1)})}refinement(e,c){return this._refinement((d,h)=>e(d)?!0:(h.addIssue(typeof c=="function"?c(d,h):c),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:c=>this["~validate"](c)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const c=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:c,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const c=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:c,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const c=this.constructor;return new c({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);const c=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${c}`}function timeRegex(a){return new RegExp(`^${timeRegexSource(a)}$`)}function datetimeRegex(a){let e=`${dateRegexSource}T${timeRegexSource(a)}`;const c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${c.join("|")})`,new RegExp(`^${e}$`)}function isValidIP(a,e){return!!((e==="v4"||!e)&&ipv4Regex.test(a)||(e==="v6"||!e)&&ipv6Regex.test(a))}function isValidJWT(a,e){if(!jwtRegex.test(a))return!1;try{const[c]=a.split("."),d=c.replace(/-/g,"+").replace(/_/g,"/").padEnd(c.length+(4-c.length%4)%4,"="),h=JSON.parse(atob(d));return!(typeof h!="object"||h===null||!h.typ||!h.alg||e&&h.alg!==e)}catch{return!1}}function isValidCidr(a,e){return!!((e==="v4"||!e)&&ipv4CidrRegex.test(a)||(e==="v6"||!e)&&ipv6CidrRegex.test(a))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const g=this._getOrReturnCtx(e);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:g.parsedType}),INVALID}const d=new ParseStatus;let h;for(const g of this._def.checks)if(g.kind==="min")e.data.length<g.value&&(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.too_small,minimum:g.value,type:"string",inclusive:!0,exact:!1,message:g.message}),d.dirty());else if(g.kind==="max")e.data.length>g.value&&(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.too_big,maximum:g.value,type:"string",inclusive:!0,exact:!1,message:g.message}),d.dirty());else if(g.kind==="length"){const _=e.data.length>g.value,_e=e.data.length<g.value;(_||_e)&&(h=this._getOrReturnCtx(e,h),_?addIssueToContext(h,{code:ZodIssueCode.too_big,maximum:g.value,type:"string",inclusive:!0,exact:!0,message:g.message}):_e&&addIssueToContext(h,{code:ZodIssueCode.too_small,minimum:g.value,type:"string",inclusive:!0,exact:!0,message:g.message}),d.dirty())}else if(g.kind==="email")emailRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"email",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"emoji",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="uuid")uuidRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"uuid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="nanoid")nanoidRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="cuid")cuidRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"cuid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="cuid2")cuid2Regex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="ulid")ulidRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"ulid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="url")try{new URL(e.data)}catch{h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"url",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()}else g.kind==="regex"?(g.regex.lastIndex=0,g.regex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"regex",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty())):g.kind==="trim"?e.data=e.data.trim():g.kind==="includes"?e.data.includes(g.value,g.position)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:{includes:g.value,position:g.position},message:g.message}),d.dirty()):g.kind==="toLowerCase"?e.data=e.data.toLowerCase():g.kind==="toUpperCase"?e.data=e.data.toUpperCase():g.kind==="startsWith"?e.data.startsWith(g.value)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:{startsWith:g.value},message:g.message}),d.dirty()):g.kind==="endsWith"?e.data.endsWith(g.value)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:{endsWith:g.value},message:g.message}),d.dirty()):g.kind==="datetime"?datetimeRegex(g).test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:"datetime",message:g.message}),d.dirty()):g.kind==="date"?dateRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:"date",message:g.message}),d.dirty()):g.kind==="time"?timeRegex(g).test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:"time",message:g.message}),d.dirty()):g.kind==="duration"?durationRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"duration",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="ip"?isValidIP(e.data,g.version)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"ip",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="jwt"?isValidJWT(e.data,g.alg)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"jwt",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="cidr"?isValidCidr(e.data,g.version)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"cidr",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="base64"?base64Regex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"base64",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="base64url"?base64urlRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"base64url",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):util.assertNever(g);return{status:d.value,value:e.data}}_regex(e,c,d){return this.refinement(h=>e.test(h),{validation:c,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(d)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...errorUtil.errToObj(e)})}datetime(e){var c,d;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(c=e==null?void 0:e.offset)!==null&&c!==void 0?c:!1,local:(d=e==null?void 0:e.local)!==null&&d!==void 0?d:!1,...errorUtil.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...errorUtil.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...errorUtil.errToObj(e)})}regex(e,c){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(c)})}includes(e,c){return this._addCheck({kind:"includes",value:e,position:c==null?void 0:c.position,...errorUtil.errToObj(c==null?void 0:c.message)})}startsWith(e,c){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(c)})}endsWith(e,c){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(c)})}min(e,c){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(c)})}max(e,c){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(c)})}length(e,c){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(c)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const c of this._def.checks)c.kind==="min"&&(e===null||c.value>e)&&(e=c.value);return e}get maxLength(){let e=null;for(const c of this._def.checks)c.kind==="max"&&(e===null||c.value<e)&&(e=c.value);return e}}ZodString.create=a=>{var e;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(e=a==null?void 0:a.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(a)})};function floatSafeRemainder(a,e){const c=(a.toString().split(".")[1]||"").length,d=(e.toString().split(".")[1]||"").length,h=c>d?c:d,g=parseInt(a.toFixed(h).replace(".","")),_=parseInt(e.toFixed(h).replace(".",""));return g%_/Math.pow(10,h)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const g=this._getOrReturnCtx(e);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:g.parsedType}),INVALID}let d;const h=new ParseStatus;for(const g of this._def.checks)g.kind==="int"?util.isInteger(e.data)||(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:g.message}),h.dirty()):g.kind==="min"?(g.inclusive?e.data<g.value:e.data<=g.value)&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:g.value,type:"number",inclusive:g.inclusive,exact:!1,message:g.message}),h.dirty()):g.kind==="max"?(g.inclusive?e.data>g.value:e.data>=g.value)&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:g.value,type:"number",inclusive:g.inclusive,exact:!1,message:g.message}),h.dirty()):g.kind==="multipleOf"?floatSafeRemainder(e.data,g.value)!==0&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.not_multiple_of,multipleOf:g.value,message:g.message}),h.dirty()):g.kind==="finite"?Number.isFinite(e.data)||(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.not_finite,message:g.message}),h.dirty()):util.assertNever(g);return{status:h.value,value:e.data}}gte(e,c){return this.setLimit("min",e,!0,errorUtil.toString(c))}gt(e,c){return this.setLimit("min",e,!1,errorUtil.toString(c))}lte(e,c){return this.setLimit("max",e,!0,errorUtil.toString(c))}lt(e,c){return this.setLimit("max",e,!1,errorUtil.toString(c))}setLimit(e,c,d,h){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:c,inclusive:d,message:errorUtil.toString(h)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,c){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(c)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const c of this._def.checks)c.kind==="min"&&(e===null||c.value>e)&&(e=c.value);return e}get maxValue(){let e=null;for(const c of this._def.checks)c.kind==="max"&&(e===null||c.value<e)&&(e=c.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util.isInteger(e.value))}get isFinite(){let e=null,c=null;for(const d of this._def.checks){if(d.kind==="finite"||d.kind==="int"||d.kind==="multipleOf")return!0;d.kind==="min"?(c===null||d.value>c)&&(c=d.value):d.kind==="max"&&(e===null||d.value<e)&&(e=d.value)}return Number.isFinite(c)&&Number.isFinite(e)}}ZodNumber.create=a=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(a==null?void 0:a.coerce)||!1,...processCreateParams(a)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ZodParsedType.bigint)return this._getInvalidInput(e);let d;const h=new ParseStatus;for(const g of this._def.checks)g.kind==="min"?(g.inclusive?e.data<g.value:e.data<=g.value)&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.too_small,type:"bigint",minimum:g.value,inclusive:g.inclusive,message:g.message}),h.dirty()):g.kind==="max"?(g.inclusive?e.data>g.value:e.data>=g.value)&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.too_big,type:"bigint",maximum:g.value,inclusive:g.inclusive,message:g.message}),h.dirty()):g.kind==="multipleOf"?e.data%g.value!==BigInt(0)&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.not_multiple_of,multipleOf:g.value,message:g.message}),h.dirty()):util.assertNever(g);return{status:h.value,value:e.data}}_getInvalidInput(e){const c=this._getOrReturnCtx(e);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:c.parsedType}),INVALID}gte(e,c){return this.setLimit("min",e,!0,errorUtil.toString(c))}gt(e,c){return this.setLimit("min",e,!1,errorUtil.toString(c))}lte(e,c){return this.setLimit("max",e,!0,errorUtil.toString(c))}lt(e,c){return this.setLimit("max",e,!1,errorUtil.toString(c))}setLimit(e,c,d,h){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:c,inclusive:d,message:errorUtil.toString(h)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,c){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(c)})}get minValue(){let e=null;for(const c of this._def.checks)c.kind==="min"&&(e===null||c.value>e)&&(e=c.value);return e}get maxValue(){let e=null;for(const c of this._def.checks)c.kind==="max"&&(e===null||c.value<e)&&(e=c.value);return e}}ZodBigInt.create=a=>{var e;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(e=a==null?void 0:a.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(a)})};class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:d.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=a=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(a==null?void 0:a.coerce)||!1,...processCreateParams(a)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const g=this._getOrReturnCtx(e);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:g.parsedType}),INVALID}if(isNaN(e.data.getTime())){const g=this._getOrReturnCtx(e);return addIssueToContext(g,{code:ZodIssueCode.invalid_date}),INVALID}const d=new ParseStatus;let h;for(const g of this._def.checks)g.kind==="min"?e.data.getTime()<g.value&&(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.too_small,message:g.message,inclusive:!0,exact:!1,minimum:g.value,type:"date"}),d.dirty()):g.kind==="max"?e.data.getTime()>g.value&&(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.too_big,message:g.message,inclusive:!0,exact:!1,maximum:g.value,type:"date"}),d.dirty()):util.assertNever(g);return{status:d.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,c){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(c)})}max(e,c){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(c)})}get minDate(){let e=null;for(const c of this._def.checks)c.kind==="min"&&(e===null||c.value>e)&&(e=c.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const c of this._def.checks)c.kind==="max"&&(e===null||c.value<e)&&(e=c.value);return e!=null?new Date(e):null}}ZodDate.create=a=>new ZodDate({checks:[],coerce:(a==null?void 0:a.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(a)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:d.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=a=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(a)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:d.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=a=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(a)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:d.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=a=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(a)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=a=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(a)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=a=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(a)});class ZodNever extends ZodType{_parse(e){const c=this._getOrReturnCtx(e);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:c.parsedType}),INVALID}}ZodNever.create=a=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(a)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:d.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=a=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(a)});class ZodArray extends ZodType{_parse(e){const{ctx:c,status:d}=this._processInputParams(e),h=this._def;if(c.parsedType!==ZodParsedType.array)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:c.parsedType}),INVALID;if(h.exactLength!==null){const _=c.data.length>h.exactLength.value,_e=c.data.length<h.exactLength.value;(_||_e)&&(addIssueToContext(c,{code:_?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:_e?h.exactLength.value:void 0,maximum:_?h.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:h.exactLength.message}),d.dirty())}if(h.minLength!==null&&c.data.length<h.minLength.value&&(addIssueToContext(c,{code:ZodIssueCode.too_small,minimum:h.minLength.value,type:"array",inclusive:!0,exact:!1,message:h.minLength.message}),d.dirty()),h.maxLength!==null&&c.data.length>h.maxLength.value&&(addIssueToContext(c,{code:ZodIssueCode.too_big,maximum:h.maxLength.value,type:"array",inclusive:!0,exact:!1,message:h.maxLength.message}),d.dirty()),c.common.async)return Promise.all([...c.data].map((_,_e)=>h.type._parseAsync(new ParseInputLazyPath(c,_,c.path,_e)))).then(_=>ParseStatus.mergeArray(d,_));const g=[...c.data].map((_,_e)=>h.type._parseSync(new ParseInputLazyPath(c,_,c.path,_e)));return ParseStatus.mergeArray(d,g)}get element(){return this._def.type}min(e,c){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(c)}})}max(e,c){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(c)}})}length(e,c){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(c)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(a,e)=>new ZodArray({type:a,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(a){if(a instanceof ZodObject){const e={};for(const c in a.shape){const d=a.shape[c];e[c]=ZodOptional.create(deepPartialify(d))}return new ZodObject({...a._def,shape:()=>e})}else return a instanceof ZodArray?new ZodArray({...a._def,type:deepPartialify(a.element)}):a instanceof ZodOptional?ZodOptional.create(deepPartialify(a.unwrap())):a instanceof ZodNullable?ZodNullable.create(deepPartialify(a.unwrap())):a instanceof ZodTuple?ZodTuple.create(a.items.map(e=>deepPartialify(e))):a}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),c=util.objectKeys(e);return this._cached={shape:e,keys:c}}_parse(e){if(this._getType(e)!==ZodParsedType.object){const tt=this._getOrReturnCtx(e);return addIssueToContext(tt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:tt.parsedType}),INVALID}const{status:d,ctx:h}=this._processInputParams(e),{shape:g,keys:_}=this._getCached(),_e=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const tt in h.data)_.includes(tt)||_e.push(tt);const et=[];for(const tt of _){const rt=g[tt],$=h.data[tt];et.push({key:{status:"valid",value:tt},value:rt._parse(new ParseInputLazyPath(h,$,h.path,tt)),alwaysSet:tt in h.data})}if(this._def.catchall instanceof ZodNever){const tt=this._def.unknownKeys;if(tt==="passthrough")for(const rt of _e)et.push({key:{status:"valid",value:rt},value:{status:"valid",value:h.data[rt]}});else if(tt==="strict")_e.length>0&&(addIssueToContext(h,{code:ZodIssueCode.unrecognized_keys,keys:_e}),d.dirty());else if(tt!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const tt=this._def.catchall;for(const rt of _e){const $=h.data[rt];et.push({key:{status:"valid",value:rt},value:tt._parse(new ParseInputLazyPath(h,$,h.path,rt)),alwaysSet:rt in h.data})}}return h.common.async?Promise.resolve().then(async()=>{const tt=[];for(const rt of et){const $=await rt.key,b=await rt.value;tt.push({key:$,value:b,alwaysSet:rt.alwaysSet})}return tt}).then(tt=>ParseStatus.mergeObjectSync(d,tt)):ParseStatus.mergeObjectSync(d,et)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(c,d)=>{var h,g,_,_e;const et=(_=(g=(h=this._def).errorMap)===null||g===void 0?void 0:g.call(h,c,d).message)!==null&&_!==void 0?_:d.defaultError;return c.code==="unrecognized_keys"?{message:(_e=errorUtil.errToObj(e).message)!==null&&_e!==void 0?_e:et}:{message:et}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,c){return this.augment({[e]:c})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const c={};return util.objectKeys(e).forEach(d=>{e[d]&&this.shape[d]&&(c[d]=this.shape[d])}),new ZodObject({...this._def,shape:()=>c})}omit(e){const c={};return util.objectKeys(this.shape).forEach(d=>{e[d]||(c[d]=this.shape[d])}),new ZodObject({...this._def,shape:()=>c})}deepPartial(){return deepPartialify(this)}partial(e){const c={};return util.objectKeys(this.shape).forEach(d=>{const h=this.shape[d];e&&!e[d]?c[d]=h:c[d]=h.optional()}),new ZodObject({...this._def,shape:()=>c})}required(e){const c={};return util.objectKeys(this.shape).forEach(d=>{if(e&&!e[d])c[d]=this.shape[d];else{let g=this.shape[d];for(;g instanceof ZodOptional;)g=g._def.innerType;c[d]=g}}),new ZodObject({...this._def,shape:()=>c})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(a,e)=>new ZodObject({shape:()=>a,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.strictCreate=(a,e)=>new ZodObject({shape:()=>a,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.lazycreate=(a,e)=>new ZodObject({shape:a,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:c}=this._processInputParams(e),d=this._def.options;function h(g){for(const _e of g)if(_e.result.status==="valid")return _e.result;for(const _e of g)if(_e.result.status==="dirty")return c.common.issues.push(..._e.ctx.common.issues),_e.result;const _=g.map(_e=>new ZodError(_e.ctx.common.issues));return addIssueToContext(c,{code:ZodIssueCode.invalid_union,unionErrors:_}),INVALID}if(c.common.async)return Promise.all(d.map(async g=>{const _={...c,common:{...c.common,issues:[]},parent:null};return{result:await g._parseAsync({data:c.data,path:c.path,parent:_}),ctx:_}})).then(h);{let g;const _=[];for(const et of d){const tt={...c,common:{...c.common,issues:[]},parent:null},rt=et._parseSync({data:c.data,path:c.path,parent:tt});if(rt.status==="valid")return rt;rt.status==="dirty"&&!g&&(g={result:rt,ctx:tt}),tt.common.issues.length&&_.push(tt.common.issues)}if(g)return c.common.issues.push(...g.ctx.common.issues),g.result;const _e=_.map(et=>new ZodError(et));return addIssueToContext(c,{code:ZodIssueCode.invalid_union,unionErrors:_e}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(a,e)=>new ZodUnion({options:a,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});const getDiscriminator=a=>a instanceof ZodLazy?getDiscriminator(a.schema):a instanceof ZodEffects?getDiscriminator(a.innerType()):a instanceof ZodLiteral?[a.value]:a instanceof ZodEnum?a.options:a instanceof ZodNativeEnum?util.objectValues(a.enum):a instanceof ZodDefault?getDiscriminator(a._def.innerType):a instanceof ZodUndefined?[void 0]:a instanceof ZodNull?[null]:a instanceof ZodOptional?[void 0,...getDiscriminator(a.unwrap())]:a instanceof ZodNullable?[null,...getDiscriminator(a.unwrap())]:a instanceof ZodBranded||a instanceof ZodReadonly?getDiscriminator(a.unwrap()):a instanceof ZodCatch?getDiscriminator(a._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:c}=this._processInputParams(e);if(c.parsedType!==ZodParsedType.object)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:c.parsedType}),INVALID;const d=this.discriminator,h=c.data[d],g=this.optionsMap.get(h);return g?c.common.async?g._parseAsync({data:c.data,path:c.path,parent:c}):g._parseSync({data:c.data,path:c.path,parent:c}):(addIssueToContext(c,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[d]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,c,d){const h=new Map;for(const g of c){const _=getDiscriminator(g.shape[e]);if(!_.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const _e of _){if(h.has(_e))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(_e)}`);h.set(_e,g)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:c,optionsMap:h,...processCreateParams(d)})}}function mergeValues(a,e){const c=getParsedType(a),d=getParsedType(e);if(a===e)return{valid:!0,data:a};if(c===ZodParsedType.object&&d===ZodParsedType.object){const h=util.objectKeys(e),g=util.objectKeys(a).filter(_e=>h.indexOf(_e)!==-1),_={...a,...e};for(const _e of g){const et=mergeValues(a[_e],e[_e]);if(!et.valid)return{valid:!1};_[_e]=et.data}return{valid:!0,data:_}}else if(c===ZodParsedType.array&&d===ZodParsedType.array){if(a.length!==e.length)return{valid:!1};const h=[];for(let g=0;g<a.length;g++){const _=a[g],_e=e[g],et=mergeValues(_,_e);if(!et.valid)return{valid:!1};h.push(et.data)}return{valid:!0,data:h}}else return c===ZodParsedType.date&&d===ZodParsedType.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:c,ctx:d}=this._processInputParams(e),h=(g,_)=>{if(isAborted(g)||isAborted(_))return INVALID;const _e=mergeValues(g.value,_.value);return _e.valid?((isDirty(g)||isDirty(_))&&c.dirty(),{status:c.value,value:_e.data}):(addIssueToContext(d,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return d.common.async?Promise.all([this._def.left._parseAsync({data:d.data,path:d.path,parent:d}),this._def.right._parseAsync({data:d.data,path:d.path,parent:d})]).then(([g,_])=>h(g,_)):h(this._def.left._parseSync({data:d.data,path:d.path,parent:d}),this._def.right._parseSync({data:d.data,path:d.path,parent:d}))}}ZodIntersection.create=(a,e,c)=>new ZodIntersection({left:a,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(c)});class ZodTuple extends ZodType{_parse(e){const{status:c,ctx:d}=this._processInputParams(e);if(d.parsedType!==ZodParsedType.array)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:d.parsedType}),INVALID;if(d.data.length<this._def.items.length)return addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&d.data.length>this._def.items.length&&(addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),c.dirty());const g=[...d.data].map((_,_e)=>{const et=this._def.items[_e]||this._def.rest;return et?et._parse(new ParseInputLazyPath(d,_,d.path,_e)):null}).filter(_=>!!_);return d.common.async?Promise.all(g).then(_=>ParseStatus.mergeArray(c,_)):ParseStatus.mergeArray(c,g)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:a,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:c,ctx:d}=this._processInputParams(e);if(d.parsedType!==ZodParsedType.object)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:d.parsedType}),INVALID;const h=[],g=this._def.keyType,_=this._def.valueType;for(const _e in d.data)h.push({key:g._parse(new ParseInputLazyPath(d,_e,d.path,_e)),value:_._parse(new ParseInputLazyPath(d,d.data[_e],d.path,_e)),alwaysSet:_e in d.data});return d.common.async?ParseStatus.mergeObjectAsync(c,h):ParseStatus.mergeObjectSync(c,h)}get element(){return this._def.valueType}static create(e,c,d){return c instanceof ZodType?new ZodRecord({keyType:e,valueType:c,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(d)}):new ZodRecord({keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(c)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:c,ctx:d}=this._processInputParams(e);if(d.parsedType!==ZodParsedType.map)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:d.parsedType}),INVALID;const h=this._def.keyType,g=this._def.valueType,_=[...d.data.entries()].map(([_e,et],tt)=>({key:h._parse(new ParseInputLazyPath(d,_e,d.path,[tt,"key"])),value:g._parse(new ParseInputLazyPath(d,et,d.path,[tt,"value"]))}));if(d.common.async){const _e=new Map;return Promise.resolve().then(async()=>{for(const et of _){const tt=await et.key,rt=await et.value;if(tt.status==="aborted"||rt.status==="aborted")return INVALID;(tt.status==="dirty"||rt.status==="dirty")&&c.dirty(),_e.set(tt.value,rt.value)}return{status:c.value,value:_e}})}else{const _e=new Map;for(const et of _){const tt=et.key,rt=et.value;if(tt.status==="aborted"||rt.status==="aborted")return INVALID;(tt.status==="dirty"||rt.status==="dirty")&&c.dirty(),_e.set(tt.value,rt.value)}return{status:c.value,value:_e}}}}ZodMap.create=(a,e,c)=>new ZodMap({valueType:e,keyType:a,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(c)});class ZodSet extends ZodType{_parse(e){const{status:c,ctx:d}=this._processInputParams(e);if(d.parsedType!==ZodParsedType.set)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:d.parsedType}),INVALID;const h=this._def;h.minSize!==null&&d.data.size<h.minSize.value&&(addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:h.minSize.value,type:"set",inclusive:!0,exact:!1,message:h.minSize.message}),c.dirty()),h.maxSize!==null&&d.data.size>h.maxSize.value&&(addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:h.maxSize.value,type:"set",inclusive:!0,exact:!1,message:h.maxSize.message}),c.dirty());const g=this._def.valueType;function _(et){const tt=new Set;for(const rt of et){if(rt.status==="aborted")return INVALID;rt.status==="dirty"&&c.dirty(),tt.add(rt.value)}return{status:c.value,value:tt}}const _e=[...d.data.values()].map((et,tt)=>g._parse(new ParseInputLazyPath(d,et,d.path,tt)));return d.common.async?Promise.all(_e).then(et=>_(et)):_(_e)}min(e,c){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(c)}})}max(e,c){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(c)}})}size(e,c){return this.min(e,c).max(e,c)}nonempty(e){return this.min(1,e)}}ZodSet.create=(a,e)=>new ZodSet({valueType:a,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:c}=this._processInputParams(e);if(c.parsedType!==ZodParsedType.function)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:c.parsedType}),INVALID;function d(_e,et){return makeIssue({data:_e,path:c.path,errorMaps:[c.common.contextualErrorMap,c.schemaErrorMap,getErrorMap(),errorMap].filter(tt=>!!tt),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:et}})}function h(_e,et){return makeIssue({data:_e,path:c.path,errorMaps:[c.common.contextualErrorMap,c.schemaErrorMap,getErrorMap(),errorMap].filter(tt=>!!tt),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:et}})}const g={errorMap:c.common.contextualErrorMap},_=c.data;if(this._def.returns instanceof ZodPromise){const _e=this;return OK(async function(...et){const tt=new ZodError([]),rt=await _e._def.args.parseAsync(et,g).catch(nt=>{throw tt.addIssue(d(et,nt)),tt}),$=await Reflect.apply(_,this,rt);return await _e._def.returns._def.type.parseAsync($,g).catch(nt=>{throw tt.addIssue(h($,nt)),tt})})}else{const _e=this;return OK(function(...et){const tt=_e._def.args.safeParse(et,g);if(!tt.success)throw new ZodError([d(et,tt.error)]);const rt=Reflect.apply(_,this,tt.data),$=_e._def.returns.safeParse(rt,g);if(!$.success)throw new ZodError([h(rt,$.error)]);return $.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,c,d){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:c||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(d)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:c}=this._processInputParams(e);return this._def.getter()._parse({data:c.data,path:c.path,parent:c})}}ZodLazy.create=(a,e)=>new ZodLazy({getter:a,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const c=this._getOrReturnCtx(e);return addIssueToContext(c,{received:c.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(a,e)=>new ZodLiteral({value:a,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(a,e){return new ZodEnum({values:a,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const c=this._getOrReturnCtx(e),d=this._def.values;return addIssueToContext(c,{expected:util.joinValues(d),received:c.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(e.data)){const c=this._getOrReturnCtx(e),d=this._def.values;return addIssueToContext(c,{received:c.data,code:ZodIssueCode.invalid_enum_value,options:d}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const c of this._def.values)e[c]=c;return e}get Values(){const e={};for(const c of this._def.values)e[c]=c;return e}get Enum(){const e={};for(const c of this._def.values)e[c]=c;return e}extract(e,c=this._def){return ZodEnum.create(e,{...this._def,...c})}exclude(e,c=this._def){return ZodEnum.create(this.options.filter(d=>!e.includes(d)),{...this._def,...c})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(e){const c=util.getValidEnumValues(this._def.values),d=this._getOrReturnCtx(e);if(d.parsedType!==ZodParsedType.string&&d.parsedType!==ZodParsedType.number){const h=util.objectValues(c);return addIssueToContext(d,{expected:util.joinValues(h),received:d.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(e.data)){const h=util.objectValues(c);return addIssueToContext(d,{received:d.data,code:ZodIssueCode.invalid_enum_value,options:h}),INVALID}return OK(e.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(a,e)=>new ZodNativeEnum({values:a,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:c}=this._processInputParams(e);if(c.parsedType!==ZodParsedType.promise&&c.common.async===!1)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:c.parsedType}),INVALID;const d=c.parsedType===ZodParsedType.promise?c.data:Promise.resolve(c.data);return OK(d.then(h=>this._def.type.parseAsync(h,{path:c.path,errorMap:c.common.contextualErrorMap})))}}ZodPromise.create=(a,e)=>new ZodPromise({type:a,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:c,ctx:d}=this._processInputParams(e),h=this._def.effect||null,g={addIssue:_=>{addIssueToContext(d,_),_.fatal?c.abort():c.dirty()},get path(){return d.path}};if(g.addIssue=g.addIssue.bind(g),h.type==="preprocess"){const _=h.transform(d.data,g);if(d.common.async)return Promise.resolve(_).then(async _e=>{if(c.value==="aborted")return INVALID;const et=await this._def.schema._parseAsync({data:_e,path:d.path,parent:d});return et.status==="aborted"?INVALID:et.status==="dirty"||c.value==="dirty"?DIRTY(et.value):et});{if(c.value==="aborted")return INVALID;const _e=this._def.schema._parseSync({data:_,path:d.path,parent:d});return _e.status==="aborted"?INVALID:_e.status==="dirty"||c.value==="dirty"?DIRTY(_e.value):_e}}if(h.type==="refinement"){const _=_e=>{const et=h.refinement(_e,g);if(d.common.async)return Promise.resolve(et);if(et instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return _e};if(d.common.async===!1){const _e=this._def.schema._parseSync({data:d.data,path:d.path,parent:d});return _e.status==="aborted"?INVALID:(_e.status==="dirty"&&c.dirty(),_(_e.value),{status:c.value,value:_e.value})}else return this._def.schema._parseAsync({data:d.data,path:d.path,parent:d}).then(_e=>_e.status==="aborted"?INVALID:(_e.status==="dirty"&&c.dirty(),_(_e.value).then(()=>({status:c.value,value:_e.value}))))}if(h.type==="transform")if(d.common.async===!1){const _=this._def.schema._parseSync({data:d.data,path:d.path,parent:d});if(!isValid(_))return _;const _e=h.transform(_.value,g);if(_e instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:c.value,value:_e}}else return this._def.schema._parseAsync({data:d.data,path:d.path,parent:d}).then(_=>isValid(_)?Promise.resolve(h.transform(_.value,g)).then(_e=>({status:c.value,value:_e})):_);util.assertNever(h)}}ZodEffects.create=(a,e,c)=>new ZodEffects({schema:a,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(c)});ZodEffects.createWithPreprocess=(a,e,c)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:a},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(c)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(a,e)=>new ZodOptional({innerType:a,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(a,e)=>new ZodNullable({innerType:a,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:c}=this._processInputParams(e);let d=c.data;return c.parsedType===ZodParsedType.undefined&&(d=this._def.defaultValue()),this._def.innerType._parse({data:d,path:c.path,parent:c})}removeDefault(){return this._def.innerType}}ZodDefault.create=(a,e)=>new ZodDefault({innerType:a,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:c}=this._processInputParams(e),d={...c,common:{...c.common,issues:[]}},h=this._def.innerType._parse({data:d.data,path:d.path,parent:{...d}});return isAsync(h)?h.then(g=>({status:"valid",value:g.status==="valid"?g.value:this._def.catchValue({get error(){return new ZodError(d.common.issues)},input:d.data})})):{status:"valid",value:h.status==="valid"?h.value:this._def.catchValue({get error(){return new ZodError(d.common.issues)},input:d.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(a,e)=>new ZodCatch({innerType:a,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:d.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=a=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(a)});class ZodBranded extends ZodType{_parse(e){const{ctx:c}=this._processInputParams(e),d=c.data;return this._def.type._parse({data:d,path:c.path,parent:c})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:c,ctx:d}=this._processInputParams(e);if(d.common.async)return(async()=>{const g=await this._def.in._parseAsync({data:d.data,path:d.path,parent:d});return g.status==="aborted"?INVALID:g.status==="dirty"?(c.dirty(),DIRTY(g.value)):this._def.out._parseAsync({data:g.value,path:d.path,parent:d})})();{const h=this._def.in._parseSync({data:d.data,path:d.path,parent:d});return h.status==="aborted"?INVALID:h.status==="dirty"?(c.dirty(),{status:"dirty",value:h.value}):this._def.out._parseSync({data:h.value,path:d.path,parent:d})}}static create(e,c){return new ZodPipeline({in:e,out:c,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const c=this._def.innerType._parse(e),d=h=>(isValid(h)&&(h.value=Object.freeze(h.value)),h);return isAsync(c)?c.then(h=>d(h)):d(c)}unwrap(){return this._def.innerType}}ZodReadonly.create=(a,e)=>new ZodReadonly({innerType:a,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});ZodObject.lazycreate;var ZodFirstPartyTypeKind;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const stringType=ZodString.create;ZodNumber.create;ZodNaN.create;ZodBigInt.create;ZodBoolean.create;ZodDate.create;ZodSymbol.create;ZodUndefined.create;ZodNull.create;ZodAny.create;ZodUnknown.create;ZodNever.create;ZodVoid.create;ZodArray.create;const objectType=ZodObject.create;ZodObject.strictCreate;ZodUnion.create;ZodDiscriminatedUnion.create;ZodIntersection.create;ZodTuple.create;ZodRecord.create;ZodMap.create;ZodSet.create;ZodFunction.create;ZodLazy.create;ZodLiteral.create;ZodEnum.create;ZodNativeEnum.create;ZodPromise.create;ZodEffects.create;ZodOptional.create;ZodNullable.create;ZodEffects.createWithPreprocess;ZodPipeline.create;const Form=FormProvider,FormFieldContext=reactExports.createContext({}),FormField=({...a})=>jsxRuntimeExports.jsx(FormFieldContext.Provider,{value:{name:a.name},children:jsxRuntimeExports.jsx(Controller,{...a})}),useFormField=()=>{const a=reactExports.useContext(FormFieldContext),e=reactExports.useContext(FormItemContext),{getFieldState:c,formState:d}=useFormContext(),h=c(a.name,d);if(!a)throw new Error("useFormField should be used within <FormField>");const{id:g}=e;return{id:g,name:a.name,formItemId:`${g}-form-item`,formDescriptionId:`${g}-form-item-description`,formMessageId:`${g}-form-item-message`,...h}},FormItemContext=reactExports.createContext({}),FormItem=reactExports.forwardRef(({className:a,...e},c)=>{const d=reactExports.useId();return jsxRuntimeExports.jsx(FormItemContext.Provider,{value:{id:d},children:jsxRuntimeExports.jsx("div",{ref:c,className:cn("space-y-2",a),...e})})});FormItem.displayName="FormItem";const FormLabel=reactExports.forwardRef(({className:a,...e},c)=>{const{error:d,formItemId:h}=useFormField();return jsxRuntimeExports.jsx(Label$1,{ref:c,className:cn(d&&"text-destructive",a),htmlFor:h,...e})});FormLabel.displayName="FormLabel";const FormControl=reactExports.forwardRef(({...a},e)=>{const{error:c,formItemId:d,formDescriptionId:h,formMessageId:g}=useFormField();return jsxRuntimeExports.jsx(Slot,{ref:e,id:d,"aria-describedby":c?`${h} ${g}`:`${h}`,"aria-invalid":!!c,...a})});FormControl.displayName="FormControl";const FormDescription=reactExports.forwardRef(({className:a,...e},c)=>{const{formDescriptionId:d}=useFormField();return jsxRuntimeExports.jsx("p",{ref:c,id:d,className:cn("text-sm text-muted-foreground",a),...e})});FormDescription.displayName="FormDescription";const FormMessage=reactExports.forwardRef(({className:a,children:e,...c},d)=>{const{error:h,formMessageId:g}=useFormField(),_=h?String(h==null?void 0:h.message):e;return _?jsxRuntimeExports.jsx("p",{ref:d,id:g,className:cn("text-sm font-medium text-destructive",a),...c,children:_}):null});FormMessage.displayName="FormMessage";const registerSchema=objectType({firstName:stringType().min(2,"First name must be at least 2 characters"),lastName:stringType().min(2,"Last name must be at least 2 characters"),email:stringType().email("Please enter a valid email address"),password:stringType().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).*$/,"Password must contain at least one uppercase letter, one lowercase letter, and one number")}),Auth=()=>{const[a,e]=reactExports.useState(!1),{toast:c}=useToast(),d=useNavigate(),{signUp:h,signIn:g,isLoading:_,user:_e,signInWithGoogle:et}=useAuth();reactExports.useEffect(()=>{_e&&d("/")},[_e,d]);const tt=useForm({resolver:t(registerSchema),defaultValues:{firstName:"",lastName:"",email:"",password:""},mode:"onChange",reValidateMode:"onChange"}),rt=async b=>{try{await h(b.email,b.password,b.firstName,b.lastName)}catch(nt){console.error("Sign up error:",nt),c({variant:"destructive",title:"Registration failed",description:nt.message||"Failed to create account. Please try again."})}},$=()=>{try{et().catch(b=>{console.error("Google sign-in error:",b),c({variant:"destructive",title:"Sign-in Error",description:b.message||"Failed to sign in with Google. Please try again."})})}catch(b){console.error("Error triggering Google sign-in:",b),c({variant:"destructive",title:"Sign-in Error",description:"Could not initiate Google sign-in. Please try again."})}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background page-transition",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 flex items-center justify-center min-h-screen pt-16 pb-16",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx(Logo,{className:"mx-auto mb-6",size:"lg"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Create an account"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Join us to start ordering delicious cakes"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-8 rounded-xl shadow-sm",children:[jsxRuntimeExports.jsx(Form,{...tt,children:jsxRuntimeExports.jsxs("form",{onSubmit:tt.handleSubmit(rt),className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(FormField,{control:tt.control,name:"firstName",render:({field:b})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"First Name"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Enter your first name",...b})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:tt.control,name:"lastName",render:({field:b})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Last Name"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Enter your last name",...b})}),jsxRuntimeExports.jsx(FormMessage,{})]})})]}),jsxRuntimeExports.jsx(FormField,{control:tt.control,name:"email",render:({field:b})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Email Address"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Enter your email",type:"email",...b,autoComplete:"email","aria-label":"Email address"})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:tt.control,name:"password",render:({field:b})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Enter your password",type:a?"text":"password",...b,autoComplete:"new-password"})}),jsxRuntimeExports.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",onClick:()=>e(!a),tabIndex:-1,children:a?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full bg-cake-pink hover:bg-cake-pink/90",disabled:_,children:_?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait"]}):"Create Account"})]})}),jsxRuntimeExports.jsxs("div",{className:"relative my-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-border"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:jsxRuntimeExports.jsx("span",{className:"bg-white dark:bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),jsxRuntimeExports.jsxs(Button,{type:"button",variant:"outline",className:"w-full",onClick:$,disabled:_,children:[jsxRuntimeExports.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),jsxRuntimeExports.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),jsxRuntimeExports.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),jsxRuntimeExports.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),_?"Please wait...":"Sign up with Google"]}),jsxRuntimeExports.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Already have an account?"," ",jsxRuntimeExports.jsx(Link,{to:"/signin",className:"font-medium text-cake-pink hover:underline",children:"Sign In"})]})]})]})})]})},signInSchema=objectType({email:stringType().email("Please enter a valid email address"),password:stringType().min(1,"Password is required")}),SignIn=()=>{const[a,e]=reactExports.useState(!1),{toast:c}=useToast(),d=useNavigate(),{signIn:h,isLoading:g,user:_,signInWithGoogle:_e}=useAuth();reactExports.useEffect(()=>{_&&d("/")},[_,d]);const et=useForm({resolver:t(signInSchema),defaultValues:{email:"",password:""},mode:"onChange",reValidateMode:"onChange"}),tt=async $=>{try{await h($.email,$.password)}catch(b){console.error("Sign in error:",b),c({variant:"destructive",title:"Sign-in failed",description:b.message||"Failed to sign in. Please check your credentials and try again."})}},rt=()=>{try{_e().catch($=>{console.error("Google sign-in error:",$),c({variant:"destructive",title:"Sign-in Error",description:$.message||"Failed to sign in with Google. Please try again."})})}catch($){console.error("Error triggering Google sign-in:",$),c({variant:"destructive",title:"Sign-in Error",description:"Could not initiate Google sign-in. Please try again."})}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background page-transition",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 flex items-center justify-center min-h-screen pt-16 pb-16",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx(Logo,{className:"mx-auto mb-6",size:"lg"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Sign in to your account"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Welcome back! Sign in to continue."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-8 rounded-xl shadow-sm",children:[jsxRuntimeExports.jsx(Form,{...et,children:jsxRuntimeExports.jsxs("form",{onSubmit:et.handleSubmit(tt),className:"space-y-4",children:[jsxRuntimeExports.jsx(FormField,{control:et.control,name:"email",render:({field:$})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Email Address"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Enter your email",type:"email",...$,autoComplete:"email","aria-label":"Email address"})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:et.control,name:"password",render:({field:$})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Enter your password",type:a?"text":"password",...$,autoComplete:"current-password"})}),jsxRuntimeExports.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",onClick:()=>e(!a),tabIndex:-1,children:a?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full bg-cake-pink hover:bg-cake-pink/90",disabled:g,children:g?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait"]}):"Sign In"})]})}),jsxRuntimeExports.jsxs("div",{className:"relative my-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-border"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:jsxRuntimeExports.jsx("span",{className:"bg-white dark:bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),jsxRuntimeExports.jsxs(Button,{type:"button",variant:"outline",className:"w-full",onClick:rt,disabled:g,children:[jsxRuntimeExports.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),jsxRuntimeExports.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),jsxRuntimeExports.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),jsxRuntimeExports.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),g?"Please wait...":"Sign in with Google"]}),jsxRuntimeExports.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",jsxRuntimeExports.jsx(Link,{to:"/auth",className:"font-medium text-cake-pink hover:underline",children:"Sign Up"})]})]})]})})]})},NotFound=()=>{const a=useLocation();return reactExports.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",a.pathname)},[a.pathname]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),jsxRuntimeExports.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};var pRetry$2={exports:{}},retry$2={};function RetryOperation(a,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(a)),this._timeouts=a,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var retry_operation=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};RetryOperation.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};RetryOperation.prototype.retry=function(a){if(this._timeout&&clearTimeout(this._timeout),!a)return!1;var e=new Date().getTime();if(a&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(a),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(a);var c=this._timeouts.shift();if(c===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),c=this._cachedTimeouts.slice(-1);else return!1;var d=this;return this._timer=setTimeout(function(){d._attempts++,d._operationTimeoutCb&&(d._timeout=setTimeout(function(){d._operationTimeoutCb(d._attempts)},d._operationTimeout),d._options.unref&&d._timeout.unref()),d._fn(d._attempts)},c),this._options.unref&&this._timer.unref(),!0};RetryOperation.prototype.attempt=function(a,e){this._fn=a,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var c=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){c._operationTimeoutCb()},c._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};RetryOperation.prototype.try=function(a){console.log("Using RetryOperation.try() is deprecated"),this.attempt(a)};RetryOperation.prototype.start=function(a){console.log("Using RetryOperation.start() is deprecated"),this.attempt(a)};RetryOperation.prototype.start=RetryOperation.prototype.try;RetryOperation.prototype.errors=function(){return this._errors};RetryOperation.prototype.attempts=function(){return this._attempts};RetryOperation.prototype.mainError=function(){if(this._errors.length===0)return null;for(var a={},e=null,c=0,d=0;d<this._errors.length;d++){var h=this._errors[d],g=h.message,_=(a[g]||0)+1;a[g]=_,_>=c&&(e=h,c=_)}return e};(function(a){var e=retry_operation;a.operation=function(c){var d=a.timeouts(c);return new e(d,{forever:c&&(c.forever||c.retries===1/0),unref:c&&c.unref,maxRetryTime:c&&c.maxRetryTime})},a.timeouts=function(c){if(c instanceof Array)return[].concat(c);var d={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var h in c)d[h]=c[h];if(d.minTimeout>d.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var g=[],_=0;_<d.retries;_++)g.push(this.createTimeout(_,d));return c&&c.forever&&!g.length&&g.push(this.createTimeout(_,d)),g.sort(function(_e,et){return _e-et}),g},a.createTimeout=function(c,d){var h=d.randomize?Math.random()+1:1,g=Math.round(h*Math.max(d.minTimeout,1)*Math.pow(d.factor,c));return g=Math.min(g,d.maxTimeout),g},a.wrap=function(c,d,h){if(d instanceof Array&&(h=d,d=null),!h){h=[];for(var g in c)typeof c[g]=="function"&&h.push(g)}for(var _=0;_<h.length;_++){var _e=h[_],et=c[_e];c[_e]=(function(rt){var $=a.operation(d),b=Array.prototype.slice.call(arguments,1),nt=b.pop();b.push(function(st){$.retry(st)||(st&&(arguments[0]=$.mainError()),nt.apply(this,arguments))}),$.attempt(function(){rt.apply(c,b)})}).bind(c,et),c[_e].options=d}}})(retry$2);var retry$1=retry$2;const retry=retry$1,networkErrorMsgs=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class AbortError extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const decorateErrorWithCounts=(a,e,c)=>{const d=c.retries-(e-1);return a.attemptNumber=e,a.retriesLeft=d,a},isNetworkError=a=>networkErrorMsgs.includes(a),pRetry=(a,e)=>new Promise((c,d)=>{e={onFailedAttempt:()=>{},retries:10,...e};const h=retry.operation(e);h.attempt(async g=>{try{c(await a(g))}catch(_){if(!(_ instanceof Error)){d(new TypeError(`Non-error was thrown: "${_}". You should only throw errors.`));return}if(_ instanceof AbortError)h.stop(),d(_.originalError);else if(_ instanceof TypeError&&!isNetworkError(_.message))h.stop(),d(_);else{decorateErrorWithCounts(_,g,e);try{await e.onFailedAttempt(_)}catch(_e){d(_e);return}h.retry(_)||d(h.mainError())}}})});pRetry$2.exports=pRetry;pRetry$2.exports.default=pRetry;pRetry$2.exports.AbortError=AbortError;var pRetryExports=pRetry$2.exports;const pRetry$1=getDefaultExportFromCjs(pRetryExports);var dist={},eventemitter3={exports:{}};(function(a){var e=Object.prototype.hasOwnProperty,c="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(c=!1));function h(et,tt,rt){this.fn=et,this.context=tt,this.once=rt||!1}function g(et,tt,rt,$,b){if(typeof rt!="function")throw new TypeError("The listener must be a function");var nt=new h(rt,$||et,b),st=c?c+tt:tt;return et._events[st]?et._events[st].fn?et._events[st]=[et._events[st],nt]:et._events[st].push(nt):(et._events[st]=nt,et._eventsCount++),et}function _(et,tt){--et._eventsCount===0?et._events=new d:delete et._events[tt]}function _e(){this._events=new d,this._eventsCount=0}_e.prototype.eventNames=function(){var tt=[],rt,$;if(this._eventsCount===0)return tt;for($ in rt=this._events)e.call(rt,$)&&tt.push(c?$.slice(1):$);return Object.getOwnPropertySymbols?tt.concat(Object.getOwnPropertySymbols(rt)):tt},_e.prototype.listeners=function(tt){var rt=c?c+tt:tt,$=this._events[rt];if(!$)return[];if($.fn)return[$.fn];for(var b=0,nt=$.length,st=new Array(nt);b<nt;b++)st[b]=$[b].fn;return st},_e.prototype.listenerCount=function(tt){var rt=c?c+tt:tt,$=this._events[rt];return $?$.fn?1:$.length:0},_e.prototype.emit=function(tt,rt,$,b,nt,st){var ot=c?c+tt:tt;if(!this._events[ot])return!1;var it=this._events[ot],at=arguments.length,lt,dt;if(it.fn){switch(it.once&&this.removeListener(tt,it.fn,void 0,!0),at){case 1:return it.fn.call(it.context),!0;case 2:return it.fn.call(it.context,rt),!0;case 3:return it.fn.call(it.context,rt,$),!0;case 4:return it.fn.call(it.context,rt,$,b),!0;case 5:return it.fn.call(it.context,rt,$,b,nt),!0;case 6:return it.fn.call(it.context,rt,$,b,nt,st),!0}for(dt=1,lt=new Array(at-1);dt<at;dt++)lt[dt-1]=arguments[dt];it.fn.apply(it.context,lt)}else{var ht=it.length,pt;for(dt=0;dt<ht;dt++)switch(it[dt].once&&this.removeListener(tt,it[dt].fn,void 0,!0),at){case 1:it[dt].fn.call(it[dt].context);break;case 2:it[dt].fn.call(it[dt].context,rt);break;case 3:it[dt].fn.call(it[dt].context,rt,$);break;case 4:it[dt].fn.call(it[dt].context,rt,$,b);break;default:if(!lt)for(pt=1,lt=new Array(at-1);pt<at;pt++)lt[pt-1]=arguments[pt];it[dt].fn.apply(it[dt].context,lt)}}return!0},_e.prototype.on=function(tt,rt,$){return g(this,tt,rt,$,!1)},_e.prototype.once=function(tt,rt,$){return g(this,tt,rt,$,!0)},_e.prototype.removeListener=function(tt,rt,$,b){var nt=c?c+tt:tt;if(!this._events[nt])return this;if(!rt)return _(this,nt),this;var st=this._events[nt];if(st.fn)st.fn===rt&&(!b||st.once)&&(!$||st.context===$)&&_(this,nt);else{for(var ot=0,it=[],at=st.length;ot<at;ot++)(st[ot].fn!==rt||b&&!st[ot].once||$&&st[ot].context!==$)&&it.push(st[ot]);it.length?this._events[nt]=it.length===1?it[0]:it:_(this,nt)}return this},_e.prototype.removeAllListeners=function(tt){var rt;return tt?(rt=c?c+tt:tt,this._events[rt]&&_(this,rt)):(this._events=new d,this._eventsCount=0),this},_e.prototype.off=_e.prototype.removeListener,_e.prototype.addListener=_e.prototype.on,_e.prefixed=c,_e.EventEmitter=_e,a.exports=_e})(eventemitter3);var eventemitter3Exports=eventemitter3.exports,pTimeout$1={exports:{}},pFinally$1=(a,e)=>(e=e||(()=>{}),a.then(c=>new Promise(d=>{d(e())}).then(()=>c),c=>new Promise(d=>{d(e())}).then(()=>{throw c})));const pFinally=pFinally$1;class TimeoutError extends Error{constructor(e){super(e),this.name="TimeoutError"}}const pTimeout=(a,e,c)=>new Promise((d,h)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){d(a);return}const g=setTimeout(()=>{if(typeof c=="function"){try{d(c())}catch(et){h(et)}return}const _=typeof c=="string"?c:`Promise timed out after ${e} milliseconds`,_e=c instanceof Error?c:new TimeoutError(_);typeof a.cancel=="function"&&a.cancel(),h(_e)},e);pFinally(a.then(d,h),()=>{clearTimeout(g)})});pTimeout$1.exports=pTimeout;pTimeout$1.exports.default=pTimeout;pTimeout$1.exports.TimeoutError=TimeoutError;var pTimeoutExports=pTimeout$1.exports,priorityQueue={},lowerBound$1={};Object.defineProperty(lowerBound$1,"__esModule",{value:!0});function lowerBound(a,e,c){let d=0,h=a.length;for(;h>0;){const g=h/2|0;let _=d+g;c(a[_],e)<=0?(d=++_,h-=g+1):h=g}return d}lowerBound$1.default=lowerBound;Object.defineProperty(priorityQueue,"__esModule",{value:!0});const lower_bound_1=lowerBound$1;let PriorityQueue$1=class{constructor(){this._queue=[]}enqueue(e,c){c=Object.assign({priority:0},c);const d={priority:c.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=c.priority){this._queue.push(d);return}const h=lower_bound_1.default(this._queue,d,(g,_)=>_.priority-g.priority);this._queue.splice(h,0,d)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(c=>c.priority===e.priority).map(c=>c.run)}get size(){return this._queue.length}};priorityQueue.default=PriorityQueue$1;Object.defineProperty(dist,"__esModule",{value:!0});const EventEmitter=eventemitter3Exports,p_timeout_1=pTimeoutExports,priority_queue_1=priorityQueue,empty=()=>{},timeoutError=new p_timeout_1.TimeoutError;class PQueue extends EventEmitter{constructor(e){var c,d,h,g;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=empty,this._resolveIdle=empty,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:priority_queue_1.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(d=(c=e.intervalCap)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(g=(h=e.interval)===null||h===void 0?void 0:h.toString())!==null&&g!==void 0?g:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=empty,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=empty,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const c=this._intervalEnd-e;if(c<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},c)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const c=this._queue.dequeue();return c?(this.emit("active"),c(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,c={}){return new Promise((d,h)=>{const g=async()=>{this._pendingCount++,this._intervalCount++;try{const _=this._timeout===void 0&&c.timeout===void 0?e():p_timeout_1.default(Promise.resolve(e()),c.timeout===void 0?this._timeout:c.timeout,()=>{(c.throwOnTimeout===void 0?this._throwOnTimeout:c.throwOnTimeout)&&h(timeoutError)});d(await _)}catch(_){h(_)}this._next()};this._queue.enqueue(g,c),this._tryToStartAnother(),this.emit("add")})}async addAll(e,c){return Promise.all(e.map(async d=>this.add(d,c)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const c=this._resolveEmpty;this._resolveEmpty=()=>{c(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const c=this._resolveIdle;this._resolveIdle=()=>{c(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var _default=dist.default=PQueue;const STATUS_NO_RETRY$2=[400,401,402,403,404,405,406,407,409],defaultFailedAttemptHandler$1=a=>{var c,d;if(a.message.startsWith("Cancel")||a.message.startsWith("AbortError")||a.name==="AbortError"||(a==null?void 0:a.code)==="ECONNABORTED")throw a;const e=((c=a==null?void 0:a.response)==null?void 0:c.status)??(a==null?void 0:a.status);if(e&&STATUS_NO_RETRY$2.includes(+e))throw a;if(((d=a==null?void 0:a.error)==null?void 0:d.code)==="insufficient_quota"){const h=new Error(a==null?void 0:a.message);throw h.name="InsufficientQuotaError",h}};let AsyncCaller$2=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??defaultFailedAttemptHandler$1;const c="default"in _default?_default.default:_default;this.queue=new c({concurrency:this.maxConcurrency})}call(e,...c){return this.queue.add(()=>pRetry$1(()=>e(...c).catch(d=>{throw d instanceof Error?d:new Error(d)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,c,...d){return e.signal?Promise.race([this.call(c,...d),new Promise((h,g)=>{var _;(_=e.signal)==null||_.addEventListener("abort",()=>{g(new Error("AbortError"))})})]):this.call(c,...d)}fetch(...e){return this.call(()=>fetch(...e).then(c=>c.ok?c:Promise.reject(c)))}},Embeddings$1=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new AsyncCaller$2(e??{})}};class OllamaEmbeddings extends Embeddings$1{constructor(e){super({maxConcurrency:1,...e}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"llama2"}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://localhost:11434"}),Object.defineProperty(this,"requestOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e!=null&&e.model&&(this.model=e.model),e!=null&&e.baseUrl&&(this.baseUrl=e.baseUrl),e!=null&&e.requestOptions&&(this.requestOptions=this._convertOptions(e.requestOptions))}_convertOptions(e){const c={},d={embeddingOnly:"embedding_only",f16KV:"f16_kv",frequencyPenalty:"frequency_penalty",logitsAll:"logits_all",lowVram:"low_vram",mainGpu:"main_gpu",mirostat:"mirostat",mirostatEta:"mirostat_eta",mirostatTau:"mirostat_tau",numBatch:"num_batch",numCtx:"num_ctx",numGpu:"num_gpu",numGqa:"num_gqa",numKeep:"num_keep",numThread:"num_thread",penalizeNewline:"penalize_newline",presencePenalty:"presence_penalty",repeatLastN:"repeat_last_n",repeatPenalty:"repeat_penalty",ropeFrequencyBase:"rope_frequency_base",ropeFrequencyScale:"rope_frequency_scale",temperature:"temperature",stop:"stop",tfsZ:"tfs_z",topK:"top_k",topP:"top_p",typicalP:"typical_p",useMLock:"use_mlock",useMMap:"use_mmap",vocabOnly:"vocab_only"};for(const[h,g]of Object.entries(e)){const _=d[h];_&&(c[_]=g)}return c}async _request(e){const{model:c,baseUrl:d,requestOptions:h}=this;let g=d;g.startsWith("http://localhost:")&&(g=g.replace("http://localhost:","http://127.0.0.1:"));const _=await fetch(`${g}/api/embeddings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,model:c,options:h})});if(!_.ok)throw new Error(`Request to Ollama server failed: ${_.status} ${_.statusText}`);return(await _.json()).embedding}async _embed(e){return await Promise.all(e.map(d=>this.caller.call(()=>this._request(d))))}async embedDocuments(e){return this._embed(e)}async embedQuery(e){return(await this.embedDocuments([e]))[0]}}const ollamaEmbeddings=new OllamaEmbeddings({baseUrl:"http://localhost:11434",model:"nomic-embed-text"});async function generateEmbedding(a){try{console.log(`Generating embedding for text: "${a.substring(0,30)}..."`);const e=await ollamaEmbeddings.embedQuery(a);return console.log(`Successfully generated embedding with length: ${e.length}`),e}catch(e){return console.error("Error generating embedding with Ollama:",e),createSimpleEmbedding(a)}}function createSimpleEmbedding(a){console.warn("Using fallback simple embedding method");const e=new Array(768).fill(0);for(let d=0;d<a.length&&d<e.length;d++)e[d%e.length]+=a.charCodeAt(d)/255;const c=Math.sqrt(e.reduce((d,h)=>d+h*h,0));return e.map(d=>d/(c||1))}async function searchProducts(a){try{const e=await generateEmbedding(a),{data:c,error:d}=await supabase$1.rpc("match_products",{query_embedding:e,match_threshold:.78,match_count:10});return d?(console.error("Error searching products:",d),[]):c}catch(e){console.error("Error in search products:",e);const{data:c}=await supabase$1.from("products").select("*").or(`name.ilike.%${a}%,description.ilike.%${a}%`).limit(10);return c||[]}}const fetchProducts=async(a=null)=>{let e=supabase.from("products").select("*");a&&a!=="all"&&(e=e.eq("category",a));const{data:c,error:d}=await e;return d?(console.error("Error fetching products:",d),[]):(c||[]).map(h=>{const g=h;return{...g,image_url:g.image_url||""}})},categories=[{value:"all",label:"All Products"},{value:"cakes",label:"Cakes"},{value:"cupcakes",label:"Cupcakes"},{value:"tarts",label:"Tarts"},{value:"pies",label:"Pies"},{value:"loaves",label:"Loaves"},{value:"specials",label:"Specials"}],priceRanges=[{value:"all",label:"All Prices"},{value:"0-100",label:"Under R100"},{value:"100-300",label:"R100 - R300"},{value:"300-500",label:"R300 - R500"},{value:"500+",label:"R500 & Above"}],dietaryOptions=[{value:"all",label:"All"},{value:"vegan",label:"Vegan"}],ProductsPage=()=>{const a=useLocation(),e=useNavigate();reactExports.useState(!1);const[c,d]=reactExports.useState([]),[h,g]=reactExports.useState(""),[_,_e]=reactExports.useState("all"),[et,tt]=reactExports.useState("all"),[rt,$]=reactExports.useState([]),[b,nt]=reactExports.useState("all"),[st,ot]=reactExports.useState(null),[it,at]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{const gt=await fetchProducts();d(gt);try{at(!0);const bt=new URLSearchParams(a.search),jt=bt.get("category")||"all",Mt=bt.get("price")||"all",Pt=bt.get("dietary")||"all",Tt=bt.get("search")||"";let St=await fetchProducts(jt!=="all"?jt:null);if(St=mt(St),Mt!=="all"){const wt=getPriceRange(Mt);wt&&(St=St.filter(Rt=>Rt.price>=wt.min&&(wt.max===1/0?Rt.price>=wt.min:Rt.price<=wt.max)))}if(Pt==="vegan"&&(St=St.filter(wt=>wt.is_vegan)),Tt){const wt=Tt.toLowerCase();St=St.filter(Rt=>Rt.name.toLowerCase().includes(wt)||Rt.description.toLowerCase().includes(wt))}d(St)}catch(bt){ot("Failed to load products"),console.error(bt)}finally{at(!1)}})()},[a.search]),reactExports.useEffect(()=>{var Tt,St;const xt=new URLSearchParams(a.search),gt=xt.get("search"),bt=xt.get("category"),jt=xt.get("price"),Mt=xt.get("dietary");if(it)return;gt&&g(gt),bt&&_e(bt),jt&&tt(jt),Mt&&nt(Mt);const Pt=[];gt&&Pt.push(`Search: ${gt}`),bt&&bt!=="all"&&Pt.push(`Category: ${(Tt=categories.find(wt=>wt.value===bt))==null?void 0:Tt.label}`),jt&&jt!=="all"&&Pt.push(`Price: ${(St=priceRanges.find(wt=>wt.value===jt))==null?void 0:St.label}`),Mt==="vegan"&&Pt.push("Dietary: Vegan"),$(Pt)},[a.search,it]);const lt=async xt=>{xt.preventDefault(),at(!0);try{const gt=await searchProducts(h);d(gt),dt({search:h})}catch(gt){console.error("Error searching products:",gt),ot("Failed to search products. Please try again later.")}finally{at(!1)}},dt=xt=>{const gt=new URLSearchParams(a.search);Object.entries(xt).forEach(([bt,jt])=>{jt?gt.set(bt,jt):gt.delete(bt)}),e({pathname:a.pathname,search:gt.toString()})},ht=()=>{g(""),_e("all"),tt("all"),nt("all"),e("/products")},pt=xt=>{const gt=xt.image_url||"";return gt?gt.startsWith("http")?getProductImageUrl(gt):(gt.startsWith("/"),gt):"/images/placeholder-cake.jpg"},mt=xt=>xt.map(gt=>({...gt,image_url:pt(gt)})),yt=xt=>{console.log("=== DEBUG: PRODUCT IMAGES ==="),xt.forEach(gt=>{console.log(`Product: ${gt.name||"N/A"}`),console.log(`- ID: ${gt.id}`),console.log(`- Raw image URL: ${gt.image_url||"none"}`),console.log(`- Formatted URL: ${pt(gt)}`),console.log("---")})};return reactExports.useEffect(()=>{(async()=>{try{at(!0);const gt=new URLSearchParams(a.search),bt=gt.get("category")||"all",jt=gt.get("price")||"all",Mt=gt.get("dietary")||"all",Pt=gt.get("search")||"";let Tt=await fetchProducts(bt!=="all"?bt:null);if(Tt=mt(Tt),yt(Tt),jt!=="all"){const St=getPriceRange(jt);St&&(Tt=Tt.filter(wt=>wt.price>=St.min&&(St.max===1/0?wt.price>=St.min:wt.price<=St.max)))}if(Mt==="vegan"&&(Tt=Tt.filter(St=>St.is_vegan)),Pt){const St=Pt.toLowerCase();Tt=Tt.filter(wt=>wt.name.toLowerCase().includes(St)||wt.description.toLowerCase().includes(St))}d(Tt)}catch(gt){ot("Failed to load products"),console.error(gt)}finally{at(!1)}})()},[a.search]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background page-transition",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("section",{className:"relative pt-32 pb-20 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-cake-purple/10 to-transparent z-0"}),jsxRuntimeExports.jsxs("div",{className:"container relative z-10 mx-auto px-4 md:px-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-center",children:"Our Delicious Creations"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground text-lg text-center max-w-3xl mx-auto mb-8",children:"Browse our extensive collection of handcrafted cakes and sweet treats made with love in Durban, South Africa."}),jsxRuntimeExports.jsx("form",{onSubmit:lt,className:"max-w-2xl mx-auto mb-8",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-5 w-5"}),jsxRuntimeExports.jsx(Input,{type:"text",placeholder:"Search for cakes, cupcakes...",className:"pl-10 h-12 w-full",id:"search-input",name:"search-input",value:h,onChange:xt=>g(xt.target.value)}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"absolute right-0 top-0 h-full bg-cake-pink hover:bg-cake-pink/90 rounded-l-none",children:"Search"})]})})]})]}),jsxRuntimeExports.jsx("section",{className:"pb-20",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 md:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[jsxRuntimeExports.jsx("div",{className:"hidden lg:block w-64 shrink-0",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-6 rounded-lg shadow-sm",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Filters"}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2",children:"Categories"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:categories.map(xt=>jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",id:`category-${xt.value}`,name:"category",value:xt.value,checked:_===xt.value,onChange:()=>{_e(xt.value),dt({category:xt.value})},className:"mr-2 accent-cake-pink"}),jsxRuntimeExports.jsx("label",{htmlFor:`category-${xt.value}`,className:"text-sm cursor-pointer",children:xt.label})]},xt.value))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2",children:"Price Range"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:priceRanges.map(xt=>jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",id:`price-${xt.value}`,name:"price",value:xt.value,checked:et===xt.value,onChange:()=>{tt(xt.value),dt({price:xt.value})},className:"mr-2 accent-cake-pink"}),jsxRuntimeExports.jsx("label",{htmlFor:`price-${xt.value}`,className:"text-sm cursor-pointer",children:xt.label})]},xt.value))})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2",children:"Dietary Options"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:dietaryOptions.map(xt=>jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",id:`dietary-${xt.value}`,name:"dietary",value:xt.value,checked:b===xt.value,onChange:()=>{nt(xt.value),dt({dietary:xt.value})},className:"mr-2 accent-cake-pink"}),jsxRuntimeExports.jsx("label",{htmlFor:`dietary-${xt.value}`,className:"text-sm cursor-pointer",children:xt.label})]},xt.value))})]})]})}),it?jsxRuntimeExports.jsx("div",{children:"Loading..."}):st?jsxRuntimeExports.jsx("div",{children:st}):c.length>0?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(xt=>jsxRuntimeExports.jsx(CakeCard,{product:{...xt,popular:xt.popular||!1,created_at:xt.created_at?xt.created_at.toString():new Date().toISOString(),updated_at:xt.updated_at?xt.updated_at.toString():new Date().toISOString(),is_vegan:xt.is_vegan||!1}},xt.id))}):jsxRuntimeExports.jsxs("div",{className:"text-center py-20",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"No Products Found"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-6",children:"We couldn't find any products matching your filters."}),jsxRuntimeExports.jsx(Button,{onClick:ht,children:"Clear All Filters"})]})]})})})]})};function getPriceRange(a){switch(a){case"0-100":return{min:0,max:100};case"100-300":return{min:100,max:300};case"300-500":return{min:300,max:500};case"500+":return{min:500,max:1/0};default:return}}const About=()=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 to-white",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 pt-24 pb-16",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 rounded-full bg-cake-pink/40 backdrop-blur-sm opacity-50 animate-float"}),jsxRuntimeExports.jsx("div",{className:"absolute top-2/3 left-1/4 w-24 h-24 rounded-full bg-cake-yellow/40 backdrop-blur-sm opacity-50 animate-float",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6 relative",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 font-montserrat",children:"About Cake A Day"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600",children:"Welcome to Cake A Day, your premier cake destination in Durban! We're passionate about creating the freshest, most delightful cakes for every occasion."}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600",children:"At Cake A Day, we believe in the magic of freshly baked cakes. Every day, our skilled bakers craft exquisite cakes using only the finest ingredients, ensuring that each bite is a moment of pure joy."}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600",children:"What sets us apart is our cake design feature, where you can describe the cake of your dreams, or upload an image, and our talented team will bring it to life. Whether it's a birthday, wedding, or for any special occasion."}),jsxRuntimeExports.jsx("div",{className:"pt-6",children:jsxRuntimeExports.jsx(Link,{to:"/products",children:jsxRuntimeExports.jsx(Button,{className:"bg-cake-pink hover:bg-cake-pink/90 text-white font-semibold py-2 px-6 rounded-full transition duration-300 ease-in-out transform hover:scale-105",children:"Explore Our Cakes"})})}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-20 right-2 w-40 h-40 rounded-full bg-cake-purple/40 backdrop-blur-sm opacity-50 animate-float",style:{animationDelay:"1s"}})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute -bottom-6 -right-6 w-24 h-24 bg-cake-pink/20 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse z-10"}),jsxRuntimeExports.jsx("img",{src:"/lovable-uploads/flower cake.jpg",alt:"Beautiful Flower Cake",className:"rounded-lg shadow-2xl relative z-20"})]})]})]})})]}),Contact=()=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-100",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 pt-24 pb-16",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"Contact Us"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Get in Touch"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-6 h-6 mr-2 text-pink-500 flex-shrink-0 mt-1"}),jsxRuntimeExports.jsxs("span",{children:["506/508 Sarnia Road",jsxRuntimeExports.jsx("br",{}),"Seaview",jsxRuntimeExports.jsx("br",{}),"Durban",jsxRuntimeExports.jsx("br",{}),"4094"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Phone,{className:"w-6 h-6 mr-2 text-pink-500"}),jsxRuntimeExports.jsx("span",{children:"+27 73 599 9972"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Mail,{className:"w-6 h-6 mr-2 text-pink-500"}),jsxRuntimeExports.jsx("span",{children:"info@cakeaday.co.za"})]})]}),jsxRuntimeExports.jsxs("form",{className:"mt-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),jsxRuntimeExports.jsx("input",{type:"text",id:"name",name:"name",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",id:"email",name:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700",children:"Message"}),jsxRuntimeExports.jsx("textarea",{id:"message",name:"message",rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500"})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-full bg-pink-500 text-white py-2 px-4 rounded-md hover:bg-pink-600 transition duration-300",children:"Send Message"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Our Location"}),jsxRuntimeExports.jsx("div",{className:"aspect-w-16 aspect-h-9",children:jsxRuntimeExports.jsx("img",{src:"/lovable-uploads/location.JPG",alt:"Cake A Day Location Map",className:"rounded-md w-full h-auto object-cover"})}),jsxRuntimeExports.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[jsxRuntimeExports.jsx("p",{children:"We are located at 506/508 Sarnia Road in the Seaview area of Durban."}),jsxRuntimeExports.jsx("p",{className:"mt-2",children:"Open hours: Monday-Friday 8am-5pm, Saturday 9am-3pm"})]})]})]})]})]});var TABS_NAME="Tabs",[createTabsContext,createTabsScope]=createContextScope$2(TABS_NAME,[createRovingFocusGroupScope]),useRovingFocusGroupScope$1=createRovingFocusGroupScope(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs$1=reactExports.forwardRef((a,e)=>{const{__scopeTabs:c,value:d,onValueChange:h,defaultValue:g,orientation:_="horizontal",dir:_e,activationMode:et="automatic",...tt}=a,rt=useDirection(_e),[$,b]=useControllableState({prop:d,onChange:h,defaultProp:g});return jsxRuntimeExports.jsx(TabsProvider,{scope:c,baseId:useId(),value:$,onValueChange:b,orientation:_,dir:rt,activationMode:et,children:jsxRuntimeExports.jsx(Primitive.div,{dir:rt,"data-orientation":_,...tt,ref:e})})});Tabs$1.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList$1=reactExports.forwardRef((a,e)=>{const{__scopeTabs:c,loop:d=!0,...h}=a,g=useTabsContext(TAB_LIST_NAME,c),_=useRovingFocusGroupScope$1(c);return jsxRuntimeExports.jsx(Root$5,{asChild:!0,..._,orientation:g.orientation,dir:g.dir,loop:d,children:jsxRuntimeExports.jsx(Primitive.div,{role:"tablist","aria-orientation":g.orientation,...h,ref:e})})});TabsList$1.displayName=TAB_LIST_NAME;var TRIGGER_NAME$1="TabsTrigger",TabsTrigger$1=reactExports.forwardRef((a,e)=>{const{__scopeTabs:c,value:d,disabled:h=!1,...g}=a,_=useTabsContext(TRIGGER_NAME$1,c),_e=useRovingFocusGroupScope$1(c),et=makeTriggerId(_.baseId,d),tt=makeContentId(_.baseId,d),rt=d===_.value;return jsxRuntimeExports.jsx(Item$1,{asChild:!0,..._e,focusable:!h,active:rt,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"tab","aria-selected":rt,"aria-controls":tt,"data-state":rt?"active":"inactive","data-disabled":h?"":void 0,disabled:h,id:et,...g,ref:e,onMouseDown:composeEventHandlers(a.onMouseDown,$=>{!h&&$.button===0&&$.ctrlKey===!1?_.onValueChange(d):$.preventDefault()}),onKeyDown:composeEventHandlers(a.onKeyDown,$=>{[" ","Enter"].includes($.key)&&_.onValueChange(d)}),onFocus:composeEventHandlers(a.onFocus,()=>{const $=_.activationMode!=="manual";!rt&&!h&&$&&_.onValueChange(d)})})})});TabsTrigger$1.displayName=TRIGGER_NAME$1;var CONTENT_NAME$1="TabsContent",TabsContent$1=reactExports.forwardRef((a,e)=>{const{__scopeTabs:c,value:d,forceMount:h,children:g,..._}=a,_e=useTabsContext(CONTENT_NAME$1,c),et=makeTriggerId(_e.baseId,d),tt=makeContentId(_e.baseId,d),rt=d===_e.value,$=reactExports.useRef(rt);return reactExports.useEffect(()=>{const b=requestAnimationFrame(()=>$.current=!1);return()=>cancelAnimationFrame(b)},[]),jsxRuntimeExports.jsx(Presence,{present:h||rt,children:({present:b})=>jsxRuntimeExports.jsx(Primitive.div,{"data-state":rt?"active":"inactive","data-orientation":_e.orientation,role:"tabpanel","aria-labelledby":et,hidden:!b,id:tt,tabIndex:0,..._,ref:e,style:{...a.style,animationDuration:$.current?"0s":void 0},children:b&&g})})});TabsContent$1.displayName=CONTENT_NAME$1;function makeTriggerId(a,e){return`${a}-trigger-${e}`}function makeContentId(a,e){return`${a}-content-${e}`}var Root2$2=Tabs$1,List=TabsList$1,Trigger$1=TabsTrigger$1,Content=TabsContent$1;const Tabs=Root2$2,TabsList=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(List,{ref:c,className:cn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...e}));TabsList.displayName=List.displayName;const TabsTrigger=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Trigger$1,{ref:c,className:cn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...e}));TabsTrigger.displayName=Trigger$1.displayName;const TabsContent=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Content,{ref:c,className:cn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...e}));TabsContent.displayName=Content.displayName;const Card=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("div",{ref:c,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",a),...e}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("div",{ref:c,className:cn("flex flex-col space-y-1.5 p-6",a),...e}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("h3",{ref:c,className:cn("text-2xl font-semibold leading-none tracking-tight",a),...e}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("p",{ref:c,className:cn("text-sm text-muted-foreground",a),...e}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("div",{ref:c,className:cn("p-6 pt-0",a),...e}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("div",{ref:c,className:cn("flex items-center p-6 pt-0",a),...e}));CardFooter.displayName="CardFooter";var NAME="Separator",DEFAULT_ORIENTATION="horizontal",ORIENTATIONS=["horizontal","vertical"],Separator$2=reactExports.forwardRef((a,e)=>{const{decorative:c,orientation:d=DEFAULT_ORIENTATION,...h}=a,g=isValidOrientation(d)?d:DEFAULT_ORIENTATION,_e=c?{role:"none"}:{"aria-orientation":g==="vertical"?g:void 0,role:"separator"};return jsxRuntimeExports.jsx(Primitive.div,{"data-orientation":g,..._e,...h,ref:e})});Separator$2.displayName=NAME;function isValidOrientation(a){return ORIENTATIONS.includes(a)}var Root$2=Separator$2;const Separator$1=reactExports.forwardRef(({className:a,orientation:e="horizontal",decorative:c=!0,...d},h)=>jsxRuntimeExports.jsx(Root$2,{ref:h,decorative:c,orientation:e,className:cn("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...d}));Separator$1.displayName=Root$2.displayName;var AVATAR_NAME="Avatar",[createAvatarContext,createAvatarScope]=createContextScope$2(AVATAR_NAME),[AvatarProvider,useAvatarContext]=createAvatarContext(AVATAR_NAME),Avatar$1=reactExports.forwardRef((a,e)=>{const{__scopeAvatar:c,...d}=a,[h,g]=reactExports.useState("idle");return jsxRuntimeExports.jsx(AvatarProvider,{scope:c,imageLoadingStatus:h,onImageLoadingStatusChange:g,children:jsxRuntimeExports.jsx(Primitive.span,{...d,ref:e})})});Avatar$1.displayName=AVATAR_NAME;var IMAGE_NAME="AvatarImage",AvatarImage$1=reactExports.forwardRef((a,e)=>{const{__scopeAvatar:c,src:d,onLoadingStatusChange:h=()=>{},...g}=a,_=useAvatarContext(IMAGE_NAME,c),_e=useImageLoadingStatus(d,g.referrerPolicy),et=useCallbackRef$1(tt=>{h(tt),_.onImageLoadingStatusChange(tt)});return useLayoutEffect2(()=>{_e!=="idle"&&et(_e)},[_e,et]),_e==="loaded"?jsxRuntimeExports.jsx(Primitive.img,{...g,ref:e,src:d}):null});AvatarImage$1.displayName=IMAGE_NAME;var FALLBACK_NAME="AvatarFallback",AvatarFallback$1=reactExports.forwardRef((a,e)=>{const{__scopeAvatar:c,delayMs:d,...h}=a,g=useAvatarContext(FALLBACK_NAME,c),[_,_e]=reactExports.useState(d===void 0);return reactExports.useEffect(()=>{if(d!==void 0){const et=window.setTimeout(()=>_e(!0),d);return()=>window.clearTimeout(et)}},[d]),_&&g.imageLoadingStatus!=="loaded"?jsxRuntimeExports.jsx(Primitive.span,{...h,ref:e}):null});AvatarFallback$1.displayName=FALLBACK_NAME;function useImageLoadingStatus(a,e){const[c,d]=reactExports.useState("idle");return useLayoutEffect2(()=>{if(!a){d("error");return}let h=!0;const g=new window.Image,_=_e=>()=>{h&&d(_e)};return d("loading"),g.onload=_("loaded"),g.onerror=_("error"),g.src=a,e&&(g.referrerPolicy=e),()=>{h=!1}},[a,e]),c}var Root$1=Avatar$1,Image$1=AvatarImage$1,Fallback=AvatarFallback$1;const Avatar=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Root$1,{ref:c,className:cn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...e}));Avatar.displayName=Root$1.displayName;const AvatarImage=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Image$1,{ref:c,className:cn("aspect-square h-full w-full",a),...e}));AvatarImage.displayName=Image$1.displayName;const AvatarFallback=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Fallback,{ref:c,className:cn("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...e}));AvatarFallback.displayName=Fallback.displayName;const profileSchema=objectType({firstName:stringType().min(1,"First name is required"),lastName:stringType().min(1,"Last name is required"),email:stringType().email("Please enter a valid email address").optional(),phone:stringType().optional(),address:stringType().optional(),city:stringType().optional(),postalCode:stringType().optional()}),Profile=()=>{var ot,it,at,lt,dt,ht;const{user:a,signOut:e}=useAuth(),{toast:c}=useToast(),[d,h]=reactExports.useState(!1),[g,_]=reactExports.useState(null),[_e,et]=reactExports.useState(null),[tt,rt]=reactExports.useState([]),$=useForm({resolver:t(profileSchema),defaultValues:{firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:""},mode:"onChange"});reactExports.useEffect(()=>{(async()=>{var mt;if(a){h(!0);try{const{data:yt,error:xt}=await supabase.from("profiles").select("*").eq("id",a.id).maybeSingle();if(xt&&xt.code!=="PGRST116")throw xt;_(yt),yt?$.reset({firstName:yt.first_name||"",lastName:yt.last_name||"",email:a.email||"",phone:(yt==null?void 0:yt.phone)||"",address:(yt==null?void 0:yt.address)||"",city:(yt==null?void 0:yt.city)||"",postalCode:(yt==null?void 0:yt.postal_code)||""}):($.reset({firstName:"",lastName:"",email:a.email||"",phone:"",address:"",city:"",postalCode:""}),c({title:"Profile not found",description:"Please complete your profile information."}));const bt=await supabase.from("user_subscriptions").select(`
        *,
        subscription_plans(*) 
        `).eq("user_id",a.id).order("created_at",{ascending:!1}).limit(1),jt=(mt=bt==null?void 0:bt.data)==null?void 0:mt[0];!(bt==null?void 0:bt.error)&&jt&&et(jt);const{data:Tt,error:St}=await supabase.from("orders").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});!St&&Tt&&rt(Tt)}catch(yt){console.error("Error fetching profile:",yt),c({variant:"destructive",title:"Error loading profile",description:yt.message||"Failed to load profile data"})}finally{h(!1)}}})()},[a]);const b=async pt=>{if(a){h(!0);try{const{error:mt}=await supabase.from("profiles").update({first_name:pt.firstName,last_name:pt.lastName,phone:pt.phone?parseFloat(pt.phone):void 0,address:pt.address,city:pt.city,postal_code:pt.postalCode?parseFloat(pt.postalCode):void 0,updated_at:new Date().toISOString()}).eq("id",a.id);if(mt)throw mt;c({title:"Profile updated",description:"Your profile has been updated successfully."})}catch(mt){console.error("Error updating profile:",mt),c({variant:"destructive",title:"Error updating profile",description:mt.message||"Failed to update profile"})}finally{h(!1)}}},nt=()=>{var pt,mt;return g?`${((pt=g.first_name)==null?void 0:pt.charAt(0))||""}${((mt=g.last_name)==null?void 0:mt.charAt(0))||""}`:"U"},st=pt=>new Date(pt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background page-transition",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 pt-32 pb-20",children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[jsxRuntimeExports.jsx("div",{className:"w-full md:w-1/4",children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-6",children:[jsxRuntimeExports.jsxs(Avatar,{className:"h-24 w-24 mb-4",children:[jsxRuntimeExports.jsx(AvatarImage,{src:(g==null?void 0:g.avatar_url)||""}),jsxRuntimeExports.jsx(AvatarFallback,{className:"bg-cake-pink text-white text-xl",children:nt()})]}),jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold",children:[g==null?void 0:g.first_name," ",g==null?void 0:g.last_name]}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:a==null?void 0:a.email}),_e&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-cake-pink/10 text-cake-pink",children:((ot=_e.subscription_plans)==null?void 0:ot.name)||"Subscriber"})})]}),jsxRuntimeExports.jsx(Separator$1,{className:"my-4"}),jsxRuntimeExports.jsxs("nav",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",className:"w-full justify-start",asChild:!0,children:jsxRuntimeExports.jsxs("a",{href:"#profile",className:"flex items-center",children:[jsxRuntimeExports.jsx(User,{size:18,className:"mr-2"}),"Profile"]})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",className:"w-full justify-start",asChild:!0,children:jsxRuntimeExports.jsxs("a",{href:"#subscription",className:"flex items-center",children:[jsxRuntimeExports.jsx(CreditCard,{size:18,className:"mr-2"}),"Subscription"]})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",className:"w-full justify-start",asChild:!0,children:jsxRuntimeExports.jsxs("a",{href:"#orders",className:"flex items-center",children:[jsxRuntimeExports.jsx(Package,{size:18,className:"mr-2"}),"Orders"]})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",className:"w-full justify-start",asChild:!0,children:jsxRuntimeExports.jsxs("a",{href:"#settings",className:"flex items-center",children:[jsxRuntimeExports.jsx(Settings,{size:18,className:"mr-2"}),"Settings"]})}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:e,children:[jsxRuntimeExports.jsx(LogOut,{size:18,className:"mr-2"}),"Sign Out"]})]})]})})}),jsxRuntimeExports.jsx("div",{className:"w-full md:w-3/4",children:jsxRuntimeExports.jsxs(Tabs,{defaultValue:"profile",children:[jsxRuntimeExports.jsxs(TabsList,{className:"mb-6",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"profile",children:"Profile"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"subscription",children:"Subscription"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"orders",children:"Order History"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"settings",children:"Settings"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"profile",id:"profile",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Personal Information"}),jsxRuntimeExports.jsx(CardDescription,{children:"Update your personal details and contact information"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(Form,{...$,children:jsxRuntimeExports.jsxs("form",{onSubmit:$.handleSubmit(b),className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx(FormField,{control:$.control,name:"firstName",render:({field:pt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"First Name"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"First name",...pt})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:$.control,name:"lastName",render:({field:pt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Last Name"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Last name",...pt})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:$.control,name:"email",render:({field:pt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Email Address"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Email address",...pt,disabled:!0,className:"bg-muted/50"})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:$.control,name:"phone",render:({field:pt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Phone Number"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Phone number",...pt})}),jsxRuntimeExports.jsx(FormMessage,{})]})})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium",children:"Address Information"}),jsxRuntimeExports.jsx(FormField,{control:$.control,name:"address",render:({field:pt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Street Address"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Street address",...pt})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx(FormField,{control:$.control,name:"city",render:({field:pt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"City"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"City",...pt})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:$.control,name:"postalCode",render:({field:pt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Postal Code"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{placeholder:"Postal code",...pt})}),jsxRuntimeExports.jsx(FormMessage,{})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx(Button,{type:"submit",className:"bg-cake-pink hover:bg-cake-pink/90",disabled:d,children:d?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})})]})})})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"subscription",id:"subscription",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Your Subscription"}),jsxRuntimeExports.jsx(CardDescription,{children:"Manage your subscription plan and billing details"})]}),jsxRuntimeExports.jsx(CardContent,{children:d?jsxRuntimeExports.jsx("div",{className:"flex justify-center py-8",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"h-8 w-8 animate-spin text-cake-pink"})}):_e?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"bg-cake-pink/10 rounded-lg p-6 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-cake-pink mb-2",children:((it=_e.subscription_plans)==null?void 0:it.name)||"Standard Subscription"}),jsxRuntimeExports.jsxs("p",{className:"text-muted-foreground",children:[_e.status==="active"?"Active":"Inactive"," "," Renews"," ",_e.current_period_end?st(_e.current_period_end):"N/A"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("p",{className:"text-xl font-bold",children:["$",((at=_e.subscription_plans)==null?void 0:at.price)||"0.00"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:["per"," ",((lt=_e.subscription_plans)==null?void 0:lt.interval)||"month"]})]})]}),jsxRuntimeExports.jsx(Separator$1,{className:"my-4"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Billing cycle"}),jsxRuntimeExports.jsxs("span",{children:[((dt=_e.subscription_plans)==null?void 0:dt.interval_count)||1," ",((ht=_e.subscription_plans)==null?void 0:ht.interval)||"month"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Next billing date"}),jsxRuntimeExports.jsx("span",{children:_e.current_period_end?st(_e.current_period_end):"N/A"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Payment method"}),jsxRuntimeExports.jsxs("span",{children:[""," ",_e.payment_method_last4||"1234"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium",children:"Subscription Benefits"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-2 w-2 rounded-full bg-cake-pink mr-2"}),jsxRuntimeExports.jsx("span",{children:"Monthly cake delivery"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-2 w-2 rounded-full bg-cake-pink mr-2"}),jsxRuntimeExports.jsx("span",{children:"Exclusive seasonal flavors"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-2 w-2 rounded-full bg-cake-pink mr-2"}),jsxRuntimeExports.jsx("span",{children:"10% discount on additional orders"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-2 w-2 rounded-full bg-cake-pink mr-2"}),jsxRuntimeExports.jsx("span",{children:"Free delivery on subscription orders"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",children:"Update Payment Method"}),jsxRuntimeExports.jsx(Button,{variant:"destructive",children:"Cancel Subscription"})]})]}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Active Subscription"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-6",children:"You don't have an active subscription plan."}),jsxRuntimeExports.jsx(Button,{className:"bg-cake-pink hover:bg-cake-pink/90",children:"Subscribe Now"})]})})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"orders",id:"orders",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Order History"}),jsxRuntimeExports.jsx(CardDescription,{children:"View your past orders and delivery status"})]}),jsxRuntimeExports.jsx(CardContent,{children:d?jsxRuntimeExports.jsx("div",{className:"flex justify-center py-8",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"h-8 w-8 animate-spin text-cake-pink"})}):tt.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-6",children:tt.map(pt=>{var mt,yt,xt;return jsxRuntimeExports.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-muted p-4 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"font-medium",children:["Order #",pt.id.substring(0,8)]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:st(pt.created_at)})]}),jsxRuntimeExports.jsx("div",{className:"text-right",children:jsxRuntimeExports.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${pt.status==="completed"?"bg-green-100 text-green-800":pt.status==="processing"?"bg-blue-100 text-blue-800":pt.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:((mt=pt.status)==null?void 0:mt.charAt(0).toUpperCase())+((yt=pt.status)==null?void 0:yt.slice(1))||"Pending"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-muted-foreground",children:"Total"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:["$",((xt=pt.total_amount)==null?void 0:xt.toFixed(2))||"0.00"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-4",children:[jsxRuntimeExports.jsx("span",{className:"text-muted-foreground",children:"Items"}),jsxRuntimeExports.jsxs("span",{children:[pt.item_count||0," items"]})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"w-full",children:"View Order Details"})]})]},pt.id)})}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Orders Yet"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-6",children:"You haven't placed any orders yet."}),jsxRuntimeExports.jsx(Button,{className:"bg-cake-pink hover:bg-cake-pink/90",children:"Browse Products"})]})})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"settings",id:"settings",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Account Settings"}),jsxRuntimeExports.jsx(CardDescription,{children:"Manage your account settings and preferences"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-4",children:"Email Notifications"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Order updates"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive emails about your order status"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center h-5",children:jsxRuntimeExports.jsx("input",{id:"order-updates",type:"checkbox",defaultChecked:!0,className:"h-4 w-4 rounded border-gray-300 text-cake-pink focus:ring-cake-pink"})})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Promotional emails"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive emails about promotions and discounts"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center h-5",children:jsxRuntimeExports.jsx("input",{id:"promotional-emails",type:"checkbox",defaultChecked:!0,className:"h-4 w-4 rounded border-gray-300 text-cake-pink focus:ring-cake-pink"})})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Newsletter"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive our monthly newsletter"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center h-5",children:jsxRuntimeExports.jsx("input",{id:"newsletter",type:"checkbox",defaultChecked:!0,className:"h-4 w-4 rounded border-gray-300 text-cake-pink focus:ring-cake-pink"})})]})]})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-4",children:"Password"}),jsxRuntimeExports.jsx(Button,{variant:"outline",children:"Change Password"})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-4 text-destructive",children:"Danger Zone"}),jsxRuntimeExports.jsx(Button,{variant:"destructive",children:"Delete Account"})]})]})})]})})]})})]})})})]})},OrdersPage=()=>jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 py-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-6",children:"My Orders"}),jsxRuntimeExports.jsx("p",{children:"This is where your order history will be displayed."}),jsxRuntimeExports.jsx("p",{children:"Coming soon!"})]}),CartPage=()=>{const a=useNavigate(),{cart:e,removeFromCart:c,updateQuantity:d,cartTotal:h,deliveryFee:g}=useCart(),_=()=>{a("/checkout")};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background page-transition",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("section",{className:"pt-32 pb-20",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center mb-8",children:jsxRuntimeExports.jsxs("button",{onClick:()=>a("/products"),className:"flex items-center text-muted-foreground hover:text-foreground",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Continue Shopping"]})}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Your Cart"}),e.length>0?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-2",children:e.map(_e=>jsxRuntimeExports.jsxs("div",{className:"flex items-center p-4 mb-4 bg-white dark:bg-card rounded-lg shadow-sm",children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-24 mr-4",children:jsxRuntimeExports.jsx("img",{src:getProductImageUrl(_e.image_url),alt:_e.name,className:"w-full h-full object-cover rounded-md"})}),jsxRuntimeExports.jsxs("div",{className:"flex-grow",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium",children:_e.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:["R",_e.price.toFixed(2)," each"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>d(_e.id,_e.quantity-1),className:"w-8 h-8 flex items-center justify-center border rounded-md",children:"-"}),jsxRuntimeExports.jsx("span",{className:"mx-3",children:_e.quantity}),jsxRuntimeExports.jsx("button",{onClick:()=>d(_e.id,_e.quantity+1),className:"w-8 h-8 flex items-center justify-center border rounded-md",children:"+"})]}),jsxRuntimeExports.jsxs("div",{className:"ml-6 text-right",children:[jsxRuntimeExports.jsxs("p",{className:"font-medium",children:["R",(_e.price*_e.quantity).toFixed(2)]}),jsxRuntimeExports.jsx("button",{onClick:()=>c(_e.id),className:"text-sm text-red-500 hover:text-red-700",children:"Remove"})]})]},_e.id))}),jsxRuntimeExports.jsx("div",{className:"lg:col-span-1",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-6 rounded-lg shadow-sm",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("p",{children:"Subtotal"}),jsxRuntimeExports.jsxs("p",{children:["R",h.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("p",{children:"Delivery"}),jsxRuntimeExports.jsxs("p",{children:["R",g.toFixed(2)]})]})]}),jsxRuntimeExports.jsx("div",{className:"border-t pt-4",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[jsxRuntimeExports.jsx("p",{children:"Total"}),jsxRuntimeExports.jsxs("p",{className:"text-cake-pink",children:["R",(h+g).toFixed(2)]})]})}),jsxRuntimeExports.jsx(Button,{className:"w-full mt-6 bg-cake-pink hover:bg-cake-pink/90",onClick:_,children:"Proceed to Checkout"})]})})]}):jsxRuntimeExports.jsxs("div",{className:"text-center py-20",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Your cart is empty"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-6",children:"Looks like you haven't added any items to your cart yet."}),jsxRuntimeExports.jsx(Button,{onClick:()=>a("/products"),className:"bg-cake-pink hover:bg-cake-pink/90",children:"Browse Products"})]})]})})]})},Textarea=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("textarea",{className:cn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...e}));Textarea.displayName="Textarea";function clamp(a,[e,c]){return Math.min(c,Math.max(e,a))}var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope$2(SELECT_NAME,[createCollectionScope,createPopperScope]),usePopperScope=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=a=>{const{__scopeSelect:e,children:c,open:d,defaultOpen:h,onOpenChange:g,value:_,defaultValue:_e,onValueChange:et,dir:tt,name:rt,autoComplete:$,disabled:b,required:nt,form:st}=a,ot=usePopperScope(e),[it,at]=reactExports.useState(null),[lt,dt]=reactExports.useState(null),[ht,pt]=reactExports.useState(!1),mt=useDirection(tt),[yt=!1,xt]=useControllableState({prop:d,defaultProp:h,onChange:g}),[gt,bt]=useControllableState({prop:_,defaultProp:_e,onChange:et}),jt=reactExports.useRef(null),Mt=it?st||!!it.closest("form"):!0,[Pt,Tt]=reactExports.useState(new Set),St=Array.from(Pt).map(wt=>wt.props.value).join(";");return jsxRuntimeExports.jsx(Root2$4,{...ot,children:jsxRuntimeExports.jsxs(SelectProvider,{required:nt,scope:e,trigger:it,onTriggerChange:at,valueNode:lt,onValueNodeChange:dt,valueNodeHasChildren:ht,onValueNodeHasChildrenChange:pt,contentId:useId(),value:gt,onValueChange:bt,open:yt,onOpenChange:xt,dir:mt,triggerPointerDownPosRef:jt,disabled:b,children:[jsxRuntimeExports.jsx(Collection.Provider,{scope:e,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:a.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(wt=>{Tt(Rt=>new Set(Rt).add(wt))},[]),onNativeOptionRemove:reactExports.useCallback(wt=>{Tt(Rt=>{const At=new Set(Rt);return At.delete(wt),At})},[]),children:c})}),Mt?jsxRuntimeExports.jsxs(BubbleSelect,{"aria-hidden":!0,required:nt,tabIndex:-1,name:rt,autoComplete:$,value:gt,onChange:wt=>bt(wt.target.value),disabled:b,form:st,children:[gt===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(Pt)]},St):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,disabled:d=!1,...h}=a,g=usePopperScope(c),_=useSelectContext(TRIGGER_NAME,c),_e=_.disabled||d,et=useComposedRefs(e,_.onTriggerChange),tt=useCollection(c),rt=reactExports.useRef("touch"),[$,b,nt]=useTypeaheadSearch(ot=>{const it=tt().filter(dt=>!dt.disabled),at=it.find(dt=>dt.value===_.value),lt=findNextItem(it,ot,at);lt!==void 0&&_.onValueChange(lt.value)}),st=ot=>{_e||(_.onOpenChange(!0),nt()),ot&&(_.triggerPointerDownPosRef.current={x:Math.round(ot.pageX),y:Math.round(ot.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...g,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":_.contentId,"aria-expanded":_.open,"aria-required":_.required,"aria-autocomplete":"none",dir:_.dir,"data-state":_.open?"open":"closed",disabled:_e,"data-disabled":_e?"":void 0,"data-placeholder":shouldShowPlaceholder(_.value)?"":void 0,...h,ref:et,onClick:composeEventHandlers(h.onClick,ot=>{ot.currentTarget.focus(),rt.current!=="mouse"&&st(ot)}),onPointerDown:composeEventHandlers(h.onPointerDown,ot=>{rt.current=ot.pointerType;const it=ot.target;it.hasPointerCapture(ot.pointerId)&&it.releasePointerCapture(ot.pointerId),ot.button===0&&ot.ctrlKey===!1&&ot.pointerType==="mouse"&&(st(ot),ot.preventDefault())}),onKeyDown:composeEventHandlers(h.onKeyDown,ot=>{const it=$.current!=="";!(ot.ctrlKey||ot.altKey||ot.metaKey)&&ot.key.length===1&&b(ot.key),!(it&&ot.key===" ")&&OPEN_KEYS.includes(ot.key)&&(st(),ot.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,className:d,style:h,children:g,placeholder:_="",..._e}=a,et=useSelectContext(VALUE_NAME,c),{onValueNodeHasChildrenChange:tt}=et,rt=g!==void 0,$=useComposedRefs(e,et.onValueNodeChange);return useLayoutEffect2(()=>{tt(rt)},[tt,rt]),jsxRuntimeExports.jsx(Primitive.span,{..._e,ref:$,style:{pointerEvents:"none"},children:shouldShowPlaceholder(et.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_}):g})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,children:d,...h}=a;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...h,ref:e,children:d||""})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME="SelectPortal",SelectPortal=a=>jsxRuntimeExports.jsx(Portal$2,{asChild:!0,...a});SelectPortal.displayName=PORTAL_NAME;var CONTENT_NAME="SelectContent",SelectContent$1=reactExports.forwardRef((a,e)=>{const c=useSelectContext(CONTENT_NAME,a.__scopeSelect),[d,h]=reactExports.useState();if(useLayoutEffect2(()=>{h(new DocumentFragment)},[]),!c.open){const g=d;return g?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:a.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:a.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:a.children})})}),g):null}return jsxRuntimeExports.jsx(SelectContentImpl,{...a,ref:e})});SelectContent$1.displayName=CONTENT_NAME;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME),CONTENT_IMPL_NAME="SelectContentImpl",SelectContentImpl=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,position:d="item-aligned",onCloseAutoFocus:h,onEscapeKeyDown:g,onPointerDownOutside:_,side:_e,sideOffset:et,align:tt,alignOffset:rt,arrowPadding:$,collisionBoundary:b,collisionPadding:nt,sticky:st,hideWhenDetached:ot,avoidCollisions:it,...at}=a,lt=useSelectContext(CONTENT_NAME,c),[dt,ht]=reactExports.useState(null),[pt,mt]=reactExports.useState(null),yt=useComposedRefs(e,gr=>ht(gr)),[xt,gt]=reactExports.useState(null),[bt,jt]=reactExports.useState(null),Mt=useCollection(c),[Pt,Tt]=reactExports.useState(!1),St=reactExports.useRef(!1);reactExports.useEffect(()=>{if(dt)return hideOthers(dt)},[dt]),useFocusGuards();const wt=reactExports.useCallback(gr=>{const[Pr,...Nr]=Mt().map(Ir=>Ir.ref.current),[Ar]=Nr.slice(-1),Rr=document.activeElement;for(const Ir of gr)if(Ir===Rr||(Ir==null||Ir.scrollIntoView({block:"nearest"}),Ir===Pr&&pt&&(pt.scrollTop=0),Ir===Ar&&pt&&(pt.scrollTop=pt.scrollHeight),Ir==null||Ir.focus(),document.activeElement!==Rr))return},[Mt,pt]),Rt=reactExports.useCallback(()=>wt([xt,dt]),[wt,xt,dt]);reactExports.useEffect(()=>{Pt&&Rt()},[Pt,Rt]);const{onOpenChange:At,triggerPointerDownPosRef:Et}=lt;reactExports.useEffect(()=>{if(dt){let gr={x:0,y:0};const Pr=Ar=>{var Rr,Ir;gr={x:Math.abs(Math.round(Ar.pageX)-(((Rr=Et.current)==null?void 0:Rr.x)??0)),y:Math.abs(Math.round(Ar.pageY)-(((Ir=Et.current)==null?void 0:Ir.y)??0))}},Nr=Ar=>{gr.x<=10&&gr.y<=10?Ar.preventDefault():dt.contains(Ar.target)||At(!1),document.removeEventListener("pointermove",Pr),Et.current=null};return Et.current!==null&&(document.addEventListener("pointermove",Pr),document.addEventListener("pointerup",Nr,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Pr),document.removeEventListener("pointerup",Nr,{capture:!0})}}},[dt,At,Et]),reactExports.useEffect(()=>{const gr=()=>At(!1);return window.addEventListener("blur",gr),window.addEventListener("resize",gr),()=>{window.removeEventListener("blur",gr),window.removeEventListener("resize",gr)}},[At]);const[zt,er]=useTypeaheadSearch(gr=>{const Pr=Mt().filter(Rr=>!Rr.disabled),Nr=Pr.find(Rr=>Rr.ref.current===document.activeElement),Ar=findNextItem(Pr,gr,Nr);Ar&&setTimeout(()=>Ar.ref.current.focus())}),pr=reactExports.useCallback((gr,Pr,Nr)=>{const Ar=!St.current&&!Nr;(lt.value!==void 0&&lt.value===Pr||Ar)&&(gt(gr),Ar&&(St.current=!0))},[lt.value]),_r=reactExports.useCallback(()=>dt==null?void 0:dt.focus(),[dt]),Er=reactExports.useCallback((gr,Pr,Nr)=>{const Ar=!St.current&&!Nr;(lt.value!==void 0&&lt.value===Pr||Ar)&&jt(gr)},[lt.value]),Tr=d==="popper"?SelectPopperPosition:SelectItemAlignedPosition,wr=Tr===SelectPopperPosition?{side:_e,sideOffset:et,align:tt,alignOffset:rt,arrowPadding:$,collisionBoundary:b,collisionPadding:nt,sticky:st,hideWhenDetached:ot,avoidCollisions:it}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:c,content:dt,viewport:pt,onViewportChange:mt,itemRefCallback:pr,selectedItem:xt,onItemLeave:_r,itemTextRefCallback:Er,focusSelectedItem:Rt,selectedItemText:bt,position:d,isPositioned:Pt,searchRef:zt,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:lt.open,onMountAutoFocus:gr=>{gr.preventDefault()},onUnmountAutoFocus:composeEventHandlers(h,gr=>{var Pr;(Pr=lt.trigger)==null||Pr.focus({preventScroll:!0}),gr.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:g,onPointerDownOutside:_,onFocusOutside:gr=>gr.preventDefault(),onDismiss:()=>lt.onOpenChange(!1),children:jsxRuntimeExports.jsx(Tr,{role:"listbox",id:lt.contentId,"data-state":lt.open?"open":"closed",dir:lt.dir,onContextMenu:gr=>gr.preventDefault(),...at,...wr,onPlaced:()=>Tt(!0),ref:yt,style:{display:"flex",flexDirection:"column",outline:"none",...at.style},onKeyDown:composeEventHandlers(at.onKeyDown,gr=>{const Pr=gr.ctrlKey||gr.altKey||gr.metaKey;if(gr.key==="Tab"&&gr.preventDefault(),!Pr&&gr.key.length===1&&er(gr.key),["ArrowUp","ArrowDown","Home","End"].includes(gr.key)){let Ar=Mt().filter(Rr=>!Rr.disabled).map(Rr=>Rr.ref.current);if(["ArrowUp","End"].includes(gr.key)&&(Ar=Ar.slice().reverse()),["ArrowUp","ArrowDown"].includes(gr.key)){const Rr=gr.target,Ir=Ar.indexOf(Rr);Ar=Ar.slice(Ir+1)}setTimeout(()=>wt(Ar)),gr.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,onPlaced:d,...h}=a,g=useSelectContext(CONTENT_NAME,c),_=useSelectContentContext(CONTENT_NAME,c),[_e,et]=reactExports.useState(null),[tt,rt]=reactExports.useState(null),$=useComposedRefs(e,yt=>rt(yt)),b=useCollection(c),nt=reactExports.useRef(!1),st=reactExports.useRef(!0),{viewport:ot,selectedItem:it,selectedItemText:at,focusSelectedItem:lt}=_,dt=reactExports.useCallback(()=>{if(g.trigger&&g.valueNode&&_e&&tt&&ot&&it&&at){const yt=g.trigger.getBoundingClientRect(),xt=tt.getBoundingClientRect(),gt=g.valueNode.getBoundingClientRect(),bt=at.getBoundingClientRect();if(g.dir!=="rtl"){const Rr=bt.left-xt.left,Ir=gt.left-Rr,Ur=yt.left-Ir,Fr=yt.width+Ur,nn=Math.max(Fr,xt.width),en=window.innerWidth-CONTENT_MARGIN,on=clamp(Ir,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,en-nn)]);_e.style.minWidth=Fr+"px",_e.style.left=on+"px"}else{const Rr=xt.right-bt.right,Ir=window.innerWidth-gt.right-Rr,Ur=window.innerWidth-yt.right-Ir,Fr=yt.width+Ur,nn=Math.max(Fr,xt.width),en=window.innerWidth-CONTENT_MARGIN,on=clamp(Ir,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,en-nn)]);_e.style.minWidth=Fr+"px",_e.style.right=on+"px"}const jt=b(),Mt=window.innerHeight-CONTENT_MARGIN*2,Pt=ot.scrollHeight,Tt=window.getComputedStyle(tt),St=parseInt(Tt.borderTopWidth,10),wt=parseInt(Tt.paddingTop,10),Rt=parseInt(Tt.borderBottomWidth,10),At=parseInt(Tt.paddingBottom,10),Et=St+wt+Pt+At+Rt,zt=Math.min(it.offsetHeight*5,Et),er=window.getComputedStyle(ot),pr=parseInt(er.paddingTop,10),_r=parseInt(er.paddingBottom,10),Er=yt.top+yt.height/2-CONTENT_MARGIN,Tr=Mt-Er,wr=it.offsetHeight/2,gr=it.offsetTop+wr,Pr=St+wt+gr,Nr=Et-Pr;if(Pr<=Er){const Rr=jt.length>0&&it===jt[jt.length-1].ref.current;_e.style.bottom="0px";const Ir=tt.clientHeight-ot.offsetTop-ot.offsetHeight,Ur=Math.max(Tr,wr+(Rr?_r:0)+Ir+Rt),Fr=Pr+Ur;_e.style.height=Fr+"px"}else{const Rr=jt.length>0&&it===jt[0].ref.current;_e.style.top="0px";const Ur=Math.max(Er,St+ot.offsetTop+(Rr?pr:0)+wr)+Nr;_e.style.height=Ur+"px",ot.scrollTop=Pr-Er+ot.offsetTop}_e.style.margin=`${CONTENT_MARGIN}px 0`,_e.style.minHeight=zt+"px",_e.style.maxHeight=Mt+"px",d==null||d(),requestAnimationFrame(()=>nt.current=!0)}},[b,g.trigger,g.valueNode,_e,tt,ot,it,at,g.dir,d]);useLayoutEffect2(()=>dt(),[dt]);const[ht,pt]=reactExports.useState();useLayoutEffect2(()=>{tt&&pt(window.getComputedStyle(tt).zIndex)},[tt]);const mt=reactExports.useCallback(yt=>{yt&&st.current===!0&&(dt(),lt==null||lt(),st.current=!1)},[dt,lt]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:c,contentWrapper:_e,shouldExpandOnScrollRef:nt,onScrollButtonChange:mt,children:jsxRuntimeExports.jsx("div",{ref:et,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:ht},children:jsxRuntimeExports.jsx(Primitive.div,{...h,ref:$,style:{boxSizing:"border-box",maxHeight:"100%",...h.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,align:d="start",collisionPadding:h=CONTENT_MARGIN,...g}=a,_=usePopperScope(c);return jsxRuntimeExports.jsx(Content$1,{..._,...g,ref:e,align:d,collisionPadding:h,style:{boxSizing:"border-box",...g.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME,{}),VIEWPORT_NAME$1="SelectViewport",SelectViewport=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,nonce:d,...h}=a,g=useSelectContentContext(VIEWPORT_NAME$1,c),_=useSelectViewportContext(VIEWPORT_NAME$1,c),_e=useComposedRefs(e,g.onViewportChange),et=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:d}),jsxRuntimeExports.jsx(Collection.Slot,{scope:c,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...h,ref:_e,style:{position:"relative",flex:1,overflow:"hidden auto",...h.style},onScroll:composeEventHandlers(h.onScroll,tt=>{const rt=tt.currentTarget,{contentWrapper:$,shouldExpandOnScrollRef:b}=_;if(b!=null&&b.current&&$){const nt=Math.abs(et.current-rt.scrollTop);if(nt>0){const st=window.innerHeight-CONTENT_MARGIN*2,ot=parseFloat($.style.minHeight),it=parseFloat($.style.height),at=Math.max(ot,it);if(at<st){const lt=at+nt,dt=Math.min(st,lt),ht=lt-dt;$.style.height=dt+"px",$.style.bottom==="0px"&&(rt.scrollTop=ht>0?ht:0,$.style.justifyContent="flex-end")}}}et.current=rt.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME$1;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,...d}=a,h=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:c,id:h,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":h,...d,ref:e})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,...d}=a,h=useSelectGroupContext(LABEL_NAME,c);return jsxRuntimeExports.jsx(Primitive.div,{id:h.id,...d,ref:e})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME$1="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME$1),SelectItem$1=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,value:d,disabled:h=!1,textValue:g,..._}=a,_e=useSelectContext(ITEM_NAME$1,c),et=useSelectContentContext(ITEM_NAME$1,c),tt=_e.value===d,[rt,$]=reactExports.useState(g??""),[b,nt]=reactExports.useState(!1),st=useComposedRefs(e,lt=>{var dt;return(dt=et.itemRefCallback)==null?void 0:dt.call(et,lt,d,h)}),ot=useId(),it=reactExports.useRef("touch"),at=()=>{h||(_e.onValueChange(d),_e.onOpenChange(!1))};if(d==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:c,value:d,disabled:h,textId:ot,isSelected:tt,onItemTextChange:reactExports.useCallback(lt=>{$(dt=>dt||((lt==null?void 0:lt.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:c,value:d,disabled:h,textValue:rt,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":ot,"data-highlighted":b?"":void 0,"aria-selected":tt&&b,"data-state":tt?"checked":"unchecked","aria-disabled":h||void 0,"data-disabled":h?"":void 0,tabIndex:h?void 0:-1,..._,ref:st,onFocus:composeEventHandlers(_.onFocus,()=>nt(!0)),onBlur:composeEventHandlers(_.onBlur,()=>nt(!1)),onClick:composeEventHandlers(_.onClick,()=>{it.current!=="mouse"&&at()}),onPointerUp:composeEventHandlers(_.onPointerUp,()=>{it.current==="mouse"&&at()}),onPointerDown:composeEventHandlers(_.onPointerDown,lt=>{it.current=lt.pointerType}),onPointerMove:composeEventHandlers(_.onPointerMove,lt=>{var dt;it.current=lt.pointerType,h?(dt=et.onItemLeave)==null||dt.call(et):it.current==="mouse"&&lt.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(_.onPointerLeave,lt=>{var dt;lt.currentTarget===document.activeElement&&((dt=et.onItemLeave)==null||dt.call(et))}),onKeyDown:composeEventHandlers(_.onKeyDown,lt=>{var ht;((ht=et.searchRef)==null?void 0:ht.current)!==""&&lt.key===" "||(SELECTION_KEYS.includes(lt.key)&&at(),lt.key===" "&&lt.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME$1;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,className:d,style:h,...g}=a,_=useSelectContext(ITEM_TEXT_NAME,c),_e=useSelectContentContext(ITEM_TEXT_NAME,c),et=useSelectItemContext(ITEM_TEXT_NAME,c),tt=useSelectNativeOptionsContext(ITEM_TEXT_NAME,c),[rt,$]=reactExports.useState(null),b=useComposedRefs(e,at=>$(at),et.onItemTextChange,at=>{var lt;return(lt=_e.itemTextRefCallback)==null?void 0:lt.call(_e,at,et.value,et.disabled)}),nt=rt==null?void 0:rt.textContent,st=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:et.value,disabled:et.disabled,children:nt},et.value),[et.disabled,et.value,nt]),{onNativeOptionAdd:ot,onNativeOptionRemove:it}=tt;return useLayoutEffect2(()=>(ot(st),()=>it(st)),[ot,it,st]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:et.textId,...g,ref:b}),et.isSelected&&_.valueNode&&!_.valueNodeHasChildren?reactDomExports.createPortal(g.children,_.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,...d}=a;return useSelectItemContext(ITEM_INDICATOR_NAME,c).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...d,ref:e}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((a,e)=>{const c=useSelectContentContext(SCROLL_UP_BUTTON_NAME,a.__scopeSelect),d=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,a.__scopeSelect),[h,g]=reactExports.useState(!1),_=useComposedRefs(e,d.onScrollButtonChange);return useLayoutEffect2(()=>{if(c.viewport&&c.isPositioned){let _e=function(){const tt=et.scrollTop>0;g(tt)};const et=c.viewport;return _e(),et.addEventListener("scroll",_e),()=>et.removeEventListener("scroll",_e)}},[c.viewport,c.isPositioned]),h?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...a,ref:_,onAutoScroll:()=>{const{viewport:_e,selectedItem:et}=c;_e&&et&&(_e.scrollTop=_e.scrollTop-et.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((a,e)=>{const c=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,a.__scopeSelect),d=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,a.__scopeSelect),[h,g]=reactExports.useState(!1),_=useComposedRefs(e,d.onScrollButtonChange);return useLayoutEffect2(()=>{if(c.viewport&&c.isPositioned){let _e=function(){const tt=et.scrollHeight-et.clientHeight,rt=Math.ceil(et.scrollTop)<tt;g(rt)};const et=c.viewport;return _e(),et.addEventListener("scroll",_e),()=>et.removeEventListener("scroll",_e)}},[c.viewport,c.isPositioned]),h?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...a,ref:_,onAutoScroll:()=>{const{viewport:_e,selectedItem:et}=c;_e&&et&&(_e.scrollTop=_e.scrollTop+et.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,onAutoScroll:d,...h}=a,g=useSelectContentContext("SelectScrollButton",c),_=reactExports.useRef(null),_e=useCollection(c),et=reactExports.useCallback(()=>{_.current!==null&&(window.clearInterval(_.current),_.current=null)},[]);return reactExports.useEffect(()=>()=>et(),[et]),useLayoutEffect2(()=>{var rt;const tt=_e().find($=>$.ref.current===document.activeElement);(rt=tt==null?void 0:tt.ref.current)==null||rt.scrollIntoView({block:"nearest"})},[_e]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...h,ref:e,style:{flexShrink:0,...h.style},onPointerDown:composeEventHandlers(h.onPointerDown,()=>{_.current===null&&(_.current=window.setInterval(d,50))}),onPointerMove:composeEventHandlers(h.onPointerMove,()=>{var tt;(tt=g.onItemLeave)==null||tt.call(g),_.current===null&&(_.current=window.setInterval(d,50))}),onPointerLeave:composeEventHandlers(h.onPointerLeave,()=>{et()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...d,ref:e})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,...d}=a,h=usePopperScope(c),g=useSelectContext(ARROW_NAME,c),_=useSelectContentContext(ARROW_NAME,c);return g.open&&_.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...h,...d,ref:e}):null});SelectArrow.displayName=ARROW_NAME;function shouldShowPlaceholder(a){return a===""||a===void 0}var BubbleSelect=reactExports.forwardRef((a,e)=>{const{value:c,...d}=a,h=reactExports.useRef(null),g=useComposedRefs(e,h),_=usePrevious$1(c);return reactExports.useEffect(()=>{const _e=h.current,et=window.HTMLSelectElement.prototype,rt=Object.getOwnPropertyDescriptor(et,"value").set;if(_!==c&&rt){const $=new Event("change",{bubbles:!0});rt.call(_e,c),_e.dispatchEvent($)}},[_,c]),jsxRuntimeExports.jsx(VisuallyHidden,{asChild:!0,children:jsxRuntimeExports.jsx("select",{...d,ref:g,defaultValue:c})})});BubbleSelect.displayName="BubbleSelect";function useTypeaheadSearch(a){const e=useCallbackRef$1(a),c=reactExports.useRef(""),d=reactExports.useRef(0),h=reactExports.useCallback(_=>{const _e=c.current+_;e(_e),function et(tt){c.current=tt,window.clearTimeout(d.current),tt!==""&&(d.current=window.setTimeout(()=>et(""),1e3))}(_e)},[e]),g=reactExports.useCallback(()=>{c.current="",window.clearTimeout(d.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(d.current),[]),[c,h,g]}function findNextItem(a,e,c){const h=e.length>1&&Array.from(e).every(tt=>tt===e[0])?e[0]:e,g=c?a.indexOf(c):-1;let _=wrapArray(a,Math.max(g,0));h.length===1&&(_=_.filter(tt=>tt!==c));const et=_.find(tt=>tt.textValue.toLowerCase().startsWith(h.toLowerCase()));return et!==c?et:void 0}function wrapArray(a,e){return a.map((c,d)=>a[(e+d)%a.length])}var Root2$1=Select$1,Trigger=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal=SelectPortal,Content2=SelectContent$1,Viewport$1=SelectViewport,Label=SelectLabel$1,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator=SelectSeparator$1;const Select=Root2$1,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:a,children:e,...c},d)=>jsxRuntimeExports.jsxs(Trigger,{ref:d,className:cn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...c,children:[e,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:c,className:cn("flex cursor-default items-center justify-center py-1",a),...e,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:c,className:cn("flex cursor-default items-center justify-center py-1",a),...e,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:a,children:e,position:c="popper",...d},h)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2,{ref:h,className:cn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",c==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...d,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport$1,{className:cn("p-1",c==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2.displayName;const SelectLabel=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Label,{ref:c,className:cn("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...e}));SelectLabel.displayName=Label.displayName;const SelectItem=reactExports.forwardRef(({className:a,children:e,...c},d)=>jsxRuntimeExports.jsxs(Item,{ref:d,className:cn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:e})]}));SelectItem.displayName=Item.displayName;const SelectSeparator=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Separator,{ref:c,className:cn("-mx-1 my-1 h-px bg-muted",a),...e}));SelectSeparator.displayName=Separator.displayName;var RADIO_NAME="Radio",[createRadioContext,createRadioScope]=createContextScope$2(RADIO_NAME),[RadioProvider,useRadioContext]=createRadioContext(RADIO_NAME),Radio=reactExports.forwardRef((a,e)=>{const{__scopeRadio:c,name:d,checked:h=!1,required:g,disabled:_,value:_e="on",onCheck:et,form:tt,...rt}=a,[$,b]=reactExports.useState(null),nt=useComposedRefs(e,it=>b(it)),st=reactExports.useRef(!1),ot=$?tt||!!$.closest("form"):!0;return jsxRuntimeExports.jsxs(RadioProvider,{scope:c,checked:h,disabled:_,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"radio","aria-checked":h,"data-state":getState(h),"data-disabled":_?"":void 0,disabled:_,value:_e,...rt,ref:nt,onClick:composeEventHandlers(a.onClick,it=>{h||et==null||et(),ot&&(st.current=it.isPropagationStopped(),st.current||it.stopPropagation())})}),ot&&jsxRuntimeExports.jsx(BubbleInput,{control:$,bubbles:!st.current,name:d,value:_e,checked:h,required:g,disabled:_,form:tt,style:{transform:"translateX(-100%)"}})]})});Radio.displayName=RADIO_NAME;var INDICATOR_NAME="RadioIndicator",RadioIndicator=reactExports.forwardRef((a,e)=>{const{__scopeRadio:c,forceMount:d,...h}=a,g=useRadioContext(INDICATOR_NAME,c);return jsxRuntimeExports.jsx(Presence,{present:d||g.checked,children:jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(g.checked),"data-disabled":g.disabled?"":void 0,...h,ref:e})})});RadioIndicator.displayName=INDICATOR_NAME;var BubbleInput=a=>{const{control:e,checked:c,bubbles:d=!0,...h}=a,g=reactExports.useRef(null),_=usePrevious$1(c),_e=useSize(e);return reactExports.useEffect(()=>{const et=g.current,tt=window.HTMLInputElement.prototype,$=Object.getOwnPropertyDescriptor(tt,"checked").set;if(_!==c&&$){const b=new Event("click",{bubbles:d});$.call(et,c),et.dispatchEvent(b)}},[_,c,d]),jsxRuntimeExports.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:c,...h,tabIndex:-1,ref:g,style:{...a.style,..._e,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function getState(a){return a?"checked":"unchecked"}var ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],RADIO_GROUP_NAME="RadioGroup",[createRadioGroupContext,createRadioGroupScope]=createContextScope$2(RADIO_GROUP_NAME,[createRovingFocusGroupScope,createRadioScope]),useRovingFocusGroupScope=createRovingFocusGroupScope(),useRadioScope=createRadioScope(),[RadioGroupProvider,useRadioGroupContext]=createRadioGroupContext(RADIO_GROUP_NAME),RadioGroup$1=reactExports.forwardRef((a,e)=>{const{__scopeRadioGroup:c,name:d,defaultValue:h,value:g,required:_=!1,disabled:_e=!1,orientation:et,dir:tt,loop:rt=!0,onValueChange:$,...b}=a,nt=useRovingFocusGroupScope(c),st=useDirection(tt),[ot,it]=useControllableState({prop:g,defaultProp:h,onChange:$});return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:c,name:d,required:_,disabled:_e,value:ot,onValueChange:it,children:jsxRuntimeExports.jsx(Root$5,{asChild:!0,...nt,orientation:et,dir:st,loop:rt,children:jsxRuntimeExports.jsx(Primitive.div,{role:"radiogroup","aria-required":_,"aria-orientation":et,"data-disabled":_e?"":void 0,dir:st,...b,ref:e})})})});RadioGroup$1.displayName=RADIO_GROUP_NAME;var ITEM_NAME="RadioGroupItem",RadioGroupItem$1=reactExports.forwardRef((a,e)=>{const{__scopeRadioGroup:c,disabled:d,...h}=a,g=useRadioGroupContext(ITEM_NAME,c),_=g.disabled||d,_e=useRovingFocusGroupScope(c),et=useRadioScope(c),tt=reactExports.useRef(null),rt=useComposedRefs(e,tt),$=g.value===h.value,b=reactExports.useRef(!1);return reactExports.useEffect(()=>{const nt=ot=>{ARROW_KEYS.includes(ot.key)&&(b.current=!0)},st=()=>b.current=!1;return document.addEventListener("keydown",nt),document.addEventListener("keyup",st),()=>{document.removeEventListener("keydown",nt),document.removeEventListener("keyup",st)}},[]),jsxRuntimeExports.jsx(Item$1,{asChild:!0,..._e,focusable:!_,active:$,children:jsxRuntimeExports.jsx(Radio,{disabled:_,required:g.required,checked:$,...et,...h,name:g.name,ref:rt,onCheck:()=>g.onValueChange(h.value),onKeyDown:composeEventHandlers(nt=>{nt.key==="Enter"&&nt.preventDefault()}),onFocus:composeEventHandlers(h.onFocus,()=>{var nt;b.current&&((nt=tt.current)==null||nt.click())})})})});RadioGroupItem$1.displayName=ITEM_NAME;var INDICATOR_NAME2="RadioGroupIndicator",RadioGroupIndicator=reactExports.forwardRef((a,e)=>{const{__scopeRadioGroup:c,...d}=a,h=useRadioScope(c);return jsxRuntimeExports.jsx(RadioIndicator,{...h,...d,ref:e})});RadioGroupIndicator.displayName=INDICATOR_NAME2;var Root2=RadioGroup$1,Item2=RadioGroupItem$1,Indicator=RadioGroupIndicator;const RadioGroup=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Root2,{className:cn("grid gap-2",a),...e,ref:c}));RadioGroup.displayName=Root2.displayName;const RadioGroupItem=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Item2,{ref:c,className:cn("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...e,children:jsxRuntimeExports.jsx(Indicator,{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx(Circle,{className:"h-2.5 w-2.5 fill-current text-current"})})}));RadioGroupItem.displayName=Item2.displayName;var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function a(d,h,g,_,_e,et){if(et!==ReactPropTypesSecret){var tt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw tt.name="Invariant Violation",tt}}a.isRequired=a;function e(){return a}var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:e,element:a,elementType:a,instanceOf:e,node:a,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return c.PropTypes=c,c};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function ownKeys(a,e){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);e&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),c.push.apply(c,d)}return c}function _objectSpread2(a){for(var e=1;e<arguments.length;e++){var c=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(c),!0).forEach(function(d){_defineProperty(a,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ownKeys(Object(c)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))})}return a}function _typeof(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(a)}function _defineProperty(a,e,c){return e in a?Object.defineProperty(a,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[e]=c,a}function _objectWithoutPropertiesLoose(a,e){if(a==null)return{};var c={},d=Object.keys(a),h,g;for(g=0;g<d.length;g++)h=d[g],!(e.indexOf(h)>=0)&&(c[h]=a[h]);return c}function _objectWithoutProperties(a,e){if(a==null)return{};var c=_objectWithoutPropertiesLoose(a,e),d,h;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);for(h=0;h<g.length;h++)d=g[h],!(e.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(a,d)&&(c[d]=a[d])}return c}function _slicedToArray(a,e){return _arrayWithHoles(a)||_iterableToArrayLimit(a,e)||_unsupportedIterableToArray(a,e)||_nonIterableRest()}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _iterableToArrayLimit(a,e){var c=a&&(typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"]);if(c!=null){var d=[],h=!0,g=!1,_,_e;try{for(c=c.call(a);!(h=(_=c.next()).done)&&(d.push(_.value),!(e&&d.length===e));h=!0);}catch(et){g=!0,_e=et}finally{try{!h&&c.return!=null&&c.return()}finally{if(g)throw _e}}return d}}function _unsupportedIterableToArray(a,e){if(a){if(typeof a=="string")return _arrayLikeToArray(a,e);var c=Object.prototype.toString.call(a).slice(8,-1);if(c==="Object"&&a.constructor&&(c=a.constructor.name),c==="Map"||c==="Set")return Array.from(a);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _arrayLikeToArray(a,e)}}function _arrayLikeToArray(a,e){(e==null||e>a.length)&&(e=a.length);for(var c=0,d=new Array(e);c<e;c++)d[c]=a[c];return d}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var useAttachEvent=function(e,c,d){var h=!!d,g=React.useRef(d);React.useEffect(function(){g.current=d},[d]),React.useEffect(function(){if(!h||!e)return function(){};var _=function(){g.current&&g.current.apply(g,arguments)};return e.on(c,_),function(){e.off(c,_)}},[h,c,e,g])},usePrevious=function(e){var c=React.useRef(e);return React.useEffect(function(){c.current=e},[e]),c.current},isUnknownObject=function(e){return e!==null&&_typeof(e)==="object"},isPromise=function(e){return isUnknownObject(e)&&typeof e.then=="function"},isStripe=function(e){return isUnknownObject(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},PLAIN_OBJECT_STR="[object Object]",isEqual=function a(e,c){if(!isUnknownObject(e)||!isUnknownObject(c))return e===c;var d=Array.isArray(e),h=Array.isArray(c);if(d!==h)return!1;var g=Object.prototype.toString.call(e)===PLAIN_OBJECT_STR,_=Object.prototype.toString.call(c)===PLAIN_OBJECT_STR;if(g!==_)return!1;if(!g&&!d)return e===c;var _e=Object.keys(e),et=Object.keys(c);if(_e.length!==et.length)return!1;for(var tt={},rt=0;rt<_e.length;rt+=1)tt[_e[rt]]=!0;for(var $=0;$<et.length;$+=1)tt[et[$]]=!0;var b=Object.keys(tt);if(b.length!==_e.length)return!1;var nt=e,st=c,ot=function(at){return a(nt[at],st[at])};return b.every(ot)},extractAllowedOptionsUpdates=function(e,c,d){return isUnknownObject(e)?Object.keys(e).reduce(function(h,g){var _=!isUnknownObject(c)||!isEqual(e[g],c[g]);return d.includes(g)?(_&&console.warn("Unsupported prop change: options.".concat(g," is not a mutable property.")),h):_?_objectSpread2(_objectSpread2({},h||{}),{},_defineProperty({},g,e[g])):h},null):null},INVALID_STRIPE_ERROR$2="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",validateStripe=function(e){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:INVALID_STRIPE_ERROR$2;if(e===null||isStripe(e))return e;throw new Error(c)},parseStripeProp=function(e){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:INVALID_STRIPE_ERROR$2;if(isPromise(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(h){return validateStripe(h,c)})};var d=validateStripe(e,c);return d===null?{tag:"empty"}:{tag:"sync",stripe:d}},registerWithStripeJs=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},ElementsContext=React.createContext(null);ElementsContext.displayName="ElementsContext";var parseElementsContext=function(e,c){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(c," in an <Elements> provider."));return e},Elements=function(e){var c=e.stripe,d=e.options,h=e.children,g=React.useMemo(function(){return parseStripeProp(c)},[c]),_=React.useState(function(){return{stripe:g.tag==="sync"?g.stripe:null,elements:g.tag==="sync"?g.stripe.elements(d):null}}),_e=_slicedToArray(_,2),et=_e[0],tt=_e[1];React.useEffect(function(){var b=!0,nt=function(ot){tt(function(it){return it.stripe?it:{stripe:ot,elements:ot.elements(d)}})};return g.tag==="async"&&!et.stripe?g.stripePromise.then(function(st){st&&b&&nt(st)}):g.tag==="sync"&&!et.stripe&&nt(g.stripe),function(){b=!1}},[g,et,d]);var rt=usePrevious(c);React.useEffect(function(){rt!==null&&rt!==c&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[rt,c]);var $=usePrevious(d);return React.useEffect(function(){if(et.elements){var b=extractAllowedOptionsUpdates(d,$,["clientSecret","fonts"]);b&&et.elements.update(b)}},[d,$,et.elements]),React.useEffect(function(){registerWithStripeJs(et.stripe)},[et.stripe]),React.createElement(ElementsContext.Provider,{value:et},h)};Elements.propTypes={stripe:PropTypes.any,options:PropTypes.object};var useElementsContextWithUseCase=function(e){var c=React.useContext(ElementsContext);return parseElementsContext(c,e)},useElements=function(){var e=useElementsContextWithUseCase("calls useElements()"),c=e.elements;return c};PropTypes.func.isRequired;var CheckoutSdkContext=React.createContext(null);CheckoutSdkContext.displayName="CheckoutSdkContext";var parseCheckoutSdkContext=function(e,c){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(c," in an <CheckoutProvider> provider."));return e},CheckoutContext=React.createContext(null);CheckoutContext.displayName="CheckoutContext";PropTypes.any,PropTypes.shape({fetchClientSecret:PropTypes.func.isRequired,elementsOptions:PropTypes.object}).isRequired;var useElementsOrCheckoutSdkContextWithUseCase=function(e){var c=React.useContext(CheckoutSdkContext),d=React.useContext(ElementsContext);if(c&&d)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return c?parseCheckoutSdkContext(c,e):parseElementsContext(d,e)},_excluded=["mode"],capitalized=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},createElementComponent=function(e,c){var d="".concat(capitalized(e),"Element"),h=function(et){var tt=et.id,rt=et.className,$=et.options,b=$===void 0?{}:$,nt=et.onBlur,st=et.onFocus,ot=et.onReady,it=et.onChange,at=et.onEscape,lt=et.onClick,dt=et.onLoadError,ht=et.onLoaderStart,pt=et.onNetworksChange,mt=et.onConfirm,yt=et.onCancel,xt=et.onShippingAddressChange,gt=et.onShippingRateChange,bt=useElementsOrCheckoutSdkContextWithUseCase("mounts <".concat(d,">")),jt="elements"in bt?bt.elements:null,Mt="checkoutSdk"in bt?bt.checkoutSdk:null,Pt=React.useState(null),Tt=_slicedToArray(Pt,2),St=Tt[0],wt=Tt[1],Rt=React.useRef(null),At=React.useRef(null);useAttachEvent(St,"blur",nt),useAttachEvent(St,"focus",st),useAttachEvent(St,"escape",at),useAttachEvent(St,"click",lt),useAttachEvent(St,"loaderror",dt),useAttachEvent(St,"loaderstart",ht),useAttachEvent(St,"networkschange",pt),useAttachEvent(St,"confirm",mt),useAttachEvent(St,"cancel",yt),useAttachEvent(St,"shippingaddresschange",xt),useAttachEvent(St,"shippingratechange",gt),useAttachEvent(St,"change",it);var Et;ot&&(e==="expressCheckout"?Et=ot:Et=function(){ot(St)}),useAttachEvent(St,"ready",Et),React.useLayoutEffect(function(){if(Rt.current===null&&At.current!==null&&(jt||Mt)){var er=null;if(Mt)switch(e){case"payment":er=Mt.createPaymentElement(b);break;case"address":if("mode"in b){var pr=b.mode,_r=_objectWithoutProperties(b,_excluded);if(pr==="shipping")er=Mt.createShippingAddressElement(_r);else if(pr==="billing")er=Mt.createBillingAddressElement(_r);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":er=Mt.createExpressCheckoutElement(b);break;case"currencySelector":er=Mt.createCurrencySelectorElement();break;default:throw new Error("Invalid Element type ".concat(d,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else jt&&(er=jt.create(e,b));Rt.current=er,wt(er),er&&er.mount(At.current)}},[jt,Mt,b]);var zt=usePrevious(b);return React.useEffect(function(){if(Rt.current){var er=extractAllowedOptionsUpdates(b,zt,["paymentRequest"]);er&&"update"in Rt.current&&Rt.current.update(er)}},[b,zt]),React.useLayoutEffect(function(){return function(){if(Rt.current&&typeof Rt.current.destroy=="function")try{Rt.current.destroy(),Rt.current=null}catch{}}},[]),React.createElement("div",{id:tt,className:rt,ref:At})},g=function(et){useElementsOrCheckoutSdkContextWithUseCase("mounts <".concat(d,">"));var tt=et.id,rt=et.className;return React.createElement("div",{id:tt,className:rt})},_=c?g:h;return _.propTypes={id:PropTypes.string,className:PropTypes.string,onChange:PropTypes.func,onBlur:PropTypes.func,onFocus:PropTypes.func,onReady:PropTypes.func,onEscape:PropTypes.func,onClick:PropTypes.func,onLoadError:PropTypes.func,onLoaderStart:PropTypes.func,onNetworksChange:PropTypes.func,onConfirm:PropTypes.func,onCancel:PropTypes.func,onShippingAddressChange:PropTypes.func,onShippingRateChange:PropTypes.func,options:PropTypes.object},_.displayName=d,_.__elementType=e,_},isServer=typeof window>"u",EmbeddedCheckoutContext=React.createContext(null);EmbeddedCheckoutContext.displayName="EmbeddedCheckoutProviderContext";var useStripe=function(){var e=useElementsOrCheckoutSdkContextWithUseCase("calls useStripe()"),c=e.stripe;return c};createElementComponent("auBankAccount",isServer);createElementComponent("card",isServer);createElementComponent("cardNumber",isServer);createElementComponent("cardExpiry",isServer);createElementComponent("cardCvc",isServer);createElementComponent("fpxBank",isServer);createElementComponent("iban",isServer);createElementComponent("idealBank",isServer);createElementComponent("p24Bank",isServer);createElementComponent("epsBank",isServer);var PaymentElement=createElementComponent("payment",isServer);createElementComponent("expressCheckout",isServer);createElementComponent("currencySelector",isServer);createElementComponent("paymentRequestButton",isServer);createElementComponent("linkAuthentication",isServer);createElementComponent("address",isServer);createElementComponent("shippingAddress",isServer);createElementComponent("paymentMethodMessaging",isServer);createElementComponent("affirmMessage",isServer);createElementComponent("afterpayClearpayMessage",isServer);const Spinner=({className:a,...e})=>jsxRuntimeExports.jsx("div",{className:`inline-block h-4 w-4 animate-spin rounded-full border-2 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite] ${a}`,role:"status",...e,children:jsxRuntimeExports.jsx("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})}),CreditCardForm=({onSuccess:a,onError:e,orderId:c})=>{const d=useStripe(),h=useElements(),[g,_]=reactExports.useState(!1),[_e,et]=reactExports.useState(),tt=async rt=>{if(rt.preventDefault(),!(!d||!h)){_(!0);try{const{error:$,paymentIntent:b}=await d.confirmPayment({elements:h,confirmParams:{return_url:`${window.location.origin}/order-confirmation`},redirect:"if_required"});$?(et($.message),e($.message||"An unknown error occurred")):b&&b.status==="succeeded"?a(c||""):(et("Payment processing failed. Please try again."),e("Payment processing failed"))}catch($){et($.message||"An unexpected error occurred"),e($.message||"An unexpected error occurred")}finally{_(!1)}}};return jsxRuntimeExports.jsxs("form",{onSubmit:tt,className:"space-y-6",children:[jsxRuntimeExports.jsx(PaymentElement,{}),_e&&jsxRuntimeExports.jsx("div",{className:"text-red-500 text-sm mt-2",children:_e}),jsxRuntimeExports.jsx(Button,{type:"submit",disabled:!d||g,className:"w-full",children:g?jsxRuntimeExports.jsxs("span",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Spinner,{className:"mr-2"})," Processing..."]}):"Pay Now"})]})};/*!
 * react-paypal-js v8.8.3 (2025-04-11T19:50:46.506Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SCRIPT_LOADING_STATE;(function(a){a.INITIAL="initial",a.PENDING="pending",a.REJECTED="rejected",a.RESOLVED="resolved"})(SCRIPT_LOADING_STATE||(SCRIPT_LOADING_STATE={}));var DISPATCH_ACTION;(function(a){a.LOADING_STATUS="setLoadingStatus",a.RESET_OPTIONS="resetOptions",a.SET_BRAINTREE_INSTANCE="braintreeInstance"})(DISPATCH_ACTION||(DISPATCH_ACTION={}));var PAYPAL_HOSTED_FIELDS_TYPES;(function(a){a.NUMBER="number",a.CVV="cvv",a.EXPIRATION_DATE="expirationDate",a.EXPIRATION_MONTH="expirationMonth",a.EXPIRATION_YEAR="expirationYear",a.POSTAL_CODE="postalCode"})(PAYPAL_HOSTED_FIELDS_TYPES||(PAYPAL_HOSTED_FIELDS_TYPES={}));var __assign=function(){return __assign=Object.assign||function(e){for(var c,d=1,h=arguments.length;d<h;d++){c=arguments[d];for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(e[g]=c[g])}return e},__assign.apply(this,arguments)};function __rest$1(a,e){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&e.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(a);h<d.length;h++)e.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(a,d[h])&&(c[d[h]]=a[d[h]]);return c}function __spreadArray(a,e,c){if(c||arguments.length===2)for(var d=0,h=e.length,g;d<h;d++)(g||!(d in e))&&(g||(g=Array.prototype.slice.call(e,0,d)),g[d]=e[d]);return a.concat(g||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var SDK_SETTINGS={DATA_CLIENT_TOKEN:"dataClientToken",DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource",DATA_USER_ID_TOKEN:"dataUserIdToken"},DEFAULT_PAYPAL_NAMESPACE="paypal",SCRIPT_PROVIDER_REDUCER_ERROR="usePayPalScriptReducer must be used within a PayPalScriptProvider";function getPayPalWindowNamespace$1(a){return a===void 0&&(a=DEFAULT_PAYPAL_NAMESPACE),window[a]}function generateErrorMessage(a){var e=a.reactComponentName,c=a.sdkComponentKey,d=a.sdkRequestedComponents,h=d===void 0?"":d,g=a.sdkDataNamespace,_=g===void 0?DEFAULT_PAYPAL_NAMESPACE:g,_e=c.charAt(0).toUpperCase().concat(c.substring(1)),et="Unable to render <".concat(e," /> because window.").concat(_,".").concat(_e," is undefined."),tt=typeof h=="string"?h:h.join(",");if(!tt.includes(c)){var rt=[tt,c].filter(Boolean).join();et+=`
To fix the issue, add '`.concat(c,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(rt,"'}}>`.")}return et}var ScriptContext=reactExports.createContext(null);function validateReducer(a){if(typeof(a==null?void 0:a.dispatch)=="function"&&a.dispatch.length!==0)return a;throw new Error(SCRIPT_PROVIDER_REDUCER_ERROR)}function usePayPalScriptReducer(){var a=validateReducer(reactExports.useContext(ScriptContext)),e=__assign(__assign({},a),{isInitial:a.loadingStatus===SCRIPT_LOADING_STATE.INITIAL,isPending:a.loadingStatus===SCRIPT_LOADING_STATE.PENDING,isResolved:a.loadingStatus===SCRIPT_LOADING_STATE.RESOLVED,isRejected:a.loadingStatus===SCRIPT_LOADING_STATE.REJECTED});return[e,a.dispatch]}reactExports.createContext({});function useProxyProps(a){var e=reactExports.useRef(new Proxy({},{get:function(c,d,h){return typeof c[d]=="function"?function(){for(var g=[],_=0;_<arguments.length;_++)g[_]=arguments[_];return c[d].apply(c,g)}:Reflect.get(c,d,h)}}));return e.current=Object.assign(e.current,a),e.current}var PayPalButtons=function(a){var e,c=a.className,d=c===void 0?"":c,h=a.disabled,g=h===void 0?!1:h,_=a.children,_e=a.forceReRender,et=_e===void 0?[]:_e,tt=__rest$1(a,["className","disabled","children","forceReRender"]),rt=g?{opacity:.38}:{},$="".concat(d," ").concat(g?"paypal-buttons-disabled":"").trim(),b=reactExports.useRef(null),nt=reactExports.useRef(null),st=useProxyProps(tt),ot=usePayPalScriptReducer()[0],it=ot.isResolved,at=ot.options,lt=reactExports.useState(null),dt=lt[0],ht=lt[1],pt=reactExports.useState(!0),mt=pt[0],yt=pt[1],xt=reactExports.useState(null),gt=xt[1];function bt(){nt.current!==null&&nt.current.close().catch(function(){})}return!((e=nt.current)===null||e===void 0)&&e.updateProps&&nt.current.updateProps({message:tt.message}),reactExports.useEffect(function(){if(it===!1)return bt;var jt=getPayPalWindowNamespace$1(at.dataNamespace);if(jt===void 0||jt.Buttons===void 0)return gt(function(){throw new Error(generateErrorMessage({reactComponentName:PayPalButtons.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:at.components,sdkDataNamespace:at[SDK_SETTINGS.DATA_NAMESPACE]}))}),bt;var Mt=function(Pt,Tt){ht(Tt),typeof tt.onInit=="function"&&tt.onInit(Pt,Tt)};try{nt.current=jt.Buttons(__assign(__assign({},st),{onInit:Mt}))}catch(Pt){return gt(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(Pt))})}return nt.current.isEligible()===!1?(yt(!1),bt):(b.current&&nt.current.render(b.current).catch(function(Pt){b.current===null||b.current.children.length===0||gt(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(Pt))})}),bt)},__spreadArray(__spreadArray([it],et,!0),[tt.fundingSource],!1)),reactExports.useEffect(function(){dt!==null&&(g===!0?dt.disable().catch(function(){}):dt.enable().catch(function(){}))},[g,dt]),React.createElement(React.Fragment,null,mt?React.createElement("div",{ref:b,style:rt,className:$}):_)};PayPalButtons.displayName="PayPalButtons";typeof SuppressedError=="function"&&SuppressedError;function ignore(){}reactExports.createContext({cardFieldsForm:null,fields:{},registerField:ignore,unregisterField:ignore});const PayPalCheckout=({amount:a,currency:e,orderId:c,isSubscription:d,onSuccess:h,onError:g})=>{const[{isPending:_}]=usePayPalScriptReducer();return _?jsxRuntimeExports.jsx("div",{className:"flex justify-center p-4",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"h-8 w-8 animate-spin text-cake-pink"})}):jsxRuntimeExports.jsx("div",{className:"w-full",children:d?jsxRuntimeExports.jsx(PayPalButtons,{style:{layout:"vertical",color:"gold"},createSubscription:(_e,et)=>et.subscription.create({plan_id:c||""}),onApprove:(_e,et)=>(h({subscriptionID:_e.subscriptionID,orderID:_e.orderID}),Promise.resolve()),onError:_e=>{var et;g(((et=_e==null?void 0:_e.toString)==null?void 0:et.call(_e))||"Unknown PayPal error")}}):jsxRuntimeExports.jsx(PayPalButtons,{style:{layout:"vertical",color:"gold"},createOrder:(_e,et)=>et.order.create({purchase_units:[{amount:{value:a.toFixed(2),currency_code:e}}]}),onApprove:async(_e,et)=>{if(et.order){const tt=await et.order.capture();h(tt)}else h(_e)},onError:_e=>{var et;g(((et=_e==null?void 0:_e.toString)==null?void 0:et.call(_e))||"Unknown PayPal error")}})})};var RELEASE_TRAIN="basil",runtimeVersionToUrlVersion=function(e){return e===3?"v3":e},ORIGIN="https://js.stripe.com",STRIPE_JS_URL="".concat(ORIGIN,"/").concat(RELEASE_TRAIN,"/stripe.js"),V3_URL_REGEX=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,STRIPE_JS_URL_REGEX=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,EXISTING_SCRIPT_MESSAGE="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",isStripeJSURL=function(e){return V3_URL_REGEX.test(e)||STRIPE_JS_URL_REGEX.test(e)},findScript=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ORIGIN,'"]')),c=0;c<e.length;c++){var d=e[c];if(isStripeJSURL(d.src))return d}return null},injectScript=function(e){var c="",d=document.createElement("script");d.src="".concat(STRIPE_JS_URL).concat(c);var h=document.head||document.body;if(!h)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return h.appendChild(d),d},registerWrapper=function(e,c){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.3.0",startTime:c})},stripePromise$1$1=null,onErrorListener=null,onLoadListener=null,onError=function(e){return function(c){e(new Error("Failed to load Stripe.js",{cause:c}))}},onLoad=function(e,c){return function(){window.Stripe?e(window.Stripe):c(new Error("Stripe.js not available"))}},loadScript=function(e){return stripePromise$1$1!==null?stripePromise$1$1:(stripePromise$1$1=new Promise(function(c,d){if(typeof window>"u"||typeof document>"u"){c(null);return}if(window.Stripe&&e&&console.warn(EXISTING_SCRIPT_MESSAGE),window.Stripe){c(window.Stripe);return}try{var h=findScript();if(h&&e)console.warn(EXISTING_SCRIPT_MESSAGE);else if(!h)h=injectScript(e);else if(h&&onLoadListener!==null&&onErrorListener!==null){var g;h.removeEventListener("load",onLoadListener),h.removeEventListener("error",onErrorListener),(g=h.parentNode)===null||g===void 0||g.removeChild(h),h=injectScript(e)}onLoadListener=onLoad(c,d),onErrorListener=onError(d),h.addEventListener("load",onLoadListener),h.addEventListener("error",onErrorListener)}catch(_){d(_);return}}),stripePromise$1$1.catch(function(c){return stripePromise$1$1=null,Promise.reject(c)}))},initStripe=function(e,c,d){if(e===null)return null;var h=c[0],g=h.match(/^pk_test/),_=runtimeVersionToUrlVersion(e.version),_e=RELEASE_TRAIN;g&&_!==_e&&console.warn("Stripe.js@".concat(_," was loaded on the page, but @stripe/stripe-js@").concat("7.3.0"," expected Stripe.js@").concat(_e,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var et=e.apply(void 0,c);return registerWrapper(et,d),et},stripePromise$2,loadCalled=!1,getStripePromise=function(){return stripePromise$2||(stripePromise$2=loadScript(null).catch(function(e){return stripePromise$2=null,Promise.reject(e)}),stripePromise$2)};Promise.resolve().then(function(){return getStripePromise()}).catch(function(a){loadCalled||console.warn(a)});var loadStripe=function(){for(var e=arguments.length,c=new Array(e),d=0;d<e;d++)c[d]=arguments[d];loadCalled=!0;var h=Date.now();return getStripePromise().then(function(g){return initStripe(g,c,h)})},define_process_env_default$4={};const stripePromise$1=loadStripe(define_process_env_default$4.VITE_STRIPE_PUBLISHABLE_KEY||"pk_test_REPLACE_ME"),appearance={theme:"stripe",variables:{colorPrimary:"#f87171",colorBackground:"#ffffff",colorText:"#30313d",colorDanger:"#ef4444",fontFamily:"system-ui, -apple-system, sans-serif",spacingUnit:"4px",borderRadius:"8px"}},StripeProvider=({children:a,clientSecret:e})=>{const c={clientSecret:e||void 0,appearance};return jsxRuntimeExports.jsx(Elements,{stripe:stripePromise$1,options:c,children:a})},stripePromise=null,CheckoutPage=()=>{const a=useNavigate(),{toast:e}=useToast(),{cart:c,cartTotal:d,deliveryFee:h,clearCart:g}=useCart(),[_,_e]=reactExports.useState("details"),[et,tt]=reactExports.useState(!1),[rt,$]=reactExports.useState(null),[b,nt]=reactExports.useState(null),[st,ot]=reactExports.useState(null),[it,at]=reactExports.useState(null),[lt,dt]=reactExports.useState(null),[ht,pt]=reactExports.useState({firstName:"",email:"",phone:"",address:"",city:"",postalCode:"",deliveryDate:"",deliveryTime:"morning",specialInstructions:"",paymentMethod:"creditCard"});reactExports.useEffect(()=>{c.length===0&&a("/cart")},[c,a]),reactExports.useEffect(()=>{console.warn("Stripe public key is missing in environment variables.")},[]);const mt=Pt=>{const{name:Tt,value:St}=Pt.target;pt(wt=>({...wt,[Tt]:St}))},yt=(Pt,Tt)=>{pt(St=>({...St,[Pt]:Tt}))},xt=Pt=>{pt(Tt=>({...Tt,paymentMethod:Pt}))},gt=async(Pt,Tt,St)=>{var wt;if(Tt==="creditCard")try{const Rt=await fetch("http://localhost:3001/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Pt,currency:"ZAR",payment_id:St,is_subscription:!1})});if(!Rt.ok){const Et=await Rt.json();throw new Error(((wt=Et.error)==null?void 0:wt.message)||"Failed to create payment intent")}const At=await Rt.json();return{orderId:St,clientSecret:At.clientSecret}}catch(Rt){throw console.error("Payment intent creation error:",Rt),Rt}else return{orderId:St,orderID:"mockPayPalOrderID",address:"mockBitcoinAddress",amount:Pt,reference:St,bankDetails:{bankName:"Mock Bank",accountName:"Mock Account",accountNumber:"1234567890"}}},bt=async Pt=>{if(Pt.preventDefault(),c.length===0){e({variant:"destructive",title:"Empty Cart",description:"Your cart is empty. Please add items before checkout."}),a("/products");return}tt(!0);try{const Tt=c.map(zt=>({id:zt.id,name:zt.name,price:zt.price,quantity:zt.quantity,image_url:zt.image_url})),St={address:ht.address,city:ht.city,postalCode:ht.postalCode},{data:wt,error:Rt}=await supabase.from("orders").insert({customer_name:ht.firstName,customer_email:ht.email,customer_phone:ht.phone?Number(ht.phone.replace(/\D/g,"")):null,shipping_address:St,delivery_date:ht.deliveryDate,delivery_time:ht.deliveryTime,special_instructions:ht.specialInstructions,payment_method:ht.paymentMethod,status:"pending",total_amount:d+h,items:Tt}).select("id").single();if(Rt)throw new Error(Rt.message);const At=wt==null?void 0:wt.id;$(At);const Et=await gt(d+h,ht.paymentMethod,At);if(_e("payment"),ht.paymentMethod==="creditCard"&&Et.clientSecret)nt(Et.clientSecret);else if(ht.paymentMethod==="paypal"&&Et.orderID)ot(Et.orderID);else if(ht.paymentMethod==="bitcoin"&&Et.address)at(Et);else if(ht.paymentMethod==="bankTransfer"&&Et.bankDetails)dt(Et);else throw new Error("Payment provider response was not in the expected format.")}catch(Tt){e({variant:"destructive",title:"Checkout Error",description:(Tt==null?void 0:Tt.message)||"An error occurred during checkout."}),_e("details")}finally{tt(!1)}},jt=async Pt=>{if(Pt){const{error:Tt}=await supabase.from("orders").update({status:"paid",updated_at:new Date().toISOString()}).eq("id",Pt);Tt?e({title:"Order Update Error",description:Tt.message,variant:"destructive"}):(g(),_e("confirmation"),a("/order-confirmation",{state:{orderNumber:Pt,orderDate:new Date().toLocaleDateString(),items:c,total:d+h,customerInfo:ht}}))}else e({title:"Order ID Missing",description:"Cannot update order status without an Order ID.",variant:"destructive"}),_e("details")},Mt=async(Pt,Tt)=>{if(Pt){const{error:St}=await supabase.from("orders").update({status:"payment_failed",updated_at:new Date().toISOString()}).eq("id",Pt);St&&e({title:"Order Update Error",description:St.message,variant:"destructive"})}e({variant:"destructive",title:"Payment Failed",description:Tt}),_e("details")};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background page-transition",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("section",{className:"pt-32 pb-20",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 md:px-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Checkout"}),_==="details"&&jsxRuntimeExports.jsx("form",{onSubmit:bt,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-6 rounded-lg shadow-sm mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"Contact Details"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"firstName",children:"Full Name"}),jsxRuntimeExports.jsx(Input,{id:"firstName",name:"firstName",value:ht.firstName,onChange:mt,placeholder:"John Doe",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"email",children:"Email"}),jsxRuntimeExports.jsx(Input,{id:"email",name:"email",type:"email",value:ht.email,onChange:mt,placeholder:"johndoe@gmail.com",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"phone",children:"Mobile"}),jsxRuntimeExports.jsx(Input,{id:"phone",name:"phone",type:"tel",value:ht.phone,onChange:mt,placeholder:"+27123456789",required:!0})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-6 rounded-lg shadow-sm mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"Delivery Details"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"address",children:"Delivery Address"}),jsxRuntimeExports.jsx(Input,{id:"address",name:"address",value:ht.address,onChange:mt,required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"city",children:"City"}),jsxRuntimeExports.jsx(Input,{id:"city",name:"city",value:ht.city,onChange:mt,required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"postalCode",children:"Postal Code"}),jsxRuntimeExports.jsx(Input,{id:"postalCode",name:"postalCode",value:ht.postalCode,onChange:mt,required:!0})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"deliveryDate",children:"Delivery Date"}),jsxRuntimeExports.jsx(Input,{id:"deliveryDate",name:"deliveryDate",type:"date",value:ht.deliveryDate,onChange:mt,required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"deliveryTime",children:"Preferred Time"}),jsxRuntimeExports.jsxs(Select,{onValueChange:Pt=>yt("deliveryTime",Pt),defaultValue:ht.deliveryTime,children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select time"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"morning",children:"Morning (8AM - 12PM)"}),jsxRuntimeExports.jsx(SelectItem,{value:"afternoon",children:"Afternoon (12PM - 4PM)"}),jsxRuntimeExports.jsx(SelectItem,{value:"evening",children:"Evening (4PM - 8PM)"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"specialInstructions",children:"Special Instructions"}),jsxRuntimeExports.jsx(Textarea,{id:"specialInstructions",name:"specialInstructions",placeholder:"Any special delivery instructions or cake customization details",value:ht.specialInstructions,onChange:mt})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-6 rounded-lg shadow-sm",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"Payment"}),jsxRuntimeExports.jsxs(RadioGroup,{defaultValue:ht.paymentMethod,onValueChange:xt,className:"flex flex-wrap gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:"creditCard",id:"creditCard",className:"text-cake-pink"}),jsxRuntimeExports.jsx(Label$1,{htmlFor:"creditCard",children:"Card"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:"paypal",id:"paypal",className:"text-cake-pink"}),jsxRuntimeExports.jsx(Label$1,{htmlFor:"paypal",children:"PayPal"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:"bitcoin",id:"bitcoin",className:"text-cake-pink"}),jsxRuntimeExports.jsx(Label$1,{htmlFor:"bitcoin",children:"Bitcoin"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:"bankTransfer",id:"bankTransfer",className:"text-cake-pink"}),jsxRuntimeExports.jsx(Label$1,{htmlFor:"bankTransfer",children:"Bank Transfer"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-xs text-muted-foreground",children:jsxRuntimeExports.jsx("p",{children:"Your personal data will be used to process your order, support your experience throughout this website, and for other purposes described in our privacy policy."})})]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-6 rounded-lg shadow-sm sticky top-24",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"Order Summary"}),jsxRuntimeExports.jsx("div",{className:"space-y-4 mb-6",children:(()=>{try{return c.map(Pt=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:getProductImageUrl(Pt.image_url||""),alt:Pt.name||"Product image",className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsxs("div",{className:"flex-grow",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:Pt.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:["Qty: ",Pt.quantity]})]}),jsxRuntimeExports.jsxs("p",{className:"font-medium",children:["R",(Pt.price*Pt.quantity).toFixed(2)]})]},Pt.id))}catch(Pt){return jsxRuntimeExports.jsxs("div",{style:{color:"red"},children:["Failed to render cart: ",Pt.message]})}})()}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 border-t pt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{children:"Subtotal"}),jsxRuntimeExports.jsxs("span",{children:["R",d.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{children:"Delivery Fee"}),jsxRuntimeExports.jsxs("span",{children:["R",h.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between font-semibold text-base",children:[jsxRuntimeExports.jsx("span",{children:"Total"}),jsxRuntimeExports.jsxs("span",{children:["R",(d+h).toFixed(2)]})]})]}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full mt-6",disabled:c.length===0||et,children:et?"Processing...":`Proceed to Pay R${(d+h).toFixed(2)}`})]})})]})}),_==="payment"&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-card p-6 rounded-lg shadow-sm",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"Payment"}),ht.paymentMethod==="creditCard"&&b&&stripePromise&&jsxRuntimeExports.jsx(StripeProvider,{clientSecret:b,children:jsxRuntimeExports.jsx(Elements,{stripe:stripePromise,children:jsxRuntimeExports.jsx(CreditCardForm,{onSuccess:Pt=>jt(Pt),onError:Pt=>Mt(rt,Pt),orderId:rt})})}),ht.paymentMethod==="paypal"&&st&&jsxRuntimeExports.jsx(Card,{className:"max-w-md mx-auto",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Complete with PayPal"}),jsxRuntimeExports.jsx(PayPalCheckout,{orderId:st||void 0,amount:d+h,currency:"ZAR",onSuccess:Pt=>{console.log("PayPal Success Details:",Pt),jt(rt)},onError:Pt=>Mt(rt,Pt||"PayPal payment failed")}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"mt-4 w-full",onClick:()=>_e("details"),children:"Back to Details"})]})}),ht.paymentMethod==="bitcoin"&&it&&jsxRuntimeExports.jsx(Card,{className:"max-w-md mx-auto",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Pay with Bitcoin"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Send ",it.amount," ZAR to the following Bitcoin address:"]}),jsxRuntimeExports.jsx("p",{className:"font-mono bg-background p-2 rounded text-sm break-all mb-4",children:it.address}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Once payment is sent, it may take some time to confirm. We will notify you."}),jsxRuntimeExports.jsx(Button,{className:"mt-4 w-full",onClick:()=>jt(rt),children:"I've Made The Payment"}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"mt-2 w-full",onClick:()=>_e("details"),children:"Back to Details"})]})}),ht.paymentMethod==="bankTransfer"&&lt&&jsxRuntimeExports.jsx(Card,{className:"max-w-md mx-auto",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Bank Transfer Details"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Please transfer R",(d+h).toFixed(2)," ","to:"]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 space-y-1 text-sm bg-muted p-3 rounded-md",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Bank:"})," ",lt.bankDetails.bankName||"Cake Bank"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Account Name:"})," ",lt.bankDetails.accountName||"Cake A Day"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Account Number:"})," ",lt.bankDetails.accountNumber||"1234567890"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Reference:"})," ",lt.reference||rt||"Your Order ID"]})]}),jsxRuntimeExports.jsx(Button,{className:"mt-4 w-full",onClick:()=>jt(rt),children:"I've Made The Transfer"}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"mt-2 w-full",onClick:()=>_e("details"),children:"Back to Details"})]})})]}),_==="confirmation"&&jsxRuntimeExports.jsxs("div",{className:"text-center py-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Processing Confirmation..."}),jsxRuntimeExports.jsx("p",{children:"You will be redirected shortly."})]})]})})]})},DesignCake=()=>{const[a,e]=reactExports.useState(""),[c,d]=reactExports.useState(""),[h,g]=reactExports.useState(null),[_,_e]=reactExports.useState(!1),[et,tt]=reactExports.useState(350),[rt,$]=reactExports.useState("medium"),[b,nt]=reactExports.useState("vanilla"),st=reactExports.useRef(null),{toast:ot}=useToast(),it=useNavigate(),{addToCart:at}=useCart(),lt=async mt=>{var xt;const yt=(xt=mt.target.files)==null?void 0:xt[0];if(yt){if(!yt.type.startsWith("image/")){ot({title:"Invalid File Type",description:"Please upload an image file (JPEG, PNG, etc.)",variant:"destructive"});return}if(yt.size>5*1024*1024){ot({title:"File Too Large",description:"Please upload an image smaller than 5MB",variant:"destructive"});return}_e(!0);try{const gt=`cake-reference-${Date.now()}-${yt.name.replace(/\s+/g,"-")}`,bt=await uploadProductImage(yt,gt);if(!bt)throw new Error("Failed to upload image");const jt=await getProductImageUrl(bt);g(jt),ot({title:"Image Uploaded",description:"Your reference image has been uploaded successfully."})}catch(gt){console.error("Error uploading image:",gt),ot({title:"Upload Failed",description:"There was an error uploading your image. Please try again.",variant:"destructive"})}finally{_e(!1)}}},dt=()=>{var mt;(mt=st.current)==null||mt.click()},ht=()=>{if(!h){ot({title:"No Reference Image",description:"Please upload a reference image first.",variant:"destructive"});return}if(!a.trim()){ot({title:"Description Required",description:"Please provide a brief description of your cake.",variant:"destructive"});return}const mt={id:Date.now(),name:`Custom Cake: ${a.substring(0,30)}${a.length>30?"...":""}`,description:`${a}${c?`

Additional instructions: ${c}`:""}`,price:et,category:"custom-cakes",image_url:h,popular:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_vegan:!1,embedding:null,options:{size:rt,flavor:b}};at(mt,1),ot({title:"Added to Cart",description:"Your custom cake has been added to your cart."}),it("/cart")},pt=mt=>{switch($(mt),mt){case"small":tt(250);break;case"medium":tt(350);break;case"large":tt(450);break;case"extra-large":tt(550);break;default:tt(350)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 py-12",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold mb-2 text-center",children:"Design Your Dream Cake"}),jsxRuntimeExports.jsx("p",{className:"text-center text-muted-foreground mb-10",children:"Upload a reference image and describe your perfect cake"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs(Tabs,{defaultValue:"design",className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-2",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"design",children:"Cake Design"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"options",children:"Cake Options"})]}),jsxRuntimeExports.jsxs(TabsContent,{value:"design",className:"space-y-4 pt-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"description",className:"text-base font-medium",children:"Describe your cake"}),jsxRuntimeExports.jsx(Textarea,{id:"description",placeholder:"Describe the cake you want (e.g., A three-tier wedding cake with white fondant and gold accents)",value:a,onChange:mt=>e(mt.target.value),className:"h-24 mt-2"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"instructions",className:"text-base font-medium",children:"Additional instructions (optional)"}),jsxRuntimeExports.jsx(Textarea,{id:"instructions",placeholder:"Add more specific details about flavors, fillings, allergies, etc.",value:c,onChange:mt=>d(mt.target.value),className:"h-24 mt-2"})]}),jsxRuntimeExports.jsxs("div",{className:"pt-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-base font-medium mb-2 block",children:"Upload a reference image"}),jsxRuntimeExports.jsx("input",{type:"file",ref:st,onChange:lt,accept:"image/*",className:"hidden"}),jsxRuntimeExports.jsxs(Button,{onClick:dt,variant:"outline",className:"w-full h-20 border-dashed flex flex-col items-center justify-center",disabled:_,children:[jsxRuntimeExports.jsx(Upload,{className:"h-6 w-6 mb-2"}),_?"Uploading...":"Click to upload a cake image",jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"JPG, PNG, GIF up to 5MB"})]})]})]}),jsxRuntimeExports.jsxs(TabsContent,{value:"options",className:"space-y-6 pt-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"size",className:"text-base font-medium",children:"Cake Size"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:["small","medium","large","extra-large"].map(mt=>jsxRuntimeExports.jsx(Button,{type:"button",variant:rt===mt?"default":"outline",onClick:()=>pt(mt),className:"capitalize",children:mt},mt))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"flavor",className:"text-base font-medium",children:"Cake Flavor"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:["vanilla","chocolate","red velvet","carrot","lemon","marble"].map(mt=>jsxRuntimeExports.jsx(Button,{type:"button",variant:b===mt?"default":"outline",onClick:()=>nt(mt),className:"capitalize",children:mt},mt))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(Label$1,{className:"text-base font-medium",children:["Price: R",et]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Price varies based on size and complexity"})]})]})]})})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Card,{className:"overflow-hidden h-full flex flex-col",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-0 flex-grow flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"p-6 bg-muted/50 flex-grow flex flex-col items-center justify-center",children:_?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[jsxRuntimeExports.jsx("div",{className:"h-12 w-12 border-4 border-cake-pink border-t-transparent rounded-full animate-spin mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-center text-muted-foreground",children:"Uploading your image..."})]}):h?jsxRuntimeExports.jsx("img",{src:h,alt:"Reference cake design",className:"max-h-[400px] object-contain rounded-md"}):jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"bg-muted rounded-full p-4 inline-flex mb-4",children:jsxRuntimeExports.jsx(Image$2,{className:"h-8 w-8 text-cake-pink"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",children:"Your reference image will appear here"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Upload a photo of a cake you like and our bakers will use it as a reference"})]})}),h&&!_&&jsxRuntimeExports.jsx("div",{className:"p-6 border-t",children:jsxRuntimeExports.jsxs(Button,{onClick:ht,className:"w-full bg-cake-pink hover:bg-cake-pink/90",disabled:!a.trim(),children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"mr-2 h-4 w-4"}),"Add to Cart - R",et]})})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"mt-16 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4",children:"How It Works"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:[jsxRuntimeExports.jsx("div",{className:"bg-cake-pink/10 rounded-full p-3 inline-flex mb-4",children:jsxRuntimeExports.jsx(Upload,{className:"h-6 w-6 text-cake-pink"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",children:"1. Upload"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Upload a reference image of a cake you like and describe your requirements"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:[jsxRuntimeExports.jsx("div",{className:"bg-cake-pink/10 rounded-full p-3 inline-flex mb-4",children:jsxRuntimeExports.jsx(ShoppingCart,{className:"h-6 w-6 text-cake-pink"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",children:"2. Order"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Add your custom cake to cart and complete your purchase"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:[jsxRuntimeExports.jsx("div",{className:"bg-cake-pink/10 rounded-full p-3 inline-flex mb-4",children:jsxRuntimeExports.jsx(Send,{className:"h-6 w-6 text-cake-pink"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",children:"3. Enjoy"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Our bakers will create your cake exactly as designed and deliver it"})]})]})]})]})]})};class Document{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent?e.pageContent.toString():this.pageContent,this.metadata=e.metadata??{}}}let getRandomValues$1;const rnds8$1=new Uint8Array(16);function rng$1(){if(!getRandomValues$1&&(getRandomValues$1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues$1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues$1(rnds8$1)}const byteToHex$1=[];for(let a=0;a<256;++a)byteToHex$1.push((a+256).toString(16).slice(1));function unsafeStringify$1(a,e=0){return byteToHex$1[a[e+0]]+byteToHex$1[a[e+1]]+byteToHex$1[a[e+2]]+byteToHex$1[a[e+3]]+"-"+byteToHex$1[a[e+4]]+byteToHex$1[a[e+5]]+"-"+byteToHex$1[a[e+6]]+byteToHex$1[a[e+7]]+"-"+byteToHex$1[a[e+8]]+byteToHex$1[a[e+9]]+"-"+byteToHex$1[a[e+10]]+byteToHex$1[a[e+11]]+byteToHex$1[a[e+12]]+byteToHex$1[a[e+13]]+byteToHex$1[a[e+14]]+byteToHex$1[a[e+15]]}const randomUUID$1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native$1={randomUUID:randomUUID$1};function v4$1(a,e,c){if(native$1.randomUUID&&!e&&!a)return native$1.randomUUID();a=a||{};const d=a.random||(a.rng||rng$1)();return d[6]=d[6]&15|64,d[8]=d[8]&63|128,unsafeStringify$1(d)}var decamelize=function(a,e){if(typeof a!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,a.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const snakeCase=getDefaultExportFromCjs(decamelize);var camelcase={exports:{}};const UPPERCASE=/[\p{Lu}]/u,LOWERCASE=/[\p{Ll}]/u,LEADING_CAPITAL=/^[\p{Lu}](?![\p{Lu}])/gu,IDENTIFIER=/([\p{Alpha}\p{N}_]|$)/u,SEPARATORS=/[_.\- ]+/,LEADING_SEPARATORS=new RegExp("^"+SEPARATORS.source),SEPARATORS_AND_IDENTIFIER=new RegExp(SEPARATORS.source+IDENTIFIER.source,"gu"),NUMBERS_AND_IDENTIFIER=new RegExp("\\d+"+IDENTIFIER.source,"gu"),preserveCamelCase=(a,e,c)=>{let d=!1,h=!1,g=!1;for(let _=0;_<a.length;_++){const _e=a[_];d&&UPPERCASE.test(_e)?(a=a.slice(0,_)+"-"+a.slice(_),d=!1,g=h,h=!0,_++):h&&g&&LOWERCASE.test(_e)?(a=a.slice(0,_-1)+"-"+a.slice(_-1),g=h,h=!1,d=!0):(d=e(_e)===_e&&c(_e)!==_e,g=h,h=c(_e)===_e&&e(_e)!==_e)}return a},preserveConsecutiveUppercase=(a,e)=>(LEADING_CAPITAL.lastIndex=0,a.replace(LEADING_CAPITAL,c=>e(c))),postProcess=(a,e)=>(SEPARATORS_AND_IDENTIFIER.lastIndex=0,NUMBERS_AND_IDENTIFIER.lastIndex=0,a.replace(SEPARATORS_AND_IDENTIFIER,(c,d)=>e(d)).replace(NUMBERS_AND_IDENTIFIER,c=>e(c))),camelCase=(a,e)=>{if(!(typeof a=="string"||Array.isArray(a)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(a)?a=a.map(g=>g.trim()).filter(g=>g.length).join("-"):a=a.trim(),a.length===0)return"";const c=e.locale===!1?g=>g.toLowerCase():g=>g.toLocaleLowerCase(e.locale),d=e.locale===!1?g=>g.toUpperCase():g=>g.toLocaleUpperCase(e.locale);return a.length===1?e.pascalCase?d(a):c(a):(a!==c(a)&&(a=preserveCamelCase(a,c,d)),a=a.replace(LEADING_SEPARATORS,""),e.preserveConsecutiveUppercase?a=preserveConsecutiveUppercase(a,c):a=c(a),e.pascalCase&&(a=d(a.charAt(0))+a.slice(1)),postProcess(a,d))};camelcase.exports=camelCase;camelcase.exports.default=camelCase;function keyToJson(a,e){return(e==null?void 0:e[a])||snakeCase(a)}function mapKeys(a,e,c){const d={};for(const h in a)Object.hasOwn(a,h)&&(d[e(h,c)]=a[h]);return d}function shallowCopy(a){return Array.isArray(a)?[...a]:{...a}}function replaceSecrets(a,e){const c=shallowCopy(a);for(const[d,h]of Object.entries(e)){const[g,..._]=d.split(".").reverse();let _e=c;for(const et of _.reverse()){if(_e[et]===void 0)break;_e[et]=shallowCopy(_e[et]),_e=_e[et]}_e[g]!==void 0&&(_e[g]={lc:1,type:"secret",id:[h]})}return c}function get_lc_unique_name(a){const e=Object.getPrototypeOf(a);return typeof a.lc_name=="function"&&(typeof e.lc_name!="function"||a.lc_name()!==e.lc_name())?a.lc_name():a.name}class Serializable{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...c){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Serializable||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},c={},d=Object.keys(this.lc_kwargs).reduce((h,g)=>(h[g]=g in this?this[g]:this.lc_kwargs[g],h),{});for(let h=Object.getPrototypeOf(this);h;h=Object.getPrototypeOf(h))Object.assign(e,Reflect.get(h,"lc_aliases",this)),Object.assign(c,Reflect.get(h,"lc_secrets",this)),Object.assign(d,Reflect.get(h,"lc_attributes",this));return Object.keys(c).forEach(h=>{let g=this,_=d;const[_e,...et]=h.split(".").reverse();for(const tt of et.reverse()){if(!(tt in g)||g[tt]===void 0)return;(!(tt in _)||_[tt]===void 0)&&(typeof g[tt]=="object"&&g[tt]!=null?_[tt]={}:Array.isArray(g[tt])&&(_[tt]=[])),g=g[tt],_=_[tt]}_e in g&&g[_e]!==void 0&&(_[_e]=_[_e]||g[_e])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:mapKeys(Object.keys(c).length?replaceSecrets(d,c):d,keyToJson,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}var define_process_env_default$3={};class BaseCallbackHandlerMethodsClass{}class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process<"u"?(define_process_env_default$3==null?void 0:define_process_env_default$3.LANGCHAIN_CALLBACKS_BACKGROUND)!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever)}copy(){return new this.constructor(this)}toJSON(){return Serializable.prototype.toJSON.call(this)}toJSONNotImplemented(){return Serializable.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class c extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4$1()}),Object.assign(this,e)}}return new c}}var ansiStyles={exports:{}};ansiStyles.exports;(function(a){const c=(g=0)=>_=>`\x1B[${38+g};5;${_}m`,d=(g=0)=>(_,_e,et)=>`\x1B[${38+g};2;${_};${_e};${et}m`;function h(){const g=new Map,_={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};_.color.gray=_.color.blackBright,_.bgColor.bgGray=_.bgColor.bgBlackBright,_.color.grey=_.color.blackBright,_.bgColor.bgGrey=_.bgColor.bgBlackBright;for(const[_e,et]of Object.entries(_)){for(const[tt,rt]of Object.entries(et))_[tt]={open:`\x1B[${rt[0]}m`,close:`\x1B[${rt[1]}m`},et[tt]=_[tt],g.set(rt[0],rt[1]);Object.defineProperty(_,_e,{value:et,enumerable:!1})}return Object.defineProperty(_,"codes",{value:g,enumerable:!1}),_.color.close="\x1B[39m",_.bgColor.close="\x1B[49m",_.color.ansi256=c(),_.color.ansi16m=d(),_.bgColor.ansi256=c(10),_.bgColor.ansi16m=d(10),Object.defineProperties(_,{rgbToAnsi256:{value:(_e,et,tt)=>_e===et&&et===tt?_e<8?16:_e>248?231:Math.round((_e-8)/247*24)+232:16+36*Math.round(_e/255*5)+6*Math.round(et/255*5)+Math.round(tt/255*5),enumerable:!1},hexToRgb:{value:_e=>{const et=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(_e.toString(16));if(!et)return[0,0,0];let{colorString:tt}=et.groups;tt.length===3&&(tt=tt.split("").map($=>$+$).join(""));const rt=Number.parseInt(tt,16);return[rt>>16&255,rt>>8&255,rt&255]},enumerable:!1},hexToAnsi256:{value:_e=>_.rgbToAnsi256(..._.hexToRgb(_e)),enumerable:!1}}),_}Object.defineProperty(a,"exports",{enumerable:!0,get:h})})(ansiStyles);var ansiStylesExports=ansiStyles.exports;const styles=getDefaultExportFromCjs(ansiStylesExports);function _coerceToDict$1(a,e){return a&&!Array.isArray(a)&&typeof a=="object"?a:{[e]:a}}class BaseTracer extends BaseCallbackHandler{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,c){e.child_runs.push(c)}async _startTrace(e){var c;if(e.parent_run_id!==void 0){const d=this.runMap.get(e.parent_run_id);d&&(this._addChildRun(d,e),d.child_execution_order=Math.max(d.child_execution_order,e.child_execution_order))}this.runMap.set(e.id,e),await((c=this.onRunCreate)==null?void 0:c.call(this,e))}async _endTrace(e){var d;const c=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);c?c.child_execution_order=Math.max(c.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((d=this.onRunUpdate)==null?void 0:d.call(this,e))}_getExecutionOrder(e){const c=e!==void 0&&this.runMap.get(e);return c?c.child_execution_order+1:1}async handleLLMStart(e,c,d,h,g,_,_e,et){var nt;const tt=this._getExecutionOrder(h),rt=Date.now(),$=_e?{...g,metadata:_e}:g,b={id:d,name:et??e.id[e.id.length-1],parent_run_id:h,start_time:rt,serialized:e,events:[{name:"start",time:new Date(rt).toISOString()}],inputs:{prompts:c},execution_order:tt,child_runs:[],child_execution_order:tt,run_type:"llm",extra:$??{},tags:_||[]};return await this._startTrace(b),await((nt=this.onLLMStart)==null?void 0:nt.call(this,b)),b}async handleChatModelStart(e,c,d,h,g,_,_e,et){var nt;const tt=this._getExecutionOrder(h),rt=Date.now(),$=_e?{...g,metadata:_e}:g,b={id:d,name:et??e.id[e.id.length-1],parent_run_id:h,start_time:rt,serialized:e,events:[{name:"start",time:new Date(rt).toISOString()}],inputs:{messages:c},execution_order:tt,child_runs:[],child_execution_order:tt,run_type:"llm",extra:$??{},tags:_||[]};return await this._startTrace(b),await((nt=this.onLLMStart)==null?void 0:nt.call(this,b)),b}async handleLLMEnd(e,c){var h;const d=this.runMap.get(c);if(!d||(d==null?void 0:d.run_type)!=="llm")throw new Error("No LLM run to end.");return d.end_time=Date.now(),d.outputs=e,d.events.push({name:"end",time:new Date(d.end_time).toISOString()}),await((h=this.onLLMEnd)==null?void 0:h.call(this,d)),await this._endTrace(d),d}async handleLLMError(e,c){var h;const d=this.runMap.get(c);if(!d||(d==null?void 0:d.run_type)!=="llm")throw new Error("No LLM run to end.");return d.end_time=Date.now(),d.error=e.message,d.events.push({name:"error",time:new Date(d.end_time).toISOString()}),await((h=this.onLLMError)==null?void 0:h.call(this,d)),await this._endTrace(d),d}async handleChainStart(e,c,d,h,g,_,_e,et){var b;const tt=this._getExecutionOrder(h),rt=Date.now(),$={id:d,name:et??e.id[e.id.length-1],parent_run_id:h,start_time:rt,serialized:e,events:[{name:"start",time:new Date(rt).toISOString()}],inputs:c,execution_order:tt,child_execution_order:tt,run_type:_e??"chain",child_runs:[],extra:_?{metadata:_}:{},tags:g||[]};return await this._startTrace($),await((b=this.onChainStart)==null?void 0:b.call(this,$)),$}async handleChainEnd(e,c,d,h,g){var _e;const _=this.runMap.get(c);if(!_)throw new Error("No chain run to end.");return _.end_time=Date.now(),_.outputs=_coerceToDict$1(e,"output"),_.events.push({name:"end",time:new Date(_.end_time).toISOString()}),(g==null?void 0:g.inputs)!==void 0&&(_.inputs=_coerceToDict$1(g.inputs,"input")),await((_e=this.onChainEnd)==null?void 0:_e.call(this,_)),await this._endTrace(_),_}async handleChainError(e,c,d,h,g){var _e;const _=this.runMap.get(c);if(!_)throw new Error("No chain run to end.");return _.end_time=Date.now(),_.error=e.message,_.events.push({name:"error",time:new Date(_.end_time).toISOString()}),(g==null?void 0:g.inputs)!==void 0&&(_.inputs=_coerceToDict$1(g.inputs,"input")),await((_e=this.onChainError)==null?void 0:_e.call(this,_)),await this._endTrace(_),_}async handleToolStart(e,c,d,h,g,_,_e){var $;const et=this._getExecutionOrder(h),tt=Date.now(),rt={id:d,name:_e??e.id[e.id.length-1],parent_run_id:h,start_time:tt,serialized:e,events:[{name:"start",time:new Date(tt).toISOString()}],inputs:{input:c},execution_order:et,child_execution_order:et,run_type:"tool",child_runs:[],extra:_?{metadata:_}:{},tags:g||[]};return await this._startTrace(rt),await(($=this.onToolStart)==null?void 0:$.call(this,rt)),rt}async handleToolEnd(e,c){var h;const d=this.runMap.get(c);if(!d||(d==null?void 0:d.run_type)!=="tool")throw new Error("No tool run to end");return d.end_time=Date.now(),d.outputs={output:e},d.events.push({name:"end",time:new Date(d.end_time).toISOString()}),await((h=this.onToolEnd)==null?void 0:h.call(this,d)),await this._endTrace(d),d}async handleToolError(e,c){var h;const d=this.runMap.get(c);if(!d||(d==null?void 0:d.run_type)!=="tool")throw new Error("No tool run to end");return d.end_time=Date.now(),d.error=e.message,d.events.push({name:"error",time:new Date(d.end_time).toISOString()}),await((h=this.onToolError)==null?void 0:h.call(this,d)),await this._endTrace(d),d}async handleAgentAction(e,c){var g;const d=this.runMap.get(c);if(!d||(d==null?void 0:d.run_type)!=="chain")return;const h=d;h.actions=h.actions||[],h.actions.push(e),h.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((g=this.onAgentAction)==null?void 0:g.call(this,d))}async handleAgentEnd(e,c){var h;const d=this.runMap.get(c);!d||(d==null?void 0:d.run_type)!=="chain"||(d.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((h=this.onAgentEnd)==null?void 0:h.call(this,d)))}async handleRetrieverStart(e,c,d,h,g,_,_e){var $;const et=this._getExecutionOrder(h),tt=Date.now(),rt={id:d,name:_e??e.id[e.id.length-1],parent_run_id:h,start_time:tt,serialized:e,events:[{name:"start",time:new Date(tt).toISOString()}],inputs:{query:c},execution_order:et,child_execution_order:et,run_type:"retriever",child_runs:[],extra:_?{metadata:_}:{},tags:g||[]};return await this._startTrace(rt),await(($=this.onRetrieverStart)==null?void 0:$.call(this,rt)),rt}async handleRetrieverEnd(e,c){var h;const d=this.runMap.get(c);if(!d||(d==null?void 0:d.run_type)!=="retriever")throw new Error("No retriever run to end");return d.end_time=Date.now(),d.outputs={documents:e},d.events.push({name:"end",time:new Date(d.end_time).toISOString()}),await((h=this.onRetrieverEnd)==null?void 0:h.call(this,d)),await this._endTrace(d),d}async handleRetrieverError(e,c){var h;const d=this.runMap.get(c);if(!d||(d==null?void 0:d.run_type)!=="retriever")throw new Error("No retriever run to end");return d.end_time=Date.now(),d.error=e.message,d.events.push({name:"error",time:new Date(d.end_time).toISOString()}),await((h=this.onRetrieverError)==null?void 0:h.call(this,d)),await this._endTrace(d),d}async handleText(e,c){var h;const d=this.runMap.get(c);!d||(d==null?void 0:d.run_type)!=="chain"||(d.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((h=this.onText)==null?void 0:h.call(this,d)))}async handleLLMNewToken(e,c,d,h,g,_){var et;const _e=this.runMap.get(d);if(!_e||(_e==null?void 0:_e.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return _e.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:c,chunk:_==null?void 0:_.chunk}}),await((et=this.onLLMNewToken)==null?void 0:et.call(this,_e,e)),_e}}function wrap(a,e){return`${a.open}${e}${a.close}`}function tryJsonStringify(a,e){try{return JSON.stringify(a,null,2)}catch{return e}}function elapsed(a){if(!a.end_time)return"";const e=a.end_time-a.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color}=styles;class ConsoleCallbackHandler extends BaseTracer{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const c=[];let d=e;for(;d.parent_run_id;){const h=this.runMap.get(d.parent_run_id);if(h)c.push(h),d=h;else break}return c}getBreadcrumbs(e){const d=[...this.getParents(e).reverse(),e].map((h,g,_)=>{const _e=`${h.execution_order}:${h.run_type}:${h.name}`;return g===_.length-1?wrap(styles.bold,_e):_e}).join(" > ");return wrap(color.grey,d)}onChainStart(e){const c=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[chain/start]")} [${c}] Entering Chain run with input: ${tryJsonStringify(e.inputs,"[inputs]")}`)}onChainEnd(e){const c=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[chain/end]")} [${c}] [${elapsed(e)}] Exiting Chain run with output: ${tryJsonStringify(e.outputs,"[outputs]")}`)}onChainError(e){const c=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[chain/error]")} [${c}] [${elapsed(e)}] Chain run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onLLMStart(e){const c=this.getBreadcrumbs(e),d="prompts"in e.inputs?{prompts:e.inputs.prompts.map(h=>h.trim())}:e.inputs;console.log(`${wrap(color.green,"[llm/start]")} [${c}] Entering LLM run with input: ${tryJsonStringify(d,"[inputs]")}`)}onLLMEnd(e){const c=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[llm/end]")} [${c}] [${elapsed(e)}] Exiting LLM run with output: ${tryJsonStringify(e.outputs,"[response]")}`)}onLLMError(e){const c=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[llm/error]")} [${c}] [${elapsed(e)}] LLM run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onToolStart(e){var d;const c=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[tool/start]")} [${c}] Entering Tool run with input: "${(d=e.inputs.input)==null?void 0:d.trim()}"`)}onToolEnd(e){var d,h;const c=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[tool/end]")} [${c}] [${elapsed(e)}] Exiting Tool run with output: "${(h=(d=e.outputs)==null?void 0:d.output)==null?void 0:h.trim()}"`)}onToolError(e){const c=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[tool/error]")} [${c}] [${elapsed(e)}] Tool run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onRetrieverStart(e){const c=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[retriever/start]")} [${c}] Entering Retriever run with input: ${tryJsonStringify(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const c=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[retriever/end]")} [${c}] [${elapsed(e)}] Exiting Retriever run with output: ${tryJsonStringify(e.outputs,"[outputs]")}`)}onRetrieverError(e){const c=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[retriever/error]")} [${c}] [${elapsed(e)}] Retriever run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onAgentAction(e){const c=e,d=this.getBreadcrumbs(e);console.log(`${wrap(color.blue,"[agent/action]")} [${d}] Agent selected action: ${tryJsonStringify(c.actions[c.actions.length-1],"[action]")}`)}}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$1(a){return typeof a=="string"&&REGEX.test(a)}const byteToHex=[];for(let a=0;a<256;++a)byteToHex.push((a+256).toString(16).slice(1));function unsafeStringify(a,e=0){return byteToHex[a[e+0]]+byteToHex[a[e+1]]+byteToHex[a[e+2]]+byteToHex[a[e+3]]+"-"+byteToHex[a[e+4]]+byteToHex[a[e+5]]+"-"+byteToHex[a[e+6]]+byteToHex[a[e+7]]+"-"+byteToHex[a[e+8]]+byteToHex[a[e+9]]+"-"+byteToHex[a[e+10]]+byteToHex[a[e+11]]+byteToHex[a[e+12]]+byteToHex[a[e+13]]+byteToHex[a[e+14]]+byteToHex[a[e+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(a,e,c){if(native.randomUUID&&!e&&!a)return native.randomUUID();a=a||{};const d=a.random||(a.rng||rng)();return d[6]=d[6]&15|64,d[8]=d[8]&63|128,unsafeStringify(d)}const STATUS_NO_RETRY$1=[400,401,403,404,405,406,407,408],STATUS_IGNORE=[409];let AsyncCaller$1=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const c="default"in _default?_default.default:_default;this.queue=new c({concurrency:this.maxConcurrency})}call(e,...c){return this.queue.add(()=>pRetry$1(()=>e(...c).catch(d=>{throw d instanceof Error?d:new Error(d)}),{onFailedAttempt(d){var g;if(d.message.startsWith("Cancel")||d.message.startsWith("TimeoutError")||d.message.startsWith("AbortError")||(d==null?void 0:d.code)==="ECONNABORTED")throw d;const h=(g=d==null?void 0:d.response)==null?void 0:g.status;if(h){if(STATUS_NO_RETRY$1.includes(+h))throw d;if(STATUS_IGNORE.includes(+h))return}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,c,...d){return e.signal?Promise.race([this.call(c,...d),new Promise((h,g)=>{var _;(_=e.signal)==null||_.addEventListener("abort",()=>{g(new Error("AbortError"))})})]):this.call(c,...d)}fetch(...e){return this.call(()=>fetch(...e).then(c=>c.ok?c:Promise.reject(c)))}};function isLangChainMessage(a){return typeof(a==null?void 0:a._getType)=="function"}function convertLangChainMessageToExample(a){const e={type:a._getType(),data:{content:a.content}};return a!=null&&a.additional_kwargs&&Object.keys(a.additional_kwargs).length>0&&(e.data.additional_kwargs={...a.additional_kwargs}),e}var define_process_env_default$2={};let globalEnv;const isBrowser$1=()=>typeof window<"u"&&typeof window.document<"u",isWebWorker$1=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",isJsDom$1=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),isDeno$1=()=>typeof Deno<"u",isNode$1=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!isDeno$1(),getEnv$1=()=>globalEnv||(isBrowser$1()?globalEnv="browser":isNode$1()?globalEnv="node":isWebWorker$1()?globalEnv="webworker":isJsDom$1()?globalEnv="jsdom":isDeno$1()?globalEnv="deno":globalEnv="other",globalEnv);let runtimeEnvironment$1;async function getRuntimeEnvironment$1(){if(runtimeEnvironment$1===void 0){const a=getEnv$1(),e=getShas();runtimeEnvironment$1={library:"langsmith",runtime:a,sdk:"langsmith-js",sdk_version:__version__,...e}}return runtimeEnvironment$1}function getLangChainEnvVarsMetadata(){const a=getEnvironmentVariables()||{},e={},c=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(const[d,h]of Object.entries(a))d.startsWith("LANGCHAIN_")&&typeof h=="string"&&!c.includes(d)&&!d.toLowerCase().includes("key")&&!d.toLowerCase().includes("secret")&&!d.toLowerCase().includes("token")&&(d==="LANGCHAIN_REVISION_ID"?e.revision_id=h:e[d]=h);return e}function getEnvironmentVariables(){try{return typeof process<"u"&&define_process_env_default$2?Object.entries(define_process_env_default$2).reduce((a,[e,c])=>(a[e]=String(c),a),{}):void 0}catch{return}}function getEnvironmentVariable$1(a){try{return typeof process<"u"?define_process_env_default$2==null?void 0:define_process_env_default$2[a]:void 0}catch{return}}let cachedCommitSHAs;function getShas(){if(cachedCommitSHAs!==void 0)return cachedCommitSHAs;const a=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const c of a){const d=getEnvironmentVariable$1(c);d!==void 0&&(e[c]=d)}return cachedCommitSHAs=e,e}async function mergeRuntimeEnvIntoRunCreates(a){const e=await getRuntimeEnvironment$1(),c=getLangChainEnvVarsMetadata();return a.map(d=>{const h=d.extra??{},g=h.metadata;return d.extra={...h,runtime:{...e,...h==null?void 0:h.runtime},metadata:{...c,...c.revision_id||d.revision_id?{revision_id:d.revision_id??c.revision_id}:{},...g}},d})}const getTracingSamplingRate=()=>{const a=getEnvironmentVariable$1("LANGCHAIN_TRACING_SAMPLING_RATE");if(a===void 0)return;const e=parseFloat(a);if(e<0||e>1)throw new Error(`LANGCHAIN_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${e}`);return e},isLocalhost=a=>{const c=a.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return c==="localhost"||c==="127.0.0.1"||c==="::1"},raiseForStatus=async(a,e)=>{const c=await a.text();if(!a.ok)throw new Error(`Failed to ${e}: ${a.status} ${a.statusText} ${c}`)};async function toArray$1(a){const e=[];for await(const c of a)e.push(c);return e}function trimQuotes(a){if(a!==void 0)return a.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function assertUuid(a){if(!validate$1(a))throw new Error(`Invalid UUID: ${a}`)}class Client{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sampledPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"batchEndpointSupported",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pendingAutoBatchedRuns",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pendingAutoBatchedRunLimit",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50});const c=Client.getDefaultClientConfig();this.tracingSampleRate=getTracingSamplingRate(),this.apiUrl=trimQuotes(e.apiUrl??c.apiUrl)??"",this.apiKey=trimQuotes(e.apiKey??c.apiKey),this.webUrl=trimQuotes(e.webUrl??c.webUrl),this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??12e3,this.caller=new AsyncCaller$1(e.callerOptions??{}),this.hideInputs=e.hideInputs??c.hideInputs,this.hideOutputs=e.hideOutputs??c.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.pendingAutoBatchedRunLimit=e.pendingAutoBatchedRunLimit??this.pendingAutoBatchedRunLimit}static getDefaultClientConfig(){const e=getEnvironmentVariable$1("LANGCHAIN_API_KEY"),c=getEnvironmentVariable$1("LANGCHAIN_ENDPOINT")??"https://api.smith.langchain.com",d=getEnvironmentVariable$1("LANGCHAIN_HIDE_INPUTS")==="true",h=getEnvironmentVariable$1("LANGCHAIN_HIDE_OUTPUTS")==="true";return{apiUrl:c,apiKey:e,webUrl:void 0,hideInputs:d,hideOutputs:h}}validateApiKeyIfHosted(){if(!isLocalhost(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}getHostUrl(){return this.webUrl?this.webUrl:isLocalhost(this.apiUrl)?(this.webUrl="http://localhost","http://localhost"):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com","https://dev.smith.langchain.com"):(this.webUrl="https://smith.langchain.com","https://smith.langchain.com")}get headers(){const e={"User-Agent":`langsmith-js/${__version__}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return this.hideInputs?{}:e}processOutputs(e){return this.hideOutputs?{}:e}prepareRunCreateOrUpdateInputs(e){const c={...e};return c.inputs!==void 0&&(c.inputs=this.processInputs(c.inputs)),c.outputs!==void 0&&(c.outputs=this.processOutputs(c.outputs)),c}async _getResponse(e,c){const d=(c==null?void 0:c.toString())??"",h=`${this.apiUrl}${e}?${d}`,g=await this.caller.call(fetch,h,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!g.ok)throw new Error(`Failed to fetch ${e}: ${g.status} ${g.statusText}`);return g}async _get(e,c){return(await this._getResponse(e,c)).json()}async*_getPaginated(e,c=new URLSearchParams){let d=Number(c.get("offset"))||0;const h=Number(c.get("limit"))||100;for(;;){c.set("offset",String(d)),c.set("limit",String(h));const g=`${this.apiUrl}${e}?${c}`,_=await this.caller.call(fetch,g,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!_.ok)throw new Error(`Failed to fetch ${e}: ${_.status} ${_.statusText}`);const _e=await _.json();if(_e.length===0||(yield _e,_e.length<h))break;d+=_e.length}}async*_getCursorPaginatedList(e,c=null,d="POST",h="runs"){const g=c?{...c}:{};for(;;){const _e=await(await this.caller.call(fetch,`${this.apiUrl}${e}`,{method:d,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),body:JSON.stringify(g)})).json();if(!_e||!_e[h])break;yield _e[h];const et=_e.cursors;if(!et||!et.next)break;g.cursor=et.next}}_filterForSampling(e,c=!1){if(this.tracingSampleRate===void 0)return e;if(c){const d=[];for(const h of e)this.sampledPostUuids.has(h.id)&&(d.push(h),this.sampledPostUuids.delete(h.id));return d}else{const d=[];for(const h of e)Math.random()<this.tracingSampleRate&&(d.push(h),this.sampledPostUuids.add(h.id));return d}}async triggerAutoBatchSend(e){let c=e;c===void 0&&(c=this.pendingAutoBatchedRuns.slice(0,this.pendingAutoBatchedRunLimit),this.pendingAutoBatchedRuns=this.pendingAutoBatchedRuns.slice(this.pendingAutoBatchedRunLimit)),await this.batchIngestRuns({runCreates:c.filter(d=>d.action==="create").map(d=>d.item),runUpdates:c.filter(d=>d.action==="update").map(d=>d.item)})}appendRunCreateToAutoBatchQueue(e){const c=this.autoBatchTimeout;for(clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,this.pendingAutoBatchedRuns.push(e);this.pendingAutoBatchedRuns.length>=this.pendingAutoBatchedRunLimit;){const d=this.pendingAutoBatchedRuns.slice(0,this.pendingAutoBatchedRunLimit);this.pendingAutoBatchedRuns=this.pendingAutoBatchedRuns.slice(this.pendingAutoBatchedRunLimit),this.triggerAutoBatchSend(d)}this.pendingAutoBatchedRuns.length>0&&(c?this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.triggerAutoBatchSend()},this.autoBatchAggregationDelayMs):this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.triggerAutoBatchSend()},this.autoBatchInitialDelayMs))}async batchEndpointIsSupported(){const e=await fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms)});return e.ok?!0:(await e.text(),!1)}async createRun(e){if(!this._filterForSampling([e]).length)return;const c={...this.headers,"Content-Type":"application/json"},d=e.project_name;delete e.project_name;const h=this.prepareRunCreateOrUpdateInputs({session_name:d,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&h.trace_id!==void 0&&h.dotted_order!==void 0){this.appendRunCreateToAutoBatchQueue({action:"create",item:h});return}const g=await mergeRuntimeEnvIntoRunCreates([h]),_=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:c,body:JSON.stringify(g[0]),signal:AbortSignal.timeout(this.timeout_ms)});await raiseForStatus(_,"create run")}async batchIngestRuns({runCreates:e,runUpdates:c}){if(e===void 0&&c===void 0)return;let d=(e==null?void 0:e.map(et=>this.prepareRunCreateOrUpdateInputs(et)))??[],h=(c==null?void 0:c.map(et=>this.prepareRunCreateOrUpdateInputs(et)))??[];if(d.length>0&&h.length>0){const et=d.reduce((rt,$)=>($.id&&(rt[$.id]=$),rt),{}),tt=[];for(const rt of h)rt.id!==void 0&&et[rt.id]?et[rt.id]={...et[rt.id],...rt}:tt.push(rt);d=Object.values(et),h=tt}const g={post:this._filterForSampling(d),patch:this._filterForSampling(h,!0)};if(!g.post.length&&!g.patch.length)return;if(d=await mergeRuntimeEnvIntoRunCreates(d),this.batchEndpointSupported===void 0&&(this.batchEndpointSupported=await this.batchEndpointIsSupported()),!this.batchEndpointSupported){this.autoBatchTracing=!1;for(const et of g.post)await this.createRun(et);for(const et of g.patch)et.id!==void 0&&await this.updateRun(et.id,et);return}const _={...this.headers,"Content-Type":"application/json",Accept:"application/json"},_e=await this.caller.call(fetch,`${this.apiUrl}/runs/batch`,{method:"POST",headers:_,body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms)});await raiseForStatus(_e,"batch create run")}async updateRun(e,c){assertUuid(e),c.inputs&&(c.inputs=this.processInputs(c.inputs)),c.outputs&&(c.outputs=this.processOutputs(c.outputs));const d={...c,id:e};if(!this._filterForSampling([d],!0).length)return;if(this.autoBatchTracing&&d.trace_id!==void 0&&d.dotted_order!==void 0){this.appendRunCreateToAutoBatchQueue({action:"update",item:d});return}const h={...this.headers,"Content-Type":"application/json"},g=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:h,body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms)});await raiseForStatus(g,"update run")}async readRun(e,{loadChildRuns:c}={loadChildRuns:!1}){assertUuid(e);let d=await this._get(`/runs/${e}`);return c&&d.child_run_ids&&(d=await this._loadChildRuns(d)),d}async getRunUrl({runId:e,run:c,projectOpts:d}){if(c!==void 0){let h;c.session_id?h=c.session_id:d!=null&&d.projectName?h=(await this.readProject({projectName:d==null?void 0:d.projectName})).id:d!=null&&d.projectId?h=d==null?void 0:d.projectId:h=(await this.readProject({projectName:getEnvironmentVariable$1("LANGCHAIN_PROJECT")||"default"})).id;const g=await this._getTenantId();return`${this.getHostUrl()}/o/${g}/projects/p/${h}/r/${c.id}?poll=true`}else if(e!==void 0){const h=await this.readRun(e);if(!h.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${h.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const c=await toArray$1(this.listRuns({id:e.child_run_ids})),d={},h={};c.sort((g,_)=>((g==null?void 0:g.dotted_order)??"").localeCompare((_==null?void 0:_.dotted_order)??""));for(const g of c){if(g.parent_run_id===null||g.parent_run_id===void 0)throw new Error(`Child run ${g.id} has no parent`);g.parent_run_id in d||(d[g.parent_run_id]=[]),d[g.parent_run_id].push(g),h[g.id]=g}e.child_runs=d[e.id]||[];for(const g in d)g!==e.id&&(h[g].child_runs=d[g]);return e}async*listRuns({projectId:e,projectName:c,parentRunId:d,traceId:h,referenceExampleId:g,startTime:_,executionOrder:_e,runType:et,error:tt,id:rt,query:$,filter:b,limit:nt}){let st=[];if(e&&(st=Array.isArray(e)?e:[e]),c){const it=Array.isArray(c)?c:[c],at=await Promise.all(it.map(lt=>this.readProject({projectName:lt}).then(dt=>dt.id)));st.push(...at)}const ot={session:st.length?st:null,run_type:et,reference_example:g,query:$,filter:b,execution_order:_e,parent_run:d?[d]:null,start_time:_?_.toISOString():null,error:tt,id:rt,limit:nt,trace:h};for await(const it of this._getCursorPaginatedList("/runs/query",ot))yield*it}async shareRun(e,{shareId:c}={}){const d={run_id:e,share_token:c||v4()};assertUuid(e);const g=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms)})).json();if(g===null||!("share_token"in g))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${g.share_token}/r`}async unshareRun(e){assertUuid(e);const c=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await raiseForStatus(c,"unshare run")}async readRunSharedLink(e){assertUuid(e);const d=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();if(!(d===null||!("share_token"in d)))return`${this.getHostUrl()}/public/${d.share_token}/r`}async listSharedRuns(e,{runIds:c}={}){const d=new URLSearchParams({share_token:e});if(c!==void 0)for(const _ of c)d.append("id",_);return assertUuid(e),await(await this.caller.call(fetch,`${this.apiUrl}/public/${e}/runs${d}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json()}async readDatasetSharedSchema(e,c){if(!e&&!c)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:c})).id),assertUuid(e);const h=await(await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();return h.url=`${this.getHostUrl()}/public/${h.share_token}/d`,h}async shareDataset(e,c){if(!e&&!c)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:c})).id);const d={dataset_id:e};assertUuid(e);const g=await(await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms)})).json();return g.url=`${this.getHostUrl()}/public/${g.share_token}/d`,g}async unshareDataset(e){assertUuid(e);const c=await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await raiseForStatus(c,"unshare dataset")}async readSharedDataset(e){return assertUuid(e),await(await this.caller.call(fetch,`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json()}async createProject({projectName:e,description:c=null,metadata:d=null,upsert:h=!1,projectExtra:g=null,referenceDatasetId:_=null}){const _e=h?"?upsert=true":"",et=`${this.apiUrl}/sessions${_e}`,tt=g||{};d&&(tt.metadata=d);const rt={name:e,extra:tt,description:c};_!==null&&(rt.reference_dataset_id=_);const $=await this.caller.call(fetch,et,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(rt),signal:AbortSignal.timeout(this.timeout_ms)}),b=await $.json();if(!$.ok)throw new Error(`Failed to create session ${e}: ${$.status} ${$.statusText}`);return b}async updateProject(e,{name:c=null,description:d=null,metadata:h=null,projectExtra:g=null,endTime:_=null}){const _e=`${this.apiUrl}/sessions/${e}`;let et=g;h&&(et={...et||{},metadata:h});const tt={name:c,extra:et,description:d,end_time:_?new Date(_).toISOString():null},rt=await this.caller.call(fetch,_e,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(tt),signal:AbortSignal.timeout(this.timeout_ms)}),$=await rt.json();if(!rt.ok)throw new Error(`Failed to update project ${e}: ${rt.status} ${rt.statusText}`);return $}async hasProject({projectId:e,projectName:c}){let d="/sessions";const h=new URLSearchParams;if(e!==void 0&&c!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)assertUuid(e),d+=`/${e}`;else if(c!==void 0)h.append("name",c);else throw new Error("Must provide projectName or projectId");const g=await this.caller.call(fetch,`${this.apiUrl}${d}?${h}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});try{const _=await g.json();return g.ok?Array.isArray(_)?_.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:c,includeStats:d}){let h="/sessions";const g=new URLSearchParams;if(e!==void 0&&c!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)assertUuid(e),h+=`/${e}`;else if(c!==void 0)g.append("name",c);else throw new Error("Must provide projectName or projectId");d!==void 0&&g.append("include_stats",d.toString());const _=await this._get(h,g);let _e;if(Array.isArray(_)){if(_.length===0)throw new Error(`Project[id=${e}, name=${c}] not found`);_e=_[0]}else _e=_;return _e}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const c of this._getPaginated("/sessions",e))return this._tenantId=c[0].tenant_id,c[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:c,nameContains:d,referenceDatasetId:h,referenceDatasetName:g,referenceFree:_}={}){const _e=new URLSearchParams;if(e!==void 0)for(const et of e)_e.append("id",et);if(c!==void 0&&_e.append("name",c),d!==void 0&&_e.append("name_contains",d),h!==void 0)_e.append("reference_dataset",h);else if(g!==void 0){const et=await this.readDataset({datasetName:g});_e.append("reference_dataset",et.id)}_!==void 0&&_e.append("reference_free",_.toString());for await(const et of this._getPaginated("/sessions",_e))yield*et}async deleteProject({projectId:e,projectName:c}){let d;if(e===void 0&&c===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&c!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?d=(await this.readProject({projectName:c})).id:d=e,assertUuid(d);const h=await this.caller.call(fetch,`${this.apiUrl}/sessions/${d}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await raiseForStatus(h,`delete session ${d} (${c})`)}async uploadCsv({csvFile:e,fileName:c,inputKeys:d,outputKeys:h,description:g,dataType:_,name:_e}){const et=`${this.apiUrl}/datasets/upload`,tt=new FormData;tt.append("file",e,c),d.forEach(b=>{tt.append("input_keys",b)}),h.forEach(b=>{tt.append("output_keys",b)}),g&&tt.append("description",g),_&&tt.append("data_type",_),_e&&tt.append("name",_e);const rt=await this.caller.call(fetch,et,{method:"POST",headers:this.headers,body:tt,signal:AbortSignal.timeout(this.timeout_ms)});if(!rt.ok){const b=await rt.json();throw b.detail&&b.detail.includes("already exists")?new Error(`Dataset ${c} already exists`):new Error(`Failed to upload CSV: ${rt.status} ${rt.statusText}`)}return await rt.json()}async createDataset(e,{description:c,dataType:d}={}){const h={name:e,description:c};d&&(h.data_type=d);const g=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms)});if(!g.ok){const _e=await g.json();throw _e.detail&&_e.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${g.status} ${g.statusText}`)}return await g.json()}async readDataset({datasetId:e,datasetName:c}){let d="/datasets";const h=new URLSearchParams({limit:"1"});if(e!==void 0&&c!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)assertUuid(e),d+=`/${e}`;else if(c!==void 0)h.append("name",c);else throw new Error("Must provide datasetName or datasetId");const g=await this._get(d,h);let _;if(Array.isArray(g)){if(g.length===0)throw new Error(`Dataset[id=${e}, name=${c}] not found`);_=g[0]}else _=g;return _}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:c}){const d="/datasets";if(e===void 0)if(c!==void 0)e=(await this.readDataset({datasetName:c})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${d}/${e}/openai_ft`)).text()).trim().split(`
`).map(_e=>JSON.parse(_e))}async*listDatasets({limit:e=100,offset:c=0,datasetIds:d,datasetName:h,datasetNameContains:g}={}){const _="/datasets",_e=new URLSearchParams({limit:e.toString(),offset:c.toString()});if(d!==void 0)for(const et of d)_e.append("id",et);h!==void 0&&_e.append("name",h),g!==void 0&&_e.append("name_contains",g);for await(const et of this._getPaginated(_,_e))yield*et}async deleteDataset({datasetId:e,datasetName:c}){let d="/datasets",h=e;if(e!==void 0&&c!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(c!==void 0&&(h=(await this.readDataset({datasetName:c})).id),h!==void 0)assertUuid(h),d+=`/${h}`;else throw new Error("Must provide datasetName or datasetId");const g=await this.caller.call(fetch,this.apiUrl+d,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!g.ok)throw new Error(`Failed to delete ${d}: ${g.status} ${g.statusText}`);await g.json()}async createExample(e,c,{datasetId:d,datasetName:h,createdAt:g,exampleId:_}){let _e=d;if(_e===void 0&&h===void 0)throw new Error("Must provide either datasetName or datasetId");if(_e!==void 0&&h!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");_e===void 0&&(_e=(await this.readDataset({datasetName:h})).id);const et=g||new Date,tt={dataset_id:_e,inputs:e,outputs:c,created_at:et==null?void 0:et.toISOString(),id:_},rt=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(tt),signal:AbortSignal.timeout(this.timeout_ms)});if(!rt.ok)throw new Error(`Failed to create example: ${rt.status} ${rt.statusText}`);return await rt.json()}async createExamples(e){const{inputs:c,outputs:d,sourceRunIds:h,exampleIds:g,datasetId:_,datasetName:_e}=e;let et=_;if(et===void 0&&_e===void 0)throw new Error("Must provide either datasetName or datasetId");if(et!==void 0&&_e!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");et===void 0&&(et=(await this.readDataset({datasetName:_e})).id);const tt=c.map((b,nt)=>({dataset_id:et,inputs:b,outputs:d?d[nt]:void 0,id:g?g[nt]:void 0,source_run_id:h?h[nt]:void 0})),rt=await this.caller.call(fetch,`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(tt),signal:AbortSignal.timeout(this.timeout_ms)});if(!rt.ok)throw new Error(`Failed to create examples: ${rt.status} ${rt.statusText}`);return await rt.json()}async createLLMExample(e,c,d){return this.createExample({input:e},{output:c},d)}async createChatExample(e,c,d){const h=e.map(_=>isLangChainMessage(_)?convertLangChainMessageToExample(_):_),g=isLangChainMessage(c)?convertLangChainMessageToExample(c):c;return this.createExample({input:h},{output:g},d)}async readExample(e){assertUuid(e);const c=`/examples/${e}`;return await this._get(c)}async*listExamples({datasetId:e,datasetName:c,exampleIds:d}={}){let h;if(e!==void 0&&c!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)h=e;else if(c!==void 0)h=(await this.readDataset({datasetName:c})).id;else throw new Error("Must provide a datasetName or datasetId");const g=new URLSearchParams({dataset:h});if(d!==void 0)for(const _ of d)g.append("id",_);for await(const _ of this._getPaginated("/examples",g))yield*_}async deleteExample(e){assertUuid(e);const c=`/examples/${e}`,d=await this.caller.call(fetch,this.apiUrl+c,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!d.ok)throw new Error(`Failed to delete ${c}: ${d.status} ${d.statusText}`);await d.json()}async updateExample(e,c){assertUuid(e);const d=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms)});if(!d.ok)throw new Error(`Failed to update example ${e}: ${d.status} ${d.statusText}`);return await d.json()}async evaluateRun(e,c,{sourceInfo:d,loadChildRuns:h,referenceExample:g}={loadChildRuns:!1}){let _;if(typeof e=="string")_=await this.readRun(e,{loadChildRuns:h});else if(typeof e=="object"&&"id"in e)_=e;else throw new Error(`Invalid run type: ${typeof e}`);_.reference_example_id!==null&&_.reference_example_id!==void 0&&(g=await this.readExample(_.reference_example_id));const _e=await c.evaluateRun(_,g);let et=d??{};_e.evaluatorInfo&&(et={...et,..._e.evaluatorInfo});const tt=_e.targetRunId??_.id;return await this.createFeedback(tt,_e.key,{score:_e==null?void 0:_e.score,value:_e==null?void 0:_e.value,comment:_e==null?void 0:_e.comment,correction:_e==null?void 0:_e.correction,sourceInfo:et,feedbackSourceType:"model",sourceRunId:_e==null?void 0:_e.sourceRunId})}async createFeedback(e,c,{score:d,value:h,correction:g,comment:_,sourceInfo:_e,feedbackSourceType:et="api",sourceRunId:tt,feedbackId:rt,eager:$=!1}){var it;const b={type:et??"api",metadata:_e??{}};tt!==void 0&&(b==null?void 0:b.metadata)!==void 0&&!b.metadata.__run&&(b.metadata.__run={run_id:tt}),(b==null?void 0:b.metadata)!==void 0&&((it=b.metadata.__run)==null?void 0:it.run_id)!==void 0&&assertUuid(b.metadata.__run.run_id);const nt={id:rt??v4(),run_id:e,key:c,score:d,value:h,correction:g,comment:_,feedback_source:b},st=`${this.apiUrl}/feedback`+($?"/eager":""),ot=await this.caller.call(fetch,st,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(nt),signal:AbortSignal.timeout(this.timeout_ms)});return await raiseForStatus(ot,"create feedback"),nt}async updateFeedback(e,{score:c,value:d,correction:h,comment:g}){const _={};c!=null&&(_.score=c),d!=null&&(_.value=d),h!=null&&(_.correction=h),g!=null&&(_.comment=g),assertUuid(e);const _e=await this.caller.call(fetch,`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(_),signal:AbortSignal.timeout(this.timeout_ms)});await raiseForStatus(_e,"update feedback")}async readFeedback(e){assertUuid(e);const c=`/feedback/${e}`;return await this._get(c)}async deleteFeedback(e){assertUuid(e);const c=`/feedback/${e}`,d=await this.caller.call(fetch,this.apiUrl+c,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!d.ok)throw new Error(`Failed to delete ${c}: ${d.status} ${d.statusText}`);await d.json()}async*listFeedback({runIds:e,feedbackKeys:c,feedbackSourceTypes:d}={}){const h=new URLSearchParams;if(e&&h.append("run",e.join(",")),c)for(const g of c)h.append("key",g);if(d)for(const g of d)h.append("source",g);for await(const g of this._getPaginated("/feedback",h))yield*g}}const __version__="0.0.70";var define_process_env_default$1={};const isBrowser=()=>typeof window<"u"&&typeof window.document<"u",isWebWorker=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",isJsDom=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),isDeno=()=>typeof Deno<"u",isNode=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!isDeno(),getEnv=()=>{let a;return isBrowser()?a="browser":isNode()?a="node":isWebWorker()?a="webworker":isJsDom()?a="jsdom":isDeno()?a="deno":a="other",a};let runtimeEnvironment;async function getRuntimeEnvironment(){return runtimeEnvironment===void 0&&(runtimeEnvironment={library:"langchain-js",runtime:getEnv()}),runtimeEnvironment}function getEnvironmentVariable(a){try{return typeof process<"u"?define_process_env_default$1==null?void 0:define_process_env_default$1[a]:void 0}catch{return}}class LangChainTracer extends BaseTracer{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:c,projectName:d,client:h}=e;this.projectName=d??getEnvironmentVariable("LANGCHAIN_PROJECT")??getEnvironmentVariable("LANGCHAIN_SESSION"),this.exampleId=c,this.client=h??new Client({})}async _convertToCreate(e,c=void 0){return{...e,extra:{...e.extra,runtime:await getRuntimeEnvironment()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:c}}async persistRun(e){}async _persistRunSingle(e){const c=await this._convertToCreate(e,this.exampleId);await this.client.createRun(c)}async _updateRunSingle(e){const c={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs};await this.client.updateRun(e.id,c)}async onRetrieverStart(e){await this._persistRunSingle(e)}async onRetrieverEnd(e){await this._updateRunSingle(e)}async onRetrieverError(e){await this._updateRunSingle(e)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}function getBufferString(a,e="Human",c="AI"){const d=[];for(const h of a){let g;if(h._getType()==="human")g=e;else if(h._getType()==="ai")g=c;else if(h._getType()==="system")g="System";else if(h._getType()==="function")g="Function";else if(h._getType()==="tool")g="Tool";else if(h._getType()==="generic")g=h.role;else throw new Error(`Got unsupported message type: ${h._getType()}`);const _=h.name?`${h.name}, `:"";d.push(`${g}: ${_}${h.content}`)}return d.join(`
`)}class LangChainTracerV1 extends BaseTracer{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:getEnvironmentVariable("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=getEnvironmentVariable("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){const c={start_time:Date.now(),name:e},d=await this.persistSession(c);return this.session=d,d}async loadSession(e){const c=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(c)}async loadDefaultSession(){const e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){var g;const c=this.session??await this.loadDefaultSession(),d=e.serialized;let h;if(e.run_type==="llm"){const _=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(et=>getBufferString(et));h={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:d,type:e.run_type,session_id:c.id,prompts:_,response:e.outputs}}else if(e.run_type==="chain"){const _=await Promise.all(e.child_runs.map(et=>this.convertV2RunToRun(et)));h={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:d,type:e.run_type,session_id:c.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:_.filter(et=>et.type==="llm"),child_chain_runs:_.filter(et=>et.type==="chain"),child_tool_runs:_.filter(et=>et.type==="tool")}}else if(e.run_type==="tool"){const _=await Promise.all(e.child_runs.map(et=>this.convertV2RunToRun(et)));h={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:d,type:e.run_type,session_id:c.id,tool_input:e.inputs.input,output:(g=e.outputs)==null?void 0:g.output,action:JSON.stringify(d),child_llm_runs:_.filter(et=>et.type==="llm"),child_chain_runs:_.filter(et=>et.type==="chain"),child_tool_runs:_.filter(et=>et.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return h}async persistRun(e){let c,d;e.run_type!==void 0?d=await this.convertV2RunToRun(e):d=e,d.type==="llm"?c=`${this.endpoint}/llm-runs`:d.type==="chain"?c=`${this.endpoint}/chain-runs`:c=`${this.endpoint}/tool-runs`;const h=await fetch(c,{method:"POST",headers:this.headers,body:JSON.stringify(d)});h.ok||console.error(`Failed to persist run: ${h.status} ${h.statusText}`)}async persistSession(e){const c=`${this.endpoint}/sessions`,d=await fetch(c,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return d.ok?{id:(await d.json()).id,...e}:(console.error(`Failed to persist session: ${d.status} ${d.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){const c=await fetch(e,{method:"GET",headers:this.headers});let d;if(!c.ok)return console.error(`Failed to load session: ${c.status} ${c.statusText}`),d={id:1,start_time:Date.now()},this.session=d,d;const h=await c.json();return h.length===0?(d={id:1,start_time:Date.now()},this.session=d,d):([d]=h,this.session=d,d)}}async function getTracingCallbackHandler(a){const e=new LangChainTracerV1;return a?await e.loadSession(a):await e.loadDefaultSession(),e}async function getTracingV2CallbackHandler(){return new LangChainTracer}let queue;function createQueue(){const a="default"in _default?_default.default:_default;return new a({autoStart:!0,concurrency:1})}async function consumeCallback(a,e){e===!0?await a():(typeof queue>"u"&&(queue=createQueue()),queue.add(a))}function parseCallbackConfigArg(a){return a?Array.isArray(a)||"name"in a?{callbacks:a}:a:{}}class BaseCallbackManager{setHandler(e){return this.setHandlers([e])}}class BaseRunManager{constructor(e,c,d,h,g,_,_e,et){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:d}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:g}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:_}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:_e}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:et})}async handleText(e){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var d;try{await((d=c.handleText)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags))}catch(h){console.error(`Error in handler ${c.constructor.name}, handleText: ${h}`)}},c.awaitHandlers)))}}class CallbackManagerForRetrieverRun extends BaseRunManager{getChild(e){const c=new CallbackManager(this.runId);return c.setHandlers(this.inheritableHandlers),c.addTags(this.inheritableTags),c.addMetadata(this.inheritableMetadata),e&&c.addTags([e],!1),c}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var d;if(!c.ignoreRetriever)try{await((d=c.handleRetrieverEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags))}catch{console.error(`Error in handler ${c.constructor.name}, handleRetriever`)}},c.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var d;if(!c.ignoreRetriever)try{await((d=c.handleRetrieverError)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags))}catch(h){console.error(`Error in handler ${c.constructor.name}, handleRetrieverError: ${h}`)}},c.awaitHandlers)))}}class CallbackManagerForLLMRun extends BaseRunManager{async handleLLMNewToken(e,c,d,h,g,_){await Promise.all(this.handlers.map(_e=>consumeCallback(async()=>{var et;if(!_e.ignoreLLM)try{await((et=_e.handleLLMNewToken)==null?void 0:et.call(_e,e,c??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,_))}catch(tt){console.error(`Error in handler ${_e.constructor.name}, handleLLMNewToken: ${tt}`)}},_e.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var d;if(!c.ignoreLLM)try{await((d=c.handleLLMError)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags))}catch(h){console.error(`Error in handler ${c.constructor.name}, handleLLMError: ${h}`)}},c.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var d;if(!c.ignoreLLM)try{await((d=c.handleLLMEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags))}catch(h){console.error(`Error in handler ${c.constructor.name}, handleLLMEnd: ${h}`)}},c.awaitHandlers)))}}class CallbackManagerForChainRun extends BaseRunManager{getChild(e){const c=new CallbackManager(this.runId);return c.setHandlers(this.inheritableHandlers),c.addTags(this.inheritableTags),c.addMetadata(this.inheritableMetadata),e&&c.addTags([e],!1),c}async handleChainError(e,c,d,h,g){await Promise.all(this.handlers.map(_=>consumeCallback(async()=>{var _e;if(!_.ignoreChain)try{await((_e=_.handleChainError)==null?void 0:_e.call(_,e,this.runId,this._parentRunId,this.tags,g))}catch(et){console.error(`Error in handler ${_.constructor.name}, handleChainError: ${et}`)}},_.awaitHandlers)))}async handleChainEnd(e,c,d,h,g){await Promise.all(this.handlers.map(_=>consumeCallback(async()=>{var _e;if(!_.ignoreChain)try{await((_e=_.handleChainEnd)==null?void 0:_e.call(_,e,this.runId,this._parentRunId,this.tags,g))}catch(et){console.error(`Error in handler ${_.constructor.name}, handleChainEnd: ${et}`)}},_.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var d;if(!c.ignoreAgent)try{await((d=c.handleAgentAction)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags))}catch(h){console.error(`Error in handler ${c.constructor.name}, handleAgentAction: ${h}`)}},c.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var d;if(!c.ignoreAgent)try{await((d=c.handleAgentEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags))}catch(h){console.error(`Error in handler ${c.constructor.name}, handleAgentEnd: ${h}`)}},c.awaitHandlers)))}}class CallbackManagerForToolRun extends BaseRunManager{getChild(e){const c=new CallbackManager(this.runId);return c.setHandlers(this.inheritableHandlers),c.addTags(this.inheritableTags),c.addMetadata(this.inheritableMetadata),e&&c.addTags([e],!1),c}async handleToolError(e){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var d;if(!c.ignoreAgent)try{await((d=c.handleToolError)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags))}catch(h){console.error(`Error in handler ${c.constructor.name}, handleToolError: ${h}`)}},c.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var d;if(!c.ignoreAgent)try{await((d=c.handleToolEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags))}catch(h){console.error(`Error in handler ${c.constructor.name}, handleToolEnd: ${h}`)}},c.awaitHandlers)))}}class CallbackManager extends BaseCallbackManager{constructor(e,c){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(c==null?void 0:c.handlers)??this.handlers,this.inheritableHandlers=(c==null?void 0:c.inheritableHandlers)??this.inheritableHandlers,this.tags=(c==null?void 0:c.tags)??this.tags,this.inheritableTags=(c==null?void 0:c.inheritableTags)??this.inheritableTags,this.metadata=(c==null?void 0:c.metadata)??this.metadata,this.inheritableMetadata=(c==null?void 0:c.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}async handleLLMStart(e,c,d=void 0,h=void 0,g=void 0,_=void 0,_e=void 0,et=void 0){return Promise.all(c.map(async tt=>{const rt=v4$1();return await Promise.all(this.handlers.map($=>consumeCallback(async()=>{var b;if(!$.ignoreLLM)try{await((b=$.handleLLMStart)==null?void 0:b.call($,e,[tt],rt,this._parentRunId,g,this.tags,this.metadata,et))}catch(nt){console.error(`Error in handler ${$.constructor.name}, handleLLMStart: ${nt}`)}},$.awaitHandlers))),new CallbackManagerForLLMRun(rt,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,c,d=void 0,h=void 0,g=void 0,_=void 0,_e=void 0,et=void 0){return Promise.all(c.map(async tt=>{const rt=v4$1();return await Promise.all(this.handlers.map($=>consumeCallback(async()=>{var b,nt;if(!$.ignoreLLM)try{if($.handleChatModelStart)await((b=$.handleChatModelStart)==null?void 0:b.call($,e,[tt],rt,this._parentRunId,g,this.tags,this.metadata,et));else if($.handleLLMStart){const st=getBufferString(tt);await((nt=$.handleLLMStart)==null?void 0:nt.call($,e,[st],rt,this._parentRunId,g,this.tags,this.metadata,et))}}catch(st){console.error(`Error in handler ${$.constructor.name}, handleLLMStart: ${st}`)}},$.awaitHandlers))),new CallbackManagerForLLMRun(rt,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,c,d=v4$1(),h=void 0,g=void 0,_=void 0,_e=void 0){return await Promise.all(this.handlers.map(et=>consumeCallback(async()=>{var tt;if(!et.ignoreChain)try{await((tt=et.handleChainStart)==null?void 0:tt.call(et,e,c,d,this._parentRunId,this.tags,this.metadata,h,_e))}catch(rt){console.error(`Error in handler ${et.constructor.name}, handleChainStart: ${rt}`)}},et.awaitHandlers))),new CallbackManagerForChainRun(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,c,d=v4$1(),h=void 0,g=void 0,_=void 0,_e=void 0){return await Promise.all(this.handlers.map(et=>consumeCallback(async()=>{var tt;if(!et.ignoreAgent)try{await((tt=et.handleToolStart)==null?void 0:tt.call(et,e,c,d,this._parentRunId,this.tags,this.metadata,_e))}catch(rt){console.error(`Error in handler ${et.constructor.name}, handleToolStart: ${rt}`)}},et.awaitHandlers))),new CallbackManagerForToolRun(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,c,d=v4$1(),h=void 0,g=void 0,_=void 0,_e=void 0){return await Promise.all(this.handlers.map(et=>consumeCallback(async()=>{var tt;if(!et.ignoreRetriever)try{await((tt=et.handleRetrieverStart)==null?void 0:tt.call(et,e,c,d,this._parentRunId,this.tags,this.metadata,_e))}catch(rt){console.error(`Error in handler ${et.constructor.name}, handleRetrieverStart: ${rt}`)}},et.awaitHandlers))),new CallbackManagerForRetrieverRun(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,c=!0){this.handlers.push(e),c&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(c=>c!==e),this.inheritableHandlers=this.inheritableHandlers.filter(c=>c!==e)}setHandlers(e,c=!0){this.handlers=[],this.inheritableHandlers=[];for(const d of e)this.addHandler(d,c)}addTags(e,c=!0){this.removeTags(e),this.tags.push(...e),c&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(c=>!e.includes(c)),this.inheritableTags=this.inheritableTags.filter(c=>!e.includes(c))}addMetadata(e,c=!0){this.metadata={...this.metadata,...e},c&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const c of Object.keys(e))delete this.metadata[c],delete this.inheritableMetadata[c]}copy(e=[],c=!0){const d=new CallbackManager(this._parentRunId);for(const h of this.handlers){const g=this.inheritableHandlers.includes(h);d.addHandler(h,g)}for(const h of this.tags){const g=this.inheritableTags.includes(h);d.addTags([h],g)}for(const h of Object.keys(this.metadata)){const g=Object.keys(this.inheritableMetadata).includes(h);d.addMetadata({[h]:this.metadata[h]},g)}for(const h of e)d.handlers.filter(g=>g.name==="console_callback_handler").some(g=>g.name===h.name)||d.addHandler(h,c);return d}static fromHandlers(e){class c extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4$1()}),Object.assign(this,e)}}const d=new this;return d.addHandler(new c),d}static async configure(e,c,d,h,g,_,_e){let et;(e||c)&&(Array.isArray(e)||!e?(et=new CallbackManager,et.setHandlers((e==null?void 0:e.map(ensureHandler))??[],!0)):et=e,et=et.copy(Array.isArray(c)?c.map(ensureHandler):c==null?void 0:c.handlers,!1));const tt=getEnvironmentVariable("LANGCHAIN_VERBOSE")==="true"||(_e==null?void 0:_e.verbose),rt=getEnvironmentVariable("LANGCHAIN_TRACING_V2")==="true",$=rt||(getEnvironmentVariable("LANGCHAIN_TRACING")??!1);if(tt||$){if(et||(et=new CallbackManager),tt&&!et.handlers.some(b=>b.name===ConsoleCallbackHandler.prototype.name)){const b=new ConsoleCallbackHandler;et.addHandler(b,!0)}if($&&!et.handlers.some(b=>b.name==="langchain_tracer"))if(rt)et.addHandler(await getTracingV2CallbackHandler(),!0);else{const b=getEnvironmentVariable("LANGCHAIN_PROJECT")&&getEnvironmentVariable("LANGCHAIN_SESSION");et.addHandler(await getTracingCallbackHandler(b),!0)}}return(d||h)&&et&&(et.addTags(d??[]),et.addTags(h??[],!1)),(g||_)&&et&&(et.addMetadata(g??{}),et.addMetadata(_??{},!1)),et}}function ensureHandler(a){return"name"in a?a:BaseCallbackHandler.fromMethods(a)}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const _hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwnProperty(a,e){return _hasOwnProperty.call(a,e)}function _objectKeys(a){if(Array.isArray(a)){const c=new Array(a.length);for(let d=0;d<c.length;d++)c[d]=""+d;return c}if(Object.keys)return Object.keys(a);let e=[];for(let c in a)hasOwnProperty(a,c)&&e.push(c);return e}function _deepClone(a){switch(typeof a){case"object":return JSON.parse(JSON.stringify(a));case"undefined":return null;default:return a}}function isInteger$2(a){let e=0;const c=a.length;let d;for(;e<c;){if(d=a.charCodeAt(e),d>=48&&d<=57){e++;continue}return!1}return!0}function unescapePathComponent(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}function hasUndefined(a){if(a===void 0)return!0;if(a){if(Array.isArray(a)){for(let c=0,d=a.length;c<d;c++)if(hasUndefined(a[c]))return!0}else if(typeof a=="object"){const c=_objectKeys(a),d=c.length;for(var e=0;e<d;e++)if(hasUndefined(a[c[e]]))return!0}}return!1}function patchErrorMessageFormatter(a,e){const c=[a];for(const d in e){const h=typeof e[d]=="object"?JSON.stringify(e[d],null,2):e[d];typeof h<"u"&&c.push(`${d}: ${h}`)}return c.join(`
`)}class PatchError extends Error{constructor(e,c,d,h,g){super(patchErrorMessageFormatter(e,{name:c,index:d,operation:h,tree:g})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:d}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:g}),Object.setPrototypeOf(this,new.target.prototype),this.message=patchErrorMessageFormatter(e,{name:c,index:d,operation:h,tree:g})}}const JsonPatchError=PatchError,objOps={add:function(a,e,c){return a[e]=this.value,{newDocument:c}},remove:function(a,e,c){var d=a[e];return delete a[e],{newDocument:c,removed:d}},replace:function(a,e,c){var d=a[e];return a[e]=this.value,{newDocument:c,removed:d}},move:function(a,e,c){let d=getValueByPointer(c,this.path);d&&(d=_deepClone(d));const h=applyOperation(c,{op:"remove",path:this.from}).removed;return applyOperation(c,{op:"add",path:this.path,value:h}),{newDocument:c,removed:d}},copy:function(a,e,c){const d=getValueByPointer(c,this.from);return applyOperation(c,{op:"add",path:this.path,value:_deepClone(d)}),{newDocument:c}},test:function(a,e,c){return{newDocument:c,test:_areEquals(a[e],this.value)}},_get:function(a,e,c){return this.value=a[e],{newDocument:c}}};var arrOps={add:function(a,e,c){return isInteger$2(e)?a.splice(e,0,this.value):a[e]=this.value,{newDocument:c,index:e}},remove:function(a,e,c){var d=a.splice(e,1);return{newDocument:c,removed:d[0]}},replace:function(a,e,c){var d=a[e];return a[e]=this.value,{newDocument:c,removed:d}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};function getValueByPointer(a,e){if(e=="")return a;var c={op:"_get",path:e};return applyOperation(a,c),c.value}function applyOperation(a,e,c=!1,d=!0,h=!0,g=0){if(c&&(typeof c=="function"?c(e,0,a,e.path):validator(e,0)),e.path===""){let _={newDocument:a};if(e.op==="add")return _.newDocument=e.value,_;if(e.op==="replace")return _.newDocument=e.value,_.removed=a,_;if(e.op==="move"||e.op==="copy")return _.newDocument=getValueByPointer(a,e.from),e.op==="move"&&(_.removed=a),_;if(e.op==="test"){if(_.test=_areEquals(a,e.value),_.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",g,e,a);return _.newDocument=a,_}else{if(e.op==="remove")return _.removed=a,_.newDocument=null,_;if(e.op==="_get")return e.value=a,_;if(c)throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",g,e,a);return _}}else{d||(a=_deepClone(a));const _e=(e.path||"").split("/");let et=a,tt=1,rt=_e.length,$,b,nt;for(typeof c=="function"?nt=c:nt=validator;;){if(b=_e[tt],b&&b.indexOf("~")!=-1&&(b=unescapePathComponent(b)),h&&(b=="__proto__"||b=="prototype"&&tt>0&&_e[tt-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(c&&$===void 0&&(et[b]===void 0?$=_e.slice(0,tt).join("/"):tt==rt-1&&($=e.path),$!==void 0&&nt(e,0,a,$)),tt++,Array.isArray(et)){if(b==="-")b=et.length;else{if(c&&!isInteger$2(b))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",g,e,a);isInteger$2(b)&&(b=~~b)}if(tt>=rt){if(c&&e.op==="add"&&b>et.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",g,e,a);const st=arrOps[e.op].call(e,et,b,a);if(st.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",g,e,a);return st}}else if(tt>=rt){const st=objOps[e.op].call(e,et,b,a);if(st.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",g,e,a);return st}if(et=et[b],c&&tt<rt&&(!et||typeof et!="object"))throw new JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",g,e,a)}}}function applyPatch(a,e,c,d=!0,h=!0){if(c&&!Array.isArray(e))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");d||(a=_deepClone(a));const g=new Array(e.length);for(let _=0,_e=e.length;_<_e;_++)g[_]=applyOperation(a,e[_],c,!0,h,_),a=g[_].newDocument;return g.newDocument=a,g}function validator(a,e,c,d){if(typeof a!="object"||a===null||Array.isArray(a))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,a,c);if(objOps[a.op]){if(typeof a.path!="string")throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,a,c);if(a.path.indexOf("/")!==0&&a.path.length>0)throw new JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,a,c);if((a.op==="move"||a.op==="copy")&&typeof a.from!="string")throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,a,c);if((a.op==="add"||a.op==="replace"||a.op==="test")&&a.value===void 0)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,a,c);if((a.op==="add"||a.op==="replace"||a.op==="test")&&hasUndefined(a.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,a,c);if(c){if(a.op=="add"){var h=a.path.split("/").length,g=d.split("/").length;if(h!==g+1&&h!==g)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,a,c)}else if(a.op==="replace"||a.op==="remove"||a.op==="_get"){if(a.path!==d)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,a,c)}else if(a.op==="move"||a.op==="copy"){var _={op:"_get",path:a.from,value:void 0},_e=validate([_],c);if(_e&&_e.name==="OPERATION_PATH_UNRESOLVABLE")throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,a,c)}}}else throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,a,c)}function validate(a,e,c){try{if(!Array.isArray(a))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)applyPatch(_deepClone(e),_deepClone(a),c||!0);else{c=c||validator;for(var d=0;d<a.length;d++)c(a[d],d,e,void 0)}}catch(h){if(h instanceof JsonPatchError)return h;throw h}}function _areEquals(a,e){if(a===e)return!0;if(a&&e&&typeof a=="object"&&typeof e=="object"){var c=Array.isArray(a),d=Array.isArray(e),h,g,_;if(c&&d){if(g=a.length,g!=e.length)return!1;for(h=g;h--!==0;)if(!_areEquals(a[h],e[h]))return!1;return!0}if(c!=d)return!1;var _e=Object.keys(a);if(g=_e.length,g!==Object.keys(e).length)return!1;for(h=g;h--!==0;)if(!e.hasOwnProperty(_e[h]))return!1;for(h=g;h--!==0;)if(_=_e[h],!_areEquals(a[_],e[_]))return!1;return!0}return a!==a&&e!==e}class IterableReadableStream extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done&&this.reader.releaseLock(),{done:e.done,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const c=e.getReader();return new IterableReadableStream({start(d){return h();function h(){return c.read().then(({done:g,value:_})=>{if(g){d.close();return}return d.enqueue(_),h()})}},cancel(){c.releaseLock()}})}static fromAsyncGenerator(e){return new IterableReadableStream({async pull(c){const{value:d,done:h}=await e.next();h&&c.close(),c.enqueue(d)}})}}class RunLogPatch{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops}concat(e){const c=this.ops.concat(e.ops),d=applyPatch({},c);return new RunLog({ops:c,state:d[d.length-1].newDocument})}}class RunLog extends RunLogPatch{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const c=this.ops.concat(e.ops),d=applyPatch(this.state,e.ops);return new RunLog({ops:c,state:d[d.length-1].newDocument})}}class LogStreamCallbackHandler extends BaseTracer{constructor(e){super(e),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.parent_run_id===void 0)return!1;const c=e.tags??[];let d=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(d=d||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(d=d||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(d=d||c.find(h=>{var g;return(g=this.includeTags)==null?void 0:g.includes(h)})!==void 0),this.excludeNames!==void 0&&(d=d&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(d=d&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(d=d&&c.every(h=>{var g;return!((g=this.excludeTags)!=null&&g.includes(h))})),d}async onRunCreate(e){var h;if(e.parent_run_id===void 0&&await this.writer.write(new RunLogPatch({ops:[{op:"replace",path:"",value:{id:e.id,streamed_output:[],final_output:void 0,logs:{}}}]})),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const c=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=c===1?e.name:`${e.name}:${c}`;const d={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((h=e.extra)==null?void 0:h.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output_str:[],final_output:void 0,end_time:void 0};await this.writer.write(new RunLogPatch({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:d}]}))}async onRunUpdate(e){try{const c=this.keyMapByRunId[e.id];if(c===void 0)return;const d=[{op:"add",path:`/logs/${c}/final_output`,value:e.outputs}];e.end_time!==void 0&&d.push({op:"add",path:`/logs/${c}/end_time`,value:new Date(e.end_time).toISOString()});const h=new RunLogPatch({ops:d});await this.writer.write(h)}finally{if(e.parent_run_id===void 0){const c=new RunLogPatch({ops:[{op:"replace",path:"/final_output",value:e.outputs}]});await this.writer.write(c),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,c){const d=this.keyMapByRunId[e.id];if(d===void 0)return;const h=new RunLogPatch({ops:[{op:"add",path:`/logs/${d}/streamed_output_str/-`,value:c}]});await this.writer.write(h)}}async function getCallbackMangerForConfig(a){return CallbackManager.configure(a==null?void 0:a.callbacks,void 0,a==null?void 0:a.tags,void 0,a==null?void 0:a.metadata)}function mergeConfigs(a,e){const c={...a};if(e)for(const d of Object.keys(e))if(d==="metadata")c[d]={...c[d],...e[d]};else if(d==="tags")c[d]=(c[d]??[]).concat(e[d]??[]);else if(d==="callbacks"){const h=c.callbacks,g=e.callbacks??a.callbacks;if(Array.isArray(g))if(!h)c.callbacks=g;else if(Array.isArray(h))c.callbacks=h.concat(g);else{const _=h.copy();for(const _e of g)_.addHandler(_e,!0);c.callbacks=_}else if(g)if(!h)c.callbacks=g;else if(Array.isArray(h)){const _=g.copy();for(const _e of h)_.addHandler(_e,!0);c.callbacks=_}else c.callbacks=new CallbackManager(g.parentRunId,{handlers:h.handlers.concat(g.handlers),inheritableHandlers:h.inheritableHandlers.concat(g.inheritableHandlers),tags:Array.from(new Set(h.tags.concat(g.tags))),inheritableTags:Array.from(new Set(h.inheritableTags.concat(g.inheritableTags))),metadata:{...h.metadata,...g.metadata}})}else c[d]=e[d]??c[d];return c}const STATUS_NO_RETRY=[400,401,402,403,404,405,406,407,408,409],defaultFailedAttemptHandler=a=>{var c,d;if(a.message.startsWith("Cancel")||a.message.startsWith("TimeoutError")||a.name==="TimeoutError"||a.message.startsWith("AbortError")||a.name==="AbortError"||(a==null?void 0:a.code)==="ECONNABORTED")throw a;const e=((c=a==null?void 0:a.response)==null?void 0:c.status)??(a==null?void 0:a.status);if(e&&STATUS_NO_RETRY.includes(+e))throw a;if(((d=a==null?void 0:a.error)==null?void 0:d.code)==="insufficient_quota"){const h=new Error(a==null?void 0:a.message);throw h.name="InsufficientQuotaError",h}};class AsyncCaller{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??defaultFailedAttemptHandler;const c="default"in _default?_default.default:_default;this.queue=new c({concurrency:this.maxConcurrency})}call(e,...c){return this.queue.add(()=>pRetry$1(()=>e(...c).catch(d=>{throw d instanceof Error?d:new Error(d)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,c,...d){return e.signal?Promise.race([this.call(c,...d),new Promise((h,g)=>{var _;(_=e.signal)==null||_.addEventListener("abort",()=>{g(new Error("AbortError"))})})]):this.call(c,...d)}fetch(...e){return this.call(()=>fetch(...e).then(c=>c.ok?c:Promise.reject(c)))}}class RootListenersTracer extends BaseTracer{constructor({config:e,onStart:c,onEnd:d,onError:h}){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=c,this.argOnEnd=d,this.argOnError=h}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&(this.argOnStart.length===1?await this.argOnStart(e):this.argOnStart.length===2&&await this.argOnStart(e,this.config)))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&(this.argOnError.length===1?await this.argOnError(e):this.argOnError.length===2&&await this.argOnError(e,this.config)):this.argOnEnd&&(this.argOnEnd.length===1?await this.argOnEnd(e):this.argOnEnd.length===2&&await this.argOnEnd(e,this.config)))}}function _coerceToDict(a,e){return a&&!Array.isArray(a)&&typeof a=="object"?a:{[e]:a}}class Runnable extends Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}bind(e){return new RunnableBinding({bound:this,kwargs:e,config:{}})}map(){return new RunnableEach({bound:this})}withRetry(e){return new RunnableRetry({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new RunnableBinding({bound:this,config:e,kwargs:{}})}withFallbacks(e){return new RunnableWithFallbacks({runnable:this,fallbacks:e.fallbacks})}_getOptionsList(e,c=0){if(Array.isArray(e)){if(e.length!==c)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${c} inputs`);return e}return Array.from({length:c},()=>e)}async batch(e,c,d){const h=this._getOptionsList(c??{},e.length),g=new AsyncCaller({maxConcurrency:d==null?void 0:d.maxConcurrency,onFailedAttempt:_e=>{throw _e}}),_=e.map((_e,et)=>g.call(async()=>{try{return await this.invoke(_e,h[et])}catch(tt){if(d!=null&&d.returnExceptions)return tt;throw tt}}));return Promise.all(_)}async*_streamIterator(e,c){yield this.invoke(e,c)}async stream(e,c){return IterableReadableStream.fromAsyncGenerator(this._streamIterator(e,c))}_separateRunnableConfigFromCallOptions(e={}){const c={callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName},d={...e};return delete d.callbacks,delete d.tags,delete d.metadata,delete d.runName,[c,d]}async _callWithConfig(e,c,d){const h=await getCallbackMangerForConfig(d),g=await(h==null?void 0:h.handleChainStart(this.toJSON(),_coerceToDict(c,"input"),void 0,d==null?void 0:d.runType,void 0,void 0,d==null?void 0:d.runName));let _;try{_=await e.bind(this)(c,d,g)}catch(_e){throw await(g==null?void 0:g.handleChainError(_e)),_e}return await(g==null?void 0:g.handleChainEnd(_coerceToDict(_,"output"))),_}async _batchWithConfig(e,c,d,h){const g=this._getOptionsList(d??{},c.length),_=await Promise.all(g.map(getCallbackMangerForConfig)),_e=await Promise.all(_.map((tt,rt)=>tt==null?void 0:tt.handleChainStart(this.toJSON(),_coerceToDict(c[rt],"input"),void 0,g[rt].runType,void 0,void 0,g[rt].runName)));let et;try{et=await e(c,g,_e,h)}catch(tt){throw await Promise.all(_e.map(rt=>rt==null?void 0:rt.handleChainError(tt))),tt}return await Promise.all(_e.map(tt=>tt==null?void 0:tt.handleChainEnd(_coerceToDict(et,"output")))),et}async*_transformStreamWithConfig(e,c,d){let h,g=!0,_,_e=!0;const et=await getCallbackMangerForConfig(d);let tt;const rt=this.toJSON();async function*$(){for await(const nt of e){if(tt||(tt=await(et==null?void 0:et.handleChainStart(rt,{input:""},void 0,d==null?void 0:d.runType,void 0,void 0,d==null?void 0:d.runName))),g)if(h===void 0)h=nt;else try{h=h.concat(nt)}catch{h=void 0,g=!1}yield nt}}const b=$();try{const nt=c(b,tt,d);for await(const st of nt)if(yield st,_e)if(_===void 0)_=st;else try{_=_.concat(st)}catch{_=void 0,_e=!1}}catch(nt){throw await(tt==null?void 0:tt.handleChainError(nt,void 0,void 0,void 0,{inputs:_coerceToDict(h,"input")})),nt}await(tt==null?void 0:tt.handleChainEnd(_??{},void 0,void 0,void 0,{inputs:_coerceToDict(h,"input")}))}_patchConfig(e={},c=void 0){const d={...e};return c!==void 0?(delete d.runName,{...d,callbacks:c}):d}pipe(e){return new RunnableSequence({first:this,last:_coerceToRunnable(e)})}async*transform(e,c){let d;for await(const h of e)d===void 0?d=h:d=d.concat(h);yield*this._streamIterator(d,c)}async*streamLog(e,c,d){const h=new LogStreamCallbackHandler({...d,autoClose:!1}),g=c??{},{callbacks:_}=g;if(_===void 0)g.callbacks=[h];else if(Array.isArray(_))g.callbacks=_.concat([h]);else{const rt=_.copy();rt.inheritableHandlers.push(h),g.callbacks=rt}const _e=await this.stream(e,g);async function et(){try{for await(const rt of _e){const $=new RunLogPatch({ops:[{op:"add",path:"/streamed_output/-",value:rt}]});await h.writer.write($)}}finally{await h.writer.close()}}const tt=et();try{for await(const rt of h)yield rt}finally{await tt}}static isRunnable(e){return e?e.lc_runnable:!1}withListeners({onStart:e,onEnd:c,onError:d}){return new RunnableBinding({bound:this,config:{},configFactories:[h=>({callbacks:[new RootListenersTracer({config:h,onStart:e,onEnd:c,onError:d})]})]})}}class RunnableBinding extends Runnable{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}async _mergeConfig(e){const c=mergeConfigs(this.config,e);return mergeConfigs(c,...this.configFactories?await Promise.all(this.configFactories.map(async d=>await d(c))):[])}bind(e){return this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,c){return this.bound.invoke(e,await this._mergeConfig({...c,...this.kwargs}))}async batch(e,c,d){const h=Array.isArray(c)?await Promise.all(c.map(async g=>this._mergeConfig({...g,...this.kwargs}))):await this._mergeConfig({...c,...this.kwargs});return this.bound.batch(e,h,d)}async*_streamIterator(e,c){yield*this.bound._streamIterator(e,await this._mergeConfig({...c,...this.kwargs}))}async stream(e,c){return this.bound.stream(e,await this._mergeConfig({...c,...this.kwargs}))}async*transform(e,c){yield*this.bound.transform(e,await this._mergeConfig({...c,...this.kwargs}))}static isRunnableBinding(e){return e.bound&&Runnable.isRunnable(e.bound)}withListeners({onStart:e,onEnd:c,onError:d}){return new RunnableBinding({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[h=>({callbacks:[new RootListenersTracer({config:h,onStart:e,onEnd:c,onError:d})]})]})}}class RunnableEach extends Runnable{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new RunnableEach({bound:this.bound.bind(e)})}async invoke(e,c){return this._callWithConfig(this._invoke,e,c)}async _invoke(e,c,d){return this.bound.batch(e,this._patchConfig(c,d==null?void 0:d.getChild()))}withListeners({onStart:e,onEnd:c,onError:d}){return new RunnableEach({bound:this.bound.withListeners({onStart:e,onEnd:c,onError:d})})}}class RunnableRetry extends RunnableBinding{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,c,d){const h=e>1?`retry:attempt:${e}`:void 0;return this._patchConfig(c,d==null?void 0:d.getChild(h))}async _invoke(e,c,d){return pRetry$1(h=>super.invoke(e,this._patchConfigForRetry(h,c,d)),{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,c){return this._callWithConfig(this._invoke,e,c)}async _batch(e,c,d,h){const g={};try{await pRetry$1(async _=>{const _e=e.map((b,nt)=>nt).filter(b=>g[b.toString()]===void 0||g[b.toString()]instanceof Error),et=_e.map(b=>e[b]),tt=_e.map(b=>this._patchConfigForRetry(_,c==null?void 0:c[b],d==null?void 0:d[b])),rt=await super.batch(et,tt,{...h,returnExceptions:!0});let $;for(let b=0;b<rt.length;b+=1){const nt=rt[b],st=_e[b];nt instanceof Error&&$===void 0&&($=nt),g[st.toString()]=nt}if($)throw $;return rt},{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(_){if((h==null?void 0:h.returnExceptions)!==!0)throw _}return Object.keys(g).sort((_,_e)=>parseInt(_,10)-parseInt(_e,10)).map(_=>g[parseInt(_,10)])}async batch(e,c,d){return this._batchWithConfig(this._batch.bind(this),e,c,d)}}class RunnableSequence extends Runnable{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,c){const d=await getCallbackMangerForConfig(c),h=await(d==null?void 0:d.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),void 0,void 0,void 0,void 0,c==null?void 0:c.runName));let g=e,_;try{const _e=[this.first,...this.middle];for(let et=0;et<_e.length;et+=1)g=await _e[et].invoke(g,this._patchConfig(c,h==null?void 0:h.getChild(`seq:step:${et+1}`)));_=await this.last.invoke(g,this._patchConfig(c,h==null?void 0:h.getChild(`seq:step:${this.steps.length}`)))}catch(_e){throw await(h==null?void 0:h.handleChainError(_e)),_e}return await(h==null?void 0:h.handleChainEnd(_coerceToDict(_,"output"))),_}async batch(e,c,d){const h=this._getOptionsList(c??{},e.length),g=await Promise.all(h.map(getCallbackMangerForConfig)),_=await Promise.all(g.map((tt,rt)=>tt==null?void 0:tt.handleChainStart(this.toJSON(),_coerceToDict(e[rt],"input"),void 0,void 0,void 0,void 0,h[rt].runName)));let _e=e,et;try{const tt=[this.first,...this.middle];for(let rt=0;rt<tt.length;rt+=1)_e=await tt[rt].batch(_e,_.map((b,nt)=>this._patchConfig(h[nt],b==null?void 0:b.getChild(`seq:step:${rt+1}`))),d);et=await this.last.batch(_e,_.map(rt=>this._patchConfig(h[this.steps.length-1],rt==null?void 0:rt.getChild(`seq:step:${this.steps.length}`))),d)}catch(tt){throw await Promise.all(_.map(rt=>rt==null?void 0:rt.handleChainError(tt))),tt}return await Promise.all(_.map((tt,rt)=>tt==null?void 0:tt.handleChainEnd(_coerceToDict(et[rt],"output")))),et}async*_streamIterator(e,c){const d=await getCallbackMangerForConfig(c),h=await(d==null?void 0:d.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),void 0,void 0,void 0,void 0,c==null?void 0:c.runName)),g=[this.first,...this.middle,this.last];let _=!0,_e;async function*et(){yield e}try{let tt=g[0].transform(et(),this._patchConfig(c,h==null?void 0:h.getChild("seq:step:1")));for(let rt=1;rt<g.length;rt+=1)tt=await g[rt].transform(tt,this._patchConfig(c,h==null?void 0:h.getChild(`seq:step:${rt+1}`)));for await(const rt of tt)if(yield rt,_)if(_e===void 0)_e=rt;else try{_e=_e.concat(rt)}catch{_e=void 0,_=!1}}catch(tt){throw await(h==null?void 0:h.handleChainError(tt)),tt}await(h==null?void 0:h.handleChainEnd(_coerceToDict(_e,"output")))}pipe(e){return RunnableSequence.isRunnableSequence(e)?new RunnableSequence({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last}):new RunnableSequence({first:this.first,middle:[...this.middle,this.last],last:_coerceToRunnable(e)})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Runnable.isRunnable(e)}static from([e,...c]){return new RunnableSequence({first:_coerceToRunnable(e),middle:c.slice(0,-1).map(_coerceToRunnable),last:_coerceToRunnable(c[c.length-1])})}}class RunnableMap extends Runnable{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[c,d]of Object.entries(e.steps))this.steps[c]=_coerceToRunnable(d)}static from(e){return new RunnableMap({steps:e})}async invoke(e,c){const d=await getCallbackMangerForConfig(c),h=await(d==null?void 0:d.handleChainStart(this.toJSON(),{input:e},void 0,void 0,void 0,void 0,c==null?void 0:c.runName)),g={};try{await Promise.all(Object.entries(this.steps).map(async([_,_e])=>{g[_]=await _e.invoke(e,this._patchConfig(c,h==null?void 0:h.getChild(_)))}))}catch(_){throw await(h==null?void 0:h.handleChainError(_)),_}return await(h==null?void 0:h.handleChainEnd(g)),g}}class RunnableLambda extends Runnable{static lc_name(){return"RunnableLambda"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}static from(e){return new RunnableLambda({func:e})}async _invoke(e,c,d){let h=await this.func(e,{config:c});return h&&Runnable.isRunnable(h)&&(h=await h.invoke(e,this._patchConfig(c,d==null?void 0:d.getChild()))),h}async invoke(e,c){return this._callWithConfig(this._invoke,e,c)}}class RunnableWithFallbacks extends Runnable{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,c){const d=await CallbackManager.configure(c==null?void 0:c.callbacks,void 0,c==null?void 0:c.tags,void 0,c==null?void 0:c.metadata),h=await(d==null?void 0:d.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),void 0,void 0,void 0,void 0,c==null?void 0:c.runName));let g;for(const _ of this.runnables())try{const _e=await _.invoke(e,this._patchConfig(c,h==null?void 0:h.getChild()));return await(h==null?void 0:h.handleChainEnd(_coerceToDict(_e,"output"))),_e}catch(_e){g===void 0&&(g=_e)}throw g===void 0?new Error("No error stored at end of fallback."):(await(h==null?void 0:h.handleChainError(g)),g)}async batch(e,c,d){if(d!=null&&d.returnExceptions)throw new Error("Not implemented.");const h=this._getOptionsList(c??{},e.length),g=await Promise.all(h.map(et=>CallbackManager.configure(et==null?void 0:et.callbacks,void 0,et==null?void 0:et.tags,void 0,et==null?void 0:et.metadata))),_=await Promise.all(g.map((et,tt)=>et==null?void 0:et.handleChainStart(this.toJSON(),_coerceToDict(e[tt],"input"),void 0,void 0,void 0,void 0,h[tt].runName)));let _e;for(const et of this.runnables())try{const tt=await et.batch(e,_.map((rt,$)=>this._patchConfig(h[$],rt==null?void 0:rt.getChild())),d);return await Promise.all(_.map((rt,$)=>rt==null?void 0:rt.handleChainEnd(_coerceToDict(tt[$],"output")))),tt}catch(tt){_e===void 0&&(_e=tt)}throw _e?(await Promise.all(_.map(et=>et==null?void 0:et.handleChainError(_e))),_e):new Error("No error stored at end of fallbacks.")}}function _coerceToRunnable(a){if(typeof a=="function")return new RunnableLambda({func:a});if(Runnable.isRunnable(a))return a;if(!Array.isArray(a)&&typeof a=="object"){const e={};for(const[c,d]of Object.entries(a))e[c]=_coerceToRunnable(d);return new RunnableMap({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class BaseDocumentTransformer extends Runnable{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","documents","transformers"]})}invoke(e,c){return this.transformDocuments(e)}}var base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(a){var e=a.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");c===-1&&(c=e);var d=c===e?0:4-c%4;return[c,d]}function byteLength(a){var e=getLens(a),c=e[0],d=e[1];return(c+d)*3/4-d}function _byteLength(a,e,c){return(e+c)*3/4-c}function toByteArray(a){var e,c=getLens(a),d=c[0],h=c[1],g=new Arr(_byteLength(a,d,h)),_=0,_e=h>0?d-4:d,et;for(et=0;et<_e;et+=4)e=revLookup[a.charCodeAt(et)]<<18|revLookup[a.charCodeAt(et+1)]<<12|revLookup[a.charCodeAt(et+2)]<<6|revLookup[a.charCodeAt(et+3)],g[_++]=e>>16&255,g[_++]=e>>8&255,g[_++]=e&255;return h===2&&(e=revLookup[a.charCodeAt(et)]<<2|revLookup[a.charCodeAt(et+1)]>>4,g[_++]=e&255),h===1&&(e=revLookup[a.charCodeAt(et)]<<10|revLookup[a.charCodeAt(et+1)]<<4|revLookup[a.charCodeAt(et+2)]>>2,g[_++]=e>>8&255,g[_++]=e&255),g}function tripletToBase64(a){return lookup[a>>18&63]+lookup[a>>12&63]+lookup[a>>6&63]+lookup[a&63]}function encodeChunk(a,e,c){for(var d,h=[],g=e;g<c;g+=3)d=(a[g]<<16&16711680)+(a[g+1]<<8&65280)+(a[g+2]&255),h.push(tripletToBase64(d));return h.join("")}function fromByteArray(a){for(var e,c=a.length,d=c%3,h=[],g=16383,_=0,_e=c-d;_<_e;_+=g)h.push(encodeChunk(a,_,_+g>_e?_e:_+g));return d===1?(e=a[c-1],h.push(lookup[e>>2]+lookup[e<<4&63]+"==")):d===2&&(e=(a[c-2]<<8)+a[c-1],h.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),h.join("")}var __defProp=Object.defineProperty,__defNormalProp=(a,e,c)=>e in a?__defProp(a,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[e]=c,__publicField=(a,e,c)=>(__defNormalProp(a,e+"",c),c);function bytePairMerge(a,e){let c=Array.from({length:a.length},(d,h)=>({start:h,end:h+1}));for(;c.length>1;){let d=null;for(let h=0;h<c.length-1;h++){const g=a.slice(c[h].start,c[h+1].end),_=e.get(g.join(","));_!=null&&(d==null||_<d[0])&&(d=[_,h])}if(d!=null){const h=d[1];c[h]={start:c[h].start,end:c[h+1].end},c.splice(h+1,1)}else break}return c}function bytePairEncode(a,e){return a.length===1?[e.get(a.join(","))]:bytePairMerge(a,e).map(c=>e.get(a.slice(c.start,c.end).join(","))).filter(c=>c!=null)}function escapeRegex(a){return a.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var _Tiktoken=class{constructor(a,e){nr(this,"specialTokens");nr(this,"inverseSpecialTokens");nr(this,"patStr");nr(this,"textEncoder",new TextEncoder);nr(this,"textDecoder",new TextDecoder("utf-8"));nr(this,"rankMap",new Map);nr(this,"textMap",new Map);this.patStr=a.pat_str;const c=a.bpe_ranks.split(`
`).filter(Boolean).reduce((d,h)=>{const[g,_,..._e]=h.split(" "),et=Number.parseInt(_,10);return _e.forEach((tt,rt)=>d[tt]=et+rt),d},{});for(const[d,h]of Object.entries(c)){const g=base64Js.toByteArray(d);this.rankMap.set(g.join(","),h),this.textMap.set(h,g)}this.specialTokens={...a.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((d,[h,g])=>(d[g]=this.textEncoder.encode(h),d),{})}encode(a,e=[],c="all"){const d=new RegExp(this.patStr,"ug"),h=_Tiktoken.specialTokenRegex(Object.keys(this.specialTokens)),g=[],_=new Set(e==="all"?Object.keys(this.specialTokens):e),_e=new Set(c==="all"?Object.keys(this.specialTokens).filter(tt=>!_.has(tt)):c);if(_e.size>0){const tt=_Tiktoken.specialTokenRegex([..._e]),rt=a.match(tt);if(rt!=null)throw new Error(`The text contains a special token that is not allowed: ${rt[0]}`)}let et=0;for(;;){let tt=null,rt=et;for(;h.lastIndex=rt,tt=h.exec(a),!(tt==null||_.has(tt[0]));)rt=tt.index+1;const $=(tt==null?void 0:tt.index)??a.length;for(const nt of a.substring(et,$).matchAll(d)){const st=this.textEncoder.encode(nt[0]),ot=this.rankMap.get(st.join(","));if(ot!=null){g.push(ot);continue}g.push(...bytePairEncode(st,this.rankMap))}if(tt==null)break;let b=this.specialTokens[tt[0]];g.push(b),et=tt.index+tt[0].length}return g}decode(a){const e=[];let c=0;for(let g=0;g<a.length;++g){const _=a[g],_e=this.textMap.get(_)??this.inverseSpecialTokens[_];_e!=null&&(e.push(_e),c+=_e.length)}const d=new Uint8Array(c);let h=0;for(const g of e)d.set(g,h),h+=g.length;return this.textDecoder.decode(d)}},Tiktoken=_Tiktoken;__publicField(Tiktoken,"specialTokenRegex",a=>new RegExp(a.map(e=>escapeRegex(e)).join("|"),"g"));class TextSplitter extends BaseDocumentTransformer{constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chunkSize=(e==null?void 0:e.chunkSize)??this.chunkSize,this.chunkOverlap=(e==null?void 0:e.chunkOverlap)??this.chunkOverlap,this.keepSeparator=(e==null?void 0:e.keepSeparator)??this.keepSeparator,this.lengthFunction=(e==null?void 0:e.lengthFunction)??(c=>c.length),this.chunkOverlap>=this.chunkSize)throw new Error("Cannot have chunkOverlap >= chunkSize")}async transformDocuments(e,c={}){return this.splitDocuments(e,c)}splitOnSeparator(e,c){let d;if(c)if(this.keepSeparator){const h=c.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");d=e.split(new RegExp(`(?=${h})`))}else d=e.split(c);else d=e.split("");return d.filter(h=>h!=="")}async createDocuments(e,c=[],d={}){const h=c.length>0?c:new Array(e.length).fill({}),{chunkHeader:g="",chunkOverlapHeader:_="(cont'd) ",appendChunkOverlapHeader:_e=!1}=d,et=new Array;for(let tt=0;tt<e.length;tt+=1){const rt=e[tt];let $=1,b=null,nt=-1;for(const st of await this.splitText(rt)){let ot=g;const it=rt.indexOf(st,nt+1);if(b===null){const ht=this.numberOfNewLines(rt,0,it);$+=ht}else{const ht=nt+await this.lengthFunction(b);if(ht<it){const pt=this.numberOfNewLines(rt,ht,it);$+=pt}else if(ht>it){const pt=this.numberOfNewLines(rt,it,ht);$-=pt}_e&&(ot+=_)}const at=this.numberOfNewLines(st),lt=h[tt].loc&&typeof h[tt].loc=="object"?{...h[tt].loc}:{};lt.lines={from:$,to:$+at};const dt={...h[tt],loc:lt};ot+=st,et.push(new Document({pageContent:ot,metadata:dt})),$+=at,b=st,nt=it}}return et}numberOfNewLines(e,c,d){return(e.slice(c,d).match(/\n/g)||[]).length}async splitDocuments(e,c={}){const d=e.filter(_=>_.pageContent!==void 0),h=d.map(_=>_.pageContent),g=d.map(_=>_.metadata);return this.createDocuments(h,g,c)}joinDocs(e,c){const d=e.join(c).trim();return d===""?null:d}async mergeSplits(e,c){const d=[],h=[];let g=0;for(const _e of e){const et=await this.lengthFunction(_e);if(g+et+(h.length>0?c.length:0)>this.chunkSize&&(g>this.chunkSize&&console.warn(`Created a chunk of size ${g}, +
which is longer than the specified ${this.chunkSize}`),h.length>0)){const tt=this.joinDocs(h,c);for(tt!==null&&d.push(tt);g>this.chunkOverlap||g+et>this.chunkSize&&g>0;)g-=await this.lengthFunction(h[0]),h.shift()}h.push(_e),g+=et}const _=this.joinDocs(h,c);return _!==null&&d.push(_),d}}class RecursiveCharacterTextSplitter extends TextSplitter{static lc_name(){return"RecursiveCharacterTextSplitter"}constructor(e){super(e),Object.defineProperty(this,"separators",{enumerable:!0,configurable:!0,writable:!0,value:[`

`,`
`," ",""]}),this.separators=(e==null?void 0:e.separators)??this.separators,this.keepSeparator=(e==null?void 0:e.keepSeparator)??!0}async _splitText(e,c){const d=[];let h=c[c.length-1],g;for(let tt=0;tt<c.length;tt+=1){const rt=c[tt];if(rt===""){h=rt;break}if(e.includes(rt)){h=rt,g=c.slice(tt+1);break}}const _=this.splitOnSeparator(e,h);let _e=[];const et=this.keepSeparator?"":h;for(const tt of _)if(await this.lengthFunction(tt)<this.chunkSize)_e.push(tt);else{if(_e.length){const rt=await this.mergeSplits(_e,et);d.push(...rt),_e=[]}if(!g)d.push(tt);else{const rt=await this._splitText(tt,g);d.push(...rt)}}if(_e.length){const tt=await this.mergeSplits(_e,et);d.push(...tt)}return d}async splitText(e){return this._splitText(e,this.separators)}static fromLanguage(e,c){return new RecursiveCharacterTextSplitter({...c,separators:RecursiveCharacterTextSplitter.getSeparatorsForLanguage(e)})}static getSeparatorsForLanguage(e){if(e==="cpp")return[`
class `,`
void `,`
int `,`
float `,`
double `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="go")return[`
func `,`
var `,`
const `,`
type `,`
if `,`
for `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="java")return[`
class `,`
public `,`
protected `,`
private `,`
static `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="js")return[`
function `,`
const `,`
let `,`
var `,`
class `,`
if `,`
for `,`
while `,`
switch `,`
case `,`
default `,`

`,`
`," ",""];if(e==="php")return[`
function `,`
class `,`
if `,`
foreach `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="proto")return[`
message `,`
service `,`
enum `,`
option `,`
import `,`
syntax `,`

`,`
`," ",""];if(e==="python")return[`
class `,`
def `,`
	def `,`

`,`
`," ",""];if(e==="rst")return[`
===
`,`
---
`,`
***
`,`
.. `,`

`,`
`," ",""];if(e==="ruby")return[`
def `,`
class `,`
if `,`
unless `,`
while `,`
for `,`
do `,`
begin `,`
rescue `,`

`,`
`," ",""];if(e==="rust")return[`
fn `,`
const `,`
let `,`
if `,`
while `,`
for `,`
loop `,`
match `,`
const `,`

`,`
`," ",""];if(e==="scala")return[`
class `,`
object `,`
def `,`
val `,`
var `,`
if `,`
for `,`
while `,`
match `,`
case `,`

`,`
`," ",""];if(e==="swift")return[`
func `,`
class `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="markdown")return[`
## `,`
### `,`
#### `,`
##### `,`
###### `,"```\n\n",`

***

`,`

---

`,`

___

`,`

`,`
`," ",""];if(e==="latex")return[`
\\chapter{`,`
\\section{`,`
\\subsection{`,`
\\subsubsection{`,`
\\begin{enumerate}`,`
\\begin{itemize}`,`
\\begin{description}`,`
\\begin{list}`,`
\\begin{quote}`,`
\\begin{quotation}`,`
\\begin{verse}`,`
\\begin{verbatim}`,`
\\begin{align}`,"$$","$",`

`,`
`," ",""];if(e==="html")return["<body>","<div>","<p>","<br>","<li>","<h1>","<h2>","<h3>","<h4>","<h5>","<h6>","<span>","<table>","<tr>","<td>","<th>","<ul>","<ol>","<header>","<footer>","<nav>","<head>","<style>","<script>","<meta>","<title>"," ",""];if(e==="sol")return[`
pragma `,`
using `,`
contract `,`
interface `,`
library `,`
constructor `,`
type `,`
function `,`
event `,`
modifier `,`
error `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do while `,`
assembly `,`

`,`
`," ",""];throw new Error(`Language ${e} is not supported.`)}}class BaseRetriever extends Runnable{constructor(e){super(e),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callbacks=e==null?void 0:e.callbacks,this.tags=(e==null?void 0:e.tags)??[],this.metadata=(e==null?void 0:e.metadata)??{},this.verbose=(e==null?void 0:e.verbose)??!1}_getRelevantDocuments(e,c){throw new Error("Not implemented!")}async invoke(e,c){return this.getRelevantDocuments(e,c)}async getRelevantDocuments(e,c){const d=parseCallbackConfigArg(c),h=await CallbackManager.configure(d.callbacks,this.callbacks,d.tags,this.tags,d.metadata,this.metadata,{verbose:this.verbose}),g=await(h==null?void 0:h.handleRetrieverStart(this.toJSON(),e,void 0,void 0,void 0,void 0,d.runName));try{const _=await this._getRelevantDocuments(e,g);return await(g==null?void 0:g.handleRetrieverEnd(_)),_}catch(_){throw await(g==null?void 0:g.handleRetrieverError(_)),_}}}class VectorStoreRetriever extends BaseRetriever{static lc_name(){return"VectorStoreRetriever"}get lc_namespace(){return["langchain","retrievers","base"]}_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){super(e),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"searchType",{enumerable:!0,configurable:!0,writable:!0,value:"similarity"}),Object.defineProperty(this,"searchKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.searchType=e.searchType??this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}async _getRelevantDocuments(e,c){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,{k:this.k,filter:this.filter,...this.searchKwargs},c==null?void 0:c.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,c==null?void 0:c.getChild("vectorstore"))}async addDocuments(e,c){return this.vectorStore.addDocuments(e,c)}}class VectorStore extends Serializable{constructor(e,c){super(c),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","vectorstores",this._vectorstoreType()]}),Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}async delete(e){throw new Error("Not implemented.")}async similaritySearch(e,c=4,d=void 0,h=void 0){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),c,d)).map(_=>_[0])}async similaritySearchWithScore(e,c=4,d=void 0,h=void 0){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),c,d)}static fromTexts(e,c,d,h){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,c,d){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,c,d,h,g,_){if(typeof e=="number")return new VectorStoreRetriever({vectorStore:this,k:e,filter:c,tags:[...h??[],this._vectorstoreType()],metadata:g,verbose:_,callbacks:d});{const _e={vectorStore:this,k:e==null?void 0:e.k,filter:e==null?void 0:e.filter,tags:[...(e==null?void 0:e.tags)??[],this._vectorstoreType()],metadata:e==null?void 0:e.metadata,verbose:e==null?void 0:e.verbose,callbacks:e==null?void 0:e.callbacks,searchType:e==null?void 0:e.searchType};return(e==null?void 0:e.searchType)==="mmr"?new VectorStoreRetriever({..._e,searchKwargs:e.searchKwargs}):new VectorStoreRetriever({..._e})}}}class SaveableVectorStore extends VectorStore{static load(e,c){throw new Error("Not implemented")}}class SynchronousInMemoryDocstore{constructor(e){Object.defineProperty(this,"_docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._docs=e??new Map}search(e){const c=this._docs.get(e);if(c)return c;throw new Error(`ID ${e} not found.`)}add(e){const c=[...this._docs.keys()],d=Object.keys(e).filter(h=>c.includes(h));if(d.length>0)throw new Error(`Tried to add ids that already exist: ${d}`);for(const[h,g]of Object.entries(e))this._docs.set(h,g)}}class HNSWLib extends SaveableVectorStore{_vectorstoreType(){return"hnswlib"}constructor(e,c){super(e,c),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docstore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._index=c.index,this.args=c,this.embeddings=e,this.docstore=(c==null?void 0:c.docstore)??new SynchronousInMemoryDocstore}async addDocuments(e){const c=e.map(({pageContent:d})=>d);return this.addVectors(await this.embeddings.embedDocuments(c),e)}static async getHierarchicalNSW(e){const{HierarchicalNSW:c}=await HNSWLib.imports();if(!e.space)throw new Error("hnswlib-node requires a space argument");if(e.numDimensions===void 0)throw new Error("hnswlib-node requires a numDimensions argument");return new c(e.space,e.numDimensions)}async initIndex(e){this._index||(this.args.numDimensions===void 0&&(this.args.numDimensions=e[0].length),this.index=await HNSWLib.getHierarchicalNSW(this.args)),this.index.getCurrentCount()||this.index.initIndex(e.length)}get index(){if(!this._index)throw new Error("Vector store not initialised yet. Try calling `addTexts` first.");return this._index}set index(e){this._index=e}async addVectors(e,c){if(e.length===0)return;if(await this.initIndex(e),e.length!==c.length)throw new Error("Vectors and metadatas must have the same length");if(e[0].length!==this.args.numDimensions)throw new Error(`Vectors must have the same length as the number of dimensions (${this.args.numDimensions})`);const d=this.index.getMaxElements(),h=this.index.getCurrentCount()+e.length;h>d&&this.index.resizeIndex(h);const g=this.index.getCurrentCount(),_={};for(let _e=0;_e<e.length;_e+=1)this.index.addPoint(e[_e],g+_e),_[g+_e]=c[_e];this.docstore.add(_)}async similaritySearchVectorWithScore(e,c,d){if(this.args.numDimensions&&!this._index&&await this.initIndex([[]]),e.length!==this.args.numDimensions)throw new Error(`Query vector must have the same length as the number of dimensions (${this.args.numDimensions})`);if(c>this.index.getCurrentCount()){const _=this.index.getCurrentCount();console.warn(`k (${c}) is greater than the number of elements in the index (${_}), setting k to ${_}`),c=_}const h=_=>{if(!d)return!0;const _e=this.docstore.search(String(_));return typeof _e!="string"?d(_e):!1},g=this.index.searchKnn(e,c,d?h:void 0);return g.neighbors.map((_,_e)=>[this.docstore.search(String(_)),g.distances[_e]])}async delete(e){const c=await __vitePreload(()=>Promise.resolve().then(()=>ONNX_NODE),void 0),d=await __vitePreload(()=>Promise.resolve().then(()=>ONNX_NODE),void 0);try{await c.access(d.join(e.directory,"hnswlib.index"))}catch{throw new Error(`Directory ${e.directory} does not contain a hnswlib.index file.`)}await Promise.all([await c.rm(d.join(e.directory,"hnswlib.index"),{force:!0}),await c.rm(d.join(e.directory,"docstore.json"),{force:!0}),await c.rm(d.join(e.directory,"args.json"),{force:!0})])}async save(e){const c=await __vitePreload(()=>Promise.resolve().then(()=>ONNX_NODE),void 0),d=await __vitePreload(()=>Promise.resolve().then(()=>ONNX_NODE),void 0);await c.mkdir(e,{recursive:!0}),await Promise.all([this.index.writeIndex(d.join(e,"hnswlib.index")),await c.writeFile(d.join(e,"args.json"),JSON.stringify(this.args)),await c.writeFile(d.join(e,"docstore.json"),JSON.stringify(Array.from(this.docstore._docs.entries())))])}static async load(e,c){const d=await __vitePreload(()=>Promise.resolve().then(()=>ONNX_NODE),void 0),h=await __vitePreload(()=>Promise.resolve().then(()=>ONNX_NODE),void 0),g=JSON.parse(await d.readFile(h.join(e,"args.json"),"utf8")),_=await HNSWLib.getHierarchicalNSW(g),[_e]=await Promise.all([d.readFile(h.join(e,"docstore.json"),"utf8").then(JSON.parse),_.readIndex(h.join(e,"hnswlib.index"))]);return g.docstore=new SynchronousInMemoryDocstore(new Map(_e)),g.index=_,new HNSWLib(c,g)}static async fromTexts(e,c,d,h){const g=[];for(let _=0;_<e.length;_+=1){const _e=Array.isArray(c)?c[_]:c,et=new Document({pageContent:e[_],metadata:_e});g.push(et)}return HNSWLib.fromDocuments(g,d,h)}static async fromDocuments(e,c,d){const h={docstore:d==null?void 0:d.docstore,space:"cosine"},g=new this(c,h);return await g.addDocuments(e),g}static async imports(){try{const{default:{HierarchicalNSW:e}}=await __vitePreload(()=>import("./__vite-optional-peer-dep_hnswlib-node_langchain-BIHI7g3E.js"),[]);return{HierarchicalNSW:e}}catch(e){throw new Error(`Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. \`npm install -S hnswlib-node\`.

Error: ${e==null?void 0:e.message}`)}}}function dispatchCallback(a,e){a&&a(e)}function reverseDictionary(a){return Object.fromEntries(Object.entries(a).map(([e,c])=>[c,e]))}function escapeRegExp$1(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Callable=class{constructor(){let a=function(...e){return a._call(...e)};return Object.setPrototypeOf(a,new.target.prototype)}_call(...a){throw Error("Must implement _call method in subclass")}};function isTypedArray(a){var e,c,d;return((d=(c=(e=a==null?void 0:a.prototype)==null?void 0:e.__proto__)==null?void 0:c.constructor)==null?void 0:d.name)==="TypedArray"}function isIntegralNumber(a){return Number.isInteger(a)||typeof a=="bigint"}function exists(a){return a!=null}function calculateDimensions(a){const e=[];let c=a;for(;Array.isArray(c);)e.push(c.length),c=c[0];return e}function pop(a,e,c=void 0){const d=a[e];if(d!==void 0)return delete a[e],d;if(c===void 0)throw Error(`Key ${e} does not exist in object.`);return c}function mergeArrays(...a){return Array.prototype.concat.apply([],a)}function product(...a){return a.reduce((e,c)=>e.flatMap(d=>c.map(h=>[d,h])))}function calculateReflectOffset(a,e){return Math.abs((a+e)%(2*e)-e)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min$1={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(a,e,c)=>{if(e&&typeof e.init=="function"&&typeof e.createSessionHandler=="function"){const d=backends[a];if(d===void 0)backends[a]={backend:e,priority:c};else{if(d.priority>c)return;if(d.priority===c&&d.backend!==e)throw new Error(`cannot register backend "${a}" using priority ${c}`)}if(c>=0){const h=backendsSortedByPriority.indexOf(a);h!==-1&&backendsSortedByPriority.splice(h,1);for(let g=0;g<backendsSortedByPriority.length;g++)if(backends[backendsSortedByPriority[g]].priority<=c){backendsSortedByPriority.splice(g,0,a);return}backendsSortedByPriority.push(a)}return}throw new TypeError("not a valid backend")},resolveBackend=async a=>{const e=a.length===0?backendsSortedByPriority:a,c=[];for(const d of e){const h=backends[d];if(h){if(h.initialized)return h.backend;if(h.aborted)continue;const g=!!h.initPromise;try{return g||(h.initPromise=h.backend.init()),await h.initPromise,h.initialized=!0,h.backend}catch(_){g||c.push({name:d,err:_}),h.aborted=!0}finally{delete h.initPromise}}}throw new Error(`no available backend found. ERR: ${c.map(d=>`[${d.name}] ${d.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=a=>{let e=1;for(let c=0;c<a.length;c++){const d=a[c];if(typeof d!="number"||!Number.isSafeInteger(d))throw new TypeError(`dims[${c}] must be an integer, got: ${d}`);if(d<0)throw new RangeError(`dims[${c}] must be a non-negative integer, got: ${d}`);e*=d}return e};let Tensor$2=class qn{constructor(e,c,d){let h,g,_;if(typeof e=="string")if(h=e,_=d,e==="string"){if(!Array.isArray(c))throw new TypeError("A string tensor's data must be a string array.");g=c}else{const et=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if(et===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(c))g=et.from(c);else if(c instanceof et)g=c;else throw new TypeError(`A ${h} tensor's data must be type of ${et}`)}else if(_=c,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const et=typeof e[0];if(et==="string")h="string",g=e;else if(et==="boolean")h="bool",g=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${et}.`)}else{const et=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if(et===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);h=et,g=e}if(_===void 0)_=[g.length];else if(!Array.isArray(_))throw new TypeError("A tensor's dims must be a number array");const _e=calculateSize(_);if(_e!==g.length)throw new Error(`Tensor's size(${_e}) does not match data length(${g.length}).`);this.dims=_,this.type=h,this.data=g,this.size=_e}static bufferToTensor(e,c){if(e===void 0)throw new Error("Image buffer must be defined");if(c.height===void 0||c.width===void 0)throw new Error("Image height and width must be defined");const{height:d,width:h}=c,g=c.norm;let _,_e;g===void 0||g.mean===void 0?_=255:_=g.mean,g===void 0||g.bias===void 0?_e=0:_e=g.bias;const et=c.bitmapFormat!==void 0?c.bitmapFormat:"RGBA",tt=c.tensorFormat!==void 0&&c.tensorFormat!==void 0?c.tensorFormat:"RGB",rt=d*h,$=tt==="RGBA"?new Float32Array(rt*4):new Float32Array(rt*3);let b=4,nt=0,st=1,ot=2,it=3,at=0,lt=rt,dt=rt*2,ht=-1;et==="RGB"&&(b=3,nt=0,st=1,ot=2,it=-1),tt==="RGBA"?ht=rt*3:tt==="RBG"?(at=0,dt=rt,lt=rt*2):tt==="BGR"&&(dt=0,lt=rt,at=rt*2);for(let mt=0;mt<rt;mt++,nt+=b,ot+=b,st+=b,it+=b)$[at++]=(e[nt]+_e)/_,$[lt++]=(e[st]+_e)/_,$[dt++]=(e[ot]+_e)/_,ht!==-1&&it!==-1&&($[ht++]=(e[it]+_e)/_);return tt==="RGBA"?new qn("float32",$,[1,4,d,h]):new qn("float32",$,[1,3,d,h])}static async fromImage(e,c){const d=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,h=typeof ImageData<"u"&&e instanceof ImageData,g=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,_=typeof String<"u"&&(e instanceof String||typeof e=="string");let _e,et={};if(d){const tt=document.createElement("canvas"),rt=tt.getContext("2d");if(rt!=null){let $=e.naturalHeight,b=e.naturalWidth;if(c!==void 0&&c.resizedHeight!==void 0&&c.resizedWidth!==void 0&&($=c.resizedHeight,b=c.resizedWidth),c!==void 0){if(et=c,c.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(et.tensorFormat="RGBA",c.height!==void 0&&c.height!==$)throw new Error("Image input config height doesn't match HTMLImageElement height");if(et.height=$,c.width!==void 0&&c.width!==b)throw new Error("Image input config width doesn't match HTMLImageElement width");et.width=b}else et.tensorFormat="RGBA",et.height=$,et.width=b;tt.width=b,tt.height=$,rt.drawImage(e,0,0,b,$),_e=rt.getImageData(0,0,b,$).data}else throw new Error("Can not access image data")}else if(h){const tt="RGBA";let rt,$;if(c!==void 0&&c.resizedWidth!==void 0&&c.resizedHeight!==void 0?(rt=c.resizedHeight,$=c.resizedWidth):(rt=e.height,$=e.width),c!==void 0){if(et=c,c.bitmapFormat!==void 0&&c.bitmapFormat!==tt)throw new Error("Image input config format must be RGBA for ImageData");et.bitmapFormat="RGBA"}else et.bitmapFormat="RGBA";if(et.height=rt,et.width=$,c!==void 0){const b=document.createElement("canvas");b.width=$,b.height=rt;const nt=b.getContext("2d");if(nt!=null)nt.putImageData(e,0,0),_e=nt.getImageData(0,0,$,rt).data;else throw new Error("Can not access image data")}else _e=e.data}else if(g){if(c===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(c.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const tt=document.createElement("canvas").getContext("2d");if(tt!=null){const rt=e.height,$=e.width;if(tt.drawImage(e,0,0,$,rt),_e=tt.getImageData(0,0,$,rt).data,c!==void 0){if(c.height!==void 0&&c.height!==rt)throw new Error("Image input config height doesn't match ImageBitmap height");if(et.height=rt,c.width!==void 0&&c.width!==$)throw new Error("Image input config width doesn't match ImageBitmap width");et.width=$}else et.height=rt,et.width=$;return qn.bufferToTensor(_e,et)}else throw new Error("Can not access image data")}else{if(_)return new Promise((tt,rt)=>{const $=document.createElement("canvas"),b=$.getContext("2d");if(!e||!b)return rt();const nt=new Image;nt.crossOrigin="Anonymous",nt.src=e,nt.onload=()=>{$.width=nt.width,$.height=nt.height,b.drawImage(nt,0,0,$.width,$.height);const st=b.getImageData(0,0,$.width,$.height);if(c!==void 0){if(c.height!==void 0&&c.height!==$.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(et.height=$.height,c.width!==void 0&&c.width!==$.width)throw new Error("Image input config width doesn't match ImageBitmap width");et.width=$.width}else et.height=$.height,et.width=$.width;tt(qn.bufferToTensor(st.data,et))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(_e!==void 0)return qn.bufferToTensor(_e,et);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var c,d;const h=document.createElement("canvas").getContext("2d");let g;if(h!=null){const _=this.dims[3],_e=this.dims[2],et=this.dims[1],tt=e!==void 0&&e.format!==void 0?e.format:"RGB",rt=e!==void 0&&((c=e.norm)===null||c===void 0?void 0:c.mean)!==void 0?e.norm.mean:255,$=e!==void 0&&((d=e.norm)===null||d===void 0?void 0:d.bias)!==void 0?e.norm.bias:0,b=_e*_;if(e!==void 0){if(e.height!==void 0&&e.height!==_e)throw new Error("Image output config height doesn't match tensor height");if(e.width!==void 0&&e.width!==_)throw new Error("Image output config width doesn't match tensor width");if(e.format!==void 0&&et===4&&e.format!=="RGBA"||et===3&&e.format!=="RGB"&&e.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const nt=4;let st=0,ot=1,it=2,at=3,lt=0,dt=b,ht=b*2,pt=-1;tt==="RGBA"?(lt=0,dt=b,ht=b*2,pt=b*3):tt==="RGB"?(lt=0,dt=b,ht=b*2):tt==="RBG"&&(lt=0,ht=b,dt=b*2),g=h.createImageData(_,_e);for(let mt=0;mt<_e*_;st+=nt,ot+=nt,it+=nt,at+=nt,mt++)g.data[st]=(this.data[lt++]-$)*rt,g.data[ot]=(this.data[dt++]-$)*rt,g.data[it]=(this.data[ht++]-$)*rt,g.data[at]=pt===-1?255:(this.data[pt++]-$)*rt}else throw new Error("Can not access image data");return g}reshape(e){return new qn(this.type,this.data,e)}};const Tensor$1=Tensor$2;let InferenceSession$2=class go{constructor(e){this.handler=e}async run(e,c,d){const h={};let g={};if(typeof e!="object"||e===null||e instanceof Tensor$1||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let _=!0;if(typeof c=="object"){if(c===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(c instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(c)){if(c.length===0)throw new TypeError("'fetches' cannot be an empty array.");_=!1;for(const tt of c){if(typeof tt!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(tt)===-1)throw new RangeError(`'fetches' contains invalid output name: ${tt}.`);h[tt]=null}if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else{let tt=!1;const rt=Object.getOwnPropertyNames(c);for(const $ of this.outputNames)if(rt.indexOf($)!==-1){const b=c[$];(b===null||b instanceof Tensor$1)&&(tt=!0,_=!1,h[$]=b)}if(tt){if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else g=c}}else if(typeof c<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const tt of this.inputNames)if(typeof e[tt]>"u")throw new Error(`input '${tt}' is missing in 'feeds'.`);if(_)for(const tt of this.outputNames)h[tt]=null;const _e=await this.handler.run(e,h,g),et={};for(const tt in _e)Object.hasOwnProperty.call(_e,tt)&&(et[tt]=new Tensor$1(_e[tt].type,_e[tt].data,_e[tt].dims));return et}static async create(e,c,d,h){let g,_={};if(typeof e=="string"){if(g=e,typeof c=="object"&&c!==null)_=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(g=e,typeof c=="object"&&c!==null)_=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){const $=e;let b=0,nt=e.byteLength;if(typeof c=="object"&&c!==null)_=c;else if(typeof c=="number"){if(b=c,!Number.isSafeInteger(b))throw new RangeError("'byteOffset' must be an integer.");if(b<0||b>=$.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${$.byteLength}).`);if(nt=e.byteLength-b,typeof d=="number"){if(nt=d,!Number.isSafeInteger(nt))throw new RangeError("'byteLength' must be an integer.");if(nt<=0||b+nt>$.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${$.byteLength-b}].`);if(typeof h=="object"&&h!==null)_=h;else if(typeof h<"u")throw new TypeError("'options' must be an object.")}else if(typeof d<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof c<"u")throw new TypeError("'options' must be an object.");g=new Uint8Array($,b,nt)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const et=(_.executionProviders||[]).map($=>typeof $=="string"?$:$.name),rt=await(await resolveBackend(et)).createSessionHandler(g,_);return new go(rt)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(a,e){module.exports=e(require$$0)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(a,e,c)=>{var d,h=(d=(d=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(g){function _(){return Et.buffer!=er&&Ur(Et.buffer),pr}function _e(){return Et.buffer!=er&&Ur(Et.buffer),_r}function et(){return Et.buffer!=er&&Ur(Et.buffer),Er}function tt(){return Et.buffer!=er&&Ur(Et.buffer),Tr}function rt(){return Et.buffer!=er&&Ur(Et.buffer),wr}var $,b,nt;g=g||{},$||($=g!==void 0?g:{}),$.ready=new Promise(function(vt,kt){b=vt,nt=kt});var st,ot,it,at,lt,dt,ht=Object.assign({},$),pt="./this.program",mt=(vt,kt)=>{throw kt},yt=typeof window=="object",xt=typeof importScripts=="function",gt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",bt=$.ENVIRONMENT_IS_PTHREAD||!1,jt="";function Mt(vt){return $.locateFile?$.locateFile(vt,jt):jt+vt}if(gt){let vt;jt=xt?c(908).dirname(jt)+"/":"//",dt=()=>{lt||(at=c(1384),lt=c(908))},st=function(kt,Lt){return dt(),kt=lt.normalize(kt),at.readFileSync(kt,Lt?void 0:"utf8")},it=kt=>((kt=st(kt,!0)).buffer||(kt=new Uint8Array(kt)),kt),ot=(kt,Lt,Jt)=>{dt(),kt=lt.normalize(kt),at.readFile(kt,function(or,lr){or?Jt(or):Lt(lr.buffer)})},1<process.argv.length&&(pt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(kt){if(!(kt instanceof fn))throw kt}),process.on("unhandledRejection",function(kt){throw kt}),mt=(kt,Lt)=>{if(ar())throw process.exitCode=kt,Lt;Lt instanceof fn||Rt("exiting due to exception: "+Lt),process.exit(kt)},$.inspect=function(){return"[Emscripten Module object]"};try{vt=c(9925)}catch(kt){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),kt}c.g.Worker=vt.Worker}else(yt||xt)&&(xt?jt=self.location.href:typeof document<"u"&&document.currentScript&&(jt=document.currentScript.src),d&&(jt=d),jt=jt.indexOf("blob:")!==0?jt.substr(0,jt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",gt||(st=vt=>{var kt=new XMLHttpRequest;return kt.open("GET",vt,!1),kt.send(null),kt.responseText},xt&&(it=vt=>{var kt=new XMLHttpRequest;return kt.open("GET",vt,!1),kt.responseType="arraybuffer",kt.send(null),new Uint8Array(kt.response)}),ot=(vt,kt,Lt)=>{var Jt=new XMLHttpRequest;Jt.open("GET",vt,!0),Jt.responseType="arraybuffer",Jt.onload=()=>{Jt.status==200||Jt.status==0&&Jt.response?kt(Jt.response):Lt()},Jt.onerror=Lt,Jt.send(null)}));gt&&typeof performance>"u"&&(c.g.performance=c(6953).performance);var Pt=console.log.bind(console),Tt=console.warn.bind(console);gt&&(dt(),Pt=vt=>at.writeSync(1,vt+`
`),Tt=vt=>at.writeSync(2,vt+`
`));var St,wt=$.print||Pt,Rt=$.printErr||Tt;Object.assign($,ht),ht=null,$.thisProgram&&(pt=$.thisProgram),$.quit&&(mt=$.quit),$.wasmBinary&&(St=$.wasmBinary);var At=$.noExitRuntime||!1;typeof WebAssembly!="object"&&vr("no native wasm support detected");var Et,zt,er,pr,_r,Er,Tr,wr,gr=!1,Pr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Nr(vt,kt,Lt){var Jt=(kt>>>=0)+Lt;for(Lt=kt;vt[Lt]&&!(Lt>=Jt);)++Lt;if(16<Lt-kt&&vt.buffer&&Pr)return Pr.decode(vt.buffer instanceof SharedArrayBuffer?vt.slice(kt,Lt):vt.subarray(kt,Lt));for(Jt="";kt<Lt;){var or=vt[kt++];if(128&or){var lr=63&vt[kt++];if((224&or)==192)Jt+=String.fromCharCode((31&or)<<6|lr);else{var br=63&vt[kt++];65536>(or=(240&or)==224?(15&or)<<12|lr<<6|br:(7&or)<<18|lr<<12|br<<6|63&vt[kt++])?Jt+=String.fromCharCode(or):(or-=65536,Jt+=String.fromCharCode(55296|or>>10,56320|1023&or))}}else Jt+=String.fromCharCode(or)}return Jt}function Ar(vt,kt){return(vt>>>=0)?Nr(_e(),vt,kt):""}function Rr(vt,kt,Lt,Jt){if(!(0<Jt))return 0;var or=Lt>>>=0;Jt=Lt+Jt-1;for(var lr=0;lr<vt.length;++lr){var br=vt.charCodeAt(lr);if(55296<=br&&57343>=br&&(br=65536+((1023&br)<<10)|1023&vt.charCodeAt(++lr)),127>=br){if(Lt>=Jt)break;kt[Lt++>>>0]=br}else{if(2047>=br){if(Lt+1>=Jt)break;kt[Lt++>>>0]=192|br>>6}else{if(65535>=br){if(Lt+2>=Jt)break;kt[Lt++>>>0]=224|br>>12}else{if(Lt+3>=Jt)break;kt[Lt++>>>0]=240|br>>18,kt[Lt++>>>0]=128|br>>12&63}kt[Lt++>>>0]=128|br>>6&63}kt[Lt++>>>0]=128|63&br}}return kt[Lt>>>0]=0,Lt-or}function Ir(vt){for(var kt=0,Lt=0;Lt<vt.length;++Lt){var Jt=vt.charCodeAt(Lt);127>=Jt?kt++:2047>=Jt?kt+=2:55296<=Jt&&57343>=Jt?(kt+=4,++Lt):kt+=3}return kt}function Ur(vt){er=vt,$.HEAP8=pr=new Int8Array(vt),$.HEAP16=new Int16Array(vt),$.HEAP32=Er=new Int32Array(vt),$.HEAPU8=_r=new Uint8Array(vt),$.HEAPU16=new Uint16Array(vt),$.HEAPU32=Tr=new Uint32Array(vt),$.HEAPF32=new Float32Array(vt),$.HEAPF64=wr=new Float64Array(vt)}bt&&(er=$.buffer);var Fr=$.INITIAL_MEMORY||16777216;if(bt)Et=$.wasmMemory,er=$.buffer;else if($.wasmMemory)Et=$.wasmMemory;else if(!((Et=new WebAssembly.Memory({initial:Fr/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw Rt("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),gt&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Et&&(er=Et.buffer),Fr=er.byteLength,Ur(er);var nn,en=[],on=[],Yt=[],rr=[];function ar(){return At||!1}function yr(){var vt=$.preRun.shift();en.unshift(vt)}var hr,mr=0,kr=null;function vr(vt){throw bt?postMessage({cmd:"onAbort",arg:vt}):$.onAbort&&$.onAbort(vt),Rt(vt="Aborted("+vt+")"),gr=!0,vt=new WebAssembly.RuntimeError(vt+". Build with -sASSERTIONS for more info."),nt(vt),vt}function rn(){return hr.startsWith("data:application/octet-stream;base64,")}function Qr(){var vt=hr;try{if(vt==hr&&St)return new Uint8Array(St);if(it)return it(vt);throw"both async and sync fetching of the wasm failed"}catch(kt){vr(kt)}}hr="ort-wasm-threaded.wasm",rn()||(hr=Mt(hr));var bn={};function fn(vt){this.name="ExitStatus",this.message="Program terminated with exit("+vt+")",this.status=vt}function En(vt){(vt=Mr.Vb[vt])||vr(),Mr.mc(vt)}function kn(vt){var kt=Mr.Cc();if(!kt)return 6;Mr.ac.push(kt),Mr.Vb[vt.Ub]=kt,kt.Ub=vt.Ub;var Lt={cmd:"run",start_routine:vt.Ic,arg:vt.zc,pthread_ptr:vt.Ub};return kt.$b=()=>{Lt.time=performance.now(),kt.postMessage(Lt,vt.Nc)},kt.loaded&&(kt.$b(),delete kt.$b),0}function ln(vt){if(bt)return Sr(1,1,vt);ar()||(Mr.oc(),$.onExit&&$.onExit(vt),gr=!0),mt(vt,new fn(vt))}function Tn(vt,kt){if(!kt&&bt)throw Xn(vt),"unwind";ar()||bt||(Us(),_n(Yt),Fs(0),Ps[1].length&&Cs(1,10),Ps[2].length&&Cs(2,10),Mr.oc()),ln(vt)}var Mr={Yb:[],ac:[],qc:[],Vb:{},fc:function(){bt&&Mr.Ec()},Pc:function(){},Ec:function(){Mr.receiveObjectTransfer=Mr.Gc,Mr.threadInitTLS=Mr.pc,Mr.setExitStatus=Mr.nc,At=!1},nc:function(){},oc:function(){for(var vt of Object.values(Mr.Vb))Mr.mc(vt);for(vt of Mr.Yb)vt.terminate();Mr.Yb=[]},mc:function(vt){var kt=vt.Ub;delete Mr.Vb[kt],Mr.Yb.push(vt),Mr.ac.splice(Mr.ac.indexOf(vt),1),vt.Ub=0,Is(kt)},Gc:function(){},pc:function(){Mr.qc.forEach(vt=>vt())},Fc:function(vt,kt){vt.onmessage=Lt=>{var Jt=(Lt=Lt.data).cmd;if(vt.Ub&&(Mr.Bc=vt.Ub),Lt.targetThread&&Lt.targetThread!=Ts()){var or=Mr.Vb[Lt.Qc];or?or.postMessage(Lt,Lt.transferList):Rt('Internal error! Worker sent a message "'+Jt+'" to target pthread '+Lt.targetThread+", but that thread no longer exists!")}else Jt==="processProxyingQueue"?tr(Lt.queue):Jt==="spawnThread"?kn(Lt):Jt==="cleanupThread"?En(Lt.thread):Jt==="killThread"?(Lt=Lt.thread,Jt=Mr.Vb[Lt],delete Mr.Vb[Lt],Jt.terminate(),Is(Lt),Mr.ac.splice(Mr.ac.indexOf(Jt),1),Jt.Ub=0):Jt==="cancelThread"?Mr.Vb[Lt.thread].postMessage({cmd:"cancel"}):Jt==="loaded"?(vt.loaded=!0,kt&&kt(vt),vt.$b&&(vt.$b(),delete vt.$b)):Jt==="print"?wt("Thread "+Lt.threadId+": "+Lt.text):Jt==="printErr"?Rt("Thread "+Lt.threadId+": "+Lt.text):Jt==="alert"?alert("Thread "+Lt.threadId+": "+Lt.text):Lt.target==="setimmediate"?vt.postMessage(Lt):Jt==="onAbort"?$.onAbort&&$.onAbort(Lt.arg):Jt&&Rt("worker sent an unknown command "+Jt);Mr.Bc=void 0},vt.onerror=Lt=>{throw Rt("worker sent an error! "+Lt.filename+":"+Lt.lineno+": "+Lt.message),Lt},gt&&(vt.on("message",function(Lt){vt.onmessage({data:Lt})}),vt.on("error",function(Lt){vt.onerror(Lt)}),vt.on("detachedExit",function(){})),vt.postMessage({cmd:"load",urlOrBlob:$.mainScriptUrlOrBlob||d,wasmMemory:Et,wasmModule:zt})},yc:function(){var vt=Mt("ort-wasm-threaded.worker.js");Mr.Yb.push(new Worker(vt))},Cc:function(){return Mr.Yb.length==0&&(Mr.yc(),Mr.Fc(Mr.Yb[0])),Mr.Yb.pop()}};function _n(vt){for(;0<vt.length;)vt.shift()($)}function Sn(vt){var kt=Gr();return vt=vt(),zr(kt),vt}function Xn(vt){if(bt)return Sr(2,0,vt);try{Tn(vt)}catch(kt){kt instanceof fn||kt=="unwind"||mt(1,kt)}}$.PThread=Mr,$.establishStackSpace=function(){var vt=Ts(),kt=et()[vt+44>>2>>>0];vt=et()[vt+48>>2>>>0],Gs(kt,kt-vt),zr(kt)};var $r=[];function Cr(vt){var kt=$r[vt];return kt||(vt>=$r.length&&($r.length=vt+1),$r[vt]=kt=nn.get(vt)),kt}$.invokeEntryPoint=function(vt,kt){vt=Cr(vt)(kt),ar()?Mr.nc(vt):Hs(vt)};var Xr,gn,hn=[],Lr=0,Dr=0;function Br(vt){this.Zb=vt,this.Sb=vt-24,this.xc=function(kt){tt()[this.Sb+4>>2>>>0]=kt},this.bc=function(){return tt()[this.Sb+4>>2>>>0]},this.wc=function(kt){tt()[this.Sb+8>>2>>>0]=kt},this.Dc=function(){return tt()[this.Sb+8>>2>>>0]},this.rc=function(){et()[this.Sb>>2>>>0]=0},this.hc=function(kt){kt=kt?1:0,_()[this.Sb+12>>0>>>0]=kt},this.uc=function(){return _()[this.Sb+12>>0>>>0]!=0},this.ic=function(kt){kt=kt?1:0,_()[this.Sb+13>>0>>>0]=kt},this.kc=function(){return _()[this.Sb+13>>0>>>0]!=0},this.fc=function(kt,Lt){this.cc(0),this.xc(kt),this.wc(Lt),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(et(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(et(),this.Sb>>2,1)===1},this.cc=function(kt){tt()[this.Sb+16>>2>>>0]=kt},this.tc=function(){return tt()[this.Sb+16>>2>>>0]},this.vc=function(){if(qs(this.bc()))return tt()[this.Zb>>2>>>0];var kt=this.tc();return kt!==0?kt:this.Zb}}function ls(vt){return Ls(new Br(vt).Sb)}function Gn(vt,kt,Lt,Jt){return bt?Sr(3,1,vt,kt,Lt,Jt):cs(vt,kt,Lt,Jt)}function cs(vt,kt,Lt,Jt){if(typeof SharedArrayBuffer>"u")return Rt("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var or=[];return bt&&or.length===0?Gn(vt,kt,Lt,Jt):(vt={Ic:Lt,Ub:vt,zc:Jt,Nc:or},bt?(vt.Oc="spawnThread",postMessage(vt,or),0):kn(vt))}function us(vt,kt,Lt){return bt?Sr(4,1,vt,kt,Lt):0}function ds(vt,kt){if(bt)return Sr(5,1,vt,kt)}function ps(vt,kt){if(bt)return Sr(6,1,vt,kt)}function fs(vt,kt,Lt){if(bt)return Sr(7,1,vt,kt,Lt)}function hs(vt,kt,Lt){return bt?Sr(8,1,vt,kt,Lt):0}function ms(vt,kt){if(bt)return Sr(9,1,vt,kt)}function gs(vt,kt,Lt){if(bt)return Sr(10,1,vt,kt,Lt)}function ys(vt,kt,Lt,Jt){if(bt)return Sr(11,1,vt,kt,Lt,Jt)}function xs(vt,kt,Lt,Jt){if(bt)return Sr(12,1,vt,kt,Lt,Jt)}function bs(vt,kt,Lt,Jt){if(bt)return Sr(13,1,vt,kt,Lt,Jt)}function _s(vt){if(bt)return Sr(14,1,vt)}function Nt(vt,kt){if(bt)return Sr(15,1,vt,kt)}function Bt(vt,kt,Lt){if(bt)return Sr(16,1,vt,kt,Lt)}function tr(vt){Atomics.store(et(),vt>>2,1),Ts()&&zs(vt),Atomics.compareExchange(et(),vt>>2,1,0)}function sr(vt){return tt()[vt>>>2]+4294967296*et()[vt+4>>>2]}function ir(vt,kt,Lt,Jt,or,lr){return bt?Sr(17,1,vt,kt,Lt,Jt,or,lr):-52}function dr(vt,kt,Lt,Jt,or,lr){if(bt)return Sr(18,1,vt,kt,Lt,Jt,or,lr)}function xr(vt){var kt=Ir(vt)+1,Lt=Rs(kt);return Lt&&Rr(vt,_(),Lt,kt),Lt}function Or(vt,kt,Lt){function Jt(Kr){return(Kr=Kr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Kr[1]:"GMT"}if(bt)return Sr(19,1,vt,kt,Lt);var or=new Date().getFullYear(),lr=new Date(or,0,1),br=new Date(or,6,1);or=lr.getTimezoneOffset();var jr=br.getTimezoneOffset(),Wr=Math.max(or,jr);et()[vt>>2>>>0]=60*Wr,et()[kt>>2>>>0]=+(or!=jr),vt=Jt(lr),kt=Jt(br),vt=xr(vt),kt=xr(kt),jr<or?(tt()[Lt>>2>>>0]=vt,tt()[Lt+4>>2>>>0]=kt):(tt()[Lt>>2>>>0]=kt,tt()[Lt+4>>2>>>0]=vt)}function Sr(vt,kt){var Lt=arguments.length-2,Jt=arguments;return Sn(()=>{for(var or=Os(8*Lt),lr=or>>3,br=0;br<Lt;br++){var jr=Jt[2+br];rt()[lr+br>>>0]=jr}return Vs(vt,Lt,or,kt)})}$.executeNotifiedProxyingQueue=tr,gn=gt?()=>{var vt=process.hrtime();return 1e3*vt[0]+vt[1]/1e6}:bt?()=>performance.now()-$.__performance_now_clock_drift:()=>performance.now();var Vr,tn=[],mn={};function pn(){if(!Vr){var vt,kt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:pt||"./this.program"};for(vt in mn)mn[vt]===void 0?delete kt[vt]:kt[vt]=mn[vt];var Lt=[];for(vt in kt)Lt.push(vt+"="+kt[vt]);Vr=Lt}return Vr}function cr(vt,kt){if(bt)return Sr(20,1,vt,kt);var Lt=0;return pn().forEach(function(Jt,or){var lr=kt+Lt;for(or=tt()[vt+4*or>>2>>>0]=lr,lr=0;lr<Jt.length;++lr)_()[or++>>0>>>0]=Jt.charCodeAt(lr);_()[or>>0>>>0]=0,Lt+=Jt.length+1}),0}function Yr(vt,kt){if(bt)return Sr(21,1,vt,kt);var Lt=pn();tt()[vt>>2>>>0]=Lt.length;var Jt=0;return Lt.forEach(function(or){Jt+=or.length+1}),tt()[kt>>2>>>0]=Jt,0}function sn(vt){return bt?Sr(22,1,vt):52}function Pn(vt,kt,Lt,Jt){return bt?Sr(23,1,vt,kt,Lt,Jt):52}function $n(vt,kt,Lt,Jt,or){return bt?Sr(24,1,vt,kt,Lt,Jt,or):70}var Ps=[null,[],[]];function Cs(vt,kt){var Lt=Ps[vt];kt===0||kt===10?((vt===1?wt:Rt)(Nr(Lt,0)),Lt.length=0):Lt.push(kt)}function Ns(vt,kt,Lt,Jt){if(bt)return Sr(25,1,vt,kt,Lt,Jt);for(var or=0,lr=0;lr<Lt;lr++){var br=tt()[kt>>2>>>0],jr=tt()[kt+4>>2>>>0];kt+=8;for(var Wr=0;Wr<jr;Wr++)Cs(vt,_e()[br+Wr>>>0]);or+=jr}return tt()[Jt>>2>>>0]=or,0}var wn=0;function Es(vt){return vt%4==0&&(vt%100!=0||vt%400==0)}var Ms=[31,29,31,30,31,30,31,31,30,31,30,31],$s=[31,28,31,30,31,30,31,31,30,31,30,31];function Ds(vt,kt,Lt,Jt){function or(ur,Zr,an){for(ur=typeof ur=="number"?ur.toString():ur||"";ur.length<Zr;)ur=an[0]+ur;return ur}function lr(ur,Zr){return or(ur,Zr,"0")}function br(ur,Zr){function an(Qn){return 0>Qn?-1:0<Qn?1:0}var Dn;return(Dn=an(ur.getFullYear()-Zr.getFullYear()))===0&&(Dn=an(ur.getMonth()-Zr.getMonth()))===0&&(Dn=an(ur.getDate()-Zr.getDate())),Dn}function jr(ur){switch(ur.getDay()){case 0:return new Date(ur.getFullYear()-1,11,29);case 1:return ur;case 2:return new Date(ur.getFullYear(),0,3);case 3:return new Date(ur.getFullYear(),0,2);case 4:return new Date(ur.getFullYear(),0,1);case 5:return new Date(ur.getFullYear()-1,11,31);case 6:return new Date(ur.getFullYear()-1,11,30)}}function Wr(ur){var Zr=ur.Wb;for(ur=new Date(new Date(ur.Xb+1900,0,1).getTime());0<Zr;){var an=ur.getMonth(),Dn=(Es(ur.getFullYear())?Ms:$s)[an];if(!(Zr>Dn-ur.getDate())){ur.setDate(ur.getDate()+Zr);break}Zr-=Dn-ur.getDate()+1,ur.setDate(1),11>an?ur.setMonth(an+1):(ur.setMonth(0),ur.setFullYear(ur.getFullYear()+1))}return an=new Date(ur.getFullYear()+1,0,4),Zr=jr(new Date(ur.getFullYear(),0,4)),an=jr(an),0>=br(Zr,ur)?0>=br(an,ur)?ur.getFullYear()+1:ur.getFullYear():ur.getFullYear()-1}var Kr=et()[Jt+40>>2>>>0];for(var un in Jt={Lc:et()[Jt>>2>>>0],Kc:et()[Jt+4>>2>>>0],dc:et()[Jt+8>>2>>>0],jc:et()[Jt+12>>2>>>0],ec:et()[Jt+16>>2>>>0],Xb:et()[Jt+20>>2>>>0],Tb:et()[Jt+24>>2>>>0],Wb:et()[Jt+28>>2>>>0],Rc:et()[Jt+32>>2>>>0],Jc:et()[Jt+36>>2>>>0],Mc:Kr?Ar(Kr):""},Lt=Ar(Lt),Kr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Lt=Lt.replace(new RegExp(un,"g"),Kr[un]);var On="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Cn="January February March April May June July August September October November December".split(" ");for(un in Kr={"%a":function(ur){return On[ur.Tb].substring(0,3)},"%A":function(ur){return On[ur.Tb]},"%b":function(ur){return Cn[ur.ec].substring(0,3)},"%B":function(ur){return Cn[ur.ec]},"%C":function(ur){return lr((ur.Xb+1900)/100|0,2)},"%d":function(ur){return lr(ur.jc,2)},"%e":function(ur){return or(ur.jc,2," ")},"%g":function(ur){return Wr(ur).toString().substring(2)},"%G":function(ur){return Wr(ur)},"%H":function(ur){return lr(ur.dc,2)},"%I":function(ur){return(ur=ur.dc)==0?ur=12:12<ur&&(ur-=12),lr(ur,2)},"%j":function(ur){for(var Zr=0,an=0;an<=ur.ec-1;Zr+=(Es(ur.Xb+1900)?Ms:$s)[an++]);return lr(ur.jc+Zr,3)},"%m":function(ur){return lr(ur.ec+1,2)},"%M":function(ur){return lr(ur.Kc,2)},"%n":function(){return`
`},"%p":function(ur){return 0<=ur.dc&&12>ur.dc?"AM":"PM"},"%S":function(ur){return lr(ur.Lc,2)},"%t":function(){return"	"},"%u":function(ur){return ur.Tb||7},"%U":function(ur){return lr(Math.floor((ur.Wb+7-ur.Tb)/7),2)},"%V":function(ur){var Zr=Math.floor((ur.Wb+7-(ur.Tb+6)%7)/7);if(2>=(ur.Tb+371-ur.Wb-2)%7&&Zr++,Zr)Zr==53&&((an=(ur.Tb+371-ur.Wb)%7)==4||an==3&&Es(ur.Xb)||(Zr=1));else{Zr=52;var an=(ur.Tb+7-ur.Wb-1)%7;(an==4||an==5&&Es(ur.Xb%400-1))&&Zr++}return lr(Zr,2)},"%w":function(ur){return ur.Tb},"%W":function(ur){return lr(Math.floor((ur.Wb+7-(ur.Tb+6)%7)/7),2)},"%y":function(ur){return(ur.Xb+1900).toString().substring(2)},"%Y":function(ur){return ur.Xb+1900},"%z":function(ur){var Zr=0<=(ur=ur.Jc);return ur=Math.abs(ur)/60,(Zr?"+":"-")+("0000"+(ur/60*100+ur%60)).slice(-4)},"%Z":function(ur){return ur.Mc},"%%":function(){return"%"}},Lt=Lt.replace(/%%/g,"\0\0"),Kr)Lt.includes(un)&&(Lt=Lt.replace(new RegExp(un,"g"),Kr[un](Jt)));return un=function(ur){var Zr=Array(Ir(ur)+1);return Rr(ur,Zr,0,Zr.length),Zr}(Lt=Lt.replace(/\0\0/g,"%")),un.length>kt?0:(function(ur,Zr){_().set(ur,Zr>>>0)}(un,vt),un.length-1)}Mr.fc();var yo=[null,ln,Xn,Gn,us,ds,ps,fs,hs,ms,gs,ys,xs,bs,_s,Nt,Bt,ir,dr,Or,cr,Yr,sn,Pn,$n,Ns],xo={b:function(vt){return Rs(vt+24)+24},n:function(vt){return(vt=new Br(vt)).uc()||(vt.hc(!0),Lr--),vt.ic(!1),hn.push(vt),vt.sc(),vt.vc()},ma:function(vt){throw Rt("Unexpected exception thrown, this is not properly supported - aborting"),gr=!0,vt},x:function(){qr(0);var vt=hn.pop();if(vt.Hc()&&!vt.kc()){var kt=vt.Dc();kt&&Cr(kt)(vt.Zb),ls(vt.Zb)}Dr=0},e:function(){var vt=Dr;if(!vt)return wn=0;var kt=new Br(vt);kt.cc(vt);var Lt=kt.bc();if(!Lt)return wn=0,vt;for(var Jt=Array.prototype.slice.call(arguments),or=0;or<Jt.length;or++){var lr=Jt[or];if(lr===0||lr===Lt)break;if(As(lr,Lt,kt.Sb+16))return wn=lr,vt}return wn=Lt,vt},l:function(){var vt=Dr;if(!vt)return wn=0;var kt=new Br(vt);kt.cc(vt);var Lt=kt.bc();if(!Lt)return wn=0,vt;for(var Jt=Array.prototype.slice.call(arguments),or=0;or<Jt.length;or++){var lr=Jt[or];if(lr===0||lr===Lt)break;if(As(lr,Lt,kt.Sb+16))return wn=lr,vt}return wn=Lt,vt},h:function(){var vt=Dr;if(!vt)return wn=0;var kt=new Br(vt);kt.cc(vt);var Lt=kt.bc();if(!Lt)return wn=0,vt;for(var Jt=Array.prototype.slice.call(arguments),or=0;or<Jt.length;or++){var lr=Jt[or];if(lr===0||lr===Lt)break;if(As(lr,Lt,kt.Sb+16))return wn=lr,vt}return wn=Lt,vt},t:ls,M:function(){var vt=hn.pop();vt||vr("no exception to throw");var kt=vt.Zb;throw vt.kc()||(hn.push(vt),vt.ic(!0),vt.hc(!1),Lr++),Dr=kt,kt},c:function(vt,kt,Lt){throw new Br(vt).fc(kt,Lt),Dr=vt,Lr++,vt},pa:function(){return Lr},Fa:function(vt){Bs(vt,!xt,1,!yt),Mr.pc()},T:function(vt){bt?postMessage({cmd:"cleanupThread",thread:vt}):En(vt)},xa:cs,j:function(vt){throw Dr||(Dr=vt),vt},H:us,Ma:ds,ua:ps,wa:fs,oa:hs,Ka:ms,Ca:gs,Ja:ys,V:xs,va:bs,sa:_s,La:Nt,ta:Bt,Ta:function(){},X:function(){vr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){vr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(vt,kt,Lt,Jt){if(vt==kt)setTimeout(()=>tr(Jt));else if(bt)postMessage({targetThread:vt,cmd:"processProxyingQueue",queue:Jt});else{if(!(vt=Mr.Vb[vt]))return;vt.postMessage({cmd:"processProxyingQueue",queue:Jt})}return 1},Ea:function(){return-1},Pa:function(vt,kt){vt=new Date(1e3*sr(vt)),et()[kt>>2>>>0]=vt.getUTCSeconds(),et()[kt+4>>2>>>0]=vt.getUTCMinutes(),et()[kt+8>>2>>>0]=vt.getUTCHours(),et()[kt+12>>2>>>0]=vt.getUTCDate(),et()[kt+16>>2>>>0]=vt.getUTCMonth(),et()[kt+20>>2>>>0]=vt.getUTCFullYear()-1900,et()[kt+24>>2>>>0]=vt.getUTCDay(),vt=(vt.getTime()-Date.UTC(vt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,et()[kt+28>>2>>>0]=vt},Qa:function(vt,kt){vt=new Date(1e3*sr(vt)),et()[kt>>2>>>0]=vt.getSeconds(),et()[kt+4>>2>>>0]=vt.getMinutes(),et()[kt+8>>2>>>0]=vt.getHours(),et()[kt+12>>2>>>0]=vt.getDate(),et()[kt+16>>2>>>0]=vt.getMonth(),et()[kt+20>>2>>>0]=vt.getFullYear()-1900,et()[kt+24>>2>>>0]=vt.getDay();var Lt=new Date(vt.getFullYear(),0,1),Jt=(vt.getTime()-Lt.getTime())/864e5|0;et()[kt+28>>2>>>0]=Jt,et()[kt+36>>2>>>0]=-60*vt.getTimezoneOffset(),Jt=new Date(vt.getFullYear(),6,1).getTimezoneOffset(),vt=0|(Jt!=(Lt=Lt.getTimezoneOffset())&&vt.getTimezoneOffset()==Math.min(Lt,Jt)),et()[kt+32>>2>>>0]=vt},Ra:function(vt){var kt=new Date(et()[vt+20>>2>>>0]+1900,et()[vt+16>>2>>>0],et()[vt+12>>2>>>0],et()[vt+8>>2>>>0],et()[vt+4>>2>>>0],et()[vt>>2>>>0],0),Lt=et()[vt+32>>2>>>0],Jt=kt.getTimezoneOffset(),or=new Date(kt.getFullYear(),0,1),lr=new Date(kt.getFullYear(),6,1).getTimezoneOffset(),br=or.getTimezoneOffset(),jr=Math.min(br,lr);return 0>Lt?et()[vt+32>>2>>>0]=+(lr!=br&&jr==Jt):0<Lt!=(jr==Jt)&&(lr=Math.max(br,lr),kt.setTime(kt.getTime()+6e4*((0<Lt?jr:lr)-Jt))),et()[vt+24>>2>>>0]=kt.getDay(),Lt=(kt.getTime()-or.getTime())/864e5|0,et()[vt+28>>2>>>0]=Lt,et()[vt>>2>>>0]=kt.getSeconds(),et()[vt+4>>2>>>0]=kt.getMinutes(),et()[vt+8>>2>>>0]=kt.getHours(),et()[vt+12>>2>>>0]=kt.getDate(),et()[vt+16>>2>>>0]=kt.getMonth(),kt.getTime()/1e3|0},Aa:ir,Ba:dr,Sa:function vt(kt,Lt,Jt){vt.Ac||(vt.Ac=!0,Or(kt,Lt,Jt))},y:function(){vr("")},U:function(){if(!gt&&!xt){var vt="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";Xr||(Xr={}),Xr[vt]||(Xr[vt]=1,gt&&(vt="warning: "+vt),Rt(vt))}},ra:function(){return 4294901760},B:gn,Ia:function(vt,kt,Lt){_e().copyWithin(vt>>>0,kt>>>0,kt+Lt>>>0)},F:function(){return gt?c(3993).cpus().length:navigator.hardwareConcurrency},Da:function(vt,kt,Lt){tn.length=kt,Lt>>=3;for(var Jt=0;Jt<kt;Jt++)tn[Jt]=rt()[Lt+Jt>>>0];return(0>vt?bn[-vt-1]:yo[vt]).apply(null,tn)},qa:function(vt){var kt=_e().length;if((vt>>>=0)<=kt||4294901760<vt)return!1;for(var Lt=1;4>=Lt;Lt*=2){var Jt=kt*(1+.2/Lt);Jt=Math.min(Jt,vt+100663296);var or=Math;Jt=Math.max(vt,Jt),or=or.min.call(or,4294901760,Jt+(65536-Jt%65536)%65536);e:{try{Et.grow(or-er.byteLength+65535>>>16),Ur(Et.buffer);var lr=1;break e}catch{}lr=void 0}if(lr)return!0}return!1},Na:function(){throw"unwind"},Ga:cr,Ha:Yr,J:Tn,I:sn,S:Pn,ga:$n,R:Ns,d:function(){return wn},na:function vt(kt,Lt){vt.lc||(vt.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var or=new Uint8Array(1);return()=>(crypto.getRandomValues(or),or[0])}if(gt)try{var lr=c(Object(function(){var br=new Error("Cannot find module 'crypto'");throw br.code="MODULE_NOT_FOUND",br}()));return()=>lr.randomBytes(1)[0]}catch{}return()=>vr("randomDevice")}());for(var Jt=0;Jt<Lt;Jt++)_()[kt+Jt>>0>>>0]=vt.lc();return 0},ia:function(vt,kt,Lt){var Jt=Gr();try{return Cr(vt)(kt,Lt)}catch(or){if(zr(Jt),or!==or+0)throw or;qr(1,0)}},ja:function(vt,kt,Lt){var Jt=Gr();try{return Cr(vt)(kt,Lt)}catch(or){if(zr(Jt),or!==or+0)throw or;qr(1,0)}},K:function(vt){var kt=Gr();try{return Cr(vt)()}catch(Lt){if(zr(kt),Lt!==Lt+0)throw Lt;qr(1,0)}},f:function(vt,kt){var Lt=Gr();try{return Cr(vt)(kt)}catch(Jt){if(zr(Lt),Jt!==Jt+0)throw Jt;qr(1,0)}},P:function(vt,kt,Lt){var Jt=Gr();try{return Cr(vt)(kt,Lt)}catch(or){if(zr(Jt),or!==or+0)throw or;qr(1,0)}},Q:function(vt,kt,Lt){var Jt=Gr();try{return Cr(vt)(kt,Lt)}catch(or){if(zr(Jt),or!==or+0)throw or;qr(1,0)}},k:function(vt,kt,Lt){var Jt=Gr();try{return Cr(vt)(kt,Lt)}catch(or){if(zr(Jt),or!==or+0)throw or;qr(1,0)}},p:function(vt,kt,Lt,Jt){var or=Gr();try{return Cr(vt)(kt,Lt,Jt)}catch(lr){if(zr(or),lr!==lr+0)throw lr;qr(1,0)}},q:function(vt,kt,Lt,Jt,or){var lr=Gr();try{return Cr(vt)(kt,Lt,Jt,or)}catch(br){if(zr(lr),br!==br+0)throw br;qr(1,0)}},N:function(vt,kt,Lt,Jt,or,lr){var br=Gr();try{return Cr(vt)(kt,Lt,Jt,or,lr)}catch(jr){if(zr(br),jr!==jr+0)throw jr;qr(1,0)}},s:function(vt,kt,Lt,Jt,or,lr){var br=Gr();try{return Cr(vt)(kt,Lt,Jt,or,lr)}catch(jr){if(zr(br),jr!==jr+0)throw jr;qr(1,0)}},w:function(vt,kt,Lt,Jt,or,lr,br){var jr=Gr();try{return Cr(vt)(kt,Lt,Jt,or,lr,br)}catch(Wr){if(zr(jr),Wr!==Wr+0)throw Wr;qr(1,0)}},L:function(vt,kt,Lt,Jt,or,lr,br,jr){var Wr=Gr();try{return Cr(vt)(kt,Lt,Jt,or,lr,br,jr)}catch(Kr){if(zr(Wr),Kr!==Kr+0)throw Kr;qr(1,0)}},E:function(vt,kt,Lt,Jt,or,lr,br,jr,Wr,Kr,un,On){var Cn=Gr();try{return Cr(vt)(kt,Lt,Jt,or,lr,br,jr,Wr,Kr,un,On)}catch(ur){if(zr(Cn),ur!==ur+0)throw ur;qr(1,0)}},aa:function(vt,kt,Lt,Jt,or,lr,br,jr){var Wr=Gr();try{return to(vt,kt,Lt,Jt,or,lr,br,jr)}catch(Kr){if(zr(Wr),Kr!==Kr+0)throw Kr;qr(1,0)}},_:function(vt,kt,Lt,Jt,or,lr,br){var jr=Gr();try{return Ks(vt,kt,Lt,Jt,or,lr,br)}catch(Wr){if(zr(jr),Wr!==Wr+0)throw Wr;qr(1,0)}},Z:function(vt,kt,Lt,Jt,or){var lr=Gr();try{return ro(vt,kt,Lt,Jt,or)}catch(br){if(zr(lr),br!==br+0)throw br;qr(1,0)}},ca:function(vt,kt,Lt,Jt){var or=Gr();try{return Js(vt,kt,Lt,Jt)}catch(lr){if(zr(or),lr!==lr+0)throw lr;qr(1,0)}},$:function(vt){var kt=Gr();try{return Ws(vt)}catch(Lt){if(zr(kt),Lt!==Lt+0)throw Lt;qr(1,0)}},ba:function(vt,kt){var Lt=Gr();try{return eo(vt,kt)}catch(Jt){if(zr(Lt),Jt!==Jt+0)throw Jt;qr(1,0)}},Y:function(vt,kt,Lt){var Jt=Gr();try{return Ys(vt,kt,Lt)}catch(or){if(zr(Jt),or!==or+0)throw or;qr(1,0)}},g:function(vt){var kt=Gr();try{Cr(vt)()}catch(Lt){if(zr(kt),Lt!==Lt+0)throw Lt;qr(1,0)}},r:function(vt,kt){var Lt=Gr();try{Cr(vt)(kt)}catch(Jt){if(zr(Lt),Jt!==Jt+0)throw Jt;qr(1,0)}},i:function(vt,kt,Lt){var Jt=Gr();try{Cr(vt)(kt,Lt)}catch(or){if(zr(Jt),or!==or+0)throw or;qr(1,0)}},ha:function(vt,kt,Lt,Jt){var or=Gr();try{Cr(vt)(kt,Lt,Jt)}catch(lr){if(zr(or),lr!==lr+0)throw lr;qr(1,0)}},m:function(vt,kt,Lt,Jt){var or=Gr();try{Cr(vt)(kt,Lt,Jt)}catch(lr){if(zr(or),lr!==lr+0)throw lr;qr(1,0)}},v:function(vt,kt,Lt,Jt,or){var lr=Gr();try{Cr(vt)(kt,Lt,Jt,or)}catch(br){if(zr(lr),br!==br+0)throw br;qr(1,0)}},u:function(vt,kt,Lt,Jt,or,lr){var br=Gr();try{Cr(vt)(kt,Lt,Jt,or,lr)}catch(jr){if(zr(br),jr!==jr+0)throw jr;qr(1,0)}},O:function(vt,kt,Lt,Jt,or,lr,br){var jr=Gr();try{Cr(vt)(kt,Lt,Jt,or,lr,br)}catch(Wr){if(zr(jr),Wr!==Wr+0)throw Wr;qr(1,0)}},A:function(vt,kt,Lt,Jt,or,lr,br,jr){var Wr=Gr();try{Cr(vt)(kt,Lt,Jt,or,lr,br,jr)}catch(Kr){if(zr(Wr),Kr!==Kr+0)throw Kr;qr(1,0)}},ka:function(vt,kt,Lt,Jt,or,lr,br,jr,Wr){var Kr=Gr();try{Cr(vt)(kt,Lt,Jt,or,lr,br,jr,Wr)}catch(un){if(zr(Kr),un!==un+0)throw un;qr(1,0)}},C:function(vt,kt,Lt,Jt,or,lr,br,jr,Wr,Kr,un){var On=Gr();try{Cr(vt)(kt,Lt,Jt,or,lr,br,jr,Wr,Kr,un)}catch(Cn){if(zr(On),Cn!==Cn+0)throw Cn;qr(1,0)}},D:function(vt,kt,Lt,Jt,or,lr,br,jr,Wr,Kr,un,On,Cn,ur,Zr,an){var Dn=Gr();try{Cr(vt)(kt,Lt,Jt,or,lr,br,jr,Wr,Kr,un,On,Cn,ur,Zr,an)}catch(Qn){if(zr(Dn),Qn!==Qn+0)throw Qn;qr(1,0)}},fa:function(vt,kt,Lt,Jt,or,lr,br,jr){var Wr=Gr();try{Zs(vt,kt,Lt,Jt,or,lr,br,jr)}catch(Kr){if(zr(Wr),Kr!==Kr+0)throw Kr;qr(1,0)}},da:function(vt,kt,Lt,Jt,or,lr,br,jr,Wr,Kr,un,On){var Cn=Gr();try{Qs(vt,kt,Lt,Jt,or,lr,br,jr,Wr,Kr,un,On)}catch(ur){if(zr(Cn),ur!==ur+0)throw ur;qr(1,0)}},ea:function(vt,kt,Lt,Jt,or,lr){var br=Gr();try{Xs(vt,kt,Lt,Jt,or,lr)}catch(jr){if(zr(br),jr!==jr+0)throw jr;qr(1,0)}},o:function(vt){return vt},a:Et||$.wasmMemory,G:function(vt){wn=vt},la:Ds,z:function(vt,kt,Lt,Jt){return Ds(vt,kt,Lt,Jt)}};(function(){function vt(or,lr){$.asm=or.exports,Mr.qc.push($.asm.sb),nn=$.asm.ub,on.unshift($.asm.Va),zt=lr,bt||(mr--,$.monitorRunDependencies&&$.monitorRunDependencies(mr),mr==0&&kr&&(or=kr,kr=null,or()))}function kt(or){vt(or.instance,or.module)}function Lt(or){return function(){if(!St&&(yt||xt)){if(typeof fetch=="function"&&!hr.startsWith("file://"))return fetch(hr,{credentials:"same-origin"}).then(function(lr){if(!lr.ok)throw"failed to load wasm binary file at '"+hr+"'";return lr.arrayBuffer()}).catch(function(){return Qr()});if(ot)return new Promise(function(lr,br){ot(hr,function(jr){lr(new Uint8Array(jr))},br)})}return Promise.resolve().then(function(){return Qr()})}().then(function(lr){return WebAssembly.instantiate(lr,Jt)}).then(function(lr){return lr}).then(or,function(lr){Rt("failed to asynchronously prepare wasm: "+lr),vr(lr)})}var Jt={a:xo};if(bt||(mr++,$.monitorRunDependencies&&$.monitorRunDependencies(mr)),$.instantiateWasm)try{return $.instantiateWasm(Jt,vt)}catch(or){return Rt("Module.instantiateWasm callback failed with error: "+or),!1}(St||typeof WebAssembly.instantiateStreaming!="function"||rn()||hr.startsWith("file://")||gt||typeof fetch!="function"?Lt(kt):fetch(hr,{credentials:"same-origin"}).then(function(or){return WebAssembly.instantiateStreaming(or,Jt).then(kt,function(lr){return Rt("wasm streaming compile failed: "+lr),Rt("falling back to ArrayBuffer instantiation"),Lt(kt)})})).catch(nt)})(),$.___wasm_call_ctors=function(){return($.___wasm_call_ctors=$.asm.Va).apply(null,arguments)},$._OrtInit=function(){return($._OrtInit=$.asm.Wa).apply(null,arguments)},$._OrtCreateSessionOptions=function(){return($._OrtCreateSessionOptions=$.asm.Xa).apply(null,arguments)},$._OrtAppendExecutionProvider=function(){return($._OrtAppendExecutionProvider=$.asm.Ya).apply(null,arguments)},$._OrtAddSessionConfigEntry=function(){return($._OrtAddSessionConfigEntry=$.asm.Za).apply(null,arguments)},$._OrtReleaseSessionOptions=function(){return($._OrtReleaseSessionOptions=$.asm._a).apply(null,arguments)},$._OrtCreateSession=function(){return($._OrtCreateSession=$.asm.$a).apply(null,arguments)},$._OrtReleaseSession=function(){return($._OrtReleaseSession=$.asm.ab).apply(null,arguments)},$._OrtGetInputCount=function(){return($._OrtGetInputCount=$.asm.bb).apply(null,arguments)},$._OrtGetOutputCount=function(){return($._OrtGetOutputCount=$.asm.cb).apply(null,arguments)},$._OrtGetInputName=function(){return($._OrtGetInputName=$.asm.db).apply(null,arguments)},$._OrtGetOutputName=function(){return($._OrtGetOutputName=$.asm.eb).apply(null,arguments)},$._OrtFree=function(){return($._OrtFree=$.asm.fb).apply(null,arguments)},$._OrtCreateTensor=function(){return($._OrtCreateTensor=$.asm.gb).apply(null,arguments)},$._OrtGetTensorData=function(){return($._OrtGetTensorData=$.asm.hb).apply(null,arguments)},$._OrtReleaseTensor=function(){return($._OrtReleaseTensor=$.asm.ib).apply(null,arguments)},$._OrtCreateRunOptions=function(){return($._OrtCreateRunOptions=$.asm.jb).apply(null,arguments)},$._OrtAddRunConfigEntry=function(){return($._OrtAddRunConfigEntry=$.asm.kb).apply(null,arguments)},$._OrtReleaseRunOptions=function(){return($._OrtReleaseRunOptions=$.asm.lb).apply(null,arguments)},$._OrtRun=function(){return($._OrtRun=$.asm.mb).apply(null,arguments)},$._OrtEndProfiling=function(){return($._OrtEndProfiling=$.asm.nb).apply(null,arguments)};var Ts=$._pthread_self=function(){return(Ts=$._pthread_self=$.asm.ob).apply(null,arguments)},Rs=$._malloc=function(){return(Rs=$._malloc=$.asm.pb).apply(null,arguments)},Ls=$._free=function(){return(Ls=$._free=$.asm.qb).apply(null,arguments)},Fs=$._fflush=function(){return(Fs=$._fflush=$.asm.rb).apply(null,arguments)};$.__emscripten_tls_init=function(){return($.__emscripten_tls_init=$.asm.sb).apply(null,arguments)};var Us=$.___funcs_on_exit=function(){return(Us=$.___funcs_on_exit=$.asm.tb).apply(null,arguments)},Bs=$.__emscripten_thread_init=function(){return(Bs=$.__emscripten_thread_init=$.asm.vb).apply(null,arguments)};$.__emscripten_thread_crashed=function(){return($.__emscripten_thread_crashed=$.asm.wb).apply(null,arguments)};var Ss,Vs=$._emscripten_run_in_main_runtime_thread_js=function(){return(Vs=$._emscripten_run_in_main_runtime_thread_js=$.asm.xb).apply(null,arguments)},zs=$.__emscripten_proxy_execute_task_queue=function(){return(zs=$.__emscripten_proxy_execute_task_queue=$.asm.yb).apply(null,arguments)},Is=$.__emscripten_thread_free_data=function(){return(Is=$.__emscripten_thread_free_data=$.asm.zb).apply(null,arguments)},Hs=$.__emscripten_thread_exit=function(){return(Hs=$.__emscripten_thread_exit=$.asm.Ab).apply(null,arguments)},qr=$._setThrew=function(){return(qr=$._setThrew=$.asm.Bb).apply(null,arguments)},Gs=$._emscripten_stack_set_limits=function(){return(Gs=$._emscripten_stack_set_limits=$.asm.Cb).apply(null,arguments)},Gr=$.stackSave=function(){return(Gr=$.stackSave=$.asm.Db).apply(null,arguments)},zr=$.stackRestore=function(){return(zr=$.stackRestore=$.asm.Eb).apply(null,arguments)},Os=$.stackAlloc=function(){return(Os=$.stackAlloc=$.asm.Fb).apply(null,arguments)},As=$.___cxa_can_catch=function(){return(As=$.___cxa_can_catch=$.asm.Gb).apply(null,arguments)},qs=$.___cxa_is_pointer_type=function(){return(qs=$.___cxa_is_pointer_type=$.asm.Hb).apply(null,arguments)},Ws=$.dynCall_j=function(){return(Ws=$.dynCall_j=$.asm.Ib).apply(null,arguments)},Ks=$.dynCall_iiiiij=function(){return(Ks=$.dynCall_iiiiij=$.asm.Jb).apply(null,arguments)},Ys=$.dynCall_jii=function(){return(Ys=$.dynCall_jii=$.asm.Kb).apply(null,arguments)},Zs=$.dynCall_viiiiij=function(){return(Zs=$.dynCall_viiiiij=$.asm.Lb).apply(null,arguments)},Xs=$.dynCall_vjji=function(){return(Xs=$.dynCall_vjji=$.asm.Mb).apply(null,arguments)},Qs=$.dynCall_viiijjjii=function(){return(Qs=$.dynCall_viiijjjii=$.asm.Nb).apply(null,arguments)},Js=$.dynCall_iij=function(){return(Js=$.dynCall_iij=$.asm.Ob).apply(null,arguments)},eo=$.dynCall_ji=function(){return(eo=$.dynCall_ji=$.asm.Pb).apply(null,arguments)},to=$.dynCall_iiiiiij=function(){return(to=$.dynCall_iiiiiij=$.asm.Qb).apply(null,arguments)},ro=$.dynCall_iiij=function(){return(ro=$.dynCall_iiij=$.asm.Rb).apply(null,arguments)};function no(){function vt(){if(!Ss&&(Ss=!0,$.calledRun=!0,!gr)&&(bt||_n(on),b($),$.onRuntimeInitialized&&$.onRuntimeInitialized(),!bt)){if($.postRun)for(typeof $.postRun=="function"&&($.postRun=[$.postRun]);$.postRun.length;){var kt=$.postRun.shift();rr.unshift(kt)}_n(rr)}}if(!(0<mr))if(bt)b($),bt||_n(on),postMessage({cmd:"loaded"});else{if($.preRun)for(typeof $.preRun=="function"&&($.preRun=[$.preRun]);$.preRun.length;)yr();_n(en),0<mr||($.setStatus?($.setStatus("Running..."),setTimeout(function(){setTimeout(function(){$.setStatus("")},1),vt()},1)):vt())}}if($.UTF8ToString=Ar,$.stringToUTF8=function(vt,kt,Lt){return Rr(vt,_e(),kt,Lt)},$.lengthBytesUTF8=Ir,$.keepRuntimeAlive=ar,$.wasmMemory=Et,$.stackSave=Gr,$.stackRestore=zr,$.stackAlloc=Os,$.ExitStatus=fn,$.PThread=Mr,kr=function vt(){Ss||no(),Ss||(kr=vt)},$.preInit)for(typeof $.preInit=="function"&&($.preInit=[$.preInit]);0<$.preInit.length;)$.preInit.pop()();return no(),g.ready});a.exports=h},932:(a,e,c)=>{var d,h=(d=(d=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(g){var _,_e,et;g=g||{},_||(_=g!==void 0?g:{}),_.ready=new Promise(function(Nt,Bt){_e=Nt,et=Bt});var tt,rt,$,b,nt,st,ot=Object.assign({},_),it="./this.program",at=(Nt,Bt)=>{throw Bt},lt=typeof window=="object",dt=typeof importScripts=="function",ht=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",pt="";ht?(pt=dt?c(908).dirname(pt)+"/":"//",st=()=>{nt||(b=c(1384),nt=c(908))},tt=function(Nt,Bt){return st(),Nt=nt.normalize(Nt),b.readFileSync(Nt,Bt?void 0:"utf8")},$=Nt=>((Nt=tt(Nt,!0)).buffer||(Nt=new Uint8Array(Nt)),Nt),rt=(Nt,Bt,tr)=>{st(),Nt=nt.normalize(Nt),b.readFile(Nt,function(sr,ir){sr?tr(sr):Bt(ir.buffer)})},1<process.argv.length&&(it=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Nt){if(!(Nt instanceof on))throw Nt}),process.on("unhandledRejection",function(Nt){throw Nt}),at=(Nt,Bt)=>{if(gt||0<Pr)throw process.exitCode=Nt,Bt;Bt instanceof on||xt("exiting due to exception: "+Bt),process.exit(Nt)},_.inspect=function(){return"[Emscripten Module object]"}):(lt||dt)&&(dt?pt=self.location.href:typeof document<"u"&&document.currentScript&&(pt=document.currentScript.src),d&&(pt=d),pt=pt.indexOf("blob:")!==0?pt.substr(0,pt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",tt=Nt=>{var Bt=new XMLHttpRequest;return Bt.open("GET",Nt,!1),Bt.send(null),Bt.responseText},dt&&($=Nt=>{var Bt=new XMLHttpRequest;return Bt.open("GET",Nt,!1),Bt.responseType="arraybuffer",Bt.send(null),new Uint8Array(Bt.response)}),rt=(Nt,Bt,tr)=>{var sr=new XMLHttpRequest;sr.open("GET",Nt,!0),sr.responseType="arraybuffer",sr.onload=()=>{sr.status==200||sr.status==0&&sr.response?Bt(sr.response):tr()},sr.onerror=tr,sr.send(null)});var mt,yt=_.print||console.log.bind(console),xt=_.printErr||console.warn.bind(console);Object.assign(_,ot),ot=null,_.thisProgram&&(it=_.thisProgram),_.quit&&(at=_.quit),_.wasmBinary&&(mt=_.wasmBinary);var gt=_.noExitRuntime||!1;typeof WebAssembly!="object"&&Ur("no native wasm support detected");var bt,jt,Mt,Pt,Tt,St,wt=!1,Rt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function At(Nt,Bt,tr){var sr=(Bt>>>=0)+tr;for(tr=Bt;Nt[tr]&&!(tr>=sr);)++tr;if(16<tr-Bt&&Nt.buffer&&Rt)return Rt.decode(Nt.subarray(Bt,tr));for(sr="";Bt<tr;){var ir=Nt[Bt++];if(128&ir){var dr=63&Nt[Bt++];if((224&ir)==192)sr+=String.fromCharCode((31&ir)<<6|dr);else{var xr=63&Nt[Bt++];65536>(ir=(240&ir)==224?(15&ir)<<12|dr<<6|xr:(7&ir)<<18|dr<<12|xr<<6|63&Nt[Bt++])?sr+=String.fromCharCode(ir):(ir-=65536,sr+=String.fromCharCode(55296|ir>>10,56320|1023&ir))}}else sr+=String.fromCharCode(ir)}return sr}function Et(Nt,Bt){return(Nt>>>=0)?At(Pt,Nt,Bt):""}function zt(Nt,Bt,tr,sr){if(!(0<sr))return 0;var ir=tr>>>=0;sr=tr+sr-1;for(var dr=0;dr<Nt.length;++dr){var xr=Nt.charCodeAt(dr);if(55296<=xr&&57343>=xr&&(xr=65536+((1023&xr)<<10)|1023&Nt.charCodeAt(++dr)),127>=xr){if(tr>=sr)break;Bt[tr++>>>0]=xr}else{if(2047>=xr){if(tr+1>=sr)break;Bt[tr++>>>0]=192|xr>>6}else{if(65535>=xr){if(tr+2>=sr)break;Bt[tr++>>>0]=224|xr>>12}else{if(tr+3>=sr)break;Bt[tr++>>>0]=240|xr>>18,Bt[tr++>>>0]=128|xr>>12&63}Bt[tr++>>>0]=128|xr>>6&63}Bt[tr++>>>0]=128|63&xr}}return Bt[tr>>>0]=0,tr-ir}function er(Nt){for(var Bt=0,tr=0;tr<Nt.length;++tr){var sr=Nt.charCodeAt(tr);127>=sr?Bt++:2047>=sr?Bt+=2:55296<=sr&&57343>=sr?(Bt+=4,++tr):Bt+=3}return Bt}function pr(){var Nt=bt.buffer;jt=Nt,_.HEAP8=Mt=new Int8Array(Nt),_.HEAP16=new Int16Array(Nt),_.HEAP32=Tt=new Int32Array(Nt),_.HEAPU8=Pt=new Uint8Array(Nt),_.HEAPU16=new Uint16Array(Nt),_.HEAPU32=St=new Uint32Array(Nt),_.HEAPF32=new Float32Array(Nt),_.HEAPF64=new Float64Array(Nt)}var _r,Er=[],Tr=[],wr=[],gr=[],Pr=0;function Nr(){var Nt=_.preRun.shift();Er.unshift(Nt)}var Ar,Rr=0,Ir=null;function Ur(Nt){throw _.onAbort&&_.onAbort(Nt),xt(Nt="Aborted("+Nt+")"),wt=!0,Nt=new WebAssembly.RuntimeError(Nt+". Build with -sASSERTIONS for more info."),et(Nt),Nt}function Fr(){return Ar.startsWith("data:application/octet-stream;base64,")}if(Ar="ort-wasm.wasm",!Fr()){var nn=Ar;Ar=_.locateFile?_.locateFile(nn,pt):pt+nn}function en(){var Nt=Ar;try{if(Nt==Ar&&mt)return new Uint8Array(mt);if($)return $(Nt);throw"both async and sync fetching of the wasm failed"}catch(Bt){Ur(Bt)}}function on(Nt){this.name="ExitStatus",this.message="Program terminated with exit("+Nt+")",this.status=Nt}function Yt(Nt){for(;0<Nt.length;)Nt.shift()(_)}var rr=[],ar=0,yr=0;function hr(Nt){this.Db=Nt,this.zb=Nt-24,this.Ub=function(Bt){St[this.zb+4>>2>>>0]=Bt},this.Eb=function(){return St[this.zb+4>>2>>>0]},this.Sb=function(Bt){St[this.zb+8>>2>>>0]=Bt},this.Wb=function(){return St[this.zb+8>>2>>>0]},this.Tb=function(){Tt[this.zb>>2>>>0]=0},this.Ib=function(Bt){Mt[this.zb+12>>0>>>0]=Bt?1:0},this.Pb=function(){return Mt[this.zb+12>>0>>>0]!=0},this.Jb=function(Bt){Mt[this.zb+13>>0>>>0]=Bt?1:0},this.Lb=function(){return Mt[this.zb+13>>0>>>0]!=0},this.Rb=function(Bt,tr){this.Fb(0),this.Ub(Bt),this.Sb(tr),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){Tt[this.zb>>2>>>0]+=1},this.Xb=function(){var Bt=Tt[this.zb>>2>>>0];return Tt[this.zb>>2>>>0]=Bt-1,Bt===1},this.Fb=function(Bt){St[this.zb+16>>2>>>0]=Bt},this.Ob=function(){return St[this.zb+16>>2>>>0]},this.Qb=function(){if(cs(this.Eb()))return St[this.Db>>2>>>0];var Bt=this.Ob();return Bt!==0?Bt:this.Db}}function mr(Nt){return Xr(new hr(Nt).zb)}var kr=[];function vr(Nt){var Bt=kr[Nt];return Bt||(Nt>=kr.length&&(kr.length=Nt+1),kr[Nt]=Bt=_r.get(Nt)),Bt}function rn(Nt){var Bt=er(Nt)+1,tr=Cr(Bt);return tr&&zt(Nt,Mt,tr,Bt),tr}var Qr={};function bn(){if(!fn){var Nt,Bt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:it||"./this.program"};for(Nt in Qr)Qr[Nt]===void 0?delete Bt[Nt]:Bt[Nt]=Qr[Nt];var tr=[];for(Nt in Bt)tr.push(Nt+"="+Bt[Nt]);fn=tr}return fn}var fn,En=[null,[],[]];function kn(Nt,Bt){var tr=En[Nt];Bt===0||Bt===10?((Nt===1?yt:xt)(At(tr,0)),tr.length=0):tr.push(Bt)}var ln=0;function Tn(Nt){return Nt%4==0&&(Nt%100!=0||Nt%400==0)}var Mr=[31,29,31,30,31,30,31,31,30,31,30,31],_n=[31,28,31,30,31,30,31,31,30,31,30,31];function Sn(Nt,Bt,tr,sr){function ir(cr,Yr,sn){for(cr=typeof cr=="number"?cr.toString():cr||"";cr.length<Yr;)cr=sn[0]+cr;return cr}function dr(cr,Yr){return ir(cr,Yr,"0")}function xr(cr,Yr){function sn($n){return 0>$n?-1:0<$n?1:0}var Pn;return(Pn=sn(cr.getFullYear()-Yr.getFullYear()))===0&&(Pn=sn(cr.getMonth()-Yr.getMonth()))===0&&(Pn=sn(cr.getDate()-Yr.getDate())),Pn}function Or(cr){switch(cr.getDay()){case 0:return new Date(cr.getFullYear()-1,11,29);case 1:return cr;case 2:return new Date(cr.getFullYear(),0,3);case 3:return new Date(cr.getFullYear(),0,2);case 4:return new Date(cr.getFullYear(),0,1);case 5:return new Date(cr.getFullYear()-1,11,31);case 6:return new Date(cr.getFullYear()-1,11,30)}}function Sr(cr){var Yr=cr.Bb;for(cr=new Date(new Date(cr.Cb+1900,0,1).getTime());0<Yr;){var sn=cr.getMonth(),Pn=(Tn(cr.getFullYear())?Mr:_n)[sn];if(!(Yr>Pn-cr.getDate())){cr.setDate(cr.getDate()+Yr);break}Yr-=Pn-cr.getDate()+1,cr.setDate(1),11>sn?cr.setMonth(sn+1):(cr.setMonth(0),cr.setFullYear(cr.getFullYear()+1))}return sn=new Date(cr.getFullYear()+1,0,4),Yr=Or(new Date(cr.getFullYear(),0,4)),sn=Or(sn),0>=xr(Yr,cr)?0>=xr(sn,cr)?cr.getFullYear()+1:cr.getFullYear():cr.getFullYear()-1}var Vr=Tt[sr+40>>2>>>0];for(var tn in sr={$b:Tt[sr>>2>>>0],Zb:Tt[sr+4>>2>>>0],Gb:Tt[sr+8>>2>>>0],Kb:Tt[sr+12>>2>>>0],Hb:Tt[sr+16>>2>>>0],Cb:Tt[sr+20>>2>>>0],Ab:Tt[sr+24>>2>>>0],Bb:Tt[sr+28>>2>>>0],bc:Tt[sr+32>>2>>>0],Yb:Tt[sr+36>>2>>>0],ac:Vr?Et(Vr):""},tr=Et(tr),Vr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})tr=tr.replace(new RegExp(tn,"g"),Vr[tn]);var mn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),pn="January February March April May June July August September October November December".split(" ");for(tn in Vr={"%a":function(cr){return mn[cr.Ab].substring(0,3)},"%A":function(cr){return mn[cr.Ab]},"%b":function(cr){return pn[cr.Hb].substring(0,3)},"%B":function(cr){return pn[cr.Hb]},"%C":function(cr){return dr((cr.Cb+1900)/100|0,2)},"%d":function(cr){return dr(cr.Kb,2)},"%e":function(cr){return ir(cr.Kb,2," ")},"%g":function(cr){return Sr(cr).toString().substring(2)},"%G":function(cr){return Sr(cr)},"%H":function(cr){return dr(cr.Gb,2)},"%I":function(cr){return(cr=cr.Gb)==0?cr=12:12<cr&&(cr-=12),dr(cr,2)},"%j":function(cr){for(var Yr=0,sn=0;sn<=cr.Hb-1;Yr+=(Tn(cr.Cb+1900)?Mr:_n)[sn++]);return dr(cr.Kb+Yr,3)},"%m":function(cr){return dr(cr.Hb+1,2)},"%M":function(cr){return dr(cr.Zb,2)},"%n":function(){return`
`},"%p":function(cr){return 0<=cr.Gb&&12>cr.Gb?"AM":"PM"},"%S":function(cr){return dr(cr.$b,2)},"%t":function(){return"	"},"%u":function(cr){return cr.Ab||7},"%U":function(cr){return dr(Math.floor((cr.Bb+7-cr.Ab)/7),2)},"%V":function(cr){var Yr=Math.floor((cr.Bb+7-(cr.Ab+6)%7)/7);if(2>=(cr.Ab+371-cr.Bb-2)%7&&Yr++,Yr)Yr==53&&((sn=(cr.Ab+371-cr.Bb)%7)==4||sn==3&&Tn(cr.Cb)||(Yr=1));else{Yr=52;var sn=(cr.Ab+7-cr.Bb-1)%7;(sn==4||sn==5&&Tn(cr.Cb%400-1))&&Yr++}return dr(Yr,2)},"%w":function(cr){return cr.Ab},"%W":function(cr){return dr(Math.floor((cr.Bb+7-(cr.Ab+6)%7)/7),2)},"%y":function(cr){return(cr.Cb+1900).toString().substring(2)},"%Y":function(cr){return cr.Cb+1900},"%z":function(cr){var Yr=0<=(cr=cr.Yb);return cr=Math.abs(cr)/60,(Yr?"+":"-")+("0000"+(cr/60*100+cr%60)).slice(-4)},"%Z":function(cr){return cr.ac},"%%":function(){return"%"}},tr=tr.replace(/%%/g,"\0\0"),Vr)tr.includes(tn)&&(tr=tr.replace(new RegExp(tn,"g"),Vr[tn](sr)));return tn=function(cr){var Yr=Array(er(cr)+1);return zt(cr,Yr,0,Yr.length),Yr}(tr=tr.replace(/\0\0/g,"%")),tn.length>Bt?0:(Mt.set(tn,Nt>>>0),tn.length-1)}var Xn={a:function(Nt){return Cr(Nt+24)+24},m:function(Nt){return(Nt=new hr(Nt)).Pb()||(Nt.Ib(!0),ar--),Nt.Jb(!1),rr.push(Nt),Nt.Nb(),Nt.Qb()},ia:function(Nt){throw xt("Unexpected exception thrown, this is not properly supported - aborting"),wt=!0,Nt},w:function(){Lr(0);var Nt=rr.pop();if(Nt.Xb()&&!Nt.Lb()){var Bt=Nt.Wb();Bt&&vr(Bt)(Nt.Db),mr(Nt.Db)}yr=0},d:function(){var Nt=yr;if(!Nt)return ln=0;var Bt=new hr(Nt);Bt.Fb(Nt);var tr=Bt.Eb();if(!tr)return ln=0,Nt;for(var sr=Array.prototype.slice.call(arguments),ir=0;ir<sr.length;ir++){var dr=sr[ir];if(dr===0||dr===tr)break;if(Gn(dr,tr,Bt.zb+16))return ln=dr,Nt}return ln=tr,Nt},k:function(){var Nt=yr;if(!Nt)return ln=0;var Bt=new hr(Nt);Bt.Fb(Nt);var tr=Bt.Eb();if(!tr)return ln=0,Nt;for(var sr=Array.prototype.slice.call(arguments),ir=0;ir<sr.length;ir++){var dr=sr[ir];if(dr===0||dr===tr)break;if(Gn(dr,tr,Bt.zb+16))return ln=dr,Nt}return ln=tr,Nt},g:function(){var Nt=yr;if(!Nt)return ln=0;var Bt=new hr(Nt);Bt.Fb(Nt);var tr=Bt.Eb();if(!tr)return ln=0,Nt;for(var sr=Array.prototype.slice.call(arguments),ir=0;ir<sr.length;ir++){var dr=sr[ir];if(dr===0||dr===tr)break;if(Gn(dr,tr,Bt.zb+16))return ln=dr,Nt}return ln=tr,Nt},s:mr,L:function(){var Nt=rr.pop();Nt||Ur("no exception to throw");var Bt=Nt.Db;throw Nt.Lb()||(rr.push(Nt),Nt.Jb(!0),Nt.Ib(!1),ar++),yr=Bt,Bt},b:function(Nt,Bt,tr){throw new hr(Nt).Rb(Bt,tr),yr=Nt,ar++,Nt},la:function(){return ar},i:function(Nt){throw yr||(yr=Nt),Nt},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){Ur("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){Ur("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(Nt,Bt){Nt=new Date(1e3*(St[Nt>>>2]+4294967296*Tt[Nt+4>>>2])),Tt[Bt>>2>>>0]=Nt.getUTCSeconds(),Tt[Bt+4>>2>>>0]=Nt.getUTCMinutes(),Tt[Bt+8>>2>>>0]=Nt.getUTCHours(),Tt[Bt+12>>2>>>0]=Nt.getUTCDate(),Tt[Bt+16>>2>>>0]=Nt.getUTCMonth(),Tt[Bt+20>>2>>>0]=Nt.getUTCFullYear()-1900,Tt[Bt+24>>2>>>0]=Nt.getUTCDay(),Tt[Bt+28>>2>>>0]=(Nt.getTime()-Date.UTC(Nt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(Nt,Bt){Nt=new Date(1e3*(St[Nt>>>2]+4294967296*Tt[Nt+4>>>2])),Tt[Bt>>2>>>0]=Nt.getSeconds(),Tt[Bt+4>>2>>>0]=Nt.getMinutes(),Tt[Bt+8>>2>>>0]=Nt.getHours(),Tt[Bt+12>>2>>>0]=Nt.getDate(),Tt[Bt+16>>2>>>0]=Nt.getMonth(),Tt[Bt+20>>2>>>0]=Nt.getFullYear()-1900,Tt[Bt+24>>2>>>0]=Nt.getDay();var tr=new Date(Nt.getFullYear(),0,1);Tt[Bt+28>>2>>>0]=(Nt.getTime()-tr.getTime())/864e5|0,Tt[Bt+36>>2>>>0]=-60*Nt.getTimezoneOffset();var sr=new Date(Nt.getFullYear(),6,1).getTimezoneOffset();tr=tr.getTimezoneOffset(),Tt[Bt+32>>2>>>0]=0|(sr!=tr&&Nt.getTimezoneOffset()==Math.min(tr,sr))},Fa:function(Nt){var Bt=new Date(Tt[Nt+20>>2>>>0]+1900,Tt[Nt+16>>2>>>0],Tt[Nt+12>>2>>>0],Tt[Nt+8>>2>>>0],Tt[Nt+4>>2>>>0],Tt[Nt>>2>>>0],0),tr=Tt[Nt+32>>2>>>0],sr=Bt.getTimezoneOffset(),ir=new Date(Bt.getFullYear(),0,1),dr=new Date(Bt.getFullYear(),6,1).getTimezoneOffset(),xr=ir.getTimezoneOffset(),Or=Math.min(xr,dr);return 0>tr?Tt[Nt+32>>2>>>0]=+(dr!=xr&&Or==sr):0<tr!=(Or==sr)&&(dr=Math.max(xr,dr),Bt.setTime(Bt.getTime()+6e4*((0<tr?Or:dr)-sr))),Tt[Nt+24>>2>>>0]=Bt.getDay(),Tt[Nt+28>>2>>>0]=(Bt.getTime()-ir.getTime())/864e5|0,Tt[Nt>>2>>>0]=Bt.getSeconds(),Tt[Nt+4>>2>>>0]=Bt.getMinutes(),Tt[Nt+8>>2>>>0]=Bt.getHours(),Tt[Nt+12>>2>>>0]=Bt.getDate(),Tt[Nt+16>>2>>>0]=Bt.getMonth(),Bt.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function Nt(Bt,tr,sr){Nt.Vb||(Nt.Vb=!0,function(ir,dr,xr){function Or(pn){return(pn=pn.toTimeString().match(/\(([A-Za-z ]+)\)$/))?pn[1]:"GMT"}var Sr=new Date().getFullYear(),Vr=new Date(Sr,0,1),tn=new Date(Sr,6,1);Sr=Vr.getTimezoneOffset();var mn=tn.getTimezoneOffset();Tt[ir>>2>>>0]=60*Math.max(Sr,mn),Tt[dr>>2>>>0]=+(Sr!=mn),ir=Or(Vr),dr=Or(tn),ir=rn(ir),dr=rn(dr),mn<Sr?(St[xr>>2>>>0]=ir,St[xr+4>>2>>>0]=dr):(St[xr>>2>>>0]=dr,St[xr+4>>2>>>0]=ir)}(Bt,tr,sr))},B:function(){Ur("")},ma:function(){return 4294901760},I:ht?()=>{var Nt=process.hrtime();return 1e3*Nt[0]+Nt[1]/1e6}:()=>performance.now(),xa:function(Nt,Bt,tr){Pt.copyWithin(Nt>>>0,Bt>>>0,Bt+tr>>>0)},G:function(Nt){var Bt=Pt.length;if(4294901760<(Nt>>>=0))return!1;for(var tr=1;4>=tr;tr*=2){var sr=Bt*(1+.2/tr);sr=Math.min(sr,Nt+100663296);var ir=Math;sr=Math.max(Nt,sr),ir=ir.min.call(ir,4294901760,sr+(65536-sr%65536)%65536);e:{try{bt.grow(ir-jt.byteLength+65535>>>16),pr();var dr=1;break e}catch{}dr=void 0}if(dr)return!0}return!1},va:function(Nt,Bt){var tr=0;return bn().forEach(function(sr,ir){var dr=Bt+tr;for(ir=St[Nt+4*ir>>2>>>0]=dr,dr=0;dr<sr.length;++dr)Mt[ir++>>0>>>0]=sr.charCodeAt(dr);Mt[ir>>0>>>0]=0,tr+=sr.length+1}),0},wa:function(Nt,Bt){var tr=bn();St[Nt>>2>>>0]=tr.length;var sr=0;return tr.forEach(function(ir){sr+=ir.length+1}),St[Bt>>2>>>0]=sr,0},ba:function(Nt){gt||0<Pr||(hn(),Yt(wr),gn(0),En[1].length&&kn(1,10),En[2].length&&kn(2,10)),gt||0<Pr||(_.onExit&&_.onExit(Nt),wt=!0),at(Nt,new on(Nt))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(Nt,Bt,tr,sr){for(var ir=0,dr=0;dr<tr;dr++){var xr=St[Bt>>2>>>0],Or=St[Bt+4>>2>>>0];Bt+=8;for(var Sr=0;Sr<Or;Sr++)kn(Nt,Pt[xr+Sr>>>0]);ir+=Or}return St[sr>>2>>>0]=ir,0},c:function(){return ln},ja:function Nt(Bt,tr){Nt.Mb||(Nt.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var ir=new Uint8Array(1);return()=>(crypto.getRandomValues(ir),ir[0])}if(ht)try{var dr=c(Object(function(){var xr=new Error("Cannot find module 'crypto'");throw xr.code="MODULE_NOT_FOUND",xr}()));return()=>dr.randomBytes(1)[0]}catch{}return()=>Ur("randomDevice")}());for(var sr=0;sr<tr;sr++)Mt[Bt+sr>>0>>>0]=Nt.Mb();return 0},ea:function(Nt,Bt,tr){var sr=Dr();try{return vr(Nt)(Bt,tr)}catch(ir){if(Br(sr),ir!==ir+0)throw ir;Lr(1,0)}},fa:function(Nt,Bt,tr){var sr=Dr();try{return vr(Nt)(Bt,tr)}catch(ir){if(Br(sr),ir!==ir+0)throw ir;Lr(1,0)}},J:function(Nt){var Bt=Dr();try{return vr(Nt)()}catch(tr){if(Br(Bt),tr!==tr+0)throw tr;Lr(1,0)}},e:function(Nt,Bt){var tr=Dr();try{return vr(Nt)(Bt)}catch(sr){if(Br(tr),sr!==sr+0)throw sr;Lr(1,0)}},N:function(Nt,Bt,tr){var sr=Dr();try{return vr(Nt)(Bt,tr)}catch(ir){if(Br(sr),ir!==ir+0)throw ir;Lr(1,0)}},O:function(Nt,Bt,tr){var sr=Dr();try{return vr(Nt)(Bt,tr)}catch(ir){if(Br(sr),ir!==ir+0)throw ir;Lr(1,0)}},j:function(Nt,Bt,tr){var sr=Dr();try{return vr(Nt)(Bt,tr)}catch(ir){if(Br(sr),ir!==ir+0)throw ir;Lr(1,0)}},o:function(Nt,Bt,tr,sr){var ir=Dr();try{return vr(Nt)(Bt,tr,sr)}catch(dr){if(Br(ir),dr!==dr+0)throw dr;Lr(1,0)}},p:function(Nt,Bt,tr,sr,ir){var dr=Dr();try{return vr(Nt)(Bt,tr,sr,ir)}catch(xr){if(Br(dr),xr!==xr+0)throw xr;Lr(1,0)}},M:function(Nt,Bt,tr,sr,ir,dr){var xr=Dr();try{return vr(Nt)(Bt,tr,sr,ir,dr)}catch(Or){if(Br(xr),Or!==Or+0)throw Or;Lr(1,0)}},r:function(Nt,Bt,tr,sr,ir,dr){var xr=Dr();try{return vr(Nt)(Bt,tr,sr,ir,dr)}catch(Or){if(Br(xr),Or!==Or+0)throw Or;Lr(1,0)}},v:function(Nt,Bt,tr,sr,ir,dr,xr){var Or=Dr();try{return vr(Nt)(Bt,tr,sr,ir,dr,xr)}catch(Sr){if(Br(Or),Sr!==Sr+0)throw Sr;Lr(1,0)}},K:function(Nt,Bt,tr,sr,ir,dr,xr,Or){var Sr=Dr();try{return vr(Nt)(Bt,tr,sr,ir,dr,xr,Or)}catch(Vr){if(Br(Sr),Vr!==Vr+0)throw Vr;Lr(1,0)}},D:function(Nt,Bt,tr,sr,ir,dr,xr,Or,Sr,Vr,tn,mn){var pn=Dr();try{return vr(Nt)(Bt,tr,sr,ir,dr,xr,Or,Sr,Vr,tn,mn)}catch(cr){if(Br(pn),cr!==cr+0)throw cr;Lr(1,0)}},X:function(Nt,Bt,tr,sr,ir,dr,xr,Or){var Sr=Dr();try{return xs(Nt,Bt,tr,sr,ir,dr,xr,Or)}catch(Vr){if(Br(Sr),Vr!==Vr+0)throw Vr;Lr(1,0)}},V:function(Nt,Bt,tr,sr,ir,dr,xr){var Or=Dr();try{return ds(Nt,Bt,tr,sr,ir,dr,xr)}catch(Sr){if(Br(Or),Sr!==Sr+0)throw Sr;Lr(1,0)}},U:function(Nt,Bt,tr,sr,ir){var dr=Dr();try{return bs(Nt,Bt,tr,sr,ir)}catch(xr){if(Br(dr),xr!==xr+0)throw xr;Lr(1,0)}},Z:function(Nt,Bt,tr,sr){var ir=Dr();try{return gs(Nt,Bt,tr,sr)}catch(dr){if(Br(ir),dr!==dr+0)throw dr;Lr(1,0)}},W:function(Nt){var Bt=Dr();try{return us(Nt)}catch(tr){if(Br(Bt),tr!==tr+0)throw tr;Lr(1,0)}},Y:function(Nt,Bt){var tr=Dr();try{return ys(Nt,Bt)}catch(sr){if(Br(tr),sr!==sr+0)throw sr;Lr(1,0)}},T:function(Nt,Bt,tr){var sr=Dr();try{return ps(Nt,Bt,tr)}catch(ir){if(Br(sr),ir!==ir+0)throw ir;Lr(1,0)}},f:function(Nt){var Bt=Dr();try{vr(Nt)()}catch(tr){if(Br(Bt),tr!==tr+0)throw tr;Lr(1,0)}},q:function(Nt,Bt){var tr=Dr();try{vr(Nt)(Bt)}catch(sr){if(Br(tr),sr!==sr+0)throw sr;Lr(1,0)}},h:function(Nt,Bt,tr){var sr=Dr();try{vr(Nt)(Bt,tr)}catch(ir){if(Br(sr),ir!==ir+0)throw ir;Lr(1,0)}},da:function(Nt,Bt,tr,sr){var ir=Dr();try{vr(Nt)(Bt,tr,sr)}catch(dr){if(Br(ir),dr!==dr+0)throw dr;Lr(1,0)}},l:function(Nt,Bt,tr,sr){var ir=Dr();try{vr(Nt)(Bt,tr,sr)}catch(dr){if(Br(ir),dr!==dr+0)throw dr;Lr(1,0)}},t:function(Nt,Bt,tr,sr,ir){var dr=Dr();try{vr(Nt)(Bt,tr,sr,ir)}catch(xr){if(Br(dr),xr!==xr+0)throw xr;Lr(1,0)}},u:function(Nt,Bt,tr,sr,ir,dr){var xr=Dr();try{vr(Nt)(Bt,tr,sr,ir,dr)}catch(Or){if(Br(xr),Or!==Or+0)throw Or;Lr(1,0)}},x:function(Nt,Bt,tr,sr,ir,dr,xr){var Or=Dr();try{vr(Nt)(Bt,tr,sr,ir,dr,xr)}catch(Sr){if(Br(Or),Sr!==Sr+0)throw Sr;Lr(1,0)}},z:function(Nt,Bt,tr,sr,ir,dr,xr,Or){var Sr=Dr();try{vr(Nt)(Bt,tr,sr,ir,dr,xr,Or)}catch(Vr){if(Br(Sr),Vr!==Vr+0)throw Vr;Lr(1,0)}},ga:function(Nt,Bt,tr,sr,ir,dr,xr,Or,Sr){var Vr=Dr();try{vr(Nt)(Bt,tr,sr,ir,dr,xr,Or,Sr)}catch(tn){if(Br(Vr),tn!==tn+0)throw tn;Lr(1,0)}},A:function(Nt,Bt,tr,sr,ir,dr,xr,Or,Sr,Vr,tn){var mn=Dr();try{vr(Nt)(Bt,tr,sr,ir,dr,xr,Or,Sr,Vr,tn)}catch(pn){if(Br(mn),pn!==pn+0)throw pn;Lr(1,0)}},C:function(Nt,Bt,tr,sr,ir,dr,xr,Or,Sr,Vr,tn,mn,pn,cr,Yr,sn){var Pn=Dr();try{vr(Nt)(Bt,tr,sr,ir,dr,xr,Or,Sr,Vr,tn,mn,pn,cr,Yr,sn)}catch($n){if(Br(Pn),$n!==$n+0)throw $n;Lr(1,0)}},aa:function(Nt,Bt,tr,sr,ir,dr,xr,Or){var Sr=Dr();try{fs(Nt,Bt,tr,sr,ir,dr,xr,Or)}catch(Vr){if(Br(Sr),Vr!==Vr+0)throw Vr;Lr(1,0)}},_:function(Nt,Bt,tr,sr,ir,dr,xr,Or,Sr,Vr,tn,mn){var pn=Dr();try{ms(Nt,Bt,tr,sr,ir,dr,xr,Or,Sr,Vr,tn,mn)}catch(cr){if(Br(pn),cr!==cr+0)throw cr;Lr(1,0)}},$:function(Nt,Bt,tr,sr,ir,dr){var xr=Dr();try{hs(Nt,Bt,tr,sr,ir,dr)}catch(Or){if(Br(xr),Or!==Or+0)throw Or;Lr(1,0)}},n:function(Nt){return Nt},F:function(Nt){ln=Nt},ha:Sn,y:function(Nt,Bt,tr,sr){return Sn(Nt,Bt,tr,sr)}};(function(){function Nt(ir){_.asm=ir.exports,bt=_.asm.Ka,pr(),_r=_.asm.ib,Tr.unshift(_.asm.La),Rr--,_.monitorRunDependencies&&_.monitorRunDependencies(Rr),Rr==0&&Ir&&(ir=Ir,Ir=null,ir())}function Bt(ir){Nt(ir.instance)}function tr(ir){return function(){if(!mt&&(lt||dt)){if(typeof fetch=="function"&&!Ar.startsWith("file://"))return fetch(Ar,{credentials:"same-origin"}).then(function(dr){if(!dr.ok)throw"failed to load wasm binary file at '"+Ar+"'";return dr.arrayBuffer()}).catch(function(){return en()});if(rt)return new Promise(function(dr,xr){rt(Ar,function(Or){dr(new Uint8Array(Or))},xr)})}return Promise.resolve().then(function(){return en()})}().then(function(dr){return WebAssembly.instantiate(dr,sr)}).then(function(dr){return dr}).then(ir,function(dr){xt("failed to asynchronously prepare wasm: "+dr),Ur(dr)})}var sr={a:Xn};if(Rr++,_.monitorRunDependencies&&_.monitorRunDependencies(Rr),_.instantiateWasm)try{return _.instantiateWasm(sr,Nt)}catch(ir){return xt("Module.instantiateWasm callback failed with error: "+ir),!1}(mt||typeof WebAssembly.instantiateStreaming!="function"||Fr()||Ar.startsWith("file://")||ht||typeof fetch!="function"?tr(Bt):fetch(Ar,{credentials:"same-origin"}).then(function(ir){return WebAssembly.instantiateStreaming(ir,sr).then(Bt,function(dr){return xt("wasm streaming compile failed: "+dr),xt("falling back to ArrayBuffer instantiation"),tr(Bt)})})).catch(et)})(),_.___wasm_call_ctors=function(){return(_.___wasm_call_ctors=_.asm.La).apply(null,arguments)},_._OrtInit=function(){return(_._OrtInit=_.asm.Ma).apply(null,arguments)},_._OrtCreateSessionOptions=function(){return(_._OrtCreateSessionOptions=_.asm.Na).apply(null,arguments)},_._OrtAppendExecutionProvider=function(){return(_._OrtAppendExecutionProvider=_.asm.Oa).apply(null,arguments)},_._OrtAddSessionConfigEntry=function(){return(_._OrtAddSessionConfigEntry=_.asm.Pa).apply(null,arguments)},_._OrtReleaseSessionOptions=function(){return(_._OrtReleaseSessionOptions=_.asm.Qa).apply(null,arguments)},_._OrtCreateSession=function(){return(_._OrtCreateSession=_.asm.Ra).apply(null,arguments)},_._OrtReleaseSession=function(){return(_._OrtReleaseSession=_.asm.Sa).apply(null,arguments)},_._OrtGetInputCount=function(){return(_._OrtGetInputCount=_.asm.Ta).apply(null,arguments)},_._OrtGetOutputCount=function(){return(_._OrtGetOutputCount=_.asm.Ua).apply(null,arguments)},_._OrtGetInputName=function(){return(_._OrtGetInputName=_.asm.Va).apply(null,arguments)},_._OrtGetOutputName=function(){return(_._OrtGetOutputName=_.asm.Wa).apply(null,arguments)},_._OrtFree=function(){return(_._OrtFree=_.asm.Xa).apply(null,arguments)},_._OrtCreateTensor=function(){return(_._OrtCreateTensor=_.asm.Ya).apply(null,arguments)},_._OrtGetTensorData=function(){return(_._OrtGetTensorData=_.asm.Za).apply(null,arguments)},_._OrtReleaseTensor=function(){return(_._OrtReleaseTensor=_.asm._a).apply(null,arguments)},_._OrtCreateRunOptions=function(){return(_._OrtCreateRunOptions=_.asm.$a).apply(null,arguments)},_._OrtAddRunConfigEntry=function(){return(_._OrtAddRunConfigEntry=_.asm.ab).apply(null,arguments)},_._OrtReleaseRunOptions=function(){return(_._OrtReleaseRunOptions=_.asm.bb).apply(null,arguments)},_._OrtRun=function(){return(_._OrtRun=_.asm.cb).apply(null,arguments)},_._OrtEndProfiling=function(){return(_._OrtEndProfiling=_.asm.db).apply(null,arguments)};var $r,Cr=_._malloc=function(){return(Cr=_._malloc=_.asm.eb).apply(null,arguments)},Xr=_._free=function(){return(Xr=_._free=_.asm.fb).apply(null,arguments)},gn=_._fflush=function(){return(gn=_._fflush=_.asm.gb).apply(null,arguments)},hn=_.___funcs_on_exit=function(){return(hn=_.___funcs_on_exit=_.asm.hb).apply(null,arguments)},Lr=_._setThrew=function(){return(Lr=_._setThrew=_.asm.jb).apply(null,arguments)},Dr=_.stackSave=function(){return(Dr=_.stackSave=_.asm.kb).apply(null,arguments)},Br=_.stackRestore=function(){return(Br=_.stackRestore=_.asm.lb).apply(null,arguments)},ls=_.stackAlloc=function(){return(ls=_.stackAlloc=_.asm.mb).apply(null,arguments)},Gn=_.___cxa_can_catch=function(){return(Gn=_.___cxa_can_catch=_.asm.nb).apply(null,arguments)},cs=_.___cxa_is_pointer_type=function(){return(cs=_.___cxa_is_pointer_type=_.asm.ob).apply(null,arguments)},us=_.dynCall_j=function(){return(us=_.dynCall_j=_.asm.pb).apply(null,arguments)},ds=_.dynCall_iiiiij=function(){return(ds=_.dynCall_iiiiij=_.asm.qb).apply(null,arguments)},ps=_.dynCall_jii=function(){return(ps=_.dynCall_jii=_.asm.rb).apply(null,arguments)},fs=_.dynCall_viiiiij=function(){return(fs=_.dynCall_viiiiij=_.asm.sb).apply(null,arguments)},hs=_.dynCall_vjji=function(){return(hs=_.dynCall_vjji=_.asm.tb).apply(null,arguments)},ms=_.dynCall_viiijjjii=function(){return(ms=_.dynCall_viiijjjii=_.asm.ub).apply(null,arguments)},gs=_.dynCall_iij=function(){return(gs=_.dynCall_iij=_.asm.vb).apply(null,arguments)},ys=_.dynCall_ji=function(){return(ys=_.dynCall_ji=_.asm.wb).apply(null,arguments)},xs=_.dynCall_iiiiiij=function(){return(xs=_.dynCall_iiiiiij=_.asm.xb).apply(null,arguments)},bs=_.dynCall_iiij=function(){return(bs=_.dynCall_iiij=_.asm.yb).apply(null,arguments)};function _s(){function Nt(){if(!$r&&($r=!0,_.calledRun=!0,!wt)){if(Yt(Tr),_e(_),_.onRuntimeInitialized&&_.onRuntimeInitialized(),_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;){var Bt=_.postRun.shift();gr.unshift(Bt)}Yt(gr)}}if(!(0<Rr)){if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)Nr();Yt(Er),0<Rr||(_.setStatus?(_.setStatus("Running..."),setTimeout(function(){setTimeout(function(){_.setStatus("")},1),Nt()},1)):Nt())}}if(_.UTF8ToString=Et,_.stringToUTF8=function(Nt,Bt,tr){return zt(Nt,Pt,Bt,tr)},_.lengthBytesUTF8=er,_.stackSave=Dr,_.stackRestore=Br,_.stackAlloc=ls,Ir=function Nt(){$r||_s(),$r||(Ir=Nt)},_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);0<_.preInit.length;)_.preInit.pop()();return _s(),g.ready});a.exports=h},4537:a=>{a.exports=function(e,c){for(var d=new Array(arguments.length-1),h=0,g=2,_=!0;g<arguments.length;)d[h++]=arguments[g++];return new Promise(function(_e,et){d[h]=function(tt){if(_)if(_=!1,tt)et(tt);else{for(var rt=new Array(arguments.length-1),$=0;$<rt.length;)rt[$++]=arguments[$];_e.apply(null,rt)}};try{e.apply(c||null,d)}catch(tt){_&&(_=!1,et(tt))}})}},7419:(a,e)=>{var c=e;c.length=function(_e){var et=_e.length;if(!et)return 0;for(var tt=0;--et%4>1&&_e.charAt(et)==="=";)++tt;return Math.ceil(3*_e.length)/4-tt};for(var d=new Array(64),h=new Array(123),g=0;g<64;)h[d[g]=g<26?g+65:g<52?g+71:g<62?g-4:g-59|43]=g++;c.encode=function(_e,et,tt){for(var rt,$=null,b=[],nt=0,st=0;et<tt;){var ot=_e[et++];switch(st){case 0:b[nt++]=d[ot>>2],rt=(3&ot)<<4,st=1;break;case 1:b[nt++]=d[rt|ot>>4],rt=(15&ot)<<2,st=2;break;case 2:b[nt++]=d[rt|ot>>6],b[nt++]=d[63&ot],st=0}nt>8191&&(($||($=[])).push(String.fromCharCode.apply(String,b)),nt=0)}return st&&(b[nt++]=d[rt],b[nt++]=61,st===1&&(b[nt++]=61)),$?(nt&&$.push(String.fromCharCode.apply(String,b.slice(0,nt))),$.join("")):String.fromCharCode.apply(String,b.slice(0,nt))};var _="invalid encoding";c.decode=function(_e,et,tt){for(var rt,$=tt,b=0,nt=0;nt<_e.length;){var st=_e.charCodeAt(nt++);if(st===61&&b>1)break;if((st=h[st])===void 0)throw Error(_);switch(b){case 0:rt=st,b=1;break;case 1:et[tt++]=rt<<2|(48&st)>>4,rt=st,b=2;break;case 2:et[tt++]=(15&rt)<<4|(60&st)>>2,rt=st,b=3;break;case 3:et[tt++]=(3&rt)<<6|st,b=0}}if(b===1)throw Error(_);return tt-$},c.test=function(_e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(_e)}},9211:a=>{function e(){this._listeners={}}a.exports=e,e.prototype.on=function(c,d,h){return(this._listeners[c]||(this._listeners[c]=[])).push({fn:d,ctx:h||this}),this},e.prototype.off=function(c,d){if(c===void 0)this._listeners={};else if(d===void 0)this._listeners[c]=[];else for(var h=this._listeners[c],g=0;g<h.length;)h[g].fn===d?h.splice(g,1):++g;return this},e.prototype.emit=function(c){var d=this._listeners[c];if(d){for(var h=[],g=1;g<arguments.length;)h.push(arguments[g++]);for(g=0;g<d.length;)d[g].fn.apply(d[g++].ctx,h)}return this}},945:a=>{function e(_){return typeof Float32Array<"u"?function(){var _e=new Float32Array([-0]),et=new Uint8Array(_e.buffer),tt=et[3]===128;function rt(st,ot,it){_e[0]=st,ot[it]=et[0],ot[it+1]=et[1],ot[it+2]=et[2],ot[it+3]=et[3]}function $(st,ot,it){_e[0]=st,ot[it]=et[3],ot[it+1]=et[2],ot[it+2]=et[1],ot[it+3]=et[0]}function b(st,ot){return et[0]=st[ot],et[1]=st[ot+1],et[2]=st[ot+2],et[3]=st[ot+3],_e[0]}function nt(st,ot){return et[3]=st[ot],et[2]=st[ot+1],et[1]=st[ot+2],et[0]=st[ot+3],_e[0]}_.writeFloatLE=tt?rt:$,_.writeFloatBE=tt?$:rt,_.readFloatLE=tt?b:nt,_.readFloatBE=tt?nt:b}():function(){function _e(tt,rt,$,b){var nt=rt<0?1:0;if(nt&&(rt=-rt),rt===0)tt(1/rt>0?0:2147483648,$,b);else if(isNaN(rt))tt(2143289344,$,b);else if(rt>34028234663852886e22)tt((nt<<31|2139095040)>>>0,$,b);else if(rt<11754943508222875e-54)tt((nt<<31|Math.round(rt/1401298464324817e-60))>>>0,$,b);else{var st=Math.floor(Math.log(rt)/Math.LN2);tt((nt<<31|st+127<<23|8388607&Math.round(rt*Math.pow(2,-st)*8388608))>>>0,$,b)}}function et(tt,rt,$){var b=tt(rt,$),nt=2*(b>>31)+1,st=b>>>23&255,ot=8388607&b;return st===255?ot?NaN:nt*(1/0):st===0?1401298464324817e-60*nt*ot:nt*Math.pow(2,st-150)*(ot+8388608)}_.writeFloatLE=_e.bind(null,c),_.writeFloatBE=_e.bind(null,d),_.readFloatLE=et.bind(null,h),_.readFloatBE=et.bind(null,g)}(),typeof Float64Array<"u"?function(){var _e=new Float64Array([-0]),et=new Uint8Array(_e.buffer),tt=et[7]===128;function rt(st,ot,it){_e[0]=st,ot[it]=et[0],ot[it+1]=et[1],ot[it+2]=et[2],ot[it+3]=et[3],ot[it+4]=et[4],ot[it+5]=et[5],ot[it+6]=et[6],ot[it+7]=et[7]}function $(st,ot,it){_e[0]=st,ot[it]=et[7],ot[it+1]=et[6],ot[it+2]=et[5],ot[it+3]=et[4],ot[it+4]=et[3],ot[it+5]=et[2],ot[it+6]=et[1],ot[it+7]=et[0]}function b(st,ot){return et[0]=st[ot],et[1]=st[ot+1],et[2]=st[ot+2],et[3]=st[ot+3],et[4]=st[ot+4],et[5]=st[ot+5],et[6]=st[ot+6],et[7]=st[ot+7],_e[0]}function nt(st,ot){return et[7]=st[ot],et[6]=st[ot+1],et[5]=st[ot+2],et[4]=st[ot+3],et[3]=st[ot+4],et[2]=st[ot+5],et[1]=st[ot+6],et[0]=st[ot+7],_e[0]}_.writeDoubleLE=tt?rt:$,_.writeDoubleBE=tt?$:rt,_.readDoubleLE=tt?b:nt,_.readDoubleBE=tt?nt:b}():function(){function _e(tt,rt,$,b,nt,st){var ot=b<0?1:0;if(ot&&(b=-b),b===0)tt(0,nt,st+rt),tt(1/b>0?0:2147483648,nt,st+$);else if(isNaN(b))tt(0,nt,st+rt),tt(2146959360,nt,st+$);else if(b>17976931348623157e292)tt(0,nt,st+rt),tt((ot<<31|2146435072)>>>0,nt,st+$);else{var it;if(b<22250738585072014e-324)tt((it=b/5e-324)>>>0,nt,st+rt),tt((ot<<31|it/4294967296)>>>0,nt,st+$);else{var at=Math.floor(Math.log(b)/Math.LN2);at===1024&&(at=1023),tt(4503599627370496*(it=b*Math.pow(2,-at))>>>0,nt,st+rt),tt((ot<<31|at+1023<<20|1048576*it&1048575)>>>0,nt,st+$)}}}function et(tt,rt,$,b,nt){var st=tt(b,nt+rt),ot=tt(b,nt+$),it=2*(ot>>31)+1,at=ot>>>20&2047,lt=4294967296*(1048575&ot)+st;return at===2047?lt?NaN:it*(1/0):at===0?5e-324*it*lt:it*Math.pow(2,at-1075)*(lt+4503599627370496)}_.writeDoubleLE=_e.bind(null,c,0,4),_.writeDoubleBE=_e.bind(null,d,4,0),_.readDoubleLE=et.bind(null,h,0,4),_.readDoubleBE=et.bind(null,g,4,0)}(),_}function c(_,_e,et){_e[et]=255&_,_e[et+1]=_>>>8&255,_e[et+2]=_>>>16&255,_e[et+3]=_>>>24}function d(_,_e,et){_e[et]=_>>>24,_e[et+1]=_>>>16&255,_e[et+2]=_>>>8&255,_e[et+3]=255&_}function h(_,_e){return(_[_e]|_[_e+1]<<8|_[_e+2]<<16|_[_e+3]<<24)>>>0}function g(_,_e){return(_[_e]<<24|_[_e+1]<<16|_[_e+2]<<8|_[_e+3])>>>0}a.exports=e(e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}module.exports=inquire},6662:a=>{a.exports=function(e,c,d){var h=d||8192,g=h>>>1,_=null,_e=h;return function(et){if(et<1||et>g)return e(et);_e+et>h&&(_=e(h),_e=0);var tt=c.call(_,_e,_e+=et);return 7&_e&&(_e=1+(7|_e)),tt}}},4997:(a,e)=>{var c=e;c.length=function(d){for(var h=0,g=0,_=0;_<d.length;++_)(g=d.charCodeAt(_))<128?h+=1:g<2048?h+=2:(64512&g)==55296&&(64512&d.charCodeAt(_+1))==56320?(++_,h+=4):h+=3;return h},c.read=function(d,h,g){if(g-h<1)return"";for(var _,_e=null,et=[],tt=0;h<g;)(_=d[h++])<128?et[tt++]=_:_>191&&_<224?et[tt++]=(31&_)<<6|63&d[h++]:_>239&&_<365?(_=((7&_)<<18|(63&d[h++])<<12|(63&d[h++])<<6|63&d[h++])-65536,et[tt++]=55296+(_>>10),et[tt++]=56320+(1023&_)):et[tt++]=(15&_)<<12|(63&d[h++])<<6|63&d[h++],tt>8191&&((_e||(_e=[])).push(String.fromCharCode.apply(String,et)),tt=0);return _e?(tt&&_e.push(String.fromCharCode.apply(String,et.slice(0,tt))),_e.join("")):String.fromCharCode.apply(String,et.slice(0,tt))},c.write=function(d,h,g){for(var _,_e,et=g,tt=0;tt<d.length;++tt)(_=d.charCodeAt(tt))<128?h[g++]=_:_<2048?(h[g++]=_>>6|192,h[g++]=63&_|128):(64512&_)==55296&&(64512&(_e=d.charCodeAt(tt+1)))==56320?(_=65536+((1023&_)<<10)+(1023&_e),++tt,h[g++]=_>>18|240,h[g++]=_>>12&63|128,h[g++]=_>>6&63|128,h[g++]=63&_|128):(h[g++]=_>>12|224,h[g++]=_>>6&63|128,h[g++]=63&_|128);return g-et}},3442:(a,e)=>{e.__esModule=!0;var c=function(){function d(h){if(!h)throw new TypeError("Invalid argument; `value` has no value.");this.value=d.EMPTY,h&&d.isGuid(h)&&(this.value=h)}return d.isGuid=function(h){var g=h.toString();return h&&(h instanceof d||d.validator.test(g))},d.create=function(){return new d([d.gen(2),d.gen(1),d.gen(1),d.gen(1),d.gen(3)].join("-"))},d.createEmpty=function(){return new d("emptyguid")},d.parse=function(h){return new d(h)},d.raw=function(){return[d.gen(2),d.gen(1),d.gen(1),d.gen(1),d.gen(3)].join("-")},d.gen=function(h){for(var g="",_=0;_<h;_++)g+=(65536*(1+Math.random())|0).toString(16).substring(1);return g},d.prototype.equals=function(h){return d.isGuid(h)&&this.value===h.toString()},d.prototype.isEmpty=function(){return this.value===d.EMPTY},d.prototype.toString=function(){return this.value},d.prototype.toJSON=function(){return{value:this.value}},d.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),d.EMPTY="00000000-0000-0000-0000-000000000000",d}();e.Guid=c},3720:a=>{a.exports=c;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function c(gt,bt,jt){this.low=0|gt,this.high=0|bt,this.unsigned=!!jt}function d(gt){return(gt&&gt.__isLong__)===!0}c.prototype.__isLong__,Object.defineProperty(c.prototype,"__isLong__",{value:!0}),c.isLong=d;var h={},g={};function _(gt,bt){var jt,Mt,Pt;return bt?(Pt=0<=(gt>>>=0)&&gt<256)&&(Mt=g[gt])?Mt:(jt=et(gt,(0|gt)<0?-1:0,!0),Pt&&(g[gt]=jt),jt):(Pt=-128<=(gt|=0)&&gt<128)&&(Mt=h[gt])?Mt:(jt=et(gt,gt<0?-1:0,!1),Pt&&(h[gt]=jt),jt)}function _e(gt,bt){if(isNaN(gt))return bt?at:it;if(bt){if(gt<0)return at;if(gt>=nt)return mt}else{if(gt<=-st)return yt;if(gt+1>=st)return pt}return gt<0?_e(-gt,bt).neg():et(gt%b|0,gt/b|0,bt)}function et(gt,bt,jt){return new c(gt,bt,jt)}c.fromInt=_,c.fromNumber=_e,c.fromBits=et;var tt=Math.pow;function rt(gt,bt,jt){if(gt.length===0)throw Error("empty string");if(gt==="NaN"||gt==="Infinity"||gt==="+Infinity"||gt==="-Infinity")return it;if(typeof bt=="number"?(jt=bt,bt=!1):bt=!!bt,(jt=jt||10)<2||36<jt)throw RangeError("radix");var Mt;if((Mt=gt.indexOf("-"))>0)throw Error("interior hyphen");if(Mt===0)return rt(gt.substring(1),bt,jt).neg();for(var Pt=_e(tt(jt,8)),Tt=it,St=0;St<gt.length;St+=8){var wt=Math.min(8,gt.length-St),Rt=parseInt(gt.substring(St,St+wt),jt);if(wt<8){var At=_e(tt(jt,wt));Tt=Tt.mul(At).add(_e(Rt))}else Tt=(Tt=Tt.mul(Pt)).add(_e(Rt))}return Tt.unsigned=bt,Tt}function $(gt,bt){return typeof gt=="number"?_e(gt,bt):typeof gt=="string"?rt(gt,bt):et(gt.low,gt.high,typeof bt=="boolean"?bt:gt.unsigned)}c.fromString=rt,c.fromValue=$;var b=4294967296,nt=b*b,st=nt/2,ot=_(1<<24),it=_(0);c.ZERO=it;var at=_(0,!0);c.UZERO=at;var lt=_(1);c.ONE=lt;var dt=_(1,!0);c.UONE=dt;var ht=_(-1);c.NEG_ONE=ht;var pt=et(-1,2147483647,!1);c.MAX_VALUE=pt;var mt=et(-1,-1,!0);c.MAX_UNSIGNED_VALUE=mt;var yt=et(0,-2147483648,!1);c.MIN_VALUE=yt;var xt=c.prototype;xt.toInt=function(){return this.unsigned?this.low>>>0:this.low},xt.toNumber=function(){return this.unsigned?(this.high>>>0)*b+(this.low>>>0):this.high*b+(this.low>>>0)},xt.toString=function(gt){if((gt=gt||10)<2||36<gt)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(yt)){var bt=_e(gt),jt=this.div(bt),Mt=jt.mul(bt).sub(this);return jt.toString(gt)+Mt.toInt().toString(gt)}return"-"+this.neg().toString(gt)}for(var Pt=_e(tt(gt,6),this.unsigned),Tt=this,St="";;){var wt=Tt.div(Pt),Rt=(Tt.sub(wt.mul(Pt)).toInt()>>>0).toString(gt);if((Tt=wt).isZero())return Rt+St;for(;Rt.length<6;)Rt="0"+Rt;St=""+Rt+St}},xt.getHighBits=function(){return this.high},xt.getHighBitsUnsigned=function(){return this.high>>>0},xt.getLowBits=function(){return this.low},xt.getLowBitsUnsigned=function(){return this.low>>>0},xt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(yt)?64:this.neg().getNumBitsAbs();for(var gt=this.high!=0?this.high:this.low,bt=31;bt>0&&!(gt&1<<bt);bt--);return this.high!=0?bt+33:bt+1},xt.isZero=function(){return this.high===0&&this.low===0},xt.eqz=xt.isZero,xt.isNegative=function(){return!this.unsigned&&this.high<0},xt.isPositive=function(){return this.unsigned||this.high>=0},xt.isOdd=function(){return(1&this.low)==1},xt.isEven=function(){return(1&this.low)==0},xt.equals=function(gt){return d(gt)||(gt=$(gt)),(this.unsigned===gt.unsigned||this.high>>>31!=1||gt.high>>>31!=1)&&this.high===gt.high&&this.low===gt.low},xt.eq=xt.equals,xt.notEquals=function(gt){return!this.eq(gt)},xt.neq=xt.notEquals,xt.ne=xt.notEquals,xt.lessThan=function(gt){return this.comp(gt)<0},xt.lt=xt.lessThan,xt.lessThanOrEqual=function(gt){return this.comp(gt)<=0},xt.lte=xt.lessThanOrEqual,xt.le=xt.lessThanOrEqual,xt.greaterThan=function(gt){return this.comp(gt)>0},xt.gt=xt.greaterThan,xt.greaterThanOrEqual=function(gt){return this.comp(gt)>=0},xt.gte=xt.greaterThanOrEqual,xt.ge=xt.greaterThanOrEqual,xt.compare=function(gt){if(d(gt)||(gt=$(gt)),this.eq(gt))return 0;var bt=this.isNegative(),jt=gt.isNegative();return bt&&!jt?-1:!bt&&jt?1:this.unsigned?gt.high>>>0>this.high>>>0||gt.high===this.high&&gt.low>>>0>this.low>>>0?-1:1:this.sub(gt).isNegative()?-1:1},xt.comp=xt.compare,xt.negate=function(){return!this.unsigned&&this.eq(yt)?yt:this.not().add(lt)},xt.neg=xt.negate,xt.add=function(gt){d(gt)||(gt=$(gt));var bt=this.high>>>16,jt=65535&this.high,Mt=this.low>>>16,Pt=65535&this.low,Tt=gt.high>>>16,St=65535&gt.high,wt=gt.low>>>16,Rt=0,At=0,Et=0,zt=0;return Et+=(zt+=Pt+(65535&gt.low))>>>16,At+=(Et+=Mt+wt)>>>16,Rt+=(At+=jt+St)>>>16,Rt+=bt+Tt,et((Et&=65535)<<16|(zt&=65535),(Rt&=65535)<<16|(At&=65535),this.unsigned)},xt.subtract=function(gt){return d(gt)||(gt=$(gt)),this.add(gt.neg())},xt.sub=xt.subtract,xt.multiply=function(gt){if(this.isZero())return it;if(d(gt)||(gt=$(gt)),e)return et(e.mul(this.low,this.high,gt.low,gt.high),e.get_high(),this.unsigned);if(gt.isZero())return it;if(this.eq(yt))return gt.isOdd()?yt:it;if(gt.eq(yt))return this.isOdd()?yt:it;if(this.isNegative())return gt.isNegative()?this.neg().mul(gt.neg()):this.neg().mul(gt).neg();if(gt.isNegative())return this.mul(gt.neg()).neg();if(this.lt(ot)&&gt.lt(ot))return _e(this.toNumber()*gt.toNumber(),this.unsigned);var bt=this.high>>>16,jt=65535&this.high,Mt=this.low>>>16,Pt=65535&this.low,Tt=gt.high>>>16,St=65535&gt.high,wt=gt.low>>>16,Rt=65535&gt.low,At=0,Et=0,zt=0,er=0;return zt+=(er+=Pt*Rt)>>>16,Et+=(zt+=Mt*Rt)>>>16,zt&=65535,Et+=(zt+=Pt*wt)>>>16,At+=(Et+=jt*Rt)>>>16,Et&=65535,At+=(Et+=Mt*wt)>>>16,Et&=65535,At+=(Et+=Pt*St)>>>16,At+=bt*Rt+jt*wt+Mt*St+Pt*Tt,et((zt&=65535)<<16|(er&=65535),(At&=65535)<<16|(Et&=65535),this.unsigned)},xt.mul=xt.multiply,xt.divide=function(gt){if(d(gt)||(gt=$(gt)),gt.isZero())throw Error("division by zero");var bt,jt,Mt;if(e)return this.unsigned||this.high!==-2147483648||gt.low!==-1||gt.high!==-1?et((this.unsigned?e.div_u:e.div_s)(this.low,this.high,gt.low,gt.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?at:it;if(this.unsigned){if(gt.unsigned||(gt=gt.toUnsigned()),gt.gt(this))return at;if(gt.gt(this.shru(1)))return dt;Mt=at}else{if(this.eq(yt))return gt.eq(lt)||gt.eq(ht)?yt:gt.eq(yt)?lt:(bt=this.shr(1).div(gt).shl(1)).eq(it)?gt.isNegative()?lt:ht:(jt=this.sub(gt.mul(bt)),Mt=bt.add(jt.div(gt)));if(gt.eq(yt))return this.unsigned?at:it;if(this.isNegative())return gt.isNegative()?this.neg().div(gt.neg()):this.neg().div(gt).neg();if(gt.isNegative())return this.div(gt.neg()).neg();Mt=it}for(jt=this;jt.gte(gt);){bt=Math.max(1,Math.floor(jt.toNumber()/gt.toNumber()));for(var Pt=Math.ceil(Math.log(bt)/Math.LN2),Tt=Pt<=48?1:tt(2,Pt-48),St=_e(bt),wt=St.mul(gt);wt.isNegative()||wt.gt(jt);)wt=(St=_e(bt-=Tt,this.unsigned)).mul(gt);St.isZero()&&(St=lt),Mt=Mt.add(St),jt=jt.sub(wt)}return Mt},xt.div=xt.divide,xt.modulo=function(gt){return d(gt)||(gt=$(gt)),e?et((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,gt.low,gt.high),e.get_high(),this.unsigned):this.sub(this.div(gt).mul(gt))},xt.mod=xt.modulo,xt.rem=xt.modulo,xt.not=function(){return et(~this.low,~this.high,this.unsigned)},xt.and=function(gt){return d(gt)||(gt=$(gt)),et(this.low&gt.low,this.high&gt.high,this.unsigned)},xt.or=function(gt){return d(gt)||(gt=$(gt)),et(this.low|gt.low,this.high|gt.high,this.unsigned)},xt.xor=function(gt){return d(gt)||(gt=$(gt)),et(this.low^gt.low,this.high^gt.high,this.unsigned)},xt.shiftLeft=function(gt){return d(gt)&&(gt=gt.toInt()),(gt&=63)==0?this:gt<32?et(this.low<<gt,this.high<<gt|this.low>>>32-gt,this.unsigned):et(0,this.low<<gt-32,this.unsigned)},xt.shl=xt.shiftLeft,xt.shiftRight=function(gt){return d(gt)&&(gt=gt.toInt()),(gt&=63)==0?this:gt<32?et(this.low>>>gt|this.high<<32-gt,this.high>>gt,this.unsigned):et(this.high>>gt-32,this.high>=0?0:-1,this.unsigned)},xt.shr=xt.shiftRight,xt.shiftRightUnsigned=function(gt){if(d(gt)&&(gt=gt.toInt()),(gt&=63)==0)return this;var bt=this.high;return gt<32?et(this.low>>>gt|bt<<32-gt,bt>>>gt,this.unsigned):et(gt===32?bt:bt>>>gt-32,0,this.unsigned)},xt.shru=xt.shiftRightUnsigned,xt.shr_u=xt.shiftRightUnsigned,xt.toSigned=function(){return this.unsigned?et(this.low,this.high,!1):this},xt.toUnsigned=function(){return this.unsigned?this:et(this.low,this.high,!0)},xt.toBytes=function(gt){return gt?this.toBytesLE():this.toBytesBE()},xt.toBytesLE=function(){var gt=this.high,bt=this.low;return[255&bt,bt>>>8&255,bt>>>16&255,bt>>>24,255&gt,gt>>>8&255,gt>>>16&255,gt>>>24]},xt.toBytesBE=function(){var gt=this.high,bt=this.low;return[gt>>>24,gt>>>16&255,gt>>>8&255,255&gt,bt>>>24,bt>>>16&255,bt>>>8&255,255&bt]},c.fromBytes=function(gt,bt,jt){return jt?c.fromBytesLE(gt,bt):c.fromBytesBE(gt,bt)},c.fromBytesLE=function(gt,bt){return new c(gt[0]|gt[1]<<8|gt[2]<<16|gt[3]<<24,gt[4]|gt[5]<<8|gt[6]<<16|gt[7]<<24,bt)},c.fromBytesBE=function(gt,bt){return new c(gt[4]<<24|gt[5]<<16|gt[6]<<8|gt[7],gt[0]<<24|gt[1]<<16|gt[2]<<8|gt[3],bt)}},1446:(a,e,c)=>{var d,h,g,_=c(2100),_e=_.Reader,et=_.Writer,tt=_.util,rt=_.roots.default||(_.roots.default={});rt.onnx=((g={}).Version=(d={},(h=Object.create(d))[d[0]="_START_VERSION"]=0,h[d[1]="IR_VERSION_2017_10_10"]=1,h[d[2]="IR_VERSION_2017_10_30"]=2,h[d[3]="IR_VERSION_2017_11_3"]=3,h[d[4]="IR_VERSION_2019_1_22"]=4,h[d[5]="IR_VERSION"]=5,h),g.AttributeProto=function(){function $(b){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],b)for(var nt=Object.keys(b),st=0;st<nt.length;++st)b[nt[st]]!=null&&(this[nt[st]]=b[nt[st]])}return $.prototype.name="",$.prototype.refAttrName="",$.prototype.docString="",$.prototype.type=0,$.prototype.f=0,$.prototype.i=tt.Long?tt.Long.fromBits(0,0,!1):0,$.prototype.s=tt.newBuffer([]),$.prototype.t=null,$.prototype.g=null,$.prototype.floats=tt.emptyArray,$.prototype.ints=tt.emptyArray,$.prototype.strings=tt.emptyArray,$.prototype.tensors=tt.emptyArray,$.prototype.graphs=tt.emptyArray,$.create=function(b){return new $(b)},$.encode=function(b,nt){if(nt||(nt=et.create()),b.name!=null&&b.hasOwnProperty("name")&&nt.uint32(10).string(b.name),b.f!=null&&b.hasOwnProperty("f")&&nt.uint32(21).float(b.f),b.i!=null&&b.hasOwnProperty("i")&&nt.uint32(24).int64(b.i),b.s!=null&&b.hasOwnProperty("s")&&nt.uint32(34).bytes(b.s),b.t!=null&&b.hasOwnProperty("t")&&rt.onnx.TensorProto.encode(b.t,nt.uint32(42).fork()).ldelim(),b.g!=null&&b.hasOwnProperty("g")&&rt.onnx.GraphProto.encode(b.g,nt.uint32(50).fork()).ldelim(),b.floats!=null&&b.floats.length){nt.uint32(58).fork();for(var st=0;st<b.floats.length;++st)nt.float(b.floats[st]);nt.ldelim()}if(b.ints!=null&&b.ints.length){for(nt.uint32(66).fork(),st=0;st<b.ints.length;++st)nt.int64(b.ints[st]);nt.ldelim()}if(b.strings!=null&&b.strings.length)for(st=0;st<b.strings.length;++st)nt.uint32(74).bytes(b.strings[st]);if(b.tensors!=null&&b.tensors.length)for(st=0;st<b.tensors.length;++st)rt.onnx.TensorProto.encode(b.tensors[st],nt.uint32(82).fork()).ldelim();if(b.graphs!=null&&b.graphs.length)for(st=0;st<b.graphs.length;++st)rt.onnx.GraphProto.encode(b.graphs[st],nt.uint32(90).fork()).ldelim();return b.docString!=null&&b.hasOwnProperty("docString")&&nt.uint32(106).string(b.docString),b.type!=null&&b.hasOwnProperty("type")&&nt.uint32(160).int32(b.type),b.refAttrName!=null&&b.hasOwnProperty("refAttrName")&&nt.uint32(170).string(b.refAttrName),nt},$.encodeDelimited=function(b,nt){return this.encode(b,nt).ldelim()},$.decode=function(b,nt){b instanceof _e||(b=_e.create(b));for(var st=nt===void 0?b.len:b.pos+nt,ot=new rt.onnx.AttributeProto;b.pos<st;){var it=b.uint32();switch(it>>>3){case 1:ot.name=b.string();break;case 21:ot.refAttrName=b.string();break;case 13:ot.docString=b.string();break;case 20:ot.type=b.int32();break;case 2:ot.f=b.float();break;case 3:ot.i=b.int64();break;case 4:ot.s=b.bytes();break;case 5:ot.t=rt.onnx.TensorProto.decode(b,b.uint32());break;case 6:ot.g=rt.onnx.GraphProto.decode(b,b.uint32());break;case 7:if(ot.floats&&ot.floats.length||(ot.floats=[]),(7&it)==2)for(var at=b.uint32()+b.pos;b.pos<at;)ot.floats.push(b.float());else ot.floats.push(b.float());break;case 8:if(ot.ints&&ot.ints.length||(ot.ints=[]),(7&it)==2)for(at=b.uint32()+b.pos;b.pos<at;)ot.ints.push(b.int64());else ot.ints.push(b.int64());break;case 9:ot.strings&&ot.strings.length||(ot.strings=[]),ot.strings.push(b.bytes());break;case 10:ot.tensors&&ot.tensors.length||(ot.tensors=[]),ot.tensors.push(rt.onnx.TensorProto.decode(b,b.uint32()));break;case 11:ot.graphs&&ot.graphs.length||(ot.graphs=[]),ot.graphs.push(rt.onnx.GraphProto.decode(b,b.uint32()));break;default:b.skipType(7&it)}}return ot},$.decodeDelimited=function(b){return b instanceof _e||(b=new _e(b)),this.decode(b,b.uint32())},$.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.name!=null&&b.hasOwnProperty("name")&&!tt.isString(b.name))return"name: string expected";if(b.refAttrName!=null&&b.hasOwnProperty("refAttrName")&&!tt.isString(b.refAttrName))return"refAttrName: string expected";if(b.docString!=null&&b.hasOwnProperty("docString")&&!tt.isString(b.docString))return"docString: string expected";if(b.type!=null&&b.hasOwnProperty("type"))switch(b.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(b.f!=null&&b.hasOwnProperty("f")&&typeof b.f!="number")return"f: number expected";if(b.i!=null&&b.hasOwnProperty("i")&&!(tt.isInteger(b.i)||b.i&&tt.isInteger(b.i.low)&&tt.isInteger(b.i.high)))return"i: integer|Long expected";if(b.s!=null&&b.hasOwnProperty("s")&&!(b.s&&typeof b.s.length=="number"||tt.isString(b.s)))return"s: buffer expected";if(b.t!=null&&b.hasOwnProperty("t")&&(st=rt.onnx.TensorProto.verify(b.t)))return"t."+st;if(b.g!=null&&b.hasOwnProperty("g")&&(st=rt.onnx.GraphProto.verify(b.g)))return"g."+st;if(b.floats!=null&&b.hasOwnProperty("floats")){if(!Array.isArray(b.floats))return"floats: array expected";for(var nt=0;nt<b.floats.length;++nt)if(typeof b.floats[nt]!="number")return"floats: number[] expected"}if(b.ints!=null&&b.hasOwnProperty("ints")){if(!Array.isArray(b.ints))return"ints: array expected";for(nt=0;nt<b.ints.length;++nt)if(!(tt.isInteger(b.ints[nt])||b.ints[nt]&&tt.isInteger(b.ints[nt].low)&&tt.isInteger(b.ints[nt].high)))return"ints: integer|Long[] expected"}if(b.strings!=null&&b.hasOwnProperty("strings")){if(!Array.isArray(b.strings))return"strings: array expected";for(nt=0;nt<b.strings.length;++nt)if(!(b.strings[nt]&&typeof b.strings[nt].length=="number"||tt.isString(b.strings[nt])))return"strings: buffer[] expected"}if(b.tensors!=null&&b.hasOwnProperty("tensors")){if(!Array.isArray(b.tensors))return"tensors: array expected";for(nt=0;nt<b.tensors.length;++nt)if(st=rt.onnx.TensorProto.verify(b.tensors[nt]))return"tensors."+st}if(b.graphs!=null&&b.hasOwnProperty("graphs")){if(!Array.isArray(b.graphs))return"graphs: array expected";for(nt=0;nt<b.graphs.length;++nt){var st;if(st=rt.onnx.GraphProto.verify(b.graphs[nt]))return"graphs."+st}}return null},$.fromObject=function(b){if(b instanceof rt.onnx.AttributeProto)return b;var nt=new rt.onnx.AttributeProto;switch(b.name!=null&&(nt.name=String(b.name)),b.refAttrName!=null&&(nt.refAttrName=String(b.refAttrName)),b.docString!=null&&(nt.docString=String(b.docString)),b.type){case"UNDEFINED":case 0:nt.type=0;break;case"FLOAT":case 1:nt.type=1;break;case"INT":case 2:nt.type=2;break;case"STRING":case 3:nt.type=3;break;case"TENSOR":case 4:nt.type=4;break;case"GRAPH":case 5:nt.type=5;break;case"FLOATS":case 6:nt.type=6;break;case"INTS":case 7:nt.type=7;break;case"STRINGS":case 8:nt.type=8;break;case"TENSORS":case 9:nt.type=9;break;case"GRAPHS":case 10:nt.type=10}if(b.f!=null&&(nt.f=Number(b.f)),b.i!=null&&(tt.Long?(nt.i=tt.Long.fromValue(b.i)).unsigned=!1:typeof b.i=="string"?nt.i=parseInt(b.i,10):typeof b.i=="number"?nt.i=b.i:typeof b.i=="object"&&(nt.i=new tt.LongBits(b.i.low>>>0,b.i.high>>>0).toNumber())),b.s!=null&&(typeof b.s=="string"?tt.base64.decode(b.s,nt.s=tt.newBuffer(tt.base64.length(b.s)),0):b.s.length&&(nt.s=b.s)),b.t!=null){if(typeof b.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");nt.t=rt.onnx.TensorProto.fromObject(b.t)}if(b.g!=null){if(typeof b.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");nt.g=rt.onnx.GraphProto.fromObject(b.g)}if(b.floats){if(!Array.isArray(b.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");nt.floats=[];for(var st=0;st<b.floats.length;++st)nt.floats[st]=Number(b.floats[st])}if(b.ints){if(!Array.isArray(b.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(nt.ints=[],st=0;st<b.ints.length;++st)tt.Long?(nt.ints[st]=tt.Long.fromValue(b.ints[st])).unsigned=!1:typeof b.ints[st]=="string"?nt.ints[st]=parseInt(b.ints[st],10):typeof b.ints[st]=="number"?nt.ints[st]=b.ints[st]:typeof b.ints[st]=="object"&&(nt.ints[st]=new tt.LongBits(b.ints[st].low>>>0,b.ints[st].high>>>0).toNumber())}if(b.strings){if(!Array.isArray(b.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(nt.strings=[],st=0;st<b.strings.length;++st)typeof b.strings[st]=="string"?tt.base64.decode(b.strings[st],nt.strings[st]=tt.newBuffer(tt.base64.length(b.strings[st])),0):b.strings[st].length&&(nt.strings[st]=b.strings[st])}if(b.tensors){if(!Array.isArray(b.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(nt.tensors=[],st=0;st<b.tensors.length;++st){if(typeof b.tensors[st]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");nt.tensors[st]=rt.onnx.TensorProto.fromObject(b.tensors[st])}}if(b.graphs){if(!Array.isArray(b.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(nt.graphs=[],st=0;st<b.graphs.length;++st){if(typeof b.graphs[st]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");nt.graphs[st]=rt.onnx.GraphProto.fromObject(b.graphs[st])}}return nt},$.toObject=function(b,nt){nt||(nt={});var st={};if((nt.arrays||nt.defaults)&&(st.floats=[],st.ints=[],st.strings=[],st.tensors=[],st.graphs=[]),nt.defaults){if(st.name="",st.f=0,tt.Long){var ot=new tt.Long(0,0,!1);st.i=nt.longs===String?ot.toString():nt.longs===Number?ot.toNumber():ot}else st.i=nt.longs===String?"0":0;nt.bytes===String?st.s="":(st.s=[],nt.bytes!==Array&&(st.s=tt.newBuffer(st.s))),st.t=null,st.g=null,st.docString="",st.type=nt.enums===String?"UNDEFINED":0,st.refAttrName=""}if(b.name!=null&&b.hasOwnProperty("name")&&(st.name=b.name),b.f!=null&&b.hasOwnProperty("f")&&(st.f=nt.json&&!isFinite(b.f)?String(b.f):b.f),b.i!=null&&b.hasOwnProperty("i")&&(typeof b.i=="number"?st.i=nt.longs===String?String(b.i):b.i:st.i=nt.longs===String?tt.Long.prototype.toString.call(b.i):nt.longs===Number?new tt.LongBits(b.i.low>>>0,b.i.high>>>0).toNumber():b.i),b.s!=null&&b.hasOwnProperty("s")&&(st.s=nt.bytes===String?tt.base64.encode(b.s,0,b.s.length):nt.bytes===Array?Array.prototype.slice.call(b.s):b.s),b.t!=null&&b.hasOwnProperty("t")&&(st.t=rt.onnx.TensorProto.toObject(b.t,nt)),b.g!=null&&b.hasOwnProperty("g")&&(st.g=rt.onnx.GraphProto.toObject(b.g,nt)),b.floats&&b.floats.length){st.floats=[];for(var it=0;it<b.floats.length;++it)st.floats[it]=nt.json&&!isFinite(b.floats[it])?String(b.floats[it]):b.floats[it]}if(b.ints&&b.ints.length)for(st.ints=[],it=0;it<b.ints.length;++it)typeof b.ints[it]=="number"?st.ints[it]=nt.longs===String?String(b.ints[it]):b.ints[it]:st.ints[it]=nt.longs===String?tt.Long.prototype.toString.call(b.ints[it]):nt.longs===Number?new tt.LongBits(b.ints[it].low>>>0,b.ints[it].high>>>0).toNumber():b.ints[it];if(b.strings&&b.strings.length)for(st.strings=[],it=0;it<b.strings.length;++it)st.strings[it]=nt.bytes===String?tt.base64.encode(b.strings[it],0,b.strings[it].length):nt.bytes===Array?Array.prototype.slice.call(b.strings[it]):b.strings[it];if(b.tensors&&b.tensors.length)for(st.tensors=[],it=0;it<b.tensors.length;++it)st.tensors[it]=rt.onnx.TensorProto.toObject(b.tensors[it],nt);if(b.graphs&&b.graphs.length)for(st.graphs=[],it=0;it<b.graphs.length;++it)st.graphs[it]=rt.onnx.GraphProto.toObject(b.graphs[it],nt);return b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),b.type!=null&&b.hasOwnProperty("type")&&(st.type=nt.enums===String?rt.onnx.AttributeProto.AttributeType[b.type]:b.type),b.refAttrName!=null&&b.hasOwnProperty("refAttrName")&&(st.refAttrName=b.refAttrName),st},$.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},$.AttributeType=function(){var b={},nt=Object.create(b);return nt[b[0]="UNDEFINED"]=0,nt[b[1]="FLOAT"]=1,nt[b[2]="INT"]=2,nt[b[3]="STRING"]=3,nt[b[4]="TENSOR"]=4,nt[b[5]="GRAPH"]=5,nt[b[6]="FLOATS"]=6,nt[b[7]="INTS"]=7,nt[b[8]="STRINGS"]=8,nt[b[9]="TENSORS"]=9,nt[b[10]="GRAPHS"]=10,nt}(),$}(),g.ValueInfoProto=function(){function $(b){if(b)for(var nt=Object.keys(b),st=0;st<nt.length;++st)b[nt[st]]!=null&&(this[nt[st]]=b[nt[st]])}return $.prototype.name="",$.prototype.type=null,$.prototype.docString="",$.create=function(b){return new $(b)},$.encode=function(b,nt){return nt||(nt=et.create()),b.name!=null&&b.hasOwnProperty("name")&&nt.uint32(10).string(b.name),b.type!=null&&b.hasOwnProperty("type")&&rt.onnx.TypeProto.encode(b.type,nt.uint32(18).fork()).ldelim(),b.docString!=null&&b.hasOwnProperty("docString")&&nt.uint32(26).string(b.docString),nt},$.encodeDelimited=function(b,nt){return this.encode(b,nt).ldelim()},$.decode=function(b,nt){b instanceof _e||(b=_e.create(b));for(var st=nt===void 0?b.len:b.pos+nt,ot=new rt.onnx.ValueInfoProto;b.pos<st;){var it=b.uint32();switch(it>>>3){case 1:ot.name=b.string();break;case 2:ot.type=rt.onnx.TypeProto.decode(b,b.uint32());break;case 3:ot.docString=b.string();break;default:b.skipType(7&it)}}return ot},$.decodeDelimited=function(b){return b instanceof _e||(b=new _e(b)),this.decode(b,b.uint32())},$.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.name!=null&&b.hasOwnProperty("name")&&!tt.isString(b.name))return"name: string expected";if(b.type!=null&&b.hasOwnProperty("type")){var nt=rt.onnx.TypeProto.verify(b.type);if(nt)return"type."+nt}return b.docString!=null&&b.hasOwnProperty("docString")&&!tt.isString(b.docString)?"docString: string expected":null},$.fromObject=function(b){if(b instanceof rt.onnx.ValueInfoProto)return b;var nt=new rt.onnx.ValueInfoProto;if(b.name!=null&&(nt.name=String(b.name)),b.type!=null){if(typeof b.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");nt.type=rt.onnx.TypeProto.fromObject(b.type)}return b.docString!=null&&(nt.docString=String(b.docString)),nt},$.toObject=function(b,nt){nt||(nt={});var st={};return nt.defaults&&(st.name="",st.type=null,st.docString=""),b.name!=null&&b.hasOwnProperty("name")&&(st.name=b.name),b.type!=null&&b.hasOwnProperty("type")&&(st.type=rt.onnx.TypeProto.toObject(b.type,nt)),b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),st},$.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},$}(),g.NodeProto=function(){function $(b){if(this.input=[],this.output=[],this.attribute=[],b)for(var nt=Object.keys(b),st=0;st<nt.length;++st)b[nt[st]]!=null&&(this[nt[st]]=b[nt[st]])}return $.prototype.input=tt.emptyArray,$.prototype.output=tt.emptyArray,$.prototype.name="",$.prototype.opType="",$.prototype.domain="",$.prototype.attribute=tt.emptyArray,$.prototype.docString="",$.create=function(b){return new $(b)},$.encode=function(b,nt){if(nt||(nt=et.create()),b.input!=null&&b.input.length)for(var st=0;st<b.input.length;++st)nt.uint32(10).string(b.input[st]);if(b.output!=null&&b.output.length)for(st=0;st<b.output.length;++st)nt.uint32(18).string(b.output[st]);if(b.name!=null&&b.hasOwnProperty("name")&&nt.uint32(26).string(b.name),b.opType!=null&&b.hasOwnProperty("opType")&&nt.uint32(34).string(b.opType),b.attribute!=null&&b.attribute.length)for(st=0;st<b.attribute.length;++st)rt.onnx.AttributeProto.encode(b.attribute[st],nt.uint32(42).fork()).ldelim();return b.docString!=null&&b.hasOwnProperty("docString")&&nt.uint32(50).string(b.docString),b.domain!=null&&b.hasOwnProperty("domain")&&nt.uint32(58).string(b.domain),nt},$.encodeDelimited=function(b,nt){return this.encode(b,nt).ldelim()},$.decode=function(b,nt){b instanceof _e||(b=_e.create(b));for(var st=nt===void 0?b.len:b.pos+nt,ot=new rt.onnx.NodeProto;b.pos<st;){var it=b.uint32();switch(it>>>3){case 1:ot.input&&ot.input.length||(ot.input=[]),ot.input.push(b.string());break;case 2:ot.output&&ot.output.length||(ot.output=[]),ot.output.push(b.string());break;case 3:ot.name=b.string();break;case 4:ot.opType=b.string();break;case 7:ot.domain=b.string();break;case 5:ot.attribute&&ot.attribute.length||(ot.attribute=[]),ot.attribute.push(rt.onnx.AttributeProto.decode(b,b.uint32()));break;case 6:ot.docString=b.string();break;default:b.skipType(7&it)}}return ot},$.decodeDelimited=function(b){return b instanceof _e||(b=new _e(b)),this.decode(b,b.uint32())},$.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.input!=null&&b.hasOwnProperty("input")){if(!Array.isArray(b.input))return"input: array expected";for(var nt=0;nt<b.input.length;++nt)if(!tt.isString(b.input[nt]))return"input: string[] expected"}if(b.output!=null&&b.hasOwnProperty("output")){if(!Array.isArray(b.output))return"output: array expected";for(nt=0;nt<b.output.length;++nt)if(!tt.isString(b.output[nt]))return"output: string[] expected"}if(b.name!=null&&b.hasOwnProperty("name")&&!tt.isString(b.name))return"name: string expected";if(b.opType!=null&&b.hasOwnProperty("opType")&&!tt.isString(b.opType))return"opType: string expected";if(b.domain!=null&&b.hasOwnProperty("domain")&&!tt.isString(b.domain))return"domain: string expected";if(b.attribute!=null&&b.hasOwnProperty("attribute")){if(!Array.isArray(b.attribute))return"attribute: array expected";for(nt=0;nt<b.attribute.length;++nt){var st=rt.onnx.AttributeProto.verify(b.attribute[nt]);if(st)return"attribute."+st}}return b.docString!=null&&b.hasOwnProperty("docString")&&!tt.isString(b.docString)?"docString: string expected":null},$.fromObject=function(b){if(b instanceof rt.onnx.NodeProto)return b;var nt=new rt.onnx.NodeProto;if(b.input){if(!Array.isArray(b.input))throw TypeError(".onnx.NodeProto.input: array expected");nt.input=[];for(var st=0;st<b.input.length;++st)nt.input[st]=String(b.input[st])}if(b.output){if(!Array.isArray(b.output))throw TypeError(".onnx.NodeProto.output: array expected");for(nt.output=[],st=0;st<b.output.length;++st)nt.output[st]=String(b.output[st])}if(b.name!=null&&(nt.name=String(b.name)),b.opType!=null&&(nt.opType=String(b.opType)),b.domain!=null&&(nt.domain=String(b.domain)),b.attribute){if(!Array.isArray(b.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(nt.attribute=[],st=0;st<b.attribute.length;++st){if(typeof b.attribute[st]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");nt.attribute[st]=rt.onnx.AttributeProto.fromObject(b.attribute[st])}}return b.docString!=null&&(nt.docString=String(b.docString)),nt},$.toObject=function(b,nt){nt||(nt={});var st={};if((nt.arrays||nt.defaults)&&(st.input=[],st.output=[],st.attribute=[]),nt.defaults&&(st.name="",st.opType="",st.docString="",st.domain=""),b.input&&b.input.length){st.input=[];for(var ot=0;ot<b.input.length;++ot)st.input[ot]=b.input[ot]}if(b.output&&b.output.length)for(st.output=[],ot=0;ot<b.output.length;++ot)st.output[ot]=b.output[ot];if(b.name!=null&&b.hasOwnProperty("name")&&(st.name=b.name),b.opType!=null&&b.hasOwnProperty("opType")&&(st.opType=b.opType),b.attribute&&b.attribute.length)for(st.attribute=[],ot=0;ot<b.attribute.length;++ot)st.attribute[ot]=rt.onnx.AttributeProto.toObject(b.attribute[ot],nt);return b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),b.domain!=null&&b.hasOwnProperty("domain")&&(st.domain=b.domain),st},$.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},$}(),g.ModelProto=function(){function $(b){if(this.opsetImport=[],this.metadataProps=[],b)for(var nt=Object.keys(b),st=0;st<nt.length;++st)b[nt[st]]!=null&&(this[nt[st]]=b[nt[st]])}return $.prototype.irVersion=tt.Long?tt.Long.fromBits(0,0,!1):0,$.prototype.opsetImport=tt.emptyArray,$.prototype.producerName="",$.prototype.producerVersion="",$.prototype.domain="",$.prototype.modelVersion=tt.Long?tt.Long.fromBits(0,0,!1):0,$.prototype.docString="",$.prototype.graph=null,$.prototype.metadataProps=tt.emptyArray,$.create=function(b){return new $(b)},$.encode=function(b,nt){if(nt||(nt=et.create()),b.irVersion!=null&&b.hasOwnProperty("irVersion")&&nt.uint32(8).int64(b.irVersion),b.producerName!=null&&b.hasOwnProperty("producerName")&&nt.uint32(18).string(b.producerName),b.producerVersion!=null&&b.hasOwnProperty("producerVersion")&&nt.uint32(26).string(b.producerVersion),b.domain!=null&&b.hasOwnProperty("domain")&&nt.uint32(34).string(b.domain),b.modelVersion!=null&&b.hasOwnProperty("modelVersion")&&nt.uint32(40).int64(b.modelVersion),b.docString!=null&&b.hasOwnProperty("docString")&&nt.uint32(50).string(b.docString),b.graph!=null&&b.hasOwnProperty("graph")&&rt.onnx.GraphProto.encode(b.graph,nt.uint32(58).fork()).ldelim(),b.opsetImport!=null&&b.opsetImport.length)for(var st=0;st<b.opsetImport.length;++st)rt.onnx.OperatorSetIdProto.encode(b.opsetImport[st],nt.uint32(66).fork()).ldelim();if(b.metadataProps!=null&&b.metadataProps.length)for(st=0;st<b.metadataProps.length;++st)rt.onnx.StringStringEntryProto.encode(b.metadataProps[st],nt.uint32(114).fork()).ldelim();return nt},$.encodeDelimited=function(b,nt){return this.encode(b,nt).ldelim()},$.decode=function(b,nt){b instanceof _e||(b=_e.create(b));for(var st=nt===void 0?b.len:b.pos+nt,ot=new rt.onnx.ModelProto;b.pos<st;){var it=b.uint32();switch(it>>>3){case 1:ot.irVersion=b.int64();break;case 8:ot.opsetImport&&ot.opsetImport.length||(ot.opsetImport=[]),ot.opsetImport.push(rt.onnx.OperatorSetIdProto.decode(b,b.uint32()));break;case 2:ot.producerName=b.string();break;case 3:ot.producerVersion=b.string();break;case 4:ot.domain=b.string();break;case 5:ot.modelVersion=b.int64();break;case 6:ot.docString=b.string();break;case 7:ot.graph=rt.onnx.GraphProto.decode(b,b.uint32());break;case 14:ot.metadataProps&&ot.metadataProps.length||(ot.metadataProps=[]),ot.metadataProps.push(rt.onnx.StringStringEntryProto.decode(b,b.uint32()));break;default:b.skipType(7&it)}}return ot},$.decodeDelimited=function(b){return b instanceof _e||(b=new _e(b)),this.decode(b,b.uint32())},$.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.irVersion!=null&&b.hasOwnProperty("irVersion")&&!(tt.isInteger(b.irVersion)||b.irVersion&&tt.isInteger(b.irVersion.low)&&tt.isInteger(b.irVersion.high)))return"irVersion: integer|Long expected";if(b.opsetImport!=null&&b.hasOwnProperty("opsetImport")){if(!Array.isArray(b.opsetImport))return"opsetImport: array expected";for(var nt=0;nt<b.opsetImport.length;++nt)if(st=rt.onnx.OperatorSetIdProto.verify(b.opsetImport[nt]))return"opsetImport."+st}if(b.producerName!=null&&b.hasOwnProperty("producerName")&&!tt.isString(b.producerName))return"producerName: string expected";if(b.producerVersion!=null&&b.hasOwnProperty("producerVersion")&&!tt.isString(b.producerVersion))return"producerVersion: string expected";if(b.domain!=null&&b.hasOwnProperty("domain")&&!tt.isString(b.domain))return"domain: string expected";if(b.modelVersion!=null&&b.hasOwnProperty("modelVersion")&&!(tt.isInteger(b.modelVersion)||b.modelVersion&&tt.isInteger(b.modelVersion.low)&&tt.isInteger(b.modelVersion.high)))return"modelVersion: integer|Long expected";if(b.docString!=null&&b.hasOwnProperty("docString")&&!tt.isString(b.docString))return"docString: string expected";if(b.graph!=null&&b.hasOwnProperty("graph")&&(st=rt.onnx.GraphProto.verify(b.graph)))return"graph."+st;if(b.metadataProps!=null&&b.hasOwnProperty("metadataProps")){if(!Array.isArray(b.metadataProps))return"metadataProps: array expected";for(nt=0;nt<b.metadataProps.length;++nt){var st;if(st=rt.onnx.StringStringEntryProto.verify(b.metadataProps[nt]))return"metadataProps."+st}}return null},$.fromObject=function(b){if(b instanceof rt.onnx.ModelProto)return b;var nt=new rt.onnx.ModelProto;if(b.irVersion!=null&&(tt.Long?(nt.irVersion=tt.Long.fromValue(b.irVersion)).unsigned=!1:typeof b.irVersion=="string"?nt.irVersion=parseInt(b.irVersion,10):typeof b.irVersion=="number"?nt.irVersion=b.irVersion:typeof b.irVersion=="object"&&(nt.irVersion=new tt.LongBits(b.irVersion.low>>>0,b.irVersion.high>>>0).toNumber())),b.opsetImport){if(!Array.isArray(b.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");nt.opsetImport=[];for(var st=0;st<b.opsetImport.length;++st){if(typeof b.opsetImport[st]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");nt.opsetImport[st]=rt.onnx.OperatorSetIdProto.fromObject(b.opsetImport[st])}}if(b.producerName!=null&&(nt.producerName=String(b.producerName)),b.producerVersion!=null&&(nt.producerVersion=String(b.producerVersion)),b.domain!=null&&(nt.domain=String(b.domain)),b.modelVersion!=null&&(tt.Long?(nt.modelVersion=tt.Long.fromValue(b.modelVersion)).unsigned=!1:typeof b.modelVersion=="string"?nt.modelVersion=parseInt(b.modelVersion,10):typeof b.modelVersion=="number"?nt.modelVersion=b.modelVersion:typeof b.modelVersion=="object"&&(nt.modelVersion=new tt.LongBits(b.modelVersion.low>>>0,b.modelVersion.high>>>0).toNumber())),b.docString!=null&&(nt.docString=String(b.docString)),b.graph!=null){if(typeof b.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");nt.graph=rt.onnx.GraphProto.fromObject(b.graph)}if(b.metadataProps){if(!Array.isArray(b.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(nt.metadataProps=[],st=0;st<b.metadataProps.length;++st){if(typeof b.metadataProps[st]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");nt.metadataProps[st]=rt.onnx.StringStringEntryProto.fromObject(b.metadataProps[st])}}return nt},$.toObject=function(b,nt){nt||(nt={});var st={};if((nt.arrays||nt.defaults)&&(st.opsetImport=[],st.metadataProps=[]),nt.defaults){if(tt.Long){var ot=new tt.Long(0,0,!1);st.irVersion=nt.longs===String?ot.toString():nt.longs===Number?ot.toNumber():ot}else st.irVersion=nt.longs===String?"0":0;st.producerName="",st.producerVersion="",st.domain="",tt.Long?(ot=new tt.Long(0,0,!1),st.modelVersion=nt.longs===String?ot.toString():nt.longs===Number?ot.toNumber():ot):st.modelVersion=nt.longs===String?"0":0,st.docString="",st.graph=null}if(b.irVersion!=null&&b.hasOwnProperty("irVersion")&&(typeof b.irVersion=="number"?st.irVersion=nt.longs===String?String(b.irVersion):b.irVersion:st.irVersion=nt.longs===String?tt.Long.prototype.toString.call(b.irVersion):nt.longs===Number?new tt.LongBits(b.irVersion.low>>>0,b.irVersion.high>>>0).toNumber():b.irVersion),b.producerName!=null&&b.hasOwnProperty("producerName")&&(st.producerName=b.producerName),b.producerVersion!=null&&b.hasOwnProperty("producerVersion")&&(st.producerVersion=b.producerVersion),b.domain!=null&&b.hasOwnProperty("domain")&&(st.domain=b.domain),b.modelVersion!=null&&b.hasOwnProperty("modelVersion")&&(typeof b.modelVersion=="number"?st.modelVersion=nt.longs===String?String(b.modelVersion):b.modelVersion:st.modelVersion=nt.longs===String?tt.Long.prototype.toString.call(b.modelVersion):nt.longs===Number?new tt.LongBits(b.modelVersion.low>>>0,b.modelVersion.high>>>0).toNumber():b.modelVersion),b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),b.graph!=null&&b.hasOwnProperty("graph")&&(st.graph=rt.onnx.GraphProto.toObject(b.graph,nt)),b.opsetImport&&b.opsetImport.length){st.opsetImport=[];for(var it=0;it<b.opsetImport.length;++it)st.opsetImport[it]=rt.onnx.OperatorSetIdProto.toObject(b.opsetImport[it],nt)}if(b.metadataProps&&b.metadataProps.length)for(st.metadataProps=[],it=0;it<b.metadataProps.length;++it)st.metadataProps[it]=rt.onnx.StringStringEntryProto.toObject(b.metadataProps[it],nt);return st},$.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},$}(),g.StringStringEntryProto=function(){function $(b){if(b)for(var nt=Object.keys(b),st=0;st<nt.length;++st)b[nt[st]]!=null&&(this[nt[st]]=b[nt[st]])}return $.prototype.key="",$.prototype.value="",$.create=function(b){return new $(b)},$.encode=function(b,nt){return nt||(nt=et.create()),b.key!=null&&b.hasOwnProperty("key")&&nt.uint32(10).string(b.key),b.value!=null&&b.hasOwnProperty("value")&&nt.uint32(18).string(b.value),nt},$.encodeDelimited=function(b,nt){return this.encode(b,nt).ldelim()},$.decode=function(b,nt){b instanceof _e||(b=_e.create(b));for(var st=nt===void 0?b.len:b.pos+nt,ot=new rt.onnx.StringStringEntryProto;b.pos<st;){var it=b.uint32();switch(it>>>3){case 1:ot.key=b.string();break;case 2:ot.value=b.string();break;default:b.skipType(7&it)}}return ot},$.decodeDelimited=function(b){return b instanceof _e||(b=new _e(b)),this.decode(b,b.uint32())},$.verify=function(b){return typeof b!="object"||b===null?"object expected":b.key!=null&&b.hasOwnProperty("key")&&!tt.isString(b.key)?"key: string expected":b.value!=null&&b.hasOwnProperty("value")&&!tt.isString(b.value)?"value: string expected":null},$.fromObject=function(b){if(b instanceof rt.onnx.StringStringEntryProto)return b;var nt=new rt.onnx.StringStringEntryProto;return b.key!=null&&(nt.key=String(b.key)),b.value!=null&&(nt.value=String(b.value)),nt},$.toObject=function(b,nt){nt||(nt={});var st={};return nt.defaults&&(st.key="",st.value=""),b.key!=null&&b.hasOwnProperty("key")&&(st.key=b.key),b.value!=null&&b.hasOwnProperty("value")&&(st.value=b.value),st},$.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},$}(),g.TensorAnnotation=function(){function $(b){if(this.quantParameterTensorNames=[],b)for(var nt=Object.keys(b),st=0;st<nt.length;++st)b[nt[st]]!=null&&(this[nt[st]]=b[nt[st]])}return $.prototype.tensorName="",$.prototype.quantParameterTensorNames=tt.emptyArray,$.create=function(b){return new $(b)},$.encode=function(b,nt){if(nt||(nt=et.create()),b.tensorName!=null&&b.hasOwnProperty("tensorName")&&nt.uint32(10).string(b.tensorName),b.quantParameterTensorNames!=null&&b.quantParameterTensorNames.length)for(var st=0;st<b.quantParameterTensorNames.length;++st)rt.onnx.StringStringEntryProto.encode(b.quantParameterTensorNames[st],nt.uint32(18).fork()).ldelim();return nt},$.encodeDelimited=function(b,nt){return this.encode(b,nt).ldelim()},$.decode=function(b,nt){b instanceof _e||(b=_e.create(b));for(var st=nt===void 0?b.len:b.pos+nt,ot=new rt.onnx.TensorAnnotation;b.pos<st;){var it=b.uint32();switch(it>>>3){case 1:ot.tensorName=b.string();break;case 2:ot.quantParameterTensorNames&&ot.quantParameterTensorNames.length||(ot.quantParameterTensorNames=[]),ot.quantParameterTensorNames.push(rt.onnx.StringStringEntryProto.decode(b,b.uint32()));break;default:b.skipType(7&it)}}return ot},$.decodeDelimited=function(b){return b instanceof _e||(b=new _e(b)),this.decode(b,b.uint32())},$.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.tensorName!=null&&b.hasOwnProperty("tensorName")&&!tt.isString(b.tensorName))return"tensorName: string expected";if(b.quantParameterTensorNames!=null&&b.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(b.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var nt=0;nt<b.quantParameterTensorNames.length;++nt){var st=rt.onnx.StringStringEntryProto.verify(b.quantParameterTensorNames[nt]);if(st)return"quantParameterTensorNames."+st}}return null},$.fromObject=function(b){if(b instanceof rt.onnx.TensorAnnotation)return b;var nt=new rt.onnx.TensorAnnotation;if(b.tensorName!=null&&(nt.tensorName=String(b.tensorName)),b.quantParameterTensorNames){if(!Array.isArray(b.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");nt.quantParameterTensorNames=[];for(var st=0;st<b.quantParameterTensorNames.length;++st){if(typeof b.quantParameterTensorNames[st]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");nt.quantParameterTensorNames[st]=rt.onnx.StringStringEntryProto.fromObject(b.quantParameterTensorNames[st])}}return nt},$.toObject=function(b,nt){nt||(nt={});var st={};if((nt.arrays||nt.defaults)&&(st.quantParameterTensorNames=[]),nt.defaults&&(st.tensorName=""),b.tensorName!=null&&b.hasOwnProperty("tensorName")&&(st.tensorName=b.tensorName),b.quantParameterTensorNames&&b.quantParameterTensorNames.length){st.quantParameterTensorNames=[];for(var ot=0;ot<b.quantParameterTensorNames.length;++ot)st.quantParameterTensorNames[ot]=rt.onnx.StringStringEntryProto.toObject(b.quantParameterTensorNames[ot],nt)}return st},$.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},$}(),g.GraphProto=function(){function $(b){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],b)for(var nt=Object.keys(b),st=0;st<nt.length;++st)b[nt[st]]!=null&&(this[nt[st]]=b[nt[st]])}return $.prototype.node=tt.emptyArray,$.prototype.name="",$.prototype.initializer=tt.emptyArray,$.prototype.docString="",$.prototype.input=tt.emptyArray,$.prototype.output=tt.emptyArray,$.prototype.valueInfo=tt.emptyArray,$.prototype.quantizationAnnotation=tt.emptyArray,$.create=function(b){return new $(b)},$.encode=function(b,nt){if(nt||(nt=et.create()),b.node!=null&&b.node.length)for(var st=0;st<b.node.length;++st)rt.onnx.NodeProto.encode(b.node[st],nt.uint32(10).fork()).ldelim();if(b.name!=null&&b.hasOwnProperty("name")&&nt.uint32(18).string(b.name),b.initializer!=null&&b.initializer.length)for(st=0;st<b.initializer.length;++st)rt.onnx.TensorProto.encode(b.initializer[st],nt.uint32(42).fork()).ldelim();if(b.docString!=null&&b.hasOwnProperty("docString")&&nt.uint32(82).string(b.docString),b.input!=null&&b.input.length)for(st=0;st<b.input.length;++st)rt.onnx.ValueInfoProto.encode(b.input[st],nt.uint32(90).fork()).ldelim();if(b.output!=null&&b.output.length)for(st=0;st<b.output.length;++st)rt.onnx.ValueInfoProto.encode(b.output[st],nt.uint32(98).fork()).ldelim();if(b.valueInfo!=null&&b.valueInfo.length)for(st=0;st<b.valueInfo.length;++st)rt.onnx.ValueInfoProto.encode(b.valueInfo[st],nt.uint32(106).fork()).ldelim();if(b.quantizationAnnotation!=null&&b.quantizationAnnotation.length)for(st=0;st<b.quantizationAnnotation.length;++st)rt.onnx.TensorAnnotation.encode(b.quantizationAnnotation[st],nt.uint32(114).fork()).ldelim();return nt},$.encodeDelimited=function(b,nt){return this.encode(b,nt).ldelim()},$.decode=function(b,nt){b instanceof _e||(b=_e.create(b));for(var st=nt===void 0?b.len:b.pos+nt,ot=new rt.onnx.GraphProto;b.pos<st;){var it=b.uint32();switch(it>>>3){case 1:ot.node&&ot.node.length||(ot.node=[]),ot.node.push(rt.onnx.NodeProto.decode(b,b.uint32()));break;case 2:ot.name=b.string();break;case 5:ot.initializer&&ot.initializer.length||(ot.initializer=[]),ot.initializer.push(rt.onnx.TensorProto.decode(b,b.uint32()));break;case 10:ot.docString=b.string();break;case 11:ot.input&&ot.input.length||(ot.input=[]),ot.input.push(rt.onnx.ValueInfoProto.decode(b,b.uint32()));break;case 12:ot.output&&ot.output.length||(ot.output=[]),ot.output.push(rt.onnx.ValueInfoProto.decode(b,b.uint32()));break;case 13:ot.valueInfo&&ot.valueInfo.length||(ot.valueInfo=[]),ot.valueInfo.push(rt.onnx.ValueInfoProto.decode(b,b.uint32()));break;case 14:ot.quantizationAnnotation&&ot.quantizationAnnotation.length||(ot.quantizationAnnotation=[]),ot.quantizationAnnotation.push(rt.onnx.TensorAnnotation.decode(b,b.uint32()));break;default:b.skipType(7&it)}}return ot},$.decodeDelimited=function(b){return b instanceof _e||(b=new _e(b)),this.decode(b,b.uint32())},$.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.node!=null&&b.hasOwnProperty("node")){if(!Array.isArray(b.node))return"node: array expected";for(var nt=0;nt<b.node.length;++nt)if(st=rt.onnx.NodeProto.verify(b.node[nt]))return"node."+st}if(b.name!=null&&b.hasOwnProperty("name")&&!tt.isString(b.name))return"name: string expected";if(b.initializer!=null&&b.hasOwnProperty("initializer")){if(!Array.isArray(b.initializer))return"initializer: array expected";for(nt=0;nt<b.initializer.length;++nt)if(st=rt.onnx.TensorProto.verify(b.initializer[nt]))return"initializer."+st}if(b.docString!=null&&b.hasOwnProperty("docString")&&!tt.isString(b.docString))return"docString: string expected";if(b.input!=null&&b.hasOwnProperty("input")){if(!Array.isArray(b.input))return"input: array expected";for(nt=0;nt<b.input.length;++nt)if(st=rt.onnx.ValueInfoProto.verify(b.input[nt]))return"input."+st}if(b.output!=null&&b.hasOwnProperty("output")){if(!Array.isArray(b.output))return"output: array expected";for(nt=0;nt<b.output.length;++nt)if(st=rt.onnx.ValueInfoProto.verify(b.output[nt]))return"output."+st}if(b.valueInfo!=null&&b.hasOwnProperty("valueInfo")){if(!Array.isArray(b.valueInfo))return"valueInfo: array expected";for(nt=0;nt<b.valueInfo.length;++nt)if(st=rt.onnx.ValueInfoProto.verify(b.valueInfo[nt]))return"valueInfo."+st}if(b.quantizationAnnotation!=null&&b.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(b.quantizationAnnotation))return"quantizationAnnotation: array expected";for(nt=0;nt<b.quantizationAnnotation.length;++nt){var st;if(st=rt.onnx.TensorAnnotation.verify(b.quantizationAnnotation[nt]))return"quantizationAnnotation."+st}}return null},$.fromObject=function(b){if(b instanceof rt.onnx.GraphProto)return b;var nt=new rt.onnx.GraphProto;if(b.node){if(!Array.isArray(b.node))throw TypeError(".onnx.GraphProto.node: array expected");nt.node=[];for(var st=0;st<b.node.length;++st){if(typeof b.node[st]!="object")throw TypeError(".onnx.GraphProto.node: object expected");nt.node[st]=rt.onnx.NodeProto.fromObject(b.node[st])}}if(b.name!=null&&(nt.name=String(b.name)),b.initializer){if(!Array.isArray(b.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(nt.initializer=[],st=0;st<b.initializer.length;++st){if(typeof b.initializer[st]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");nt.initializer[st]=rt.onnx.TensorProto.fromObject(b.initializer[st])}}if(b.docString!=null&&(nt.docString=String(b.docString)),b.input){if(!Array.isArray(b.input))throw TypeError(".onnx.GraphProto.input: array expected");for(nt.input=[],st=0;st<b.input.length;++st){if(typeof b.input[st]!="object")throw TypeError(".onnx.GraphProto.input: object expected");nt.input[st]=rt.onnx.ValueInfoProto.fromObject(b.input[st])}}if(b.output){if(!Array.isArray(b.output))throw TypeError(".onnx.GraphProto.output: array expected");for(nt.output=[],st=0;st<b.output.length;++st){if(typeof b.output[st]!="object")throw TypeError(".onnx.GraphProto.output: object expected");nt.output[st]=rt.onnx.ValueInfoProto.fromObject(b.output[st])}}if(b.valueInfo){if(!Array.isArray(b.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(nt.valueInfo=[],st=0;st<b.valueInfo.length;++st){if(typeof b.valueInfo[st]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");nt.valueInfo[st]=rt.onnx.ValueInfoProto.fromObject(b.valueInfo[st])}}if(b.quantizationAnnotation){if(!Array.isArray(b.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(nt.quantizationAnnotation=[],st=0;st<b.quantizationAnnotation.length;++st){if(typeof b.quantizationAnnotation[st]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");nt.quantizationAnnotation[st]=rt.onnx.TensorAnnotation.fromObject(b.quantizationAnnotation[st])}}return nt},$.toObject=function(b,nt){nt||(nt={});var st={};if((nt.arrays||nt.defaults)&&(st.node=[],st.initializer=[],st.input=[],st.output=[],st.valueInfo=[],st.quantizationAnnotation=[]),nt.defaults&&(st.name="",st.docString=""),b.node&&b.node.length){st.node=[];for(var ot=0;ot<b.node.length;++ot)st.node[ot]=rt.onnx.NodeProto.toObject(b.node[ot],nt)}if(b.name!=null&&b.hasOwnProperty("name")&&(st.name=b.name),b.initializer&&b.initializer.length)for(st.initializer=[],ot=0;ot<b.initializer.length;++ot)st.initializer[ot]=rt.onnx.TensorProto.toObject(b.initializer[ot],nt);if(b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),b.input&&b.input.length)for(st.input=[],ot=0;ot<b.input.length;++ot)st.input[ot]=rt.onnx.ValueInfoProto.toObject(b.input[ot],nt);if(b.output&&b.output.length)for(st.output=[],ot=0;ot<b.output.length;++ot)st.output[ot]=rt.onnx.ValueInfoProto.toObject(b.output[ot],nt);if(b.valueInfo&&b.valueInfo.length)for(st.valueInfo=[],ot=0;ot<b.valueInfo.length;++ot)st.valueInfo[ot]=rt.onnx.ValueInfoProto.toObject(b.valueInfo[ot],nt);if(b.quantizationAnnotation&&b.quantizationAnnotation.length)for(st.quantizationAnnotation=[],ot=0;ot<b.quantizationAnnotation.length;++ot)st.quantizationAnnotation[ot]=rt.onnx.TensorAnnotation.toObject(b.quantizationAnnotation[ot],nt);return st},$.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},$}(),g.TensorProto=function(){function $(b){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],b)for(var nt=Object.keys(b),st=0;st<nt.length;++st)b[nt[st]]!=null&&(this[nt[st]]=b[nt[st]])}return $.prototype.dims=tt.emptyArray,$.prototype.dataType=0,$.prototype.segment=null,$.prototype.floatData=tt.emptyArray,$.prototype.int32Data=tt.emptyArray,$.prototype.stringData=tt.emptyArray,$.prototype.int64Data=tt.emptyArray,$.prototype.name="",$.prototype.docString="",$.prototype.rawData=tt.newBuffer([]),$.prototype.externalData=tt.emptyArray,$.prototype.dataLocation=0,$.prototype.doubleData=tt.emptyArray,$.prototype.uint64Data=tt.emptyArray,$.create=function(b){return new $(b)},$.encode=function(b,nt){if(nt||(nt=et.create()),b.dims!=null&&b.dims.length){nt.uint32(10).fork();for(var st=0;st<b.dims.length;++st)nt.int64(b.dims[st]);nt.ldelim()}if(b.dataType!=null&&b.hasOwnProperty("dataType")&&nt.uint32(16).int32(b.dataType),b.segment!=null&&b.hasOwnProperty("segment")&&rt.onnx.TensorProto.Segment.encode(b.segment,nt.uint32(26).fork()).ldelim(),b.floatData!=null&&b.floatData.length){for(nt.uint32(34).fork(),st=0;st<b.floatData.length;++st)nt.float(b.floatData[st]);nt.ldelim()}if(b.int32Data!=null&&b.int32Data.length){for(nt.uint32(42).fork(),st=0;st<b.int32Data.length;++st)nt.int32(b.int32Data[st]);nt.ldelim()}if(b.stringData!=null&&b.stringData.length)for(st=0;st<b.stringData.length;++st)nt.uint32(50).bytes(b.stringData[st]);if(b.int64Data!=null&&b.int64Data.length){for(nt.uint32(58).fork(),st=0;st<b.int64Data.length;++st)nt.int64(b.int64Data[st]);nt.ldelim()}if(b.name!=null&&b.hasOwnProperty("name")&&nt.uint32(66).string(b.name),b.rawData!=null&&b.hasOwnProperty("rawData")&&nt.uint32(74).bytes(b.rawData),b.doubleData!=null&&b.doubleData.length){for(nt.uint32(82).fork(),st=0;st<b.doubleData.length;++st)nt.double(b.doubleData[st]);nt.ldelim()}if(b.uint64Data!=null&&b.uint64Data.length){for(nt.uint32(90).fork(),st=0;st<b.uint64Data.length;++st)nt.uint64(b.uint64Data[st]);nt.ldelim()}if(b.docString!=null&&b.hasOwnProperty("docString")&&nt.uint32(98).string(b.docString),b.externalData!=null&&b.externalData.length)for(st=0;st<b.externalData.length;++st)rt.onnx.StringStringEntryProto.encode(b.externalData[st],nt.uint32(106).fork()).ldelim();return b.dataLocation!=null&&b.hasOwnProperty("dataLocation")&&nt.uint32(112).int32(b.dataLocation),nt},$.encodeDelimited=function(b,nt){return this.encode(b,nt).ldelim()},$.decode=function(b,nt){b instanceof _e||(b=_e.create(b));for(var st=nt===void 0?b.len:b.pos+nt,ot=new rt.onnx.TensorProto;b.pos<st;){var it=b.uint32();switch(it>>>3){case 1:if(ot.dims&&ot.dims.length||(ot.dims=[]),(7&it)==2)for(var at=b.uint32()+b.pos;b.pos<at;)ot.dims.push(b.int64());else ot.dims.push(b.int64());break;case 2:ot.dataType=b.int32();break;case 3:ot.segment=rt.onnx.TensorProto.Segment.decode(b,b.uint32());break;case 4:if(ot.floatData&&ot.floatData.length||(ot.floatData=[]),(7&it)==2)for(at=b.uint32()+b.pos;b.pos<at;)ot.floatData.push(b.float());else ot.floatData.push(b.float());break;case 5:if(ot.int32Data&&ot.int32Data.length||(ot.int32Data=[]),(7&it)==2)for(at=b.uint32()+b.pos;b.pos<at;)ot.int32Data.push(b.int32());else ot.int32Data.push(b.int32());break;case 6:ot.stringData&&ot.stringData.length||(ot.stringData=[]),ot.stringData.push(b.bytes());break;case 7:if(ot.int64Data&&ot.int64Data.length||(ot.int64Data=[]),(7&it)==2)for(at=b.uint32()+b.pos;b.pos<at;)ot.int64Data.push(b.int64());else ot.int64Data.push(b.int64());break;case 8:ot.name=b.string();break;case 12:ot.docString=b.string();break;case 9:ot.rawData=b.bytes();break;case 13:ot.externalData&&ot.externalData.length||(ot.externalData=[]),ot.externalData.push(rt.onnx.StringStringEntryProto.decode(b,b.uint32()));break;case 14:ot.dataLocation=b.int32();break;case 10:if(ot.doubleData&&ot.doubleData.length||(ot.doubleData=[]),(7&it)==2)for(at=b.uint32()+b.pos;b.pos<at;)ot.doubleData.push(b.double());else ot.doubleData.push(b.double());break;case 11:if(ot.uint64Data&&ot.uint64Data.length||(ot.uint64Data=[]),(7&it)==2)for(at=b.uint32()+b.pos;b.pos<at;)ot.uint64Data.push(b.uint64());else ot.uint64Data.push(b.uint64());break;default:b.skipType(7&it)}}return ot},$.decodeDelimited=function(b){return b instanceof _e||(b=new _e(b)),this.decode(b,b.uint32())},$.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.dims!=null&&b.hasOwnProperty("dims")){if(!Array.isArray(b.dims))return"dims: array expected";for(var nt=0;nt<b.dims.length;++nt)if(!(tt.isInteger(b.dims[nt])||b.dims[nt]&&tt.isInteger(b.dims[nt].low)&&tt.isInteger(b.dims[nt].high)))return"dims: integer|Long[] expected"}if(b.dataType!=null&&b.hasOwnProperty("dataType")&&!tt.isInteger(b.dataType))return"dataType: integer expected";if(b.segment!=null&&b.hasOwnProperty("segment")&&(st=rt.onnx.TensorProto.Segment.verify(b.segment)))return"segment."+st;if(b.floatData!=null&&b.hasOwnProperty("floatData")){if(!Array.isArray(b.floatData))return"floatData: array expected";for(nt=0;nt<b.floatData.length;++nt)if(typeof b.floatData[nt]!="number")return"floatData: number[] expected"}if(b.int32Data!=null&&b.hasOwnProperty("int32Data")){if(!Array.isArray(b.int32Data))return"int32Data: array expected";for(nt=0;nt<b.int32Data.length;++nt)if(!tt.isInteger(b.int32Data[nt]))return"int32Data: integer[] expected"}if(b.stringData!=null&&b.hasOwnProperty("stringData")){if(!Array.isArray(b.stringData))return"stringData: array expected";for(nt=0;nt<b.stringData.length;++nt)if(!(b.stringData[nt]&&typeof b.stringData[nt].length=="number"||tt.isString(b.stringData[nt])))return"stringData: buffer[] expected"}if(b.int64Data!=null&&b.hasOwnProperty("int64Data")){if(!Array.isArray(b.int64Data))return"int64Data: array expected";for(nt=0;nt<b.int64Data.length;++nt)if(!(tt.isInteger(b.int64Data[nt])||b.int64Data[nt]&&tt.isInteger(b.int64Data[nt].low)&&tt.isInteger(b.int64Data[nt].high)))return"int64Data: integer|Long[] expected"}if(b.name!=null&&b.hasOwnProperty("name")&&!tt.isString(b.name))return"name: string expected";if(b.docString!=null&&b.hasOwnProperty("docString")&&!tt.isString(b.docString))return"docString: string expected";if(b.rawData!=null&&b.hasOwnProperty("rawData")&&!(b.rawData&&typeof b.rawData.length=="number"||tt.isString(b.rawData)))return"rawData: buffer expected";if(b.externalData!=null&&b.hasOwnProperty("externalData")){if(!Array.isArray(b.externalData))return"externalData: array expected";for(nt=0;nt<b.externalData.length;++nt){var st;if(st=rt.onnx.StringStringEntryProto.verify(b.externalData[nt]))return"externalData."+st}}if(b.dataLocation!=null&&b.hasOwnProperty("dataLocation"))switch(b.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(b.doubleData!=null&&b.hasOwnProperty("doubleData")){if(!Array.isArray(b.doubleData))return"doubleData: array expected";for(nt=0;nt<b.doubleData.length;++nt)if(typeof b.doubleData[nt]!="number")return"doubleData: number[] expected"}if(b.uint64Data!=null&&b.hasOwnProperty("uint64Data")){if(!Array.isArray(b.uint64Data))return"uint64Data: array expected";for(nt=0;nt<b.uint64Data.length;++nt)if(!(tt.isInteger(b.uint64Data[nt])||b.uint64Data[nt]&&tt.isInteger(b.uint64Data[nt].low)&&tt.isInteger(b.uint64Data[nt].high)))return"uint64Data: integer|Long[] expected"}return null},$.fromObject=function(b){if(b instanceof rt.onnx.TensorProto)return b;var nt=new rt.onnx.TensorProto;if(b.dims){if(!Array.isArray(b.dims))throw TypeError(".onnx.TensorProto.dims: array expected");nt.dims=[];for(var st=0;st<b.dims.length;++st)tt.Long?(nt.dims[st]=tt.Long.fromValue(b.dims[st])).unsigned=!1:typeof b.dims[st]=="string"?nt.dims[st]=parseInt(b.dims[st],10):typeof b.dims[st]=="number"?nt.dims[st]=b.dims[st]:typeof b.dims[st]=="object"&&(nt.dims[st]=new tt.LongBits(b.dims[st].low>>>0,b.dims[st].high>>>0).toNumber())}if(b.dataType!=null&&(nt.dataType=0|b.dataType),b.segment!=null){if(typeof b.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");nt.segment=rt.onnx.TensorProto.Segment.fromObject(b.segment)}if(b.floatData){if(!Array.isArray(b.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(nt.floatData=[],st=0;st<b.floatData.length;++st)nt.floatData[st]=Number(b.floatData[st])}if(b.int32Data){if(!Array.isArray(b.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(nt.int32Data=[],st=0;st<b.int32Data.length;++st)nt.int32Data[st]=0|b.int32Data[st]}if(b.stringData){if(!Array.isArray(b.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(nt.stringData=[],st=0;st<b.stringData.length;++st)typeof b.stringData[st]=="string"?tt.base64.decode(b.stringData[st],nt.stringData[st]=tt.newBuffer(tt.base64.length(b.stringData[st])),0):b.stringData[st].length&&(nt.stringData[st]=b.stringData[st])}if(b.int64Data){if(!Array.isArray(b.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(nt.int64Data=[],st=0;st<b.int64Data.length;++st)tt.Long?(nt.int64Data[st]=tt.Long.fromValue(b.int64Data[st])).unsigned=!1:typeof b.int64Data[st]=="string"?nt.int64Data[st]=parseInt(b.int64Data[st],10):typeof b.int64Data[st]=="number"?nt.int64Data[st]=b.int64Data[st]:typeof b.int64Data[st]=="object"&&(nt.int64Data[st]=new tt.LongBits(b.int64Data[st].low>>>0,b.int64Data[st].high>>>0).toNumber())}if(b.name!=null&&(nt.name=String(b.name)),b.docString!=null&&(nt.docString=String(b.docString)),b.rawData!=null&&(typeof b.rawData=="string"?tt.base64.decode(b.rawData,nt.rawData=tt.newBuffer(tt.base64.length(b.rawData)),0):b.rawData.length&&(nt.rawData=b.rawData)),b.externalData){if(!Array.isArray(b.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(nt.externalData=[],st=0;st<b.externalData.length;++st){if(typeof b.externalData[st]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");nt.externalData[st]=rt.onnx.StringStringEntryProto.fromObject(b.externalData[st])}}switch(b.dataLocation){case"DEFAULT":case 0:nt.dataLocation=0;break;case"EXTERNAL":case 1:nt.dataLocation=1}if(b.doubleData){if(!Array.isArray(b.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(nt.doubleData=[],st=0;st<b.doubleData.length;++st)nt.doubleData[st]=Number(b.doubleData[st])}if(b.uint64Data){if(!Array.isArray(b.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(nt.uint64Data=[],st=0;st<b.uint64Data.length;++st)tt.Long?(nt.uint64Data[st]=tt.Long.fromValue(b.uint64Data[st])).unsigned=!0:typeof b.uint64Data[st]=="string"?nt.uint64Data[st]=parseInt(b.uint64Data[st],10):typeof b.uint64Data[st]=="number"?nt.uint64Data[st]=b.uint64Data[st]:typeof b.uint64Data[st]=="object"&&(nt.uint64Data[st]=new tt.LongBits(b.uint64Data[st].low>>>0,b.uint64Data[st].high>>>0).toNumber(!0))}return nt},$.toObject=function(b,nt){nt||(nt={});var st={};if((nt.arrays||nt.defaults)&&(st.dims=[],st.floatData=[],st.int32Data=[],st.stringData=[],st.int64Data=[],st.doubleData=[],st.uint64Data=[],st.externalData=[]),nt.defaults&&(st.dataType=0,st.segment=null,st.name="",nt.bytes===String?st.rawData="":(st.rawData=[],nt.bytes!==Array&&(st.rawData=tt.newBuffer(st.rawData))),st.docString="",st.dataLocation=nt.enums===String?"DEFAULT":0),b.dims&&b.dims.length){st.dims=[];for(var ot=0;ot<b.dims.length;++ot)typeof b.dims[ot]=="number"?st.dims[ot]=nt.longs===String?String(b.dims[ot]):b.dims[ot]:st.dims[ot]=nt.longs===String?tt.Long.prototype.toString.call(b.dims[ot]):nt.longs===Number?new tt.LongBits(b.dims[ot].low>>>0,b.dims[ot].high>>>0).toNumber():b.dims[ot]}if(b.dataType!=null&&b.hasOwnProperty("dataType")&&(st.dataType=b.dataType),b.segment!=null&&b.hasOwnProperty("segment")&&(st.segment=rt.onnx.TensorProto.Segment.toObject(b.segment,nt)),b.floatData&&b.floatData.length)for(st.floatData=[],ot=0;ot<b.floatData.length;++ot)st.floatData[ot]=nt.json&&!isFinite(b.floatData[ot])?String(b.floatData[ot]):b.floatData[ot];if(b.int32Data&&b.int32Data.length)for(st.int32Data=[],ot=0;ot<b.int32Data.length;++ot)st.int32Data[ot]=b.int32Data[ot];if(b.stringData&&b.stringData.length)for(st.stringData=[],ot=0;ot<b.stringData.length;++ot)st.stringData[ot]=nt.bytes===String?tt.base64.encode(b.stringData[ot],0,b.stringData[ot].length):nt.bytes===Array?Array.prototype.slice.call(b.stringData[ot]):b.stringData[ot];if(b.int64Data&&b.int64Data.length)for(st.int64Data=[],ot=0;ot<b.int64Data.length;++ot)typeof b.int64Data[ot]=="number"?st.int64Data[ot]=nt.longs===String?String(b.int64Data[ot]):b.int64Data[ot]:st.int64Data[ot]=nt.longs===String?tt.Long.prototype.toString.call(b.int64Data[ot]):nt.longs===Number?new tt.LongBits(b.int64Data[ot].low>>>0,b.int64Data[ot].high>>>0).toNumber():b.int64Data[ot];if(b.name!=null&&b.hasOwnProperty("name")&&(st.name=b.name),b.rawData!=null&&b.hasOwnProperty("rawData")&&(st.rawData=nt.bytes===String?tt.base64.encode(b.rawData,0,b.rawData.length):nt.bytes===Array?Array.prototype.slice.call(b.rawData):b.rawData),b.doubleData&&b.doubleData.length)for(st.doubleData=[],ot=0;ot<b.doubleData.length;++ot)st.doubleData[ot]=nt.json&&!isFinite(b.doubleData[ot])?String(b.doubleData[ot]):b.doubleData[ot];if(b.uint64Data&&b.uint64Data.length)for(st.uint64Data=[],ot=0;ot<b.uint64Data.length;++ot)typeof b.uint64Data[ot]=="number"?st.uint64Data[ot]=nt.longs===String?String(b.uint64Data[ot]):b.uint64Data[ot]:st.uint64Data[ot]=nt.longs===String?tt.Long.prototype.toString.call(b.uint64Data[ot]):nt.longs===Number?new tt.LongBits(b.uint64Data[ot].low>>>0,b.uint64Data[ot].high>>>0).toNumber(!0):b.uint64Data[ot];if(b.docString!=null&&b.hasOwnProperty("docString")&&(st.docString=b.docString),b.externalData&&b.externalData.length)for(st.externalData=[],ot=0;ot<b.externalData.length;++ot)st.externalData[ot]=rt.onnx.StringStringEntryProto.toObject(b.externalData[ot],nt);return b.dataLocation!=null&&b.hasOwnProperty("dataLocation")&&(st.dataLocation=nt.enums===String?rt.onnx.TensorProto.DataLocation[b.dataLocation]:b.dataLocation),st},$.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},$.DataType=function(){var b={},nt=Object.create(b);return nt[b[0]="UNDEFINED"]=0,nt[b[1]="FLOAT"]=1,nt[b[2]="UINT8"]=2,nt[b[3]="INT8"]=3,nt[b[4]="UINT16"]=4,nt[b[5]="INT16"]=5,nt[b[6]="INT32"]=6,nt[b[7]="INT64"]=7,nt[b[8]="STRING"]=8,nt[b[9]="BOOL"]=9,nt[b[10]="FLOAT16"]=10,nt[b[11]="DOUBLE"]=11,nt[b[12]="UINT32"]=12,nt[b[13]="UINT64"]=13,nt[b[14]="COMPLEX64"]=14,nt[b[15]="COMPLEX128"]=15,nt[b[16]="BFLOAT16"]=16,nt}(),$.Segment=function(){function b(nt){if(nt)for(var st=Object.keys(nt),ot=0;ot<st.length;++ot)nt[st[ot]]!=null&&(this[st[ot]]=nt[st[ot]])}return b.prototype.begin=tt.Long?tt.Long.fromBits(0,0,!1):0,b.prototype.end=tt.Long?tt.Long.fromBits(0,0,!1):0,b.create=function(nt){return new b(nt)},b.encode=function(nt,st){return st||(st=et.create()),nt.begin!=null&&nt.hasOwnProperty("begin")&&st.uint32(8).int64(nt.begin),nt.end!=null&&nt.hasOwnProperty("end")&&st.uint32(16).int64(nt.end),st},b.encodeDelimited=function(nt,st){return this.encode(nt,st).ldelim()},b.decode=function(nt,st){nt instanceof _e||(nt=_e.create(nt));for(var ot=st===void 0?nt.len:nt.pos+st,it=new rt.onnx.TensorProto.Segment;nt.pos<ot;){var at=nt.uint32();switch(at>>>3){case 1:it.begin=nt.int64();break;case 2:it.end=nt.int64();break;default:nt.skipType(7&at)}}return it},b.decodeDelimited=function(nt){return nt instanceof _e||(nt=new _e(nt)),this.decode(nt,nt.uint32())},b.verify=function(nt){return typeof nt!="object"||nt===null?"object expected":nt.begin!=null&&nt.hasOwnProperty("begin")&&!(tt.isInteger(nt.begin)||nt.begin&&tt.isInteger(nt.begin.low)&&tt.isInteger(nt.begin.high))?"begin: integer|Long expected":nt.end!=null&&nt.hasOwnProperty("end")&&!(tt.isInteger(nt.end)||nt.end&&tt.isInteger(nt.end.low)&&tt.isInteger(nt.end.high))?"end: integer|Long expected":null},b.fromObject=function(nt){if(nt instanceof rt.onnx.TensorProto.Segment)return nt;var st=new rt.onnx.TensorProto.Segment;return nt.begin!=null&&(tt.Long?(st.begin=tt.Long.fromValue(nt.begin)).unsigned=!1:typeof nt.begin=="string"?st.begin=parseInt(nt.begin,10):typeof nt.begin=="number"?st.begin=nt.begin:typeof nt.begin=="object"&&(st.begin=new tt.LongBits(nt.begin.low>>>0,nt.begin.high>>>0).toNumber())),nt.end!=null&&(tt.Long?(st.end=tt.Long.fromValue(nt.end)).unsigned=!1:typeof nt.end=="string"?st.end=parseInt(nt.end,10):typeof nt.end=="number"?st.end=nt.end:typeof nt.end=="object"&&(st.end=new tt.LongBits(nt.end.low>>>0,nt.end.high>>>0).toNumber())),st},b.toObject=function(nt,st){st||(st={});var ot={};if(st.defaults){if(tt.Long){var it=new tt.Long(0,0,!1);ot.begin=st.longs===String?it.toString():st.longs===Number?it.toNumber():it}else ot.begin=st.longs===String?"0":0;tt.Long?(it=new tt.Long(0,0,!1),ot.end=st.longs===String?it.toString():st.longs===Number?it.toNumber():it):ot.end=st.longs===String?"0":0}return nt.begin!=null&&nt.hasOwnProperty("begin")&&(typeof nt.begin=="number"?ot.begin=st.longs===String?String(nt.begin):nt.begin:ot.begin=st.longs===String?tt.Long.prototype.toString.call(nt.begin):st.longs===Number?new tt.LongBits(nt.begin.low>>>0,nt.begin.high>>>0).toNumber():nt.begin),nt.end!=null&&nt.hasOwnProperty("end")&&(typeof nt.end=="number"?ot.end=st.longs===String?String(nt.end):nt.end:ot.end=st.longs===String?tt.Long.prototype.toString.call(nt.end):st.longs===Number?new tt.LongBits(nt.end.low>>>0,nt.end.high>>>0).toNumber():nt.end),ot},b.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},b}(),$.DataLocation=function(){var b={},nt=Object.create(b);return nt[b[0]="DEFAULT"]=0,nt[b[1]="EXTERNAL"]=1,nt}(),$}(),g.TensorShapeProto=function(){function $(b){if(this.dim=[],b)for(var nt=Object.keys(b),st=0;st<nt.length;++st)b[nt[st]]!=null&&(this[nt[st]]=b[nt[st]])}return $.prototype.dim=tt.emptyArray,$.create=function(b){return new $(b)},$.encode=function(b,nt){if(nt||(nt=et.create()),b.dim!=null&&b.dim.length)for(var st=0;st<b.dim.length;++st)rt.onnx.TensorShapeProto.Dimension.encode(b.dim[st],nt.uint32(10).fork()).ldelim();return nt},$.encodeDelimited=function(b,nt){return this.encode(b,nt).ldelim()},$.decode=function(b,nt){b instanceof _e||(b=_e.create(b));for(var st=nt===void 0?b.len:b.pos+nt,ot=new rt.onnx.TensorShapeProto;b.pos<st;){var it=b.uint32();it>>>3==1?(ot.dim&&ot.dim.length||(ot.dim=[]),ot.dim.push(rt.onnx.TensorShapeProto.Dimension.decode(b,b.uint32()))):b.skipType(7&it)}return ot},$.decodeDelimited=function(b){return b instanceof _e||(b=new _e(b)),this.decode(b,b.uint32())},$.verify=function(b){if(typeof b!="object"||b===null)return"object expected";if(b.dim!=null&&b.hasOwnProperty("dim")){if(!Array.isArray(b.dim))return"dim: array expected";for(var nt=0;nt<b.dim.length;++nt){var st=rt.onnx.TensorShapeProto.Dimension.verify(b.dim[nt]);if(st)return"dim."+st}}return null},$.fromObject=function(b){if(b instanceof rt.onnx.TensorShapeProto)return b;var nt=new rt.onnx.TensorShapeProto;if(b.dim){if(!Array.isArray(b.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");nt.dim=[];for(var st=0;st<b.dim.length;++st){if(typeof b.dim[st]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");nt.dim[st]=rt.onnx.TensorShapeProto.Dimension.fromObject(b.dim[st])}}return nt},$.toObject=function(b,nt){nt||(nt={});var st={};if((nt.arrays||nt.defaults)&&(st.dim=[]),b.dim&&b.dim.length){st.dim=[];for(var ot=0;ot<b.dim.length;++ot)st.dim[ot]=rt.onnx.TensorShapeProto.Dimension.toObject(b.dim[ot],nt)}return st},$.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},$.Dimension=function(){function b(st){if(st)for(var ot=Object.keys(st),it=0;it<ot.length;++it)st[ot[it]]!=null&&(this[ot[it]]=st[ot[it]])}var nt;return b.prototype.dimValue=tt.Long?tt.Long.fromBits(0,0,!1):0,b.prototype.dimParam="",b.prototype.denotation="",Object.defineProperty(b.prototype,"value",{get:tt.oneOfGetter(nt=["dimValue","dimParam"]),set:tt.oneOfSetter(nt)}),b.create=function(st){return new b(st)},b.encode=function(st,ot){return ot||(ot=et.create()),st.dimValue!=null&&st.hasOwnProperty("dimValue")&&ot.uint32(8).int64(st.dimValue),st.dimParam!=null&&st.hasOwnProperty("dimParam")&&ot.uint32(18).string(st.dimParam),st.denotation!=null&&st.hasOwnProperty("denotation")&&ot.uint32(26).string(st.denotation),ot},b.encodeDelimited=function(st,ot){return this.encode(st,ot).ldelim()},b.decode=function(st,ot){st instanceof _e||(st=_e.create(st));for(var it=ot===void 0?st.len:st.pos+ot,at=new rt.onnx.TensorShapeProto.Dimension;st.pos<it;){var lt=st.uint32();switch(lt>>>3){case 1:at.dimValue=st.int64();break;case 2:at.dimParam=st.string();break;case 3:at.denotation=st.string();break;default:st.skipType(7&lt)}}return at},b.decodeDelimited=function(st){return st instanceof _e||(st=new _e(st)),this.decode(st,st.uint32())},b.verify=function(st){if(typeof st!="object"||st===null)return"object expected";var ot={};if(st.dimValue!=null&&st.hasOwnProperty("dimValue")&&(ot.value=1,!(tt.isInteger(st.dimValue)||st.dimValue&&tt.isInteger(st.dimValue.low)&&tt.isInteger(st.dimValue.high))))return"dimValue: integer|Long expected";if(st.dimParam!=null&&st.hasOwnProperty("dimParam")){if(ot.value===1)return"value: multiple values";if(ot.value=1,!tt.isString(st.dimParam))return"dimParam: string expected"}return st.denotation!=null&&st.hasOwnProperty("denotation")&&!tt.isString(st.denotation)?"denotation: string expected":null},b.fromObject=function(st){if(st instanceof rt.onnx.TensorShapeProto.Dimension)return st;var ot=new rt.onnx.TensorShapeProto.Dimension;return st.dimValue!=null&&(tt.Long?(ot.dimValue=tt.Long.fromValue(st.dimValue)).unsigned=!1:typeof st.dimValue=="string"?ot.dimValue=parseInt(st.dimValue,10):typeof st.dimValue=="number"?ot.dimValue=st.dimValue:typeof st.dimValue=="object"&&(ot.dimValue=new tt.LongBits(st.dimValue.low>>>0,st.dimValue.high>>>0).toNumber())),st.dimParam!=null&&(ot.dimParam=String(st.dimParam)),st.denotation!=null&&(ot.denotation=String(st.denotation)),ot},b.toObject=function(st,ot){ot||(ot={});var it={};return ot.defaults&&(it.denotation=""),st.dimValue!=null&&st.hasOwnProperty("dimValue")&&(typeof st.dimValue=="number"?it.dimValue=ot.longs===String?String(st.dimValue):st.dimValue:it.dimValue=ot.longs===String?tt.Long.prototype.toString.call(st.dimValue):ot.longs===Number?new tt.LongBits(st.dimValue.low>>>0,st.dimValue.high>>>0).toNumber():st.dimValue,ot.oneofs&&(it.value="dimValue")),st.dimParam!=null&&st.hasOwnProperty("dimParam")&&(it.dimParam=st.dimParam,ot.oneofs&&(it.value="dimParam")),st.denotation!=null&&st.hasOwnProperty("denotation")&&(it.denotation=st.denotation),it},b.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},b}(),$}(),g.TypeProto=function(){function $(nt){if(nt)for(var st=Object.keys(nt),ot=0;ot<st.length;++ot)nt[st[ot]]!=null&&(this[st[ot]]=nt[st[ot]])}var b;return $.prototype.tensorType=null,$.prototype.denotation="",Object.defineProperty($.prototype,"value",{get:tt.oneOfGetter(b=["tensorType"]),set:tt.oneOfSetter(b)}),$.create=function(nt){return new $(nt)},$.encode=function(nt,st){return st||(st=et.create()),nt.tensorType!=null&&nt.hasOwnProperty("tensorType")&&rt.onnx.TypeProto.Tensor.encode(nt.tensorType,st.uint32(10).fork()).ldelim(),nt.denotation!=null&&nt.hasOwnProperty("denotation")&&st.uint32(50).string(nt.denotation),st},$.encodeDelimited=function(nt,st){return this.encode(nt,st).ldelim()},$.decode=function(nt,st){nt instanceof _e||(nt=_e.create(nt));for(var ot=st===void 0?nt.len:nt.pos+st,it=new rt.onnx.TypeProto;nt.pos<ot;){var at=nt.uint32();switch(at>>>3){case 1:it.tensorType=rt.onnx.TypeProto.Tensor.decode(nt,nt.uint32());break;case 6:it.denotation=nt.string();break;default:nt.skipType(7&at)}}return it},$.decodeDelimited=function(nt){return nt instanceof _e||(nt=new _e(nt)),this.decode(nt,nt.uint32())},$.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.tensorType!=null&&nt.hasOwnProperty("tensorType")){var st=rt.onnx.TypeProto.Tensor.verify(nt.tensorType);if(st)return"tensorType."+st}return nt.denotation!=null&&nt.hasOwnProperty("denotation")&&!tt.isString(nt.denotation)?"denotation: string expected":null},$.fromObject=function(nt){if(nt instanceof rt.onnx.TypeProto)return nt;var st=new rt.onnx.TypeProto;if(nt.tensorType!=null){if(typeof nt.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");st.tensorType=rt.onnx.TypeProto.Tensor.fromObject(nt.tensorType)}return nt.denotation!=null&&(st.denotation=String(nt.denotation)),st},$.toObject=function(nt,st){st||(st={});var ot={};return st.defaults&&(ot.denotation=""),nt.tensorType!=null&&nt.hasOwnProperty("tensorType")&&(ot.tensorType=rt.onnx.TypeProto.Tensor.toObject(nt.tensorType,st),st.oneofs&&(ot.value="tensorType")),nt.denotation!=null&&nt.hasOwnProperty("denotation")&&(ot.denotation=nt.denotation),ot},$.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},$.Tensor=function(){function nt(st){if(st)for(var ot=Object.keys(st),it=0;it<ot.length;++it)st[ot[it]]!=null&&(this[ot[it]]=st[ot[it]])}return nt.prototype.elemType=0,nt.prototype.shape=null,nt.create=function(st){return new nt(st)},nt.encode=function(st,ot){return ot||(ot=et.create()),st.elemType!=null&&st.hasOwnProperty("elemType")&&ot.uint32(8).int32(st.elemType),st.shape!=null&&st.hasOwnProperty("shape")&&rt.onnx.TensorShapeProto.encode(st.shape,ot.uint32(18).fork()).ldelim(),ot},nt.encodeDelimited=function(st,ot){return this.encode(st,ot).ldelim()},nt.decode=function(st,ot){st instanceof _e||(st=_e.create(st));for(var it=ot===void 0?st.len:st.pos+ot,at=new rt.onnx.TypeProto.Tensor;st.pos<it;){var lt=st.uint32();switch(lt>>>3){case 1:at.elemType=st.int32();break;case 2:at.shape=rt.onnx.TensorShapeProto.decode(st,st.uint32());break;default:st.skipType(7&lt)}}return at},nt.decodeDelimited=function(st){return st instanceof _e||(st=new _e(st)),this.decode(st,st.uint32())},nt.verify=function(st){if(typeof st!="object"||st===null)return"object expected";if(st.elemType!=null&&st.hasOwnProperty("elemType")&&!tt.isInteger(st.elemType))return"elemType: integer expected";if(st.shape!=null&&st.hasOwnProperty("shape")){var ot=rt.onnx.TensorShapeProto.verify(st.shape);if(ot)return"shape."+ot}return null},nt.fromObject=function(st){if(st instanceof rt.onnx.TypeProto.Tensor)return st;var ot=new rt.onnx.TypeProto.Tensor;if(st.elemType!=null&&(ot.elemType=0|st.elemType),st.shape!=null){if(typeof st.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");ot.shape=rt.onnx.TensorShapeProto.fromObject(st.shape)}return ot},nt.toObject=function(st,ot){ot||(ot={});var it={};return ot.defaults&&(it.elemType=0,it.shape=null),st.elemType!=null&&st.hasOwnProperty("elemType")&&(it.elemType=st.elemType),st.shape!=null&&st.hasOwnProperty("shape")&&(it.shape=rt.onnx.TensorShapeProto.toObject(st.shape,ot)),it},nt.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},nt}(),$}(),g.OperatorSetIdProto=function(){function $(b){if(b)for(var nt=Object.keys(b),st=0;st<nt.length;++st)b[nt[st]]!=null&&(this[nt[st]]=b[nt[st]])}return $.prototype.domain="",$.prototype.version=tt.Long?tt.Long.fromBits(0,0,!1):0,$.create=function(b){return new $(b)},$.encode=function(b,nt){return nt||(nt=et.create()),b.domain!=null&&b.hasOwnProperty("domain")&&nt.uint32(10).string(b.domain),b.version!=null&&b.hasOwnProperty("version")&&nt.uint32(16).int64(b.version),nt},$.encodeDelimited=function(b,nt){return this.encode(b,nt).ldelim()},$.decode=function(b,nt){b instanceof _e||(b=_e.create(b));for(var st=nt===void 0?b.len:b.pos+nt,ot=new rt.onnx.OperatorSetIdProto;b.pos<st;){var it=b.uint32();switch(it>>>3){case 1:ot.domain=b.string();break;case 2:ot.version=b.int64();break;default:b.skipType(7&it)}}return ot},$.decodeDelimited=function(b){return b instanceof _e||(b=new _e(b)),this.decode(b,b.uint32())},$.verify=function(b){return typeof b!="object"||b===null?"object expected":b.domain!=null&&b.hasOwnProperty("domain")&&!tt.isString(b.domain)?"domain: string expected":b.version!=null&&b.hasOwnProperty("version")&&!(tt.isInteger(b.version)||b.version&&tt.isInteger(b.version.low)&&tt.isInteger(b.version.high))?"version: integer|Long expected":null},$.fromObject=function(b){if(b instanceof rt.onnx.OperatorSetIdProto)return b;var nt=new rt.onnx.OperatorSetIdProto;return b.domain!=null&&(nt.domain=String(b.domain)),b.version!=null&&(tt.Long?(nt.version=tt.Long.fromValue(b.version)).unsigned=!1:typeof b.version=="string"?nt.version=parseInt(b.version,10):typeof b.version=="number"?nt.version=b.version:typeof b.version=="object"&&(nt.version=new tt.LongBits(b.version.low>>>0,b.version.high>>>0).toNumber())),nt},$.toObject=function(b,nt){nt||(nt={});var st={};if(nt.defaults)if(st.domain="",tt.Long){var ot=new tt.Long(0,0,!1);st.version=nt.longs===String?ot.toString():nt.longs===Number?ot.toNumber():ot}else st.version=nt.longs===String?"0":0;return b.domain!=null&&b.hasOwnProperty("domain")&&(st.domain=b.domain),b.version!=null&&b.hasOwnProperty("version")&&(typeof b.version=="number"?st.version=nt.longs===String?String(b.version):b.version:st.version=nt.longs===String?tt.Long.prototype.toString.call(b.version):nt.longs===Number?new tt.LongBits(b.version.low>>>0,b.version.high>>>0).toNumber():b.version),st},$.prototype.toJSON=function(){return this.constructor.toObject(this,_.util.toJSONOptions)},$}(),g),a.exports=rt},2100:(a,e,c)=>{a.exports=c(9482)},9482:(a,e,c)=>{var d=e;function h(){d.util._configure(),d.Writer._configure(d.BufferWriter),d.Reader._configure(d.BufferReader)}d.build="minimal",d.Writer=c(1173),d.BufferWriter=c(3155),d.Reader=c(1408),d.BufferReader=c(593),d.util=c(9693),d.rpc=c(5994),d.roots=c(5054),d.configure=h,h()},1408:(a,e,c)=>{a.exports=et;var d,h=c(9693),g=h.LongBits,_=h.utf8;function _e(ot,it){return RangeError("index out of range: "+ot.pos+" + "+(it||1)+" > "+ot.len)}function et(ot){this.buf=ot,this.pos=0,this.len=ot.length}var tt,rt=typeof Uint8Array<"u"?function(ot){if(ot instanceof Uint8Array||Array.isArray(ot))return new et(ot);throw Error("illegal buffer")}:function(ot){if(Array.isArray(ot))return new et(ot);throw Error("illegal buffer")},$=function(){return h.Buffer?function(ot){return(et.create=function(it){return h.Buffer.isBuffer(it)?new d(it):rt(it)})(ot)}:rt};function b(){var ot=new g(0,0),it=0;if(!(this.len-this.pos>4)){for(;it<3;++it){if(this.pos>=this.len)throw _e(this);if(ot.lo=(ot.lo|(127&this.buf[this.pos])<<7*it)>>>0,this.buf[this.pos++]<128)return ot}return ot.lo=(ot.lo|(127&this.buf[this.pos++])<<7*it)>>>0,ot}for(;it<4;++it)if(ot.lo=(ot.lo|(127&this.buf[this.pos])<<7*it)>>>0,this.buf[this.pos++]<128)return ot;if(ot.lo=(ot.lo|(127&this.buf[this.pos])<<28)>>>0,ot.hi=(ot.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return ot;if(it=0,this.len-this.pos>4){for(;it<5;++it)if(ot.hi=(ot.hi|(127&this.buf[this.pos])<<7*it+3)>>>0,this.buf[this.pos++]<128)return ot}else for(;it<5;++it){if(this.pos>=this.len)throw _e(this);if(ot.hi=(ot.hi|(127&this.buf[this.pos])<<7*it+3)>>>0,this.buf[this.pos++]<128)return ot}throw Error("invalid varint encoding")}function nt(ot,it){return(ot[it-4]|ot[it-3]<<8|ot[it-2]<<16|ot[it-1]<<24)>>>0}function st(){if(this.pos+8>this.len)throw _e(this,8);return new g(nt(this.buf,this.pos+=4),nt(this.buf,this.pos+=4))}et.create=$(),et.prototype._slice=h.Array.prototype.subarray||h.Array.prototype.slice,et.prototype.uint32=(tt=4294967295,function(){if(tt=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(tt=(tt|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(tt=(tt|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(tt=(tt|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(tt=(tt|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return tt;if((this.pos+=5)>this.len)throw this.pos=this.len,_e(this,10);return tt}),et.prototype.int32=function(){return 0|this.uint32()},et.prototype.sint32=function(){var ot=this.uint32();return ot>>>1^-(1&ot)|0},et.prototype.bool=function(){return this.uint32()!==0},et.prototype.fixed32=function(){if(this.pos+4>this.len)throw _e(this,4);return nt(this.buf,this.pos+=4)},et.prototype.sfixed32=function(){if(this.pos+4>this.len)throw _e(this,4);return 0|nt(this.buf,this.pos+=4)},et.prototype.float=function(){if(this.pos+4>this.len)throw _e(this,4);var ot=h.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ot},et.prototype.double=function(){if(this.pos+8>this.len)throw _e(this,4);var ot=h.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ot},et.prototype.bytes=function(){var ot=this.uint32(),it=this.pos,at=this.pos+ot;if(at>this.len)throw _e(this,ot);return this.pos+=ot,Array.isArray(this.buf)?this.buf.slice(it,at):it===at?new this.buf.constructor(0):this._slice.call(this.buf,it,at)},et.prototype.string=function(){var ot=this.bytes();return _.read(ot,0,ot.length)},et.prototype.skip=function(ot){if(typeof ot=="number"){if(this.pos+ot>this.len)throw _e(this,ot);this.pos+=ot}else do if(this.pos>=this.len)throw _e(this);while(128&this.buf[this.pos++]);return this},et.prototype.skipType=function(ot){switch(ot){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(ot=7&this.uint32())!=4;)this.skipType(ot);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+ot+" at offset "+this.pos)}return this},et._configure=function(ot){d=ot,et.create=$(),d._configure();var it=h.Long?"toLong":"toNumber";h.merge(et.prototype,{int64:function(){return b.call(this)[it](!1)},uint64:function(){return b.call(this)[it](!0)},sint64:function(){return b.call(this).zzDecode()[it](!1)},fixed64:function(){return st.call(this)[it](!0)},sfixed64:function(){return st.call(this)[it](!1)}})}},593:(a,e,c)=>{a.exports=g;var d=c(1408);(g.prototype=Object.create(d.prototype)).constructor=g;var h=c(9693);function g(_){d.call(this,_)}g._configure=function(){h.Buffer&&(g.prototype._slice=h.Buffer.prototype.slice)},g.prototype.string=function(){var _=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+_,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+_,this.len))},g._configure()},5054:a=>{a.exports={}},5994:(a,e,c)=>{e.Service=c(7948)},7948:(a,e,c)=>{a.exports=h;var d=c(9693);function h(g,_,_e){if(typeof g!="function")throw TypeError("rpcImpl must be a function");d.EventEmitter.call(this),this.rpcImpl=g,this.requestDelimited=!!_,this.responseDelimited=!!_e}(h.prototype=Object.create(d.EventEmitter.prototype)).constructor=h,h.prototype.rpcCall=function g(_,_e,et,tt,rt){if(!tt)throw TypeError("request must be specified");var $=this;if(!rt)return d.asPromise(g,$,_,_e,et,tt);if($.rpcImpl)try{return $.rpcImpl(_,_e[$.requestDelimited?"encodeDelimited":"encode"](tt).finish(),function(b,nt){if(b)return $.emit("error",b,_),rt(b);if(nt!==null){if(!(nt instanceof et))try{nt=et[$.responseDelimited?"decodeDelimited":"decode"](nt)}catch(st){return $.emit("error",st,_),rt(st)}return $.emit("data",nt,_),rt(null,nt)}$.end(!0)})}catch(b){return $.emit("error",b,_),void setTimeout(function(){rt(b)},0)}else setTimeout(function(){rt(Error("already ended"))},0)},h.prototype.end=function(g){return this.rpcImpl&&(g||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(a,e,c)=>{a.exports=h;var d=c(9693);function h(et,tt){this.lo=et>>>0,this.hi=tt>>>0}var g=h.zero=new h(0,0);g.toNumber=function(){return 0},g.zzEncode=g.zzDecode=function(){return this},g.length=function(){return 1};var _=h.zeroHash="\0\0\0\0\0\0\0\0";h.fromNumber=function(et){if(et===0)return g;var tt=et<0;tt&&(et=-et);var rt=et>>>0,$=(et-rt)/4294967296>>>0;return tt&&($=~$>>>0,rt=~rt>>>0,++rt>4294967295&&(rt=0,++$>4294967295&&($=0))),new h(rt,$)},h.from=function(et){if(typeof et=="number")return h.fromNumber(et);if(d.isString(et)){if(!d.Long)return h.fromNumber(parseInt(et,10));et=d.Long.fromString(et)}return et.low||et.high?new h(et.low>>>0,et.high>>>0):g},h.prototype.toNumber=function(et){if(!et&&this.hi>>>31){var tt=1+~this.lo>>>0,rt=~this.hi>>>0;return tt||(rt=rt+1>>>0),-(tt+4294967296*rt)}return this.lo+4294967296*this.hi},h.prototype.toLong=function(et){return d.Long?new d.Long(0|this.lo,0|this.hi,!!et):{low:0|this.lo,high:0|this.hi,unsigned:!!et}};var _e=String.prototype.charCodeAt;h.fromHash=function(et){return et===_?g:new h((_e.call(et,0)|_e.call(et,1)<<8|_e.call(et,2)<<16|_e.call(et,3)<<24)>>>0,(_e.call(et,4)|_e.call(et,5)<<8|_e.call(et,6)<<16|_e.call(et,7)<<24)>>>0)},h.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},h.prototype.zzEncode=function(){var et=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^et)>>>0,this.lo=(this.lo<<1^et)>>>0,this},h.prototype.zzDecode=function(){var et=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^et)>>>0,this.hi=(this.hi>>>1^et)>>>0,this},h.prototype.length=function(){var et=this.lo,tt=(this.lo>>>28|this.hi<<4)>>>0,rt=this.hi>>>24;return rt===0?tt===0?et<16384?et<128?1:2:et<2097152?3:4:tt<16384?tt<128?5:6:tt<2097152?7:8:rt<128?9:10}},9693:function(a,e,c){var d=e;function h(_,_e,et){for(var tt=Object.keys(_e),rt=0;rt<tt.length;++rt)_[tt[rt]]!==void 0&&et||(_[tt[rt]]=_e[tt[rt]]);return _}function g(_){function _e(et,tt){if(!(this instanceof _e))return new _e(et,tt);Object.defineProperty(this,"message",{get:function(){return et}}),Error.captureStackTrace?Error.captureStackTrace(this,_e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),tt&&h(this,tt)}return(_e.prototype=Object.create(Error.prototype)).constructor=_e,Object.defineProperty(_e.prototype,"name",{get:function(){return _}}),_e.prototype.toString=function(){return this.name+": "+this.message},_e}d.asPromise=c(4537),d.base64=c(7419),d.EventEmitter=c(9211),d.float=c(945),d.inquire=c(7199),d.utf8=c(4997),d.pool=c(6662),d.LongBits=c(1945),d.isNode=!!(c.g!==void 0&&c.g&&c.g.process&&c.g.process.versions&&c.g.process.versions.node),d.global=d.isNode&&c.g||typeof window<"u"&&window||typeof self<"u"&&self||this,d.emptyArray=Object.freeze?Object.freeze([]):[],d.emptyObject=Object.freeze?Object.freeze({}):{},d.isInteger=Number.isInteger||function(_){return typeof _=="number"&&isFinite(_)&&Math.floor(_)===_},d.isString=function(_){return typeof _=="string"||_ instanceof String},d.isObject=function(_){return _&&typeof _=="object"},d.isset=d.isSet=function(_,_e){var et=_[_e];return!(et==null||!_.hasOwnProperty(_e))&&(typeof et!="object"||(Array.isArray(et)?et.length:Object.keys(et).length)>0)},d.Buffer=function(){try{var _=d.inquire("buffer").Buffer;return _.prototype.utf8Write?_:null}catch{return null}}(),d._Buffer_from=null,d._Buffer_allocUnsafe=null,d.newBuffer=function(_){return typeof _=="number"?d.Buffer?d._Buffer_allocUnsafe(_):new d.Array(_):d.Buffer?d._Buffer_from(_):typeof Uint8Array>"u"?_:new Uint8Array(_)},d.Array=typeof Uint8Array<"u"?Uint8Array:Array,d.Long=d.global.dcodeIO&&d.global.dcodeIO.Long||d.global.Long||d.inquire("long"),d.key2Re=/^true|false|0|1$/,d.key32Re=/^-?(?:0|[1-9][0-9]*)$/,d.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,d.longToHash=function(_){return _?d.LongBits.from(_).toHash():d.LongBits.zeroHash},d.longFromHash=function(_,_e){var et=d.LongBits.fromHash(_);return d.Long?d.Long.fromBits(et.lo,et.hi,_e):et.toNumber(!!_e)},d.merge=h,d.lcFirst=function(_){return _.charAt(0).toLowerCase()+_.substring(1)},d.newError=g,d.ProtocolError=g("ProtocolError"),d.oneOfGetter=function(_){for(var _e={},et=0;et<_.length;++et)_e[_[et]]=1;return function(){for(var tt=Object.keys(this),rt=tt.length-1;rt>-1;--rt)if(_e[tt[rt]]===1&&this[tt[rt]]!==void 0&&this[tt[rt]]!==null)return tt[rt]}},d.oneOfSetter=function(_){return function(_e){for(var et=0;et<_.length;++et)_[et]!==_e&&delete this[_[et]]}},d.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},d._configure=function(){var _=d.Buffer;_?(d._Buffer_from=_.from!==Uint8Array.from&&_.from||function(_e,et){return new _(_e,et)},d._Buffer_allocUnsafe=_.allocUnsafe||function(_e){return new _(_e)}):d._Buffer_from=d._Buffer_allocUnsafe=null}},1173:(a,e,c)=>{a.exports=$;var d,h=c(9693),g=h.LongBits,_=h.base64,_e=h.utf8;function et(lt,dt,ht){this.fn=lt,this.len=dt,this.next=void 0,this.val=ht}function tt(){}function rt(lt){this.head=lt.head,this.tail=lt.tail,this.len=lt.len,this.next=lt.states}function $(){this.len=0,this.head=new et(tt,0,0),this.tail=this.head,this.states=null}var b=function(){return h.Buffer?function(){return($.create=function(){return new d})()}:function(){return new $}};function nt(lt,dt,ht){dt[ht]=255&lt}function st(lt,dt){this.len=lt,this.next=void 0,this.val=dt}function ot(lt,dt,ht){for(;lt.hi;)dt[ht++]=127&lt.lo|128,lt.lo=(lt.lo>>>7|lt.hi<<25)>>>0,lt.hi>>>=7;for(;lt.lo>127;)dt[ht++]=127&lt.lo|128,lt.lo=lt.lo>>>7;dt[ht++]=lt.lo}function it(lt,dt,ht){dt[ht]=255&lt,dt[ht+1]=lt>>>8&255,dt[ht+2]=lt>>>16&255,dt[ht+3]=lt>>>24}$.create=b(),$.alloc=function(lt){return new h.Array(lt)},h.Array!==Array&&($.alloc=h.pool($.alloc,h.Array.prototype.subarray)),$.prototype._push=function(lt,dt,ht){return this.tail=this.tail.next=new et(lt,dt,ht),this.len+=dt,this},st.prototype=Object.create(et.prototype),st.prototype.fn=function(lt,dt,ht){for(;lt>127;)dt[ht++]=127&lt|128,lt>>>=7;dt[ht]=lt},$.prototype.uint32=function(lt){return this.len+=(this.tail=this.tail.next=new st((lt>>>=0)<128?1:lt<16384?2:lt<2097152?3:lt<268435456?4:5,lt)).len,this},$.prototype.int32=function(lt){return lt<0?this._push(ot,10,g.fromNumber(lt)):this.uint32(lt)},$.prototype.sint32=function(lt){return this.uint32((lt<<1^lt>>31)>>>0)},$.prototype.uint64=function(lt){var dt=g.from(lt);return this._push(ot,dt.length(),dt)},$.prototype.int64=$.prototype.uint64,$.prototype.sint64=function(lt){var dt=g.from(lt).zzEncode();return this._push(ot,dt.length(),dt)},$.prototype.bool=function(lt){return this._push(nt,1,lt?1:0)},$.prototype.fixed32=function(lt){return this._push(it,4,lt>>>0)},$.prototype.sfixed32=$.prototype.fixed32,$.prototype.fixed64=function(lt){var dt=g.from(lt);return this._push(it,4,dt.lo)._push(it,4,dt.hi)},$.prototype.sfixed64=$.prototype.fixed64,$.prototype.float=function(lt){return this._push(h.float.writeFloatLE,4,lt)},$.prototype.double=function(lt){return this._push(h.float.writeDoubleLE,8,lt)};var at=h.Array.prototype.set?function(lt,dt,ht){dt.set(lt,ht)}:function(lt,dt,ht){for(var pt=0;pt<lt.length;++pt)dt[ht+pt]=lt[pt]};$.prototype.bytes=function(lt){var dt=lt.length>>>0;if(!dt)return this._push(nt,1,0);if(h.isString(lt)){var ht=$.alloc(dt=_.length(lt));_.decode(lt,ht,0),lt=ht}return this.uint32(dt)._push(at,dt,lt)},$.prototype.string=function(lt){var dt=_e.length(lt);return dt?this.uint32(dt)._push(_e.write,dt,lt):this._push(nt,1,0)},$.prototype.fork=function(){return this.states=new rt(this),this.head=this.tail=new et(tt,0,0),this.len=0,this},$.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new et(tt,0,0),this.len=0),this},$.prototype.ldelim=function(){var lt=this.head,dt=this.tail,ht=this.len;return this.reset().uint32(ht),ht&&(this.tail.next=lt.next,this.tail=dt,this.len+=ht),this},$.prototype.finish=function(){for(var lt=this.head.next,dt=this.constructor.alloc(this.len),ht=0;lt;)lt.fn(lt.val,dt,ht),ht+=lt.len,lt=lt.next;return dt},$._configure=function(lt){d=lt,$.create=b(),d._configure()}},3155:(a,e,c)=>{a.exports=g;var d=c(1173);(g.prototype=Object.create(d.prototype)).constructor=g;var h=c(9693);function g(){d.call(this)}function _(_e,et,tt){_e.length<40?h.utf8.write(_e,et,tt):et.utf8Write?et.utf8Write(_e,tt):et.write(_e,tt)}g._configure=function(){g.alloc=h._Buffer_allocUnsafe,g.writeBytesBuffer=h.Buffer&&h.Buffer.prototype instanceof Uint8Array&&h.Buffer.prototype.set.name==="set"?function(_e,et,tt){et.set(_e,tt)}:function(_e,et,tt){if(_e.copy)_e.copy(et,tt,0,_e.length);else for(var rt=0;rt<_e.length;)et[tt++]=_e[rt++]}},g.prototype.bytes=function(_e){h.isString(_e)&&(_e=h._Buffer_from(_e,"base64"));var et=_e.length>>>0;return this.uint32(et),et&&this._push(g.writeBytesBuffer,et,_e),this},g.prototype.string=function(_e){var et=h.Buffer.byteLength(_e);return this.uint32(et),et&&this._push(_,et,_e),this},g._configure()},7714:(a,e,c)=>{e.R=void 0;const d=c(6919),h=c(7448);e.R=new class{async init(){}async createSessionHandler(g,_){const _e=new d.Session(_);return await _e.loadModel(g),new h.OnnxjsSessionHandler(_e)}}},4200:(a,e,c)=>{e.c8=e.rX=void 0;const d=c(1670),h=c(5381),g=c(2157),_=c(2306);e.rX=()=>{if((typeof d.env.wasm.initTimeout!="number"||d.env.wasm.initTimeout<0)&&(d.env.wasm.initTimeout=0),typeof d.env.wasm.simd!="boolean"&&(d.env.wasm.simd=!0),typeof d.env.wasm.proxy!="boolean"&&(d.env.wasm.proxy=!1),typeof d.env.wasm.numThreads!="number"||!Number.isInteger(d.env.wasm.numThreads)||d.env.wasm.numThreads<=0){const _e=typeof navigator>"u"?(0,h.cpus)().length:navigator.hardwareConcurrency;d.env.wasm.numThreads=Math.min(4,Math.ceil((_e||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,g.initWasm)()}async createSessionHandler(_e,et){const tt=new _.OnnxruntimeWebAssemblySessionHandler;return await tt.loadModel(_e,et),Promise.resolve(tt)}}},6018:function(a,e,c){var d=this&&this.__createBinding||(Object.create?function(_,_e,et,tt){tt===void 0&&(tt=et);var rt=Object.getOwnPropertyDescriptor(_e,et);rt&&!("get"in rt?!_e.__esModule:rt.writable||rt.configurable)||(rt={enumerable:!0,get:function(){return _e[et]}}),Object.defineProperty(_,tt,rt)}:function(_,_e,et,tt){tt===void 0&&(tt=et),_[tt]=_e[et]}),h=this&&this.__exportStar||function(_,_e){for(var et in _)et==="default"||Object.prototype.hasOwnProperty.call(_e,et)||d(_e,_,et)};Object.defineProperty(e,"__esModule",{value:!0}),h(c(1670),e);const g=c(1670);{const _=c(7714).R;(0,g.registerBackend)("webgl",_,-10)}{const _=c(4200).c8;(0,g.registerBackend)("cpu",_,10),(0,g.registerBackend)("wasm",_,10),(0,g.registerBackend)("xnnpack",_,9)}},246:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class c{constructor(h){Object.assign(this,h)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(h=>`${this[h]}`).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=d=>new c(d)},7778:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const d=c(1446),h=c(9395),g=c(9162),_=c(2517);var _e=h.onnxruntime.experimental.fbs;class et{constructor(rt){if(this._attributes=new Map,rt!=null){for(const $ of rt)$ instanceof d.onnx.AttributeProto?this._attributes.set($.name,[et.getValue($),et.getType($)]):$ instanceof _e.Attribute&&this._attributes.set($.name(),[et.getValue($),et.getType($)]);if(this._attributes.size<rt.length)throw new Error("duplicated attribute names")}}set(rt,$,b){this._attributes.set(rt,[b,$])}delete(rt){this._attributes.delete(rt)}getFloat(rt,$){return this.get(rt,"float",$)}getInt(rt,$){return this.get(rt,"int",$)}getString(rt,$){return this.get(rt,"string",$)}getTensor(rt,$){return this.get(rt,"tensor",$)}getFloats(rt,$){return this.get(rt,"floats",$)}getInts(rt,$){return this.get(rt,"ints",$)}getStrings(rt,$){return this.get(rt,"strings",$)}getTensors(rt,$){return this.get(rt,"tensors",$)}get(rt,$,b){const nt=this._attributes.get(rt);if(nt===void 0){if(b!==void 0)return b;throw new Error(`required attribute not found: ${rt}`)}if(nt[1]!==$)throw new Error(`type mismatch: expected ${$} but got ${nt[1]}`);return nt[0]}static getType(rt){const $=rt instanceof d.onnx.AttributeProto?rt.type:rt.type();switch($){case d.onnx.AttributeProto.AttributeType.FLOAT:return"float";case d.onnx.AttributeProto.AttributeType.INT:return"int";case d.onnx.AttributeProto.AttributeType.STRING:return"string";case d.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case d.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case d.onnx.AttributeProto.AttributeType.INTS:return"ints";case d.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case d.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${d.onnx.AttributeProto.AttributeType[$]}`)}}static getValue(rt){const $=rt instanceof d.onnx.AttributeProto?rt.type:rt.type();if($===d.onnx.AttributeProto.AttributeType.GRAPH||$===d.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const b=this.getValueNoCheck(rt);if($===d.onnx.AttributeProto.AttributeType.INT&&_.LongUtil.isLong(b))return _.LongUtil.longToNumber(b);if($===d.onnx.AttributeProto.AttributeType.INTS){const nt=b,st=new Array(nt.length);for(let ot=0;ot<nt.length;ot++){const it=nt[ot];st[ot]=_.LongUtil.longToNumber(it)}return st}if($===d.onnx.AttributeProto.AttributeType.TENSOR)return rt instanceof d.onnx.AttributeProto?g.Tensor.fromProto(b):g.Tensor.fromOrtTensor(b);if($===d.onnx.AttributeProto.AttributeType.TENSORS){if(rt instanceof d.onnx.AttributeProto)return b.map(nt=>g.Tensor.fromProto(nt));if(rt instanceof _e.Attribute)return b.map(nt=>g.Tensor.fromOrtTensor(nt))}if($===d.onnx.AttributeProto.AttributeType.STRING&&rt instanceof d.onnx.AttributeProto){const nt=b;return(0,_.decodeUtf8String)(nt)}return $===d.onnx.AttributeProto.AttributeType.STRINGS&&rt instanceof d.onnx.AttributeProto?b.map(_.decodeUtf8String):b}static getValueNoCheck(rt){return rt instanceof d.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(rt):this.getValueNoCheckFromOrtFormat(rt)}static getValueNoCheckFromOnnxFormat(rt){switch(rt.type){case d.onnx.AttributeProto.AttributeType.FLOAT:return rt.f;case d.onnx.AttributeProto.AttributeType.INT:return rt.i;case d.onnx.AttributeProto.AttributeType.STRING:return rt.s;case d.onnx.AttributeProto.AttributeType.TENSOR:return rt.t;case d.onnx.AttributeProto.AttributeType.GRAPH:return rt.g;case d.onnx.AttributeProto.AttributeType.FLOATS:return rt.floats;case d.onnx.AttributeProto.AttributeType.INTS:return rt.ints;case d.onnx.AttributeProto.AttributeType.STRINGS:return rt.strings;case d.onnx.AttributeProto.AttributeType.TENSORS:return rt.tensors;case d.onnx.AttributeProto.AttributeType.GRAPHS:return rt.graphs;default:throw new Error(`unsupported attribute type: ${d.onnx.AttributeProto.AttributeType[rt.type]}`)}}static getValueNoCheckFromOrtFormat(rt){switch(rt.type()){case _e.AttributeType.FLOAT:return rt.f();case _e.AttributeType.INT:return rt.i();case _e.AttributeType.STRING:return rt.s();case _e.AttributeType.TENSOR:return rt.t();case _e.AttributeType.GRAPH:return rt.g();case _e.AttributeType.FLOATS:return rt.floatsArray();case _e.AttributeType.INTS:{const $=[];for(let b=0;b<rt.intsLength();b++)$.push(rt.ints(b));return $}case _e.AttributeType.STRINGS:{const $=[];for(let b=0;b<rt.stringsLength();b++)$.push(rt.strings(b));return $}case _e.AttributeType.TENSORS:{const $=[];for(let b=0;b<rt.tensorsLength();b++)$.push(rt.tensors(b));return $}default:throw new Error(`unsupported attribute type: ${_e.AttributeType[rt.type()]}`)}}}e.Attribute=et},7091:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const d=c(5038),h=new Map;async function g(_){const _e=e.backend;if(_e[_]!==void 0&&function(et){const tt=et;return"initialize"in tt&&typeof tt.initialize=="function"&&"createSessionHandler"in tt&&typeof tt.createSessionHandler=="function"&&"dispose"in tt&&typeof tt.dispose=="function"}(_e[_])){const et=_e[_];let tt=et.initialize();if(typeof tt=="object"&&"then"in tt&&(tt=await tt),tt)return h.set(_,et),et}}e.backend={webgl:new d.WebGLBackend},e.resolveBackend=async function _(_e){if(!_e)return _(["webgl"]);{const et=typeof _e=="string"?[_e]:_e;for(const tt of et){const rt=h.get(tt);if(rt)return rt;const $=await g(tt);if($)return $}}throw new Error("no available backend to use")}},5038:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const d=c(1670),h=c(6231),g=c(6416),_=c(7305);e.WebGLBackend=class{get contextId(){return d.env.webgl.contextId}set contextId(_e){d.env.webgl.contextId=_e}get matmulMaxBatchSize(){return d.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(_e){d.env.webgl.matmulMaxBatchSize=_e}get textureCacheMode(){return d.env.webgl.textureCacheMode}set textureCacheMode(_e){d.env.webgl.textureCacheMode=_e}get pack(){return d.env.webgl.pack}set pack(_e){d.env.webgl.pack=_e}get async(){return d.env.webgl.async}set async(_e){d.env.webgl.async=_e}initialize(){try{return this.glContext=(0,_.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),h.Logger.setWithEnv(d.env),h.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(_e){return h.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${_e}`),!1}}createSessionHandler(_e){return new g.WebGLSessionHandler(this,_e)}dispose(){this.glContext.dispose()}}},5107:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const d=c(2517),h=c(8520),g=c(5060),_=c(7859),_e=c(9390);class et extends h.GlslLib{constructor(rt){super(rt)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new h.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new h.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const rt=this.context.outputTextureLayout;return rt.isPacked?this.getPackedOutputSamplingSnippet(rt):this.getUnpackedOutputSamplingSnippet(rt)}getPackedOutputSamplingSnippet(rt){const $=rt.unpackedShape,b=[rt.width,rt.height],nt={},st="getOutputCoords";switch($.length){case 0:nt[st]=this.getOutputScalarCoords();break;case 1:nt[st]=this.getOutputPacked1DCoords($,b);break;case 2:nt[st]=this.getOutputPacked2DCoords($,b);break;case 3:nt[st]=this.getOutputPacked3DCoords($,b);break;default:nt[st]=this.getOutputPackedNDCoords($,b)}const ot=`
      void setOutput(vec4 val) {
        ${(0,g.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return nt.floatTextureSetRGBA=new h.GlslLibRoutine(ot),nt}getUnpackedOutputSamplingSnippet(rt){const $=rt.unpackedShape,b=[rt.width,rt.height],nt={},st="getOutputCoords";switch($.length){case 0:nt[st]=this.getOutputScalarCoords();break;case 1:nt[st]=this.getOutputUnpacked1DCoords($,b);break;case 2:nt[st]=this.getOutputUnpacked2DCoords($,b);break;case 3:nt[st]=this.getOutputUnpacked3DCoords($,b);break;case 4:nt[st]=this.getOutputUnpacked4DCoords($,b);break;case 5:nt[st]=this.getOutputUnpacked5DCoords($,b);break;case 6:nt[st]=this.getOutputUnpacked6DCoords($,b);break;default:throw new Error(`Unsupported output dimensionality: ${$.length}`)}const ot=`
        void setOutput(float val) {
          ${(0,g.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return nt.floatTextureSetR=new h.GlslLibRoutine(ot),nt}getOutputScalarCoords(){return new h.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(rt,$){const b=$;let nt="";return b[0]===1?(nt=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${b[1]}.0);
          }
        `,new h.GlslLibRoutine(nt)):b[1]===1?(nt=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${b[0]}.0);
          }
        `,new h.GlslLibRoutine(nt)):(nt=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${b[0]}, ${b[1]}));
          return 2 * (resTexRC.y * ${b[0]} + resTexRC.x);
        }
      `,new h.GlslLibRoutine(nt))}getOutputPacked2DCoords(rt,$){let b="";if(d.ArrayUtil.arraysEqual(rt,$))return b=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${$[0]}, ${$[1]}));
        }
      `,new h.GlslLibRoutine(b);const nt=$,st=Math.ceil(rt[1]/2);return b=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${nt[0]}, ${nt[1]}));

          int index = resTexRC.y * ${nt[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${st}) * 2;
          int c = 2 * (index / ${st});

          return ivec2(r, c);
        }
      `,new h.GlslLibRoutine(b)}getOutputPacked3DCoords(rt,$){const b=[$[0],$[1]],nt=Math.ceil(rt[2]/2),st=nt*Math.ceil(rt[1]/2),ot=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${b[0]}, ${b[1]}));
          int index = resTexRC.y * ${b[0]} + resTexRC.x;

          int b = index / ${st};
          index -= b * ${st};

          // reverse r and c order for packed texture
          int r = imod(index, ${nt}) * 2;
          int c = 2 * (index / ${nt});

          return ivec3(b, r, c);
        }
      `;return new h.GlslLibRoutine(ot)}getOutputPackedNDCoords(rt,$){const b=[$[0],$[1]],nt=Math.ceil(rt[rt.length-1]/2),st=nt*Math.ceil(rt[rt.length-2]/2);let ot=st,it="",at="b, r, c";for(let dt=2;dt<rt.length-1;dt++)ot*=rt[rt.length-dt-1],it=`
      int b${dt} = index / ${ot};
      index -= b${dt} * ${ot};
    `+it,at=`b${dt}, `+at;const lt=`
      ivec${rt.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${b[0]}, ${b[1]}));
        int index = resTexRC.y * ${b[0]} + resTexRC.x;

        ${it}

        int b = index / ${st};
        index -= b * ${st};

        // reverse r and c order for packed texture
        int r = imod(index, ${nt}) * 2;
        int c = 2 * (index / ${nt});

        return ivec${rt.length}(${at});
      }
    `;return new h.GlslLibRoutine(lt)}getOutputUnpacked1DCoords(rt,$){const b=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${$[0]}, ${$[1]}));
          return resTexRC.y * ${$[0]} + resTexRC.x;
        }
      `;return new h.GlslLibRoutine(b)}getOutputUnpacked2DCoords(rt,$){const b=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${$[0]}, ${$[1]}));
          int index = resTexRC.y * ${$[0]} + resTexRC.x;
          int r = index / ${rt[1]};
          int c = index - r * ${rt[1]};
          return ivec2(r, c);
        }
      `;return new h.GlslLibRoutine(b)}getOutputUnpacked3DCoords(rt,$){let b="";const nt=rt.length;let st=null;nt<2&&(st=[]),st=new Array(nt-1),st[nt-2]=rt[nt-1];for(let at=nt-3;at>=0;--at)st[at]=st[at+1]*rt[at+1];const ot=["r","c","d"],it=st.map((at,lt)=>`int ${ot[lt]} = index / ${at}; ${lt===st.length-1?`int ${ot[lt+1]} = index - ${ot[lt]} * ${at}`:`index -= ${ot[lt]} * ${at}`};`).join("");return b=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${$[0]}, ${$[1]}));
          int index = resTexRC.y * ${$[0]} + resTexRC.x;
          ${it}
          return ivec3(r, c, d);
        }
      `,new h.GlslLibRoutine(b)}getOutputUnpacked4DCoords(rt,$){let b="";const nt=rt.length;let st=null;nt<2&&(st=[]),st=new Array(nt-1),st[nt-2]=rt[nt-1];for(let at=nt-3;at>=0;--at)st[at]=st[at+1]*rt[at+1];const ot=["r","c","d","d2"],it=st.map((at,lt)=>`int ${ot[lt]} = index / ${at}; ${lt===st.length-1?`int ${ot[lt+1]} = index - ${ot[lt]} * ${at}`:`index -= ${ot[lt]} * ${at}`};`).join("");return b=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${$[0]}, ${$[1]}));
          int index = resTexRC.y * ${$[0]} + resTexRC.x;
          ${it}
          return ivec4(r, c, d, d2);
        }
      `,new h.GlslLibRoutine(b)}getOutputUnpacked5DCoords(rt,$){let b="";const nt=rt.length;let st=null;nt<2&&(st=[]),st=new Array(nt-1),st[nt-2]=rt[nt-1];for(let at=nt-3;at>=0;--at)st[at]=st[at+1]*rt[at+1];const ot=["r","c","d","d2","d3"],it=st.map((at,lt)=>`int ${ot[lt]} = index / ${at}; ${lt===st.length-1?`int ${ot[lt+1]} = index - ${ot[lt]} * ${at}`:`index -= ${ot[lt]} * ${at}`};`).join("");return b=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${$[0]}, ${$[1]}));
          int index = resTexRC.y * ${$[0]} + resTexRC.x;
          ${it}
          return ivec5(r, c, d, d2, d3);
        }
      `,new h.GlslLibRoutine(b)}getOutputUnpacked6DCoords(rt,$){let b="";const nt=rt.length;let st=null;nt<2&&(st=[]),st=new Array(nt-1),st[nt-2]=rt[nt-1];for(let at=nt-3;at>=0;--at)st[at]=st[at+1]*rt[at+1];const ot=["r","c","d","d2","d3","d4"],it=st.map((at,lt)=>`int ${ot[lt]} = index / ${at}; ${lt===st.length-1?`int ${ot[lt+1]} = index - ${ot[lt]} * ${at}`:`index -= ${ot[lt]} * ${at}`};`).join("");return b=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${$[0]}, ${$[1]}));
         int index = resTexRC.y * ${$[0]} + resTexRC.x;
         ${it}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new h.GlslLibRoutine(b)}getCommonUtilFuncs(){const rt={};let $="uvFromFlat";rt[$]=new h.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),$="packedUVfrom1D",rt[$]=new h.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),$="packedUVfrom2D",rt[$]=new h.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),$="packedUVfrom3D",rt[$]=new h.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),$="sampleTexture";const b=(0,g.getGlsl)(this.context.glContext.version);return rt[$]=new h.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${b.texture2D}(textureSampler, uv).r;
        }`),rt}getInputsSamplingSnippets(){const rt={},$=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((b,nt)=>{const st=this.context.inputTextureLayouts[nt],ot=(0,_e.generateShaderFuncNameFromInputSamplerName)(b);st.isPacked?rt[ot]=this.getPackedSamplerFromInput(ot,b,st):rt[ot]=this.getUnpackedSamplerFromInput(ot,b,st);const it=(0,_e.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(b);st.unpackedShape.length<=$.unpackedShape.length&&(st.isPacked?rt[it]=this.getPackedSamplerAtOutputCoords(it,st,$,b):rt[it]=this.getUnpackedSamplerAtOutputCoords(it,st,$,b))}),rt}getPackedSamplerAtOutputCoords(rt,$,b,nt){const st=$.unpackedShape,ot=b.unpackedShape,it=nt,at=(0,_e.generateShaderFuncNameFromInputSamplerName)(it),lt=st.length,dt=ot.length,ht=d.BroadcastUtil.getBroadcastDims(st,ot),pt=(0,_e.getCoordsDataType)(dt),mt=dt-lt;let yt;const xt=(0,_e.getGlChannels)();yt=lt===0?"":dt<2&&ht.length>=1?"coords = 0;":ht.map(Tt=>`coords.${xt[Tt+mt]} = 0;`).join(`
`);let gt="";gt=dt<2&&lt>0?"coords":st.map((Tt,St)=>`coords.${xt[St+mt]}`).join(", ");let bt="return outputValue;";const jt=d.ShapeUtil.size(st)===1,Mt=d.ShapeUtil.size(ot)===1;if(lt!==1||jt||Mt){if(jt&&!Mt)bt=dt===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(ht.length){const Tt=lt-2,St=lt-1;ht.indexOf(Tt)>-1&&ht.indexOf(St)>-1?bt="return vec4(outputValue.x);":ht.indexOf(Tt)>-1?bt="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":ht.indexOf(St)>-1&&(bt="return vec4(outputValue.xx, outputValue.zz);")}}else bt=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const Pt=`
      vec4 ${rt}() {
        ${pt} coords = getOutputCoords();
        
        int lastDim = coords.${xt[dt-1]};
        coords.${xt[dt-1]} = coords.${xt[dt-2]};
        coords.${xt[dt-2]} = lastDim;
      
        ${yt}
        vec4 outputValue = ${at}(${gt});
        ${bt}
      }
    `;return new h.GlslLibRoutine(Pt,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(rt,$,b,nt){const st=[b.width,b.height],ot=[$.width,$.height],it=$.unpackedShape.length,at=b.unpackedShape.length,lt=$.unpackedShape,dt=b.unpackedShape,ht=(0,_e.generateShaderFuncNameFromInputSamplerName)(nt);if(it===at&&d.ArrayUtil.arraysEqual(ot,st)){const Mt=`
          float ${rt}() {
            return sampleTexture(${nt}, TexCoords);
          }
        `;return new h.GlslLibRoutine(Mt,["coordinates.sampleTexture"])}const pt=(0,_e.getCoordsDataType)(at),mt=d.BroadcastUtil.getBroadcastDims(lt,dt),yt=at-it;let xt;const gt=(0,_e.getGlChannels)();xt=it===0?"":at<2&&mt.length>=1?"coords = 0;":mt.map(Mt=>`coords.${gt[Mt+yt]} = 0;`).join(`
`);let bt="";bt=at<2&&it>0?"coords":$.unpackedShape.map((Mt,Pt)=>`coords.${gt[Pt+yt]}`).join(", ");const jt=`
        float ${rt}() {
          ${pt} coords = getOutputCoords();
          ${xt}
          return ${ht}(${bt});
        }
      `;return new h.GlslLibRoutine(jt,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(rt,$,b){switch(b.unpackedShape.length){case 0:return this.getPackedSamplerScalar(rt,$);case 1:return this.getPackedSampler1D(rt,$,b);case 2:return this.getPackedSampler2D(rt,$,b);case 3:return this.getPackedSampler3D(rt,$,b);default:return this.getPackedSamplerND(rt,$,b)}}getUnpackedSamplerFromInput(rt,$,b){const nt=b.unpackedShape;switch(nt.length){case 0:return this.getUnpackedSamplerScalar(rt,$,b);case 1:return this.getUnpackedSampler1D(rt,$,b);case 2:return this.getUnpackedSampler2D(rt,$,b);case 3:return this.getUnpackedSampler3D(rt,$,b);case 4:return this.getUnpackedSampler4D(rt,$,b);case 5:return this.getUnpackedSampler5D(rt,$,b);case 6:return this.getUnpackedSampler6D(rt,$,b);default:throw new Error(`Unsupported dimension ${nt.length}-D`)}}getPackedSamplerScalar(rt,$){const b=`
          vec4 ${rt}() {
            return ${(0,g.getGlsl)(this.context.glContext.version).texture2D}(${$}, halfCR);
          }
        `;return new h.GlslLibRoutine(b)}getPackedSampler1D(rt,$,b){const nt=[b.width,b.height],st=[nt[1],nt[0]],ot=(0,g.getGlsl)(this.context.glContext.version),it=`vec4 ${rt}(int index) {
      vec2 uv = packedUVfrom1D(
      ${st[0]}, ${st[1]}, index);
      return ${ot.texture2D}(${$}, uv);
    }`;return new h.GlslLibRoutine(it,["coordinates.packedUVfrom1D"])}getPackedSampler2D(rt,$,b){const nt=b.unpackedShape,st=[b.width,b.height],ot=(0,g.getGlsl)(this.context.glContext.version),it=st[0],at=st[1];if(st!=null&&d.ArrayUtil.arraysEqual(nt,st)){const pt=`vec4 ${rt}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${at}.0, ${it}.0);
        return ${ot.texture2D}(${$}, uv);
      }`;return new h.GlslLibRoutine(pt)}const lt=st,dt=Math.ceil(nt[1]/2),ht=`vec4 ${rt}(int row, int col) {
      vec2 uv = packedUVfrom2D(${lt[1]}, ${lt[0]}, ${dt}, row, col);
      return ${ot.texture2D}(${$}, uv);
    }`;return new h.GlslLibRoutine(ht,["coordinates.packedUVfrom2D"])}getPackedSampler3D(rt,$,b){const nt=b.unpackedShape,st=[b.width,b.height],ot=[st[0],st[1]],it=(0,g.getGlsl)(this.context.glContext.version);if(nt[0]===1){const pt=nt.slice(1),mt=[1,2],yt=(0,_e.squeezeInputShape)(nt,pt),xt=["b","row","col"],gt=JSON.parse(JSON.stringify(b));gt.unpackedShape=yt;const bt=this.getPackedSamplerFromInput(rt,$,gt),jt=`${bt.routineBody}
      vec4 ${rt}(int b, int row, int col) {
        return ${rt}(${(0,_e.getSqueezedParams)(xt,mt)});
      } `;return new h.GlslLibRoutine(jt,bt.dependencies)}const at=ot[0],lt=ot[1],dt=Math.ceil(nt[2]/2),ht=`vec4 ${rt}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${lt}, ${at}, ${dt*Math.ceil(nt[1]/2)}, ${dt}, b, row, col);
      return ${it.texture2D}(${$}, uv);}`;return new h.GlslLibRoutine(ht,["coordinates.packedUVfrom3D"])}getPackedSamplerND(rt,$,b){const nt=b.unpackedShape,st=nt.length,ot=[b.width,b.height],it=(0,g.getGlsl)(this.context.glContext.version),at=[ot[0],ot[1]],lt=at[1],dt=at[0],ht=Math.ceil(nt[st-1]/2);let pt=ht*Math.ceil(nt[st-2]/2),mt="int b, int row, int col",yt=`b * ${pt} + (row / 2) * ${ht} + (col / 2)`;for(let gt=2;gt<st-1;gt++)mt=`int b${gt}, `+mt,pt*=nt[st-gt-1],yt=`b${gt} * ${pt} + `+yt;const xt=`vec4 ${rt}(${mt}) {
      int index = ${yt};
      int texR = index / ${dt};
      int texC = index - texR * ${dt};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${dt}, ${lt});
      return ${it.texture2D}(${$}, uv);
    }`;return new h.GlslLibRoutine(xt)}getUnpackedSamplerScalar(rt,$,b){const[nt,st]=[b.width,b.height];if(nt===1&&st===1){const it=`
          float ${rt}() {
            return sampleTexture(${$}, halfCR);
          }
        `;return new h.GlslLibRoutine(it,["coordinates.sampleTexture"])}const ot=`
        float ${rt}() {
          int offset_${$} = coordsToOffset(TexCoords, ${nt}, ${st});
          vec2 uv = uvFromFlat(${nt}, ${st}, offset_${$});
          return sampleTexture(${$}, uv);
        }
      `;return new h.GlslLibRoutine(ot,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(rt,$,b){const nt=b.width,st=b.height;if(st===1&&nt===1){const it=`
        float ${rt}(int index) {
          return sampleTexture(${$}, halfCR);
        }
      `;return new h.GlslLibRoutine(it,["coordinates.sampleTexture"])}if(st===1){const it=`
          float ${rt}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${nt}.0, 0.5);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(it,["coordinates.sampleTexture"])}if(nt===1){const it=`
          float ${rt}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${st}.0);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(it,["coordinates.sampleTexture"])}const ot=`
        float ${rt}(int index) {
          vec2 uv = uvFromFlat(${nt}, ${st}, index);
          return sampleTexture(${$}, uv);
        }
      `;return new h.GlslLibRoutine(ot,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(rt,$,b){const nt=b.unpackedShape,st=[b.height,b.width];if(st!=null&&d.ArrayUtil.arraysEqual(nt,st)){const pt=`
          float ${rt}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${st[1]}.0, ${st[0]}.0);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(pt,["coordinates.sampleTexture"])}const{newShape:ot,keptDims:it}=(0,_.squeezeShape)(nt),at=ot;if(at.length<nt.length){const pt=(0,_e.squeezeInputShape)(nt,at),mt=JSON.parse(JSON.stringify(b));mt.unpackedShape=pt;const yt=["col","row"],xt=`
          ${this.getUnpackedSamplerFromInput(rt,$,mt).routineBody}
          float ${rt}(int row, int col) {
            return ${rt}(${(0,_e.getSqueezedParams)(yt,it)});
          }
        `;return new h.GlslLibRoutine(xt,["coordinates.sampleTexture"])}const lt=st[1],dt=st[0];if(dt===1){const pt=`
          float ${rt}(int row, int col) {
            int offset_${$} = coordsToOffset(TexCoords, ${lt}, ${dt});
            float index = dot(vec3(row, col, offset_${$}), vec3(${nt[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${lt}.0);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(pt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(lt===1){const pt=`
          float ${rt}(int row, int col) {
            int offset_${$} = coordsToOffset(TexCoords, ${lt}, ${dt});
            float index = dot(vec3(row, col, offset_${$}), vec3(${nt[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${dt}.0, 0.5);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(pt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const ht=`
        float ${rt}(int row, int col) {
          int index = col * ${nt[1]} + row;
          vec2 uv = uvFromFlat(${lt}, ${dt}, index);
          return sampleTexture(${$}, uv);
        }
      `;return new h.GlslLibRoutine(ht,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(rt,$,b){const nt=b.unpackedShape,st=nt[1]*nt[2],ot=nt[2],{newShape:it,keptDims:at}=(0,_.squeezeShape)(nt),lt=it;if(lt.length<nt.length){const ht=(0,_e.squeezeInputShape)(nt,lt),pt=["batch","col","row"],mt=JSON.parse(JSON.stringify(b));mt.unpackedShape=ht;const yt=this.getUnpackedSamplerFromInput(rt,$,mt),xt=at.reverse(),gt=`
          ${yt.routineBody}
          float ${rt}(int batch, int row, int col) {
            return ${rt}(${(0,_e.getSqueezedParams)(pt,xt)});
          }
        `;return new h.GlslLibRoutine(gt,yt.dependencies)}const dt=`
          float ${rt}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${st} + col * ${ot} + row;
            vec2 uv = uvFromFlat(${b.width}, ${b.height}, index);
            return sampleTexture(${$}, uv);
          }
      `;return new h.GlslLibRoutine(dt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(rt,$,b){const nt=b.unpackedShape,st=nt[3],ot=nt[2]*st,it=`
        float ${rt}(int row, int col, int depth, int depth2) {
          int index = row * ${nt[1]*ot} + col * ${ot} +
              depth2 * ${st} + depth;
          vec2 uv = uvFromFlat(${b.width}, ${b.height}, index);
          return sampleTexture(${$}, uv);
        }
      `;return new h.GlslLibRoutine(it,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(rt,$,b){const nt=b.unpackedShape,st=nt[4],ot=nt[3]*st,it=nt[2]*ot,at=nt[1]*it,{newShape:lt,keptDims:dt}=(0,_.squeezeShape)(nt);if(lt.length<nt.length){const pt=(0,_e.squeezeInputShape)(nt,lt),mt=["row","col","depth","depth2","depth3"],yt=JSON.parse(JSON.stringify(b));yt.unpackedShape=pt;const xt=`
          ${this.getUnpackedSamplerFromInput(rt,$,yt).routineBody}
          float ${rt}(int row, int col, int depth, int depth2, int depth3) {
            return ${rt}(${(0,_e.getSqueezedParams)(mt,dt)});
          }
        `;return new h.GlslLibRoutine(xt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const ht=`
        float ${rt}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${at} + col * ${it} + depth * ${ot} +
          depth3 * ${st} + depth2;
          vec2 uv = uvFromFlat(${b.width}, ${b.height}, index);
          return sampleTexture(${$}, uv);
        }
      `;return new h.GlslLibRoutine(ht,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(rt,$,b){const nt=b.unpackedShape,st=nt[5],ot=nt[4]*st,it=nt[3]*ot,at=nt[2]*it,lt=nt[1]*at,{newShape:dt,keptDims:ht}=(0,_.squeezeShape)(nt);if(dt.length<nt.length){const mt=(0,_e.squeezeInputShape)(nt,dt),yt=["row","col","depth","depth2","depth3","depth4"],xt=JSON.parse(JSON.stringify(b));xt.unpackedShape=mt;const gt=`
            ${this.getUnpackedSamplerFromInput(rt,$,xt).routineBody}
            float ${rt}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${rt}(${(0,_e.getSqueezedParams)(yt,ht)});
            }
          `;return new h.GlslLibRoutine(gt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const pt=`
          float ${rt}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${lt} + col * ${at} + depth * ${it} +
            depth2 * ${ot} + depth3 * ${st} + depth4;
            vec2 uv = uvFromFlat(${b.width}, ${b.height}, index);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(pt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const rt=this.context.outputTextureLayout,$=rt.shape.length,b=rt.strides,nt=rt.width,st=rt.height,ot=[];for(let at=0;at<$-1;++at)ot.push(`
        c[${at}] = offset / ${b[at]};`),ot.push(`
        offset -= c[${at}] * ${b[at]};`);ot.push(`
        c[${$-1}] = offset;`);const it=`
      void toVec(vec2 texCoords, out int c[${$}]) {
        int offset = coordsToOffset(texCoords, ${nt}, ${st});
        ${ot.join("")}
      }
      void toVec(int offset, out int c[${$}]) {
        ${ot.join("")}
      }
    `;return{toVec:new h.GlslLibRoutine(it,["coordinates.coordsToOffset"])}}valueFrom(){const rt={};return this.context.programInfo.inputNames.forEach(($,b)=>{const nt=this.context.inputTextureLayouts[b],st=(nt.unpackedShape.length>0?nt.unpackedShape:nt.shape).length;let ot=`_${$}`;rt[ot]=new h.GlslLibRoutine(this.getValueFromSingle($,st,nt.width,nt.height,!1),[`shapeUtils.indicesToOffset${ot}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),ot+="_T",rt[ot]=new h.GlslLibRoutine(this.getValueFromSingle($,st,nt.width,nt.height,!0),[`shapeUtils.indicesToOffset${ot}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),rt}getValueFromSingle(rt,$,b,nt,st){let ot=`_${rt}`;return st&&(ot+="_T"),`
        float ${ot}(int m[${$}]) {
          int offset = indicesToOffset${ot}(m);
          vec2 coords = offsetToCoords(offset, ${b}, ${nt});
          float value = getColorAsFloat(${(0,g.getGlsl)(this.context.glContext.version).texture2D}(${rt}, coords));
          return value;
        }
        `}getPackedValueFrom(rt,$,b,nt,st){let ot=`_${rt}_Pack`;return st&&(ot+="_T"),`
        vec4 ${ot}(int m[${$}]) {
          int offset = indicesToOffset_${rt}(m);
          vec2 coords = offsetToCoords(offset, ${b}, ${nt});
          return ${(0,g.getGlsl)(this.context.glContext.version).texture2D}(${rt}, coords);
        }
        `}}e.CoordsGlslLib=et},8520:(a,e)=>{var c;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(c=e.FunctionType||(e.FunctionType={}))[c.ValueBased=0]="ValueBased",c[c.Positional=1]="Positional",e.GlslContext=class{constructor(d,h,g,_){this.glContext=d,this.programInfo=h,this.inputTextureLayouts=g,this.outputTextureLayout=_}},e.GlslLib=class{constructor(d){this.context=d}},e.GlslLibRoutine=class{constructor(d,h){this.routineBody=d,this.dependencies=h}},e.GlslLibRoutineNode=class{constructor(d,h,g){this.name=d,this.dependencies=g||[],h&&(this.routineBody=h)}addDependency(d){d&&this.dependencies.push(d)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(d){if(!d||d.length===0)return[];if(d.length===1)return d;const h=new Set,g=new Set,_=new Array;return this.createOrderedNodes(d,h,g,_),_}static createOrderedNodes(d,h,g,_){for(let _e=0;_e<d.length;++_e)this.dfsTraverse(d[_e],h,g,_)}static dfsTraverse(d,h,g,_){if(!d||g.has(d.name))return;if(h.has(d.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");h.add(d.name);const _e=d.dependencies;if(_e&&_e.length>0)for(let et=0;et<_e.length;++et)this.dfsTraverse(_e[et],h,g,_);_.push(d),g.add(d.name),h.delete(d.name)}}},7341:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const d=c(8520);class h extends d.GlslLib{constructor(_){super(_)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new d.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new d.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const _=h.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new d.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${_}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const _=h.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new d.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${_}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const _=new ArrayBuffer(4),_e=new Uint32Array(_),et=new Uint8Array(_);if(_e[0]=3735928559,et[0]===239)return!0;if(et[0]===222)return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=h},9894:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const d=c(8520),h=c(5060);class g extends d.GlslLib{constructor(_e){super(_e)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const _e=(0,h.getGlsl)(this.context.glContext.version);return{setFragColor:new d.GlslLibRoutine(`
        void setFragColor(float value) {
            ${_e.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new d.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}e.FragColorGlslLib=g},2848:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const c=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(d){const h={};let g;for(;(g=c.exec(d))!==null;){const _=g[3].split(",").map(_e=>{const et=_e.trim().split(" ");return et&&et.length===2?{type:et[0],name:et[1]}:null}).filter(_e=>_e!==null);h[g[2]]={params:_,body:g[4]}}for(const _ in h){const _e="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",_),et=new RegExp(_e,"gm");for(;(g=et.exec(d))!==null;){const tt=g[1],rt=g[2],$=g[3].split(","),b=tt?`${tt} ${rt};`:"";let nt=h[_].body,st="";h[_].params.forEach((it,at)=>{it&&(st+=`${it.type} ${it.name} = ${$[at]};
`)}),nt=`${st}
 ${nt}`,nt=nt.replace("return",`${rt} = `);const ot=`
      ${b}
      {
        ${nt}
      }
      `;d=d.replace(g[0],ot)}}return d.replace(c,"")}},8879:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const d=c(8520),h=c(2848),g=c(5483),_=c(5060);e.GlslPreprocessor=class{constructor(_e,et,tt,rt){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new d.GlslContext(_e,et,tt,rt),Object.keys(g.glslRegistry).forEach(b=>{const nt=new g.glslRegistry[b](this.context);this.libs[b]=nt});const $=this.glslLibRoutineDependencyGraph;for(const b in this.libs){const nt=this.libs[b].getFunctions();for(const st in nt){const ot=b+"."+st;let it;$[ot]?(it=$[ot],it.routineBody=nt[st].routineBody):(it=new d.GlslLibRoutineNode(ot,nt[st].routineBody),$[ot]=it);const at=nt[st].dependencies;if(at)for(let lt=0;lt<at.length;++lt)if($[at[lt]])it.addDependency($[at[lt]]);else{const dt=new d.GlslLibRoutineNode(at[lt]);$[at[lt]]=dt,it.addDependency(dt)}}}}preprocess(){const _e=this.context.programInfo;let et=_e.shaderSource;return this.context.programInfo.hasMain||(et=`${et}
      ${(0,_.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),et=(0,h.replaceInlines)(et),`${(0,_.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(_e.inputNames,_e.variables)}
    ${this.getImports(et)}
    ${et}`}getImports(_e){const et=this.selectGlslLibRoutinesToBeIncluded(_e);if(et.length===0)return"";let tt="";for(let rt=0;rt<et.length;++rt){if(!et[rt].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${et[rt].name}`);tt+=et[rt].routineBody+`
`}return tt}selectGlslLibRoutinesToBeIncluded(_e){const et=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(tt=>{const rt=tt.split(".")[1];_e.indexOf(rt)!==-1&&et.push(this.glslLibRoutineDependencyGraph[tt])}),d.TopologicalSortGlslRoutines.returnOrderedNodes(et)}getUniforms(_e,et){const tt=[];if(_e)for(const rt of _e)tt.push(`uniform sampler2D ${rt};`);if(et)for(const rt of et)tt.push(`uniform ${rt.type} ${rt.name}${rt.arrayLength?`[${rt.arrayLength}]`:""};`);return tt.join(`
`)}}},5483:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const d=c(5107),h=c(7341),g=c(9894),_=c(2655),_e=c(3891);e.glslRegistry={encoding:h.EncodingGlslLib,fragcolor:g.FragColorGlslLib,vec:_e.VecGlslLib,shapeUtils:_.ShapeUtilsGlslLib,coordinates:d.CoordsGlslLib}},2655:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const d=c(8520);class h extends d.GlslLib{constructor(_){super(_)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const _=this.context.outputTextureLayout.shape.length,_e={};return this.context.programInfo.inputNames.forEach((et,tt)=>{const rt=this.context.inputTextureLayouts[tt].unpackedShape;if(rt.length<=_){const $=rt.length,b=_-$,nt=`bcastIndices_${et}`;let st="";for(let it=0;it<$;++it)st+=`
          realIndices[${it}] = int( mod(float(bcastedIndices[${b+it}]), ${rt[it]}.0) );
          `;const ot=`
        void ${nt} (int bcastedIndices[${_}], out int realIndices[${$}]) {
          ${st}
        }
        `;_e[nt]=new d.GlslLibRoutine(ot)}}),_e}bcastMatmulIndex(){const _=this.context.outputTextureLayout.shape.length,_e={};return this.context.programInfo.inputNames.forEach((et,tt)=>{const rt=this.context.inputTextureLayouts[tt].shape;if(!(rt.length<2||rt.length>_)){const $=rt.length,b=_-$,nt=`bcastMatmulIndices_${et}`;let st="";for(let it=0;it<$-2;++it)st+=`
          realIndices[${it}] = int( mod(float(bcastedIndices[${b+it}]), ${rt[it]}.0) );
          `;const ot=`
        void ${nt}(int bcastedIndices[${_}], out int realIndices[${$}]) {
          ${st}
          realIndices[${$-1}] = bcastedIndices[${_-1}];
          realIndices[${$-2}] = bcastedIndices[${_-2}];
        }
        `;_e[nt]=new d.GlslLibRoutine(ot)}}),_e}indicesToOffset(){const _={};return this.context.programInfo.inputNames.forEach((_e,et)=>{const tt=this.context.inputTextureLayouts[et].shape,rt=this.context.inputTextureLayouts[et].strides,$=tt.length;let b=`indicesToOffset_${_e}`;_[b]=new d.GlslLibRoutine(h.indexToOffsetSingle(b,$,rt)),b=`indicesToOffset_${_e}_T`,_[b]=new d.GlslLibRoutine(h.indexToOffsetSingle(b,$,rt.slice().reverse()))}),_}static indexToOffsetSingle(_,_e,et){let tt="";for(let rt=_e-1;rt>=0;--rt)tt+=`
        offset += indices[${rt}] * ${et[rt]};
        `;return`
      int ${_}(int indices[${_e}]) {
        int offset = 0;
        ${tt}
        return offset;
      }
      `}offsetToIndices(){const _={};return this.context.programInfo.inputNames.forEach((_e,et)=>{const tt=this.context.inputTextureLayouts[et].shape,rt=this.context.inputTextureLayouts[et].strides,$=tt.length;let b=`offsetToIndices_${_e}`;_[b]=new d.GlslLibRoutine(h.offsetToIndicesSingle(b,$,rt)),b=`offsetToIndices_${_e}_T`,_[b]=new d.GlslLibRoutine(h.offsetToIndicesSingle(b,$,rt.slice().reverse()))}),_}static offsetToIndicesSingle(_,_e,et){const tt=[];for(let rt=0;rt<_e-1;++rt)tt.push(`
      indices[${rt}] = offset / ${et[rt]};`),tt.push(`
        offset -= indices[${rt}] * ${et[rt]};`);return tt.push(`
      indices[${_e-1}] = offset;`),`
      void ${_}(int offset, out int indices[${_e}]) {
        ${tt.join("")}
      }
      `}incrementIndices(){const _={};return this.context.programInfo.inputNames.forEach((_e,et)=>{const tt=this.context.inputTextureLayouts[et].shape,rt=tt.length,$=`incrementIndices_${_e}`;let b="";for(let st=0;st<rt;++st)b+=`
        shape[${st}] = ${tt[st]};`;const nt=`
        void ${$}(int axis, out int indices[${rt}]) {
          int shape[${rt}];
          ${b};
          for(int i = ${rt} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;_[$]=new d.GlslLibRoutine(nt)}),_}}e.ShapeUtilsGlslLib=h},5060:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const c={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},d={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function h(g){return g===1?c:d}e.getGlsl=h,e.getVertexShaderSource=function(g){const _=h(g);return`${_.version}
      precision highp float;
      ${_.attribute} vec3 position;
      ${_.attribute} vec2 textureCoord;

      ${_.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},e.getFragShaderPreamble=function(g){const _=h(g);return`${_.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${_.varyingFrag} vec2 TexCoords;
    ${_.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},e.getDefaultFragShaderMain=function(g,_){return`
  void main() {
    int indices[${_}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${h(g).output} = result;
  }
  `}},3891:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const d=c(8520);class h extends d.GlslLib{constructor(_){super(_)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const _=this.context.outputTextureLayout.shape.length,_e={add:"+=",sub:"-=",mul:"*=",div:"/="},et={};for(const tt in _e){const rt=`${tt}Vec`;let $="";for(let nt=0;nt<_;++nt)$+=`
          dest[${nt}] ${_e[tt]} src[${nt}];
          `;const b=`
        void ${rt}(int src[${_}], out int dest[${_}]) {
          ${$}
        }
        `;et[rt]=new d.GlslLibRoutine(b)}return et}copyVec(){const _=this.context.outputTextureLayout.shape.length;let _e="";for(let tt=0;tt<_;++tt)_e+=`
        dest[${tt}] = src[${tt}];
        `;const et=`
      void copyVec(int src[${_}], out int dest[${_}]) {
        ${_e}
      }
      `;return{copyVec:new d.GlslLibRoutine(et)}}setVecItem(){const _=this.context.outputTextureLayout.shape.length;let _e=`
        if(index < 0)
            index =${_} + index;
        if (index == 0)
            m[0] = value;
        `;for(let tt=1;tt<_-1;++tt)_e+=`
        else if (index == ${tt})
            m[${tt}] = value;
            `;_e+=`
        else
            m[${_-1}] = value;
        `;const et=`
      void setVecItem(out int m[${_}], int index, int value) {
        ${_e}
      }
        `;return{setVecItem:new d.GlslLibRoutine(et)}}getVecItem(){const _=this.context.outputTextureLayout.shape.length;let _e=`
        if(index < 0)
            index = ${_} + index;
        if (index == 0)
            return m[0];
      `;for(let tt=1;tt<_-1;++tt)_e+=`
        else if (index == ${tt})
            return m[${tt}];
      `;_e+=`
        else
            return m[${_-1}];
        `;const et=`
      int getVecItem(int m[${_}], int index) {
        ${_e}
      }
    `;return{getVecItem:new d.GlslLibRoutine(et)}}}e.VecGlslLib=h},8316:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const d=c(6231),h=c(9162),g=c(2517),_=c(2403),_e=c(7019),et=c(8710),tt=c(5611),rt=c(4057),$=c(2039);e.WebGLInferenceHandler=class{constructor(b){this.session=b,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(b,nt){return(0,rt.calculateTextureWidthAndHeight)(this.session.layoutStrategy,b,nt)}executeProgram(b,nt){if(nt.length<b.inputNames.length)throw new Error(`Input size mustn't be less than ${b.inputNames.length}.`);if(b.inputNames.length!==b.inputTypes.length)throw new Error("input names size does not match input types");const st=[];for(let ht=0;ht<b.inputNames.length;++ht)st[ht]=this.getOrCreateTextureData(nt[ht],b.inputTypes[ht]);const ot=((ht,pt)=>{const mt=pt.map(xt=>`${xt.unpackedShape.join(",")};${xt.width}x${xt.height}`).join("_");let yt=ht.name;return ht.cacheHint&&(yt+="["+ht.cacheHint+"]"),yt+=":"+mt,yt})(b,st);let it=this.session.programManager.getArtifact(ot);const at=it?it.programInfo:typeof b.get=="function"?b.get():b,lt=(0,rt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,at.output.dims,at.output.textureType),dt=this.createTextureData(lt,at.output.type);return it||(it=this.session.programManager.build(at,st,dt),this.session.programManager.setArtifact(ot,it)),this.runProgram(it,st,dt),dt}run(b,nt){return this.executeProgram(b,nt).tensor}runProgram(b,nt,st){for(let ot=0;ot<nt.length;++ot)if(!!nt[ot].isPacked!=(b.programInfo.inputTypes[ot]===$.TextureType.packed))throw new Error(`input[${ot}] property packed inconsistent`);if(!!st.isPacked!=(b.programInfo.output.textureType===$.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(b,nt,st)}getOrCreateTextureData(b,nt){let st=this.getTextureData(b.dataId,nt===$.TextureType.packed);if(!st&&(st=this.getTextureData(b.dataId,nt!==$.TextureType.packed),st))return nt===$.TextureType.packed?this.pack(st):this.unpack(st);if(!st){const ot=(0,rt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,b.dims,nt);if(nt===$.TextureType.packedLastDimension){const lt=b.dims;if(lt.length===4){const dt=[lt[0],Math.ceil(lt[1]*lt[2]*lt[3]/4)],ht=(0,rt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,dt,nt);let pt=b.numberData;if(lt[1]*lt[2]*lt[3]%4!=0){const mt=lt[0],yt=lt[1]*lt[2]*lt[3],xt=Math.ceil(yt*1/4)*4;pt=new Float32Array(mt*xt);for(let gt=0;gt<mt;++gt){const bt=gt*yt,jt=gt*xt+gt%1*yt;pt.set(b.numberData.subarray(bt,bt+yt),jt)}}return this.createTextureData(ht,b.type,pt,b,1)}}if(nt===$.TextureType.packed){const it=(0,rt.createTextureLayoutFromShape)(this.session.layoutStrategy,b.dims,1,[],{reverseWH:!0}),at=this.createTextureData(it,b.type,b.numberData,b,1);st=this.pack(at)}else st=this.createTextureData(ot,b.type,b.numberData,b,1)}return st}createTextureDataFromLayoutBindTensor(b,nt,st,ot){return this.createTextureData(b,nt,st,ot,1)}createTextureData(b,nt,st,ot,it){d.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(b)}]`);const at=this.session.textureManager.createTextureFromLayout(nt,b,st,it);return this.createTextureDataFromTexture(b,nt,at,ot)}reshapeUnpacked(b,nt){const st=this.getOrCreateTextureData(b,$.TextureType.unpacked),ot={channels:st.channels,height:st.height,width:st.width,shape:nt.length!==0?nt:[1],strides:g.ShapeUtil.computeStrides(nt),unpackedShape:nt};return this.createTextureDataFromTexture(ot,b.type,st.texture).tensor}reshapePacked(b,nt){const st=this.getOrCreateTextureData(b,$.TextureType.packed);if((0,_e.isReshapeCheap)(b.dims,nt)){const dt={channels:st.channels,height:st.height,width:st.width,shape:nt.length!==0?nt:[1],strides:g.ShapeUtil.computeStrides(nt),unpackedShape:nt,isPacked:!0};return this.createTextureDataFromTexture(dt,b.type,st.texture).tensor}const ot=(0,_e.processDims3D)(b.dims),it=(0,_e.processDims3D)(nt),at=this.reshapePacked(b,ot),lt=this.run((0,_e.createPackedReshape3DProgramInfoLoader)(this,at,it),[at]);return this.reshapePacked(lt,nt)}cast(b,nt){const st=this.getOrCreateTextureData(b,$.TextureType.unpacked);return this.createTextureDataFromTexture(st,nt,st.texture).tensor}createTextureDataFromTexture(b,nt,st,ot,it){const at=Object.assign(Object.assign({},b),{tensor:ot||new h.Tensor(b.unpackedShape,nt,lt=>this.readTexture(at),async lt=>this.readTextureAsync(at),void 0,it),texture:st});return this.setTextureData(at.tensor.dataId,at,b.isPacked),at}getTextureData(b,nt=!1){return this.session.isInitializer(b)?this.session.getTextureData(b,nt):nt?this.packedTextureDataCache.get(b):this.unpackedTextureDataCache.get(b)}setTextureData(b,nt,st=!1){this.session.isInitializer(b)?this.session.setTextureData(b,nt,st):(st?this.packedTextureDataCache:this.unpackedTextureDataCache).set(b,nt)}isTextureLayoutCached(b,nt=!1){return!!this.getTextureData(b.dataId,nt)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(b=>this.session.textureManager.releaseTexture(b)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(b=>this.session.textureManager.releaseTexture(b)),this.unpackedTextureDataCache=new Map}readTexture(b){return b.isPacked?this.readTexture(this.unpack(b)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(b,b.tensor.type,b.channels):this.session.textureManager.readUint8TextureAsFloat((0,et.encodeAsUint8)(this,b))}async readTextureAsync(b){return b.isPacked?this.readTextureAsync(this.unpack(b)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(b,b.tensor.type,b.channels):this.session.textureManager.readUint8TextureAsFloat((0,et.encodeAsUint8)(this,b))}pack(b){return this.executeProgram((0,_.createPackProgramInfoLoader)(this,b.tensor),[b.tensor])}unpack(b){return this.executeProgram((0,tt.createUnpackProgramInfoLoader)(this,b.tensor),[b.tensor])}}},1640:function(a,e,c){var d=this&&this.__createBinding||(Object.create?function(Et,zt,er,pr){pr===void 0&&(pr=er);var _r=Object.getOwnPropertyDescriptor(zt,er);_r&&!("get"in _r?!zt.__esModule:_r.writable||_r.configurable)||(_r={enumerable:!0,get:function(){return zt[er]}}),Object.defineProperty(Et,pr,_r)}:function(Et,zt,er,pr){pr===void 0&&(pr=er),Et[pr]=zt[er]}),h=this&&this.__setModuleDefault||(Object.create?function(Et,zt){Object.defineProperty(Et,"default",{enumerable:!0,value:zt})}:function(Et,zt){Et.default=zt}),g=this&&this.__importStar||function(Et){if(Et&&Et.__esModule)return Et;var zt={};if(Et!=null)for(var er in Et)er!=="default"&&Object.prototype.hasOwnProperty.call(Et,er)&&d(zt,Et,er);return h(zt,Et),zt};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const _=c(2898),_e=g(c(7839)),et=c(4196),tt=c(2069),rt=c(8138),$=c(9663),b=c(5193),nt=c(7992),st=c(1253),ot=c(4776),it=c(6572),at=c(3346),lt=c(5623),dt=c(2870),ht=c(2143),pt=c(4939),mt=c(718),yt=c(2268),xt=c(8117),gt=c(2278),bt=c(5524),jt=c(5975),Mt=c(3933),Pt=c(6558),Tt=c(5723),St=c(3738),wt=g(c(4909)),Rt=c(8428),At=c(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",wt.abs],["Acos","","7+",wt.acos],["Add","","7+",_e.add],["And","","7+",_e.and],["Asin","","7+",wt.asin],["Atan","","7+",wt.atan],["AveragePool","","7+",ht.averagePool,ht.parseAveragePoolAttributes],["BatchNormalization","","7+",_.batchNormalization,_.parseBatchNormalizationAttributes],["Cast","","6+",et.cast,et.parseCastAttributes],["Ceil","","6+",wt.ceil],["Clip","","6-10",wt.clip,wt.parseClipAttributes],["Clip","","11+",wt.clipV11],["Concat","","4+",tt.concat,tt.parseConcatAttributes],["Conv","","1+",rt.conv,rt.parseConvAttributes],["ConvTranspose","","1+",$.convTranspose,$.parseConvTransposeAttributes],["Cos","","7+",wt.cos],["Div","","7+",_e.div],["Dropout","","7+",wt.identity],["DepthToSpace","","1+",b.depthToSpace,b.parseDepthToSpaceAttributes],["Equal","","7+",_e.equal],["Elu","","6+",wt.elu,wt.parseEluAttributes],["Exp","","6+",wt.exp],["Flatten","","1+",nt.flatten,nt.parseFlattenAttributes],["Floor","","6+",wt.floor],["FusedConv","com.microsoft","1+",rt.conv,rt.parseConvAttributes],["Gather","","1+",st.gather,st.parseGatherAttributes],["Gemm","","7-10",ot.gemm,ot.parseGemmAttributesV7],["Gemm","","11+",ot.gemm,ot.parseGemmAttributesV11],["GlobalAveragePool","","1+",ht.globalAveragePool,ht.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",ht.globalMaxPool],["Greater","","7+",_e.greater],["Identity","","1+",wt.identity],["ImageScaler","","1+",it.imageScaler,it.parseImageScalerAttributes],["InstanceNormalization","","6+",at.instanceNormalization,at.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",wt.leakyRelu,wt.parseLeakyReluAttributes],["Less","","7+",_e.less],["Log","","6+",wt.log],["MatMul","","1+",lt.matMul,lt.parseMatMulAttributes],["MaxPool","","1+",ht.maxPool,ht.parseMaxPoolAttributes],["Mul","","7+",_e.mul],["Neg","","6+",wt.neg],["Not","","1+",wt.not],["Or","","7+",_e.or],["Pad","","2-10",dt.padV2,dt.parsePadAttributesV2],["Pad","","11+",dt.padV11,dt.parsePadAttributesV11],["Pow","","7+",_e.pow],["PRelu","","7+",_e.pRelu],["ReduceLogSum","","1+",pt.reduceLogSum,pt.parseReduceAttributes],["ReduceMax","","1+",pt.reduceMax,pt.parseReduceAttributes],["ReduceMean","","1+",pt.reduceMean,pt.parseReduceAttributes],["ReduceMin","","1+",pt.reduceMin,pt.parseReduceAttributes],["ReduceProd","","1+",pt.reduceProd,pt.parseReduceAttributes],["ReduceSum","","1-12",pt.reduceSum,pt.parseReduceAttributes],["ReduceSumSquare","","1+",pt.reduceLogSumSquare,pt.parseReduceAttributes],["Relu","","6+",wt.relu],["Reshape","","5+",mt.reshape],["Resize","","10",yt.resize,yt.parseResizeAttributesV10],["Resize","","11+",yt.resize,yt.parseResizeAttributesV11],["Shape","","1+",xt.shape],["Sigmoid","","6+",wt.sigmoid],["Sin","","7+",wt.sin],["Slice","","10+",gt.sliceV10],["Slice","","1-9",gt.slice,gt.parseSliceAttributes],["Softmax","","1-12",bt.softmax,bt.parseSoftmaxAttributes],["Softmax","","13+",bt.softmaxV13,bt.parseSoftmaxAttributesV13],["Split","","2-12",jt.split,jt.parseSplitAttributes],["Sqrt","","6+",wt.sqrt],["Squeeze","","1-12",Mt.squeeze,Mt.parseSqueezeAttributes],["Squeeze","","13+",Mt.squeezeV13],["Sub","","7+",_e.sub],["Sum","","6+",Pt.sum],["Tan","","7+",wt.tan],["Tanh","","6+",wt.tanh],["Tile","","6+",Tt.tile],["Transpose","","1+",St.transpose,St.parseTransposeAttributes],["Upsample","","7-8",At.upsample,At.parseUpsampleAttributesV7],["Upsample","","9",At.upsample,At.parseUpsampleAttributesV9],["Unsqueeze","","1-12",Rt.unsqueeze,Rt.parseUnsqueezeAttributes],["Unsqueeze","","13+",Rt.unsqueezeV13],["Xor","","7+",_e.xor]]},2898:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const d=c(246),h=c(5060),g=c(2039),_={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked]};e.batchNormalization=(tt,rt,$)=>(et(rt),[tt.run(Object.assign(Object.assign({},_),{cacheHint:$.cacheKey,get:()=>_e(tt,rt,$)}),rt)]),e.parseBatchNormalizationAttributes=tt=>{const rt=tt.attributes.getFloat("epsilon",1e-5),$=tt.attributes.getFloat("momentum",.9),b=tt.attributes.getInt("spatial",1);return(0,d.createAttributeWithCacheKey)({epsilon:rt,momentum:$,spatial:b})};const _e=(tt,rt,$)=>{const b=(0,h.getGlsl)(tt.session.backend.glContext.version),nt=rt[0].dims.length,[st,ot]=tt.calculateTextureWidthAndHeight(rt[1].dims,g.TextureType.unpacked),it=`
  float process(int[${nt}] indices) {
    vec2 position = offsetToCoords(indices[1], ${st}, ${ot});
    float scale = getColorAsFloat(${b.texture2D}(Scale, position));
    float mean = getColorAsFloat(${b.texture2D}(Mean, position));
    float variance = getColorAsFloat(${b.texture2D}(Variance, position));
    float b = getColorAsFloat(${b.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${$.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},_),{output:{dims:rt[0].dims,type:rt[0].type,textureType:g.TextureType.unpacked},shaderSource:it})},et=tt=>{if(!tt||tt.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const rt=tt[0],$=tt[1],b=tt[2],nt=tt[3],st=tt[4];if(rt.dims.length<3||$.dims.length!==1||b.dims.length!==1||nt.dims.length!==1||st.dims.length!==1)throw new Error("invalid input shape.");if($.dims[0]!==rt.dims[1]||b.dims[0]!==rt.dims[1]||nt.dims[0]!==rt.dims[1]||st.dims[0]!==rt.dims[1])throw new Error("invalid input shape.");if(rt.type!=="float32"&&rt.type!=="float64"||$.type!=="float32"&&$.type!=="float64"||b.type!=="float32"&&b.type!=="float64"||nt.type!=="float32"&&nt.type!=="float64"||st.type!=="float32"&&st.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const d=c(2517),h=c(8520),g=c(5060),_=c(2039);function _e(){const pt="add_";return{body:`
  float ${pt}(float a, float b) {
    return a + b;
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function et(){const pt="div_";return{body:`
  float ${pt}(float a, float b) {
    return a / b;
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function tt(){const pt="mul_";return{body:`
  float ${pt}(float a, float b) {
    return a * b;
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function rt(){const pt="sub_";return{body:`
  float ${pt}(float a, float b) {
    return a - b;
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function $(){const pt="equal_";return{body:`
  float ${pt}(float a, float b) {
    return float(a == b);
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function b(){const pt="greater_";return{body:`
  float ${pt}(float a, float b) {
    return float(a > b);
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function nt(){const pt="less_";return{body:`
  float ${pt}(float a, float b) {
    return float(a < b);
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function st(){const pt="and_";return{body:`
  float ${pt}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function ot(){const pt="or_";return{body:`
  float ${pt}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function it(){const pt="xor_";return{body:`
  float ${pt}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function at(){return function(pt){const mt=`${pt}_`;return{body:`
  float ${mt}(float a, float b) {
    return ${pt}(a, b);
  }
  vec4 ${mt}(vec4 v1, vec4 v2) {
    return ${pt}(v1, v2);
  }
  `,name:mt,type:h.FunctionType.ValueBased}}("pow")}function lt(){const pt="prelu_";return{body:`
  float ${pt}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}e.glslAdd=_e,e.glslDiv=et,e.glslMul=tt,e.glslSub=rt,e.glslEqual=$,e.glslGreater=b,e.glslLess=nt,e.glslAnd=st,e.glslOr=ot,e.glslXor=it,e.glslPow=at,e.glslPRelu=lt;const dt=(pt,mt,yt,xt=mt[0].type,gt)=>{const bt=pt.session.pack?_.TextureType.packed:_.TextureType.unpacked;return{name:yt.name,inputNames:["A","B"],inputTypes:[bt,bt],cacheHint:gt,get:()=>ht(pt,mt,yt,xt)}},ht=(pt,mt,yt,xt=mt[0].type)=>{const gt=pt.session.pack?_.TextureType.packed:_.TextureType.unpacked,bt=!d.ShapeUtil.areEqual(mt[0].dims,mt[1].dims);let jt=mt[0].dims;const Mt=pt.session.pack;if(bt){const St=d.BroadcastUtil.calcShape(mt[0].dims,mt[1].dims,!1);if(!St)throw new Error("Can't perform binary op on the given tensors");jt=St;const wt=jt.length,Rt=mt[0].dims.length!==0?mt[0].dims.length:1,At=mt[1].dims.length!==0?mt[1].dims.length:1,Et=mt[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",zt=mt[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",er=(0,g.getGlsl)(pt.session.backend.glContext.version),pr=Mt?`
      ${yt.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${yt.name}(a, b);
        ${er.output} = result;
      }`:`
      ${yt.body}
      float process(int indices[${wt}]) {
        int aindices[${Rt}];
        int bindices[${At}];
        ${Et}
        ${zt}
        return ${yt.name}(_A(aindices), _B(bindices));
      }`;return{name:yt.name,inputNames:["A","B"],inputTypes:[gt,gt],output:{dims:jt,type:xt,textureType:gt},shaderSource:pr,hasMain:Mt}}const Pt=(0,g.getGlsl)(pt.session.backend.glContext.version),Tt=`
    ${yt.body}
    void main() {
      vec4 v1 = ${Pt.texture2D}(A, TexCoords);
      vec4 v2 = ${Pt.texture2D}(B, TexCoords);
      vec4 result = ${yt.name}(v1, v2);
      ${Pt.output} = result;
    }
    `;return{name:yt.name,inputNames:["A","B"],inputTypes:[gt,gt],output:{dims:mt[0].dims,type:xt,textureType:gt},shaderSource:Tt,hasMain:!0}};e.add=(pt,mt)=>[pt.run(dt(pt,mt,_e()),mt)],e.and=(pt,mt)=>[pt.run(dt(pt,mt,st(),"bool"),mt)],e.div=(pt,mt)=>[pt.run(dt(pt,mt,et()),mt)],e.equal=(pt,mt)=>[pt.run(dt(pt,mt,$(),"bool"),mt)],e.greater=(pt,mt)=>[pt.run(dt(pt,mt,b(),"bool"),mt)],e.less=(pt,mt)=>[pt.run(dt(pt,mt,nt(),"bool"),mt)],e.mul=(pt,mt)=>[pt.run(dt(pt,mt,tt()),mt)],e.or=(pt,mt)=>[pt.run(dt(pt,mt,ot(),"bool"),mt)],e.pow=(pt,mt)=>[pt.run(dt(pt,mt,at()),mt)],e.pRelu=(pt,mt)=>[pt.run(dt(pt,mt,lt()),mt)],e.sub=(pt,mt)=>[pt.run(dt(pt,mt,rt()),mt)],e.xor=(pt,mt)=>[pt.run(dt(pt,mt,it(),"bool"),mt)]},4196:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const d=c(2517);e.cast=(g,_,_e)=>(h(_),[g.cast(_[0],_e)]),e.parseCastAttributes=g=>d.ProtoUtil.tensorDataTypeFromProto(g.attributes.getInt("to"));const h=g=>{if(!g||g.length!==1)throw new Error("Cast requires 1 input.");if(g[0].type==="string")throw new Error("Invalid input type.")}},1163:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const d=c(5060),h=c(2039),g=c(9390),_=c(2827);e.createPackedConcatProgramInfoLoader=(et,tt,rt)=>{const $=(b=tt.length,nt=rt.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:b},(st,ot)=>`X${ot}`),inputTypes:Array(b).fill(h.TextureType.packed),cacheHint:nt});var b,nt;return Object.assign(Object.assign({},$),{get:()=>((st,ot,it,at)=>{const lt=it[0].dims.slice();if(at>=lt.length||at<-1*lt.length)throw new Error("axis specified for concat doesn't match input dimensionality");at<0&&(at=lt.length+at);const dt=lt.slice(0);for(let Et=1;Et<it.length;Et++){const zt=it[Et].dims.slice();for(let er=0;er<lt.length;er++)if(er===at)dt[at]+=zt[er];else if(lt[er]!==zt[er])throw new Error("non concat dimensions must match")}const ht=dt.length,pt=(0,_.getChannels)("coords",ht),mt=(0,g.getCoordsDataType)(ht),yt=(0,_.unpackFromChannel)(),xt=it.map(Et=>Et.dims),gt=(0,g.getGlChannels)(ht),bt=new Array(xt.length-1);bt[0]=xt[0][at];for(let Et=1;Et<bt.length;Et++)bt[Et]=bt[Et-1]+xt[Et][at];const jt=gt[at],Mt=gt.slice(-2),Pt=gt.join();let Tt=`if (${jt} < ${bt[0]}) {
        return getChannel(
            getX0(${Pt}), vec2(${Mt.join()}));
        }`;for(let Et=1;Et<bt.length;Et++){const zt=bt[Et-1];Tt+=`
            if (${jt} < ${bt[Et]}  && ${jt} >= ${bt[Et-1]}) {
              return getChannel(
                getX${Et}(${_e(gt,jt,zt)}),
                vec2(${_e(Mt,jt,zt)}));
            }`}const St=bt.length,wt=bt[bt.length-1];Tt+=`
            return getChannel(
              getX${St}(${_e(gt,jt,wt)}),
              vec2(${_e(Mt,jt,wt)}));`;const Rt=(0,d.getGlsl)(st.session.backend.glContext.version),At=`
          ${yt}
          float getValue(${gt.map(Et=>"int "+Et)}) {
            ${Tt}
          }

          void main() {
            ${mt} coords = getOutputCoords();
            int lastDim = coords.${gt[ht-1]};
            coords.${gt[ht-1]} = coords.${gt[ht-2]};
            coords.${gt[ht-2]} = lastDim;

            vec4 result = vec4(getValue(${pt}), 0., 0., 0.);

            ${pt[ht-1]} = ${pt[ht-1]} + 1;
            if (${pt[ht-1]} < ${dt[ht-1]}) {
              result.g = getValue(${pt});
            }

            ${pt[ht-2]} = ${pt[ht-2]} + 1;
            if (${pt[ht-2]} < ${dt[ht-2]}) {
              result.a = getValue(${pt});
            }

            ${pt[ht-1]} = ${pt[ht-1]} - 1;
            if (${pt[ht-2]} < ${dt[ht-2]} &&
                ${pt[ht-1]} < ${dt[ht-1]}) {
              result.b = getValue(${pt});
            }
            ${Rt.output} = result;
          }
        `;return Object.assign(Object.assign({},ot),{output:{dims:dt,type:it[0].type,textureType:h.TextureType.packed},shaderSource:At,hasMain:!0})})(et,$,tt,rt.axis)})};const _e=(et,tt,rt)=>{const $=et.indexOf(tt);return et.map((b,nt)=>nt===$?`${b} - ${rt}`:b).join()}},2069:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const d=c(246),h=c(2039),g=c(1163);e.concat=(b,nt,st)=>($(nt),b.session.pack&&nt[0].dims.length>1?[b.run((0,g.createPackedConcatProgramInfoLoader)(b,nt,st),nt)]:[b.run(_(b,nt,st),nt)]);const _=(b,nt,st)=>{const ot=(it=nt.length,at=st.cacheKey,{name:"Concat",inputNames:Array.from({length:it},(lt,dt)=>`X${dt}`),inputTypes:Array(it).fill(h.TextureType.unpacked),cacheHint:at});var it,at;return Object.assign(Object.assign({},ot),{get:()=>((lt,dt,ht,pt)=>{const mt=ht[0].dims.slice();if(pt>=mt.length||pt<-1*mt.length)throw new Error("axis specified for concat doesn't match input dimensionality");pt<0&&(pt=mt.length+pt);const yt=mt.slice(0);for(let Pt=1;Pt<ht.length;Pt++){const Tt=ht[Pt].dims.slice();for(let St=0;St<mt.length;St++)if(St===pt)yt[pt]+=Tt[St];else if(mt[St]!==Tt[St])throw new Error("non concat dimensions must match")}const xt=yt.length,gt=new Array(ht.length);let bt=0;for(let Pt=0;Pt<gt.length;++Pt)bt+=ht[Pt].dims[pt],gt[Pt]=bt;let jt="";jt=ht.length<5?_e(gt):et(gt);const Mt=`
        ${tt(ht.length,xt)}
        ${rt(gt)}
        ${jt}
        float process(int indices[${xt}]) {
          int textureIndex = getTextureWhereDataResides (indices[${pt}]);

          if(textureIndex != 0) {
            indices[${pt}] = indices[${pt}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},dt),{output:{dims:yt,type:ht[0].type,textureType:h.TextureType.unpacked},shaderSource:Mt})})(0,ot,nt,st.axis)})},_e=b=>`int getTextureWhereDataResides(int index) {
      ${b.map((nt,st)=>`if(index<${nt}) {return ${st};}
`).join("")}
    }`,et=b=>_e(b),tt=(b,nt)=>{const st=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${nt}]) {`];for(let ot=0;ot<b;++ot)ot===0?st.push(`	if (textureIndex == ${ot}) { return _X${ot}(indices); }`):ot===b-1?st.push(`	else { return _X${ot}(indices); }`):st.push(`	else if (textureIndex == ${ot}) { return _X${ot}(indices); }`);return st.push("	}"),st.join(`
`)},rt=b=>{const nt=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let st=0;st<b.length;++st)st===0?nt.push(`	if (index == ${st}) { return ${b[st]}; }`):st===b.length-1?nt.push(`	else { return ${b[st]}; }`):nt.push(`	else if (index == ${st}) { return ${b[st]}; }`);return nt.push("	}"),nt.join(`
`)};e.parseConcatAttributes=b=>(0,d.createAttributeWithCacheKey)({axis:b.attributes.getInt("axis")});const $=b=>{if(!b||b.length<1)throw new Error("too few inputs");const nt=b[0].type,st=b[0].dims.length;if(nt==="string")throw new Error("string tensor is not supported yet");for(const ot of b){if(ot.type!==nt)throw new Error("input tensors should be one type");if(ot.dims.length!==st)throw new Error("input tensors should have the same shape")}}},4770:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const d=c(6231),h=c(5060),g=c(2039),_=c(8138),_e=c(2823);e.createUnpackedGroupedConvProgramInfoLoader=(et,tt,rt)=>{const $=(b=tt.length>2,nt=rt.cacheKey,{name:"GroupedConv",inputNames:b?["X","W","Bias"]:["X","W"],inputTypes:b?[g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked]:[g.TextureType.unpacked,g.TextureType.unpacked],cacheHint:nt});var b,nt;return Object.assign(Object.assign({},$),{get:()=>((st,ot,it,at)=>{const lt=ot.length>2?"value += getBias(output_channel);":"",dt=ot[0].dims.slice(),ht=ot[1].dims.slice(),pt=ht[0]/at.group;d.Logger.verbose("GroupedConv",`autpPad:${at.autoPad}, dilations:${at.dilations}, group:${at.group}, kernelShape:${at.kernelShape}, pads:${at.pads}, strides:${at.strides}`);const mt=(0,_.calculateOutputShape)(dt,ht,at.dilations,at.pads,at.strides),yt=(0,h.getGlsl)(st.session.backend.glContext.version),{activationFunction:xt,applyActivation:gt}=(0,_e.getActivationSnippet)(at),bt=`
  const ivec2 strides = ivec2(${at.strides[0]}, ${at.strides[1]});
  const ivec2 pads = ivec2(${at.pads[0]}, ${at.pads[1]});
  ${xt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${pt};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${ht[1]}; wInChannel++) {
      int input_channel = group_id * ${ht[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${ht[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${at.dilations[0]};

        if (xHeight < 0 || xHeight >= ${dt[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${ht[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${at.dilations[1]};
          if (xWidth < 0 || xWidth >= ${dt[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${lt}
    ${gt}
    ${yt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},it),{output:{dims:mt,type:ot[0].type,textureType:g.TextureType.unpacked},shaderSource:bt,hasMain:!0})})(et,tt,$,rt)})}},1386:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const d=c(8138),h=c(8555),g=c(708);e.conv2DPackedPointwise=(_,_e,et)=>{const tt=_e[0].dims,rt=_e[1].dims,$=(0,d.calculateOutputShape)(tt,rt,et.dilations,et.pads,et.strides),b=_.reshapePacked(_e[0],[tt[1],tt[2]*tt[3]]),nt=_.reshapePacked(_e[1],[rt[0],rt[1]]),st=_e.length>2?[nt,b,_e[2]]:[nt,b],ot=_.run((0,g.createPackedMatmulProgramInfoLoader)(_,st,et),st);return _.reshapePacked(ot,$)},e.conv2DPacked=(_,_e,et)=>{const tt=_e[0].dims,rt=_e[1].dims,$=(0,d.calculateOutputShape)(tt,rt,et.dilations,et.pads,et.strides),b=_.run((0,h.createPackedIm2ColProgramInfoLoader)(_,_e[0],_e[1],$,et),[_e[0]]),nt=_.reshapePacked(_e[1],[rt[0],rt[1]*rt[2]*rt[3]]),st=_e.length===3?[nt,b,_e[2]]:[nt,b],ot=_.run((0,g.createPackedMatmulProgramInfoLoader)(_,st,et),st);return _.reshapePacked(ot,$)}},9663:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const d=c(246),h=c(5060),g=c(2039),_=c(2823),_e=(nt,st,ot,it,at,lt)=>(nt-1)*st+ot+(it-1)*at+1-lt,et=(nt,st,ot,it,at)=>{const lt=Math.floor(nt/2);st==="SAME_UPPER"?(ot[it]=lt,ot[at]=nt-lt):st==="SAME_LOWER"&&(ot[it]=nt-lt,ot[at]=lt)};e.convTranspose=(nt,st,ot)=>(b(st,ot),tt(nt,st,ot));const tt=(nt,st,ot)=>{const it=$(ot,st);return[rt(nt,st,it)]},rt=(nt,st,ot)=>nt.run(((it,at,lt)=>{const dt=(ht=at.length>2,pt=lt.cacheKey,{name:"ConvTranspose",inputNames:ht?["X","W","B"]:["X","W"],inputTypes:ht?[g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked]:[g.TextureType.unpacked,g.TextureType.unpacked],cacheHint:pt});var ht,pt;return Object.assign(Object.assign({},dt),{get:()=>((mt,yt,xt,gt)=>{const bt=yt.length>2?"getB(output_channel)":"0.0",jt=yt[0].dims,Mt=yt[1].dims,Pt=Mt[1],Tt=Mt[0]/gt.group,St=[yt[0].dims[0],yt[1].dims[1]*gt.group,...gt.outputShape],wt=(0,h.getGlsl)(mt.session.backend.glContext.version),{activationFunction:Rt,applyActivation:At}=(0,_.getActivationSnippet)(gt),Et=`
  const ivec2 strides = ivec2(${gt.strides[0]}, ${gt.strides[1]});
  const ivec2 pads = ivec2(${gt.pads[0]}, ${gt.pads[1]});
  ${Rt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${Pt};
    int wOutChannel = output_channel - group_id * ${Pt};

    float value = ${bt};
    for (int inChannelOffset = 0; inChannelOffset < ${Tt}; inChannelOffset++) {
      int input_channel = group_id * ${Tt} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Mt[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Mt[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${gt.dilations[0]}, wHOff * ${gt.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${jt[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${jt[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${At}
    ${wt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},xt),{output:{dims:St,type:yt[0].type,textureType:g.TextureType.unpacked},shaderSource:Et,hasMain:!0})})(it,at,dt,lt)})})(nt,st,ot),st),$=(nt,st)=>{const ot=nt.kernelShape.slice();if(nt.kernelShape.length===0)for(let dt=2;dt<st[1].dims.length;++dt)ot.push(st[1].dims[dt]);const it=nt.pads.slice(),at=nt.outputShape.slice();((dt,ht,pt,mt,yt,xt,gt,bt)=>{const jt=dt.length-2,Mt=bt.length===0;for(let Pt=0;Pt<jt;++Pt){const Tt=Mt?dt[Pt+2]*xt[Pt]:bt[Pt],St=_e(dt[Pt+2],xt[Pt],yt[Pt],ht[Pt],pt[Pt],Tt);et(St,mt,yt,Pt,Pt+jt),Mt&&bt.push(xt[Pt]*(dt[Pt+2]-1)+gt[Pt]+(ht[Pt]-1)*pt[Pt]+1-yt[Pt]-yt[Pt+jt])}})(st[0].dims,ot,nt.dilations,nt.autoPad,it,nt.strides,nt.outputPadding,at);const lt=Object.assign({},nt);return Object.assign(lt,{kernelShape:ot,pads:it,outputShape:at,cacheKey:nt.cacheKey}),lt};e.parseConvTransposeAttributes=nt=>{const st=nt.attributes,ot=(0,_.parseInternalActivationAttributes)(st),it=st.getString("auto_pad","NOTSET"),at=st.getInts("dilations",[1,1]),lt=st.getInt("group",1),dt=st.getInts("kernel_shape",[]),ht=st.getInts("output_padding",[0,0]),pt=st.getInts("output_shape",[]),mt=st.getInts("pads",[0,0,0,0]),yt=st.getInts("strides",[1,1]);return(0,d.createAttributeWithCacheKey)(Object.assign({autoPad:it,dilations:at,group:lt,kernelShape:dt,outputPadding:ht,outputShape:pt,pads:mt,strides:yt},ot))};const b=(nt,st)=>{if(!nt||nt.length!==2&&nt.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(nt[0].dims.length!==4||nt[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(nt[0].dims[1]!==nt[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const ot=nt[1].dims[1]*st.group;if(nt.length===3&&(nt[2].dims.length!==1||nt[2].dims[0]!==ot))throw new Error("invalid bias");const it=nt[0].dims.length-2;if(st.dilations.length!==it)throw new Error(`dilations should be ${it}D`);if(st.strides.length!==it)throw new Error(`strides should be ${it}D`);if(st.pads.length!==2*it)throw new Error(`pads should be ${2*it}D`);if(st.outputPadding.length!==it)throw new Error(`output_padding should be ${it}D`);if(st.kernelShape.length!==0&&st.kernelShape.length!==nt[1].dims.length-2)throw new Error("invalid kernel shape");if(st.outputShape.length!==0&&st.outputShape.length!==nt[0].dims.length-2)throw new Error("invalid output shape");if(nt[0].type!=="float32"||nt[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(nt.length===3&&nt[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const d=c(246),h=c(2517),g=c(4770),_=c(1386),_e=c(9828),et=c(2823),tt=c(3248),rt=c(5623);e.calculateOutputShape=(it,at,lt,dt,ht)=>{const pt=it[0],mt=it.slice(2),yt=mt.length,xt=at[0],gt=at.slice(2).map((jt,Mt)=>jt+(jt-1)*(lt[Mt]-1)),bt=mt.map((jt,Mt)=>jt+dt[Mt]+dt[Mt+yt]).map((jt,Mt)=>Math.floor((jt-gt[Mt]+ht[Mt])/ht[Mt]));return[pt,xt].concat(...bt)},e.conv=(it,at,lt)=>(ot(at,lt),$(it,at,lt));const $=(it,at,lt)=>{const dt=st(lt,at),ht=it.session.pack,pt=dt.kernelShape[0]===1&&dt.kernelShape[1]===1;return dt.group>1?[it.run((0,g.createUnpackedGroupedConvProgramInfoLoader)(it,at,dt),at)]:pt&&ht?[b(it,at,dt)]:ht&&at[0].dims.length===4&&at[0].dims[0]===1&&!pt?[(0,_.conv2DPacked)(it,at,dt)]:[nt(it,at,dt)]},b=(it,at,lt)=>{const dt=at[0].dims,ht=at[1].dims,pt=(0,e.calculateOutputShape)(dt,ht,lt.dilations,lt.pads,lt.strides),mt=it.reshapeUnpacked(at[0],[dt[1],dt[2]*dt[3]]),yt=it.reshapeUnpacked(at[1],[ht[0],ht[1]]),xt=at.length>2?[yt,mt,at[2]]:[yt,mt],gt=it.run((0,rt.createMatmulProgramInfoLoader)(xt,lt),xt);return it.reshapeUnpacked(gt,pt)},nt=(it,at,lt)=>{const dt=at[0].dims,ht=at[1].dims,pt=(0,e.calculateOutputShape)(dt,ht,lt.dilations,lt.pads,lt.strides),mt=it.run((0,tt.createIm2ColProgramInfoLoader)(it,at[0],at[1],pt,lt),[at[0]]),yt=at.length===3?[mt,at[1],at[2]]:[mt,at[1]];return it.run((0,_e.createDotProductProgramInfoLoader)(it,at,pt,lt),yt)},st=(it,at)=>{const lt=it.kernelShape.slice();if(it.kernelShape.length===0)for(let pt=2;pt<at[1].dims.length;++pt)lt.push(at[1].dims[pt]);const dt=it.pads.slice();h.PoolConvUtil.adjustPadsBasedOnAutoPad(at[0].dims,it.strides,it.dilations,lt,dt,it.autoPad);const ht=Object.assign({},it);return Object.assign(ht,{kernelShape:lt,pads:dt,cacheKey:it.cacheKey}),ht};e.parseConvAttributes=it=>{const at=it.attributes,lt=(0,et.parseInternalActivationAttributes)(at),dt=at.getString("auto_pad","NOTSET"),ht=at.getInts("dilations",[1,1]),pt=at.getInt("group",1),mt=at.getInts("kernel_shape",[]),yt=at.getInts("pads",[0,0,0,0]),xt=at.getInts("strides",[1,1]);return(0,d.createAttributeWithCacheKey)(Object.assign({autoPad:dt,dilations:ht,group:pt,kernelShape:mt,pads:yt,strides:xt},lt))};const ot=(it,at)=>{if(!it||it.length!==2&&it.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(it[0].dims.length!==4||it[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(it[0].dims[1]!==it[1].dims[1]*at.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(it.length===3&&(it[2].dims.length!==1||it[1].dims[0]!==it[2].dims[0]))throw new Error("invalid bias");const lt=it[0].dims.length-2;if(at.dilations.length!==lt)throw new Error(`dilations should be ${lt}D`);if(at.strides.length!==lt)throw new Error(`strides should be ${lt}D`);if(at.pads.length!==2*lt)throw new Error(`pads should be ${2*lt}D`);if(at.kernelShape.length!==0&&at.kernelShape.length!==it[1].dims.length-2)throw new Error("invalid kernel shape");if(it[0].type!=="float32"||it[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(it.length===3&&it[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const d=c(3738);e.depthToSpace=(g,_,_e)=>{h(_);const et=_e.blocksize,tt=et*et,rt=_e.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],$=_e.mode==="DCR"?[_[0].dims[0],et,et,_[0].dims[1]/tt,_[0].dims[2],_[0].dims[3]]:[_[0].dims[0],_[0].dims[1]/tt,et,et,_[0].dims[2],_[0].dims[3]],b=g.reshapeUnpacked(_[0],$),nt={perm:rt,cacheKey:`${rt}`},[st]=(0,d.transpose)(g,[b],nt),ot=[_[0].dims[0],_[0].dims[1]/tt,_[0].dims[2]*et,_[0].dims[3]*et];return[g.reshapeUnpacked(st,ot)]},e.parseDepthToSpaceAttributes=g=>{const _=g.attributes.getInt("blocksize");if(_<1)throw new Error(`blocksize must be >= 1, but got : ${_} for DepthToSpace`);const _e=g.attributes.getString("mode","DCR");if(_e!=="DCR"&&_e!=="CRD")throw new Error(`unrecognized mode: ${_e} for DepthToSpace`);return{mode:_e,blocksize:_}};const h=g=>{if(g.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${g.length}`);if(g[0].type==="string"||g[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const d=c(2517),h=c(5060),g=c(2039),_=c(2823),_e=c(3248);e.createDotProductProgramInfoLoader=(et,tt,rt,$)=>{const b=((nt,st)=>({name:"ConvDotProduct",inputNames:nt?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:nt?[g.TextureType.unpacked,g.TextureType.packedLastDimension,g.TextureType.unpacked]:[g.TextureType.unpacked,g.TextureType.packedLastDimension],cacheKey:st.activationCacheKey}))(tt.length>2,$);return Object.assign(Object.assign({},b),{get:()=>((nt,st,ot,it,at)=>{const lt=ot[0].dims,dt=ot[1].dims,ht=[dt[0],Math.ceil(lt[1]*dt[2]*dt[3]/4)],pt=(0,_e.calculateIm2ColDims)(lt,dt,it),[mt,yt]=nt.calculateTextureWidthAndHeight(ht,g.TextureType.packedLastDimension),xt=d.ShapeUtil.computeStrides(pt),[gt,bt]=nt.calculateTextureWidthAndHeight(pt,g.TextureType.packedLastDimension),jt=it.length,Mt=ot.length<3?"0.0":"_B(b)",Pt=Math.ceil(lt[1]*dt[2]*dt[3]/4),{activationFunction:Tt,applyActivation:St}=(0,_.getActivationSnippet)(at),wt=(0,h.getGlsl)(nt.session.backend.glContext.version),Rt=`
${Tt}
float process(int indices[${jt}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${xt[0]} + im2col[1] * ${xt[1]} + im2col[2] * ${xt[2]};
  int kernelOffset = indices[1] * ${ht[1]};
  float value = ${Mt};
  for (int i = 0; i < ${Pt}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${gt}, ${bt});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${mt}, ${yt});
    value += dot(${wt.texture2D}(Im2Col, im2colCoords), ${wt.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${St}
  return value;
}`;return Object.assign(Object.assign({},st),{output:{dims:it,type:ot[0].type,textureType:g.TextureType.unpacked},shaderSource:Rt})})(et,b,tt,rt,$)})}},7992:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const d=c(2517);e.flatten=(g,_,_e)=>{h(_,_e);const et=d.ShapeUtil.flattenShape(_[0].dims,_e);return[g.reshapeUnpacked(_[0],et)]},e.parseFlattenAttributes=g=>g.attributes.getInt("axis",1);const h=(g,_)=>{if(!g||g.length!==1)throw new Error("Flatten requires 1 input.");const _e=g[0].dims.length;if(_e===0)throw new Error("scalar tensor is not supported.");if(_<-_e||_>_e)throw new Error("Invalid axis");if(g[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const d=c(2517),h=c(4909);e.getActivationSnippet=function(g){let _;switch(g.activation){case"Relu":_=(0,h.glslRelu)();break;case"Sigmoid":_=(0,h.glslSigmoid)();break;case"Clip":_=(0,h.glslClip)(g.clipMin,g.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const _e=_.name;return{activationFunction:_.body,applyActivation:`value = ${_e}_(value);`}},e.parseInternalActivationAttributes=g=>{const _=g.getString("activation","");if(_==="Clip"){const[_e,et]=g.getFloats("activation_params",[d.MIN_CLIP,d.MAX_CLIP]);return{activation:_,clipMax:et,clipMin:_e,activationCacheKey:`${_}:${_e},${et}`}}return{activation:_,activationCacheKey:_}}},1253:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const d=c(246),h=c(782),g=c(2517),_=c(2039);e.gather=(rt,$,b)=>(tt($,b.axis),[rt.run(et(rt,$,b),$)]),e.parseGatherAttributes=rt=>(0,d.createAttributeWithCacheKey)({axis:rt.attributes.getInt("axis",0)});const _e={name:"Gather",inputNames:["A","B"],inputTypes:[_.TextureType.unpacked,_.TextureType.unpacked]},et=(rt,$,b)=>{const nt=Object.assign(Object.assign({},_e),{cacheHint:b.cacheKey});return Object.assign(Object.assign({},nt),{get:()=>((st,ot,it,at)=>{const lt=it[0].dims.slice(),dt=it[1].dims.slice(),ht=new Array(lt.length+dt.length-1);at=g.ShapeUtil.normalizeAxis(at,lt.length);const pt=[];for(let yt=0;yt<ht.length;yt++)yt<at?(ht[yt]=lt[yt],pt.push(`inputIdx[${yt}] = outputIdx[${yt}];`)):yt<at+dt.length?(ht[yt]=dt[yt-at],pt.push(`indexDataIdx[${yt-at}] = outputIdx[${yt}];`)):(ht[yt]=lt[yt-dt.length+1],pt.push(`inputIdx[${yt-dt.length+1}] = outputIdx[${yt}];`));const mt=`
      float process(int outputIdx[${ht.length||1}]) {
        int inputIdx[${lt.length}];
        int indexDataIdx[${dt.length||1}];
        indexDataIdx[0] = 0;
        ${pt.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${at}] = idx < 0 ? idx + ${lt[at]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},ot),{output:{dims:ht,type:it[0].type,textureType:_.TextureType.unpacked},shaderSource:mt})})(0,nt,$,b.axis)})},tt=(rt,$)=>{if(!rt||rt.length!==2)throw new Error("Gather requires 2 inputs.");const b=rt[0].dims.length;if(b<1)throw new Error("Invalid input shape.");if($<-b||$>b-1)throw new Error("Invalid axis.");if(h.NUMBER_TYPES.indexOf(rt[0].type)===-1)throw new Error("Invaid input type.");if(rt[1].type!=="int32"&&rt[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const d=c(246),h=c(2517),g=c(2039);e.gemm=(rt,$,b)=>(tt($,b),[rt.run(_e($,b),$)]);const _=(rt,$)=>{const b=rt.attributes.getInt("transA",0)!==0,nt=rt.attributes.getInt("transB",0)!==0,st=rt.attributes.getFloat("alpha",1),ot=rt.attributes.getFloat("beta",1);return(0,d.createAttributeWithCacheKey)({transA:b,transB:nt,alpha:st,beta:ot,isOptionalC:$})};e.parseGemmAttributesV7=rt=>_(rt,!1),e.parseGemmAttributesV11=rt=>_(rt,!0);const _e=(rt,$)=>{const b={name:"Gemm",inputNames:rt.length===3?["A","B","C"]:["A","B"],inputTypes:rt.length===3?[g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked]:[g.TextureType.unpacked,g.TextureType.unpacked],key:$.cacheKey};return Object.assign(Object.assign({},b),{get:()=>et(b,rt,$)})},et=(rt,$,b)=>{const nt=$[0].dims.slice(),st=$[1].dims.slice(),[ot,it]=h.GemmUtil.getShapeOfGemmResult(nt,b.transA,st,b.transB,$.length===3?$[2].dims:void 0),at=[ot,it];if(!at)throw new Error("Can't use gemm on the given tensors");let lt=nt[nt.length-1],dt="";b.transA&&(lt=nt[0]),b.transA&&b.transB?dt="value += _A_T(a) * _B_T(b);":b.transA&&!b.transB?dt="value += _A_T(a) * _B(b);":!b.transA&&b.transB?dt="value += _A(a) * _B_T(b);":b.transA||b.transB||(dt="value += _A(a) * _B(b);");const ht=at.length,pt=`
      float process(int indices[${ht}]) {
          int a[${ht}];
          int b[${ht}];
          ${$.length===3?`int c[${$[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${$.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${lt}; ++k) {
              a[${ht-1}] = k;
              b[${ht-2}] = k;
              ${dt}
          }

          value = value * alpha;
          ${$.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},rt),{output:{dims:at,type:$[0].type,textureType:g.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:b.alpha},{name:"beta",type:"float",data:b.beta}],shaderSource:pt})},tt=(rt,$)=>{if(!rt)throw new Error("Input is missing");if($.isOptionalC&&(rt.length<2||rt.length>3))throw new Error("Invaid input shape.");if(!$.isOptionalC&&rt.length!==3)throw new Error("Gemm requires 3 inputs");if(rt.length===3&&rt[2].dims.length!==1&&rt[2].dims.length!==2)throw new Error("Invalid input shape of C");if(rt[0].type!=="float32"&&rt[0].type!=="float64"||rt[1].type!=="float32"&&rt[1].type!=="float64"||rt.length===3&&rt[2].type!=="float32"&&rt[2].type!=="float64")throw new Error("Invalid input type.");if(rt[0].type!==rt[1].type||rt.length===3&&rt[0].type!==rt[2].type)throw new Error("Input types are mismatched")}},8555:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const d=c(5060),h=c(2039),g=c(2827);e.createPackedIm2ColProgramInfoLoader=(_,_e,et,tt,rt)=>{const $=(b=rt.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[h.TextureType.packed],cacheHint:b});var b;return Object.assign(Object.assign({},$),{get:()=>((nt,st,ot,it,at,lt)=>{const dt=ot.dims,ht=it.dims,pt=at.length,mt=[ht[1]*ht[2]*ht[3],at[2]*at[3]],yt=ht[2]*ht[3],xt=(0,g.unpackFromChannel)(),gt=(0,d.getGlsl)(nt.session.backend.glContext.version);let bt="";for(let Mt=0;Mt<=1;Mt++)for(let Pt=0;Pt<=1;Pt++)bt+=`
            blockIndex = rc.x + ${Pt};
            pos = rc.y + ${Mt};

            if(blockIndex < ${mt[1]} && pos < ${mt[0]}) {
              offsetY = int(blockIndex / (${at[pt-1]})) * ${lt.strides[0]} -
                ${lt.pads[0]};
              d0 = offsetY + ${lt.dilations[0]} * (imod(pos, ${yt}) / ${ht[2]});

              if(d0 < ${dt[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${at[pt-1]}) * ${lt.strides[1]} -
                  ${lt.pads[1]};
                d1 = offsetX + ${lt.dilations[1]} * imod(imod(pos, ${yt}), ${ht[2]});

                if(d1 < ${dt[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${yt}.);
                    innerDims = vec2(d0, d1);
                    result[${2*Mt+Pt}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const jt=`
      ${xt}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${bt}
          ${gt.output} = result;
      }
            `;return Object.assign(Object.assign({},st),{output:{dims:mt,type:ot.type,textureType:h.TextureType.packed},shaderSource:jt,hasMain:!0})})(_,$,_e,et,tt,rt)})}},3248:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const d=c(2039);e.createIm2ColProgramInfoLoader=(h,g,_,_e,et)=>{const tt=(rt=et.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[d.TextureType.unpacked],cacheHint:rt});var rt;return Object.assign(Object.assign({},tt),{get:()=>(($,b,nt,st,ot,it)=>{const at=nt.dims,lt=st.dims,dt=ot.length,ht=(0,e.calculateIm2ColDims)(at,lt,ot,4),pt=`
        const int XC = ${at[1]};
        const int XH = ${at[2]};
        const int XW = ${at[3]};
        const int KH = ${it.kernelShape[0]};
        const int KW = ${it.kernelShape[1]};
        const int dilationH = ${it.dilations[0]};
        const int dilationW = ${it.dilations[1]};
        const int strideH = ${it.strides[0]};
        const int strideW = ${it.strides[1]};
        const int padH = ${it.pads[0]};
        const int padW = ${it.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${dt}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${at.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},b),{output:{dims:ht,type:nt.type,textureType:d.TextureType.packedLastDimension},shaderSource:pt})})(0,tt,g,_,_e,et)})},e.calculateIm2ColDims=(h,g,_,_e=4)=>[_[0],_[2],_[3],Math.ceil(h[1]*g[2]*g[3]/_e)]},6572:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const d=c(246),h=c(2039);e.imageScaler=(tt,rt,$)=>(et(rt),[tt.run(_(tt,rt,$),rt)]),e.parseImageScalerAttributes=tt=>{const rt=tt.attributes.getFloat("scale"),$=tt.attributes.getFloats("bias");return(0,d.createAttributeWithCacheKey)({scale:rt,bias:$})};const g={name:"ImageScaler",inputNames:["X"],inputTypes:[h.TextureType.unpacked]},_=(tt,rt,$)=>{const b=Object.assign(Object.assign({},g),{cacheHint:$.cacheKey});return Object.assign(Object.assign({},b),{get:()=>((nt,st,ot,it)=>{const at=ot[0].dims.slice(),lt=at.length,dt=`
      ${_e(it.bias.length)}
      float process(int indices[${lt}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},st),{output:{dims:at,type:ot[0].type,textureType:h.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:it.bias.length,data:it.bias},{name:"scale",type:"float",data:it.scale}],shaderSource:dt})})(0,b,rt,$)})},_e=tt=>{const rt=[`float getBias(float bias[${tt}], int channel) {`];for(let $=0;$<tt;++$)$===0?rt.push(`	if (channel == ${$}) { return bias[${$}]; }`):$===tt-1?rt.push(`	else { return bias[${$}]; }`):rt.push(`	else if (channel == ${$}) { return bias[${$}]; }`);return rt.push("	}"),rt.join(`
`)},et=tt=>{if(!tt||tt.length!==1)throw new Error("ImageScaler requires 1 input.");if(tt[0].dims.length!==4)throw new Error("Invalid input shape.");if(tt[0].type!=="float32"&&tt[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const d=c(5060),h=c(2039);e.instanceNormalization=(rt,$,b)=>{tt($);const nt=rt.run(_($[0]),$);return[rt.run(et(rt,$[0],b,nt.dims),[$[0],nt,$[1],$[2]])]},e.parseInstanceNormalizationAttributes=rt=>rt.attributes.getFloat("epsilon",1e-5);const g={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[h.TextureType.unpacked]},_=rt=>Object.assign(Object.assign({},g),{get:()=>(($,b)=>{const nt=b.dims.slice(),st=nt[1],ot=nt[2]*nt[3],it=[nt[0],st],at=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${nt[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${nt[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${ot});
        temp = 0.0;
        for(int a2=0; a2<${nt[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${nt[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${ot});

        return v;
      }`;return Object.assign(Object.assign({},$),{output:{dims:it,type:b.type,textureType:h.TextureType.packedLastDimension},shaderSource:at})})(g,rt)}),_e={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[h.TextureType.unpacked,h.TextureType.packedLastDimension,h.TextureType.unpacked,h.TextureType.unpacked]},et=(rt,$,b,nt)=>{const st=Object.assign(Object.assign({},_e),{cacheHint:`${b}`});return Object.assign(Object.assign({},st),{get:()=>((ot,it,at,lt,dt)=>{const ht=(0,d.getGlsl)(ot.session.backend.glContext.version),[pt,mt]=ot.calculateTextureWidthAndHeight(dt,h.TextureType.packedLastDimension),[yt,xt]=[pt/4,mt],gt=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${yt}, ${xt});
        return ${ht.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},it),{output:{dims:at.dims,type:at.type,textureType:h.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:lt}],shaderSource:gt})})(rt,st,$,b,nt)})},tt=rt=>{if(!rt||rt.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const $=rt[0],b=rt[1],nt=rt[2];if($.dims.length<3||b.dims.length!==1||nt.dims.length!==1)throw new Error("Invalid input shape.");if(b.dims[0]!==$.dims[1]||nt.dims[0]!==$.dims[1])throw new Error("Input shapes are mismatched.");if($.type!=="float32"&&$.type!=="float64"||b.type!=="float32"&&b.type!=="float64"||nt.type!=="float32"&&nt.type!=="float64")throw new Error("Invalid input type.");if(rt[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const d=c(2517),h=c(5060),g=c(2039),_=c(9390),_e=c(2823),et=c(5623);e.createPackedMatmulProgramInfoLoader=(tt,rt,$)=>{const b=(nt=rt.length>2,st=$.activationCacheKey,{name:"MatMul (packed)",inputNames:nt?["A","B","Bias"]:["A","B"],inputTypes:nt?[g.TextureType.packed,g.TextureType.packed,g.TextureType.packed]:[g.TextureType.packed,g.TextureType.packed],cacheHint:st});var nt,st;return Object.assign(Object.assign({},b),{get:()=>((ot,it,at,lt)=>{const dt=at.length>2,ht=dt?"value += getBiasForMatmul();":"",pt=at[0].dims,mt=at[1].dims,yt=d.BroadcastUtil.calcShape(pt,mt,!0),xt=!d.ShapeUtil.areEqual(at[0].dims,at[1].dims);if(!yt)throw new Error("Can't use matmul on the given tensors");const gt=pt[pt.length-1],bt=Math.ceil(gt/2),jt=pt.length,Mt=mt.length,Pt=(0,h.getGlsl)(ot.session.backend.glContext.version),Tt=(0,_.getCoordsDataType)(yt.length),St=yt.length,wt=(0,_.getGlChannels)(),{activationFunction:Rt,applyActivation:At}=(0,_e.getActivationSnippet)(lt),Et=dt?`${(0,et.getBiasForMatmul)(Tt,wt,at[2].dims,yt,!0)}`:"",zt=xt?`${function(Er,Tr,wr,gr){let Pr=[],Nr=[];const Ar=wr[0].dims,Rr=wr[1].dims,Ir=Ar.length,Ur=Rr.length,Fr=gr.length,nn=Fr-Ir,en=Fr-Ur;Pr=Ar.map((hr,mr)=>`coords.${Tr[mr+nn]}`),Pr[Ir-1]="i*2",Pr.join(", "),Nr=Rr.map((hr,mr)=>`coords.${Tr[mr+en]}`),Nr[Ur-2]="i*2",Nr.join(", ");const on=d.BroadcastUtil.getBroadcastDims(Ar,gr),Yt=d.BroadcastUtil.getBroadcastDims(Rr,gr),rr=on.map(hr=>`coords.${Tr[hr+nn]} = 0;`).join(`
`),ar=Yt.map(hr=>`coords.${Tr[hr+en]} = 0;`).join(`
`),yr=`int lastDim = coords.${Tr[Fr-1]};
  coords.${Tr[Fr-1]} = coords.${Tr[Fr-2]};
  coords.${Tr[Fr-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${Er} coords = getOutputCoords();
  ${yr}
  ${rr}
  vec4 outputValue = getA(${Pr});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${Er} coords = getOutputCoords();
  ${yr}
  ${ar}
  vec4 outputValue = getB(${Nr});
  return outputValue;
}`}(Tt,wt,at,yt)}`:"",er=xt?"getAAtOutCoordsMatmul(i)":`getA(${function(Er,Tr){let wr="";for(let gr=0;gr<Tr-2;gr++)wr+=`rc.${Er[gr]}, `;return wr+=`rc.${Er[Tr-2]}, i*2`,wr}(wt,jt)})`,pr=xt?"getBAtOutCoordsMatmul(i)":`getB(${function(Er,Tr){let wr="";for(let gr=0;gr<Tr-2;gr++)wr+=`rc.${Er[gr]}, `;return wr+=`i*2, rc.${Er[Tr-1]}`,wr}(wt,Mt)})`,_r=`
            ${zt}
            ${Et}
            ${Rt}
            void main() {
              ${xt?"":`${Tt} rc =
          getOutputCoords(); int lastDim = rc.${wt[St-1]}; rc.${wt[St-1]} =
          rc.${wt[St-2]}; rc.${wt[St-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${bt}; i++) {
                vec4 a = ${er};
                vec4 b = ${pr};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${ht}
              ${At}
              ${Pt.output} = value;
            }`;return Object.assign(Object.assign({},it),{output:{dims:yt,type:at[0].type,textureType:g.TextureType.packed},shaderSource:_r,hasMain:!0})})(tt,b,rt,$)})}},5623:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const d=c(2517),h=c(2039),g=c(9390),_=c(2823),_e=c(708);function et($,b){const nt=(st=$.length>2,ot=b.activationCacheKey,{name:"MatMul",inputNames:st?["A","B","Bias"]:["A","B"],inputTypes:st?[h.TextureType.unpacked,h.TextureType.unpacked,h.TextureType.unpacked]:[h.TextureType.unpacked,h.TextureType.unpacked],cacheHint:ot});var st,ot;return Object.assign(Object.assign({},nt),{get:()=>function(it,at,lt){const dt=at[0].dims,ht=at[1].dims,pt=d.BroadcastUtil.calcShape(dt,ht,!0);if(!pt)throw new Error("Can't use matmul on the given tensors");const mt=(0,g.getCoordsDataType)(pt.length),yt=(0,g.getGlChannels)(),{activationFunction:xt,applyActivation:gt}=(0,_.getActivationSnippet)(lt),bt=at.length>2,jt=bt?"value += getBiasForMatmul();":"",Mt=bt?`${rt(mt,yt,at[2].dims,pt,!1)}`:"",Pt=pt.length,Tt=dt.length,St=ht.length,wt=`
    ${xt}
    ${Mt}
    float process(int indices[${Pt}]) {
        int a[${Tt}];
        int b[${St}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${dt[dt.length-1]}; ++k) {
            a[${Tt-1}] = k;
            b[${St-2}] = k;
            value += _A(a) * _B(b);
        }
        ${jt}
        ${gt}
        return value;
    }`;return Object.assign(Object.assign({},it),{output:{dims:pt,type:at[0].type,textureType:h.TextureType.unpacked},shaderSource:wt})}(nt,$,b)})}e.matMul=($,b,nt)=>(tt(b),$.session.pack?[$.run((0,_e.createPackedMatmulProgramInfoLoader)($,b,nt),b)]:[$.run(et(b,nt),b)]),e.parseMatMulAttributes=$=>(0,_.parseInternalActivationAttributes)($.attributes),e.createMatmulProgramInfoLoader=et;const tt=$=>{if(!$||$.length!==2)throw new Error("MatMul requires 2 inputs.");if($[0].dims[$[0].dims.length-1]!==$[1].dims[$[1].dims.length-2])throw new Error("shared dimension does not match.");if($[0].type!=="float32"&&$[0].type!=="float64"||$[1].type!=="float32"&&$[1].type!=="float64")throw new Error("inputs should be float type");if($[0].type!==$[1].type)throw new Error("inputs types should match")};function rt($,b,nt,st,ot){let it="";const at=nt.length,lt=st.length,dt=lt-at;it=lt<2&&at>0?"coords":nt.map((mt,yt)=>`coords.${b[yt+dt]}`).join(", ");const ht=d.BroadcastUtil.getBroadcastDims(nt,st).map(mt=>`coords.${b[mt+dt]} = 0;`).join(`
`);let pt="vec4(outputValue.xx, outputValue.yy)";return d.ShapeUtil.size(nt)===1&&(pt="vec4(outputValue.x)"),ot?`
vec4 getBiasForMatmul() {
  ${$} coords = getOutputCoords();
  ${ht}
  vec4 outputValue = getBias(${it});
  return ${pt};
}`:`
float getBiasForMatmul() {
  ${$} coords = getOutputCoords();
  ${ht}
  return getBias(coords.x);
}`}e.getBiasForMatmul=rt},2403:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const d=c(5060),h=c(2039),g=c(9390),_=c(2827),_e={name:"pack",inputNames:["A"],inputTypes:[h.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(et,tt)=>Object.assign(Object.assign({},_e),{get:()=>((rt,$)=>{const b=(0,d.getGlsl)(rt.session.backend.glContext.version),nt=$.dims,st=nt.length,ot=$.dims.length,it=(0,g.getCoordsDataType)(ot),at=(0,_.getChannels)("rc",ot),lt=(dt=ot,ht=at,pt=nt[nt.length-2],mt=nt[nt.length-1],dt===0||dt===1?"":`
    int r = ${ht[dt-2]};
    int c = ${ht[dt-1]};
    int rp1 = ${ht[dt-2]} + 1;
    int cp1 = ${ht[dt-1]} + 1;
    bool rEdge = rp1 >= ${mt};
    bool cEdge = cp1 >= ${pt};
    `);var dt,ht,pt,mt;let yt;yt=st===0?[1,1]:st===1?[nt[0],1]:[nt[ot-1],nt[ot-2]];const xt=function(jt,Mt,Pt){if(jt===0)return"false";if(jt===1)return`rc > ${Mt[0]}`;let Tt="";for(let St=jt-2;St<jt;St++)Tt+=`${Pt[St]} >= ${Mt[St-jt+2]}`,St<jt-1&&(Tt+="||");return Tt}(ot,yt,at),gt=function(jt,Mt){const Pt=jt.length;if(Pt===0)return"getA(), 0, 0, 0";if(Pt===1)return`getA(rc),
            rc + 1 >= ${jt[0]} ? 0. : getA(rc + 1),
            0, 0`;let Tt="";if(Pt>2)for(let St=0;St<Pt-2;++St)Tt+=`${Mt[St]},`;return`getA(${Tt}r, c),
          rEdge ? 0. : getA(${Tt}rp1, c),
          cEdge ? 0. : getA(${Tt}r, cp1),
          rEdge || cEdge ? 0. : getA(${Tt}rp1, cp1)`}(nt,at),bt=`
        void main() {
          ${it} rc = getOutputCoords();

          if(${xt}) {
            ${b.output} = vec4(0);
          } else {
            ${lt}

            ${b.output} = vec4(${gt});
          }
        }
      `;return Object.assign(Object.assign({},_e),{hasMain:!0,output:{dims:$.dims,type:$.type,textureType:h.TextureType.packed},shaderSource:bt})})(et,tt)})},2827:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const d=c(9390);function h(g,_){return(0,d.getGlChannels)(_).map(_e=>`${g}.${_e}`)}e.getVecChannels=h,e.getChannels=function(g,_){return _===1?[g]:h(g,_)},e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const d=c(246),h=c(2517),g=c(5060),_=c(2039),_e={name:"Pad",inputNames:["A"],inputTypes:[_.TextureType.unpacked]};e.padV2=(it,at,lt)=>(rt(at),[it.run(Object.assign(Object.assign({},_e),{cacheHint:lt.cacheKey,get:()=>tt(it,at[0],lt)}),at)]),e.parsePadAttributesV2=it=>{const at=it.attributes.getString("mode","constant"),lt=it.attributes.getFloat("value",0),dt=it.attributes.getInts("pads");return(0,d.createAttributeWithCacheKey)({mode:at,value:lt,pads:dt})},e.padV11=(it,at,lt)=>{$(at);const dt=et(it,at,lt);return(0,e.padV2)(it,[at[0]],dt)},e.parsePadAttributesV11=it=>it.attributes.getString("mode","constant");const et=(it,at,lt)=>{if(!it.session.isInitializer(at[1].dataId)||at.length>=3&&!it.session.isInitializer(at[2].dataId))throw new Error("dynamic pad attributes are not allowed");const dt=Array.from(at[1].integerData),ht=at.length>=3?at[2].floatData[0]:0;return(0,d.createAttributeWithCacheKey)({mode:lt,pads:dt,value:ht})},tt=(it,at,lt)=>{const dt=h.ShapeUtil.padShape(at.dims.slice(),lt.pads),ht=dt.length,pt=`
      ${b(it,at,lt)}
      float process(int[${ht}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[_.TextureType.unpacked],output:{dims:dt,type:at.type,textureType:_.TextureType.unpacked},shaderSource:pt}},rt=it=>{if(!it||it.length!==1)throw new Error("Pad requires 1 input");if(it[0].type!=="float32"&&it[0].type!=="float64")throw new Error("Invalid input type.")},$=it=>{if(!it||it.length!==2&&it.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(it[1].type!=="int32")throw new Error("Invalid input type.");if(it.length>=3&&it[2].type==="string")throw new Error("Invalid input type.")},b=(it,at,lt)=>{const dt=(0,g.getGlsl)(it.session.backend.glContext.version),[ht,pt]=it.calculateTextureWidthAndHeight(at.dims,_.TextureType.unpacked),mt=h.ShapeUtil.computeStrides(at.dims);switch(lt.mode){case"constant":return nt(dt,at.dims,mt,ht,pt,lt.pads,lt.value);case"reflect":return st(dt,at.dims,mt,ht,pt,lt.pads);case"edge":return ot(dt,at.dims,mt,ht,pt,lt.pads);default:throw new Error("Invalid mode")}},nt=(it,at,lt,dt,ht,pt,mt)=>{const yt=at.length;let xt="";for(let gt=yt-1;gt>=0;--gt)xt+=`
        k = m[${gt}] - ${pt[gt]};
        if (k < 0)  return constant;
        if (k >= ${at[gt]}) return constant;
        offset += k * ${lt[gt]};
        `;return`
      float padA(int m[${yt}]) {
        const float constant = float(${mt});
        int offset = 0;
        int k = 0;
        ${xt}
        vec2 coords = offsetToCoords(offset, ${dt}, ${ht});
        float value = getColorAsFloat(${it.texture2D}(A, coords));
        return value;
      }
      `},st=(it,at,lt,dt,ht,pt)=>{const mt=at.length;let yt="";for(let xt=mt-1;xt>=0;--xt)yt+=`
        k = m[${xt}] - ${pt[xt]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(at[xt]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${at[xt]}) { k = _2n_1 - k; }
        }
        offset += k * ${lt[xt]};
        `;return`
      float padA(int m[${mt}]) {
        int offset = 0;
        int k = 0;
        ${yt}
        vec2 coords = offsetToCoords(offset, ${dt}, ${ht});
        float value = getColorAsFloat(${it.texture2D}(A, coords));
        return value;
      }
      `},ot=(it,at,lt,dt,ht,pt)=>{const mt=at.length;let yt="";for(let xt=mt-1;xt>=0;--xt)yt+=`
        k = m[${xt}] - ${pt[xt]};
        if (k < 0)  k = 0;
        if (k >= ${at[xt]}) k = ${at[xt]-1};
        offset += k * ${lt[xt]};
      `;return`
      float padA(int m[${mt}]) {
        int offset = 0;
        int k = 0;
        ${yt}
        vec2 coords = offsetToCoords(offset, ${dt}, ${ht});
        float value = getColorAsFloat(${it.texture2D}(A, coords));
        return value;
      }
      `}},2143:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const d=c(246),h=c(2517),g=c(2039);e.averagePool=(ot,it,at)=>{$(it);const lt={name:"AveragePool",inputNames:["X"],inputTypes:[g.TextureType.unpacked],cacheHint:at.cacheKey};return[ot.run(Object.assign(Object.assign({},lt),{get:()=>_(it,lt,!1,at)}),it)]},e.parseAveragePoolAttributes=ot=>{const it=ot.attributes.getString("auto_pad","NOTSET"),at=ot.attributes.getInt("ceil_mode",0),lt=ot.attributes.getInt("count_include_pad",0)!==0,dt=ot.attributes.getInts("kernel_shape"),ht=ot.attributes.getInts("strides",[]),pt=ot.attributes.getInts("pads",[]);if(at!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,d.createAttributeWithCacheKey)({autoPad:it,ceilMode:at,countIncludePad:lt,kernelShape:dt,strides:ht,pads:pt})};const _=(ot,it,at,lt)=>{const[dt,ht]=et(ot,lt,at),pt=h.ShapeUtil.size(dt.kernelShape);let mt="";dt.countIncludePad?mt+=`value /= float(${pt});`:mt+=`value /= float(${pt} - pad);`;const yt=`
        ${b(ot[0].dims,dt,"value += _X(x);",mt,"0.0")}
      `;return Object.assign(Object.assign({},it),{output:{dims:ht,type:ot[0].type,textureType:g.TextureType.unpacked},shaderSource:yt})};e.globalAveragePool=(ot,it,at)=>{$(it);const lt={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[g.TextureType.unpacked],cacheHint:`${at.countIncludePad}`};return[ot.run(Object.assign(Object.assign({},lt),{get:()=>_(it,lt,!0,at)}),it)]},e.parseGlobalAveragePoolAttributes=ot=>{const it=ot.attributes.getInt("count_include_pad",0)!==0;return(0,d.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:it,kernelShape:[],strides:[],pads:[]})},e.maxPool=(ot,it,at)=>{$(it);const lt={name:"MaxPool",inputNames:["X"],inputTypes:[g.TextureType.unpacked],cacheHint:at.cacheKey};return[ot.run(Object.assign(Object.assign({},lt),{get:()=>_e(it,lt,!1,at)}),it)]},e.parseMaxPoolAttributes=ot=>{const it=ot.attributes.getString("auto_pad","NOTSET"),at=ot.attributes.getInt("ceil_mode",0),lt=ot.attributes.getInts("kernel_shape"),dt=ot.attributes.getInts("strides",[]),ht=ot.attributes.getInts("pads",[]),pt=ot.attributes.getInt("storage_order",0),mt=ot.attributes.getInts("dilations",[]);if(pt!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(at!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,d.createAttributeWithCacheKey)({autoPad:it,ceilMode:at,countIncludePad:!1,kernelShape:lt,strides:dt,pads:ht,storageOrder:pt,dilations:mt})};const _e=(ot,it,at,lt)=>{const[dt,ht]=et(ot,lt,at),pt=`
      ${b(ot[0].dims,dt,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},it),{output:{dims:ht,type:ot[0].type,textureType:g.TextureType.unpacked},shaderSource:pt})},et=(ot,it,at)=>{const lt=ot[0].dims.slice(),dt=Object.hasOwnProperty.call(it,"dilations"),ht=it.kernelShape.slice(),pt=it.strides.slice(),mt=dt?it.dilations.slice():[],yt=it.pads.slice();h.PoolConvUtil.adjustPoolAttributes(at,lt,ht,pt,mt,yt);const xt=h.PoolConvUtil.computePoolOutputShape(at,lt,pt,mt,ht,yt,it.autoPad),gt=Object.assign({},it);return dt?Object.assign(gt,{kernelShape:ht,strides:pt,pads:yt,dilations:mt,cacheKey:it.cacheKey}):Object.assign(gt,{kernelShape:ht,strides:pt,pads:yt,cacheKey:it.cacheKey}),[gt,xt]},tt={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},rt={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[g.TextureType.unpacked]};e.globalMaxPool=(ot,it)=>($(it),[ot.run(Object.assign(Object.assign({},rt),{get:()=>_e(it,rt,!0,tt)}),it)]);const $=ot=>{if(!ot||ot.length!==1)throw new Error("Pool ops requires 1 input.");if(ot[0].type!=="float32"&&ot[0].type!=="float64")throw new Error("Invalid input type.")},b=(ot,it,at,lt,dt)=>{const ht=ot.length;if(it.kernelShape.length<=2){const pt=it.kernelShape[it.kernelShape.length-1],mt=it.strides[it.strides.length-1],yt=it.pads[it.pads.length/2-1],xt=it.pads[it.pads.length-1],gt=ot[ht-1];let bt="",jt="",Mt="";if(bt=yt+xt!==0?`
          for (int i = 0; i < ${pt}; i++) {
            x[${ht} - 1] = indices[${ht} - 1] * ${mt} - ${yt} + i;
            if (x[${ht} - 1] < 0 || x[${ht} - 1] >= ${gt}) {
              pad++;
              continue;
            }
            ${at}
          }`:`
          for (int i = 0; i < ${pt}; i++) {
            x[${ht} - 1] = indices[${ht} - 1] * ${mt} - ${yt} + i;
            ${at}
          }`,it.kernelShape.length===2){const Pt=it.kernelShape[it.kernelShape.length-2],Tt=it.strides[it.strides.length-2],St=it.pads[it.pads.length/2-2],wt=it.pads[it.pads.length-2],Rt=ot[ht-2];jt=St+wt!==0?`
            for (int j = 0; j < ${Pt}; j++) {
              x[${ht} - 2] = indices[${ht} - 2] * ${Tt} - ${St} + j;
              if (x[${ht} - 2] < 0 || x[${ht} - 2] >= ${Rt}) {
                pad+= ${pt};
                continue;
              }
          `:`
            for (int j = 0; j < ${Pt}; j++) {
              x[${ht} - 2] = indices[${ht} - 2] * ${Tt} - ${St} + j;
            `,Mt=`
          }
        `}return`
        float process(int indices[${ht}]) {
          int x[${ht}];
          copyVec(indices, x);

          float value = ${dt};
          int pad = 0;
          ${jt}
          ${bt}
          ${Mt}
          ${lt}
          return value;
        }
      `}{const pt=h.ShapeUtil.size(it.kernelShape),mt=h.ShapeUtil.computeStrides(it.kernelShape),yt=mt.length,xt=it.pads.length,gt=st(yt),bt=nt(ot,"inputDims"),jt=nt(it.pads,"pads"),Mt=nt(mt,"kernelStrides"),Pt=nt(it.strides,"strides");let Tt="";return Tt=it.pads.reduce((St,wt)=>St+wt)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${at}
          }`:`
          }
          ${at}
        `,`
        ${gt}
        float process(int indices[${ht}]) {
          int x[${ht}];
          copyVec(indices, x);
          int offset[${yt}];
          int pads[${xt}];
          int inputDims[${ht}];
          int kernelStrides[${yt}];
          int strides[${yt}];
          ${jt}
          ${bt}
          ${Pt}
          ${Mt}

          float value = ${dt};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${pt}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${ht} - ${yt}; j < ${ht}; j++) {
              x[j] = indices[j] * strides[j - ${ht} + ${yt}]
                + offset[j - ${ht} + ${yt}] - pads[j - 2];
              ${Tt}
          }
          ${lt}

          return value;
        }
      `}},nt=(ot,it)=>{let at="";for(let lt=0;lt<ot.length;lt++)at+=`
      ${it}[${lt}] = ${ot[lt]};
    `;return at},st=ot=>`
  void offsetToIndices(int offset, int[${ot}] strides, out int[${ot}] indices) {
    if (${ot} == 0) {
      return;
    }
    for (int i = 0; i < ${ot} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${ot} - 1] = offset;
  }`},4939:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const d=c(246),h=c(782),g=c(2517),_=c(2039),_e=(rt,$,b,nt,st)=>{tt($);const ot={name:nt,inputNames:["A"],inputTypes:[_.TextureType.unpacked]};return[rt.run(Object.assign(Object.assign({},ot),{cacheHint:b.cacheKey,get:()=>et(rt,$,b,nt,st,ot)}),$)]};e.parseReduceAttributes=rt=>{const $=rt.attributes.getInts("axes",[]),b=rt.attributes.getInt("keepdims",1)===1;return(0,d.createAttributeWithCacheKey)({axes:$,keepDims:b})};const et=(rt,$,b,nt,st,ot)=>{const it=[],at=$[0].dims.length||1,lt=[],dt=g.ShapeUtil.normalizeAxes(b.axes,$[0].dims.length),ht=st($,dt);let pt=ht[1];for(let yt=0;yt<$[0].dims.length;yt++)dt.indexOf(yt)>=0||dt.length===0?(b.keepDims&&it.push(1),pt=`
          for(int j${yt} = 0; j${yt} < ${$[0].dims[yt]}; j${yt}++) {
            inputIdx[${yt}] = j${yt};
            ${pt}
          }`):(lt.push(`inputIdx[${yt}] = outputIdx[${it.length}];`),it.push($[0].dims[yt]));const mt=`
      float process(int outputIdx[${it.length||1}]) {
        float value;                 // final result
        int inputIdx[${at}];      // addressing input data
        ${lt.join(`
`)}
        ${ht[0]}       // init ops for reduce max/min
        ${pt}
        ${ht[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},ot),{output:{dims:it,type:$[0].type,textureType:_.TextureType.unpacked},shaderSource:mt})},tt=rt=>{if(!rt||rt.length!==1)throw new Error("Reduce op requires 1 input.");if(h.NUMBER_TYPES.indexOf(rt[0].type)===-1)throw new Error("Invalid input type.")};e.reduceSum=(rt,$,b)=>_e(rt,$,b,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),e.reduceMean=(rt,$,b)=>_e(rt,$,b,"ReduceMean",(nt,st)=>{let ot=1;for(let it=0;it<nt[0].dims.length;it++)(st.indexOf(it)>=0||st.length===0)&&(ot*=nt[0].dims[it]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${ot}.;`]}),e.reduceMax=(rt,$,b)=>_e(rt,$,b,"ReduceMax",(nt,st)=>{const ot=[];for(let it=0;it<nt[0].dims.length;it++)(st.indexOf(it)>=0||st.length===0)&&ot.push(`inputIdx[${it}] = 0;`);return[`${ot.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),e.reduceMin=(rt,$,b)=>_e(rt,$,b,"ReduceMin",(nt,st)=>{const ot=[];for(let it=0;it<nt[0].dims.length;it++)(st.indexOf(it)>=0||st.length===0)&&ot.push(`inputIdx[${it}] = 0;`);return[`${ot.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),e.reduceProd=(rt,$,b)=>_e(rt,$,b,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),e.reduceLogSum=(rt,$,b)=>_e(rt,$,b,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),e.reduceLogSumSquare=(rt,$,b)=>_e(rt,$,b,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const d=c(2517),h=c(5060),g=c(2039),_=c(2827);e.createPackedReshape3DProgramInfoLoader=(_e,et,tt)=>{const rt=($=>({name:"Reshape (packed)",inputTypes:[g.TextureType.packed],inputNames:["A"],cacheHint:`${$}`}))(tt);return Object.assign(Object.assign({},rt),{get:()=>(($,b,nt,st)=>{const ot=b.dims,it=st;let at="";for(let ht=0;ht<4;ht++){let pt="";switch(ht){case 0:pt="outputCoords = rc;";break;case 1:pt="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:pt="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:pt="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}at+=`
        ${pt}
        ${ht>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${ht}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${ht>0?"}":""}
      `}const lt=(0,h.getGlsl)($.session.backend.glContext.version),dt=`
      ${function(ht){const pt=d.ShapeUtil.computeStrides(ht),mt=["b","r","c"],yt="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${pt.map((xt,gt)=>`int ${mt[gt]} = ${yt} / ${xt}; ${gt===pt.length-1?`int ${mt[gt+1]} = ${yt} - ${mt[gt]} * ${xt}`:`index -= ${mt[gt]} * ${xt}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(ot)}
      ${function(ht){const pt=d.ShapeUtil.computeStrides(ht);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${pt[0]} + coords.z * ${pt[1]} + coords.y;
  }
`}(it)}
      ${(0,_.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${it[2]};
        int cols = ${it[1]};

        ${at}
        ${lt.output} = result;
      }
    `;return Object.assign(Object.assign({},nt),{output:{dims:it,type:b.type,textureType:g.TextureType.packed},shaderSource:dt,hasMain:!0})})(_e,et,rt,tt)})},e.processDims3D=function(_e){if(_e.length===0)return[1,1,1];let et=1;for(let tt=0;tt<_e.length-2;++tt)et*=_e[tt];return[et,_e.length>1?_e[_e.length-2]:1,_e[_e.length-1]]},e.isReshapeCheap=function(_e,et){let tt=!1;return tt=_e.length===0||et.length===0||(_e.length<2||et.length<2?_e[_e.length-1]===et[et.length-1]:_e[_e.length-1]===et[et.length-1]&&_e[_e.length-2]===et[et.length-2]),tt}},718:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const d=c(2517);e.reshape=(h,g)=>{const _=d.ShapeUtil.calculateReshapedDims(g[0].dims,g[1].integerData);return h.session.pack?[h.reshapePacked(g[0],_)]:[h.reshapeUnpacked(g[0],_)]}},2268:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const d=c(5060),h=c(2039),g=c(9390),_=c(2827),_e=c(9793),et={name:"Resize",inputNames:["A"],inputTypes:[h.TextureType.packed]};e.resize=(nt,st,ot)=>((0,_e.validateInputs)(st,ot),[nt.run(Object.assign(Object.assign({},et),{cacheHint:ot.cacheKey,get:()=>tt(nt,st,ot)}),st)]),e.parseResizeAttributesV10=nt=>(0,_e.parseUpsampleAttributes)(nt,10),e.parseResizeAttributesV11=nt=>(0,_e.parseUpsampleAttributes)(nt,11);const tt=(nt,st,ot)=>{const it=(0,d.getGlsl)(nt.session.backend.glContext.version),[at,lt]=rt(st,ot);if(at.every(Tt=>Tt===1)&&ot.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},et),{output:{dims:lt,type:st[0].type,textureType:h.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${it.texture2D}(X, TexCoords);
                    ${it.output} = v;
                }`});const dt=lt.length;if(dt<2)throw new Error(`output dimension should be at least 2, but got ${dt}`);const ht=lt[dt-2],pt=lt[dt-1],mt=st[0].dims;if(dt!==mt.length)throw new Error(`output dimension should match input ${mt.length}, but got ${dt}`);const yt=mt[dt-2],xt=mt[dt-1],gt=at[dt-2],bt=at[dt-1];let jt="";if(ot.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${ot.mode}'`);switch(ot.coordinateTransformMode){case"asymmetric":jt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":jt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":jt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${pt}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${ht}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${pt}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${ht}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":jt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${pt}.0 - 1.0, ${ht}.0 - 1.0, ${pt}.0 - 1.0,
                            ${ht}.0 - 1.0);
                        vec4 original = vec4(${xt}.0 - 1.0, ${yt}.0 - 1.0, ${xt}.0 - 1.0,
                            ${yt}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${ot.coordinateTransformMode}'`)}const Mt=(0,g.getCoordsDataType)(dt),Pt=`
            const vec2 inputWH = vec2(${yt}.0, ${xt}.0);
            const vec4 scaleWHWH = vec4(float(${gt}), float(${bt}), float(${gt}), float(${bt}));
            ${(0,_.unpackFromChannel)()}
            ${jt}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${Mt} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${ht-1};
                bool hasNextCol = rc.z < ${pt-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${it.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},et),{output:{dims:lt,type:st[0].type,textureType:h.TextureType.packed},hasMain:!0,shaderSource:Pt})},rt=(nt,st)=>{const ot=nt[0].dims;let it,at=st.scales;if(at.length===0){const dt=nt[st.scalesInputIdx];if(dt&&dt.size!==0){if(nt[st.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");at=$(dt,st.mode,st.isResize)}else{const ht=nt[st.sizesInputIdx];if(!ht||ht.size===0)throw new Error("Either scales or sizes MUST be provided as input.");it=Array.from(ht.integerData),at=b(it,ot,st.mode,st.isResize)}}else if(nt[st.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const lt=it||ot.map((dt,ht)=>Math.floor(dt*at[ht]));return[at,lt]},$=(nt,st,ot)=>{const it=Array.from(nt.floatData);return(0,_e.scalesValidation)(it,st,ot),it},b=(nt,st,ot,it)=>{const at=st.length,lt=new Array(at);for(let dt=0,ht=at;dt<ht;dt++)if(st[dt]===0){if(nt[dt]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");lt[dt]=1}else lt[dt]=nt[dt]/st[dt];return(0,_e.scalesValidation)(lt,ot,it),lt}},8117:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const d=c(9162);e.shape=(g,_)=>(h(_),[new d.Tensor([_[0].dims.length],"int32",void 0,void 0,new Int32Array(_[0].dims))]);const h=g=>{if(!g||g.length!==1)throw new Error("Shape requires 1 input.")}},2278:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const d=c(246),h=c(782),g=c(2517),_=c(2039),_e={name:"Slice",inputNames:["A"],inputTypes:[_.TextureType.unpacked]};e.slice=(b,nt,st)=>(tt(nt),[b.run(Object.assign(Object.assign({},_e),{cacheHint:st.cacheKey,get:()=>et(b,nt[0],st)}),nt)]),e.parseSliceAttributes=b=>{const nt=b.attributes.getInts("starts"),st=b.attributes.getInts("ends"),ot=b.attributes.getInts("axes",[]);return(0,d.createAttributeWithCacheKey)({starts:nt,ends:st,axes:ot})};const et=(b,nt,st)=>{const ot=st.axes.length===0?nt.dims.slice(0).map((mt,yt)=>yt):st.axes,it=g.ShapeUtil.normalizeAxes(ot,nt.dims.length),at=st.starts.map((mt,yt)=>mt>nt.dims[it[yt]]-1?nt.dims[it[yt]]:g.ShapeUtil.normalizeAxis(mt,nt.dims[it[yt]])),lt=st.ends.map((mt,yt)=>mt>nt.dims[it[yt]]-1?nt.dims[it[yt]]:g.ShapeUtil.normalizeAxis(mt,nt.dims[it[yt]])),dt=nt.dims.slice(),ht=[];for(let mt=0;mt<it.length;mt++)dt[it[mt]]=lt[mt]-at[mt],at[mt]>0&&ht.push(`outputIdx[${it[mt]}] += ${at[mt]};`);const pt=`
      float process(int outputIdx[${dt.length}]) {
        ${ht.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},_e),{output:{dims:dt,type:nt.type,textureType:_.TextureType.unpacked},shaderSource:pt})},tt=b=>{if(!b||b.length!==1)throw new Error("Slice requires 1 input.");if(h.NUMBER_TYPES.indexOf(b[0].type)===-1)throw new Error("Invalid input type.")};e.sliceV10=(b,nt)=>{$(nt);const st=rt(b,nt);return[b.run(Object.assign(Object.assign({},_e),{cacheHint:st.cacheKey,get:()=>et(b,nt[0],st)}),[nt[0]])]};const rt=(b,nt)=>{if(!b.session.isInitializer(nt[1].dataId)||!b.session.isInitializer(nt[2].dataId)||nt.length>=4&&!b.session.isInitializer(nt[3].dataId)||nt.length>=5&&!b.session.isInitializer(nt[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(nt.length>=5&&nt[4].integerData.some(at=>at!==1))throw new Error("currently non-1 steps is not supported for Slice");const st=Array.from(nt[1].integerData),ot=Array.from(nt[2].integerData),it=nt.length>=4?Array.from(nt[3].integerData):[];return{starts:st,ends:ot,axes:it,cacheKey:`${it};${st};${ot}`}},$=b=>{if(!b||b.length<3||b.length>5)throw new Error("Invalid input number.");if(b[1].type!=="int32"||b[1].dims.length!==1)throw new Error("Invalid input type.");if(b[2].type!=="int32"||b[2].dims.length!==1)throw new Error("Invalid input type.");if(b.length>=4&&(b[3].type!=="int32"||b[3].dims.length!==1))throw new Error("Invalid input type.");if(b.length>=5&&(b[4].type!=="int32"||b[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const d=c(246),h=c(2517),g=c(5060),_=c(2039),_e=c(3738),et={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[_.TextureType.unpacked]},tt={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[_.TextureType.unpacked,_.TextureType.unpacked]},rt={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[_.TextureType.unpacked,_.TextureType.unpacked,_.TextureType.unpacked]};e.softmax=(it,at,lt)=>{ot(at);const dt=at[0].dims.slice(),ht=h.ShapeUtil.normalizeAxis(lt.axis,dt.length),pt=h.ShapeUtil.sizeToDimension(dt,ht),mt=h.ShapeUtil.sizeFromDimension(dt,ht);return $(it,at,lt,pt,mt)},e.parseSoftmaxAttributes=it=>(0,d.createAttributeWithCacheKey)({axis:it.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=it=>(0,d.createAttributeWithCacheKey)({axis:it.attributes.getInt("axis",-1)}),e.softmaxV13=(it,at,lt)=>{ot(at);const dt=at[0].dims.slice(),ht=h.ShapeUtil.normalizeAxis(lt.axis,dt.length),pt=dt.length,mt=ht!==pt-1,yt=[];let xt,gt=[],bt=[];mt&&(gt=Array.from({length:pt}).map((Tt,St)=>St),gt[ht]=pt-1,gt[pt-1]=ht,gt.map(Tt=>yt.push(dt[Tt])),xt=(0,d.createAttributeWithCacheKey)({perm:gt}),bt=(0,_e.transpose)(it,at,xt));const jt=mt?h.ShapeUtil.sizeToDimension(yt,pt-1):h.ShapeUtil.sizeToDimension(dt,pt-1),Mt=mt?h.ShapeUtil.sizeFromDimension(yt,pt-1):h.ShapeUtil.sizeFromDimension(dt,pt-1),Pt=$(it,mt?bt:at,lt,jt,Mt);return mt?(0,_e.transpose)(it,Pt,xt):Pt};const $=(it,at,lt,dt,ht)=>{const pt=b(it,at[0],dt,ht,[dt]),mt=it.run(Object.assign(Object.assign({},et),{cacheHint:lt.cacheKey,get:()=>pt}),at),yt=nt(it,at[0],dt,ht,pt.output.dims,[dt]),xt=it.run(Object.assign(Object.assign({},tt),{cacheHint:lt.cacheKey,get:()=>yt}),[at[0],mt]),gt=st(it,at[0],dt,ht,pt.output.dims,yt.output.dims);return[it.run(Object.assign(Object.assign({},rt),{cacheHint:lt.cacheKey,get:()=>gt}),[at[0],mt,xt])]},b=(it,at,lt,dt,ht)=>{const[pt,mt]=it.calculateTextureWidthAndHeight(at.dims,_.TextureType.unpacked),yt=ht.length;if(lt<1||dt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ht.length!==1)throw new Error("Dimensionality of the output should be 1");if(ht[0]!==lt)throw new Error("Shape of the output should be equal to logical row count");const xt=(0,g.getGlsl)(it.session.backend.glContext.version),gt=`
      float process(int[${yt}] indices) {
        int logical_row_start_offset = indices[0] * ${dt};

        float max = getColorAsFloat(${xt.texture2D}(A, offsetToCoords(logical_row_start_offset, ${pt},
        ${mt} )));
        for(int i=1; i<${dt}; ++i)
        {
          float current = getColorAsFloat(${xt.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${pt}, ${mt})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},et),{output:{dims:ht,type:at.type,textureType:_.TextureType.unpacked},shaderSource:gt})},nt=(it,at,lt,dt,ht,pt)=>{const[mt,yt]=it.calculateTextureWidthAndHeight(at.dims,_.TextureType.unpacked),xt=pt.length;if(lt<1||dt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(pt.length!==1)throw new Error("Dimensionality of the output should be 1");if(pt[0]!==lt)throw new Error("Shape of the output should be equal to logical row count");if(ht.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(ht[0]!==lt)throw new Error("Shape of the intermediate results should be equal to logical row count");const gt=`
      float process(int[${xt}] indices) {
        int logical_row_start_offset = indices[0] * ${dt};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${dt}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,g.getGlsl)(it.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${mt}, ${yt}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},tt),{output:{dims:pt,type:at.type,textureType:_.TextureType.unpacked},shaderSource:gt})},st=(it,at,lt,dt,ht,pt)=>{const[mt,yt]=it.calculateTextureWidthAndHeight(at.dims,_.TextureType.unpacked),xt=at.dims.length;if(lt<1||dt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ht.length!==1||pt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(ht[0]!==lt||pt[0]!==lt)throw new Error("Shape of the intermediate results should be equal to logical row count");const gt=`
      float process(int[${xt}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${mt}, ${yt});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${dt};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},rt),{output:{dims:at.dims,type:at.type,textureType:_.TextureType.unpacked},shaderSource:gt})},ot=it=>{if(!it||it.length!==1)throw new Error("Softmax requires 1 input.");if(it[0].type!=="float32"&&it[0].type!=="float64")throw new Error("Invalid input type")}},5975:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const d=c(246),h=c(2517),g=c(2039),_={name:"Split",inputNames:["A"],inputTypes:[g.TextureType.unpacked]};e.split=(rt,$,b)=>{tt($);const nt=h.ShapeUtil.normalizeAxis(b.axis,$[0].dims.length),st=_e(rt,$,nt,b),ot=[];for(let it=0;it<st;++it)ot.push(rt.run(Object.assign(Object.assign({},_),{cacheHint:`${b.cacheKey};${it}`,get:()=>et(rt,$[0],b,nt,it)}),$));return ot},e.parseSplitAttributes=rt=>{const $=rt.attributes.getInt("axis",0),b=rt.attributes.getInts("split",[]),nt=rt.outputs.length;return(0,d.createAttributeWithCacheKey)({axis:$,split:b,numOutputs:nt})};const _e=(rt,$,b,nt)=>{const[,st]=h.SplitUtil.splitShape($[0].dims,b,nt.split,nt.numOutputs);return st.length},et=(rt,$,b,nt,st)=>{const[ot,it]=h.SplitUtil.splitShape($.dims,nt,b.split,b.numOutputs),at=it[st],lt=ot[st],dt=`
      float process(int indices[${lt.length}]) {
        indices[${nt}] += ${at};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},_),{cacheHint:`${b.cacheKey}:${st}`,output:{dims:lt,type:$.type,textureType:g.TextureType.unpacked},shaderSource:dt})},tt=rt=>{if(!rt||rt.length!==1)throw new Error("Split requires one input.");if(rt[0].type!=="int8"&&rt[0].type!=="uint8"&&rt[0].type!=="int16"&&rt[0].type!=="uint16"&&rt[0].type!=="int32"&&rt[0].type!=="uint32"&&rt[0].type!=="float32"&&rt[0].type!=="float64"&&rt[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const d=c(2517);e.squeeze=(_,_e,et)=>{h(_e);const tt=d.ShapeUtil.squeezeShape(_e[0].dims,et);return[_.reshapeUnpacked(_e[0],tt)]},e.squeezeV13=(_,_e)=>(g(_e),(0,e.squeeze)(_,[_e[0]],Array.from(_e[1].integerData))),e.parseSqueezeAttributes=_=>_.attributes.getInts("axes");const h=_=>{if(!_||_.length!==1)throw new Error("Squeeze requires 1 input.");if(_[0].type==="string")throw new Error("invalid input tensor types.")},g=_=>{if(!_||_.length!==2)throw new Error("Squeeze requires 2 inputs.");if(_[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const d=c(5060),h=c(2039);e.sum=(_e,et)=>{_(et);const tt={name:"Sum",inputNames:et.map((rt,$)=>`X${$}`),inputTypes:new Array(et.length).fill(h.TextureType.unpacked)};return[_e.run(Object.assign(Object.assign({},tt),{get:()=>g(_e,et,tt)}),et)]};const g=(_e,et,tt)=>{const rt=(0,d.getGlsl)(_e.session.backend.glContext.version),$=et[0].dims.slice(),b=`
      void main() {
        vec4 result = ${et.map((nt,st)=>`${rt.texture2D}(X${st},TexCoords)`).join(" + ")};
        ${rt.output} = result;
      }
    `;return Object.assign(Object.assign({},tt),{output:{dims:$,type:et[0].type,textureType:h.TextureType.unpacked},hasMain:!0,shaderSource:b})},_=_e=>{if(!_e||_e.length===0)throw new Error("Sum requires inputs.");const et=_e[0].dims.length;for(let tt=1;tt<_e.length;tt++){if(et!==_e[tt].dims.length)throw new Error("Input shapes are mismatched.");for(let rt=0;rt<et;rt++)if(_e[0].dims[rt]!==_e[tt].dims[rt])throw new Error("Input shapes are not matched.")}if(_e[0].type!=="float32"&&_e[0].type!=="float64")throw new Error("Invalid input type.");for(let tt=1;tt<_e.length;tt++)if(_e[0].type!==_e[tt].type)throw new Error("Input types are not matched.")}},5723:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const d=c(782),h=c(2039);e.tile=(_e,et)=>{_(et);const tt={name:"Tile",inputNames:["A"],inputTypes:[h.TextureType.unpacked]};return[_e.run(Object.assign(Object.assign({},tt),{get:()=>g(_e,et,tt)}),et)]};const g=(_e,et,tt)=>{const rt=et[0].dims.slice(),$=new Array(rt.length),b=[];for(let ot=0;ot<rt.length;ot++)$[ot]=rt[ot]*et[1].numberData[ot],b.push(`inputIdx[${ot}] = int(mod(float(outputIdx[${ot}]), ${rt[ot]}.));`);const nt=$.length,st=`
      float process(int outputIdx[${nt}]) {
        int inputIdx[${nt}];
        ${b.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},tt),{output:{dims:$,type:et[0].type,textureType:h.TextureType.unpacked},shaderSource:st})},_=_e=>{if(!_e||_e.length!==2)throw new Error("Tile requires 2 input.");if(_e[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(_e[1].dims[0]!==_e[0].dims.length)throw new Error("Invalid input shape.");if(d.NUMBER_TYPES.indexOf(_e[0].type)===-1)throw new Error("Invalid input type.");if(_e[1].type!=="int32"&&_e[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const d=c(246),h=c(2517),g=c(2039),_={name:"Transpose",inputNames:["A"],inputTypes:[g.TextureType.unpacked]};e.transpose=(b,nt,st)=>($(nt),[b.run(Object.assign(Object.assign({},_),{cacheHint:st.cacheKey,get:()=>_e(b,nt[0],st.perm)}),nt)]),e.parseTransposeAttributes=b=>(0,d.createAttributeWithCacheKey)({perm:b.attributes.getInts("perm",[])});const _e=(b,nt,st)=>{const ot=nt.dims;st=et(ot,st);const it=tt(ot,st),at=ot.length,lt=`
      ${rt("perm",st,at)}
      float process(int indices[${at}]) {
        int a[${at}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},_),{output:{dims:it,type:nt.type,textureType:g.TextureType.unpacked},shaderSource:lt})},et=(b,nt)=>(nt&&nt.length!==b.length&&(nt=[...b.keys()].reverse()),nt),tt=(b,nt)=>(nt=et(b,nt),h.ShapeUtil.sortBasedOnPerm(b,nt)),rt=(b,nt,st)=>{const ot=[];ot.push(`void ${b}(out int a[${st}], int src[${st}]) {`);for(let it=0;it<st;++it)ot.push(`	a[${nt[it]}]=src[${it}];`);return ot.push("	}"),ot.join(`
`)},$=b=>{if(!b||b.length!==1)throw new Error("Transpose requires 1 input.");if(b[0].type!=="float32"&&b[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const d=c(5060),h=c(2039);e.encodeAsUint8=(g,_)=>{const _e=_.shape,et=(0,d.getGlsl)(g.session.backend.glContext.version),tt=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${et.texture2D}(X,TexCoords).r;
      ${et.output} = encodeAsUint8(value);
    }`,rt={name:"Uint8Encode",inputTypes:[h.TextureType.unpacked],inputNames:["X"],output:{dims:_e,type:_.tensor.type,textureType:h.TextureType.downloadUint8AsFloat},shaderSource:tt,hasMain:!0};return g.executeProgram(rt,[_.tensor])}},4909:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const d=c(246),h=c(2517),g=c(8520),_=c(5060),_e=c(2039);function et(){return Pt("abs")}function tt(){return Pt("acos")}function rt(){return Pt("asin")}function $(){return Pt("atan")}function b(){return Pt("ceil")}function nt(){return Pt("cos")}function st(wt){const Rt="elu";return{body:`
  const float alpha = float(${wt});

  float ${Rt}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${Rt}_(vec4 v) {
    return vec4(${Rt}_(v.x), ${Rt}_(v.y), ${Rt}_(v.z), ${Rt}_(v.w));
  }
  `,name:Rt,type:g.FunctionType.ValueBased}}function ot(){return Pt("exp")}function it(){return Pt("floor")}function at(wt,Rt){const At="clip";return{body:`
  const float min = float(${wt});
  const float max = float(${Rt});

  float ${At}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${At}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:At,type:g.FunctionType.ValueBased}}function lt(){const wt="indentity";return{body:`
  float ${wt}_(float a) {
    return a;
  }
  vec4 ${wt}_(vec4 v) {
    return v;
  }
  `,name:wt,type:g.FunctionType.ValueBased}}function dt(wt){const Rt="leakyRelu";return{body:`
  const float alpha = float(${wt});

  float ${Rt}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${Rt}_(vec4 v) {
    return vec4(${Rt}_(v.x), ${Rt}_(v.y), ${Rt}_(v.z), ${Rt}_(v.w));
  }
  `,name:Rt,type:g.FunctionType.ValueBased}}function ht(){return Pt("log")}function pt(){const wt="neg";return{body:`
  float ${wt}_(float a) {
    return -a;
  }
  vec4 ${wt}_(vec4 v) {
    return -v;
  }
  `,name:wt,type:g.FunctionType.ValueBased}}function mt(){const wt="not";return{body:`
  float ${wt}_(float a) {
    return float( ! bool(a) );
  }
  bool ${wt}_(bool a) {
    return !a;
  }
  vec4 ${wt}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${wt}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:wt,type:g.FunctionType.ValueBased}}function yt(){return Pt("sin")}function xt(){const wt="relu";return{body:`
  float ${wt}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${wt}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:wt,type:g.FunctionType.ValueBased}}function gt(){const wt="sigmoid";return{body:`
  float ${wt}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${wt}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:wt,type:g.FunctionType.ValueBased}}function bt(){return Pt("sqrt")}function jt(){return Pt("tan")}function Mt(){const wt="tanh";return{body:`
  float ${wt}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${wt}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:wt,type:g.FunctionType.ValueBased}}function Pt(wt){return{body:`
  float ${wt}_(float a) {
    return ${wt}(a);
  }
  vec4 ${wt}_(vec4 v) {
    return ${wt}(v);
  }
  `,name:wt,type:g.FunctionType.ValueBased}}e.glslAbs=et,e.glslAcos=tt,e.glslAsin=rt,e.glslAtan=$,e.glslCeil=b,e.glslCos=nt,e.glslElu=st,e.glslExp=ot,e.glslFloor=it,e.glslClip=at,e.glslIdentity=lt,e.glslLeakyRelu=dt,e.glslLog=ht,e.glslNeg=pt,e.glslNot=mt,e.glslSin=yt,e.glslRelu=xt,e.glslSigmoid=gt,e.glslSqrt=bt,e.glslTan=jt,e.glslTanh=Mt;const Tt=(wt,Rt,At,Et)=>{const zt=wt.session.pack?_e.TextureType.packed:_e.TextureType.unpacked,er={name:At.name,inputTypes:[zt],inputNames:["A"],cacheHint:Et};return Object.assign(Object.assign({},er),{get:()=>((pr,_r,Er,Tr)=>{const wr=pr.session.pack?_e.TextureType.packed:_e.TextureType.unpacked,gr=(0,_.getGlsl)(pr.session.backend.glContext.version);return Object.assign(Object.assign({},_r),{output:{dims:Er.dims,type:Er.type,textureType:wr},shaderSource:`
     ${Tr.body}
     void main() {
       vec4 v = ${gr.texture2D}(A, TexCoords);
       v = ${Tr.name}_(v);
       ${gr.output} = v;
     }
     `,hasMain:!0})})(wt,er,Rt,At)})};e.abs=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],et()),Rt)],e.acos=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],tt()),Rt)],e.asin=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],rt()),Rt)],e.atan=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],$()),Rt)],e.clip=(wt,Rt,At)=>[wt.run(Tt(wt,Rt[0],at(At.min,At.max),At.cacheKey),Rt)],e.parseClipAttributes=wt=>(0,d.createAttributeWithCacheKey)({min:wt.attributes.getFloat("min",h.MIN_CLIP),max:wt.attributes.getFloat("max",h.MAX_CLIP)}),e.clipV11=(wt,Rt)=>{const At=St(wt,Rt);return(0,e.clip)(wt,[Rt[0]],At)};const St=(wt,Rt)=>{if(Rt.length>=3&&(!wt.session.isInitializer(Rt[1].dataId)||!wt.session.isInitializer(Rt[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const At=Rt.length>=3?Rt[1].numberData[0]:h.MIN_CLIP,Et=Rt.length>=3?Rt[2].numberData[0]:h.MAX_CLIP;return(0,d.createAttributeWithCacheKey)({min:At,max:Et})};e.ceil=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],b()),Rt)],e.cos=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],nt()),Rt)],e.elu=(wt,Rt,At)=>[wt.run(Tt(wt,Rt[0],st(At.alpha),At.cacheKey),Rt)],e.parseEluAttributes=wt=>(0,d.createAttributeWithCacheKey)({alpha:wt.attributes.getFloat("alpha",1)}),e.exp=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],ot()),Rt)],e.floor=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],it()),Rt)],e.identity=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],lt()),Rt)],e.leakyRelu=(wt,Rt,At)=>[wt.run(Tt(wt,Rt[0],dt(At.alpha),At.cacheKey),Rt)],e.parseLeakyReluAttributes=wt=>(0,d.createAttributeWithCacheKey)({alpha:wt.attributes.getFloat("alpha",.01)}),e.log=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],ht()),Rt)],e.neg=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],pt()),Rt)],e.not=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],mt()),Rt)],e.relu=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],xt()),Rt)],e.sigmoid=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],gt()),Rt)],e.sin=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],yt()),Rt)],e.sqrt=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],bt()),Rt)],e.tan=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],jt()),Rt)],e.tanh=(wt,Rt)=>[wt.run(Tt(wt,Rt[0],Mt()),Rt)]},5611:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const d=c(5060),h=c(2039),g=c(9390),_=c(2827),_e={name:"unpack",inputNames:["A"],inputTypes:[h.TextureType.packed]};e.createUnpackProgramInfo=(et,tt)=>{const rt=tt.dims.length,$=(0,_.getChannels)("rc",rt),b=$.slice(-2),nt=(0,g.getCoordsDataType)(rt),st=(0,_.unpackFromChannel)(),ot=tt.dims.length===0?"":function(lt,dt){if(lt===1)return"rc";let ht="";for(let pt=0;pt<lt;pt++)ht+=dt[pt],pt<lt-1&&(ht+=",");return ht}(rt,$),it=rt<=1?"rc":`vec2(${b.join(",")})`,at=`
    ${st}
    void main() {
      ${nt} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${ot});

       ${(0,d.getGlsl)(et.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${it}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},_e),{hasMain:!0,output:{dims:tt.dims,type:tt.type,textureType:h.TextureType.unpacked},shaderSource:at})},e.createUnpackProgramInfoLoader=(et,tt)=>Object.assign(Object.assign({},_e),{get:()=>(0,e.createUnpackProgramInfo)(et,tt)})},8428:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const d=c(2517);e.unsqueeze=(_,_e,et)=>{h(_e);const tt=d.ShapeUtil.unsqueezeShape(_e[0].dims,et);return[_.reshapeUnpacked(_e[0],tt)]},e.unsqueezeV13=(_,_e)=>(g(_e),(0,e.unsqueeze)(_,[_e[0]],Array.from(_e[1].integerData))),e.parseUnsqueezeAttributes=_=>_.attributes.getInts("axes");const h=_=>{if(!_||_.length!==1)throw new Error("Unsqueeze requires 1 input.");if(_[0].type==="string")throw new Error("invalid input tensor types.")},g=_=>{if(!_||_.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(_[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const d=c(246),h=c(5060),g=c(2039),_={name:"Upsample",inputNames:["X"],inputTypes:[g.TextureType.unpacked]};e.upsample=(et,tt,rt)=>((0,e.validateInputs)(tt,rt),[et.run(Object.assign(Object.assign({},_),{cacheHint:rt.cacheKey,get:()=>_e(et,tt,rt)}),tt)]),e.parseUpsampleAttributesV7=et=>(0,e.parseUpsampleAttributes)(et,7),e.parseUpsampleAttributesV9=et=>(0,e.parseUpsampleAttributes)(et,9),e.parseUpsampleAttributes=(et,tt)=>{const rt=tt>=10,$=et.attributes.getString("mode","nearest");if($!=="nearest"&&$!=="linear"&&(tt<11||$!=="cubic"))throw new Error(`unrecognized mode: ${$}`);let b=[];tt<9&&(b=et.attributes.getFloats("scales"),(0,e.scalesValidation)(b,$,rt));const nt=et.attributes.getFloat("extrapolation_value",0),st=tt>10?et.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(st)===-1)throw new Error(`coordinate_transform_mode '${st}' is not supported`);const ot=st==="tf_crop_and_resize",it=ot,at=$==="nearest"&&tt>=11?et.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(at)===-1)throw new Error(`nearest_mode '${at}' is not supported`);const lt=et.attributes.getFloat("cubic_coeff_a",-.75),dt=et.attributes.getInt("exclude_outside",0)!==0;if(dt&&$!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const ht=tt<11||$==="nearest"&&st==="asymmetric"&&at==="floor";let pt=0,mt=0,yt=0;return tt>10?et.inputs.length>2?(pt=1,mt=2,yt=3):(mt=1,yt=2):tt===9&&(mt=1),(0,d.createAttributeWithCacheKey)({opset:tt,isResize:rt,mode:$,scales:b,extrapolationValue:nt,coordinateTransformMode:st,useExtrapolation:it,needRoiInput:ot,nearestMode:at,cubicCoefficientA:lt,excludeOutside:dt,useNearest2xOptimization:ht,roiInputIdx:pt,scalesInputIdx:mt,sizesInputIdx:yt})};const _e=(et,tt,rt)=>{const $=(0,h.getGlsl)(et.session.backend.glContext.version),[b,nt]=et.calculateTextureWidthAndHeight(tt[0].dims,g.TextureType.unpacked),st=tt[0].dims.map((yt,xt)=>Math.floor(yt*rt.scales[xt])),[ot,it]=et.calculateTextureWidthAndHeight(st,g.TextureType.unpacked),at=st.length,lt=new Array(at),dt=new Array(at);let ht=`
      int output_pitches[${at}];
      int input_pitches[${at}];
      `;for(let yt=at-1;yt>=0;yt--)lt[yt]=yt===at-1?1:lt[yt+1]*st[yt+1],dt[yt]=yt===at-1?1:dt[yt+1]*tt[0].dims[yt+1],ht+=`
        output_pitches[${yt}] = ${lt[yt]};
        input_pitches[${yt}] = ${dt[yt]};
        `;const pt=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${b}, ${nt});
        float value = getColorAsFloat(${$.texture2D}(X, coords));
        return value;
      }
      `,mt=rt.mode==="nearest"?`
    ${pt}
    float process(int indices[${at}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ot}, ${it});

      ${ht}

      int d, m;
      for (int dim = 0; dim < ${at}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:at===4?`
    ${pt}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ot}, ${it});

      ${ht}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${tt[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${pt}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ot}, ${it});

      ${ht}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${tt[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},_),{output:{dims:st,type:tt[0].type,textureType:g.TextureType.unpacked},shaderSource:mt,variables:[{name:"scales",type:"int",arrayLength:rt.scales.length,data:rt.scales.map(yt=>Math.ceil(yt))}]})};e.validateInputs=(et,tt)=>{if(!et||tt.opset<9&&et.length!==1||tt.opset>=9&&tt.opset<11&&et.length!==2||tt.opset>=11&&et.length<2)throw new Error("invalid inputs.");if(tt.scales.length>0&&et[0].dims.length!==tt.scales.length)throw new Error("Invalid input shape.");if(et[0].type==="string")throw new Error("Invalid input tensor types.")},e.scalesValidation=(et,tt,rt)=>{if(rt){for(const $ of et)if($<=0)throw new Error("Scale value should be greater than 0.")}else for(const $ of et)if($<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(tt!=="linear"&&tt!=="cubic"||et.length===2||et.length===4&&et[0]===1&&et[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${rt?"Resize":"Upsample"} opeartor.`)}},1958:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const d=c(1670),h=c(6231),g=c(8879),_=c(5060);e.ProgramManager=class{constructor(_e,et,tt){this.profiler=_e,this.glContext=et,this.textureLayoutStrategy=tt,this.repo=new Map,this.attributesBound=!1}getArtifact(_e){return this.repo.get(_e)}setArtifact(_e,et){this.repo.set(_e,et)}run(_e,et,tt){var rt;this.profiler.event("op",`ProgramManager.run ${(rt=_e.programInfo.name)!==null&&rt!==void 0?rt:"unknown kernel"}`,()=>{var $;const b=this.glContext.gl,nt=_e.program;b.useProgram(nt);try{this.bindOutput(tt),this.attributesBound||this.bindAttributes(_e.attribLocations),this.bindUniforms(_e.uniformLocations,($=_e.programInfo.variables)!==null&&$!==void 0?$:[],et)}catch(st){throw h.Logger.error("ProgramManager",_e.programInfo.shaderSource),st}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(_e=>this.glContext.deleteProgram(_e.program))}build(_e,et,tt){return this.profiler.event("backend","ProgramManager.build",()=>{const rt=new g.GlslPreprocessor(this.glContext,_e,et,tt),$=rt.preprocess(),b=this.compile($);return{programInfo:_e,program:b,uniformLocations:this.getUniformLocations(b,rt.context.programInfo.inputNames,rt.context.programInfo.variables),attribLocations:this.getAttribLocations(b)}})}compile(_e){if(!this.vertexShader){h.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const rt=(0,_.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(rt,this.glContext.gl.VERTEX_SHADER)}d.env.debug&&h.Logger.verbose("ProrgramManager",`FragShader:
${_e}
`);const et=this.glContext.compileShader(_e,this.glContext.gl.FRAGMENT_SHADER),tt=this.glContext.createProgram(this.vertexShader,et);return this.glContext.deleteShader(et),tt}bindOutput(_e){const et=_e.width,tt=_e.height;h.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${et}/${tt}, shape=${_e.shape}, type=${_e.tensor.type}`),this.glContext.attachFramebuffer(_e.texture,et,tt)}bindAttributes(_e){const et=_e.position,tt=_e.textureCoord;this.glContext.setVertexAttributes(et,tt),this.attributesBound=!0}bindUniforms(_e,et,tt){var rt;const $=this.glContext.gl;let b=0;for(const{name:nt,type:st,location:ot,arrayLength:it}of _e){const at=(rt=et.find(lt=>lt.name===nt))===null||rt===void 0?void 0:rt.data;if(st!=="sampler2D"&&!at)throw new Error(`variable '${nt}' does not have data defined in program info`);switch(st){case"sampler2D":this.bindTexture(tt[b],ot,b),b++;break;case"float":it?$.uniform1fv(ot,at):$.uniform1f(ot,at);break;case"int":it?$.uniform1iv(ot,at):$.uniform1i(ot,at);break;default:throw new Error(`Uniform not implemented: ${st}`)}}}bindTexture(_e,et,tt){this.glContext.bindTextureToUniform(_e.texture,tt,et)}getAttribLocations(_e){return{position:this.getAttribLocation(_e,"position"),textureCoord:this.getAttribLocation(_e,"textureCoord")}}getUniformLocations(_e,et,tt){const rt=[];if(et)for(const $ of et)rt.push({name:$,type:"sampler2D",location:this.getUniformLocation(_e,$)});if(tt)for(const $ of tt)rt.push(Object.assign(Object.assign({},$),{location:this.getUniformLocation(_e,$.name)}));return rt}getUniformLocation(_e,et){const tt=this.glContext.gl.getUniformLocation(_e,et);if(tt===null)throw new Error(`Uniform ${et} not found.`);return tt}getAttribLocation(_e,et){return this.glContext.gl.getAttribLocation(_e,et)}}},6416:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const d=c(6231),h=c(1047),g=c(8316),_=c(1640),_e=c(1958),et=c(7859),tt=c(5702);e.WebGLSessionHandler=class{constructor(rt,$){this.backend=rt,this.context=$,this.layoutStrategy=new et.PreferLogicalStrategy(rt.glContext.maxTextureSize),this.programManager=new _e.ProgramManager(this.context.profiler,rt.glContext,this.layoutStrategy),this.textureManager=new tt.TextureManager(rt.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:rt.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=rt.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new g.WebGLInferenceHandler(this)}onGraphInitialized(rt){const $=rt.getValues().filter(b=>b.from===-1&&b.tensor).map(b=>b.tensor.dataId);this.initializers=new Set($)}isInitializer(rt){return!!this.initializers&&this.initializers.has(rt)}addInitializer(rt){this.initializers.add(rt)}getTextureData(rt,$){return $?this.packedTextureDataCache.get(rt):this.unpackedTextureDataCache.get(rt)}setTextureData(rt,$,b=!1){d.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),b?this.packedTextureDataCache.set(rt,$):this.unpackedTextureDataCache.set(rt,$)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(rt=>this.textureManager.releaseTexture(rt,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(rt=>this.textureManager.releaseTexture(rt,!0)),this.unpackedTextureDataCache=new Map}resolve(rt,$,b){const nt=(0,h.resolveOperator)(rt,$,_.WEBGL_OP_RESOLVE_RULES);return{impl:nt.opImpl,context:nt.opInit?nt.opInit(rt,b):rt}}}},7769:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const d=c(6231);e.RedFloat32DataEncoder=class{constructor(h,g=1){if(g===1)this.internalFormat=h.R32F,this.format=h.RED,this.textureType=h.FLOAT,this.channelSize=g;else{if(g!==4)throw new Error(`Invalid number of channels: ${g}`);this.internalFormat=h.RGBA32F,this.format=h.RGBA,this.textureType=h.FLOAT,this.channelSize=g}}encode(h,g){let _,_e;return h.constructor!==Float32Array&&(d.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),_e=new Float32Array(h)),g*this.channelSize>h.length?(d.Logger.warning("Encoder","Source data too small. Allocating larger array"),_e=h,_=this.allocate(g*this.channelSize),_e.forEach((et,tt)=>_[tt]=et)):(_e=h,_=_e),_}allocate(h){return new Float32Array(4*h)}decode(h,g){return this.channelSize===1?h.filter((_,_e)=>_e%4==0).subarray(0,g):h.subarray(0,g)}},e.RGBAFloatDataEncoder=class{constructor(h,g=1,_){if(g!==1&&g!==4)throw new Error(`Invalid number of channels: ${g}`);this.internalFormat=h.RGBA,this.format=h.RGBA,this.channelSize=g,this.textureType=_||h.FLOAT}encode(h,g){let _=h;return this.channelSize===1&&(d.Logger.verbose("Encoder","Exploding into a larger array"),_=this.allocate(g),h.forEach((_e,et)=>_[4*et]=_e)),_}allocate(h){return new Float32Array(4*h)}decode(h,g){return this.channelSize===1?h.filter((_,_e)=>_e%4==0).subarray(0,g):h.subarray(0,g)}},e.Uint8DataEncoder=class{constructor(h,g=1){if(this.channelSize=4,g===1)this.internalFormat=h.ALPHA,this.format=h.ALPHA,this.textureType=h.UNSIGNED_BYTE,this.channelSize=g;else{if(g!==4)throw new Error(`Invalid number of channels: ${g}`);this.internalFormat=h.RGBA,this.format=h.RGBA,this.textureType=h.UNSIGNED_BYTE,this.channelSize=g}}encode(h,g){return new Uint8Array(h.buffer,h.byteOffset,h.byteLength)}allocate(h){return new Uint8Array(h*this.channelSize)}decode(h,g){if(h instanceof Uint8Array)return h.subarray(0,g);throw new Error(`Invalid array type: ${h.constructor}`)}}},7859:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const d=c(6231),h=c(2517);function g(rt,$){const b=[],nt=[],st=$!=null&&Array.isArray($)&&$.length===0,ot=$==null||st?null:_($,rt).sort();let it=0;for(let at=0;at<rt.length;++at){if(ot!=null){if(ot[it]===at&&rt[at]!==1)throw new Error(`Can't squeeze axis ${at} since its dim '${rt[at]}' is not 1`);(ot[it]==null||ot[it]>at)&&rt[at]===1&&(b.push(rt[at]),nt.push(at)),ot[it]<=at&&it++}rt[at]!==1&&(b.push(rt[at]),nt.push(at))}return{newShape:b,keptDims:nt}}function _(rt,$){const b=$.length;return rt=rt==null?$.map((nt,st)=>st):[].concat(rt),(0,h.assert)(rt.every(nt=>nt>=-b&&nt<b),()=>`All values in axis param must be in range [-${b}, ${b}) but got axis ${rt}`),(0,h.assert)(rt.every(_e),()=>`All values in axis param must be integers but got axis ${rt}`),rt.map(nt=>nt<0?b+nt:nt)}function _e(rt){return rt%1==0}function et(rt){if(rt.length===0)return 1;let $=rt[0];for(let b=1;b<rt.length;b++)$*=rt[b];return $}function tt(rt){const $=Math.ceil(Math.sqrt(rt));return[$,Math.ceil(rt/$)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(rt){this.maxTextureSize=rt}computeTextureWH(rt,$){if(rt.length===0)return[1,1];const b=this.maxTextureSize;if($&&$.breakAxis!==void 0){const ot=$.breakAxis>=rt.length?1:rt.slice($.breakAxis).reduce((at,lt)=>at*lt),it=$.breakAxis<=0?1:rt.slice(0,$.breakAxis).reduce((at,lt)=>at*lt);if(!(ot>b||it>b))return[ot,it];d.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${rt}, breakAxis:${$.breakAxis}`)}const nt=rt.reduce((ot,it)=>ot*it);let st=Math.floor(Math.sqrt(nt));for(;st<b&&st<nt&&nt%st!=0;st++);if(st>=b||nt%st!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${rt}`);return[st,nt/st]}},e.PreferLogicalStrategy=class{constructor(rt){this.maxTextureSize=rt}computeTextureWH(rt,$){const b=this.computeTexture(rt,$);return $&&$.isPacked&&(b[0]/=2,b[1]/=2),$&&$.reverseWH?[b[1],b[0]]:b}computeTexture(rt,$){const b=$&&$.isPacked;if(rt.length===0)return b?[2,2]:[1,1];let nt=this.maxTextureSize;if($&&$.breakAxis!==void 0){const it=$.breakAxis>=rt.length?1:rt.slice($.breakAxis).reduce((lt,dt)=>lt*dt),at=$.breakAxis<=0?1:rt.slice(0,$.breakAxis).reduce((lt,dt)=>lt*dt);if(!(it>nt||at>nt))return[it,at];d.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${rt}, breakAxis:${$.breakAxis}`)}let st=rt.slice(0);b&&(nt*=2,st=st.map((it,at)=>at>=st.length-2?st[at]%2==0?st[at]:st[at]+1:st[at]),st.length===1&&(st=[2,st[0]])),st.length!==2&&(st=g(st).newShape);const ot=et(st);return st.length<=1&&ot<=nt?[1,ot]:st.length===2&&st[0]<=nt&&st[1]<=nt?st:st.length===3&&st[0]*st[1]<=nt&&st[2]<=nt?[st[0]*st[1],st[2]]:st.length===3&&st[0]<=nt&&st[1]*st[2]<=nt?[st[0],st[1]*st[2]]:st.length===4&&st[0]*st[1]*st[2]<=nt&&st[3]<=nt?[st[0]*st[1]*st[2],st[3]]:st.length===4&&st[0]<=nt&&st[1]*st[2]*st[3]<=nt?[st[0],st[1]*st[2]*st[3]]:b?tt(ot/4).map(it=>2*it):tt(ot)}},e.squeezeShape=g,e.parseAxisParam=_,e.isInt=_e,e.sizeFromShape=et,e.getRowsCols=function(rt){if(rt.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[rt.length>1?rt[rt.length-2]:1,rt[rt.length-1]]},e.sizeToSquarishShape=tt,e.getBatchDim=function(rt,$=2){return et(rt.slice(0,rt.length-$))}},4057:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const d=c(2517),h=c(2039);e.createTextureLayoutFromTextureType=(g,_,_e)=>{const et=_e===h.TextureType.unpacked||_e===h.TextureType.unpackedReversed?1:4,tt=_e===h.TextureType.packed,rt=_e===h.TextureType.unpackedReversed||_e===h.TextureType.packed,$=_e===h.TextureType.packedLastDimension?_.length-1:void 0,b=_e===h.TextureType.packedLastDimension?_.map((nt,st)=>st===_.length-1?4*nt:nt):void 0;return(0,e.createTextureLayoutFromShape)(g,_,et,b,{isPacked:tt,reverseWH:rt,breakAxis:$})},e.calculateTextureWidthAndHeight=(g,_,_e)=>{const et=(0,e.createTextureLayoutFromTextureType)(g,_,_e);return[et.width,et.height]},e.createTextureLayoutFromShape=(g,_,_e=1,et,tt)=>{const rt=!(!tt||!tt.isPacked),[$,b]=g.computeTextureWH(rt&&et||_,tt),nt=_.length;let st=_.slice(0);if(nt===0&&(st=[1]),_e===1)et=_;else if(rt){if(_e!==4)throw new Error("a packed texture must be 4-channel");et=_,nt>0&&(st[nt-1]=Math.ceil(st[nt-1]/2)),nt>1&&(st[nt-2]=Math.ceil(st[nt-2]/2))}else if(!et)throw new Error("Unpacked shape is needed when using channels > 1");return{width:$,height:b,channels:_e,isPacked:rt,shape:st,strides:d.ShapeUtil.computeStrides(st),unpackedShape:et,reversedWH:tt&&tt.reverseWH}}},5702:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const d=c(6231);e.TextureManager=class{constructor(h,g,_,_e){this.glContext=h,this.layoutStrategy=g,this.profiler=_,this.config=_e,this.pendingRead=new Map,_e.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(h,g,_,_e){const et=this.toEncoderType(h),tt=this.glContext.getEncoder(et,g.channels||1,_e);if(g.isPacked&&_e===1)throw new Error("not implemented");const rt=g.width,$=g.height;let b,nt;if(this.config.reuseTextures){b=`${rt}x${$}_${tt.format}_${tt.internalFormat}_${tt.textureType}`,nt=this.inUseTextures.get(b),nt||(nt=[],this.inUseTextures.set(b,nt));const ot=this.idleTextures.get(b);if(ot&&ot.length>0){const it=ot.pop();return nt.push(it),_e===1&&this.glContext.updateTexture(it,rt,$,tt,this.toTextureData(h,_)),it}}d.Logger.verbose("TextureManager",`Creating new texture of size ${g.width}x${g.height}`);const st=this.glContext.allocateTexture(rt,$,tt,this.toTextureData(h,_));return this.config.reuseTextures&&(nt.push(st),this.textureLookup.set(st,b)),st}readTexture(h,g,_){return _||(_=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const _e=h.shape.reduce((tt,rt)=>tt*rt)*_,et=this.glContext.readTexture(h.texture,h.width,h.height,_e,this.toEncoderType(g),_);return this.toTensorData(g,et)})}async readTextureAsync(h,g,_){const _e=h.tensor.dataId;if(_||(_=1),this.pendingRead.has(_e)){const et=this.pendingRead.get(_e);return new Promise(tt=>et==null?void 0:et.push(tt))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(_e,[]);const et=h.shape.reduce((b,nt)=>b*nt)*_;await this.glContext.createAndWaitForFence();const tt=this.glContext.readTexture(h.texture,h.width,h.height,et,this.toEncoderType(g),_),rt=this.toTensorData(g,tt),$=this.pendingRead.get(_e);return this.pendingRead.delete(_e),$==null||$.forEach(b=>b(rt)),rt})}readUint8TextureAsFloat(h){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const g=h.shape.reduce((_e,et)=>_e*et),_=this.glContext.readTexture(h.texture,h.width,h.height,4*g,"byte",4);return new Float32Array(_.buffer,_.byteOffset,g)})}releaseTexture(h,g){let _;if(this.config.reuseTextures&&(_=this.textureLookup.get(h.texture),_)){g&&this.textureLookup.delete(_);const _e=this.inUseTextures.get(_);if(_e){const et=_e.indexOf(h.texture);if(et!==-1){_e.splice(et,1);let tt=this.idleTextures.get(_);tt||(tt=[],this.idleTextures.set(_,tt)),tt.push(h.texture)}}}_&&!g||(d.Logger.verbose("TextureManager",`Deleting texture of size ${h.width}x${h.height}`),this.glContext.deleteTexture(h.texture))}toTensorData(h,g){switch(h){case"int16":return g instanceof Int16Array?g:Int16Array.from(g);case"int32":return g instanceof Int32Array?g:Int32Array.from(g);case"int8":return g instanceof Int8Array?g:Int8Array.from(g);case"uint16":return g instanceof Uint16Array?g:Uint16Array.from(g);case"uint32":return g instanceof Uint32Array?g:Uint32Array.from(g);case"uint8":case"bool":return g instanceof Uint8Array?g:Uint8Array.from(g);case"float32":return g instanceof Float32Array?g:Float32Array.from(g);case"float64":return g instanceof Float64Array?g:Float64Array.from(g);default:throw new Error(`TensorData type ${h} is not supported`)}}toTextureData(h,g){if(g)return g instanceof Float32Array?g:new Float32Array(g)}toEncoderType(h){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(a,e)=>{var c;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(c=e.TextureType||(e.TextureType={}))[c.unpacked=0]="unpacked",c[c.unpackedReversed=1]="unpackedReversed",c[c.packed=2]="packed",c[c.downloadUint8AsFloat=3]="downloadUint8AsFloat",c[c.packedLastDimension=4]="packedLastDimension"},9390:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const d=c(2517);e.getPackedShape=function(h){const g=h.length;return h.slice(0,g-1).concat(h[g-1]/4)},e.repeatedTry=async function(h,g=_e=>0,_){return new Promise((_e,et)=>{let tt=0;const rt=()=>{if(h())return void _e();tt++;const $=g(tt);_!=null&&tt>=_?et():setTimeout(rt,$)};rt()})},e.generateShaderFuncNameFromInputSamplerName=function(h){return(0,d.assert)(h!==void 0&&h.length!==0,()=>"empty string found for sampler name"),"get"+h.charAt(0).toUpperCase()+h.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(h){return(0,d.assert)(h!==void 0&&h.length!==0,()=>"empty string found for sampler name"),"get"+h.charAt(0).toUpperCase()+h.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(h,g){let _=JSON.parse(JSON.stringify(h));return _=g,_},e.getSqueezedParams=function(h,g){return g.map(_=>h[_]).join(", ")},e.getCoordsDataType=function(h){if(h<=1)return"int";if(h===2)return"ivec2";if(h===3)return"ivec3";if(h===4)return"ivec4";if(h===5)return"ivec5";if(h===6)return"ivec6";throw Error(`GPU for rank ${h} is not yet supported`)},e.getGlChannels=function(h=6){return["x","y","z","w","u","v"].slice(0,h)}},7305:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const d=c(6231),h=c(1713),g={};function _(_e){const et=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const $=document.createElement("canvas");return $.width=1,$.height=1,$}();let tt;const rt={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!_e||_e==="webgl2")&&(tt=et.getContext("webgl2",rt),tt))try{return new h.WebGLContext(tt,2)}catch($){d.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${$}`)}if((!_e||_e==="webgl")&&(tt=et.getContext("webgl",rt)||et.getContext("experimental-webgl",rt),tt))try{return new h.WebGLContext(tt,1)}catch($){d.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${$}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function _e(et){let tt;et&&et!=="webgl2"||!("webgl2"in g)?et&&et!=="webgl"||!("webgl"in g)||(tt=g.webgl):tt=g.webgl2,tt=tt||_(et),et=et||tt.version===1?"webgl":"webgl2";const rt=tt.gl;return g[et]=tt,rt.isContextLost()?(delete g[et],_e(et)):(rt.disable(rt.DEPTH_TEST),rt.disable(rt.STENCIL_TEST),rt.disable(rt.BLEND),rt.disable(rt.DITHER),rt.disable(rt.POLYGON_OFFSET_FILL),rt.disable(rt.SAMPLE_COVERAGE),rt.enable(rt.SCISSOR_TEST),rt.enable(rt.CULL_FACE),rt.cullFace(rt.BACK),tt)},e.createNewWebGLContext=_},1713:function(a,e,c){var d=this&&this.__createBinding||(Object.create?function(rt,$,b,nt){nt===void 0&&(nt=b);var st=Object.getOwnPropertyDescriptor($,b);st&&!("get"in st?!$.__esModule:st.writable||st.configurable)||(st={enumerable:!0,get:function(){return $[b]}}),Object.defineProperty(rt,nt,st)}:function(rt,$,b,nt){nt===void 0&&(nt=b),rt[nt]=$[b]}),h=this&&this.__setModuleDefault||(Object.create?function(rt,$){Object.defineProperty(rt,"default",{enumerable:!0,value:$})}:function(rt,$){rt.default=$}),g=this&&this.__importStar||function(rt){if(rt&&rt.__esModule)return rt;var $={};if(rt!=null)for(var b in rt)b!=="default"&&Object.prototype.hasOwnProperty.call(rt,b)&&d($,rt,b);return h($,rt),$};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const _=c(1670),_e=g(c(7769)),et=c(9390);function tt(rt){let $=0;for(;$<rt.length&&rt[$]();++$);return $-1}e.linearSearchLastTrue=tt,e.WebGLContext=class{constructor(rt,$){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=rt,this.version=$,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(rt,$,b,nt){const st=this.gl,ot=st.createTexture();st.bindTexture(st.TEXTURE_2D,ot),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_MIN_FILTER,st.NEAREST),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_MAG_FILTER,st.NEAREST),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_WRAP_S,st.CLAMP_TO_EDGE),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_WRAP_T,st.CLAMP_TO_EDGE);const it=nt?b.encode(nt,rt*$):null;return st.texImage2D(st.TEXTURE_2D,0,b.internalFormat,rt,$,0,b.format,b.textureType,it),this.checkError(),ot}updateTexture(rt,$,b,nt,st){const ot=this.gl;ot.bindTexture(ot.TEXTURE_2D,rt);const it=nt.encode(st,$*b);ot.texSubImage2D(ot.TEXTURE_2D,0,0,0,$,b,nt.format,nt.textureType,it),this.checkError()}attachFramebuffer(rt,$,b){const nt=this.gl;nt.bindTexture(nt.TEXTURE_2D,rt),nt.bindFramebuffer(nt.FRAMEBUFFER,this.framebuffer),nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.TEXTURE_2D,rt,0),this.checkError(),nt.viewport(0,0,$,b),nt.scissor(0,0,$,b)}readTexture(rt,$,b,nt,st,ot){const it=this.gl;ot||(ot=1),this.frameBufferBound||this.attachFramebuffer(rt,$,b);const at=this.getEncoder(st,ot),lt=at.allocate($*b);return it.bindTexture(it.TEXTURE_2D,rt),it.framebufferTexture2D(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_2D,rt,0),it.readPixels(0,0,$,b,it.RGBA,at.textureType,lt),this.checkError(),at.decode(lt,nt)}isFramebufferReady(){return!0}getActiveTexture(){const rt=this.gl;return"TEXTURE"+(rt.getParameter(this.gl.ACTIVE_TEXTURE)-rt.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(rt,$){const b=this.gl;b.vertexAttribPointer(rt,3,b.FLOAT,!1,20,0),b.enableVertexAttribArray(rt),$!==-1&&(b.vertexAttribPointer($,2,b.FLOAT,!1,20,12),b.enableVertexAttribArray($)),this.checkError()}createProgram(rt,$){const b=this.gl,nt=b.createProgram();return b.attachShader(nt,rt),b.attachShader(nt,$),b.linkProgram(nt),nt}compileShader(rt,$){const b=this.gl,nt=b.createShader($);if(!nt)throw new Error(`createShader() returned null with type ${$}`);if(b.shaderSource(nt,rt),b.compileShader(nt),b.getShaderParameter(nt,b.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${b.getShaderInfoLog(nt)}
Shader source:
${rt}`);return nt}deleteShader(rt){this.gl.deleteShader(rt)}bindTextureToUniform(rt,$,b){const nt=this.gl;nt.activeTexture(nt.TEXTURE0+$),this.checkError(),nt.bindTexture(nt.TEXTURE_2D,rt),this.checkError(),nt.uniform1i(b,$),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(_.env.debug){const rt=this.gl,$=rt.getError();let b="";switch($){case rt.NO_ERROR:return;case rt.INVALID_ENUM:b="INVALID_ENUM";break;case rt.INVALID_VALUE:b="INVALID_VALUE";break;case rt.INVALID_OPERATION:b="INVALID_OPERATION";break;case rt.INVALID_FRAMEBUFFER_OPERATION:b="INVALID_FRAMEBUFFER_OPERATION";break;case rt.OUT_OF_MEMORY:b="OUT_OF_MEMORY";break;case rt.CONTEXT_LOST_WEBGL:b="CONTEXT_LOST_WEBGL";break;default:b=`Unknown WebGL Error: ${$.toString(16)}`}throw new Error(b)}}deleteTexture(rt){this.gl.deleteTexture(rt)}deleteProgram(rt){this.gl.deleteProgram(rt)}getEncoder(rt,$,b=0){if(this.version===2)return new _e.RedFloat32DataEncoder(this.gl,$);switch(rt){case"float":return b===1||this.isRenderFloat32Supported?new _e.RGBAFloatDataEncoder(this.gl,$):new _e.RGBAFloatDataEncoder(this.gl,$,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new _e.Uint8DataEncoder(this.gl,$);default:throw new Error(`Invalid dataType: ${rt}`)}}clearActiveTextures(){const rt=this.gl;for(let $=0;$<this.maxTextureImageUnits;++$)rt.activeTexture(rt.TEXTURE0+$),rt.bindTexture(rt.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const rt=this.gl;rt.bindFramebuffer(rt.FRAMEBUFFER,null),rt.deleteFramebuffer(this.framebuffer),rt.bindBuffer(rt.ARRAY_BUFFER,null),rt.deleteBuffer(this.vertexbuffer),rt.bindBuffer(rt.ELEMENT_ARRAY_BUFFER,null),rt.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const rt=this.gl,$=rt.createBuffer();if(!$)throw new Error("createBuffer() returned null");const b=this.createDefaultGeometry();return rt.bindBuffer(rt.ARRAY_BUFFER,$),rt.bufferData(rt.ARRAY_BUFFER,b,rt.STATIC_DRAW),this.checkError(),$}createFramebuffer(){const rt=this.gl.createFramebuffer();if(!rt)throw new Error("createFramebuffer returned null");return rt}queryVitalParameters(){const rt=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=rt.getParameter(rt.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=rt.getParameter(rt.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const rt=this.gl,$=rt.createTexture();rt.bindTexture(rt.TEXTURE_2D,$);const b=this.version===2?rt.RGBA32F:rt.RGBA;rt.texImage2D(rt.TEXTURE_2D,0,b,1,1,0,rt.RGBA,rt.FLOAT,null);const nt=rt.createFramebuffer();rt.bindFramebuffer(rt.FRAMEBUFFER,nt),rt.framebufferTexture2D(rt.FRAMEBUFFER,rt.COLOR_ATTACHMENT0,rt.TEXTURE_2D,$,0);const st=rt.checkFramebufferStatus(rt.FRAMEBUFFER)===rt.FRAMEBUFFER_COMPLETE;return rt.bindTexture(rt.TEXTURE_2D,null),rt.bindFramebuffer(rt.FRAMEBUFFER,null),rt.deleteTexture($),rt.deleteFramebuffer(nt),st}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const rt=this.gl;let $,b,nt,st,ot;try{$=rt.createTexture(),b=rt.createFramebuffer(),rt.bindTexture(rt.TEXTURE_2D,$);const it=this.version===2?rt.RGBA32F:rt.RGBA;return rt.texImage2D(rt.TEXTURE_2D,0,it,1,1,0,rt.RGBA,rt.FLOAT,null),rt.bindFramebuffer(rt.FRAMEBUFFER,b),rt.framebufferTexture2D(rt.FRAMEBUFFER,rt.COLOR_ATTACHMENT0,rt.TEXTURE_2D,$,0),rt.enable(rt.BLEND),nt=rt.createShader(rt.VERTEX_SHADER),!!nt&&(rt.shaderSource(nt,"void main(){}"),rt.compileShader(nt),st=rt.createShader(rt.FRAGMENT_SHADER),!!st&&(rt.shaderSource(st,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),rt.compileShader(st),ot=rt.createProgram(),!!ot&&(rt.attachShader(ot,nt),rt.attachShader(ot,st),rt.linkProgram(ot),rt.useProgram(ot),rt.drawArrays(rt.POINTS,0,1),rt.getError()===rt.NO_ERROR)))}finally{rt.disable(rt.BLEND),ot&&rt.deleteProgram(ot),nt&&rt.deleteShader(nt),st&&rt.deleteShader(st),b&&(rt.bindFramebuffer(rt.FRAMEBUFFER,null),rt.deleteFramebuffer(b)),$&&(rt.bindTexture(rt.TEXTURE_2D,null),rt.deleteTexture($))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const rt=this.gl,$=this.disjointTimerQueryWebgl2Extension,b=rt.createQuery();return rt.beginQuery($.TIME_ELAPSED_EXT,b),b}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const rt=this.gl,$=this.disjointTimerQueryWebgl2Extension;rt.endQuery($.TIME_ELAPSED_EXT)}}isTimerResultAvailable(rt){let $=!1,b=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const nt=this.gl,st=this.disjointTimerQueryWebgl2Extension;$=nt.getQueryParameter(rt,nt.QUERY_RESULT_AVAILABLE),b=nt.getParameter(st.GPU_DISJOINT_EXT)}return $&&!b}getTimerResult(rt){let $=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const b=this.gl;$=b.getQueryParameter(rt,b.QUERY_RESULT),b.deleteQuery(rt)}return $/1e6}async waitForQueryAndGetTime(rt){return await(0,et.repeatedTry)(()=>this.isTimerResultAvailable(rt)),this.getTimerResult(rt)}async createAndWaitForFence(){const rt=this.createFence(this.gl);return this.pollFence(rt)}createFence(rt){let $;const b=rt,nt=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);return rt.flush(),$=nt===null?()=>!0:()=>{const st=b.clientWaitSync(nt,0,0);return st===b.ALREADY_SIGNALED||st===b.CONDITION_SATISFIED},{query:nt,isFencePassed:$}}async pollFence(rt){return new Promise($=>{this.addItemToPoll(()=>rt.isFencePassed(),()=>$())})}pollItems(){const rt=tt(this.itemsToPoll.map($=>$.isDoneFn));for(let $=0;$<=rt;++$){const{resolveFn:b}=this.itemsToPoll[$];b()}this.itemsToPoll=this.itemsToPoll.slice(rt+1)}async addItemToPoll(rt,$){this.itemsToPoll.push({isDoneFn:rt,resolveFn:$}),this.itemsToPoll.length>1||await(0,et.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const d=c(6231);class h{constructor(_,_e){this.op=_,this.node=_e}}e.ExecutionPlan=class{constructor(g,_,_e){this.graph=g,this.profiler=_e,this.initialize(_)}initialize(g){this.profiler.event("session","ExecutionPlan.initialize",()=>{const _=this.graph.getNodes();if(_.length!==g.length)throw new Error("The size of nodes and OPs do not match.");this._ops=g.map((_e,et)=>new h(_e,_[et])),this.reset(),this._starter=[],this._ops.forEach((_e,et)=>{let tt=!0;for(const rt of _e.node.inputs)if(!this._values[rt]&&this.graph.getInputIndices().indexOf(rt)===-1){tt=!1;break}tt&&this._starter.push(et)})})}reset(){this._values=this.graph.getValues().map(g=>g.tensor)}async execute(g,_){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const _e=g.createInferenceHandler(),et=this.graph.getInputIndices();if(_.length!==et.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${_.length} expected: ${et.length}`);_.forEach((st,ot)=>{const it=et[ot];this._values[it]=st});const tt=this._starter.slice(0),rt=this.graph.getValues(),$=this.graph.getNodes();let b=0;for(;b<tt.length;){const st=tt[b++],ot=this._ops[st],it=ot.node.inputs.map(ht=>this._values[ht]);if(it.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${ot.node}`);const at=it;d.Logger.verbose("ExecPlan",`Runing op:${ot.node.name} (${at.map((ht,pt)=>`'${ot.node.inputs[pt]}': ${ht.type}[${ht.dims.join(",")}]`).join(", ")})`);const lt=await this.profiler.event("node",ot.node.name,async()=>ot.op.impl(_e,at,ot.op.context));if(lt.length!==ot.node.outputs.length)throw new Error("the size of output does not match model definition.");lt.forEach((ht,pt)=>{const mt=ot.node.outputs[pt];if(this._values[mt])throw new Error(`output [${mt}] already has value: op:${ot.node.name}`);this._values[mt]=ht});const dt=new Set;lt.forEach((ht,pt)=>{const mt=ot.node.outputs[pt];for(const yt of rt[mt].to){const xt=$[yt];let gt=!0;for(const bt of xt.inputs)if(!this._values[bt]){gt=!1;break}gt&&dt.add(yt)}}),tt.push(...dt)}const nt=[];for(let st=0;st<this.graph.getOutputIndices().length;st++){const ot=this.graph.getOutputIndices()[st],it=this._values[ot];if(it===void 0)throw new Error(`required output [${ot}] does not have value`);ot===0?await it.getData():it.data,nt.push(it)}return d.Logger.verbose("ExecPlan","disposing of inferenceHandler"),_e.dispose(),nt})}}},7070:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const d=c(1446),h=c(7778),g=c(9395),_=c(9162),_e=c(2517);var et=g.onnxruntime.experimental.fbs;e.Graph={from:(b,nt)=>new $(b,nt)};class tt{constructor(nt){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,nt&&(this.type=_e.ProtoUtil.tensorValueTypeFromProto(nt.type.tensorType))}get from(){return this._from}get to(){return this._to}}class rt{constructor(nt,st){nt instanceof d.onnx.NodeProto?(this.name=nt.name,this.opType=nt.opType,this.attributes=new h.Attribute(nt.attribute)):nt instanceof et.Node&&(this.name=st??nt.name(),this.opType=nt.opType(),this.attributes=new h.Attribute(_e.ProtoUtil.tensorAttributesFromORTFormat(nt))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class ${constructor(nt,st){if(!nt)throw new TypeError("graph is empty");this.buildGraph(nt),this.transformGraph(st),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(nt){if(nt instanceof d.onnx.GraphProto)this.buildGraphFromOnnxFormat(nt);else{if(!(nt instanceof et.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(nt)}}buildGraphFromOnnxFormat(nt){const st=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const ot=new Map;if(!nt.input)throw new Error("missing information in graph: input");const it=[];for(const at of nt.input){if(st.has(at.name))throw new Error(`duplicated input name: ${at.name}`);const lt=this._allData.push(new tt(at))-1;st.set(at.name,lt),it.push(at.name)}if(!nt.initializer)throw new Error("missing information in graph: initializer");for(const at of nt.initializer){let lt=st.get(at.name);if(lt===void 0){const dt=new tt;dt.type={shape:{dims:_e.ProtoUtil.tensorDimsFromProto(at.dims)},tensorType:_e.ProtoUtil.tensorDataTypeFromProto(at.dataType)},lt=this._allData.push(dt)-1,st.set(at.name,lt)}this._allData[lt]._from=-1,this._allData[lt].tensor=_.Tensor.fromProto(at)}for(let at=0;at<this._allData.length;at++)this._allData[at].tensor||(this._allInputIndices.push(at),this._allInputNames.push(it[at]));if(!nt.output)throw new Error("missing information in graph: output");for(const at of nt.output){if(st.has(at.name))throw new Error(`duplicated output name: ${at.name}`);const lt=this._allData.push(new tt(at))-1;st.set(at.name,lt),this._allOutputIndices.push(lt),this._allOutputNames.push(at.name)}if(!nt.node)throw new Error("missing information in graph: node");for(const at of nt.node){if(!at.name)for(let dt=0;;dt++){const ht=`unnamed_${at.opType}_${dt}`;if(!ot.has(ht)){at.name=ht;break}}if(ot.has(at.name))throw new Error(`duplicated node name: ${at.name}`);const lt=this._nodes.push(new rt(at))-1;ot.set(at.name,lt)}for(let at=0;at<this._nodes.length;at++){const lt=this._nodes[at],dt=nt.node[at];if(!dt.output)throw new Error(`missing output for node: ${dt.name}`);for(const ht of dt.output){let pt=st.get(ht);if(pt===void 0&&(pt=this._allData.push(new tt)-1,st.set(ht,pt)),lt.outputs.push(pt),this._allData[pt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${pt}`);if(this._allData[pt]._from=at,dt.opType==="Constant"){if(!dt.attribute||dt.attribute.length!==1||!dt.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!dt.output||dt.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");lt.outputs.pop(),lt.executeNode=!1,this._allData[pt]._from=-1,this._allData[pt].tensor=_.Tensor.fromProto(dt.attribute[0].t)}}}for(let at=0;at<this._nodes.length;at++){const lt=this._nodes[at],dt=nt.node[at];if(!dt.input)throw new Error(`missing input for node: ${dt.name}`);for(const ht of dt.input){const pt=st.get(ht);if(pt===void 0){if(ht===""&&dt.input.length===3&&dt.opType==="Resize")continue;throw new Error(`unrecognized input '${ht}' for node: ${dt.name}`)}lt.inputs.push(pt),this._allData[pt]._to.push(at)}}return!0}buildGraphFromOrtFormat(nt){var st,ot,it;const at=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const lt=new Map,dt=[];for(let ht=0;ht<nt.inputsLength();ht++){const pt=nt.inputs(ht);if(at.has(pt))throw new Error(`duplicated input name: ${pt}`);for(let mt=0;mt<nt.nodeArgsLength();mt++)if(((st=nt.nodeArgs(mt))===null||st===void 0?void 0:st.name())===pt){const yt=new tt;if(((it=(ot=nt.nodeArgs(mt))===null||ot===void 0?void 0:ot.type())===null||it===void 0?void 0:it.valueType())!==et.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const xt=nt.nodeArgs(mt).type().value(new et.TensorTypeAndShape),gt=_e.ProtoUtil.tensorDataTypeFromProto(xt.elemType()),bt=xt.shape(),jt=[];for(let Pt=0;Pt<bt.dimLength();Pt++)jt.push(_e.LongUtil.longToNumber(bt.dim(Pt).value().dimValue()));yt.type={shape:{dims:jt},tensorType:gt};const Mt=this._allData.push(yt)-1;at.set(pt,Mt),dt.push(pt)}}for(let ht=0;ht<nt.initializersLength();ht++){const pt=nt.initializers(ht);let mt=at.get(pt.name());if(mt===void 0){const yt=new tt,xt=_e.ProtoUtil.tensorDimsFromORTFormat(pt),gt=_e.ProtoUtil.tensorDataTypeFromProto(pt.dataType());yt.type={shape:{dims:xt},tensorType:gt},mt=this._allData.push(yt)-1,at.set(pt.name(),mt)}this._allData[mt]._from=-1,this._allData[mt].tensor=_.Tensor.fromOrtTensor(pt)}for(let ht=0;ht<this._allData.length;ht++)this._allData[ht].tensor||(this._allInputIndices.push(ht),this._allInputNames.push(dt[ht]));for(let ht=0;ht<nt.outputsLength();ht++){const pt=nt.outputs(ht);if(at.has(pt))throw new Error(`duplicated output name: ${pt}`);const mt=this._allData.push(new tt)-1;at.set(pt,mt),this._allOutputIndices.push(mt),this._allOutputNames.push(pt)}if(!nt.nodes)throw new Error("missing information in graph: node");for(let ht=0;ht<nt.nodesLength();ht++){const pt=nt.nodes(ht);let mt=pt.name();if(!mt)for(let xt=0;mt=`unnamed_${pt.opType()}_${xt}`,lt.has(mt);xt++);if(lt.has(mt))throw new Error(`duplicated node name: ${mt}`);const yt=this._nodes.push(new rt(pt,mt))-1;lt.set(mt,yt)}for(let ht=0;ht<this._nodes.length;ht++){const pt=this._nodes[ht],mt=nt.nodes(ht);if(mt==null)throw new Error(`No node exists at index ${ht}`);if((mt==null?void 0:mt.outputsLength())===0)throw new Error(`missing output for node: ${mt.name}`);for(let yt=0;yt<(mt==null?void 0:mt.outputsLength());yt++){const xt=mt==null?void 0:mt.outputs(yt);let gt=at.get(xt);if(gt===void 0&&(gt=this._allData.push(new tt)-1,at.set(xt,gt)),pt.outputs.push(gt),this._allData[gt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${gt}`);if(this._allData[gt]._from=ht,mt.opType()==="Constant"){if(mt.attributesLength()!==1||!mt.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(mt.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");pt.outputs.pop(),pt.executeNode=!1,this._allData[gt]._from=-1,this._allData[gt].tensor=_.Tensor.fromOrtTensor(mt.attributes(0).t())}}}for(let ht=0;ht<this._nodes.length;ht++){const pt=this._nodes[ht],mt=nt.nodes(ht);if(mt.inputsLength()===0)throw new Error(`missing input for node: ${mt.name}`);for(let yt=0;yt<mt.inputsLength();yt++){const xt=mt.inputs(yt),gt=at.get(xt);if(gt===void 0)throw new Error(`unrecognized input '${xt}' for node: ${mt.name()}`);pt.inputs.push(gt),this._allData[gt]._to.push(ht)}}}checkIsAcyclic(){const nt=new Set;this._allInputIndices.forEach(it=>{this._allData[it]._to.forEach(at=>{nt.add(at)})});const st=Array.from(nt),ot=new Array(this._nodes.length).fill("white");for(;st.length>0;){const it=st.pop();ot[it]==="gray"?ot[it]="black":(st.push(it),ot[it]="gray",this._nodes[it].outputs.forEach(at=>{const lt=this._allData[at];if(lt.tensor!==void 0)throw new Error("node outputs should not be initialized");if(lt._from!==it)throw new Error("from property of the Value object doesn't match index of Node being processed");lt._to.forEach(dt=>{if(ot[dt]==="gray")throw new Error("model graph is cyclic");ot[dt]==="white"&&st.push(dt)})}))}}transformGraph(nt){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),nt&&nt.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let nt=0;for(let st=0;st<this._nodes.length;st++)this._nodes[st].executeNode?nt>0&&(this._nodes[st].inputs.forEach(ot=>{const it=this._allData[ot]._to.indexOf(st+nt);it!==-1&&(this._allData[ot]._to[it]=st)}),this._nodes[st].outputs.forEach(ot=>{this._allData[ot]._from&&this._allData[ot]._from===st+nt&&(this._allData[ot]._from=st)})):(nt++,this._nodes[st].outputs.forEach(ot=>{this._allData[ot]._from=-2}),this._nodes.splice(st,1),st--);nt=0;for(let st=0;st<this._allData.length;st++)if(this._allData[st].from!==-2||this._allOutputIndices.indexOf(st+nt)!==-1){if(nt>0){let ot=-1;this._allData[st].from!==void 0&&this._allData[st].from!==-1?(ot=this._nodes[this._allData[st].from].outputs.indexOf(st+nt),ot!==-1&&(this._nodes[this._allData[st].from].outputs[ot]=st)):(ot=this._allInputIndices.indexOf(st+nt),ot!==-1&&(this._allInputIndices[ot]=st)),this._allData[st].to.forEach(it=>{ot=this._nodes[it].inputs.indexOf(st+nt),ot!==-1&&(this._nodes[it].inputs[ot]=st)}),this._allData[st].to.length===0&&(ot=this._allOutputIndices.indexOf(st+nt),ot!==-1&&(this._allOutputIndices[ot]=st))}}else nt++,this._allData.splice(st,1),st--}deleteNode(nt){const st=this._nodes[nt];if(st.outputs.length>1){for(let ht=1;ht<st.outputs.length;ht++)if(this._allData[st.outputs[ht]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}st.executeNode=!1;const ot=st.inputs[0],it=st.outputs[0],at=this._allData[it].to,lt=this._allData[ot].to.indexOf(nt);if(lt===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[ot].to.splice(lt,1),this._allData[it]._to=[];const dt=this._allOutputIndices.indexOf(it);if(dt!==-1&&(this._allOutputIndices[dt]=ot),at&&at.length>0)for(const ht of at){const pt=this._nodes[ht].inputs.indexOf(it);if(pt===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[ht].inputs[pt]=ot,this._allData[ot].to.push(ht)}}removeAllDropoutNodes(){let nt=0;for(const st of this._nodes){if(st.opType==="Dropout"){if(st.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(st.outputs.length!==1&&st.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(st.outputs.length===2&&this._allData[st.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(nt)}nt++}}removeAllIdentityNodes(){let nt=0;for(const st of this._nodes)st.opType==="Identity"&&this.deleteNode(nt),nt++}isActivation(nt){switch(nt.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const nt of this._nodes)if(nt.opType==="Conv"){const st=this._allData[nt.outputs[0]]._to;if(st.length===1&&this.isActivation(this._nodes[st[0]])){const ot=this._nodes[st[0]];if(ot.opType==="Clip")if(ot.inputs.length===1)try{nt.attributes.set("activation_params","floats",[ot.attributes.getFloat("min"),ot.attributes.getFloat("max")])}catch{nt.attributes.set("activation_params","floats",[_e.MIN_CLIP,_e.MAX_CLIP])}else{if(!(ot.inputs.length>=3&&this._allData[ot.inputs[1]].tensor!==void 0&&this._allData[ot.inputs[2]].tensor!==void 0))continue;nt.attributes.set("activation_params","floats",[this._allData[ot.inputs[1]].tensor.floatData[0],this._allData[ot.inputs[2]].tensor.floatData[0]])}nt.attributes.set("activation","string",ot.opType),this.deleteNode(st[0])}}}}},6231:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const c={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},d={none:new class{log(rt,$,b){}},console:new class{log(rt,$,b){console.log(`${this.color(rt)} ${b?"\x1B[35m"+b+"\x1B[0m ":""}${$}`)}color(rt){switch(rt){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${rt}`)}}}},h={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let g={"":h};function _(rt,$,b,nt){if($===void 0)return st=rt,{verbose:_.verbose.bind(null,st),info:_.info.bind(null,st),warning:_.warning.bind(null,st),error:_.error.bind(null,st),fatal:_.fatal.bind(null,st)};if(b===void 0)_e(rt,$);else if(typeof b=="number"&&nt===void 0)_e(rt,$);else if(typeof b=="string"&&nt===void 0)_e(rt,b,0,$);else{if(typeof b!="string"||typeof nt!="number")throw new TypeError("input is valid");_e(rt,b,0,$)}var st}function _e(rt,$,b,nt){const st=g[nt||""]||g[""];c[rt]<c[st.minimalSeverity]||(st.logDateTime&&($=`${new Date().toISOString()}|${$}`),st.logSourceLocation,d[st.provider].log(rt,$,nt))}(function(rt){function $(nt){g={},b("",nt||{})}function b(nt,st){if(nt==="*")$(st);else{const ot=g[nt]||h;g[nt]={provider:st.provider||ot.provider,minimalSeverity:st.minimalSeverity||ot.minimalSeverity,logDateTime:st.logDateTime===void 0?ot.logDateTime:st.logDateTime,logSourceLocation:st.logSourceLocation===void 0?ot.logSourceLocation:st.logSourceLocation}}}rt.verbose=function(nt,st){rt("verbose",nt,st)},rt.info=function(nt,st){rt("info",nt,st)},rt.warning=function(nt,st){rt("warning",nt,st)},rt.error=function(nt,st){rt("error",nt,st)},rt.fatal=function(nt,st){rt("fatal",nt,st)},rt.reset=$,rt.set=b,rt.setWithEnv=function(nt){const st={};nt.logLevel&&(st.minimalSeverity=nt.logLevel),b("",st)}})(_||(_={})),e.Logger=_;class et{constructor($,b,nt,st,ot,it){this.category=$,this.name=b,this.startTime=nt,this.endCallback=st,this.timer=ot,this.ctx=it}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class tt{constructor($,b,nt,st){this.category=$,this.name=b,this.startTime=nt,this.endTime=st}}e.Profiler=class{static create(rt){return rt===void 0?new this:new this(rt.maxNumberEvents,rt.flushBatchSize,rt.flushIntervalInMilliseconds)}constructor(rt,$,b){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=rt===void 0?1e4:rt,this._flushBatchSize=$===void 0?10:$,this._flushIntervalInMilliseconds=b===void 0?5e3:b}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(rt,$,b,nt){const st=this._started?this.begin(rt,$,nt):void 0;let ot=!1;const it=b();if(it&&typeof it.then=="function")return ot=!0,new Promise((at,lt)=>{it.then(async dt=>{st&&await st.end(),at(dt)},async dt=>{st&&await st.end(),lt(dt)})});if(!ot&&st){const at=st.end();if(at&&typeof at.then=="function")return new Promise((lt,dt)=>{at.then(()=>{lt(it)},ht=>{dt(ht)})})}return it}begin(rt,$,b){if(!this._started)throw new Error("profiler is not started yet");if(b===void 0){const nt=(0,e.now)();return this.flush(nt),new et(rt,$,nt,st=>this.endSync(st))}{const nt=b.beginTimer();return new et(rt,$,0,async st=>this.end(st),nt,b)}}async end(rt){const $=await rt.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new tt(rt.category,rt.name,rt.startTime,$)),this.flush($))}endSync(rt){const $=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new tt(rt.category,rt.name,rt.startTime,$)),this.flush($))}logOneEvent(rt){e.Logger.verbose(`Profiler.${rt.category}`,`${(rt.endTime-rt.startTime).toFixed(2)}ms on event '${rt.name}' at ${rt.endTime.toFixed(2)}`)}flush(rt){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||rt-this._flushTime>=this._flushIntervalInMilliseconds){for(const $=this._flushPointer;this._flushPointer<$+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const d=c(5686),h=c(1446),g=c(7070),_=c(9395),_e=c(2517);var et=_.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(tt,rt,$){if(!$)try{return void this.loadFromOnnxFormat(tt,rt)}catch(b){if($!==void 0)throw b}this.loadFromOrtFormat(tt,rt)}loadFromOnnxFormat(tt,rt){const $=h.onnx.ModelProto.decode(tt);if(_e.LongUtil.longToNumber($.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=$.opsetImport.map(b=>({domain:b.domain,version:_e.LongUtil.longToNumber(b.version)})),this._graph=g.Graph.from($.graph,rt)}loadFromOrtFormat(tt,rt){const $=new d.flatbuffers.ByteBuffer(tt),b=et.InferenceSession.getRootAsInferenceSession($).model();if(_e.LongUtil.longToNumber(b.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let nt=0;nt<b.opsetImportLength();nt++){const st=b.opsetImport(nt);this._opsets.push({domain:st==null?void 0:st.domain(),version:_e.LongUtil.longToNumber(st.version())})}this._graph=g.Graph.from(b.graph(),rt)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(a,e)=>{function c(d,h){if(h.endsWith("+")){const g=Number.parseInt(h.substring(0,h.length-1),10);return!isNaN(g)&&g<=d}if(h.split("-").length===2){const g=h.split("-"),_=Number.parseInt(g[0],10),_e=Number.parseInt(g[1],10);return!isNaN(_)&&!isNaN(_e)&&_<=d&&d<=_e}return Number.parseInt(h,10)===d}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(d,h,g){for(const _ of g){const _e=_[0],et=_[1],tt=_[2],rt=_[3],$=_[4];if(d.opType===_e){for(const b of h)if((b.domain===et||b.domain==="ai.onnx"&&et==="")&&c(b.version,tt))return{opImpl:rt,opInit:$}}}throw new TypeError(`cannot resolve operator '${d.opType}' with opsets: ${h.map(_=>`${_.domain||"ai.onnx"} v${_.version}`).join(", ")}`)}},9395:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const d=c(5686);var h,g;h=e.onnxruntime||(e.onnxruntime={}),function(_){(function(_e){_e[_e.UNDEFINED=0]="UNDEFINED",_e[_e.FLOAT=1]="FLOAT",_e[_e.INT=2]="INT",_e[_e.STRING=3]="STRING",_e[_e.TENSOR=4]="TENSOR",_e[_e.GRAPH=5]="GRAPH",_e[_e.FLOATS=6]="FLOATS",_e[_e.INTS=7]="INTS",_e[_e.STRINGS=8]="STRINGS",_e[_e.TENSORS=9]="TENSORS",_e[_e.GRAPHS=10]="GRAPHS",_e[_e.SPARSE_TENSOR=11]="SPARSE_TENSOR",_e[_e.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(_.AttributeType||(_.AttributeType={}))}((g=h.experimental||(h.experimental={})).fbs||(g.fbs={})),function(_){(function(_e){(function(et){(function(tt){tt[tt.UNKNOWN=0]="UNKNOWN",tt[tt.VALUE=1]="VALUE",tt[tt.PARAM=2]="PARAM"})(et.DimensionValueType||(et.DimensionValueType={}))})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){(function(tt){tt[tt.UNDEFINED=0]="UNDEFINED",tt[tt.FLOAT=1]="FLOAT",tt[tt.UINT8=2]="UINT8",tt[tt.INT8=3]="INT8",tt[tt.UINT16=4]="UINT16",tt[tt.INT16=5]="INT16",tt[tt.INT32=6]="INT32",tt[tt.INT64=7]="INT64",tt[tt.STRING=8]="STRING",tt[tt.BOOL=9]="BOOL",tt[tt.FLOAT16=10]="FLOAT16",tt[tt.DOUBLE=11]="DOUBLE",tt[tt.UINT32=12]="UINT32",tt[tt.UINT64=13]="UINT64",tt[tt.COMPLEX64=14]="COMPLEX64",tt[tt.COMPLEX128=15]="COMPLEX128",tt[tt.BFLOAT16=16]="BFLOAT16"})(et.TensorDataType||(et.TensorDataType={}))})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){(function(tt){tt[tt.Primitive=0]="Primitive",tt[tt.Fused=1]="Fused"})(et.NodeType||(et.NodeType={}))})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){(function(tt){tt[tt.NONE=0]="NONE",tt[tt.tensor_type=1]="tensor_type",tt[tt.sequence_type=2]="sequence_type",tt[tt.map_type=3]="map_type"})(et.TypeInfoValue||(et.TypeInfoValue={}))})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsShape($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsShape($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}dim($,b){let nt=this.bb.__offset(this.bb_pos,4);return nt?(b||new _.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}dimLength(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.__vector_len(this.bb_pos+$):0}static startShape($){$.startObject(1)}static addDim($,b){$.addFieldOffset(0,b,0)}static createDimVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startDimVector($,b){$.startVector(4,b,4)}static endShape($){return $.endObject()}static createShape($,b){return tt.startShape($),tt.addDim($,b),tt.endShape($)}}et.Shape=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsDimension($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsDimension($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}value($){let b=this.bb.__offset(this.bb_pos,4);return b?($||new _.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}denotation($){let b=this.bb.__offset(this.bb_pos,6);return b?this.bb.__string(this.bb_pos+b,$):null}static startDimension($){$.startObject(2)}static addValue($,b){$.addFieldOffset(0,b,0)}static addDenotation($,b){$.addFieldOffset(1,b,0)}static endDimension($){return $.endObject()}static createDimension($,b,nt){return tt.startDimension($),tt.addValue($,b),tt.addDenotation($,nt),tt.endDimension($)}}et.Dimension=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsDimensionValue($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsDimensionValue($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}dimType(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.readInt8(this.bb_pos+$):_.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.readInt64(this.bb_pos+$):this.bb.createLong(0,0)}dimParam($){let b=this.bb.__offset(this.bb_pos,8);return b?this.bb.__string(this.bb_pos+b,$):null}static startDimensionValue($){$.startObject(3)}static addDimType($,b){$.addFieldInt8(0,b,_.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue($,b){$.addFieldInt64(1,b,$.createLong(0,0))}static addDimParam($,b){$.addFieldOffset(2,b,0)}static endDimensionValue($){return $.endObject()}static createDimensionValue($,b,nt,st){return tt.startDimensionValue($),tt.addDimType($,b),tt.addDimValue($,nt),tt.addDimParam($,st),tt.endDimensionValue($)}}et.DimensionValue=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsTensorTypeAndShape($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsTensorTypeAndShape($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}elemType(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.readInt32(this.bb_pos+$):_.experimental.fbs.TensorDataType.UNDEFINED}shape($){let b=this.bb.__offset(this.bb_pos,6);return b?($||new _.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}static startTensorTypeAndShape($){$.startObject(2)}static addElemType($,b){$.addFieldInt32(0,b,_.experimental.fbs.TensorDataType.UNDEFINED)}static addShape($,b){$.addFieldOffset(1,b,0)}static endTensorTypeAndShape($){return $.endObject()}static createTensorTypeAndShape($,b,nt){return tt.startTensorTypeAndShape($),tt.addElemType($,b),tt.addShape($,nt),tt.endTensorTypeAndShape($)}}et.TensorTypeAndShape=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsMapType($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsMapType($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}keyType(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.readInt32(this.bb_pos+$):_.experimental.fbs.TensorDataType.UNDEFINED}valueType($){let b=this.bb.__offset(this.bb_pos,6);return b?($||new _.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}static startMapType($){$.startObject(2)}static addKeyType($,b){$.addFieldInt32(0,b,_.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType($,b){$.addFieldOffset(1,b,0)}static endMapType($){return $.endObject()}static createMapType($,b,nt){return tt.startMapType($),tt.addKeyType($,b),tt.addValueType($,nt),tt.endMapType($)}}et.MapType=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsSequenceType($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsSequenceType($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}elemType($){let b=this.bb.__offset(this.bb_pos,4);return b?($||new _.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}static startSequenceType($){$.startObject(1)}static addElemType($,b){$.addFieldOffset(0,b,0)}static endSequenceType($){return $.endObject()}static createSequenceType($,b){return tt.startSequenceType($),tt.addElemType($,b),tt.endSequenceType($)}}et.SequenceType=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(_e.fbs||(_e.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(et,tt){return this.bb_pos=et,this.bb=tt,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(et,tt,rt,$){return et.prep(4,12),et.writeInt32($),et.writeInt32(rt),et.writeInt32(tt),et.offset()}}})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsNodeEdge($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsNodeEdge($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}nodeIndex(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.readUint32(this.bb_pos+$):0}inputEdges($,b){let nt=this.bb.__offset(this.bb_pos,6);return nt?(b||new _.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+nt)+12*$,this.bb):null}inputEdgesLength(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.__vector_len(this.bb_pos+$):0}outputEdges($,b){let nt=this.bb.__offset(this.bb_pos,8);return nt?(b||new _.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+nt)+12*$,this.bb):null}outputEdgesLength(){let $=this.bb.__offset(this.bb_pos,8);return $?this.bb.__vector_len(this.bb_pos+$):0}static startNodeEdge($){$.startObject(3)}static addNodeIndex($,b){$.addFieldInt32(0,b,0)}static addInputEdges($,b){$.addFieldOffset(1,b,0)}static startInputEdgesVector($,b){$.startVector(12,b,4)}static addOutputEdges($,b){$.addFieldOffset(2,b,0)}static startOutputEdgesVector($,b){$.startVector(12,b,4)}static endNodeEdge($){return $.endObject()}static createNodeEdge($,b,nt,st){return tt.startNodeEdge($),tt.addNodeIndex($,b),tt.addInputEdges($,nt),tt.addOutputEdges($,st),tt.endNodeEdge($)}}et.NodeEdge=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsNode($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsNode($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}name($){let b=this.bb.__offset(this.bb_pos,4);return b?this.bb.__string(this.bb_pos+b,$):null}docString($){let b=this.bb.__offset(this.bb_pos,6);return b?this.bb.__string(this.bb_pos+b,$):null}domain($){let b=this.bb.__offset(this.bb_pos,8);return b?this.bb.__string(this.bb_pos+b,$):null}sinceVersion(){let $=this.bb.__offset(this.bb_pos,10);return $?this.bb.readInt32(this.bb_pos+$):0}index(){let $=this.bb.__offset(this.bb_pos,12);return $?this.bb.readUint32(this.bb_pos+$):0}opType($){let b=this.bb.__offset(this.bb_pos,14);return b?this.bb.__string(this.bb_pos+b,$):null}type(){let $=this.bb.__offset(this.bb_pos,16);return $?this.bb.readInt32(this.bb_pos+$):_.experimental.fbs.NodeType.Primitive}executionProviderType($){let b=this.bb.__offset(this.bb_pos,18);return b?this.bb.__string(this.bb_pos+b,$):null}inputs($,b){let nt=this.bb.__offset(this.bb_pos,20);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,b):null}inputsLength(){let $=this.bb.__offset(this.bb_pos,20);return $?this.bb.__vector_len(this.bb_pos+$):0}outputs($,b){let nt=this.bb.__offset(this.bb_pos,22);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,b):null}outputsLength(){let $=this.bb.__offset(this.bb_pos,22);return $?this.bb.__vector_len(this.bb_pos+$):0}attributes($,b){let nt=this.bb.__offset(this.bb_pos,24);return nt?(b||new _.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}attributesLength(){let $=this.bb.__offset(this.bb_pos,24);return $?this.bb.__vector_len(this.bb_pos+$):0}inputArgCounts($){let b=this.bb.__offset(this.bb_pos,26);return b?this.bb.readInt32(this.bb.__vector(this.bb_pos+b)+4*$):0}inputArgCountsLength(){let $=this.bb.__offset(this.bb_pos,26);return $?this.bb.__vector_len(this.bb_pos+$):0}inputArgCountsArray(){let $=this.bb.__offset(this.bb_pos,26);return $?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+$),this.bb.__vector_len(this.bb_pos+$)):null}implicitInputs($,b){let nt=this.bb.__offset(this.bb_pos,28);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,b):null}implicitInputsLength(){let $=this.bb.__offset(this.bb_pos,28);return $?this.bb.__vector_len(this.bb_pos+$):0}static startNode($){$.startObject(13)}static addName($,b){$.addFieldOffset(0,b,0)}static addDocString($,b){$.addFieldOffset(1,b,0)}static addDomain($,b){$.addFieldOffset(2,b,0)}static addSinceVersion($,b){$.addFieldInt32(3,b,0)}static addIndex($,b){$.addFieldInt32(4,b,0)}static addOpType($,b){$.addFieldOffset(5,b,0)}static addType($,b){$.addFieldInt32(6,b,_.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType($,b){$.addFieldOffset(7,b,0)}static addInputs($,b){$.addFieldOffset(8,b,0)}static createInputsVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startInputsVector($,b){$.startVector(4,b,4)}static addOutputs($,b){$.addFieldOffset(9,b,0)}static createOutputsVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startOutputsVector($,b){$.startVector(4,b,4)}static addAttributes($,b){$.addFieldOffset(10,b,0)}static createAttributesVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startAttributesVector($,b){$.startVector(4,b,4)}static addInputArgCounts($,b){$.addFieldOffset(11,b,0)}static createInputArgCountsVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addInt32(b[nt]);return $.endVector()}static startInputArgCountsVector($,b){$.startVector(4,b,4)}static addImplicitInputs($,b){$.addFieldOffset(12,b,0)}static createImplicitInputsVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startImplicitInputsVector($,b){$.startVector(4,b,4)}static endNode($){return $.endObject()}static createNode($,b,nt,st,ot,it,at,lt,dt,ht,pt,mt,yt,xt){return tt.startNode($),tt.addName($,b),tt.addDocString($,nt),tt.addDomain($,st),tt.addSinceVersion($,ot),tt.addIndex($,it),tt.addOpType($,at),tt.addType($,lt),tt.addExecutionProviderType($,dt),tt.addInputs($,ht),tt.addOutputs($,pt),tt.addAttributes($,mt),tt.addInputArgCounts($,yt),tt.addImplicitInputs($,xt),tt.endNode($)}}et.Node=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsValueInfo($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsValueInfo($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}name($){let b=this.bb.__offset(this.bb_pos,4);return b?this.bb.__string(this.bb_pos+b,$):null}docString($){let b=this.bb.__offset(this.bb_pos,6);return b?this.bb.__string(this.bb_pos+b,$):null}type($){let b=this.bb.__offset(this.bb_pos,8);return b?($||new _.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}static startValueInfo($){$.startObject(3)}static addName($,b){$.addFieldOffset(0,b,0)}static addDocString($,b){$.addFieldOffset(1,b,0)}static addType($,b){$.addFieldOffset(2,b,0)}static endValueInfo($){return $.endObject()}static createValueInfo($,b,nt,st){return tt.startValueInfo($),tt.addName($,b),tt.addDocString($,nt),tt.addType($,st),tt.endValueInfo($)}}et.ValueInfo=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsTypeInfo($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsTypeInfo($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}denotation($){let b=this.bb.__offset(this.bb_pos,4);return b?this.bb.__string(this.bb_pos+b,$):null}valueType(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.readUint8(this.bb_pos+$):_.experimental.fbs.TypeInfoValue.NONE}value($){let b=this.bb.__offset(this.bb_pos,8);return b?this.bb.__union($,this.bb_pos+b):null}static startTypeInfo($){$.startObject(3)}static addDenotation($,b){$.addFieldOffset(0,b,0)}static addValueType($,b){$.addFieldInt8(1,b,_.experimental.fbs.TypeInfoValue.NONE)}static addValue($,b){$.addFieldOffset(2,b,0)}static endTypeInfo($){return $.endObject()}static createTypeInfo($,b,nt,st){return tt.startTypeInfo($),tt.addDenotation($,b),tt.addValueType($,nt),tt.addValue($,st),tt.endTypeInfo($)}}et.TypeInfo=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsOperatorSetId($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsOperatorSetId($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}domain($){let b=this.bb.__offset(this.bb_pos,4);return b?this.bb.__string(this.bb_pos+b,$):null}version(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.readInt64(this.bb_pos+$):this.bb.createLong(0,0)}static startOperatorSetId($){$.startObject(2)}static addDomain($,b){$.addFieldOffset(0,b,0)}static addVersion($,b){$.addFieldInt64(1,b,$.createLong(0,0))}static endOperatorSetId($){return $.endObject()}static createOperatorSetId($,b,nt){return tt.startOperatorSetId($),tt.addDomain($,b),tt.addVersion($,nt),tt.endOperatorSetId($)}}et.OperatorSetId=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsTensor($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsTensor($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}name($){let b=this.bb.__offset(this.bb_pos,4);return b?this.bb.__string(this.bb_pos+b,$):null}docString($){let b=this.bb.__offset(this.bb_pos,6);return b?this.bb.__string(this.bb_pos+b,$):null}dims($){let b=this.bb.__offset(this.bb_pos,8);return b?this.bb.readInt64(this.bb.__vector(this.bb_pos+b)+8*$):this.bb.createLong(0,0)}dimsLength(){let $=this.bb.__offset(this.bb_pos,8);return $?this.bb.__vector_len(this.bb_pos+$):0}dataType(){let $=this.bb.__offset(this.bb_pos,10);return $?this.bb.readInt32(this.bb_pos+$):_.experimental.fbs.TensorDataType.UNDEFINED}rawData($){let b=this.bb.__offset(this.bb_pos,12);return b?this.bb.readUint8(this.bb.__vector(this.bb_pos+b)+$):0}rawDataLength(){let $=this.bb.__offset(this.bb_pos,12);return $?this.bb.__vector_len(this.bb_pos+$):0}rawDataArray(){let $=this.bb.__offset(this.bb_pos,12);return $?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+$),this.bb.__vector_len(this.bb_pos+$)):null}stringData($,b){let nt=this.bb.__offset(this.bb_pos,14);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,b):null}stringDataLength(){let $=this.bb.__offset(this.bb_pos,14);return $?this.bb.__vector_len(this.bb_pos+$):0}static startTensor($){$.startObject(6)}static addName($,b){$.addFieldOffset(0,b,0)}static addDocString($,b){$.addFieldOffset(1,b,0)}static addDims($,b){$.addFieldOffset(2,b,0)}static createDimsVector($,b){$.startVector(8,b.length,8);for(let nt=b.length-1;nt>=0;nt--)$.addInt64(b[nt]);return $.endVector()}static startDimsVector($,b){$.startVector(8,b,8)}static addDataType($,b){$.addFieldInt32(3,b,_.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData($,b){$.addFieldOffset(4,b,0)}static createRawDataVector($,b){$.startVector(1,b.length,1);for(let nt=b.length-1;nt>=0;nt--)$.addInt8(b[nt]);return $.endVector()}static startRawDataVector($,b){$.startVector(1,b,1)}static addStringData($,b){$.addFieldOffset(5,b,0)}static createStringDataVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startStringDataVector($,b){$.startVector(4,b,4)}static endTensor($){return $.endObject()}static createTensor($,b,nt,st,ot,it,at){return tt.startTensor($),tt.addName($,b),tt.addDocString($,nt),tt.addDims($,st),tt.addDataType($,ot),tt.addRawData($,it),tt.addStringData($,at),tt.endTensor($)}}et.Tensor=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsSparseTensor($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsSparseTensor($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}values($){let b=this.bb.__offset(this.bb_pos,4);return b?($||new _.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}indices($){let b=this.bb.__offset(this.bb_pos,6);return b?($||new _.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}dims($){let b=this.bb.__offset(this.bb_pos,8);return b?this.bb.readInt64(this.bb.__vector(this.bb_pos+b)+8*$):this.bb.createLong(0,0)}dimsLength(){let $=this.bb.__offset(this.bb_pos,8);return $?this.bb.__vector_len(this.bb_pos+$):0}static startSparseTensor($){$.startObject(3)}static addValues($,b){$.addFieldOffset(0,b,0)}static addIndices($,b){$.addFieldOffset(1,b,0)}static addDims($,b){$.addFieldOffset(2,b,0)}static createDimsVector($,b){$.startVector(8,b.length,8);for(let nt=b.length-1;nt>=0;nt--)$.addInt64(b[nt]);return $.endVector()}static startDimsVector($,b){$.startVector(8,b,8)}static endSparseTensor($){return $.endObject()}static createSparseTensor($,b,nt,st){return tt.startSparseTensor($),tt.addValues($,b),tt.addIndices($,nt),tt.addDims($,st),tt.endSparseTensor($)}}et.SparseTensor=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsAttribute($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsAttribute($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}name($){let b=this.bb.__offset(this.bb_pos,4);return b?this.bb.__string(this.bb_pos+b,$):null}docString($){let b=this.bb.__offset(this.bb_pos,6);return b?this.bb.__string(this.bb_pos+b,$):null}type(){let $=this.bb.__offset(this.bb_pos,8);return $?this.bb.readInt32(this.bb_pos+$):_.experimental.fbs.AttributeType.UNDEFINED}f(){let $=this.bb.__offset(this.bb_pos,10);return $?this.bb.readFloat32(this.bb_pos+$):0}i(){let $=this.bb.__offset(this.bb_pos,12);return $?this.bb.readInt64(this.bb_pos+$):this.bb.createLong(0,0)}s($){let b=this.bb.__offset(this.bb_pos,14);return b?this.bb.__string(this.bb_pos+b,$):null}t($){let b=this.bb.__offset(this.bb_pos,16);return b?($||new _.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}g($){let b=this.bb.__offset(this.bb_pos,18);return b?($||new _.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}floats($){let b=this.bb.__offset(this.bb_pos,20);return b?this.bb.readFloat32(this.bb.__vector(this.bb_pos+b)+4*$):0}floatsLength(){let $=this.bb.__offset(this.bb_pos,20);return $?this.bb.__vector_len(this.bb_pos+$):0}floatsArray(){let $=this.bb.__offset(this.bb_pos,20);return $?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+$),this.bb.__vector_len(this.bb_pos+$)):null}ints($){let b=this.bb.__offset(this.bb_pos,22);return b?this.bb.readInt64(this.bb.__vector(this.bb_pos+b)+8*$):this.bb.createLong(0,0)}intsLength(){let $=this.bb.__offset(this.bb_pos,22);return $?this.bb.__vector_len(this.bb_pos+$):0}strings($,b){let nt=this.bb.__offset(this.bb_pos,24);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,b):null}stringsLength(){let $=this.bb.__offset(this.bb_pos,24);return $?this.bb.__vector_len(this.bb_pos+$):0}tensors($,b){let nt=this.bb.__offset(this.bb_pos,26);return nt?(b||new _.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}tensorsLength(){let $=this.bb.__offset(this.bb_pos,26);return $?this.bb.__vector_len(this.bb_pos+$):0}graphs($,b){let nt=this.bb.__offset(this.bb_pos,28);return nt?(b||new _.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}graphsLength(){let $=this.bb.__offset(this.bb_pos,28);return $?this.bb.__vector_len(this.bb_pos+$):0}static startAttribute($){$.startObject(13)}static addName($,b){$.addFieldOffset(0,b,0)}static addDocString($,b){$.addFieldOffset(1,b,0)}static addType($,b){$.addFieldInt32(2,b,_.experimental.fbs.AttributeType.UNDEFINED)}static addF($,b){$.addFieldFloat32(3,b,0)}static addI($,b){$.addFieldInt64(4,b,$.createLong(0,0))}static addS($,b){$.addFieldOffset(5,b,0)}static addT($,b){$.addFieldOffset(6,b,0)}static addG($,b){$.addFieldOffset(7,b,0)}static addFloats($,b){$.addFieldOffset(8,b,0)}static createFloatsVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addFloat32(b[nt]);return $.endVector()}static startFloatsVector($,b){$.startVector(4,b,4)}static addInts($,b){$.addFieldOffset(9,b,0)}static createIntsVector($,b){$.startVector(8,b.length,8);for(let nt=b.length-1;nt>=0;nt--)$.addInt64(b[nt]);return $.endVector()}static startIntsVector($,b){$.startVector(8,b,8)}static addStrings($,b){$.addFieldOffset(10,b,0)}static createStringsVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startStringsVector($,b){$.startVector(4,b,4)}static addTensors($,b){$.addFieldOffset(11,b,0)}static createTensorsVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startTensorsVector($,b){$.startVector(4,b,4)}static addGraphs($,b){$.addFieldOffset(12,b,0)}static createGraphsVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startGraphsVector($,b){$.startVector(4,b,4)}static endAttribute($){return $.endObject()}static createAttribute($,b,nt,st,ot,it,at,lt,dt,ht,pt,mt,yt,xt){return tt.startAttribute($),tt.addName($,b),tt.addDocString($,nt),tt.addType($,st),tt.addF($,ot),tt.addI($,it),tt.addS($,at),tt.addT($,lt),tt.addG($,dt),tt.addFloats($,ht),tt.addInts($,pt),tt.addStrings($,mt),tt.addTensors($,yt),tt.addGraphs($,xt),tt.endAttribute($)}}et.Attribute=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsGraph($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsGraph($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}initializers($,b){let nt=this.bb.__offset(this.bb_pos,4);return nt?(b||new _.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}initializersLength(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.__vector_len(this.bb_pos+$):0}nodeArgs($,b){let nt=this.bb.__offset(this.bb_pos,6);return nt?(b||new _.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}nodeArgsLength(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.__vector_len(this.bb_pos+$):0}nodes($,b){let nt=this.bb.__offset(this.bb_pos,8);return nt?(b||new _.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}nodesLength(){let $=this.bb.__offset(this.bb_pos,8);return $?this.bb.__vector_len(this.bb_pos+$):0}maxNodeIndex(){let $=this.bb.__offset(this.bb_pos,10);return $?this.bb.readUint32(this.bb_pos+$):0}nodeEdges($,b){let nt=this.bb.__offset(this.bb_pos,12);return nt?(b||new _.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}nodeEdgesLength(){let $=this.bb.__offset(this.bb_pos,12);return $?this.bb.__vector_len(this.bb_pos+$):0}inputs($,b){let nt=this.bb.__offset(this.bb_pos,14);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,b):null}inputsLength(){let $=this.bb.__offset(this.bb_pos,14);return $?this.bb.__vector_len(this.bb_pos+$):0}outputs($,b){let nt=this.bb.__offset(this.bb_pos,16);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,b):null}outputsLength(){let $=this.bb.__offset(this.bb_pos,16);return $?this.bb.__vector_len(this.bb_pos+$):0}sparseInitializers($,b){let nt=this.bb.__offset(this.bb_pos,18);return nt?(b||new _.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}sparseInitializersLength(){let $=this.bb.__offset(this.bb_pos,18);return $?this.bb.__vector_len(this.bb_pos+$):0}static startGraph($){$.startObject(8)}static addInitializers($,b){$.addFieldOffset(0,b,0)}static createInitializersVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startInitializersVector($,b){$.startVector(4,b,4)}static addNodeArgs($,b){$.addFieldOffset(1,b,0)}static createNodeArgsVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startNodeArgsVector($,b){$.startVector(4,b,4)}static addNodes($,b){$.addFieldOffset(2,b,0)}static createNodesVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startNodesVector($,b){$.startVector(4,b,4)}static addMaxNodeIndex($,b){$.addFieldInt32(3,b,0)}static addNodeEdges($,b){$.addFieldOffset(4,b,0)}static createNodeEdgesVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startNodeEdgesVector($,b){$.startVector(4,b,4)}static addInputs($,b){$.addFieldOffset(5,b,0)}static createInputsVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startInputsVector($,b){$.startVector(4,b,4)}static addOutputs($,b){$.addFieldOffset(6,b,0)}static createOutputsVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startOutputsVector($,b){$.startVector(4,b,4)}static addSparseInitializers($,b){$.addFieldOffset(7,b,0)}static createSparseInitializersVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startSparseInitializersVector($,b){$.startVector(4,b,4)}static endGraph($){return $.endObject()}static createGraph($,b,nt,st,ot,it,at,lt,dt){return tt.startGraph($),tt.addInitializers($,b),tt.addNodeArgs($,nt),tt.addNodes($,st),tt.addMaxNodeIndex($,ot),tt.addNodeEdges($,it),tt.addInputs($,at),tt.addOutputs($,lt),tt.addSparseInitializers($,dt),tt.endGraph($)}}et.Graph=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsModel($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsModel($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}irVersion(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.readInt64(this.bb_pos+$):this.bb.createLong(0,0)}opsetImport($,b){let nt=this.bb.__offset(this.bb_pos,6);return nt?(b||new _.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}opsetImportLength(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.__vector_len(this.bb_pos+$):0}producerName($){let b=this.bb.__offset(this.bb_pos,8);return b?this.bb.__string(this.bb_pos+b,$):null}producerVersion($){let b=this.bb.__offset(this.bb_pos,10);return b?this.bb.__string(this.bb_pos+b,$):null}domain($){let b=this.bb.__offset(this.bb_pos,12);return b?this.bb.__string(this.bb_pos+b,$):null}modelVersion(){let $=this.bb.__offset(this.bb_pos,14);return $?this.bb.readInt64(this.bb_pos+$):this.bb.createLong(0,0)}docString($){let b=this.bb.__offset(this.bb_pos,16);return b?this.bb.__string(this.bb_pos+b,$):null}graph($){let b=this.bb.__offset(this.bb_pos,18);return b?($||new _.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}graphDocString($){let b=this.bb.__offset(this.bb_pos,20);return b?this.bb.__string(this.bb_pos+b,$):null}static startModel($){$.startObject(9)}static addIrVersion($,b){$.addFieldInt64(0,b,$.createLong(0,0))}static addOpsetImport($,b){$.addFieldOffset(1,b,0)}static createOpsetImportVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startOpsetImportVector($,b){$.startVector(4,b,4)}static addProducerName($,b){$.addFieldOffset(2,b,0)}static addProducerVersion($,b){$.addFieldOffset(3,b,0)}static addDomain($,b){$.addFieldOffset(4,b,0)}static addModelVersion($,b){$.addFieldInt64(5,b,$.createLong(0,0))}static addDocString($,b){$.addFieldOffset(6,b,0)}static addGraph($,b){$.addFieldOffset(7,b,0)}static addGraphDocString($,b){$.addFieldOffset(8,b,0)}static endModel($){return $.endObject()}static createModel($,b,nt,st,ot,it,at,lt,dt,ht){return tt.startModel($),tt.addIrVersion($,b),tt.addOpsetImport($,nt),tt.addProducerName($,st),tt.addProducerVersion($,ot),tt.addDomain($,it),tt.addModelVersion($,at),tt.addDocString($,lt),tt.addGraph($,dt),tt.addGraphDocString($,ht),tt.endModel($)}}et.Model=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsKernelCreateInfos($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsKernelCreateInfos($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}nodeIndices($){let b=this.bb.__offset(this.bb_pos,4);return b?this.bb.readUint32(this.bb.__vector(this.bb_pos+b)+4*$):0}nodeIndicesLength(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.__vector_len(this.bb_pos+$):0}nodeIndicesArray(){let $=this.bb.__offset(this.bb_pos,4);return $?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+$),this.bb.__vector_len(this.bb_pos+$)):null}kernelDefHashes($){let b=this.bb.__offset(this.bb_pos,6);return b?this.bb.readUint64(this.bb.__vector(this.bb_pos+b)+8*$):this.bb.createLong(0,0)}kernelDefHashesLength(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.__vector_len(this.bb_pos+$):0}static startKernelCreateInfos($){$.startObject(2)}static addNodeIndices($,b){$.addFieldOffset(0,b,0)}static createNodeIndicesVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addInt32(b[nt]);return $.endVector()}static startNodeIndicesVector($,b){$.startVector(4,b,4)}static addKernelDefHashes($,b){$.addFieldOffset(1,b,0)}static createKernelDefHashesVector($,b){$.startVector(8,b.length,8);for(let nt=b.length-1;nt>=0;nt--)$.addInt64(b[nt]);return $.endVector()}static startKernelDefHashesVector($,b){$.startVector(8,b,8)}static endKernelCreateInfos($){return $.endObject()}static createKernelCreateInfos($,b,nt){return tt.startKernelCreateInfos($),tt.addNodeIndices($,b),tt.addKernelDefHashes($,nt),tt.endKernelCreateInfos($)}}et.KernelCreateInfos=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsSubGraphSessionState($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsSubGraphSessionState($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}graphId($){let b=this.bb.__offset(this.bb_pos,4);return b?this.bb.__string(this.bb_pos+b,$):null}sessionState($){let b=this.bb.__offset(this.bb_pos,6);return b?($||new _.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}static startSubGraphSessionState($){$.startObject(2)}static addGraphId($,b){$.addFieldOffset(0,b,0)}static addSessionState($,b){$.addFieldOffset(1,b,0)}static endSubGraphSessionState($){let b=$.endObject();return $.requiredField(b,4),b}static createSubGraphSessionState($,b,nt){return tt.startSubGraphSessionState($),tt.addGraphId($,b),tt.addSessionState($,nt),tt.endSubGraphSessionState($)}}et.SubGraphSessionState=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsSessionState($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsSessionState($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}kernels($){let b=this.bb.__offset(this.bb_pos,4);return b?($||new _.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}subGraphSessionStates($,b){let nt=this.bb.__offset(this.bb_pos,6);return nt?(b||new _.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}subGraphSessionStatesLength(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.__vector_len(this.bb_pos+$):0}static startSessionState($){$.startObject(2)}static addKernels($,b){$.addFieldOffset(0,b,0)}static addSubGraphSessionStates($,b){$.addFieldOffset(1,b,0)}static createSubGraphSessionStatesVector($,b){$.startVector(4,b.length,4);for(let nt=b.length-1;nt>=0;nt--)$.addOffset(b[nt]);return $.endVector()}static startSubGraphSessionStatesVector($,b){$.startVector(4,b,4)}static endSessionState($){return $.endObject()}static createSessionState($,b,nt){return tt.startSessionState($),tt.addKernels($,b),tt.addSubGraphSessionStates($,nt),tt.endSessionState($)}}et.SessionState=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(_){(function(_e){(function(et){class tt{constructor(){this.bb=null,this.bb_pos=0}__init($,b){return this.bb_pos=$,this.bb=b,this}static getRootAsInferenceSession($,b){return(b||new tt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsInferenceSession($,b){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(b||new tt).__init($.readInt32($.position())+$.position(),$)}static bufferHasIdentifier($){return $.__has_identifier("ORTM")}ortVersion($){let b=this.bb.__offset(this.bb_pos,4);return b?this.bb.__string(this.bb_pos+b,$):null}model($){let b=this.bb.__offset(this.bb_pos,6);return b?($||new _.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}sessionState($){let b=this.bb.__offset(this.bb_pos,8);return b?($||new _.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+b),this.bb):null}static startInferenceSession($){$.startObject(3)}static addOrtVersion($,b){$.addFieldOffset(0,b,0)}static addModel($,b){$.addFieldOffset(1,b,0)}static addSessionState($,b){$.addFieldOffset(2,b,0)}static endInferenceSession($){return $.endObject()}static finishInferenceSessionBuffer($,b){$.finish(b,"ORTM")}static finishSizePrefixedInferenceSessionBuffer($,b){$.finish(b,"ORTM",!0)}static createInferenceSession($,b,nt,st){return tt.startInferenceSession($),tt.addOrtVersion($,b),tt.addModel($,nt),tt.addSessionState($,st),tt.endInferenceSession($)}}et.InferenceSession=tt})(_e.fbs||(_e.fbs={}))})(_.experimental||(_.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},7448:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const d=c(1670),h=c(9162);e.OnnxjsSessionHandler=class{constructor(g){this.session=g,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(g,_,_e){const et=new Map;for(const $ in g)if(Object.hasOwnProperty.call(g,$)){const b=g[$];et.set($,new h.Tensor(b.dims,b.type,void 0,void 0,b.data))}const tt=await this.session.run(et),rt={};return tt.forEach(($,b)=>{rt[b]=new d.Tensor($.type,$.data,$.dims)}),rt}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const d=c(7067),h=c(1296),g=c(7091),_=c(1036),_e=c(6231),et=c(2644);e.Session=class{constructor(tt={}){this._initialized=!1,this.backendHint=tt.backendHint,this.profiler=_e.Profiler.create(tt.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(tt,rt,$){await this.profiler.event("session","Session.loadModel",async()=>{const b=await(0,g.resolveBackend)(this.backendHint);if(this.sessionHandler=b.createSessionHandler(this.context),this._model=new et.Model,typeof tt=="string"){const nt=tt.endsWith(".ort");if(typeof fetch>"u"){const st=await(0,h.promisify)(d.readFile)(tt);this.initialize(st,nt)}else{const st=await fetch(tt),ot=await st.arrayBuffer();this.initialize(new Uint8Array(ot),nt)}}else if(ArrayBuffer.isView(tt))this.initialize(tt);else{const nt=new Uint8Array(tt,rt||0,$||tt.byteLength);this.initialize(nt)}})}initialize(tt,rt){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const $=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(tt,$,rt),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new _.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(tt){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const rt=this.normalizeAndValidateInputs(tt),$=await this._executionPlan.execute(this.sessionHandler,rt);return this.createOutput($)})}normalizeAndValidateInputs(tt){const rt=this._model.graph.getInputNames();if(Array.isArray(tt)){if(tt.length!==rt.length)throw new Error(`incorrect input array length: expected ${rt.length} but got ${tt.length}`)}else{if(tt.size!==rt.length)throw new Error(`incorrect input map size: expected ${rt.length} but got ${tt.size}`);const $=new Array(tt.size);let b=0;for(let nt=0;nt<rt.length;++nt){const st=tt.get(rt[nt]);if(!st)throw new Error(`missing input tensor for: '${name}'`);$[b++]=st}tt=$}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,tt,!1);else{const $=this._model.graph.getInputIndices(),b=this._model.graph.getValues(),nt=new Array($.length);for(let st=0;st<$.length;++st){const ot=b[$[st]];nt[st]=ot.type.shape.dims,this.context.graphInputTypes.push(ot.type.tensorType),this.context.graphInputDims.push(tt[st].dims)}this.validateInputTensorDims(nt,tt,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,tt),tt}validateInputTensorTypes(tt,rt){for(let $=0;$<rt.length;$++){const b=tt[$],nt=rt[$].type;if(b!==nt)throw new Error(`input tensor[${$}] check failed: expected type '${b}' but got ${nt}`)}}validateInputTensorDims(tt,rt,$){for(let b=0;b<rt.length;b++){const nt=tt[b],st=rt[b].dims;if(!this.compareTensorDims(nt,st,$))throw new Error(`input tensor[${b}] check failed: expected shape '[${nt.join(",")}]' but got [${st.join(",")}]`)}}compareTensorDims(tt,rt,$){if(tt.length!==rt.length)return!1;for(let b=0;b<tt.length;++b)if(tt[b]!==rt[b]&&(!$||tt[b]!==0))return!1;return!0}createOutput(tt){const rt=this._model.graph.getOutputNames();if(tt.length!==rt.length)throw new Error("expected number of outputs do not match number of generated outputs");const $=new Map;for(let b=0;b<rt.length;++b)$.set(rt[b],tt[b]);return $}initializeOps(tt){const rt=tt.getNodes();this._ops=new Array(rt.length);for(let $=0;$<rt.length;$++)this._ops[$]=this.sessionHandler.resolve(rt[$],this._model.opsets,tt)}}},9162:function(a,e,c){var d=this&&this.__importDefault||function(ot){return ot&&ot.__esModule?ot:{default:ot}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const h=c(3442),g=d(c(3720)),_=c(1446),_e=c(9395),et=c(2517);var tt=_e.onnxruntime.experimental.fbs;class rt{get data(){if(this.cache===void 0){const it=this.dataProvider(this.dataId);if(it.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=it}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(it){return this.data[et.ShapeUtil.indicesToOffset(it,this.strides)]}set(it,at){this.data[et.ShapeUtil.indicesToOffset(it,this.strides)]=at}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=et.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(it,at,lt,dt,ht,pt=h.Guid.create()){this.dims=it,this.type=at,this.dataProvider=lt,this.asyncDataProvider=dt,this.cache=ht,this.dataId=pt,this.size=et.ShapeUtil.validateDimsAndCalcSize(it);const mt=this.size,yt=lt===void 0&&dt===void 0&&ht===void 0;if(ht!==void 0&&ht.length!==mt)throw new RangeError("Input dims doesn't match data length.");if(at==="string"){if(!(ht===void 0||Array.isArray(ht)&&ht.every(xt=>typeof xt=="string")))throw new TypeError("cache should be a string array");yt&&(this.cache=new Array(mt))}else{if(ht!==void 0){const xt=b(at);if(!(ht instanceof xt))throw new TypeError(`cache should be type ${xt.name}`)}if(yt){const xt=new ArrayBuffer(mt*function(gt){switch(gt){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${gt}`)}}(at));this.cache=function(gt,bt){return new(b(bt))(gt)}(xt,at)}}}static fromProto(it){if(!it)throw new Error("cannot construct Value from an empty tensor");const at=et.ProtoUtil.tensorDataTypeFromProto(it.dataType),lt=et.ProtoUtil.tensorDimsFromProto(it.dims),dt=new rt(lt,at);if(at==="string")it.stringData.forEach((ht,pt)=>{dt.data[pt]=(0,et.decodeUtf8String)(ht)});else if(it.rawData&&typeof it.rawData.byteLength=="number"&&it.rawData.byteLength>0){const ht=dt.data,pt=new DataView(it.rawData.buffer,it.rawData.byteOffset,it.rawData.byteLength),mt=$(it.dataType),yt=it.rawData.byteLength/mt;if(it.rawData.byteLength%mt!=0)throw new Error("invalid buffer length");if(ht.length!==yt)throw new Error("buffer length mismatch");for(let xt=0;xt<yt;xt++){const gt=st(pt,it.dataType,xt*mt);ht[xt]=gt}}else{let ht;switch(it.dataType){case _.onnx.TensorProto.DataType.FLOAT:ht=it.floatData;break;case _.onnx.TensorProto.DataType.INT32:case _.onnx.TensorProto.DataType.INT16:case _.onnx.TensorProto.DataType.UINT16:case _.onnx.TensorProto.DataType.INT8:case _.onnx.TensorProto.DataType.UINT8:case _.onnx.TensorProto.DataType.BOOL:ht=it.int32Data;break;case _.onnx.TensorProto.DataType.INT64:ht=it.int64Data;break;case _.onnx.TensorProto.DataType.DOUBLE:ht=it.doubleData;break;case _.onnx.TensorProto.DataType.UINT32:case _.onnx.TensorProto.DataType.UINT64:ht=it.uint64Data;break;default:throw new Error("unspecific error")}if(ht==null)throw new Error("failed to populate data from a tensorproto value");const pt=dt.data;if(pt.length!==ht.length)throw new Error("array length mismatch");for(let mt=0;mt<ht.length;mt++){const yt=ht[mt];g.default.isLong(yt)?pt[mt]=nt(yt,it.dataType):pt[mt]=yt}}return dt}static fromData(it,at,lt){return new rt(at,lt,void 0,void 0,it)}static fromOrtTensor(it){if(!it)throw new Error("cannot construct Value from an empty tensor");const at=et.ProtoUtil.tensorDimsFromORTFormat(it),lt=et.ProtoUtil.tensorDataTypeFromProto(it.dataType()),dt=new rt(at,lt);if(lt==="string")for(let ht=0;ht<it.stringDataLength();ht++)dt.data[ht]=it.stringData(ht);else if(it.rawDataArray()&&typeof it.rawDataLength()=="number"&&it.rawDataLength()>0){const ht=dt.data,pt=new DataView(it.rawDataArray().buffer,it.rawDataArray().byteOffset,it.rawDataLength()),mt=$(it.dataType()),yt=it.rawDataLength()/mt;if(it.rawDataLength()%mt!=0)throw new Error("invalid buffer length");if(ht.length!==yt)throw new Error("buffer length mismatch");for(let xt=0;xt<yt;xt++){const gt=st(pt,it.dataType(),xt*mt);ht[xt]=gt}}return dt}}function $(ot){switch(ot){case _.onnx.TensorProto.DataType.UINT8:case _.onnx.TensorProto.DataType.INT8:case _.onnx.TensorProto.DataType.BOOL:return 1;case _.onnx.TensorProto.DataType.UINT16:case _.onnx.TensorProto.DataType.INT16:return 2;case _.onnx.TensorProto.DataType.FLOAT:case _.onnx.TensorProto.DataType.INT32:case _.onnx.TensorProto.DataType.UINT32:return 4;case _.onnx.TensorProto.DataType.INT64:case _.onnx.TensorProto.DataType.DOUBLE:case _.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${_.onnx.TensorProto.DataType[ot]}`)}}function b(ot){switch(ot){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function nt(ot,it){if(it===_.onnx.TensorProto.DataType.INT64||it===tt.TensorDataType.INT64){if(ot.greaterThanOrEqual(2147483648)||ot.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(it!==_.onnx.TensorProto.DataType.UINT32&&it!==tt.TensorDataType.UINT32&&it!==_.onnx.TensorProto.DataType.UINT64&&it!==tt.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${_.onnx.TensorProto.DataType[it]}`);if(ot.greaterThanOrEqual(4294967296)||ot.lessThan(0))throw new TypeError("uint64 is not supported")}return ot.toNumber()}function st(ot,it,at){switch(it){case _.onnx.TensorProto.DataType.BOOL:case _.onnx.TensorProto.DataType.UINT8:return ot.getUint8(at);case _.onnx.TensorProto.DataType.INT8:return ot.getInt8(at);case _.onnx.TensorProto.DataType.UINT16:return ot.getUint16(at,!0);case _.onnx.TensorProto.DataType.INT16:return ot.getInt16(at,!0);case _.onnx.TensorProto.DataType.FLOAT:return ot.getFloat32(at,!0);case _.onnx.TensorProto.DataType.INT32:return ot.getInt32(at,!0);case _.onnx.TensorProto.DataType.UINT32:return ot.getUint32(at,!0);case _.onnx.TensorProto.DataType.INT64:return nt(g.default.fromBits(ot.getUint32(at,!0),ot.getUint32(at+4,!0),!1),it);case _.onnx.TensorProto.DataType.DOUBLE:return ot.getFloat64(at,!0);case _.onnx.TensorProto.DataType.UINT64:return nt(g.default.fromBits(ot.getUint32(at,!0),ot.getUint32(at+4,!0),!0),it);default:throw new Error(`cannot read from DataView for type ${_.onnx.TensorProto.DataType[it]}`)}}e.Tensor=rt},2517:function(a,e,c){var d=this&&this.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const h=c(5686),g=d(c(3720)),_=c(1446),_e=c(9162);e.checkInputsShape=function(it,...at){if(!it||it.length!==at.length)return!1;for(let lt=0;lt<it.length;lt++)if(!it[lt].dims||it[lt].dims.length!==at[lt])return!1;return!0},e.assert=function(it,at){if(!it)throw new Error(typeof at=="string"?at:at())},e.ArrayUtil=class{static arraysEqual(it,at){if(it.length!==at.length)return!1;for(let lt=0;lt<it.length;lt++)if(it[lt]!==at[lt])return!1;return!0}};class et{static preprocessInputShapes(at,lt){return[at.length===1?[1,at[0]]:at,lt.length===1?[lt[0],1]:lt]}static postprocessOutputShape(at,lt,dt){lt===1&&at.splice(at.length-2,1),dt===1&&at.pop()}static calcMatMulShape(at,lt){return at[1]!==lt[0]?void 0:[at[0],lt[1]]}}e.MatMulUtil=et;class tt{static calcShape(at,lt,dt=!1){const ht=at.length,pt=lt.length;if(ht===0)return lt;if(pt===0)return at;const mt=Math.max(at.length,lt.length),yt=new Array(mt);if(dt){if(ht<2||pt<2)return;const xt=et.calcMatMulShape([at[ht-2],at[ht-1]],[lt[pt-2],lt[pt-1]]);if(xt===void 0)return;[yt[mt-2],yt[mt-1]]=xt}for(let xt=dt?3:1;xt<=mt;xt++){const gt=ht-xt<0?1:at[ht-xt],bt=pt-xt<0?1:lt[pt-xt];if(gt!==bt&&gt>1&&bt>1)return;yt[mt-xt]=Math.max(gt,bt)}return yt}static index(at,lt){const dt=new Array(lt.length);return tt.fillIndex(at,lt,dt),dt}static fillIndex(at,lt,dt){const ht=at.length-lt.length;for(let pt=0;pt<lt.length;pt++)dt[pt]=at[ht+pt]%lt[pt]}static calc(at,lt,dt,ht,pt){const mt=tt.calcShape(at.dims,lt.dims);if(mt){if(ht&&!b.areEqual(mt,at.dims))return;const yt=b.size(mt),xt=ht?at:new _e.Tensor(mt,pt||at.type);if(mt.length===0)xt.set([],dt(at.get([]),lt.get([])));else{const gt=new Array(mt.length),bt=new Array(at.dims.length),jt=new Array(lt.dims.length);let Mt,Pt=0,Tt=0,St=!1,wt=!1;at.dims.length===0&&(Pt=at.get([]),St=!0),lt.dims.length===0&&(Tt=lt.get([]),wt=!0);for(let Rt=0;Rt<yt;Rt++){Mt=Rt;for(let At=mt.length-1;At>=0;At--)gt[At]=Mt%mt[At],Mt=Math.floor(Mt/mt[At]);St||(tt.fillIndex(gt,at.dims,bt),Pt=at.get(bt)),wt||(tt.fillIndex(gt,lt.dims,jt),Tt=lt.get(jt)),xt.set(gt,dt(Pt,Tt))}}return xt}}static isValidBroadcast(at,lt){const dt=at.length,ht=lt.length;if(dt>ht)return!1;for(let pt=1;pt<=dt;pt++)if(at[dt-pt]!==1&&at[dt-pt]!==lt[ht-pt])return!1;return!0}static getBroadcastDims(at,lt){const dt=at.length,ht=[];for(let pt=0;pt<dt;pt++){const mt=dt-1-pt,yt=at[mt]||1;(lt[lt.length-1-pt]||1)>1&&yt===1&&ht.unshift(mt)}return ht}}e.BroadcastUtil=tt,e.arrayCopyHelper=function(it,at,lt,dt,ht){if(dt<0||dt>=at.length)throw new Error("sourceIndex out of bounds");if(lt<0||lt>=it.length)throw new Error("targetIndex out of bounds");if(dt+ht>at.length)throw new Error("source indices to be copied are outside bounds");if(lt+ht>it.length)throw new Error("target array is too small to hold result");for(let pt=0;pt<ht;pt++)it[lt+pt]=at[dt+pt]},e.GemmUtil=class{static getShapeOfGemmResult(it,at,lt,dt,ht){if(it.length!==2||lt.length!==2)throw new Error("shape need to be of size 2");let pt,mt,yt;at?(pt=it[1],mt=it[0]):(pt=it[0],mt=it[1]);let xt=-1;if(dt?(yt=lt[0],xt=1):(yt=lt[1],xt=0),lt[xt]!==mt)throw new Error("dimension mismatch");if(pt<=0||yt<=0||mt<=0)throw new Error("invalid shape specified");if(ht&&!tt.isValidBroadcast(ht,[pt,yt]))throw new Error("gemm: invalid bias shape for broadcast");return[pt,yt,mt]}};class rt{static tensorDataTypeFromProto(at){switch(at){case _.onnx.TensorProto.DataType.INT8:return"int8";case _.onnx.TensorProto.DataType.UINT8:return"uint8";case _.onnx.TensorProto.DataType.BOOL:return"bool";case _.onnx.TensorProto.DataType.INT16:return"int16";case _.onnx.TensorProto.DataType.UINT16:return"uint16";case _.onnx.TensorProto.DataType.INT32:return"int32";case _.onnx.TensorProto.DataType.UINT32:return"uint32";case _.onnx.TensorProto.DataType.FLOAT:return"float32";case _.onnx.TensorProto.DataType.DOUBLE:return"float64";case _.onnx.TensorProto.DataType.STRING:return"string";case _.onnx.TensorProto.DataType.INT64:return"int32";case _.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${_.onnx.TensorProto.DataType[at]}`)}}static tensorDataTypeStringToEnum(at){switch(at){case"int8":return _.onnx.TensorProto.DataType.INT8;case"uint8":return _.onnx.TensorProto.DataType.UINT8;case"bool":return _.onnx.TensorProto.DataType.BOOL;case"int16":return _.onnx.TensorProto.DataType.INT16;case"uint16":return _.onnx.TensorProto.DataType.UINT16;case"int32":return _.onnx.TensorProto.DataType.INT32;case"uint32":return _.onnx.TensorProto.DataType.UINT32;case"float32":return _.onnx.TensorProto.DataType.FLOAT;case"float64":return _.onnx.TensorProto.DataType.DOUBLE;case"string":return _.onnx.TensorProto.DataType.STRING;case"int64":return _.onnx.TensorProto.DataType.INT64;case"uint64":return _.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${at}`)}}static tensorDimsFromProto(at){return at.map(lt=>g.default.isLong(lt)?lt.toNumber():lt)}static tensorValueTypeFromProto(at){return{tensorType:rt.tensorDataTypeFromProto(at.elemType),shape:{dims:rt.tensorDimsFromProto(at.shape.dim.map(lt=>lt.dimValue))}}}static tensorDimsFromORTFormat(at){const lt=[];for(let dt=0;dt<at.dimsLength();dt++)lt.push($.longToNumber(at.dims(dt)));return lt}static tensorAttributesFromORTFormat(at){const lt=[];for(let dt=0;dt<at.attributesLength();dt++)lt.push(at.attributes(dt));return lt}}e.ProtoUtil=rt;class ${static longToNumber(at,lt){return g.default.isLong(at)?at.toNumber():at instanceof h.flatbuffers.Long?g.default.fromValue({low:at.low,high:at.high,unsigned:lt!=null&&lt}).toNumber():at}static isLong(at){return g.default.isLong(at)||at instanceof h.flatbuffers.Long}}e.LongUtil=$;class b{static size(at){return b.getSizeFromDimensionRange(at,0,at.length)}static sizeFromDimension(at,lt){if(lt<0||lt>at.length)throw new Error(`invalid dimension of ${lt} for sizeFromDimension as Tensor has ${at.length} dimensions.`);return b.getSizeFromDimensionRange(at,lt,at.length)}static sizeToDimension(at,lt){if(lt<0||lt>at.length)throw new Error(`invalid dimension of ${lt} for sizeToDimension as Tensor has ${at.length} dimensions.`);return b.getSizeFromDimensionRange(at,0,lt)}static getSizeFromDimensionRange(at,lt,dt){let ht=1;for(let pt=lt;pt<dt;pt++){if(at[pt]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");ht*=at[pt]}return ht}static computeStrides(at){const lt=at.length;if(lt===0)return[];if(lt===1)return[1];const dt=new Array(lt);dt[lt-1]=1,dt[lt-2]=at[lt-1];for(let ht=lt-3;ht>=0;--ht)dt[ht]=dt[ht+1]*at[ht+1];return dt}static transpose(at){return at.slice().reverse()}static indicesToOffset(at,lt,dt){dt===void 0&&(dt=at.length);let ht=0;for(let pt=0;pt<dt;++pt)ht+=lt[pt]*at[pt];return ht}static offsetToIndices(at,lt){const dt=lt.length;if(dt===0)return[];if(dt===1)return[at*lt[0]];const ht=new Array(lt.length);for(let pt=0;pt<ht.length-1;++pt)ht[pt]=Math.floor(at/lt[pt]),at-=ht[pt]*lt[pt];return ht[ht.length-1]=at,ht}static normalizeAxis(at,lt){if(at<-lt&&at>=lt)throw new Error("unsupported axis for this operation.");return at<0?at+lt:at}static normalizeAxes(at,lt){return at.map(dt=>this.normalizeAxis(dt,lt))}static incrementIndex(at,lt,dt){if(lt.length===0||at.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(dt===void 0)dt=lt.length;else if(dt<=0||dt>lt.length)throw new Error("Incorrect axis to increment on");for(let ht=dt-1;ht>=0&&(at[ht]++,!(at[ht]<lt[ht]));--ht)at[ht]=0}static calculateReshapedDims(at,lt){if(lt.length===0){if(at.length===0||b.size(at)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const dt=lt.length,ht=new Array(dt);let pt=-1,mt=1;for(let xt=0;xt<dt;xt++){if(lt[xt]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(lt[xt]===-1){if(pt!==-1)throw new Error("at most one dimension in shape hints can be -1");pt=xt}else{if(lt[xt]===0){if(xt>=at.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");ht[xt]=at[xt]}else ht[xt]=lt[xt];mt*=ht[xt]}}const yt=b.size(at);if(pt!==-1){if(yt%mt!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${at}] Output shape: [${lt}]`);ht[pt]=yt/mt}else if(mt!==yt)throw new Error("reshapedDims and originalDims don't have matching sizes");return ht}static sortBasedOnPerm(at,lt){return lt?lt.map(dt=>at[dt]):at.slice().reverse()}static padShape(at,lt){const dt=at.length;return at.map((ht,pt)=>ht+lt[pt]+lt[pt+dt])}static areEqual(at,lt){return at.length===lt.length&&at.every((dt,ht)=>dt===lt[ht])}static validateDimsAndCalcSize(at){if(at.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let lt=1;for(const dt of at){if(!Number.isInteger(dt))throw new TypeError(`Invalid shape: ${dt} is not an integer`);if(dt<0||dt>2147483647)throw new TypeError(`Invalid shape: length ${dt} is not allowed`);lt*=dt}return lt}static flattenShape(at,lt){lt<0&&(lt+=at.length);const dt=at.reduce((pt,mt)=>pt*mt,1),ht=at.slice(lt).reduce((pt,mt)=>pt*mt,1);return[dt/ht,ht]}static squeezeShape(at,lt){const dt=new Array;lt=b.normalizeAxes(lt,at.length);for(let ht=0;ht<at.length;ht++){const pt=lt.indexOf(ht)>=0;if(pt&&at[ht]!==1)throw new Error("squeeze an axis of size different than 1");(lt.length===0&&at[ht]>1||lt.length>0&&!pt)&&dt.push(at[ht])}return dt}static unsqueezeShape(at,lt){const dt=new Array(at.length+lt.length);dt.fill(0);for(let pt=0;pt<lt.length;pt++){const mt=b.normalizeAxis(lt[pt],dt.length);if(mt>=dt.length)throw new Error("'axes' has an out of range axis");if(dt[mt]!==0)throw new Error("'axes' has a duplicate axis");dt[mt]=1}let ht=0;for(let pt=0;pt<dt.length;pt++)dt[pt]===0&&(dt[pt]=at[ht++]);if(ht!==at.length)throw new Error("the unsqueezed dimension could not be established");return dt}}e.ShapeUtil=b,e.MathUtil=class{static sqr(it,at,lt,dt,ht){if(dt<0||dt>=at.length)throw new Error("sourceIndex out of bounds");if(lt<0||lt>=it.length)throw new Error("targetIndex out of bounds");if(dt+ht>at.length)throw new Error("source indices to be copied are outside bounds");if(lt+ht>it.length)throw new Error("target array is too small to hold result");for(let pt=0;pt<ht;pt++)it[lt+pt]+=Math.pow(at[dt+pt],2)}static axpy(it,at,lt,dt,ht,pt){if(dt<0||dt>=at.length)throw new Error("sourceIndex out of bounds");if(lt<0||lt>=it.length)throw new Error("targetIndex out of bounds");if(dt+ht>at.length)throw new Error("source indices to be copied are outside bounds");if(lt+ht>it.length)throw new Error("target array is too small to hold result");for(let mt=0;mt<ht;mt++)it[lt+mt]+=pt*at[dt+mt]}static powx(it,at,lt,dt,ht,pt){if(dt<0||dt>=at.length)throw new Error("sourceIndex out of bounds");if(lt<0||lt>=it.length)throw new Error("targetIndex out of bounds");if(dt+ht>at.length)throw new Error("source indices to be copied are outside bounds");if(lt+ht>it.length)throw new Error("target array is too small to hold result");for(let mt=0;mt<ht;mt++)it[lt+mt]=Math.pow(at[dt+mt],pt)}static mul(it,at,lt,dt,ht){if(dt<0||dt>=at.length)throw new Error("sourceIndex out of bounds");if(lt<0||lt>=it.length)throw new Error("targetIndex out of bounds");if(dt+ht>at.length)throw new Error("source indices to be copied are outside bounds");if(lt+ht>it.length)throw new Error("target array is too small to hold result");for(let pt=0;pt<ht;pt++)it[lt+pt]=at[dt+pt]*it[lt+pt]}};class nt{static splitShape(at,lt,dt,ht){if(dt.length===0){if(!ht)throw new Error("need to know number of outputs when the 'split' attribute is not specified");nt.determineSplit(at[lt],ht,dt)}const pt=[],mt=[0];for(let yt=0;yt<dt.length;++yt){yt!==0&&mt.push(mt[yt-1]+dt[yt-1]);const xt=at.slice();xt[lt]=dt[yt],pt.push(xt)}return[pt,mt]}static determineSplit(at,lt,dt){if(at%lt!=0)throw new Error("cannot split tensor to equal sized parts");for(let ht=0;ht<lt;++ht)dt.push(at/lt)}}e.SplitUtil=nt;class st{static calcReduce(at,lt,dt,ht,pt){const mt=at.dims.slice(0);lt.length===0&&mt.forEach((Pt,Tt)=>lt.push(Tt));const yt=st.calcReduceShape(mt,lt,!0),xt=b.size(yt),gt=new _e.Tensor(yt,at.type),bt=b.computeStrides(yt),jt=b.computeStrides(mt),Mt=new Array(mt.length);for(let Pt=0;Pt<xt;Pt++){const Tt=b.offsetToIndices(Pt,bt);tt.fillIndex(Tt,mt,Mt),gt.set(Tt,st.calcReduceByAxis(at.numberData,lt,mt,0,b.indicesToOffset(Mt,jt),ht,pt))}return dt?gt:new _e.Tensor(st.calcReduceShape(mt,lt,dt),gt.type,void 0,void 0,gt.data,gt.dataId)}static calcReduceByAxis(at,lt,dt,ht,pt,mt,yt){let xt=0;if(ht>=lt.length)return mt(at[pt]);const gt=lt[ht],bt=gt>=dt.length?1:b.size(dt.slice(gt+1));for(let jt=0;jt<dt[gt];jt++)xt=jt===0?st.calcReduceByAxis(at,lt,dt,ht+1,pt,mt,yt):yt(xt,st.calcReduceByAxis(at,lt,dt,ht+1,pt,mt,yt)),pt+=bt;return xt}static calcReduceShape(at,lt,dt){const ht=at.slice();for(let pt=0;pt<lt.length;pt++)ht[lt[pt]]=dt?1:0;return ht.filter(pt=>pt!==0)}}e.ReduceUtil=st;class ot{static adjustPoolAttributes(at,lt,dt,ht,pt,mt){if(!at&&dt.length!==lt.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(at)for(let yt=0;yt<lt.length-2;yt++)yt>=dt.length?dt.push(lt[yt+2]):dt[yt]=lt[yt+2];for(let yt=0;yt<dt.length;yt++)if(yt<ht.length){if(ht[yt]<0)throw new Error("strides should be greater than or equal to 1")}else ht.push(1);for(let yt=0;yt<dt.length;yt++)if(yt<pt.length){if(pt[yt]<0)throw new Error("dilations should be greater than or equal to 1")}else pt.push(1);for(let yt=0;yt<2*dt.length;yt++)if(yt<mt.length){if(mt[yt]<0)throw new Error("pad should be greater than or equal to 1")}else mt.push(0);for(let yt=0;yt<dt.length;yt++){if(dt[yt]<=0)throw new Error("kernel shapes need to be greater than 0");if(mt[yt]>=dt[yt]||mt[yt+dt.length]>=dt[yt])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(at,lt,dt,ht,pt,mt){if(mt){if(pt.length!==2*(at.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(lt.length!==at.length-2)throw new Error("length of strides should be the length of data dimensions");if(ht.length!==at.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let yt=0;yt<at.length-2;yt++)ot.adjustPadAndReturnShape(at[yt+2],lt[yt],dt[yt],ht[yt],pt,yt,yt+at.length-2,mt)}}static computePoolOutputShape(at,lt,dt,ht,pt,mt,yt){if(lt.length<=0)throw new Error("input shape must be of size greater than 0");const xt=[lt[0],lt[1]];return ot.computeShapeHelper(at,lt,xt,dt,ht,pt,mt,yt),xt}static computeConvOutputShape(at,lt,dt,ht,pt,mt,yt){if(at.length<=0||lt.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const xt=[at[0],lt[0]];return ot.computeShapeHelper(!1,at,xt,dt,ht,pt,mt,yt),xt}static computeShapeHelper(at,lt,dt,ht,pt,mt,yt,xt){if(at)for(let gt=0;gt<lt.length-2;gt++)dt.push(1);else for(let gt=0;gt<lt.length-2;gt++)dt.push(ot.adjustPadAndReturnShape(lt[gt+2],ht[gt],pt[gt],mt[gt],yt,gt,gt+lt.length-2,xt))}static adjustPadAndReturnShape(at,lt,dt,ht,pt,mt,yt,xt){const gt=dt*(ht-1)+1;if(!xt||xt==="NOTSET")return Math.floor((at+pt[mt]+pt[yt]-gt)/lt+1);switch(xt){case"VALID":return pt[mt]=0,pt[yt]=0,Math.floor((at-gt)/lt+1);case"SAME_LOWER":case"SAME_UPPER":if(dt!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const bt=((at+lt-1)/lt-1)*lt+ht-at;return pt[mt]=Math.floor(xt==="SAME_LOWER"?(bt+1)/2:bt/2),pt[yt]=bt-pt[mt],Math.floor((at+bt-ht)/lt+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=ot,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(it){return new TextDecoder().decode(it)}},7967:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(c,d,h,g)=>{if(typeof c=="object"&&c!==null){if(h.has(c))throw new Error("Circular reference in options");h.add(c)}Object.entries(c).forEach(([_,_e])=>{const et=d?d+_:_;if(typeof _e=="object")(0,e.iterateExtraOptions)(_e,et+".",h,g);else if(typeof _e=="string"||typeof _e=="number")g(et,_e.toString());else{if(typeof _e!="boolean")throw new Error("Can't handle extra config type: "+typeof _e);g(et,_e?"1":"0")}})}},2157:function(a,e,c){var d,h=this&&this.__createBinding||(Object.create?function(bt,jt,Mt,Pt){Pt===void 0&&(Pt=Mt);var Tt=Object.getOwnPropertyDescriptor(jt,Mt);Tt&&!("get"in Tt?!jt.__esModule:Tt.writable||Tt.configurable)||(Tt={enumerable:!0,get:function(){return jt[Mt]}}),Object.defineProperty(bt,Pt,Tt)}:function(bt,jt,Mt,Pt){Pt===void 0&&(Pt=Mt),bt[Pt]=jt[Mt]}),g=this&&this.__setModuleDefault||(Object.create?function(bt,jt){Object.defineProperty(bt,"default",{enumerable:!0,value:jt})}:function(bt,jt){bt.default=jt}),_=this&&this.__importStar||function(bt){if(bt&&bt.__esModule)return bt;var jt={};if(bt!=null)for(var Mt in bt)Mt!=="default"&&Object.prototype.hasOwnProperty.call(bt,Mt)&&h(jt,bt,Mt);return g(jt,bt),jt};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const _e=c(1670),et=_(c(349)),tt=c(6361),rt=()=>!!_e.env.wasm.proxy&&typeof document<"u";let $,b,nt,st=!1,ot=!1,it=!1;const at=[],lt=[],dt=[],ht=[],pt=[],mt=[],yt=()=>{if(st||!ot||it||!$)throw new Error("worker not ready")},xt=bt=>{switch(bt.data.type){case"init-wasm":st=!1,bt.data.err?(it=!0,b[1](bt.data.err)):(ot=!0,b[0]());break;case"init-ort":bt.data.err?nt[1](bt.data.err):nt[0]();break;case"create_allocate":bt.data.err?at.shift()[1](bt.data.err):at.shift()[0](bt.data.out);break;case"create_finalize":bt.data.err?lt.shift()[1](bt.data.err):lt.shift()[0](bt.data.out);break;case"create":bt.data.err?dt.shift()[1](bt.data.err):dt.shift()[0](bt.data.out);break;case"release":bt.data.err?ht.shift()[1](bt.data.err):ht.shift()[0]();break;case"run":bt.data.err?pt.shift()[1](bt.data.err):pt.shift()[0](bt.data.out);break;case"end-profiling":bt.data.err?mt.shift()[1](bt.data.err):mt.shift()[0]()}},gt=typeof document<"u"?(d=document==null?void 0:document.currentScript)===null||d===void 0?void 0:d.src:void 0;e.initWasm=async()=>{if(rt()){if(ot)return;if(st)throw new Error("multiple calls to 'initWasm()' detected.");if(it)throw new Error("previous call to 'initWasm()' failed.");return st=!0,_e.env.wasm.wasmPaths===void 0&&gt&&gt.indexOf("blob:")!==0&&(_e.env.wasm.wasmPaths=gt.substr(0,+gt.lastIndexOf("/")+1)),new Promise((bt,jt)=>{$==null||$.terminate(),$=c(9710).Z(),$.onmessage=xt,b=[bt,jt];const Mt={type:"init-wasm",in:_e.env.wasm};$.postMessage(Mt)})}return(0,tt.initializeWebAssembly)(_e.env.wasm)},e.initOrt=async(bt,jt)=>{if(rt())return yt(),new Promise((Mt,Pt)=>{nt=[Mt,Pt];const Tt={type:"init-ort",in:{numThreads:bt,loggingLevel:jt}};$.postMessage(Tt)});et.initOrt(bt,jt)},e.createSessionAllocate=async bt=>rt()?(yt(),new Promise((jt,Mt)=>{at.push([jt,Mt]);const Pt={type:"create_allocate",in:{model:bt}};$.postMessage(Pt,[bt.buffer])})):et.createSessionAllocate(bt),e.createSessionFinalize=async(bt,jt)=>rt()?(yt(),new Promise((Mt,Pt)=>{lt.push([Mt,Pt]);const Tt={type:"create_finalize",in:{modeldata:bt,options:jt}};$.postMessage(Tt)})):et.createSessionFinalize(bt,jt),e.createSession=async(bt,jt)=>rt()?(yt(),new Promise((Mt,Pt)=>{dt.push([Mt,Pt]);const Tt={type:"create",in:{model:bt,options:jt}};$.postMessage(Tt,[bt.buffer])})):et.createSession(bt,jt),e.releaseSession=async bt=>{if(rt())return yt(),new Promise((jt,Mt)=>{ht.push([jt,Mt]);const Pt={type:"release",in:bt};$.postMessage(Pt)});et.releaseSession(bt)},e.run=async(bt,jt,Mt,Pt,Tt)=>rt()?(yt(),new Promise((St,wt)=>{pt.push([St,wt]);const Rt={type:"run",in:{sessionId:bt,inputIndices:jt,inputs:Mt,outputIndices:Pt,options:Tt}};$.postMessage(Rt,et.extractTransferableBuffers(Mt))})):et.run(bt,jt,Mt,Pt,Tt),e.endProfiling=async bt=>{if(rt())return yt(),new Promise((jt,Mt)=>{mt.push([jt,Mt]);const Pt={type:"end-profiling",in:bt};$.postMessage(Pt)});et.endProfiling(bt)}},586:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const d=c(7967),h=c(4983),g=c(6361);e.setRunOptions=_=>{const _e=(0,g.getInstance)();let et=0;const tt=[],rt=_||{};try{if((_==null?void 0:_.logSeverityLevel)===void 0)rt.logSeverityLevel=2;else if(typeof _.logSeverityLevel!="number"||!Number.isInteger(_.logSeverityLevel)||_.logSeverityLevel<0||_.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${_.logSeverityLevel}`);if((_==null?void 0:_.logVerbosityLevel)===void 0)rt.logVerbosityLevel=0;else if(typeof _.logVerbosityLevel!="number"||!Number.isInteger(_.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${_.logVerbosityLevel}`);(_==null?void 0:_.terminate)===void 0&&(rt.terminate=!1);let $=0;if((_==null?void 0:_.tag)!==void 0&&($=(0,h.allocWasmString)(_.tag,tt)),et=_e._OrtCreateRunOptions(rt.logSeverityLevel,rt.logVerbosityLevel,!!rt.terminate,$),et===0)throw new Error("Can't create run options");return(_==null?void 0:_.extra)!==void 0&&(0,d.iterateExtraOptions)(_.extra,"",new WeakSet,(b,nt)=>{const st=(0,h.allocWasmString)(b,tt),ot=(0,h.allocWasmString)(nt,tt);if(_e._OrtAddRunConfigEntry(et,st,ot)!==0)throw new Error(`Can't set a run config entry: ${b} - ${nt}`)}),[et,tt]}catch($){throw et!==0&&_e._OrtReleaseRunOptions(et),tt.forEach(_e._free),$}}},2306:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const d=c(2806),h=c(1670),g=c(2850),_=c(2157);let _e;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(et){const tt=await fetch(et),rt=await tt.arrayBuffer();return(0,_.createSessionAllocate)(new Uint8Array(rt))}async loadModel(et,tt){if(_e||(await(0,_.initOrt)(h.env.wasm.numThreads,(rt=>{switch(rt){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${rt}`)}})(h.env.logLevel)),_e=!0),typeof et=="string")if(typeof fetch>"u"){const rt=await(0,g.promisify)(d.readFile)(et);[this.sessionId,this.inputNames,this.outputNames]=await(0,_.createSession)(rt,tt)}else{const rt=await this.createSessionAllocate(et);[this.sessionId,this.inputNames,this.outputNames]=await(0,_.createSessionFinalize)(rt,tt)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,_.createSession)(et,tt)}async dispose(){return(0,_.releaseSession)(this.sessionId)}async run(et,tt,rt){const $=[],b=[];Object.entries(et).forEach(it=>{const at=it[0],lt=it[1],dt=this.inputNames.indexOf(at);if(dt===-1)throw new Error(`invalid input '${at}'`);$.push(lt),b.push(dt)});const nt=[];Object.entries(tt).forEach(it=>{const at=it[0],lt=this.outputNames.indexOf(at);if(lt===-1)throw new Error(`invalid output '${at}'`);nt.push(lt)});const st=await(0,_.run)(this.sessionId,b,$.map(it=>[it.type,it.dims,it.data]),nt,rt),ot={};for(let it=0;it<st.length;it++)ot[this.outputNames[nt[it]]]=new h.Tensor(st[it][0],st[it][2],st[it][1]);return ot}startProfiling(){}endProfiling(){(0,_.endProfiling)(this.sessionId)}}},4919:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const d=c(7967),h=c(4983),g=c(6361);e.setSessionOptions=_=>{const _e=(0,g.getInstance)();let et=0;const tt=[],rt=_||{};($=>{$.extra||($.extra={}),$.extra.session||($.extra.session={});const b=$.extra.session;b.use_ort_model_bytes_directly||(b.use_ort_model_bytes_directly="1")})(rt);try{(_==null?void 0:_.graphOptimizationLevel)===void 0&&(rt.graphOptimizationLevel="all");const $=(st=>{switch(st){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${st}`)}})(rt.graphOptimizationLevel);(_==null?void 0:_.enableCpuMemArena)===void 0&&(rt.enableCpuMemArena=!0),(_==null?void 0:_.enableMemPattern)===void 0&&(rt.enableMemPattern=!0),(_==null?void 0:_.executionMode)===void 0&&(rt.executionMode="sequential");const b=(st=>{switch(st){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${st}`)}})(rt.executionMode);let nt=0;if((_==null?void 0:_.logId)!==void 0&&(nt=(0,h.allocWasmString)(_.logId,tt)),(_==null?void 0:_.logSeverityLevel)===void 0)rt.logSeverityLevel=2;else if(typeof _.logSeverityLevel!="number"||!Number.isInteger(_.logSeverityLevel)||_.logSeverityLevel<0||_.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${_.logSeverityLevel}`);if((_==null?void 0:_.logVerbosityLevel)===void 0)rt.logVerbosityLevel=0;else if(typeof _.logVerbosityLevel!="number"||!Number.isInteger(_.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${_.logVerbosityLevel}`);if((_==null?void 0:_.enableProfiling)===void 0&&(rt.enableProfiling=!1),et=_e._OrtCreateSessionOptions($,!!rt.enableCpuMemArena,!!rt.enableMemPattern,b,!!rt.enableProfiling,0,nt,rt.logSeverityLevel,rt.logVerbosityLevel),et===0)throw new Error("Can't create session options");return _!=null&&_.executionProviders&&((st,ot,it)=>{for(const at of ot){let lt=typeof at=="string"?at:at.name;switch(lt){case"xnnpack":lt="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${lt}`)}const dt=(0,h.allocWasmString)(lt,it);if((0,g.getInstance)()._OrtAppendExecutionProvider(st,dt)!==0)throw new Error(`Can't append execution provider: ${lt}`)}})(et,_.executionProviders,tt),(_==null?void 0:_.extra)!==void 0&&(0,d.iterateExtraOptions)(_.extra,"",new WeakSet,(st,ot)=>{const it=(0,h.allocWasmString)(st,tt),at=(0,h.allocWasmString)(ot,tt);if(_e._OrtAddSessionConfigEntry(et,it,at)!==0)throw new Error(`Can't set a session config entry: ${st} - ${ot}`)}),[et,tt]}catch($){throw et!==0&&_e._OrtReleaseSessionOptions(et),tt.forEach(_e._free),$}}},4983:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const d=c(6361);e.allocWasmString=(h,g)=>{const _=(0,d.getInstance)(),_e=_.lengthBytesUTF8(h)+1,et=_._malloc(_e);return _.stringToUTF8(h,et,_e),g.push(et),et}},349:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const d=c(586),h=c(4919),g=c(4983),_=c(6361);e.initOrt=($,b)=>{const nt=(0,_.getInstance)()._OrtInit($,b);if(nt!==0)throw new Error(`Can't initialize onnxruntime. error code = ${nt}`)};const _e=new Map;e.createSessionAllocate=$=>{const b=(0,_.getInstance)(),nt=b._malloc($.byteLength);return b.HEAPU8.set($,nt),[nt,$.byteLength]},e.createSessionFinalize=($,b)=>{const nt=(0,_.getInstance)();let st=0,ot=0,it=[];try{if([ot,it]=(0,h.setSessionOptions)(b),st=nt._OrtCreateSession($[0],$[1],ot),st===0)throw new Error("Can't create a session")}finally{nt._free($[0]),nt._OrtReleaseSessionOptions(ot),it.forEach(nt._free)}const at=nt._OrtGetInputCount(st),lt=nt._OrtGetOutputCount(st),dt=[],ht=[],pt=[],mt=[];for(let yt=0;yt<at;yt++){const xt=nt._OrtGetInputName(st,yt);if(xt===0)throw new Error("Can't get an input name");ht.push(xt),dt.push(nt.UTF8ToString(xt))}for(let yt=0;yt<lt;yt++){const xt=nt._OrtGetOutputName(st,yt);if(xt===0)throw new Error("Can't get an output name");mt.push(xt),pt.push(nt.UTF8ToString(xt))}return _e.set(st,[st,ht,mt]),[st,dt,pt]},e.createSession=($,b)=>{const nt=(0,e.createSessionAllocate)($);return(0,e.createSessionFinalize)(nt,b)},e.releaseSession=$=>{const b=(0,_.getInstance)(),nt=_e.get($);if(!nt)throw new Error("invalid session id");const st=nt[0],ot=nt[1],it=nt[2];ot.forEach(b._OrtFree),it.forEach(b._OrtFree),b._OrtReleaseSession(st),_e.delete($)};const et=$=>{switch($){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${$}`)}},tt=$=>{switch($){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${$}`)}},rt=$=>{switch($){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${$}`)}};e.run=($,b,nt,st,ot)=>{const it=(0,_.getInstance)(),at=_e.get($);if(!at)throw new Error("invalid session id");const lt=at[0],dt=at[1],ht=at[2],pt=b.length,mt=st.length;let yt=0,xt=[];const gt=[],bt=[];try{[yt,xt]=(0,d.setRunOptions)(ot);for(let wt=0;wt<pt;wt++){const Rt=nt[wt][0],At=nt[wt][1],Et=nt[wt][2];let zt,er;if(Array.isArray(Et)){er=4*Et.length,zt=it._malloc(er),bt.push(zt);let Er=zt/4;for(let Tr=0;Tr<Et.length;Tr++){if(typeof Et[Tr]!="string")throw new TypeError(`tensor data at index ${Tr} is not a string`);it.HEAPU32[Er++]=(0,g.allocWasmString)(Et[Tr],bt)}}else er=Et.byteLength,zt=it._malloc(er),bt.push(zt),it.HEAPU8.set(new Uint8Array(Et.buffer,Et.byteOffset,er),zt);const pr=it.stackSave(),_r=it.stackAlloc(4*At.length);try{let Er=_r/4;At.forEach(wr=>it.HEAP32[Er++]=wr);const Tr=it._OrtCreateTensor(et(Rt),zt,er,_r,At.length);if(Tr===0)throw new Error("Can't create a tensor");gt.push(Tr)}finally{it.stackRestore(pr)}}const jt=it.stackSave(),Mt=it.stackAlloc(4*pt),Pt=it.stackAlloc(4*pt),Tt=it.stackAlloc(4*mt),St=it.stackAlloc(4*mt);try{let wt=Mt/4,Rt=Pt/4,At=Tt/4,Et=St/4;for(let pr=0;pr<pt;pr++)it.HEAPU32[wt++]=gt[pr],it.HEAPU32[Rt++]=dt[b[pr]];for(let pr=0;pr<mt;pr++)it.HEAPU32[At++]=0,it.HEAPU32[Et++]=ht[st[pr]];let zt=it._OrtRun(lt,Pt,Mt,pt,St,mt,Tt,yt);const er=[];if(zt===0)for(let pr=0;pr<mt;pr++){const _r=it.HEAPU32[Tt/4+pr],Er=it.stackSave(),Tr=it.stackAlloc(16);let wr,gr=0;try{if(zt=it._OrtGetTensorData(_r,Tr,Tr+4,Tr+8,Tr+12),zt!==0)throw new Error(`Can't access output tensor data. error code = ${zt}`);let Pr=Tr/4;const Nr=it.HEAPU32[Pr++];gr=it.HEAPU32[Pr++];const Ar=it.HEAPU32[Pr++],Rr=it.HEAPU32[Pr++],Ir=[];for(let Fr=0;Fr<Rr;Fr++)Ir.push(it.HEAPU32[Ar/4+Fr]);it._OrtFree(Ar);const Ur=Ir.length===0?1:Ir.reduce((Fr,nn)=>Fr*nn);if(wr=tt(Nr),wr==="string"){const Fr=[];let nn=gr/4;for(let en=0;en<Ur;en++){const on=it.HEAPU32[nn++],Yt=en===Ur-1?void 0:it.HEAPU32[nn]-on;Fr.push(it.UTF8ToString(on,Yt))}er.push([wr,Ir,Fr])}else{const Fr=new(rt(wr))(Ur);new Uint8Array(Fr.buffer,Fr.byteOffset,Fr.byteLength).set(it.HEAPU8.subarray(gr,gr+Fr.byteLength)),er.push([wr,Ir,Fr])}}finally{it.stackRestore(Er),wr==="string"&&gr&&it._free(gr),it._OrtReleaseTensor(_r)}}if(zt===0)return er;throw new Error(`failed to call OrtRun(). error code = ${zt}.`)}finally{it.stackRestore(jt)}}finally{gt.forEach(it._OrtReleaseTensor),bt.forEach(it._free),it._OrtReleaseRunOptions(yt),xt.forEach(it._free)}},e.endProfiling=$=>{const b=(0,_.getInstance)(),nt=_e.get($);if(!nt)throw new Error("invalid session id");const st=nt[0],ot=b._OrtEndProfiling(st);if(ot===0)throw new Error("Can't get an profile file name");b._OrtFree(ot)},e.extractTransferableBuffers=$=>{const b=[];for(const nt of $){const st=nt[2];!Array.isArray(st)&&st.buffer&&b.push(st.buffer)}return b}},6361:function(a,e,c){var d=this&&this.__createBinding||(Object.create?function(ot,it,at,lt){lt===void 0&&(lt=at);var dt=Object.getOwnPropertyDescriptor(it,at);dt&&!("get"in dt?!it.__esModule:dt.writable||dt.configurable)||(dt={enumerable:!0,get:function(){return it[at]}}),Object.defineProperty(ot,lt,dt)}:function(ot,it,at,lt){lt===void 0&&(lt=at),ot[lt]=it[at]}),h=this&&this.__setModuleDefault||(Object.create?function(ot,it){Object.defineProperty(ot,"default",{enumerable:!0,value:it})}:function(ot,it){ot.default=it}),g=this&&this.__importStar||function(ot){if(ot&&ot.__esModule)return ot;var it={};if(ot!=null)for(var at in ot)at!=="default"&&Object.prototype.hasOwnProperty.call(ot,at)&&d(it,ot,at);return h(it,ot),it},_=this&&this.__importDefault||function(ot){return ot&&ot.__esModule?ot:{default:ot}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const _e=g(c(6449)),et=_(c(932)),tt=c(3474);let rt,$=!1,b=!1,nt=!1;const st=(ot,it)=>it?ot?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":ot?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async ot=>{if($)return Promise.resolve();if(b)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(nt)throw new Error("previous call to 'initializeWebAssembly()' failed.");b=!0;const it=ot.initTimeout,at=ot.numThreads,lt=ot.simd,dt=at>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),ht=lt&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),pt=typeof ot.wasmPaths=="string"?ot.wasmPaths:void 0,mt=st(!1,dt),yt=st(ht,dt),xt=typeof ot.wasmPaths=="object"?ot.wasmPaths[yt]:void 0;let gt=!1;const bt=[];if(it>0&&bt.push(new Promise(jt=>{setTimeout(()=>{gt=!0,jt()},it)})),bt.push(new Promise((jt,Mt)=>{const Pt=dt?tt:et.default,Tt={locateFile:(St,wt)=>dt&&St.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([c(4154)],{type:"text/javascript"})):St===mt?xt??(pt??wt)+yt:wt+St};if(dt)if(typeof Blob>"u")Tt.mainScriptUrlOrBlob=_e.join("/","ort-wasm-threaded.js");else{const St=`var ortWasmThreaded=(function(){var _scriptDir;return ${Pt.toString()}})();`;Tt.mainScriptUrlOrBlob=new Blob([St],{type:"text/javascript"})}Pt(Tt).then(St=>{b=!1,$=!0,rt=St,jt()},St=>{b=!1,nt=!0,Mt(St)})})),await Promise.race(bt),gt)throw new Error(`WebAssembly backend initializing failed due to timeout: ${it}ms`)},e.getInstance=()=>{if($&&rt)return rt;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var ot;!$||b||nt||(b=!0,(ot=rt.PThread)===null||ot===void 0||ot.terminateAllThreads(),rt=void 0,b=!1,$=!1,nt=!0)}},9710:(a,e,c)=>{c.d(e,{Z:()=>g});var d=c(477),h=c.n(d);function g(){return h()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:a=>{a.exports=function(e,c,d,h){var g=self||window;try{try{var _;try{_=new g.Blob([e])}catch{(_=new(g.BlobBuilder||g.WebKitBlobBuilder||g.MozBlobBuilder||g.MSBlobBuilder)).append(e),_=_.getBlob()}var _e=g.URL||g.webkitURL,et=_e.createObjectURL(_),tt=new g[c](et,d);return _e.revokeObjectURL(et),tt}catch{return new g[c]("data:application/javascript,".concat(encodeURIComponent(e)),d)}}catch{if(!h)throw Error("Inline worker is not supported");return new g[c](h,d)}}},4154:a=>{a.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:a=>{a.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(a,e,c)=>{c.r(e),c.d(e,{flatbuffers:()=>d});var d={};d.Offset,d.Table,d.SIZEOF_SHORT=2,d.SIZEOF_INT=4,d.FILE_IDENTIFIER_LENGTH=4,d.SIZE_PREFIX_LENGTH=4,d.Encoding={UTF8_BYTES:1,UTF16_STRING:2},d.int32=new Int32Array(2),d.float32=new Float32Array(d.int32.buffer),d.float64=new Float64Array(d.int32.buffer),d.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,d.Long=function(h,g){this.low=0|h,this.high=0|g},d.Long.create=function(h,g){return h==0&&g==0?d.Long.ZERO:new d.Long(h,g)},d.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},d.Long.prototype.equals=function(h){return this.low==h.low&&this.high==h.high},d.Long.ZERO=new d.Long(0,0),d.Builder=function(h){if(h)g=h;else var g=1024;this.bb=d.ByteBuffer.allocate(g),this.space=g,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},d.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},d.Builder.prototype.forceDefaults=function(h){this.force_defaults=h},d.Builder.prototype.dataBuffer=function(){return this.bb},d.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},d.Builder.prototype.prep=function(h,g){h>this.minalign&&(this.minalign=h);for(var _=1+~(this.bb.capacity()-this.space+g)&h-1;this.space<_+h+g;){var _e=this.bb.capacity();this.bb=d.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-_e}this.pad(_)},d.Builder.prototype.pad=function(h){for(var g=0;g<h;g++)this.bb.writeInt8(--this.space,0)},d.Builder.prototype.writeInt8=function(h){this.bb.writeInt8(this.space-=1,h)},d.Builder.prototype.writeInt16=function(h){this.bb.writeInt16(this.space-=2,h)},d.Builder.prototype.writeInt32=function(h){this.bb.writeInt32(this.space-=4,h)},d.Builder.prototype.writeInt64=function(h){this.bb.writeInt64(this.space-=8,h)},d.Builder.prototype.writeFloat32=function(h){this.bb.writeFloat32(this.space-=4,h)},d.Builder.prototype.writeFloat64=function(h){this.bb.writeFloat64(this.space-=8,h)},d.Builder.prototype.addInt8=function(h){this.prep(1,0),this.writeInt8(h)},d.Builder.prototype.addInt16=function(h){this.prep(2,0),this.writeInt16(h)},d.Builder.prototype.addInt32=function(h){this.prep(4,0),this.writeInt32(h)},d.Builder.prototype.addInt64=function(h){this.prep(8,0),this.writeInt64(h)},d.Builder.prototype.addFloat32=function(h){this.prep(4,0),this.writeFloat32(h)},d.Builder.prototype.addFloat64=function(h){this.prep(8,0),this.writeFloat64(h)},d.Builder.prototype.addFieldInt8=function(h,g,_){(this.force_defaults||g!=_)&&(this.addInt8(g),this.slot(h))},d.Builder.prototype.addFieldInt16=function(h,g,_){(this.force_defaults||g!=_)&&(this.addInt16(g),this.slot(h))},d.Builder.prototype.addFieldInt32=function(h,g,_){(this.force_defaults||g!=_)&&(this.addInt32(g),this.slot(h))},d.Builder.prototype.addFieldInt64=function(h,g,_){!this.force_defaults&&g.equals(_)||(this.addInt64(g),this.slot(h))},d.Builder.prototype.addFieldFloat32=function(h,g,_){(this.force_defaults||g!=_)&&(this.addFloat32(g),this.slot(h))},d.Builder.prototype.addFieldFloat64=function(h,g,_){(this.force_defaults||g!=_)&&(this.addFloat64(g),this.slot(h))},d.Builder.prototype.addFieldOffset=function(h,g,_){(this.force_defaults||g!=_)&&(this.addOffset(g),this.slot(h))},d.Builder.prototype.addFieldStruct=function(h,g,_){g!=_&&(this.nested(g),this.slot(h))},d.Builder.prototype.nested=function(h){if(h!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},d.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},d.Builder.prototype.slot=function(h){this.vtable[h]=this.offset()},d.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},d.Builder.growByteBuffer=function(h){var g=h.capacity();if(3221225472&g)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var _=g<<1,_e=d.ByteBuffer.allocate(_);return _e.setPosition(_-g),_e.bytes().set(h.bytes(),_-g),_e},d.Builder.prototype.addOffset=function(h){this.prep(d.SIZEOF_INT,0),this.writeInt32(this.offset()-h+d.SIZEOF_INT)},d.Builder.prototype.startObject=function(h){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=h;for(var g=0;g<h;g++)this.vtable[g]=0;this.isNested=!0,this.object_start=this.offset()},d.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var h=this.offset(),g=this.vtable_in_use-1;g>=0&&this.vtable[g]==0;g--);for(var _=g+1;g>=0;g--)this.addInt16(this.vtable[g]!=0?h-this.vtable[g]:0);this.addInt16(h-this.object_start);var _e=(_+2)*d.SIZEOF_SHORT;this.addInt16(_e);var et=0,tt=this.space;e:for(g=0;g<this.vtables.length;g++){var rt=this.bb.capacity()-this.vtables[g];if(_e==this.bb.readInt16(rt)){for(var $=d.SIZEOF_SHORT;$<_e;$+=d.SIZEOF_SHORT)if(this.bb.readInt16(tt+$)!=this.bb.readInt16(rt+$))continue e;et=this.vtables[g];break}}return et?(this.space=this.bb.capacity()-h,this.bb.writeInt32(this.space,et-h)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-h,this.offset()-h)),this.isNested=!1,h},d.Builder.prototype.finish=function(h,g,_){var _e=_?d.SIZE_PREFIX_LENGTH:0;if(g){var et=g;if(this.prep(this.minalign,d.SIZEOF_INT+d.FILE_IDENTIFIER_LENGTH+_e),et.length!=d.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+d.FILE_IDENTIFIER_LENGTH);for(var tt=d.FILE_IDENTIFIER_LENGTH-1;tt>=0;tt--)this.writeInt8(et.charCodeAt(tt))}this.prep(this.minalign,d.SIZEOF_INT+_e),this.addOffset(h),_e&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},d.Builder.prototype.finishSizePrefixed=function(h,g){this.finish(h,g,!0)},d.Builder.prototype.requiredField=function(h,g){var _=this.bb.capacity()-h,_e=_-this.bb.readInt32(_);if(this.bb.readInt16(_e+g)==0)throw new Error("FlatBuffers: field "+g+" must be set")},d.Builder.prototype.startVector=function(h,g,_){this.notNested(),this.vector_num_elems=g,this.prep(d.SIZEOF_INT,h*g),this.prep(_,h*g)},d.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},d.Builder.prototype.createString=function(h){if(h instanceof Uint8Array)var g=h;else{g=[];for(var _=0;_<h.length;){var _e,et=h.charCodeAt(_++);(_e=et<55296||et>=56320?et:(et<<10)+h.charCodeAt(_++)+-56613888)<128?g.push(_e):(_e<2048?g.push(_e>>6&31|192):(_e<65536?g.push(_e>>12&15|224):g.push(_e>>18&7|240,_e>>12&63|128),g.push(_e>>6&63|128)),g.push(63&_e|128))}}this.addInt8(0),this.startVector(1,g.length,1),this.bb.setPosition(this.space-=g.length),_=0;for(var tt=this.space,rt=this.bb.bytes();_<g.length;_++)rt[tt++]=g[_];return this.endVector()},d.Builder.prototype.createLong=function(h,g){return d.Long.create(h,g)},d.ByteBuffer=function(h){this.bytes_=h,this.position_=0},d.ByteBuffer.allocate=function(h){return new d.ByteBuffer(new Uint8Array(h))},d.ByteBuffer.prototype.clear=function(){this.position_=0},d.ByteBuffer.prototype.bytes=function(){return this.bytes_},d.ByteBuffer.prototype.position=function(){return this.position_},d.ByteBuffer.prototype.setPosition=function(h){this.position_=h},d.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},d.ByteBuffer.prototype.readInt8=function(h){return this.readUint8(h)<<24>>24},d.ByteBuffer.prototype.readUint8=function(h){return this.bytes_[h]},d.ByteBuffer.prototype.readInt16=function(h){return this.readUint16(h)<<16>>16},d.ByteBuffer.prototype.readUint16=function(h){return this.bytes_[h]|this.bytes_[h+1]<<8},d.ByteBuffer.prototype.readInt32=function(h){return this.bytes_[h]|this.bytes_[h+1]<<8|this.bytes_[h+2]<<16|this.bytes_[h+3]<<24},d.ByteBuffer.prototype.readUint32=function(h){return this.readInt32(h)>>>0},d.ByteBuffer.prototype.readInt64=function(h){return new d.Long(this.readInt32(h),this.readInt32(h+4))},d.ByteBuffer.prototype.readUint64=function(h){return new d.Long(this.readUint32(h),this.readUint32(h+4))},d.ByteBuffer.prototype.readFloat32=function(h){return d.int32[0]=this.readInt32(h),d.float32[0]},d.ByteBuffer.prototype.readFloat64=function(h){return d.int32[d.isLittleEndian?0:1]=this.readInt32(h),d.int32[d.isLittleEndian?1:0]=this.readInt32(h+4),d.float64[0]},d.ByteBuffer.prototype.writeInt8=function(h,g){this.bytes_[h]=g},d.ByteBuffer.prototype.writeUint8=function(h,g){this.bytes_[h]=g},d.ByteBuffer.prototype.writeInt16=function(h,g){this.bytes_[h]=g,this.bytes_[h+1]=g>>8},d.ByteBuffer.prototype.writeUint16=function(h,g){this.bytes_[h]=g,this.bytes_[h+1]=g>>8},d.ByteBuffer.prototype.writeInt32=function(h,g){this.bytes_[h]=g,this.bytes_[h+1]=g>>8,this.bytes_[h+2]=g>>16,this.bytes_[h+3]=g>>24},d.ByteBuffer.prototype.writeUint32=function(h,g){this.bytes_[h]=g,this.bytes_[h+1]=g>>8,this.bytes_[h+2]=g>>16,this.bytes_[h+3]=g>>24},d.ByteBuffer.prototype.writeInt64=function(h,g){this.writeInt32(h,g.low),this.writeInt32(h+4,g.high)},d.ByteBuffer.prototype.writeUint64=function(h,g){this.writeUint32(h,g.low),this.writeUint32(h+4,g.high)},d.ByteBuffer.prototype.writeFloat32=function(h,g){d.float32[0]=g,this.writeInt32(h,d.int32[0])},d.ByteBuffer.prototype.writeFloat64=function(h,g){d.float64[0]=g,this.writeInt32(h,d.int32[d.isLittleEndian?0:1]),this.writeInt32(h+4,d.int32[d.isLittleEndian?1:0])},d.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+d.SIZEOF_INT+d.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var h="",g=0;g<d.FILE_IDENTIFIER_LENGTH;g++)h+=String.fromCharCode(this.readInt8(this.position_+d.SIZEOF_INT+g));return h},d.ByteBuffer.prototype.__offset=function(h,g){var _=h-this.readInt32(h);return g<this.readInt16(_)?this.readInt16(_+g):0},d.ByteBuffer.prototype.__union=function(h,g){return h.bb_pos=g+this.readInt32(g),h.bb=this,h},d.ByteBuffer.prototype.__string=function(h,g){h+=this.readInt32(h);var _=this.readInt32(h),_e="",et=0;if(h+=d.SIZEOF_INT,g===d.Encoding.UTF8_BYTES)return this.bytes_.subarray(h,h+_);for(;et<_;){var tt,rt=this.readUint8(h+et++);if(rt<192)tt=rt;else{var $=this.readUint8(h+et++);if(rt<224)tt=(31&rt)<<6|63&$;else{var b=this.readUint8(h+et++);tt=rt<240?(15&rt)<<12|(63&$)<<6|63&b:(7&rt)<<18|(63&$)<<12|(63&b)<<6|63&this.readUint8(h+et++)}}tt<65536?_e+=String.fromCharCode(tt):(tt-=65536,_e+=String.fromCharCode(55296+(tt>>10),56320+(1023&tt)))}return _e},d.ByteBuffer.prototype.__indirect=function(h){return h+this.readInt32(h)},d.ByteBuffer.prototype.__vector=function(h){return h+this.readInt32(h)+d.SIZEOF_INT},d.ByteBuffer.prototype.__vector_len=function(h){return this.readInt32(h+this.readInt32(h))},d.ByteBuffer.prototype.__has_identifier=function(h){if(h.length!=d.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+d.FILE_IDENTIFIER_LENGTH);for(var g=0;g<d.FILE_IDENTIFIER_LENGTH;g++)if(h.charCodeAt(g)!=this.readInt8(this.position_+d.SIZEOF_INT+g))return!1;return!0},d.ByteBuffer.prototype.createLong=function(h,g){return d.Long.create(h,g)}}},__webpack_module_cache__={};function __webpack_require__(a){var e=__webpack_module_cache__[a];if(e!==void 0)return e.exports;var c=__webpack_module_cache__[a]={exports:{}};return __webpack_modules__[a].call(c.exports,c,c.exports,__webpack_require__),c.exports}__webpack_require__.n=a=>{var e=a&&a.__esModule?()=>a.default:()=>a;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(a,e)=>{for(var c in e)__webpack_require__.o(e,c)&&!__webpack_require__.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:e[c]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e),__webpack_require__.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())})(ortWeb_min$1);var ortWeb_minExports=ortWeb_min$1.exports;const ortWeb_min=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];var ho;typeof process<"u"&&((ho=process==null?void 0:process.release)==null?void 0:ho.name)==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.17.2",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env!=null&&onnx_env.wasm&&(onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`);const env$1={backends:{onnx:onnx_env,tfjs:{}},__dirname,version:VERSION,allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!0,localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR,useCustomCache:!1,customCache:null};function isEmpty(a){return Object.keys(a).length===0}var define_process_env_default={};class FileResponse{constructor(e){nr(this,"_CONTENT_TYPE_MAP",{txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"});if(this.filePath=e,this.headers=new Headers,this.exists=sharp.existsSync(e),this.exists){this.status=200,this.statusText="OK";let c=sharp.statSync(e);this.headers.set("content-length",c.size.toString()),this.updateContentType();let d=this;this.body=new ReadableStream({start(h){d.arrayBuffer().then(g=>{h.enqueue(new Uint8Array(g)),h.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[e]??"application/octet-stream")}clone(){let e=new FileResponse(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const e=await sharp.promises.readFile(this.filePath);return new Blob([e],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidUrl(a,e=null,c=null){let d;try{d=new URL(a)}catch{return!1}return!(e&&!e.includes(d.protocol)||c&&!c.includes(d.hostname))}async function getFile(a){var e;if(env$1.useFS&&!isValidUrl(a,["http:","https:","blob:"]))return new FileResponse(a);if(typeof process<"u"&&((e=process==null?void 0:process.release)==null?void 0:e.name)==="node"){const c=!!(define_process_env_default!=null&&define_process_env_default.TESTING_REMOTELY),d=env$1.version,h=new Headers;if(h.set("User-Agent",`transformers.js/${d}; is_ci/${c};`),isValidUrl(a,["http:","https:"],["huggingface.co","hf.co"])){const _=(define_process_env_default==null?void 0:define_process_env_default.HF_TOKEN)??(define_process_env_default==null?void 0:define_process_env_default.HF_ACCESS_TOKEN);_&&h.set("Authorization",`Bearer ${_}`)}return fetch(a,{headers:h})}else return fetch(a)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(a,e,c){if(!c)return null;const d=ERROR_MAPPING[a]??`Error (${a}) occurred while trying to load file`;throw Error(`${d}: "${e}".`)}class FileCache{constructor(e){this.path=e}async match(e){let c=sharp.join(this.path,e),d=new FileResponse(c);if(d.exists)return d}async put(e,c){const d=Buffer.from(await c.arrayBuffer());let h=sharp.join(this.path,e);try{await sharp.promises.mkdir(sharp.dirname(h),{recursive:!0}),await sharp.promises.writeFile(h,d)}catch(g){console.warn("An error occurred while writing the file to cache:",g)}}}async function tryCache(a,...e){for(let c of e)try{let d=await a.match(c);if(d)return d}catch{continue}}async function getModelFile(a,e,c=!0,d={}){if(!env$1.allowLocalModels&&d.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");dispatchCallback(d.progress_callback,{status:"initiate",name:a,file:e});let h;if(!h&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{h=await caches.open("transformers-cache")}catch(at){console.warn("An error occurred while opening the browser cache:",at)}}if(!h&&env$1.useFSCache&&(h=new FileCache(d.cache_dir??env$1.cacheDir)),!h&&env$1.useCustomCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");const g=d.revision??"main";let _=pathJoin(a,e),_e=pathJoin(env$1.localModelPath,_),et=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",a).replaceAll("{revision}",encodeURIComponent(g)),e),tt=g==="main"?_:pathJoin(a,g,e),rt,$=h instanceof FileCache?tt:et,b=!1,nt;h&&(nt=await tryCache(h,_e,$));const st=nt!==void 0;if(nt===void 0){if(env$1.allowLocalModels)if(isValidUrl(_,["http:","https:"])){if(d.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${_}.`)}else try{nt=await getFile(_e),rt=_e}catch(lt){console.warn(`Unable to load from local path "${_e}": "${lt}"`)}if(nt===void 0||nt.status===404){if(d.local_files_only||!env$1.allowRemoteModels){if(c)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${_e}".`);return null}if(nt=await getFile(et),nt.status!==200)return handleError(nt.status,et,c);rt=$}b=h&&typeof Response<"u"&&nt instanceof Response&&nt.status===200}dispatchCallback(d.progress_callback,{status:"download",name:a,file:e});const ot={status:"progress",name:a,file:e};let it;return d.progress_callback?st&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(it=new Uint8Array(await nt.arrayBuffer()),dispatchCallback(d.progress_callback,{...ot,progress:100,loaded:it.length,total:it.length})):it=await readResponse(nt,at=>{dispatchCallback(d.progress_callback,{...ot,...at})}):it=new Uint8Array(await nt.arrayBuffer()),b&&rt&&await h.match(rt)===void 0&&await h.put(rt,new Response(it,{headers:nt.headers})).catch(at=>{console.warn(`Unable to add response to browser cache: ${at}.`)}),dispatchCallback(d.progress_callback,{status:"done",name:a,file:e}),it}async function getModelJSON(a,e,c=!0,d={}){let h=await getModelFile(a,e,c,d);if(h===null)return{};let _=new TextDecoder("utf-8").decode(h);return JSON.parse(_)}async function readResponse(a,e){const c=a.headers.get("Content-Length");c===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let d=parseInt(c??"0"),h=new Uint8Array(d),g=0;const _=a.body.getReader();async function _e(){const{done:et,value:tt}=await _.read();if(et)return;let rt=g+tt.length;if(rt>d){d=rt;let b=new Uint8Array(d);b.set(h),h=b}h.set(tt,g),g=rt;const $=g/d*100;return e({progress:$,loaded:g,total:d}),_e()}return await _e(),h}function pathJoin(...a){return a=a.map((e,c)=>(c&&(e=e.replace(new RegExp("^/"),"")),c!==a.length-1&&(e=e.replace(new RegExp("/$"),"")),e)),a.join("/")}function interpolate_data(a,[e,c,d],[h,g],_="bilinear",_e=!1){const et=g/d,tt=h/c,rt=new a.constructor(h*g*e),$=c*d,b=h*g;for(let nt=0;nt<h;++nt)for(let st=0;st<g;++st){const ot=nt*g+st,it=(st+.5)/et-.5,at=(nt+.5)/tt-.5;let lt=Math.floor(it),dt=Math.floor(at);const ht=Math.min(lt+1,d-1),pt=Math.min(dt+1,c-1);lt=Math.max(lt,0),dt=Math.max(dt,0);const mt=it-lt,yt=at-dt,xt=(1-mt)*(1-yt),gt=mt*(1-yt),bt=(1-mt)*yt,jt=mt*yt,Mt=dt*d,Pt=pt*d,Tt=Mt+lt,St=Mt+ht,wt=Pt+lt,Rt=Pt+ht;for(let At=0;At<e;++At){const Et=At*$;rt[At*b+ot]=xt*a[Et+Tt]+gt*a[Et+St]+bt*a[Et+wt]+jt*a[Et+Rt]}}return rt}function permute_data(a,e,c){const d=new Array(c.length),h=new Array(c.length);for(let _e=c.length-1,et=1;_e>=0;--_e)h[_e]=et,d[_e]=e[c[_e]],et*=d[_e];const g=c.map((_e,et)=>h[c.indexOf(et)]),_=new a.constructor(a.length);for(let _e=0;_e<a.length;++_e){let et=0;for(let tt=e.length-1,rt=_e;tt>=0;--tt)et+=rt%e[tt]*g[tt],rt=Math.floor(rt/e[tt]);_[et]=a[_e]}return[_,d]}function softmax(a){const e=max(a)[0],c=a.map(g=>Math.exp(g-e)),d=c.reduce((g,_)=>g+_,0);return c.map(g=>g/d)}function log_softmax(a){return softmax(a).map(d=>Math.log(d))}function getTopItems(a,e=0){return a=Array.from(a).map((c,d)=>[d,c]).sort((c,d)=>d[1]-c[1]),e!==null&&e>0&&(a=a.slice(0,e)),a}function min(a){if(a.length===0)throw Error("Array must not be empty");let e=a[0],c=0;for(let d=1;d<a.length;++d)a[d]<e&&(e=a[d],c=d);return[e,c]}function max(a){if(a.length===0)throw Error("Array must not be empty");let e=a[0],c=0;for(let d=1;d<a.length;++d)a[d]>e&&(e=a[d],c=d);return[Number(e),c]}function isPowerOfTwo(a){return a>0&&(a&a-1)===0}class P2FFT{constructor(e){if(this.size=e|0,this.size<=1||!isPowerOfTwo(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=e<<1,this.table=new Float64Array(this.size*2);for(let d=0;d<this.table.length;d+=2){const h=Math.PI*d/this.size;this.table[d]=Math.cos(h),this.table[d+1]=-Math.sin(h)}let c=0;for(let d=1;this.size>d;d<<=1)++c;this._width=c%2===0?c-1:c,this._bitrev=new Int32Array(1<<this._width);for(let d=0;d<this._bitrev.length;++d){this._bitrev[d]=0;for(let h=0;h<this._width;h+=2){const g=this._width-h-2;this._bitrev[d]|=(d>>>h&3)<<g}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(e,c){const d=c||new Array(e.length>>>1);for(let h=0;h<e.length;h+=2)d[h>>>1]=e[h];return d}toComplexArray(e,c){const d=c||this.createComplexArray();for(let h=0;h<d.length;h+=2)d[h]=e[h>>>1],d[h+1]=0;return d}transform(e,c){if(e===c)throw new Error("Input and output buffers must be different");this._transform4(e,c,1)}realTransform(e,c){if(e===c)throw new Error("Input and output buffers must be different");this._realTransform4(e,c,1)}inverseTransform(e,c){if(e===c)throw new Error("Input and output buffers must be different");this._transform4(e,c,-1);for(let d=0;d<e.length;++d)e[d]/=this.size}_transform4(e,c,d){const h=this._csize;let _=1<<this._width,_e=h/_<<1,et,tt;const rt=this._bitrev;if(_e===4)for(et=0,tt=0;et<h;et+=_e,++tt){const b=rt[tt];this._singleTransform2(c,e,et,b,_)}else for(et=0,tt=0;et<h;et+=_e,++tt){const b=rt[tt];this._singleTransform4(c,e,et,b,_,d)}const $=this.table;for(_>>=2;_>=2;_>>=2){_e=h/_<<1;const b=_e>>>2;for(et=0;et<h;et+=_e){const nt=et+b-1;for(let st=et,ot=0;st<nt;st+=2,ot+=_){const it=st,at=it+b,lt=at+b,dt=lt+b,ht=e[it],pt=e[it+1],mt=e[at],yt=e[at+1],xt=e[lt],gt=e[lt+1],bt=e[dt],jt=e[dt+1],Mt=$[ot],Pt=d*$[ot+1],Tt=mt*Mt-yt*Pt,St=mt*Pt+yt*Mt,wt=$[2*ot],Rt=d*$[2*ot+1],At=xt*wt-gt*Rt,Et=xt*Rt+gt*wt,zt=$[3*ot],er=d*$[3*ot+1],pr=bt*zt-jt*er,_r=bt*er+jt*zt,Er=ht+At,Tr=pt+Et,wr=ht-At,gr=pt-Et,Pr=Tt+pr,Nr=St+_r,Ar=d*(Tt-pr),Rr=d*(St-_r);e[it]=Er+Pr,e[it+1]=Tr+Nr,e[at]=wr+Rr,e[at+1]=gr-Ar,e[lt]=Er-Pr,e[lt+1]=Tr-Nr,e[dt]=wr-Rr,e[dt+1]=gr+Ar}}}}_singleTransform2(e,c,d,h,g){const _=e[h],_e=e[h+1],et=e[h+g],tt=e[h+g+1];c[d]=_+et,c[d+1]=_e+tt,c[d+2]=_-et,c[d+3]=_e-tt}_singleTransform4(e,c,d,h,g,_){const _e=g*2,et=g*3,tt=e[h],rt=e[h+1],$=e[h+g],b=e[h+g+1],nt=e[h+_e],st=e[h+_e+1],ot=e[h+et],it=e[h+et+1],at=tt+nt,lt=rt+st,dt=tt-nt,ht=rt-st,pt=$+ot,mt=b+it,yt=_*($-ot),xt=_*(b-it);c[d]=at+pt,c[d+1]=lt+mt,c[d+2]=dt+xt,c[d+3]=ht-yt,c[d+4]=at-pt,c[d+5]=lt-mt,c[d+6]=dt-xt,c[d+7]=ht+yt}_realTransform4(e,c,d){const h=this._csize;let _=1<<this._width,_e=h/_<<1,et,tt;const rt=this._bitrev;if(_e===4)for(et=0,tt=0;et<h;et+=_e,++tt){const nt=rt[tt];this._singleRealTransform2(c,e,et,nt>>>1,_>>>1)}else for(et=0,tt=0;et<h;et+=_e,++tt){const nt=rt[tt];this._singleRealTransform4(c,e,et,nt>>>1,_>>>1,d)}const $=this.table;for(_>>=2;_>=2;_>>=2){_e=h/_<<1;const nt=_e>>>1,st=nt>>>1,ot=st>>>1;for(et=0;et<h;et+=_e)for(let it=0,at=0;it<=ot;it+=2,at+=_){const lt=et+it,dt=lt+st,ht=dt+st,pt=ht+st,mt=e[lt],yt=e[lt+1],xt=e[dt],gt=e[dt+1],bt=e[ht],jt=e[ht+1],Mt=e[pt],Pt=e[pt+1],Tt=mt,St=yt,wt=$[at],Rt=d*$[at+1],At=xt*wt-gt*Rt,Et=xt*Rt+gt*wt,zt=$[2*at],er=d*$[2*at+1],pr=bt*zt-jt*er,_r=bt*er+jt*zt,Er=$[3*at],Tr=d*$[3*at+1],wr=Mt*Er-Pt*Tr,gr=Mt*Tr+Pt*Er,Pr=Tt+pr,Nr=St+_r,Ar=Tt-pr,Rr=St-_r,Ir=At+wr,Ur=Et+gr,Fr=d*(At-wr),nn=d*(Et-gr);if(e[lt]=Pr+Ir,e[lt+1]=Nr+Ur,e[dt]=Ar+nn,e[dt+1]=Rr-Fr,it===0){e[ht]=Pr-Ir,e[ht+1]=Nr-Ur;continue}if(it===ot)continue;const en=et+st-it,on=et+nt-it;e[en]=Ar-d*nn,e[en+1]=-Rr-d*Fr,e[on]=Pr-d*Ir,e[on+1]=-Nr+d*Ur}}const b=h>>>1;for(let nt=2;nt<b;nt+=2)e[h-nt]=e[nt],e[h-nt+1]=-e[nt+1]}_singleRealTransform2(e,c,d,h,g){const _=e[h],_e=e[h+g];c[d]=_+_e,c[d+1]=0,c[d+2]=_-_e,c[d+3]=0}_singleRealTransform4(e,c,d,h,g,_){const _e=g*2,et=g*3,tt=e[h],rt=e[h+g],$=e[h+_e],b=e[h+et],nt=tt+$,st=tt-$,ot=rt+b,it=_*(rt-b);c[d]=nt+ot,c[d+1]=0,c[d+2]=st,c[d+3]=-it,c[d+4]=nt-ot,c[d+5]=0,c[d+6]=st,c[d+7]=it}}class NP2FFT{constructor(e){const c=2*(e-1),d=2*(2*e-1),h=2**Math.ceil(Math.log2(d));this.bufferSize=h,this._a=c;const g=new Float64Array(d),_=new Float64Array(h);this._chirpBuffer=new Float64Array(h),this._buffer1=new Float64Array(h),this._buffer2=new Float64Array(h),this._outBuffer1=new Float64Array(h),this._outBuffer2=new Float64Array(h);const _e=-2*Math.PI/e,et=Math.cos(_e),tt=Math.sin(_e);for(let rt=0;rt<d>>1;++rt){const $=(rt+1-e)**2/2,b=Math.sqrt(et**2+tt**2)**$,nt=$*Math.atan2(tt,et),st=2*rt;g[st]=b*Math.cos(nt),g[st+1]=b*Math.sin(nt),_[st]=g[st],_[st+1]=-g[st+1]}this._slicedChirpBuffer=g.subarray(c,d),this._f=new P2FFT(h>>1),this._f.transform(this._chirpBuffer,_)}_transform(e,c,d){const h=this._buffer1,g=this._buffer2,_=this._outBuffer1,_e=this._outBuffer2,et=this._chirpBuffer,tt=this._slicedChirpBuffer,rt=this._a;if(d)for(let $=0;$<tt.length;$+=2){const b=$+1,nt=$>>1,st=c[nt];h[$]=st*tt[$],h[b]=st*tt[b]}else for(let $=0;$<tt.length;$+=2){const b=$+1;h[$]=c[$]*tt[$]-c[b]*tt[b],h[b]=c[$]*tt[b]+c[b]*tt[$]}this._f.transform(_,h);for(let $=0;$<et.length;$+=2){const b=$+1;g[$]=_[$]*et[$]-_[b]*et[b],g[b]=_[$]*et[b]+_[b]*et[$]}this._f.inverseTransform(_e,g);for(let $=0;$<_e.length;$+=2){const b=_e[$+rt],nt=_e[$+rt+1],st=tt[$],ot=tt[$+1];e[$]=b*st-nt*ot,e[$+1]=b*ot+nt*st}}transform(e,c){this._transform(e,c,!1)}realTransform(e,c){this._transform(e,c,!0)}}class FFT{constructor(e){this.fft_length=e,this.isPowerOfTwo=isPowerOfTwo(e),this.isPowerOfTwo?(this.fft=new P2FFT(e),this.outputBufferSize=2*e):(this.fft=new NP2FFT(e),this.outputBufferSize=this.fft.bufferSize)}realTransform(e,c){this.fft.realTransform(e,c)}transform(e,c){this.fft.transform(e,c)}}function medianFilter(a,e){if(e%2===0||e<=0)throw new Error("Window size must be a positive odd number");const c=new a.constructor(a.length),d=new a.constructor(e),h=Math.floor(e/2);for(let g=0;g<a.length;++g){let _=0;for(let _e=-h;_e<=h;++_e){let et=g+_e;et<0?et=Math.abs(et):et>=a.length&&(et=2*(a.length-1)-et),d[_++]=a[et]}d.sort(),c[g]=d[h]}return c}function round(a,e){const c=Math.pow(10,e);return Math.round(a*c)/c}function bankers_round(a){const e=Math.round(a);return Math.abs(a)%1===.5?e%2===0?e:e-1:e}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{constructor(...e){nr(this,"dims");nr(this,"type");nr(this,"data");nr(this,"size");return e[0]instanceof ONNXTensor$1?Object.assign(this,e[0]):Object.assign(this,new ONNXTensor$1(e[0],e[1],e[2])),new Proxy(this,{get:(c,d)=>{if(typeof d=="string"){let h=Number(d);if(Number.isInteger(h))return c._getitem(h)}return c[d]},set:(c,d,h)=>c[d]=h})}*[Symbol.iterator](){const[e,...c]=this.dims;if(c.length>0){const d=c.reduce((h,g)=>h*g);for(let h=0;h<e;++h)yield this._subarray(h,d,c)}else yield*this.data}_getitem(e){const[c,...d]=this.dims;if(e=safeIndex(e,c),d.length>0){const h=d.reduce((g,_)=>g*_);return this._subarray(e,h,d)}else return new Tensor(this.type,[this.data[e]],d)}indexOf(e){for(let c=0;c<this.data.length;++c)if(this.data[c]==e)return c;return-1}_subarray(e,c,d){const h=e*c,g=(e+1)*c,_="subarray"in this.data?this.data.subarray(h,g):this.data.slice(h,g);return new Tensor(this.type,_,d)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let e=0;e<this.data.length;++e)this.data[e]=1/(1+Math.exp(-this.data[e]));return this}mul(e){return this.clone().mul_(e)}mul_(e){for(let c=0;c<this.data.length;++c)this.data[c]*=e;return this}add(e){return this.clone().add_(e)}add_(e){for(let c=0;c<this.data.length;++c)this.data[c]+=e;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(...e){let c=[],d=[];for(let et=0;et<this.dims.length;++et){let tt=e[et];if(tt==null)d.push([0,this.dims[et]]),c.push(this.dims[et]);else if(typeof tt=="number")tt=safeIndex(tt,this.dims[et],et),d.push([tt,tt+1]);else if(Array.isArray(tt)&&tt.length===2){if(tt[0]>tt[1])throw new Error(`Invalid slice: ${tt}`);let rt=[Math.max(tt[0],0),Math.min(tt[1],this.dims[et])];d.push(rt),c.push(rt[1]-rt[0])}else throw new Error(`Invalid slice: ${tt}`)}let h=d.map(([et,tt])=>tt-et),g=h.reduce((et,tt)=>et*tt),_=new this.data.constructor(g);const _e=this.stride();for(let et=0;et<g;++et){let tt=0;for(let rt=h.length-1,$=et;rt>=0;--rt){const b=h[rt];tt+=($%b+d[rt][0])*_e[rt],$=Math.floor($/b)}_[et]=this.data[tt]}return new Tensor(this.type,_,c)}permute(...e){return permute(this,e)}transpose(...e){return this.permute(...e)}sum(e=null,c=!1){return this.norm(1,e,c)}norm(e="fro",c=null,d=!1){if(e==="fro")e=2;else if(typeof e=="string")throw Error(`Unsupported norm: ${e}`);if(c===null){let _=this.data.reduce((_e,et)=>_e+et**e,0)**(1/e);return new Tensor(this.type,[_],[])}c=safeIndex(c,this.dims.length);const h=this.dims.slice();h[c]=1;const g=new this.data.constructor(this.data.length/this.dims[c]);for(let _=0;_<this.data.length;++_){let _e=0;for(let et=this.dims.length-1,tt=_,rt=1;et>=0;--et){const $=this.dims[et];if(et!==c){const b=tt%$;_e+=b*rt,rt*=h[et]}tt=Math.floor(tt/$)}g[_e]+=this.data[_]**e}if(e!==1)for(let _=0;_<g.length;++_)g[_]=g[_]**(1/e);return d||h.splice(c,1),new Tensor(this.type,g,h)}normalize_(e=2,c=1){c=safeIndex(c,this.dims.length);const d=this.norm(e,c,!0);for(let h=0;h<this.data.length;++h){let g=0;for(let _=this.dims.length-1,_e=h,et=1;_>=0;--_){const tt=this.dims[_];if(_!==c){const rt=_e%tt;g+=rt*et,et*=this.dims[_]}_e=Math.floor(_e/tt)}this.data[h]/=d.data[g]}return this}normalize(e=2,c=1){return this.clone().normalize_(e,c)}stride(){return dimsToStride(this.dims)}squeeze(e=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,e))}squeeze_(e=null){return this.dims=calc_squeeze_dims(this.dims,e),this}unsqueeze(e=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,e))}unsqueeze_(e=null){return this.dims=calc_unsqueeze_dims(this.dims,e),this}flatten_(e=0,c=-1){c=(c+this.dims.length)%this.dims.length;let d=this.dims.slice(0,e),h=this.dims.slice(e,c+1),g=this.dims.slice(c+1);return this.dims=[...d,h.reduce((_,_e)=>_*_e,1),...g],this}flatten(e=0,c=-1){return this.clone().flatten_(e,c)}view(...e){let c=-1;for(let d=0;d<e.length;++d)if(e[d]===-1){if(c!==-1)throw new Error("Only one dimension can be inferred");c=d}if(c!==-1){const d=e.reduce((h,g,_)=>_!==c?h*g:h,1);e[c]=this.data.length/d}return new Tensor(this.type,this.data,e)}neg_(){for(let e=0;e<this.data.length;++e)this.data[e]=-this.data[e];return this}neg(){return this.clone().neg_()}clamp_(e,c){for(let d=0;d<this.data.length;++d)this.data[d]=Math.min(Math.max(this.data[d],e),c);return this}clamp(e,c){return this.clone().clamp_(e,c)}round_(){for(let e=0;e<this.data.length;++e)this.data[e]=Math.round(this.data[e]);return this}round(){return this.clone().round_()}to(e){if(this.type===e)return this;if(!DataTypeMap.hasOwnProperty(e))throw new Error(`Unsupported type: ${e}`);return new Tensor(e,DataTypeMap[e].from(this.data),this.dims)}}function reshape(a,e){const c=a.length,d=e.reduce((g,_)=>g*_);if(c!==d)throw Error(`cannot reshape array of size ${c} into shape (${e})`);let h=a;for(let g=e.length-1;g>=0;g--)h=h.reduce((_,_e)=>{let et=_[_.length-1];return et.length<e[g]?et.push(_e):_.push([_e]),_},[[]]);return h[0]}function permute(a,e){const[c,d]=permute_data(a.data,a.dims,e);return new Tensor(a.type,c,d)}function interpolate(a,[e,c],d="bilinear",h=!1){const g=a.dims.at(-3)??1,_=a.dims.at(-2),_e=a.dims.at(-1);let et=interpolate_data(a.data,[g,_,_e],[e,c],d,h);return new Tensor(a.type,et,[g,e,c])}function mean_pooling(a,e){let c=[a.dims[0],a.dims[2]],d=new a.data.constructor(c[0]*c[1]),[h,g,_]=a.dims,_e=0;for(let et=0;et<h;++et){let tt=et*_*g;for(let rt=0;rt<_;++rt){let $=0,b=0,nt=et*g,st=tt+rt;for(let it=0;it<g;++it){let at=Number(e.data[nt+it]);b+=at,$+=a.data[st+it*_]*at}let ot=$/b;d[_e++]=ot}}return new Tensor(a.type,d,c)}function calc_squeeze_dims(a,e){return a=a.slice(),e===null?a=a.filter(c=>c!==1):typeof e=="number"?a[e]===1&&a.splice(e,1):Array.isArray(e)&&(a=a.filter((c,d)=>c!==1||!e.includes(d))),a}function calc_unsqueeze_dims(a,e){return e=safeIndex(e,a.length+1),a=a.slice(),a.splice(e,0,1),a}function safeIndex(a,e,c=null){if(a<-e||a>=e)throw new Error(`IndexError: index ${a} is out of bounds for dimension${c===null?"":" "+c} with size ${e}`);return a<0&&(a=(a%e+e)%e),a}function cat(a,e=0){e=safeIndex(e,a[0].dims.length);const c=a[0].dims.slice();c[e]=a.reduce((_,_e)=>_+_e.dims[e],0);const d=c.reduce((_,_e)=>_*_e,1),h=new a[0].data.constructor(d),g=a[0].type;if(e===0){let _=0;for(let _e of a)h.set(_e.data,_),_+=_e.data.length}else{let _=0;for(let _e=0;_e<a.length;++_e){let et=a[_e];for(let tt=0;tt<et.data.length;++tt){let rt=0;for(let $=et.dims.length-1,b=tt,nt=1;$>=0;--$){const st=et.dims[$];let ot=b%st;$===e&&(ot+=_),rt+=ot*nt,nt*=c[$],b=Math.floor(b/st)}h[rt]=et.data[tt]}_+=et.dims[e]}}return new Tensor(g,h,c)}function stack(a,e=0){return cat(a.map(c=>c.unsqueeze(e)),e)}function std_mean(a,e=null,c=1,d=!1){if(e===null){const tt=a.data.reduce((nt,st)=>nt+st,0)/a.data.length,rt=Math.sqrt(a.data.reduce((nt,st)=>nt+(st-tt)**2,0)/(a.data.length-c)),$=new Tensor(a.type,[tt],[]);return[new Tensor(a.type,[rt],[]),$]}e=safeIndex(e,a.dims.length);const h=mean(a,e,d),g=a.dims.slice();g[e]=1;const _=new a.data.constructor(a.data.length/a.dims[e]);for(let et=0;et<a.data.length;++et){let tt=0;for(let rt=a.dims.length-1,$=et,b=1;rt>=0;--rt){const nt=a.dims[rt];if(rt!==e){const st=$%nt;tt+=st*b,b*=g[rt]}$=Math.floor($/nt)}_[tt]+=(a.data[et]-h.data[tt])**2}for(let et=0;et<_.length;++et)_[et]=Math.sqrt(_[et]/(a.dims[e]-c));return d||g.splice(e,1),[new Tensor(a.type,_,g),h]}function mean(a,e=null,c=!1){if(e===null){let g=a.data.reduce((_,_e)=>_+_e,0);return new Tensor(a.type,[g/a.data.length],[])}e=safeIndex(e,a.dims.length);const d=a.dims.slice();d[e]=1;const h=new a.data.constructor(a.data.length/a.dims[e]);for(let g=0;g<a.data.length;++g){let _=0;for(let _e=a.dims.length-1,et=g,tt=1;_e>=0;--_e){const rt=a.dims[_e];if(_e!==e){const $=et%rt;_+=$*tt,tt*=d[_e]}et=Math.floor(et/rt)}h[_]+=a.data[g]}if(a.dims[e]!==1)for(let g=0;g<h.length;++g)h[g]=h[g]/a.dims[e];return c||d.splice(e,1),new Tensor(a.type,h,d)}function dynamicTimeWarping(a){const[e,c]=a.dims,d=[e+1,c+1],h=new Tensor("float32",new Float32Array(d[0]*d[1]).fill(1/0),d),g=new Tensor("float32",new Float32Array(d[0]*d[1]).fill(-1),d);h[0].data[0]=0;for(let rt=1;rt<c+1;++rt)for(let $=1;$<e+1;++$){const b=h[$-1][rt-1].item(),nt=h[$-1][rt].item(),st=h[$][rt-1].item();let ot,it;b<nt&&b<st?(ot=b,it=0):nt<b&&nt<st?(ot=nt,it=1):(ot=st,it=2),h[$].data[rt]=a[$-1][rt-1].item()+ot,g[$].data[rt]=it}let _=e,_e=c;g.data.fill(2,0,d[1]);for(let rt=0;rt<d[0];++rt)g[rt].data[0]=1;let et=[],tt=[];for(;_>0||_e>0;)switch(et.push(_-1),tt.push(_e-1),g[_][_e].item()){case 0:--_,--_e;break;case 1:--_;break;case 2:--_e;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${_}, ${_e}]. Please file a bug report.`)}return et.reverse(),tt.reverse(),[et,tt]}function dimsToStride(a){const e=new Array(a.length);for(let c=a.length-1,d=1;c>=0;--c)e[c]=d,d*=a[c];return e}function ones(a){const e=a.reduce((c,d)=>c*d,1);return new Tensor("int64",new BigInt64Array(e).fill(1n),a)}function ones_like(a){return ones(a.dims)}function quantize_embeddings(a,e){if(a.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(a.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(e))throw new Error("The precision must be either 'binary' or 'ubinary'");const c=e==="binary",d=c?"int8":"uint8",h=c?Int8Array:Uint8Array,g=a.data,_=new h(g.length/8);for(let _e=0;_e<g.length;++_e){const et=g[_e]>0?1:0,tt=Math.floor(_e/8),rt=_e%8;_[tt]|=et<<7-rt,c&&rt===0&&(_[tt]-=128)}return new Tensor(d,_,[a.dims[0],a.dims[1]/8])}class PriorityQueue{constructor(e=(c,d)=>c>d){this._heap=[],this._comparator=e}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...e){return this.extend(e)}extend(e){for(const c of e)this._heap.push(c),this._siftUp();return this.size}pop(){const e=this.peek(),c=this.size-1;return c>0&&this._swap(0,c),this._heap.pop(),this._siftDown(),e}replace(e){const c=this.peek();return this._heap[0]=e,this._siftDown(),c}_parent(e){return(e+1>>>1)-1}_left(e){return(e<<1)+1}_right(e){return e+1<<1}_greater(e,c){return this._comparator(this._heap[e],this._heap[c])}_swap(e,c){const d=this._heap[e];this._heap[e]=this._heap[c],this._heap[c]=d}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,this._parent(e));)this._swap(e,this._parent(e)),e=this._parent(e)}_siftDown(){let e=0;for(;this._left(e)<this.size&&this._greater(this._left(e),e)||this._right(e)<this.size&&this._greater(this._right(e),e);){const c=this._right(e)<this.size&&this._greater(this._right(e),this._left(e))?this._right(e):this._left(e);this._swap(e,c),e=c}}}class CharTrie{constructor(){this.root=CharTrieNode.default()}extend(e){for(let c of e)this.push(c)}push(e){let c=this.root;for(let d of e){let h=c.children.get(d);h===void 0&&(h=CharTrieNode.default(),c.children.set(d,h)),c=h}c.isLeaf=!0}*commonPrefixSearch(e){let c=this.root,d="";for(let h=0;h<e.length&&c!==void 0;++h){const g=e[h];d+=g,c=c.children.get(g),c!==void 0&&c.isLeaf&&(yield d)}}}class CharTrieNode{constructor(e,c){this.isLeaf=e,this.children=c}static default(){return new CharTrieNode(!1,new Map)}}class TokenLattice{constructor(e,c,d){this.sentence=e,this.len=e.length,this.bosTokenId=c,this.eosTokenId=d,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const h=new TokenLatticeNode(this.bosTokenId,0,0,0,0),g=new TokenLatticeNode(this.eosTokenId,1,this.len,0,0);this.nodes.push(h.clone()),this.nodes.push(g.clone()),this.beginNodes[this.len].push(g),this.endNodes[0].push(h)}insert(e,c,d,h){const g=this.nodes.length,_=new TokenLatticeNode(h,g,e,c,d);this.beginNodes[e].push(_),this.endNodes[e+c].push(_),this.nodes.push(_)}viterbi(){const e=this.len;let c=0;for(;c<=e;){if(this.beginNodes[c].length==0)return[];for(let _e of this.beginNodes[c]){_e.prev=null;let et=0,tt=null;for(let rt of this.endNodes[c]){const $=rt.backtraceScore+_e.score;(tt===null||$>et)&&(tt=rt.clone(),et=$)}if(tt!==null)_e.prev=tt,_e.backtraceScore=et;else return[]}++c}const d=[],g=this.beginNodes[e][0].prev;if(g===null)return[];let _=g.clone();for(;_.prev!==null;)d.push(_.clone()),_=_.clone().prev.clone();return d.reverse(),d}piece(e){return this.sentence.slice(e.pos,e.pos+e.length)}tokens(){return this.viterbi().map(c=>this.piece(c))}tokenIds(){return this.viterbi().map(c=>c.tokenId)}}class TokenLatticeNode{constructor(e,c,d,h,g){this.tokenId=e,this.nodeId=c,this.pos=d,this.length=h,this.score=g,this.prev=null,this.backtraceScore=0}clone(){const e=new TokenLatticeNode(this.tokenId,this.nodeId,this.pos,this.length,this.score);return e.prev=this.prev,e.backtraceScore=this.backtraceScore,e}}var TOKEN_TYPES$1=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),KEYWORDS=Object.freeze({set:TOKEN_TYPES$1.Set,for:TOKEN_TYPES$1.For,in:TOKEN_TYPES$1.In,is:TOKEN_TYPES$1.Is,if:TOKEN_TYPES$1.If,else:TOKEN_TYPES$1.Else,endif:TOKEN_TYPES$1.EndIf,elif:TOKEN_TYPES$1.ElseIf,endfor:TOKEN_TYPES$1.EndFor,and:TOKEN_TYPES$1.And,or:TOKEN_TYPES$1.Or,not:TOKEN_TYPES$1.Not,"not in":TOKEN_TYPES$1.NotIn,true:TOKEN_TYPES$1.BooleanLiteral,false:TOKEN_TYPES$1.BooleanLiteral}),Token$1=class{constructor(e,c){this.value=e,this.type=c}};function isWord$1(a){return/\w/.test(a)}function isInteger$1(a){return/[0-9]/.test(a)}var ORDERED_MAPPING_TABLE$1=[["{%",TOKEN_TYPES$1.OpenStatement],["%}",TOKEN_TYPES$1.CloseStatement],["{{",TOKEN_TYPES$1.OpenExpression],["}}",TOKEN_TYPES$1.CloseExpression],["(",TOKEN_TYPES$1.OpenParen],[")",TOKEN_TYPES$1.CloseParen],["{",TOKEN_TYPES$1.OpenCurlyBracket],["}",TOKEN_TYPES$1.CloseCurlyBracket],["[",TOKEN_TYPES$1.OpenSquareBracket],["]",TOKEN_TYPES$1.CloseSquareBracket],[",",TOKEN_TYPES$1.Comma],[".",TOKEN_TYPES$1.Dot],[":",TOKEN_TYPES$1.Colon],["|",TOKEN_TYPES$1.Pipe],["<=",TOKEN_TYPES$1.ComparisonBinaryOperator],[">=",TOKEN_TYPES$1.ComparisonBinaryOperator],["==",TOKEN_TYPES$1.ComparisonBinaryOperator],["!=",TOKEN_TYPES$1.ComparisonBinaryOperator],["<",TOKEN_TYPES$1.ComparisonBinaryOperator],[">",TOKEN_TYPES$1.ComparisonBinaryOperator],["+",TOKEN_TYPES$1.AdditiveBinaryOperator],["-",TOKEN_TYPES$1.AdditiveBinaryOperator],["*",TOKEN_TYPES$1.MultiplicativeBinaryOperator],["/",TOKEN_TYPES$1.MultiplicativeBinaryOperator],["%",TOKEN_TYPES$1.MultiplicativeBinaryOperator],["=",TOKEN_TYPES$1.Equals]],ESCAPE_CHARACTERS$1=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function preprocess$1(a,e={}){return a.endsWith(`
`)&&(a=a.slice(0,-1)),a=a.replace(/{#.*?#}/gs,"{##}"),e.lstrip_blocks&&(a=a.replace(/^[ \t]*({[#%])/gm,"$1")),e.trim_blocks&&(a=a.replace(/([#%]})\n/g,"$1")),a.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function tokenize$1(a,e={}){var _,_e,et;const c=[],d=preprocess$1(a,e);let h=0;const g=tt=>{let rt="";for(;tt(d[h]);){if(d[h]==="\\"){if(++h,h>=d.length)throw new SyntaxError("Unexpected end of input");const $=d[h++],b=ESCAPE_CHARACTERS$1.get($);if(b===void 0)throw new SyntaxError(`Unexpected escaped character: ${$}`);rt+=b;continue}if(rt+=d[h++],h>=d.length)throw new SyntaxError("Unexpected end of input")}return rt};e:for(;h<d.length;){const tt=(_=c.at(-1))==null?void 0:_.type;if(tt===void 0||tt===TOKEN_TYPES$1.CloseStatement||tt===TOKEN_TYPES$1.CloseExpression){let $="";for(;h<d.length&&!(d[h]==="{"&&(d[h+1]==="%"||d[h+1]==="{"));)$+=d[h++];if($.length>0){c.push(new Token$1($,TOKEN_TYPES$1.Text));continue}}g($=>/\s/.test($));const rt=d[h];if(rt==="-"||rt==="+"){const $=(_e=c.at(-1))==null?void 0:_e.type;if($===TOKEN_TYPES$1.Text||$===void 0)throw new SyntaxError(`Unexpected character: ${rt}`);switch($){case TOKEN_TYPES$1.Identifier:case TOKEN_TYPES$1.NumericLiteral:case TOKEN_TYPES$1.BooleanLiteral:case TOKEN_TYPES$1.StringLiteral:case TOKEN_TYPES$1.CloseParen:case TOKEN_TYPES$1.CloseSquareBracket:break;default:{++h;const b=g(isInteger$1);c.push(new Token$1(`${rt}${b}`,b.length>0?TOKEN_TYPES$1.NumericLiteral:TOKEN_TYPES$1.UnaryOperator));continue}}}for(const[$,b]of ORDERED_MAPPING_TABLE$1)if(d.slice(h,h+$.length)===$){c.push(new Token$1($,b)),h+=$.length;continue e}if(rt==="'"||rt==='"'){++h;const $=g(b=>b!==rt);c.push(new Token$1($,TOKEN_TYPES$1.StringLiteral)),++h;continue}if(isInteger$1(rt)){const $=g(isInteger$1);c.push(new Token$1($,TOKEN_TYPES$1.NumericLiteral));continue}if(isWord$1(rt)){const $=g(isWord$1),b=Object.hasOwn(KEYWORDS,$)?KEYWORDS[$]:TOKEN_TYPES$1.Identifier;b===TOKEN_TYPES$1.In&&((et=c.at(-1))==null?void 0:et.type)===TOKEN_TYPES$1.Not?(c.pop(),c.push(new Token$1("not in",TOKEN_TYPES$1.NotIn))):c.push(new Token$1($,b));continue}throw new SyntaxError(`Unexpected character: ${rt}`)}return c}var Statement$1=class{constructor(){nr(this,"type","Statement")}},Program$1=class extends Statement$1{constructor(c){super();nr(this,"type","Program");this.body=c}},If$1=class extends Statement$1{constructor(c,d,h){super();nr(this,"type","If");this.test=c,this.body=d,this.alternate=h}},For$1=class extends Statement$1{constructor(c,d,h){super();nr(this,"type","For");this.loopvar=c,this.iterable=d,this.body=h}},SetStatement$1=class extends Statement$1{constructor(c,d){super();nr(this,"type","Set");this.assignee=c,this.value=d}},Expression$1=class extends Statement$1{constructor(){super(...arguments);nr(this,"type","Expression")}},MemberExpression$1=class extends Expression$1{constructor(c,d,h){super();nr(this,"type","MemberExpression");this.object=c,this.property=d,this.computed=h}},CallExpression$1=class extends Expression$1{constructor(c,d){super();nr(this,"type","CallExpression");this.callee=c,this.args=d}},Identifier$1=class extends Expression$1{constructor(c){super();nr(this,"type","Identifier");this.value=c}},Literal$1=class extends Expression$1{constructor(c){super();nr(this,"type","Literal");this.value=c}},NumericLiteral=class extends Literal$1{constructor(){super(...arguments);nr(this,"type","NumericLiteral")}},StringLiteral$1=class extends Literal$1{constructor(){super(...arguments);nr(this,"type","StringLiteral")}},BooleanLiteral=class extends Literal$1{constructor(){super(...arguments);nr(this,"type","BooleanLiteral")}},ArrayLiteral$1=class extends Literal$1{constructor(){super(...arguments);nr(this,"type","ArrayLiteral")}},TupleLiteral$1=class extends Literal$1{constructor(){super(...arguments);nr(this,"type","TupleLiteral")}},ObjectLiteral$1=class extends Literal$1{constructor(){super(...arguments);nr(this,"type","ObjectLiteral")}},BinaryExpression$1=class extends Expression$1{constructor(c,d,h){super();nr(this,"type","BinaryExpression");this.operator=c,this.left=d,this.right=h}},FilterExpression$1=class extends Expression$1{constructor(c,d){super();nr(this,"type","FilterExpression");this.operand=c,this.filter=d}},TestExpression$1=class extends Expression$1{constructor(c,d,h){super();nr(this,"type","TestExpression");this.operand=c,this.negate=d,this.test=h}},UnaryExpression$1=class extends Expression$1{constructor(c,d){super();nr(this,"type","UnaryExpression");this.operator=c,this.argument=d}},SliceExpression$1=class extends Expression$1{constructor(c=void 0,d=void 0,h=void 0){super();nr(this,"type","SliceExpression");this.start=c,this.stop=d,this.step=h}},KeywordArgumentExpression$1=class extends Expression$1{constructor(c,d){super();nr(this,"type","KeywordArgumentExpression");this.key=c,this.value=d}};function parse$1(a){const e=new Program$1([]);let c=0;function d(St,wt){const Rt=a[c++];if(!Rt||Rt.type!==St)throw new Error(`Parser Error: ${wt}. ${Rt.type} !== ${St}.`);return Rt}function h(){switch(a[c].type){case TOKEN_TYPES$1.Text:return _e();case TOKEN_TYPES$1.OpenStatement:return et();case TOKEN_TYPES$1.OpenExpression:return tt();default:throw new SyntaxError(`Unexpected token type: ${a[c].type}`)}}function g(...St){return c+St.length<=a.length&&St.some((wt,Rt)=>wt!==a[c+Rt].type)}function _(...St){return c+St.length<=a.length&&St.every((wt,Rt)=>wt===a[c+Rt].type)}function _e(){return new StringLiteral$1(d(TOKEN_TYPES$1.Text,"Expected text token").value)}function et(){d(TOKEN_TYPES$1.OpenStatement,"Expected opening statement token");let St;switch(a[c].type){case TOKEN_TYPES$1.Set:++c,St=rt(),d(TOKEN_TYPES$1.CloseStatement,"Expected closing statement token");break;case TOKEN_TYPES$1.If:++c,St=$(),d(TOKEN_TYPES$1.OpenStatement,"Expected {% token"),d(TOKEN_TYPES$1.EndIf,"Expected endif token"),d(TOKEN_TYPES$1.CloseStatement,"Expected %} token");break;case TOKEN_TYPES$1.For:++c,St=nt(),d(TOKEN_TYPES$1.OpenStatement,"Expected {% token"),d(TOKEN_TYPES$1.EndFor,"Expected endfor token"),d(TOKEN_TYPES$1.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${a[c].type}`)}return St}function tt(){d(TOKEN_TYPES$1.OpenExpression,"Expected opening expression token");const St=st();return d(TOKEN_TYPES$1.CloseExpression,"Expected closing expression token"),St}function rt(){const St=st();if(_(TOKEN_TYPES$1.Equals)){++c;const wt=rt();return new SetStatement$1(St,wt)}return St}function $(){var At,Et,zt,er,pr,_r,Er,Tr;const St=st();d(TOKEN_TYPES$1.CloseStatement,"Expected closing statement token");const wt=[],Rt=[];for(;!(((At=a[c])==null?void 0:At.type)===TOKEN_TYPES$1.OpenStatement&&(((Et=a[c+1])==null?void 0:Et.type)===TOKEN_TYPES$1.ElseIf||((zt=a[c+1])==null?void 0:zt.type)===TOKEN_TYPES$1.Else||((er=a[c+1])==null?void 0:er.type)===TOKEN_TYPES$1.EndIf));)wt.push(h());if(((pr=a[c])==null?void 0:pr.type)===TOKEN_TYPES$1.OpenStatement&&((_r=a[c+1])==null?void 0:_r.type)!==TOKEN_TYPES$1.EndIf)if(++c,_(TOKEN_TYPES$1.ElseIf))d(TOKEN_TYPES$1.ElseIf,"Expected elseif token"),Rt.push($());else for(d(TOKEN_TYPES$1.Else,"Expected else token"),d(TOKEN_TYPES$1.CloseStatement,"Expected closing statement token");!(((Er=a[c])==null?void 0:Er.type)===TOKEN_TYPES$1.OpenStatement&&((Tr=a[c+1])==null?void 0:Tr.type)===TOKEN_TYPES$1.EndIf);)Rt.push(h());return new If$1(St,wt,Rt)}function b(St=!1){const wt=St?Tt:st,Rt=[wt()],At=_(TOKEN_TYPES$1.Comma);for(;At&&(++c,Rt.push(wt()),!!_(TOKEN_TYPES$1.Comma)););return At?new TupleLiteral$1(Rt):Rt[0]}function nt(){const St=b(!0);if(!(St instanceof Identifier$1||St instanceof TupleLiteral$1))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${St.type} instead`);d(TOKEN_TYPES$1.In,"Expected `in` keyword following loop variable");const wt=st();d(TOKEN_TYPES$1.CloseStatement,"Expected closing statement token");const Rt=[];for(;g(TOKEN_TYPES$1.OpenStatement,TOKEN_TYPES$1.EndFor);)Rt.push(h());return new For$1(St,wt,Rt)}function st(){return ot()}function ot(){const St=it();if(_(TOKEN_TYPES$1.If)){++c;const wt=it();d(TOKEN_TYPES$1.Else,"Expected else token");const Rt=it();return new If$1(wt,[St],[Rt])}return St}function it(){let St=at();for(;_(TOKEN_TYPES$1.Or);){const wt=a[c];++c;const Rt=at();St=new BinaryExpression$1(wt,St,Rt)}return St}function at(){let St=lt();for(;_(TOKEN_TYPES$1.And);){const wt=a[c];++c;const Rt=lt();St=new BinaryExpression$1(wt,St,Rt)}return St}function lt(){let St;for(;_(TOKEN_TYPES$1.Not);){const wt=a[c];++c;const Rt=lt();St=new UnaryExpression$1(wt,Rt)}return St??dt()}function dt(){let St=ht();for(;_(TOKEN_TYPES$1.ComparisonBinaryOperator)||_(TOKEN_TYPES$1.In)||_(TOKEN_TYPES$1.NotIn);){const wt=a[c];++c;const Rt=ht();St=new BinaryExpression$1(wt,St,Rt)}return St}function ht(){let St=jt();for(;_(TOKEN_TYPES$1.AdditiveBinaryOperator);){const wt=a[c];++c;const Rt=jt();St=new BinaryExpression$1(wt,St,Rt)}return St}function pt(){const St=bt();return _(TOKEN_TYPES$1.OpenParen)?mt(St):St}function mt(St){let wt=new CallExpression$1(St,yt());return _(TOKEN_TYPES$1.OpenParen)&&(wt=mt(wt)),wt}function yt(){d(TOKEN_TYPES$1.OpenParen,"Expected opening parenthesis for arguments list");const St=xt();return d(TOKEN_TYPES$1.CloseParen,"Expected closing parenthesis for arguments list"),St}function xt(){const St=[];for(;!_(TOKEN_TYPES$1.CloseParen);){let wt=st();if(_(TOKEN_TYPES$1.Equals)){if(++c,!(wt instanceof Identifier$1))throw new SyntaxError("Expected identifier for keyword argument");const Rt=st();wt=new KeywordArgumentExpression$1(wt,Rt)}St.push(wt),_(TOKEN_TYPES$1.Comma)&&++c}return St}function gt(){const St=[];let wt=!1;for(;!_(TOKEN_TYPES$1.CloseSquareBracket);)_(TOKEN_TYPES$1.Colon)?(St.push(void 0),++c,wt=!0):(St.push(st()),_(TOKEN_TYPES$1.Colon)&&(++c,wt=!0));if(St.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(wt){if(St.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression$1(...St)}return St[0]}function bt(){let St=Tt();for(;_(TOKEN_TYPES$1.Dot)||_(TOKEN_TYPES$1.OpenSquareBracket);){const wt=a[c];++c;let Rt;const At=wt.type!==TOKEN_TYPES$1.Dot;if(At)Rt=gt(),d(TOKEN_TYPES$1.CloseSquareBracket,"Expected closing square bracket");else if(Rt=Tt(),Rt.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");St=new MemberExpression$1(St,Rt,At)}return St}function jt(){let St=Mt();for(;_(TOKEN_TYPES$1.MultiplicativeBinaryOperator);){const wt=a[c];++c;const Rt=Mt();St=new BinaryExpression$1(wt,St,Rt)}return St}function Mt(){let St=Pt();for(;_(TOKEN_TYPES$1.Is);){++c;const wt=_(TOKEN_TYPES$1.Not);wt&&++c;let Rt=Tt();if(Rt instanceof BooleanLiteral&&(Rt=new Identifier$1(Rt.value.toString())),!(Rt instanceof Identifier$1))throw new SyntaxError("Expected identifier for the test");St=new TestExpression$1(St,wt,Rt)}return St}function Pt(){let St=pt();for(;_(TOKEN_TYPES$1.Pipe);){++c;let wt=Tt();if(!(wt instanceof Identifier$1))throw new SyntaxError("Expected identifier for the filter");_(TOKEN_TYPES$1.OpenParen)&&(wt=mt(wt)),St=new FilterExpression$1(St,wt)}return St}function Tt(){const St=a[c];switch(St.type){case TOKEN_TYPES$1.NumericLiteral:return++c,new NumericLiteral(Number(St.value));case TOKEN_TYPES$1.StringLiteral:return++c,new StringLiteral$1(St.value);case TOKEN_TYPES$1.BooleanLiteral:return++c,new BooleanLiteral(St.value==="true");case TOKEN_TYPES$1.Identifier:return++c,new Identifier$1(St.value);case TOKEN_TYPES$1.OpenParen:{++c;const wt=b();if(a[c].type!==TOKEN_TYPES$1.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${a[c].type} instead`);return++c,wt}case TOKEN_TYPES$1.OpenSquareBracket:{++c;const wt=[];for(;!_(TOKEN_TYPES$1.CloseSquareBracket);)wt.push(st()),_(TOKEN_TYPES$1.Comma)&&++c;return++c,new ArrayLiteral$1(wt)}case TOKEN_TYPES$1.OpenCurlyBracket:{++c;const wt=new Map;for(;!_(TOKEN_TYPES$1.CloseCurlyBracket);){const Rt=st();d(TOKEN_TYPES$1.Colon,"Expected colon between key and value in object literal");const At=st();wt.set(Rt,At),_(TOKEN_TYPES$1.Comma)&&++c}return++c,new ObjectLiteral$1(wt)}default:throw new SyntaxError(`Unexpected token: ${St.type}`)}}for(;c<a.length;)e.body.push(h());return e}function range$1(a,e,c=1){e===void 0&&(e=a,a=0);const d=[];for(let h=a;h<e;h+=c)d.push(h);return d}function slice$1(a,e,c,d=1){const h=Math.sign(d);h>=0?(e=(e??(e=0))<0?Math.max(a.length+e,0):Math.min(e,a.length),c=(c??(c=a.length))<0?Math.max(a.length+c,0):Math.min(c,a.length)):(e=(e??(e=a.length-1))<0?Math.max(a.length+e,-1):Math.min(e,a.length-1),c=(c??(c=-1))<-1?Math.max(a.length+c,-1):Math.min(c,a.length-1));const g=[];for(let _=e;h*_<h*c;_+=d)g.push(a[_]);return g}function titleCase$1(a){return a.replace(/\b\w/g,e=>e.toUpperCase())}var RuntimeValue$1=class{constructor(e=void 0){nr(this,"type","RuntimeValue");nr(this,"value");nr(this,"builtins",new Map);this.value=e}__bool__(){return new BooleanValue$1(!!this.value)}},NumericValue=class extends RuntimeValue$1{constructor(){super(...arguments);nr(this,"type","NumericValue")}},StringValue$1=class extends RuntimeValue$1{constructor(){super(...arguments);nr(this,"type","StringValue");nr(this,"builtins",new Map([["upper",new FunctionValue$1(()=>new StringValue$1(this.value.toUpperCase()))],["lower",new FunctionValue$1(()=>new StringValue$1(this.value.toLowerCase()))],["strip",new FunctionValue$1(()=>new StringValue$1(this.value.trim()))],["title",new FunctionValue$1(()=>new StringValue$1(titleCase$1(this.value)))],["length",new NumericValue(this.value.length)]]))}},BooleanValue$1=class extends RuntimeValue$1{constructor(){super(...arguments);nr(this,"type","BooleanValue")}},ObjectValue$1=class extends RuntimeValue$1{constructor(){super(...arguments);nr(this,"type","ObjectValue");nr(this,"builtins",new Map([["get",new FunctionValue$1(([c,d])=>{if(!(c instanceof StringValue$1))throw new Error(`Object key must be a string: got ${c.type}`);return this.value.get(c.value)??d??new NullValue$1})],["items",new FunctionValue$1(()=>new ArrayValue$1(Array.from(this.value.entries()).map(([c,d])=>new ArrayValue$1([new StringValue$1(c),d]))))]]))}__bool__(){return new BooleanValue$1(this.value.size>0)}},ArrayValue$1=class extends RuntimeValue$1{constructor(){super(...arguments);nr(this,"type","ArrayValue");nr(this,"builtins",new Map([["length",new NumericValue(this.value.length)]]))}__bool__(){return new BooleanValue$1(this.value.length>0)}},TupleValue$1=class extends ArrayValue$1{constructor(){super(...arguments);nr(this,"type","TupleValue")}},FunctionValue$1=class extends RuntimeValue$1{constructor(){super(...arguments);nr(this,"type","FunctionValue")}},NullValue$1=class extends RuntimeValue$1{constructor(){super(...arguments);nr(this,"type","NullValue")}},UndefinedValue$1=class extends RuntimeValue$1{constructor(){super(...arguments);nr(this,"type","UndefinedValue")}},Environment$1=class{constructor(e){nr(this,"variables",new Map([["namespace",new FunctionValue$1(e=>{if(e.length===0)return new ObjectValue$1(new Map);if(e.length!==1||!(e[0]instanceof ObjectValue$1))throw new Error("`namespace` expects either zero arguments or a single object argument");return e[0]})]]));nr(this,"tests",new Map([["boolean",e=>e.type==="BooleanValue"],["callable",e=>e instanceof FunctionValue$1],["odd",e=>{if(e.type!=="NumericValue")throw new Error(`Cannot apply test "odd" to type: ${e.type}`);return e.value%2!==0}],["even",e=>{if(e.type!=="NumericValue")throw new Error(`Cannot apply test "even" to type: ${e.type}`);return e.value%2===0}],["false",e=>e.type==="BooleanValue"&&!e.value],["true",e=>e.type==="BooleanValue"&&e.value],["number",e=>e.type==="NumericValue"],["integer",e=>e.type==="NumericValue"&&Number.isInteger(e.value)],["iterable",e=>e instanceof ArrayValue$1||e instanceof StringValue$1],["lower",e=>{const c=e.value;return e.type==="StringValue"&&c===c.toLowerCase()}],["upper",e=>{const c=e.value;return e.type==="StringValue"&&c===c.toUpperCase()}],["none",e=>e.type==="NullValue"],["defined",e=>e.type!=="UndefinedValue"],["undefined",e=>e.type==="UndefinedValue"],["equalto",(e,c)=>e.value===c.value]]));this.parent=e}set(e,c){return this.declareVariable(e,convertToRuntimeValues$1(c))}declareVariable(e,c){if(this.variables.has(e))throw new SyntaxError(`Variable already declared: ${e}`);return this.variables.set(e,c),c}setVariable(e,c){return this.variables.set(e,c),c}resolve(e){if(this.variables.has(e))return this;if(this.parent)return this.parent.resolve(e);throw new Error(`Unknown variable: ${e}`)}lookupVariable(e){try{return this.resolve(e).variables.get(e)??new UndefinedValue$1}catch{return new UndefinedValue$1}}},Interpreter$1=class{constructor(e){nr(this,"global");this.global=e??new Environment$1}run(e){return this.evaluate(e,this.global)}evaluateBinaryExpression(e,c){const d=this.evaluate(e.left,c);switch(e.operator.value){case"and":return d.__bool__().value?this.evaluate(e.right,c):d;case"or":return d.__bool__().value?d:this.evaluate(e.right,c)}const h=this.evaluate(e.right,c);switch(e.operator.value){case"==":return new BooleanValue$1(d.value==h.value);case"!=":return new BooleanValue$1(d.value!=h.value)}if(d instanceof UndefinedValue$1||h instanceof UndefinedValue$1)throw new Error("Cannot perform operation on undefined values");if(d instanceof NullValue$1||h instanceof NullValue$1)throw new Error("Cannot perform operation on null values");if(d instanceof NumericValue&&h instanceof NumericValue)switch(e.operator.value){case"+":return new NumericValue(d.value+h.value);case"-":return new NumericValue(d.value-h.value);case"*":return new NumericValue(d.value*h.value);case"/":return new NumericValue(d.value/h.value);case"%":return new NumericValue(d.value%h.value);case"<":return new BooleanValue$1(d.value<h.value);case">":return new BooleanValue$1(d.value>h.value);case">=":return new BooleanValue$1(d.value>=h.value);case"<=":return new BooleanValue$1(d.value<=h.value)}else if(d instanceof ArrayValue$1&&h instanceof ArrayValue$1)switch(e.operator.value){case"+":return new ArrayValue$1(d.value.concat(h.value))}else if(h instanceof ArrayValue$1){const g=h.value.find(_=>_.value===d.value)!==void 0;switch(e.operator.value){case"in":return new BooleanValue$1(g);case"not in":return new BooleanValue$1(!g)}}if(d instanceof StringValue$1||h instanceof StringValue$1)switch(e.operator.value){case"+":return new StringValue$1(d.value.toString()+h.value.toString())}if(d instanceof StringValue$1&&h instanceof StringValue$1)switch(e.operator.value){case"in":return new BooleanValue$1(h.value.includes(d.value));case"not in":return new BooleanValue$1(!h.value.includes(d.value))}if(d instanceof StringValue$1&&h instanceof ObjectValue$1)switch(e.operator.value){case"in":return new BooleanValue$1(h.value.has(d.value));case"not in":return new BooleanValue$1(!h.value.has(d.value))}throw new SyntaxError(`Unknown operator "${e.operator.value}" between ${d.type} and ${h.type}`)}evaluateFilterExpression(e,c){const d=this.evaluate(e.operand,c);if(e.filter.type==="Identifier"){const h=e.filter;if(d instanceof ArrayValue$1)switch(h.value){case"list":return d;case"first":return d.value[0];case"last":return d.value[d.value.length-1];case"length":return new NumericValue(d.value.length);case"reverse":return new ArrayValue$1(d.value.reverse());case"sort":return new ArrayValue$1(d.value.sort((g,_)=>{if(g.type!==_.type)throw new Error(`Cannot compare different types: ${g.type} and ${_.type}`);switch(g.type){case"NumericValue":return g.value-_.value;case"StringValue":return g.value.localeCompare(_.value);default:throw new Error(`Cannot compare type: ${g.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${h.value}`)}else if(d instanceof StringValue$1)switch(h.value){case"length":return new NumericValue(d.value.length);case"upper":return new StringValue$1(d.value.toUpperCase());case"lower":return new StringValue$1(d.value.toLowerCase());case"title":return new StringValue$1(titleCase$1(d.value));case"capitalize":return new StringValue$1(d.value.charAt(0).toUpperCase()+d.value.slice(1));case"trim":return new StringValue$1(d.value.trim());default:throw new Error(`Unknown StringValue filter: ${h.value}`)}else if(d instanceof NumericValue)switch(h.value){case"abs":return new NumericValue(Math.abs(d.value));default:throw new Error(`Unknown NumericValue filter: ${h.value}`)}else if(d instanceof ObjectValue$1)switch(h.value){case"items":return new ArrayValue$1(Array.from(d.value.entries()).map(([g,_])=>new ArrayValue$1([new StringValue$1(g),_])));case"length":return new NumericValue(d.value.size);default:throw new Error(`Unknown ObjectValue filter: ${h.value}`)}throw new Error(`Cannot apply filter "${h.value}" to type: ${d.type}`)}else if(e.filter.type==="CallExpression"){const h=e.filter;if(h.callee.type!=="Identifier")throw new Error(`Unknown filter: ${h.callee.type}`);const g=h.callee.value;if(d instanceof ArrayValue$1){switch(g){case"selectattr":{if(d.value.some($=>!($ instanceof ObjectValue$1)))throw new Error("`selectattr` can only be applied to array of objects");if(h.args.some($=>$.type!=="StringLiteral"))throw new Error("arguments of `selectattr` must be strings");const[_,_e,et]=h.args.map($=>this.evaluate($,c));let tt;if(_e){const $=c.tests.get(_e.value);if(!$)throw new Error(`Unknown test: ${_e.value}`);tt=$}else tt=(...$)=>$[0].__bool__().value;const rt=d.value.filter($=>{const b=$.value.get(_.value);return b?tt(b,et):!1});return new ArrayValue$1(rt)}}throw new Error(`Unknown ArrayValue filter: ${g}`)}else throw new Error(`Cannot apply filter "${g}" to type: ${d.type}`)}throw new Error(`Unknown filter: ${e.filter.type}`)}evaluateTestExpression(e,c){const d=this.evaluate(e.operand,c),h=c.tests.get(e.test.value);if(!h)throw new Error(`Unknown test: ${e.test.value}`);const g=h(d);return new BooleanValue$1(e.negate?!g:g)}evaluateUnaryExpression(e,c){const d=this.evaluate(e.argument,c);switch(e.operator.value){case"not":return new BooleanValue$1(!d.value);default:throw new SyntaxError(`Unknown operator: ${e.operator.value}`)}}evalProgram(e,c){return this.evaluateBlock(e.body,c)}evaluateBlock(e,c){let d="";for(const h of e){const g=this.evaluate(h,c);g.type!=="NullValue"&&g.type!=="UndefinedValue"&&(d+=g.value)}return new StringValue$1(d)}evaluateIdentifier(e,c){return c.lookupVariable(e.value)}evaluateCallExpression(e,c){const d=[],h=new Map;for(const _ of e.args)if(_.type==="KeywordArgumentExpression"){const _e=_;h.set(_e.key.value,this.evaluate(_e.value,c))}else d.push(this.evaluate(_,c));h.size>0&&d.push(new ObjectValue$1(h));const g=this.evaluate(e.callee,c);if(g.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${g.type}`);return g.value(d,c)}evaluateSliceExpression(e,c,d){if(!(e instanceof ArrayValue$1||e instanceof StringValue$1))throw new Error("Slice object must be an array or string");const h=this.evaluate(c.start,d),g=this.evaluate(c.stop,d),_=this.evaluate(c.step,d);if(!(h instanceof NumericValue||h instanceof UndefinedValue$1))throw new Error("Slice start must be numeric or undefined");if(!(g instanceof NumericValue||g instanceof UndefinedValue$1))throw new Error("Slice stop must be numeric or undefined");if(!(_ instanceof NumericValue||_ instanceof UndefinedValue$1))throw new Error("Slice step must be numeric or undefined");return e instanceof ArrayValue$1?new ArrayValue$1(slice$1(e.value,h.value,g.value,_.value)):new StringValue$1(slice$1(Array.from(e.value),h.value,g.value,_.value).join(""))}evaluateMemberExpression(e,c){const d=this.evaluate(e.object,c);let h;if(e.computed){if(e.property.type==="SliceExpression")return this.evaluateSliceExpression(d,e.property,c);h=this.evaluate(e.property,c)}else h=new StringValue$1(e.property.value);let g;if(d instanceof ObjectValue$1){if(!(h instanceof StringValue$1))throw new Error(`Cannot access property with non-string: got ${h.type}`);g=d.value.get(h.value)??d.builtins.get(h.value)}else if(d instanceof ArrayValue$1||d instanceof StringValue$1)if(h instanceof NumericValue)g=d.value.at(h.value),d instanceof StringValue$1&&(g=new StringValue$1(d.value.at(h.value)));else if(h instanceof StringValue$1)g=d.builtins.get(h.value);else throw new Error(`Cannot access property with non-string/non-number: got ${h.type}`);else{if(!(h instanceof StringValue$1))throw new Error(`Cannot access property with non-string: got ${h.type}`);g=d.builtins.get(h.value)}return g instanceof RuntimeValue$1?g:new UndefinedValue$1}evaluateSet(e,c){const d=this.evaluate(e.value,c);if(e.assignee.type==="Identifier"){const h=e.assignee.value;c.setVariable(h,d)}else if(e.assignee.type==="MemberExpression"){const h=e.assignee,g=this.evaluate(h.object,c);if(!(g instanceof ObjectValue$1))throw new Error("Cannot assign to member of non-object");if(h.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");g.value.set(h.property.value,d)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(e.assignee)}`);return new NullValue$1}evaluateIf(e,c){const d=this.evaluate(e.test,c);return this.evaluateBlock(d.__bool__().value?e.body:e.alternate,c)}evaluateFor(e,c){const d=new Environment$1(c),h=this.evaluate(e.iterable,d);if(!(h instanceof ArrayValue$1))throw new Error(`Expected iterable type in for loop: got ${h.type}`);let g="";for(let _=0;_<h.value.length;++_){const _e=new Map([["index",new NumericValue(_+1)],["index0",new NumericValue(_)],["revindex",new NumericValue(h.value.length-_)],["revindex0",new NumericValue(h.value.length-_-1)],["first",new BooleanValue$1(_===0)],["last",new BooleanValue$1(_===h.value.length-1)],["length",new NumericValue(h.value.length)],["previtem",_>0?h.value[_-1]:new UndefinedValue$1],["nextitem",_<h.value.length-1?h.value[_+1]:new UndefinedValue$1]]);d.setVariable("loop",new ObjectValue$1(_e));const et=h.value[_];if(e.loopvar.type==="Identifier")d.setVariable(e.loopvar.value,et);else if(e.loopvar.type==="TupleLiteral"){const rt=e.loopvar;if(et.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${et.type}`);const $=et;if(rt.value.length!==$.value.length)throw new Error(`Too ${rt.value.length>$.value.length?"few":"many"} items to unpack`);for(let b=0;b<rt.value.length;++b){if(rt.value[b].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${rt.value[b].type}`);d.setVariable(rt.value[b].value,$.value[b])}}const tt=this.evaluateBlock(e.body,d);g+=tt.value}return new StringValue$1(g)}evaluate(e,c){if(e===void 0)return new UndefinedValue$1;switch(e.type){case"Program":return this.evalProgram(e,c);case"Set":return this.evaluateSet(e,c);case"If":return this.evaluateIf(e,c);case"For":return this.evaluateFor(e,c);case"NumericLiteral":return new NumericValue(Number(e.value));case"StringLiteral":return new StringValue$1(e.value);case"BooleanLiteral":return new BooleanValue$1(e.value);case"ArrayLiteral":return new ArrayValue$1(e.value.map(d=>this.evaluate(d,c)));case"TupleLiteral":return new TupleValue$1(e.value.map(d=>this.evaluate(d,c)));case"ObjectLiteral":{const d=new Map;for(const[h,g]of e.value){const _=this.evaluate(h,c);if(!(_ instanceof StringValue$1))throw new Error(`Object keys must be strings: got ${_.type}`);d.set(_.value,this.evaluate(g,c))}return new ObjectValue$1(d)}case"Identifier":return this.evaluateIdentifier(e,c);case"CallExpression":return this.evaluateCallExpression(e,c);case"MemberExpression":return this.evaluateMemberExpression(e,c);case"UnaryExpression":return this.evaluateUnaryExpression(e,c);case"BinaryExpression":return this.evaluateBinaryExpression(e,c);case"FilterExpression":return this.evaluateFilterExpression(e,c);case"TestExpression":return this.evaluateTestExpression(e,c);default:throw new SyntaxError(`Unknown node type: ${e.type}`)}}};function convertToRuntimeValues$1(a){switch(typeof a){case"number":return new NumericValue(a);case"string":return new StringValue$1(a);case"boolean":return new BooleanValue$1(a);case"object":return a===null?new NullValue$1:Array.isArray(a)?new ArrayValue$1(a.map(convertToRuntimeValues$1)):new ObjectValue$1(new Map(Object.entries(a).map(([e,c])=>[e,convertToRuntimeValues$1(c)])));case"function":return new FunctionValue$1((e,c)=>{const d=a(...e.map(h=>h.value))??null;return convertToRuntimeValues$1(d)});default:throw new Error(`Cannot convert to runtime value: ${a}`)}}var Template$1=class{constructor(e){nr(this,"parsed");const c=tokenize$1(e,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=parse$1(c)}render(e){const c=new Environment$1;c.set("false",!1),c.set("true",!0),c.set("raise_exception",g=>{throw new Error(g)}),c.set("range",range$1);for(const[g,_]of Object.entries(e))c.set(g,_);return new Interpreter$1(c).run(this.parsed).value}};async function loadTokenizer(a,e){const c=await Promise.all([getModelJSON(a,"tokenizer.json",!0,e),getModelJSON(a,"tokenizer_config.json",!0,e)]);return e.legacy!==null&&(c[1].legacy=e.legacy),c}function regexSplit(a,e){const c=[];let d=0;for(const h of a.matchAll(e)){const g=h[0];d<h.index&&c.push(a.slice(d,h.index)),g.length>0&&c.push(g),d=h.index+g.length}return d<a.length&&c.push(a.slice(d)),c}function createPattern(a,e=!0){if(a.Regex!==void 0){let c=a.Regex.replace(/\\([#&~])/g,"$1");for(const[d,h]of PROBLEMATIC_REGEX_MAP)c=c.replaceAll(d,h);return new RegExp(c,"gu")}else if(a.String!==void 0){const c=escapeRegExp$1(a.String);return new RegExp(e?c:`(${c})`,"gu")}else return console.warn("Unknown pattern type:",a),null}function objectToMap(a){return new Map(Object.entries(a))}function prepareTensorForDecode(a){const e=a.dims;switch(e.length){case 1:return a.tolist();case 2:if(e[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return a.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${e.length}.`)}}function clean_up_tokenization(a){return a.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function remove_accents(a){return a.replace(/[\u0300-\u036f]/g,"")}function lowercase_and_remove_accent(a){return remove_accents(a.toLowerCase())}function fuse(a,e,c){const d=[];let h=0;for(;h<a.length;){if(d.push(a[h]),(c.get(a[h])??e)!==e){++h;continue}for(;h<a.length&&(c.get(a[h])??e)===e;)++h}return d}function whitespace_split(a){return a.match(/\S+/g)||[]}const PUNCTUATION_REGEX="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",PROBLEMATIC_REGEX_MAP=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class AddedToken{constructor(e){this.content=e.content,this.id=e.id,this.single_word=e.single_word??!1,this.lstrip=e.lstrip??!1,this.rstrip=e.rstrip??!1,this.special=e.special??!1,this.normalized=e.normalized??null}}class TokenizerModel extends Callable{constructor(e){super(),this.config=e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(e,...c){switch(e.type){case"WordPiece":return new WordPieceTokenizer(e);case"Unigram":return new Unigram(e,...c);case"BPE":return new BPE(e);default:if(e.vocab)return new LegacyTokenizerModel(e,...c);throw new Error(`Unknown TokenizerModel type: ${e.type}`)}}_call(e){let c=this.encode(e);return this.fuse_unk&&(c=fuse(c,this.unk_token_id,this.tokens_to_ids)),c}encode(e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(e){return e.map(c=>this.tokens_to_ids.get(c)??this.unk_token_id)}convert_ids_to_tokens(e){return e.map(c=>this.vocab[c]??this.unk_token)}}class WordPieceTokenizer extends TokenizerModel{constructor(e){super(e),this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.max_input_chars_per_word=e.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[c,d]of this.tokens_to_ids)this.vocab[d]=c}encode(e){const c=[];for(const d of e){const h=[...d];if(h.length>this.max_input_chars_per_word){c.push(this.unk_token);continue}let g=!1,_=0;const _e=[];for(;_<h.length;){let et=h.length,tt=null;for(;_<et;){let rt=h.slice(_,et).join("");if(_>0&&(rt=this.config.continuing_subword_prefix+rt),this.tokens_to_ids.has(rt)){tt=rt;break}--et}if(tt===null){g=!0;break}_e.push(tt),_=et}g?c.push(this.unk_token):c.push(..._e)}return c}}class Unigram extends TokenizerModel{constructor(e,c){super(e);const d=e.vocab.length;this.vocab=new Array(d),this.scores=new Array(d);for(let h=0;h<d;++h){const g=e.vocab[h];this.vocab[h]=g[0],this.scores[h]=g[1]}this.unk_token_id=e.unk_id,this.unk_token=this.vocab[e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((h,g)=>[h,g])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=c.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=min(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(e){const c=e.sentence,d=c.length;let h=0;for(;h<d;){let _=!1;for(let _e of this.trie.commonPrefixSearch(c.slice(h))){const et=this.tokens_to_ids.get(_e),tt=this.scores[et],rt=_e.length;e.insert(h,rt,tt,et),!_&&rt===1&&(_=!0)}_||e.insert(h,1,this.unkScore,this.unk_token_id),h+=1}}tokenize(e){const c=new TokenLattice(e,this.bosTokenId,this.eosTokenId);return this.populateNodes(c),c.tokens()}encode(e){const c=[];for(const d of e){const h=this.tokenize(d);c.push(...h)}return c}}const BYTES_TO_UNICODE=(()=>{const a=[...Array.from({length:94},(h,g)=>g+33),...Array.from({length:12},(h,g)=>g+161),...Array.from({length:82},(h,g)=>g+174)],e=a.slice();let c=0;for(let h=0;h<256;++h)a.includes(h)||(a.push(h),e.push(256+c),c+=1);const d=e.map(h=>String.fromCharCode(h));return Object.fromEntries(a.map((h,g)=>[h,d[g]]))})(),UNICODE_TO_BYTES=reverseDictionary(BYTES_TO_UNICODE);class BPE extends TokenizerModel{constructor(e){super(e),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[c,d]of this.tokens_to_ids)this.vocab[d]=c;this.bpe_ranks=new Map(e.merges.map((c,d)=>[c,d])),this.merges=e.merges.map(c=>c.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=e.end_of_word_suffix,this.continuing_subword_suffix=e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(e){if(e.length===0)return[];const c=this.cache.get(e);if(c!==void 0)return c;const d=Array.from(e);this.end_of_word_suffix&&(d[d.length-1]+=this.end_of_word_suffix);let h=[];if(d.length>1){const g=new PriorityQueue((et,tt)=>et.score<tt.score);let _={token:d[0],bias:0,prev:null,next:null},_e=_;for(let et=1;et<d.length;++et){const tt={bias:et/d.length,token:d[et],prev:_e,next:null};_e.next=tt,this._add_node(g,_e),_e=tt}for(;!g.isEmpty();){const et=g.pop();if(et.deleted||!et.next||et.next.deleted)continue;if(et.deleted=!0,et.next.deleted=!0,et.prev){const rt={...et.prev};et.prev.deleted=!0,et.prev=rt,rt.prev?rt.prev.next=rt:_=rt}const tt={token:et.token+et.next.token,bias:et.bias,prev:et.prev,next:et.next.next};tt.prev?(tt.prev.next=tt,this._add_node(g,tt.prev)):_=tt,tt.next&&(tt.next.prev=tt,this._add_node(g,tt))}for(let et=_;et!==null;et=et.next)h.push(et.token)}else h=d;if(this.continuing_subword_suffix)for(let g=0;g<h.length-1;++g)h[g]+=this.continuing_subword_suffix;return this.cache.set(e,h),h}_add_node(e,c){const d=this.bpe_ranks.get(c.token+this.BPE_SPLIT_TOKEN+c.next.token);d!==void 0&&(c.score=d+c.bias,e.push(c))}encode(e){const c=[];for(const d of e){if(this.ignore_merges&&this.tokens_to_ids.has(d)){c.push(d);continue}const h=this.bpe(d);for(const g of h)this.tokens_to_ids.has(g)?c.push(g):this.byte_fallback?c.push(...Array.from(this.text_encoder.encode(g)).map(_=>`<0x${_.toString(16).toUpperCase().padStart(2,"0")}>`)):c.push(this.unk_token)}return c}}class LegacyTokenizerModel extends TokenizerModel{constructor(e,c){super(e),this.tokens_to_ids=objectToMap(c.target_lang?e.vocab[c.target_lang]:e.vocab),this.bos_token=c.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=c.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=c.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=c.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[d,h]of this.tokens_to_ids)this.vocab[h]=d}encode(e){return e}}class Normalizer extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"BertNormalizer":return new BertNormalizer(e);case"Precompiled":return new Precompiled(e);case"Sequence":return new NormalizerSequence(e);case"Replace":return new Replace(e);case"NFC":return new NFC(e);case"NFKC":return new NFKC(e);case"NFKD":return new NFKD(e);case"Strip":return new StripNormalizer(e);case"StripAccents":return new StripAccents(e);case"Lowercase":return new Lowercase(e);case"Prepend":return new Prepend(e);default:throw new Error(`Unknown Normalizer type: ${e.type}`)}}normalize(e){throw Error("normalize should be implemented in subclass.")}_call(e){return this.normalize(e)}}class Replace extends Normalizer{normalize(e){const c=createPattern(this.config.pattern);return c===null?e:e.replaceAll(c,this.config.content)}}class NFC extends Normalizer{normalize(e){return e=e.normalize("NFC"),e}}class NFKC extends Normalizer{normalize(e){return e=e.normalize("NFKC"),e}}class NFKD extends Normalizer{normalize(e){return e=e.normalize("NFKD"),e}}class StripNormalizer extends Normalizer{normalize(e){return this.config.strip_left&&this.config.strip_right?e=e.trim():(this.config.strip_left&&(e=e.trimStart()),this.config.strip_right&&(e=e.trimEnd())),e}}class StripAccents extends Normalizer{normalize(e){return e=remove_accents(e),e}}class Lowercase extends Normalizer{normalize(e){return e=e.toLowerCase(),e}}class Prepend extends Normalizer{normalize(e){return e=this.config.prepend+e,e}}class NormalizerSequence extends Normalizer{constructor(e){super(e),this.normalizers=e.normalizers.map(c=>Normalizer.fromConfig(c))}normalize(e){return this.normalizers.reduce((c,d)=>d.normalize(c),e)}}class BertNormalizer extends Normalizer{_tokenize_chinese_chars(e){const c=[];for(let d=0;d<e.length;++d){const h=e[d],g=h.charCodeAt(0);this._is_chinese_char(g)?(c.push(" "),c.push(h),c.push(" ")):c.push(h)}return c.join("")}_is_chinese_char(e){return e>=19968&&e<=40959||e>=13312&&e<=19903||e>=131072&&e<=173791||e>=173824&&e<=177983||e>=177984&&e<=178207||e>=178208&&e<=183983||e>=63744&&e<=64255||e>=194560&&e<=195103}stripAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(e){switch(e){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(e)}}_clean_text(e){const c=[];for(const d of e){const h=d.charCodeAt(0);h===0||h===65533||this._is_control(d)||(/^\s$/.test(d)?c.push(" "):c.push(d))}return c.join("")}normalize(e){return this.config.clean_text&&(e=this._clean_text(e)),this.config.handle_chinese_chars&&(e=this._tokenize_chinese_chars(e)),this.config.lowercase?(e=e.toLowerCase(),this.config.strip_accents!==!1&&(e=this.stripAccents(e))):this.config.strip_accents&&(e=this.stripAccents(e)),e}}class PreTokenizer extends Callable{static fromConfig(e){if(e===null)return null;switch(e.type){case"BertPreTokenizer":return new BertPreTokenizer(e);case"Sequence":return new PreTokenizerSequence(e);case"Whitespace":return new WhitespacePreTokenizer(e);case"WhitespaceSplit":return new WhitespaceSplit(e);case"Metaspace":return new MetaspacePreTokenizer(e);case"ByteLevel":return new ByteLevelPreTokenizer(e);case"Split":return new SplitPreTokenizer(e);case"Punctuation":return new PunctuationPreTokenizer(e);case"Digits":return new DigitsPreTokenizer(e);case"Replace":return new ReplacePreTokenizer(e);default:throw new Error(`Unknown PreTokenizer type: ${e.type}`)}}pre_tokenize_text(e,c){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(e,c){return(Array.isArray(e)?e.map(d=>this.pre_tokenize_text(d,c)):this.pre_tokenize_text(e,c)).flat()}_call(e,c){return this.pre_tokenize(e,c)}}class BertPreTokenizer extends PreTokenizer{constructor(e){super(),this.pattern=new RegExp(`[^\\s${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]`,"gu")}pre_tokenize_text(e,c){return e.trim().match(this.pattern)||[]}}class ByteLevelPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=BYTES_TO_UNICODE,this.text_encoder=new TextEncoder}pre_tokenize_text(e,c){return this.add_prefix_space&&!e.startsWith(" ")&&(e=" "+e),(this.use_regex?e.match(this.pattern)||[]:[e]).map(h=>Array.from(this.text_encoder.encode(h),g=>this.byte_encoder[g]).join(""))}}class SplitPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern,this.config.invert)}pre_tokenize_text(e,c){return this.pattern===null?[]:this.config.invert?e.match(this.pattern)||[]:regexSplit(e,this.pattern)}}class PunctuationPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=new RegExp(`[^${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]+`,"gu")}pre_tokenize_text(e,c){return e.match(this.pattern)||[]}}class DigitsPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e;const c=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(c,"gu")}pre_tokenize_text(e,c){return e.match(this.pattern)||[]}}class PostProcessor extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"TemplateProcessing":return new TemplateProcessing(e);case"ByteLevel":return new ByteLevelPostProcessor(e);case"RobertaProcessing":return new RobertaProcessing(e);case"BertProcessing":return new BertProcessing(e);case"Sequence":return new PostProcessorSequence(e);default:throw new Error(`Unknown PostProcessor type: ${e.type}`)}}post_process(e,...c){throw Error("post_process should be implemented in subclass.")}_call(e,...c){return this.post_process(e,...c)}}class BertProcessing extends PostProcessor{constructor(e){super(e),this.cls=e.cls[0],this.sep=e.sep[0]}post_process(e,c=null,{add_special_tokens:d=!0}={}){d&&(e=mergeArrays([this.cls],e,[this.sep]));let h=new Array(e.length).fill(0);if(c!==null){const g=d&&this instanceof RobertaProcessing?[this.sep]:[],_=d?[this.sep]:[];e=mergeArrays(e,g,c,_),h=mergeArrays(h,new Array(c.length+g.length+_.length).fill(1))}return{tokens:e,token_type_ids:h}}}class RobertaProcessing extends BertProcessing{}class TemplateProcessing extends PostProcessor{constructor(e){super(e),this.single=e.single,this.pair=e.pair}post_process(e,c=null,{add_special_tokens:d=!0}={}){const h=c===null?this.single:this.pair;let g=[],_=[];for(const _e of h)"SpecialToken"in _e?d&&(g.push(_e.SpecialToken.id),_.push(_e.SpecialToken.type_id)):"Sequence"in _e&&(_e.Sequence.id==="A"?(g=mergeArrays(g,e),_=mergeArrays(_,new Array(e.length).fill(_e.Sequence.type_id))):_e.Sequence.id==="B"&&(g=mergeArrays(g,c),_=mergeArrays(_,new Array(c.length).fill(_e.Sequence.type_id))));return{tokens:g,token_type_ids:_}}}class ByteLevelPostProcessor extends PostProcessor{post_process(e,c=null){return c&&(e=mergeArrays(e,c)),{tokens:e}}}class PostProcessorSequence extends PostProcessor{constructor(e){super(e),this.processors=e.processors.map(c=>PostProcessor.fromConfig(c))}post_process(e,c=null,d={}){let h;for(const g of this.processors)if(g instanceof ByteLevelPostProcessor)e=g.post_process(e).tokens,c&&(c=g.post_process(c).tokens);else{const _=g.post_process(e,c,d);e=_.tokens,h=_.token_type_ids}return{tokens:e,token_type_ids:h}}}class Decoder extends Callable{constructor(e){super(),this.config=e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=e.trim_offsets}static fromConfig(e){if(e===null)return null;switch(e.type){case"WordPiece":return new WordPieceDecoder(e);case"Metaspace":return new MetaspaceDecoder(e);case"ByteLevel":return new ByteLevelDecoder(e);case"Replace":return new ReplaceDecoder(e);case"ByteFallback":return new ByteFallback(e);case"Fuse":return new FuseDecoder(e);case"Strip":return new StripDecoder(e);case"Sequence":return new DecoderSequence(e);case"CTC":return new CTCDecoder(e);case"BPEDecoder":return new BPEDecoder(e);default:throw new Error(`Unknown Decoder type: ${e.type}`)}}_call(e){return this.decode(e)}decode(e){return this.decode_chain(e).join("")}decode_chain(e){throw Error("`decode_chain` should be implemented in subclass.")}}class ReplaceDecoder extends Decoder{decode_chain(e){const c=createPattern(this.config.pattern);return c===null?e:e.map(d=>d.replaceAll(c,this.config.content))}}class ByteFallback extends Decoder{constructor(e){super(e),this.text_decoder=new TextDecoder}decode_chain(e){const c=[];let d=[];for(const h of e){let g=null;if(h.length===6&&h.startsWith("<0x")&&h.endsWith(">")){const _=parseInt(h.slice(3,5),16);isNaN(_)||(g=_)}if(g!==null)d.push(g);else{if(d.length>0){const _=this.text_decoder.decode(Uint8Array.from(d));c.push(_),d=[]}c.push(h)}}if(d.length>0){const h=this.text_decoder.decode(Uint8Array.from(d));c.push(h),d=[]}return c}}class FuseDecoder extends Decoder{decode_chain(e){return[e.join("")]}}class StripDecoder extends Decoder{constructor(e){super(e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(e){return e.map(c=>{let d=0;for(let g=0;g<this.start&&c[g]===this.content;++g){d=g+1;continue}let h=c.length;for(let g=0;g<this.stop;++g){const _=c.length-g-1;if(c[_]===this.content){h=_;continue}else break}return c.slice(d,h)})}}class WordPieceDecoder extends Decoder{constructor(e){super(e),this.cleanup=e.cleanup}decode_chain(e){return e.map((c,d)=>(d!==0&&(c.startsWith(this.config.prefix)?c=c.replace(this.config.prefix,""):c=" "+c),this.cleanup&&(c=clean_up_tokenization(c)),c))}}class ByteLevelDecoder extends Decoder{constructor(e){super(e),this.byte_decoder=UNICODE_TO_BYTES,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(e){const c=e.join(""),d=new Uint8Array([...c].map(g=>this.byte_decoder[g]));return this.text_decoder.decode(d)}decode_chain(e){const c=[];let d=[];for(const h of e)this.added_tokens.find(g=>g.content===h)!==void 0?(d.length>0&&(c.push(this.convert_tokens_to_string(d)),d=[]),c.push(h)):d.push(h);return d.length>0&&c.push(this.convert_tokens_to_string(d)),c}}class CTCDecoder extends Decoder{constructor(e){super(e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(e){if(e.length===0)return"";const c=[e[0]];for(let g=1;g<e.length;++g)e[g]!==c.at(-1)&&c.push(e[g]);let h=c.filter(g=>g!==this.pad_token).join("");return this.cleanup&&(h=clean_up_tokenization(h).replaceAll(this.word_delimiter_token," ").trim()),h}decode_chain(e){return[this.convert_tokens_to_string(e)]}}class DecoderSequence extends Decoder{constructor(e){super(e),this.decoders=e.decoders.map(c=>Decoder.fromConfig(c))}decode_chain(e){return this.decoders.reduce((c,d)=>d.decode_chain(c),e)}}class BPEDecoder extends Decoder{constructor(e){super(e),this.suffix=this.config.suffix}decode_chain(e){return e.map((c,d)=>c.replaceAll(this.suffix,d===e.length-1?"":" "))}}class VitsDecoder extends Decoder{decode_chain(e){let c="";for(let d=1;d<e.length;d+=2)c+=e[d];return[c]}}class MetaspacePreTokenizer extends PreTokenizer{constructor(e){super(),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement,this.strRep=e.str_rep||this.replacement,this.prepend_scheme=e.prepend_scheme??"always"}pre_tokenize_text(e,{section_index:c=void 0}={}){let d=e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!d.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&c===0)&&(d=this.strRep+d),[d]}}class MetaspaceDecoder extends Decoder{constructor(e){super(e),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement}decode_chain(e){const c=[];for(let d=0;d<e.length;++d){let h=e[d].replaceAll(this.replacement," ");this.addPrefixSpace&&d==0&&h.startsWith(" ")&&(h=h.substring(1)),c.push(h)}return c}}class Precompiled extends Normalizer{constructor(e){super(e),this.charsmap=e.precompiled_charsmap}normalize(e){return e=e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),e=e.replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," "),e.includes("")?e=e.split("").map(d=>d.normalize("NFKC")).join(""):e=e.normalize("NFKC"),e}}class PreTokenizerSequence extends PreTokenizer{constructor(e){super(),this.tokenizers=e.pretokenizers.map(c=>PreTokenizer.fromConfig(c))}pre_tokenize_text(e,c){return this.tokenizers.reduce((d,h)=>h.pre_tokenize(d,c),[e])}}class WhitespacePreTokenizer extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,c){return e.match(/\w+|[^\w\s]+/g)||[]}}class WhitespaceSplit extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,c){return whitespace_split(e)}}class ReplacePreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern),this.content=this.config.content}pre_tokenize_text(e,c){return this.pattern===null?[e]:[e.replaceAll(this.pattern,this.config.content)]}}const SPECIAL_TOKEN_ATTRIBUTES=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function padHelper(a,e,c,d){for(const h of Object.keys(a)){const g=e-a[h].length,_=c(h),_e=new Array(g).fill(_);a[h]=d==="right"?mergeArrays(a[h],_e):mergeArrays(_e,a[h])}}function truncateHelper(a,e){for(const c of Object.keys(a))a[c].length=e}class PreTrainedTokenizer extends Callable{constructor(c,d){super();nr(this,"return_token_type_ids",!1);nr(this,"_default_chat_template",`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`);this._tokenizer_config=d,this.normalizer=Normalizer.fromConfig(c.normalizer),this.pre_tokenizer=PreTokenizer.fromConfig(c.pre_tokenizer),this.model=TokenizerModel.fromConfig(c.model,d),this.post_processor=PostProcessor.fromConfig(c.post_processor),this.decoder=Decoder.fromConfig(c.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const h of c.added_tokens){const g=new AddedToken(h);this.added_tokens.push(g),this.model.tokens_to_ids.set(g.content,g.id),this.model.vocab[g.id]=g.content,g.special&&(this.special_tokens.push(g.content),this.all_special_ids.push(g.id))}if(this.additional_special_tokens=d.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(h=>`${h.lstrip?"\\s*":""}(${escapeRegExp$1(h.content)})${h.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=d.model_max_length,this.remove_space=d.remove_space,this.clean_up_tokenization_spaces=d.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=d.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=d.chat_template??null,Array.isArray(this.chat_template)){const h=Object.create(null);for(const{name:g,template:_}of this.chat_template){if(typeof g!="string"||typeof _!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');h[g]=_}this.chat_template=h}this._compiled_template_cache=new Map}getToken(...c){for(const d of c){const h=this._tokenizer_config[d];if(h)if(typeof h=="object"){if(h.__type==="AddedToken")return h.content;throw Error(`Unknown token: ${h}`)}else return h}return null}static async from_pretrained(c,{progress_callback:d=null,config:h=null,cache_dir:g=null,local_files_only:_=!1,revision:_e="main",legacy:et=null}={}){const tt=await loadTokenizer(c,{progress_callback:d,config:h,cache_dir:g,local_files_only:_,revision:_e,legacy:et});return new this(...tt)}_call(c,{text_pair:d=null,add_special_tokens:h=!0,padding:g=!1,truncation:_=null,max_length:_e=null,return_tensor:et=!0,return_token_type_ids:tt=null}={}){const rt=Array.isArray(c);let $;if(rt){if(c.length===0)throw Error("text array must be non-empty");if(d!==null){if(Array.isArray(d)){if(c.length!==d.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");$=c.map((nt,st)=>this._encode_plus(nt,d[st],{add_special_tokens:h,return_token_type_ids:tt}))}else $=c.map(nt=>this._encode_plus(nt,null,{add_special_tokens:h,return_token_type_ids:tt}))}else{if(c==null)throw Error("text may not be null or undefined");if(Array.isArray(d))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");$=[this._encode_plus(c,d,{add_special_tokens:h,return_token_type_ids:tt})]}if(_e===null?g==="max_length"?_e=this.model_max_length:_e=max($.map(nt=>nt.input_ids.length))[0]:_||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),_e=Math.min(_e,this.model_max_length),g||_)for(let nt=0;nt<$.length;++nt)$[nt].input_ids.length!==_e&&($[nt].input_ids.length>_e?_&&truncateHelper($[nt],_e):g&&padHelper($[nt],_e,st=>st==="input_ids"?this.pad_token_id:0,this.padding_side));const b={};if(et){if(!(g&&_)&&$.some(st=>{var ot;for(const it of Object.keys(st))if(st[it].length!==((ot=$[0][it])==null?void 0:ot.length))return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const nt=[$.length,$[0].input_ids.length];for(const st of Object.keys($[0]))b[st]=new Tensor("int64",BigInt64Array.from($.flatMap(ot=>ot[st]).map(BigInt)),nt)}else{for(const nt of Object.keys($[0]))b[nt]=$.map(st=>st[nt]);if(!rt)for(const nt of Object.keys(b))b[nt]=b[nt][0]}return b}_encode_text(c){return c===null?null:(this.added_tokens_regex?c.split(this.added_tokens_regex).filter(g=>g):[c]).map((g,_)=>{if(this.added_tokens.find(et=>et.content===g)!==void 0)return g;{if(this.remove_space===!0&&(g=g.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(g=lowercase_and_remove_accent(g)),this.normalizer!==null&&(g=this.normalizer(g)),g.length===0)return[];const et=this.pre_tokenizer!==null?this.pre_tokenizer(g,{section_index:_}):[g];return this.model(et)}}).flat()}_encode_plus(c,d=null,{add_special_tokens:h=!0,return_token_type_ids:g=null}={}){const _=this._encode_text(c),_e=this._encode_text(d),et=this.post_processor?this.post_processor(_,_e,{add_special_tokens:h}):{tokens:mergeArrays(_??[],_e??[])},tt=this.model.convert_tokens_to_ids(et.tokens),rt={input_ids:tt,attention_mask:new Array(tt.length).fill(1)};return(g??this.return_token_type_ids)&&et.token_type_ids&&(rt.token_type_ids=et.token_type_ids),rt}encode(c,d=null,{add_special_tokens:h=!0,return_token_type_ids:g=null}={}){const{input_ids:_}=this._encode_plus(c,d,{add_special_tokens:h,return_token_type_ids:g});return _}batch_decode(c,d={}){return c instanceof Tensor&&(c=c.tolist()),c.map(h=>this.decode(h,d))}decode(c,d={}){if(c instanceof Tensor&&(c=prepareTensorForDecode(c)),!Array.isArray(c)||c.length===0||!isIntegralNumber(c[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(c,d)}decode_single(c,{skip_special_tokens:d=!1,clean_up_tokenization_spaces:h=null}){let g=this.model.convert_ids_to_tokens(c);d&&(g=g.filter(_e=>!this.special_tokens.includes(_e)));let _=this.decoder?this.decoder(g):g.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(_=_.replaceAll(this.decoder.end_of_word_suffix," "),d&&(_=_.trim())),(h??this.clean_up_tokenization_spaces)&&(_=clean_up_tokenization(_)),_}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(c,{chat_template:d=null,add_generation_prompt:h=!1,tokenize:g=!0,padding:_=!1,truncation:_e=!1,max_length:et=null,return_tensor:tt=!0,tokenizer_kwargs:rt={},...$}={}){if(this.chat_template&&typeof this.chat_template=="object"||this.chat_template===null&&this.default_chat_template&&typeof this.default_chat_template=="object"){const ot=this.chat_template??this.default_chat_template;if(d!==null&&Object.hasOwn(ot,d))d=ot[d];else if(d===null&&"default"in ot)d=ot.default;else if(d===null)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(ot).sort()}.`)}else d??(d=this.chat_template??this.default_chat_template);if(typeof d!="string")throw Error(`chat_template must be a string, but got ${typeof d}`);let b=this._compiled_template_cache.get(d);b===void 0&&(b=new Template$1(d),this._compiled_template_cache.set(d,b));const nt=Object.create(null);for(const ot of SPECIAL_TOKEN_ATTRIBUTES){const it=this.getToken(ot);it&&(nt[ot]=it)}const st=b.render({messages:c,add_generation_prompt:h,...nt,...$});return g?this._call(st,{add_special_tokens:!1,padding:_,truncation:_e,max_length:et,return_tensor:tt,...rt}).input_ids:st}}class BertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"return_token_type_ids",!0)}}class AlbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"return_token_type_ids",!0)}}class MobileBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"return_token_type_ids",!0)}}class SqueezeBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"return_token_type_ids",!0)}}class DebertaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"return_token_type_ids",!0)}}class DebertaV2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"return_token_type_ids",!0)}}class HerbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"return_token_type_ids",!0)}}class ConvBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"return_token_type_ids",!0)}}class RoFormerTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"return_token_type_ids",!0)}}class DistilBertTokenizer extends PreTrainedTokenizer{}class CamembertTokenizer extends PreTrainedTokenizer{}class XLMTokenizer extends PreTrainedTokenizer{constructor(c,d){super(c,d);nr(this,"return_token_type_ids",!0);console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ElectraTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"return_token_type_ids",!0)}}class T5Tokenizer extends PreTrainedTokenizer{}class GPT2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}}class BartTokenizer extends PreTrainedTokenizer{}class MBartTokenizer extends PreTrainedTokenizer{constructor(e,c){super(e,c),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(d=>this.languageRegex.test(d)),this.lang_to_token=d=>d}_build_translation_inputs(e,c,d){return _build_translation_inputs(this,e,c,d)}}class MBart50Tokenizer extends MBartTokenizer{}class RobertaTokenizer extends PreTrainedTokenizer{}class BloomTokenizer extends GPT2Tokenizer{constructor(e,c){var g,_;const d=".,!?",h=(_=(g=e.pre_tokenizer)==null?void 0:g.pretokenizers[0])==null?void 0:_.pattern;h&&h.Regex===` ?[^(\\s|[${d}])]+`&&(h.Regex=` ?[^\\s${d}]+`),super(e,c)}}const SPIECE_UNDERLINE="";class LlamaTokenizer extends PreTrainedTokenizer{constructor(c,d){super(c,d);nr(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`);nr(this,"DEFAULT_SYSTEM_PROMPT",`You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.

If a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.`);this.use_default_system_prompt=d.use_default_system_prompt??!1,this.legacy=d.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new MetaspacePreTokenizer({replacement:SPIECE_UNDERLINE,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(c){if(c===null)return null;if(this.legacy||c.length===0)return super._encode_text(c);let d=super._encode_text(SPIECE_UNDERLINE+c.replaceAll(SPIECE_UNDERLINE," "));return d.length>1&&d[0]===SPIECE_UNDERLINE&&this.special_tokens.includes(d[1])&&(d=d.slice(1)),d}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll(`
`,"\\n").replaceAll("'","\\'"))}}class CodeLlamaTokenizer extends LlamaTokenizer{}class XLMRobertaTokenizer extends PreTrainedTokenizer{}class MPNetTokenizer extends PreTrainedTokenizer{}class FalconTokenizer extends PreTrainedTokenizer{}class GPTNeoXTokenizer extends PreTrainedTokenizer{}class EsmTokenizer extends PreTrainedTokenizer{}class Qwen2Tokenizer extends PreTrainedTokenizer{}class GemmaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '
' + message['content'] | trim + '<end_of_turn>
' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model
'}}{% endif %}`)}}class Grok1Tokenizer extends PreTrainedTokenizer{}function _build_translation_inputs(a,e,c,d){if(!("language_codes"in a)||!Array.isArray(a.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in a)||!(a.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in a)||typeof a.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const h=d.src_lang,g=d.tgt_lang;if(!a.language_codes.includes(g))throw new Error(`Target language code "${g}" is not valid. Must be one of: {${a.language_codes.join(", ")}}`);if(h!==void 0){if(!a.language_codes.includes(h))throw new Error(`Source language code "${h}" is not valid. Must be one of: {${a.language_codes.join(", ")}}`);for(const _ of a.post_processor.config.single)if("SpecialToken"in _&&a.languageRegex.test(_.SpecialToken.id)){_.SpecialToken.id=a.lang_to_token(h);break}}return d.forced_bos_token_id=a.model.convert_tokens_to_ids([a.lang_to_token(g)])[0],a._call(e,c)}class NllbTokenizer extends PreTrainedTokenizer{constructor(e,c){super(e,c),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(d=>this.languageRegex.test(d)),this.lang_to_token=d=>d}_build_translation_inputs(e,c,d){return _build_translation_inputs(this,e,c,d)}}class M2M100Tokenizer extends PreTrainedTokenizer{constructor(e,c){super(e,c),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(d=>this.languageRegex.test(d)).map(d=>d.slice(2,-2)),this.lang_to_token=d=>`__${d}__`}_build_translation_inputs(e,c,d){return _build_translation_inputs(this,e,c,d)}}const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],WHISPER_LANGUAGE_MAPPING=new Map(WHISPER_LANGUAGES),WHISPER_TO_LANGUAGE_CODE_MAPPING=new Map([...WHISPER_LANGUAGES.map(([a,e])=>[e,a]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class WhisperTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}_decode_asr(c,{return_timestamps:d=!1,return_language:h=!1,time_precision:g=null,force_full_sequences:_=!0}={}){if(g===null)throw Error("Must specify time_precision");let _e=null;const et=d==="word";function tt(){return{language:_e,timestamp:[null,null],text:""}}const rt=[];let $=tt(),b=0;const nt=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let st=[],ot=[],it=!1,at=null;const lt=new Set(this.all_special_ids);for(const pt of c){const mt=pt.tokens,yt=et?pt.token_timestamps:null;let xt=null,gt=nt;if("stride"in pt){const[Mt,Pt,Tt]=pt.stride;if(b-=Pt,at=Mt-Tt,Pt&&(gt=Pt/g+nt),Tt)for(let St=mt.length-1;St>=0;--St){const wt=mt[St];if(wt>=nt){if(xt!==null&&(wt-nt)*g<at)break;xt=wt}}}let bt=[],jt=[];for(let Mt=0;Mt<mt.length;++Mt){const Pt=mt[Mt];if(lt.has(Pt)){const Tt=this.decode([Pt]),St=WHISPER_LANGUAGE_MAPPING.get(Tt.slice(2,-2));if(St!==void 0){if(_e!==null&&St!==_e&&!d){st.push(bt);const wt=this.findLongestCommonSequence(st)[0],Rt=this.decode(wt);$.text=Rt,rt.push($),st=[],bt=[],$=tt()}_e=$.language=St}}else if(Pt>=nt){const Tt=(Pt-nt)*g+b,St=round(Tt,2);if(xt!==null&&Pt>=xt)it=!0;else if(it||st.length>0&&Pt<gt)it=!1;else if($.timestamp[0]===null)$.timestamp[0]=St;else if(St!==$.timestamp[0]){$.timestamp[1]=St,st.push(bt),et&&ot.push(jt);const[wt,Rt]=this.findLongestCommonSequence(st,ot),At=this.decode(wt);$.text=At,et&&($.words=this.collateWordTimestamps(wt,Rt,_e)),rt.push($),st=[],bt=[],ot=[],jt=[],$=tt()}}else if(bt.push(Pt),et){let Tt=round(yt[Mt]+b,2),St;Mt+1<yt.length?St=round(yt[Mt+1]+b,2):St=null,jt.push([Tt,St])}}if("stride"in pt){const[Mt,Pt,Tt]=pt.stride;b+=Mt-Tt}bt.length>0?(st.push(bt),et&&ot.push(jt)):st.every(Mt=>Mt.length===0)&&($=tt(),st=[],bt=[],ot=[],jt=[])}if(st.length>0){if(_&&d)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[pt,mt]=this.findLongestCommonSequence(st,ot),yt=this.decode(pt);$.text=yt,et&&($.words=this.collateWordTimestamps(pt,mt,_e)),rt.push($)}let dt=Object.create(null);const ht=rt.map(pt=>pt.text).join("");if(d||h){for(let pt=0;pt<rt.length;++pt){const mt=rt[pt];d||delete mt.timestamp,h||delete mt.language}if(et){const pt=[];for(const mt of rt)for(const yt of mt.words)pt.push(yt);dt={chunks:pt}}else dt={chunks:rt}}return[ht,dt]}findLongestCommonSequence(c,d=null){let h=c[0],g=h.length,_=[];const _e=Array.isArray(d)&&d.length>0;let et=_e?[]:null,tt=_e?d[0]:null;for(let rt=1;rt<c.length;++rt){const $=c[rt];let b=0,nt=[g,g,0,0];const st=$.length;for(let pt=1;pt<g+st;++pt){const mt=pt/1e4,yt=Math.max(0,g-pt),xt=Math.min(g,g+st-pt),gt=h.slice(yt,xt),bt=Math.max(0,pt-g),jt=Math.min(st,pt),Mt=$.slice(bt,jt);if(gt.length!==Mt.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const Pt=gt.filter((St,wt)=>St===Mt[wt]).length,Tt=Pt/pt+mt;Pt>1&&Tt>b&&(b=Tt,nt=[yt,xt,bt,jt])}const[ot,it,at,lt]=nt,dt=Math.floor((it+ot)/2),ht=Math.floor((lt+at)/2);_.push(...h.slice(0,dt)),h=$.slice(ht),g=h.length,_e&&(et.push(...tt.slice(0,dt)),tt=d[rt].slice(ht))}return _.push(...h),_e?(et.push(...tt),[_,et]):[_,[]]}collateWordTimestamps(c,d,h){const[g,_,_e]=this.combineTokensIntoWords(c,h),et=[];for(let tt=0;tt<g.length;++tt){const rt=_e[tt];et.push({text:g[tt],timestamp:[d[rt.at(0)][0],d[rt.at(-1)][1]]})}return et}combineTokensIntoWords(c,d,h=`"'([{-`,g=`"'.,!?:)]}`){d=d??"english";let _,_e,et;return["chinese","japanese","thai","lao","myanmar"].includes(d)?[_,_e,et]=this.splitTokensOnUnicode(c):[_,_e,et]=this.splitTokensOnSpaces(c),this.mergePunctuations(_,_e,et,h,g)}decode(c,d){let h;return d&&d.decode_with_timestamps?(c instanceof Tensor&&(c=prepareTensorForDecode(c)),h=this.decodeWithTimestamps(c,d)):h=super.decode(c,d),h}decodeWithTimestamps(c,d){const h=(d==null?void 0:d.time_precision)??.02,g=Array.from(this.all_special_ids).at(-1)+1;let _=[[]];for(const _e of c)if(_e>=g){const et=round((_e-g)*h,2);_.push(`<|${et}|>`),_.push([])}else _[_.length-1].push(_e);return _=_.map(_e=>typeof _e=="string"?_e:super.decode(_e,d)),_.join("")}splitTokensOnUnicode(c){const d=this.decode(c,{decode_with_timestamps:!0}),h="",g=[],_=[],_e=[];let et=[],tt=[],rt=0;for(let $=0;$<c.length;++$){const b=c[$];et.push(b),tt.push($);const nt=this.decode(et,{decode_with_timestamps:!0});(!nt.includes(h)||d[rt+nt.indexOf(h)]===h)&&(g.push(nt),_.push(et),_e.push(tt),et=[],tt=[],rt+=nt.length)}return[g,_,_e]}splitTokensOnSpaces(c){const[d,h,g]=this.splitTokensOnUnicode(c),_=[],_e=[],et=[],tt=new RegExp(`^[${PUNCTUATION_REGEX}]$`,"gu");for(let rt=0;rt<d.length;++rt){const $=d[rt],b=h[rt],nt=g[rt],st=b[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),ot=$.startsWith(" "),it=$.trim(),at=tt.test(it);if(st||ot||at||_.length===0)_.push($),_e.push(b),et.push(nt);else{const lt=_.length-1;_[lt]+=$,_e[lt].push(...b),et[lt].push(...nt)}}return[_,_e,et]}mergePunctuations(c,d,h,g,_){const _e=structuredClone(c),et=structuredClone(d),tt=structuredClone(h);let rt=_e.length-2,$=_e.length-1;for(;rt>=0;)_e[rt].startsWith(" ")&&g.includes(_e[rt].trim())?(_e[$]=_e[rt]+_e[$],et[$]=mergeArrays(et[rt],et[$]),tt[$]=mergeArrays(tt[rt],tt[$]),_e[rt]="",et[rt]=[],tt[rt]=[]):$=rt,--rt;for(rt=0,$=1;$<_e.length;)!_e[rt].endsWith(" ")&&_.includes(_e[$])?(_e[rt]+=_e[$],et[rt]=mergeArrays(et[rt],et[$]),tt[rt]=mergeArrays(tt[rt],tt[$]),_e[$]="",et[$]=[],tt[$]=[]):rt=$,++$;return[_e.filter(b=>b),et.filter(b=>b.length>0),tt.filter(b=>b.length>0)]}get_decoder_prompt_ids({language:c=null,task:d=null,no_timestamps:h=!0}={}){const g=[];if(c){c=c.toLowerCase();let _=WHISPER_TO_LANGUAGE_CODE_MAPPING.get(c);if(_===void 0)if(WHISPER_LANGUAGE_MAPPING.has(c))_=c;else{const tt=c.length===2?WHISPER_LANGUAGE_MAPPING.keys():WHISPER_LANGUAGE_MAPPING.values();throw new Error(`Language "${c}" is not supported. Must be one of: ${JSON.stringify(tt)}`)}const _e=this.model.tokens_to_ids.get(`<|${_}|>`);if(_e===void 0)throw new Error(`Unable to find language "${_}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);g.push(_e)}else g.push(null);if(d){if(d=d.toLowerCase(),d!=="transcribe"&&d!=="translate")throw new Error(`Task "${d}" is not supported. Must be one of: ["transcribe", "translate"]`);const _=this.model.tokens_to_ids.get(`<|${d}|>`);if(_===void 0)throw new Error(`Unable to find task "${d}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);g.push(_)}else g.push(null);if(h){const _=this.model.tokens_to_ids.get("<|notimestamps|>");if(_===void 0)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');g.push(_)}return g.map((_,_e)=>[_e+1,_]).filter(_=>_[1]!==null)}}class CodeGenTokenizer extends PreTrainedTokenizer{}class CLIPTokenizer extends PreTrainedTokenizer{}class SiglipTokenizer extends PreTrainedTokenizer{}class MarianTokenizer extends PreTrainedTokenizer{constructor(e,c){super(e,c),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(d=>this.languageRegex.test(d)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(e){if(e===null)return null;const[c,...d]=e.trim().split(this.languageRegex);if(d.length===0)return super._encode_text(c);if(d.length===2){const[h,g]=d;return this.supported_language_codes.includes(h)||console.warn(`Unsupported language code "${h}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),mergeArrays([h],super._encode_text(g))}}}class Wav2Vec2CTCTokenizer extends PreTrainedTokenizer{}class BlenderbotTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);nr(this,"_default_chat_template","{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}")}}class BlenderbotSmallTokenizer extends BlenderbotTokenizer{}class SpeechT5Tokenizer extends PreTrainedTokenizer{}class NougatTokenizer extends PreTrainedTokenizer{}class VitsTokenizer extends PreTrainedTokenizer{constructor(e,c){super(e,c),this.decoder=new VitsDecoder({})}}class CohereTokenizer extends PreTrainedTokenizer{}class AutoTokenizer{static async from_pretrained(e,{quantized:c=!0,progress_callback:d=null,config:h=null,cache_dir:g=null,local_files_only:_=!1,revision:_e="main",legacy:et=null}={}){var nt;const[tt,rt]=await loadTokenizer(e,{quantized:c,progress_callback:d,config:h,cache_dir:g,local_files_only:_,revision:_e,legacy:et}),$=((nt=rt.tokenizer_class)==null?void 0:nt.replace(/Fast$/,""))??"PreTrainedTokenizer";let b=this.TOKENIZER_CLASS_MAPPING[$];return b||(console.warn(`Unknown tokenizer class "${$}", attempting to construct from base class.`),b=PreTrainedTokenizer),new b(tt,rt)}}nr(AutoTokenizer,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer,DistilBertTokenizer,CamembertTokenizer,DebertaTokenizer,DebertaV2Tokenizer,BertTokenizer,HerbertTokenizer,ConvBertTokenizer,RoFormerTokenizer,XLMTokenizer,ElectraTokenizer,MobileBertTokenizer,SqueezeBertTokenizer,AlbertTokenizer,GPT2Tokenizer,BartTokenizer,MBartTokenizer,MBart50Tokenizer,RobertaTokenizer,WhisperTokenizer,CodeGenTokenizer,CLIPTokenizer,SiglipTokenizer,MarianTokenizer,BloomTokenizer,NllbTokenizer,M2M100Tokenizer,LlamaTokenizer,CodeLlamaTokenizer,XLMRobertaTokenizer,MPNetTokenizer,FalconTokenizer,GPTNeoXTokenizer,EsmTokenizer,Wav2Vec2CTCTokenizer,BlenderbotTokenizer,BlenderbotSmallTokenizer,SpeechT5Tokenizer,NougatTokenizer,VitsTokenizer,Qwen2Tokenizer,GemmaTokenizer,Grok1Tokenizer,CohereTokenizer,PreTrainedTokenizer});async function loadConfig(a,e){return await getModelJSON(a,"config.json",!0,e)}class PretrainedConfig{constructor(e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,e)}static async from_pretrained(e,{progress_callback:c=null,config:d=null,cache_dir:h=null,local_files_only:g=!1,revision:_="main"}={}){let _e=d??await loadConfig(e,{progress_callback:c,config:d,cache_dir:h,local_files_only:g,revision:_});return new this(_e)}}class AutoConfig{static async from_pretrained(...e){return PretrainedConfig.from_pretrained(...e)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,c){for(let d of c)this.processors.forEach(h=>h(e,d))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(e,c){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.force_token_map=Object.fromEntries(e??[])}_call(e,c){let d=this.force_token_map[e.length];return exists(d)&&(c.data.fill(-1/0),c.data[d]=0),c}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.bos_token_id=e}_call(e,c){return e.length===1&&(c.data.fill(-1/0),c.data[this.bos_token_id]=0),c}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(e,c){super(),this.max_length=e,this.forced_eos_token_id=c}_call(e,c){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(e,c){super(),this.begin_suppress_tokens=e,this.begin_index=c}_call(e,c){if(e.length===this.begin_index)for(let d of this.begin_suppress_tokens)c.data[d]=-1/0;return c}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.eos_token_id=e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(e.forced_decoder_ids||[]).length+2,e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,c){const d=c.data;if(d[this.no_timestamps_token_id]=-1/0,e.length===this.begin_index-1)return d.fill(-1/0),d[this.timestamp_begin]=0,c;const h=e.slice(this.begin_index),g=h.length>=1&&h[h.length-1]>=this.timestamp_begin,_=h.length<2||h[h.length-2]>=this.timestamp_begin;if(g&&(_?d.subarray(this.timestamp_begin).fill(-1/0):d.subarray(0,this.eos_token_id).fill(-1/0)),e.length===this.begin_index&&this.max_initial_timestamp_index!==null){const rt=this.timestamp_begin+this.max_initial_timestamp_index;d.subarray(rt+1).fill(-1/0)}const _e=log_softmax(d),et=Math.log(_e.subarray(this.timestamp_begin).map(Math.exp).reduce((rt,$)=>rt+$)),tt=max(_e.subarray(0,this.timestamp_begin))[0];return et>tt&&d.subarray(0,this.timestamp_begin).fill(-1/0),c}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){const c=e.length,d=[];for(let g=0;g<c+1-this.no_repeat_ngram_size;++g){const _=[];for(let _e=0;_e<this.no_repeat_ngram_size;++_e)_.push(e[g+_e]);d.push(_)}const h=new Map;for(const g of d){const _=g.slice(0,g.length-1),_e=JSON.stringify(_),et=h.get(_e)??[];et.push(g[g.length-1]),h.set(_e,et)}return h}getGeneratedNgrams(e,c){const d=c.slice(c.length+1-this.no_repeat_ngram_size,c.length);return e.get(JSON.stringify(d))??[]}calcBannedNgramTokens(e){const c=[];if(e.length+1<this.no_repeat_ngram_size)return c;{const d=this.getNgrams(e);return this.getGeneratedNgrams(d,e)}}_call(e,c){const d=this.calcBannedNgramTokens(e);for(const h of d)c.data[h]=-1/0;return c}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.penalty=e}_call(e,c){for(const d of e)c.data[d]<0?c.data[d]*=this.penalty:c.data[d]/=this.penalty;return c}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(e,c){super(),this.min_length=e,this.eos_token_id=Array.isArray(c)?c:[c]}_call(e,c){if(e.length<this.min_length)for(const d of this.eos_token_id)c.data[d]=-1/0;return c}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(e,c,d){super(),this.prompt_length_to_skip=e,this.min_new_tokens=c,this.eos_token_id=Array.isArray(d)?d:[d]}_call(e,c){if(e.length-this.prompt_length_to_skip<this.min_new_tokens)for(const h of this.eos_token_id)c.data[h]=-1/0;return c}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(e,c){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(c)?c:[c]}_call(e,c){for(const d of this.bad_words_ids){let h=!0;for(let g=1;g<=d.length-1&&d.length<e.length;++g)if(d.at(-g-1)!==e.at(-g)){h=!1;break}h&&(c.data[d.at(-1)]=-1/0)}return c}}const GenerationConfig=class{constructor(a={}){this.max_length=a.max_length??20,this.max_new_tokens=a.max_new_tokens??null,this.min_length=a.min_length??0,this.min_new_tokens=a.min_new_tokens??null,this.early_stopping=a.early_stopping??!1,this.max_time=a.max_time??null,this.do_sample=a.do_sample??!1,this.num_beams=a.num_beams??1,this.num_beam_groups=a.num_beam_groups??1,this.penalty_alpha=a.penalty_alpha??null,this.use_cache=a.use_cache??!0,this.temperature=a.temperature??1,this.top_k=a.top_k??50,this.top_p=a.top_p??1,this.typical_p=a.typical_p??1,this.epsilon_cutoff=a.epsilon_cutoff??0,this.eta_cutoff=a.eta_cutoff??0,this.diversity_penalty=a.diversity_penalty??0,this.repetition_penalty=a.repetition_penalty??1,this.encoder_repetition_penalty=a.encoder_repetition_penalty??1,this.length_penalty=a.length_penalty??1,this.no_repeat_ngram_size=a.no_repeat_ngram_size??0,this.bad_words_ids=a.bad_words_ids??null,this.force_words_ids=a.force_words_ids??null,this.renormalize_logits=a.renormalize_logits??!1,this.constraints=a.constraints??null,this.forced_bos_token_id=a.forced_bos_token_id??null,this.forced_eos_token_id=a.forced_eos_token_id??null,this.remove_invalid_values=a.remove_invalid_values??!1,this.exponential_decay_length_penalty=a.exponential_decay_length_penalty??null,this.suppress_tokens=a.suppress_tokens??null,this.begin_suppress_tokens=a.begin_suppress_tokens??null,this.forced_decoder_ids=a.forced_decoder_ids??null,this.num_return_sequences=a.num_return_sequences??1,this.output_attentions=a.output_attentions??!1,this.output_hidden_states=a.output_hidden_states??!1,this.output_scores=a.output_scores??!1,this.return_dict_in_generate=a.return_dict_in_generate??!1,this.pad_token_id=a.pad_token_id??null,this.bos_token_id=a.bos_token_id??null,this.eos_token_id=a.eos_token_id??null,this.encoder_no_repeat_ngram_size=a.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=a.decoder_start_token_id??null,this.generation_kwargs=a.generation_kwargs??{}}};class Sampler extends Callable{constructor(e){super(),this.generation_config=e}_call(e,c=-1){return this.sample(e,c)}sample(e,c){throw Error("sample should be implemented in subclasses.")}getLogits(e,c){let d=e.dims.at(-1),h=e.data;if(c===-1)h=h.slice(-d);else{let g=c*d;h=h.slice(g,g+d)}return this.generation_config.temperature>0&&(h=h.map(g=>g/this.generation_config.temperature)),h}randomSelect(e){let c=e.reduce((h,g)=>h+g,0),d=Math.random()*c;for(let h=0;h<e.length;++h)if(d-=e[h],d<=0)return h;return 0}static getSampler(e){if(e.do_sample)return new MultinomialSampler(e);if(e.num_beams>1)return new BeamSearchSampler(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new GreedySampler(e)}}class GreedySampler extends Sampler{sample(e,c=-1){let d=this.getLogits(e,c);return[[max(d)[1],0]]}}class MultinomialSampler extends Sampler{sample(e,c=-1){let d=e.dims.at(-1);this.generation_config.top_k>0&&(d=Math.min(this.generation_config.top_k,d));const h=this.getLogits(e,c),g=getTopItems(h,d),_=softmax(g.map(_e=>_e[1]));return Array.from({length:this.generation_config.num_beams},()=>{const _e=this.randomSelect(_);return[g[_e][0],Math.log(_[_e])]})}}class BeamSearchSampler extends Sampler{sample(e,c=-1){let d=e.dims.at(-1);this.generation_config.top_k>0&&(d=Math.min(this.generation_config.top_k,d));const h=this.getLogits(e,c),g=getTopItems(h,d),_=softmax(g.map(_e=>_e[1]));return Array.from({length:this.generation_config.num_beams},(_e,et)=>[g[et][0],Math.log(_[et])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(a,e,c){let d=`onnx/${e}${c.quantized?"_quantized":""}.onnx`,h=await getModelFile(a,d,!0,c);try{return await InferenceSession.create(h,{executionProviders})}catch(g){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw g;return console.warn(g),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(h,{executionProviders:["wasm"]})}}function validateInputs(a,e){const c=Object.create(null),d=[];for(const _ of a.inputNames){const _e=e[_];if(!(_e instanceof Tensor)){d.push(_);continue}c[_]=env.wasm.proxy?_e.clone():_e}if(d.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${d.join(", ")}.`);const h=Object.keys(e).length,g=a.inputNames.length;if(h>g){let _=Object.keys(e).filter(_e=>!a.inputNames.includes(_e));console.warn(`WARNING: Too many inputs were provided (${h} > ${g}). The following inputs will be ignored: "${_.join(", ")}".`)}return c}async function sessionRun(a,e){const c=validateInputs(a,e);try{let d=await a.run(c);return d=replaceTensors(d),d}catch(d){throw console.error(`An error occurred during model execution: "${d}".`),console.error("Inputs given to model:",c),d}}function replaceTensors(a){for(let e in a)a[e]instanceof ONNXTensor?a[e]=new Tensor(a[e]):typeof a[e]=="object"&&replaceTensors(a[e]);return a}function toI64Tensor(a){if(a instanceof Tensor)return a;if(a.length===0)throw Error("items must be non-empty");if(Array.isArray(a[0])){if(a.some(e=>e.length!==a[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(a.flat().map(e=>BigInt(e))),[a.length,a[0].length])}else return new Tensor("int64",BigInt64Array.from(a.map(e=>BigInt(e))),[1,a.length])}function prepareAttentionMask(a,e){let c=a.config.pad_token_id??null,d=a.config.eos_token_id??null;isIntegralNumber(d)&&(d=[d]);let h=e.indexOf(c)!==-1,g=d===null||!d.includes(c);if(h&&g){let _=BigInt64Array.from(e.data.map(_e=>_e!=c));return new Tensor("int64",_,e.dims)}else return ones_like(e)}function preparePositionIds(a,e,c){if(!a.inputNames.includes("position_ids"))return;const d=new BigInt64Array(e.attention_mask.data.length);for(let h=0;h<e.attention_mask.dims[0];++h){let g=h*e.attention_mask.dims[1],_=BigInt(0);for(let _e=0;_e<e.attention_mask.dims[1];++_e){const et=g+_e;e.attention_mask.data[et]===0n?d[et]=BigInt(1):(d[et]=_,_+=e.attention_mask.data[et])}}e.position_ids=new Tensor("int64",d,e.attention_mask.dims),c&&(e.position_ids=e.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(a){return new Tensor("bool",[a],[1])}async function seq2seqForward(a,e){let{encoder_outputs:c,past_key_values:d}=e;c||(c=(await encoderForward(a,e)).last_hidden_state);let h={input_ids:e.decoder_input_ids,encoder_hidden_states:c};const g=!!d;a.decoder_merged_session.inputNames.includes("use_cache_branch")&&(h.use_cache_branch=boolTensor(g)),a.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(h.encoder_attention_mask=e.attention_mask),preparePositionIds(a.decoder_merged_session,h,g),a.addPastKeyValues(h,d);const _=await sessionRun(a.decoder_merged_session,h);let _e=_.logits;d=a.getPastKeyValues(_,d);const et=a.getAttentions(_);return new Seq2SeqLMOutput({logits:_e,past_key_values:d,encoder_outputs:c,...et})}function seq2seqStartBeams(a,e,c,d){let h=[],g=0;const _=a.requires_attention_mask??!0;let _e=c.decoder_input_ids??c.decoder_start_token_id??c.bos_token_id??c.eos_token_id;_e instanceof Tensor?_e=_e.tolist().flat():Array.isArray(_e)||(_e=[_e]);for(let et of e){et.dims=[1,...et.dims];let tt={inputs:et,encoder_outputs:null,prev_model_outputs:null,output_token_ids:_e,done:!1,score:0,id:g++};_&&(tt.attention_mask=prepareAttentionMask(a,et)),h.push(tt)}return h}async function seq2seqRunBeam(a,e){var _;const c=a.main_input_name;let d=e.output_token_ids;e.prev_model_outputs&&(d=d.slice(-1));let h={[c]:e.inputs,decoder_input_ids:toI64Tensor(d),encoder_outputs:e.encoder_outputs,past_key_values:(_=e.prev_model_outputs)==null?void 0:_.past_key_values};e.attention_mask&&(h.attention_mask=e.attention_mask);let g=await a.forward(h);return e.prev_model_outputs=g,e.encoder_outputs=g.encoder_outputs,g}function seq2seqUpdatebeam(a,e){a.output_token_ids=[...a.output_token_ids,e]}async function encoderForward(a,e){const c=Object.create(null);for(const d of a.session.inputNames)c[d]=e[d];return a.session.inputNames.includes("token_type_ids")&&!c.token_type_ids&&(c.token_type_ids=new Tensor("int64",new BigInt64Array(c.input_ids.data.length),c.input_ids.dims)),await sessionRun(a.session,c)}async function decoderForward(a,e){let{input_ids:c,past_key_values:d,attention_mask:h}=e,g={input_ids:c,attention_mask:h??prepareAttentionMask(a,c)};const _=!!d;a.session.inputNames.includes("use_cache_branch")&&(g.use_cache_branch=boolTensor(_)),preparePositionIds(a.session,g,_),a.addPastKeyValues(g,d);let _e=await sessionRun(a.session,g),et=_e.logits;return d=a.getPastKeyValues(_e,d),{logits:et,past_key_values:d}}function decoderStartBeams(a,e,c,d,h){let g=[],_=0;for(let _e of e){let et=_e.tolist().map(Number);_e.dims=[1,..._e.dims];let tt;h?(tt=h[_],tt.dims=[1,...tt.dims]):tt=prepareAttentionMask(a,_e);let rt={input:_e,model_input_ids:_e,attention_mask:tt,prev_model_outputs:null,output_token_ids:et,num_output_tokens:d,done:!1,score:0,id:_++};g.push(rt)}return g}async function decoderRunBeam(a,e){var g;let c=new BigInt64Array(e.output_token_ids.length).fill(1n),d={input_ids:e.model_input_ids,attention_mask:new Tensor("int64",c,[1,c.length]),past_key_values:(g=e.prev_model_outputs)==null?void 0:g.past_key_values},h=await a.forward(d);return e.prev_model_outputs=h,h}function decoderUpdatebeam(a,e){a.output_token_ids=[...a.output_token_ids,e],a.model_input_ids=new Tensor("int64",[BigInt(e)],[1,1])}class PreTrainedModel extends Callable{constructor(c,d){super();nr(this,"main_input_name","input_ids");this.config=c,this.session=d;const h=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),g=MODEL_TYPE_MAPPING.get(h);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,g===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):g===MODEL_TYPES.Seq2Seq||g===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):g===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const c=[];for(let d of Object.keys(this)){const h=this[d];h instanceof InferenceSession&&c.push(h.handler.dispose())}return await Promise.all(c)}static async from_pretrained(c,{quantized:d=!0,progress_callback:h=null,config:g=null,cache_dir:_=null,local_files_only:_e=!1,revision:et="main",model_file_name:tt=null}={}){let rt={quantized:d,progress_callback:h,config:g,cache_dir:_,local_files_only:_e,revision:et,model_file_name:tt};const $=MODEL_CLASS_TO_NAME_MAPPING.get(this),b=MODEL_TYPE_MAPPING.get($);let nt;return b===MODEL_TYPES.DecoderOnly?nt=await Promise.all([AutoConfig.from_pretrained(c,rt),constructSession(c,rt.model_file_name??"decoder_model_merged",rt),getModelJSON(c,"generation_config.json",!1,rt)]):b===MODEL_TYPES.Seq2Seq||b===MODEL_TYPES.Vision2Seq?nt=await Promise.all([AutoConfig.from_pretrained(c,rt),constructSession(c,"encoder_model",rt),constructSession(c,"decoder_model_merged",rt),getModelJSON(c,"generation_config.json",!1,rt)]):b===MODEL_TYPES.MaskGeneration?nt=await Promise.all([AutoConfig.from_pretrained(c,rt),constructSession(c,"vision_encoder",rt),constructSession(c,"prompt_encoder_mask_decoder",rt)]):b===MODEL_TYPES.EncoderDecoder?nt=await Promise.all([AutoConfig.from_pretrained(c,rt),constructSession(c,"encoder_model",rt),constructSession(c,"decoder_model_merged",rt)]):(b!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${$??(g==null?void 0:g.model_type)}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),nt=await Promise.all([AutoConfig.from_pretrained(c,rt),constructSession(c,rt.model_file_name??"model",rt)])),new this(...nt)}async _call(c){return await this.forward(c)}async forward(c){return await this._forward(this,c)}_get_logits_processor(c,d,h=null){const g=new LogitsProcessorList;if(c.repetition_penalty!==null&&c.repetition_penalty!==1&&g.push(new RepetitionPenaltyLogitsProcessor(c.repetition_penalty)),c.no_repeat_ngram_size!==null&&c.no_repeat_ngram_size>0&&g.push(new NoRepeatNGramLogitsProcessor(c.no_repeat_ngram_size)),c.bad_words_ids!==null&&g.push(new NoBadWordsLogitsProcessor(c.bad_words_ids,c.eos_token_id)),c.min_length!==null&&c.eos_token_id!==null&&c.min_length>0&&g.push(new MinLengthLogitsProcessor(c.min_length,c.eos_token_id)),c.min_new_tokens!==null&&c.eos_token_id!==null&&c.min_new_tokens>0&&g.push(new MinNewTokensLengthLogitsProcessor(d,c.min_new_tokens,c.eos_token_id)),c.forced_bos_token_id!==null&&g.push(new ForcedBOSTokenLogitsProcessor(c.forced_bos_token_id)),c.forced_eos_token_id!==null&&g.push(new ForcedEOSTokenLogitsProcessor(c.max_length,c.forced_eos_token_id)),c.begin_suppress_tokens!==null){let _=d>1||c.forced_bos_token_id===null?d:d+1;c.forced_decoder_ids!==null&&(_+=c.forced_decoder_ids[c.forced_decoder_ids.length-1][0]),g.push(new SuppressTokensAtBeginLogitsProcessor(c.begin_suppress_tokens,_))}return c.forced_decoder_ids!==null&&g.push(new ForceTokensLogitsProcessor(c.forced_decoder_ids)),h!==null&&g.extend(h),g}_get_generation_config(c){let d=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(d,this.generation_config),c!==null&&Object.assign(d,c),d}async generate(c,d=null,h=null,{inputs_attention_mask:g=null}={}){if(!this.can_generate){let at=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const lt=this.config.model_type,dt=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(lt)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(lt)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(lt)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(lt);throw dt&&(at+=` Please use the following class instead: '${dt[0]}'`),Error(at)}if(!(c instanceof Tensor)&&!isTypedArray(c)&&!Array.isArray(c))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${c.constructor.name}".`);let _;if(this.config.is_encoder_decoder)_=0;else if(_=c instanceof Tensor?c.dims.at(-1):c.length,_===0)throw Error("Must supply a non-empty array of input token ids.");d=this._get_generation_config(d),h=h??new LogitsProcessorList,h=this._get_logits_processor(d,_,h);let _e=d.eos_token_id;_e!==null&&!Array.isArray(_e)&&(_e=[_e]);let et=1;const tt=et+(d.max_new_tokens??1/0),rt=Number.isInteger(d.max_length)&&(d.max_new_tokens??null)===null;let $=Sampler.getSampler(d),b=this.getStartBeams(c,d,et,g);for(;b.some(it=>!it.done)&&et<tt;){let it=[];for(let at of b){if(at.done){it.push(at);continue}if(rt&&at.output_token_ids.length>=d.max_length){at.done=!0,it.push(at);continue}let lt=await this.runBeam(at);d.output_attentions&&this.addAttentionsToBeam(at,lt),d.output_scores;let dt=lt.logits.slice(null,-1,null);h(at.output_token_ids,dt);let ht=$(dt);for(let[pt,mt]of ht){let yt={...at};this.updateBeam(yt,pt),yt.score+=mt,_e&&_e.includes(pt)&&(yt.done=!0),it.push(yt)}}++et,it=this.groupBeams(it).map(at=>at.sort((lt,dt)=>dt.score-lt.score).slice(0,d.num_beams)),b=it.flat(),d.callback_function&&d.callback_function(b)}const nt=this.groupBeams(b),st=it=>nt.map(at=>d.num_return_sequences>1?at.slice(0,d.num_return_sequences).map(lt=>lt[it]):[at[0][it]]).flat(),ot=st("output_token_ids");if(d.return_dict_in_generate){const it=st("decoder_attentions"),at=st("cross_attentions");return{sequences:ot,decoder_attentions:it,cross_attentions:at}}else return ot}addAttentionsToBeam(c,d){if(this.config.is_encoder_decoder){if(!d.cross_attentions||d.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");c.cross_attentions||(c.cross_attentions=[]),c.cross_attentions.push(d.cross_attentions)}if(!d.decoder_attentions||d.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");c.decoder_attentions||(c.decoder_attentions=[]),c.decoder_attentions.push(d.decoder_attentions)}groupBeams(c){const d=Object.create(null);for(const h of c)d[h.id]===void 0?d[h.id]=[h]:d[h.id].push(h);return Object.values(d)}getPastKeyValues(c,d){const h=Object.create(null);for(const g in c)if(g.startsWith("present")){let _=g.replace("present","past_key_values");d&&g.includes("encoder")?h[_]=d[_]:h[_]=c[g]}return h}getAttentions(c){const d=Object.create(null);for(const h of["cross_attentions","decoder_attentions"]){const g=[];for(const _ in c)if(_.startsWith(h)){const _e=_.split(".").pop();g[_e]=c[_]}d[h]=g}return d}addPastKeyValues(c,d){if(d)Object.assign(c,d);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let g=[1,this.num_encoder_heads,0,this.encoder_dim_kv],_=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let _e=0;_e<this.num_decoder_layers;++_e)c[`past_key_values.${_e}.encoder.key`]=new Tensor("float32",[],g),c[`past_key_values.${_e}.encoder.value`]=new Tensor("float32",[],g),c[`past_key_values.${_e}.decoder.key`]=new Tensor("float32",[],_),c[`past_key_values.${_e}.decoder.value`]=new Tensor("float32",[],_)}else if(this.config.model_type==="falcon"){let g=[1*this.num_heads,0,this.dim_kv];for(let _=0;_<this.num_layers;++_)c[`past_key_values.${_}.key`]=new Tensor("float32",[],g),c[`past_key_values.${_}.value`]=new Tensor("float32",[],g)}else if(this.config.multi_query){let g=[1*this.num_heads,0,2*this.dim_kv];for(let _=0;_<this.num_layers;++_)c[`past_key_values.${_}.key_value`]=new Tensor("float32",[],g)}else if(this.config.model_type==="bloom"){let g=[1*this.num_heads,this.dim_kv,0],_=[1*this.num_heads,0,this.dim_kv];for(let _e=0;_e<this.num_layers;++_e)c[`past_key_values.${_e}.key`]=new Tensor("float32",[],g),c[`past_key_values.${_e}.value`]=new Tensor("float32",[],_)}else{let g=[1,this.num_heads,0,this.dim_kv];for(let _=0;_<this.num_layers;++_)c[`past_key_values.${_}.key`]=new Tensor("float32",[],g),c[`past_key_values.${_}.value`]=new Tensor("float32",[],g)}}getStartBeams(c,d,h,g){return this._getStartBeams(this,c,d,h,g)}async runBeam(c){return await this._runBeam(this,c)}updateBeam(c,d){return this._updateBeam(c,d)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class NomicBertPreTrainedModel extends PreTrainedModel{}class NomicBertModel extends NomicBertPreTrainedModel{}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(e,c,d,h){super(e,c),this.decoder_merged_session=d,this.generation_config=h,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(e,c,d,h){super(e,c),this.decoder_merged_session=d,this.generation_config=h,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(e,c,d,h){super(e,c),this.decoder_merged_session=d,this.generation_config=h,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(e,c,d,h){super(e,c),this.decoder_merged_session=d,this.generation_config=h,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(e,c,d,h){super(e,c),this.decoder_merged_session=d,this.generation_config=h,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(e,c,d,h){super(e,c),this.decoder_merged_session=d,this.generation_config=h,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(e,c,d,h){super(e,c),this.decoder_merged_session=d,this.generation_config=h,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{constructor(c,d,h,g){super(c,d);nr(this,"requires_attention_mask",!1);nr(this,"main_input_name","input_features");this.decoder_merged_session=h,this.generation_config=g,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(c,d=null,h=null){if(d=this._get_generation_config(d),d.return_timestamps??(d.return_timestamps=!1),d.return_timestamps&&(h=[new WhisperTimeStampLogitsProcessor(d)]),d.return_token_timestamps&&(d.output_attentions=!0,d.return_dict_in_generate=!0,d.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!d.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const g=await super.generate(c,d,h);return d.return_token_timestamps&&d.alignment_heads&&(g.token_timestamps=this._extract_token_timestamps(g,d.alignment_heads,d.num_frames)),g}_extract_token_timestamps(c,d,h=null,g=.02){if(!c.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let _=this.config.median_filter_width;_===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),_=7);const _e=c.cross_attentions.map(rt=>{let $=Array.from({length:this.config.decoder_layers},(at,lt)=>cat(rt.map(dt=>dt[lt]),2)),b=stack(d.map(([at,lt])=>h?$[at].slice(null,lt,null,[0,h]):$[at].slice(null,lt)));b=b.transpose(1,0,2,3);let[nt,st]=std_mean(b,-2,0,!0),ot=b.clone();for(let at=0;at<ot.dims[0];++at){let lt=ot[at];for(let dt=0;dt<lt.dims[0];++dt){let ht=lt[dt];const pt=nt[at][dt][0],mt=st[at][dt][0];for(let yt=0;yt<ht.dims[0];++yt){let xt=ht[yt];for(let gt=0;gt<xt.data.length;++gt)xt.data[gt]=(xt.data[gt]-mt.data[gt])/pt.data[gt];xt.data.set(medianFilter(xt.data,_))}}}return mean(ot,1)}),et=[c.sequences.length,c.sequences[0].length],tt=new Tensor("float32",new Float32Array(et[0]*et[1]),et);for(let rt=0;rt<et[0];++rt){const $=_e[rt].neg().squeeze_(0);let[b,nt]=dynamicTimeWarping($),st=Array.from({length:b.length-1},(at,lt)=>b[lt+1]-b[lt]),ot=mergeArrays([1],st).map(at=>!!at),it=[];for(let at=0;at<ot.length;++at)ot[at]&&it.push(nt[at]*g);tt[rt].data.set(it,1)}return tt}}class VisionEncoderDecoderModel extends PreTrainedModel{constructor(c,d,h,g){super(c,d);nr(this,"main_input_name","pixel_values");this.decoder_merged_session=h,this.generation_config=g;const _=this.config.encoder,_e=this.config.decoder,et=_.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(et)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(et))||console.warn(`Model type for encoder '${et}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const rt=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(_e.model_type);if(!rt)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const $=rt[1],b=new $(_e,h,g);this.add_encoder_pkv="num_decoder_layers"in b,this.add_encoder_pkv?(this.num_decoder_layers=b.num_decoder_layers,this.num_decoder_heads=b.num_decoder_heads,this.decoder_dim_kv=b.decoder_dim_kv,this.num_encoder_layers=b.num_encoder_layers,this.num_encoder_heads=b.num_encoder_heads,this.encoder_dim_kv=b.encoder_dim_kv):(this.num_layers=b.num_layers,this.num_heads=b.num_heads,this.dim_kv=b.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,c={}){return c.model_file_name??(c.model_file_name="text_model"),super.from_pretrained(e,c)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,c={}){return c.model_file_name??(c.model_file_name="vision_model"),super.from_pretrained(e,c)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(e,c={}){return c.model_file_name??(c.model_file_name="text_model"),super.from_pretrained(e,c)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(e,c={}){return c.model_file_name??(c.model_file_name="vision_model"),super.from_pretrained(e,c)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class Qwen2PreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Qwen2Model extends Qwen2PreTrainedModel{}class Qwen2ForCausalLM extends Qwen2PreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class FastViTPreTrainedModel extends PreTrainedModel{}class FastViTModel extends FastViTPreTrainedModel{}class FastViTForImageClassification extends FastViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(e){return new ImageMattingOutput(await super._call(e))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileViTV2PreTrainedModel extends PreTrainedModel{}class MobileViTV2Model extends MobileViTV2PreTrainedModel{}class MobileViTV2ForImageClassification extends MobileViTV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class Owlv2PreTrainedModel extends PreTrainedModel{}class Owlv2Model extends Owlv2PreTrainedModel{}class Owlv2ForObjectDetection extends Owlv2PreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(e){return new DetrObjectDetectionOutput(await super._call(e))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(e){return new DetrSegmentationOutput(await super._call(e))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:c}){super(),this.logits=e,this.pred_boxes=c}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:e,pred_boxes:c,pred_masks:d}){super(),this.logits=e,this.pred_boxes=c,this.pred_masks=d}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(e){return new TableTransformerObjectDetectionOutput(await super._call(e))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class DepthAnythingPreTrainedModel extends PreTrainedModel{}class DepthAnythingForDepthEstimation extends DepthAnythingPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(e){return new YolosObjectDetectionOutput(await super._call(e))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:c}){super(),this.logits=e,this.pred_boxes=c}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(e,c,d){super(e,c),this.prompt_encoder_mask_decoder=d}async get_image_embeddings({pixel_values:e}){return await encoderForward(this,{pixel_values:e})}async forward(e){if((!e.image_embeddings||!e.image_positional_embeddings)&&(e={...e,...await this.get_image_embeddings(e)}),!e.input_labels){const c=e.input_points.dims.slice(0,-1),d=c.reduce((h,g)=>h*g,1);e.input_labels=new Tensor("int64",new BigInt64Array(d).fill(1n),c)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:e.input_points,input_labels:e.input_labels,image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings})}async _call(e){return new SamImageSegmentationOutput(await super._call(e))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:e,pred_masks:c}){super(),this.iou_scores=e,this.pred_masks=c}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(e,c,d,h){super(e,c),this.decoder_merged_session=d,this.generation_config=h,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(e,c,d,h){super(e,c),this.decoder_merged_session=d,this.generation_config=h,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Wav2Vec2ForAudioFrameClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class UniSpeechPreTrainedModel extends PreTrainedModel{}class UniSpeechModel extends UniSpeechPreTrainedModel{}class UniSpeechForCTC extends UniSpeechPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechForSequenceClassification extends UniSpeechPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatPreTrainedModel extends PreTrainedModel{}class UniSpeechSatModel extends UniSpeechSatPreTrainedModel{}class UniSpeechSatForCTC extends UniSpeechSatPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechSatForSequenceClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatForAudioFrameClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class Wav2Vec2BertPreTrainedModel extends PreTrainedModel{}class Wav2Vec2BertModel extends Wav2Vec2BertPreTrainedModel{}class Wav2Vec2BertForCTC extends Wav2Vec2BertPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2BertForSequenceClassification extends Wav2Vec2BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMForXVector extends WavLMPreTrainedModel{async _call(e){return new XVectorOutput(await super._call(e))}}class WavLMForAudioFrameClassification extends WavLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(e,c,d,h){super(e,c),this.decoder_merged_session=d,this.generation_config=h,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(e,c,{threshold:d=.5,minlenratio:h=0,maxlenratio:g=20,vocoder:_=null}={}){const _e={input_ids:e},{encoder_outputs:et,encoder_attention_mask:tt}=await encoderForward(this,_e),rt=et.dims[1]/this.config.reduction_factor,$=Math.floor(rt*g),b=Math.floor(rt*h),nt=this.config.num_mel_bins;let st=[],ot=null,it=null,at=0;for(;;){++at;const ht=boolTensor(!!it);let pt;it?pt=it.output_sequence_out:pt=new Tensor("float32",new Float32Array(nt),[1,1,nt]);let mt={use_cache_branch:ht,output_sequence:pt,encoder_attention_mask:tt,speaker_embeddings:c,encoder_hidden_states:et};this.addPastKeyValues(mt,ot),it=await sessionRun(this.decoder_merged_session,mt),ot=this.getPastKeyValues(it,ot);const{prob:yt,spectrum:xt}=it;if(st.push(xt),at>=b&&(Array.from(yt.data).filter(gt=>gt>=d).length>0||at>=$))break}const lt=cat(st),{waveform:dt}=await sessionRun(_.session,{spectrogram:lt});return{spectrogram:lt,waveform:dt}}}class SpeechT5HifiGan extends PreTrainedModel{constructor(){super(...arguments);nr(this,"main_input_name","spectrogram")}}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class Starcoder2PreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Starcoder2Model extends Starcoder2PreTrainedModel{}class Starcoder2ForCausalLM extends Starcoder2PreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,c={}){return c.model_file_name??(c.model_file_name="text_model"),super.from_pretrained(e,c)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,c={}){return c.model_file_name??(c.model_file_name="audio_model"),super.from_pretrained(e,c)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(e){return new VitsModelOutput(await super._call(e))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class StableLmPreTrainedModel extends PreTrainedModel{constructor(e,c,d){super(e,c),this.generation_config=d,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class StableLmForCausalLM extends StableLmPreTrainedModel{}class EfficientNetPreTrainedModel extends PreTrainedModel{}class EfficientNetModel extends EfficientNetPreTrainedModel{}class EfficientNetForImageClassification extends EfficientNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class PretrainedMixin{static async from_pretrained(e,{quantized:c=!0,progress_callback:d=null,config:h=null,cache_dir:g=null,local_files_only:_=!1,revision:_e="main",model_file_name:et=null}={}){let tt={quantized:c,progress_callback:d,config:h,cache_dir:g,local_files_only:_,revision:_e,model_file_name:et};if(h=await AutoConfig.from_pretrained(e,tt),tt.config||(tt.config=h),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let rt of this.MODEL_CLASS_MAPPINGS){const $=rt.get(h.model_type);if($)return await $[1].from_pretrained(e,tt)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${h.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(e,tt);throw Error(`Unsupported model type: ${h.model_type}`)}}nr(PretrainedMixin,"MODEL_CLASS_MAPPINGS",null),nr(PretrainedMixin,"BASE_IF_FAIL",!1);const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["nomic_bert",["NomicBertModel",NomicBertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["wav2vec2-bert",["Wav2Vec2BertModel",Wav2Vec2BertModel]],["unispeech",["UniSpeechModel",UniSpeechModel]],["unispeech-sat",["UniSpeechSatModel",UniSpeechSatModel]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["fastvit",["FastViTModel",FastViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["mobilevitv2",["MobileViTV2Model",MobileViTV2Model]],["owlvit",["OwlViTModel",OwlViTModel]],["owlv2",["Owlv2Model",Owlv2Model]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]],["efficientnet",["EfficientNetModel",EfficientNetModel]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["qwen2",["Qwen2Model",Qwen2Model]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["starcoder2",["Starcoder2Model",Starcoder2Model]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["qwen2",["Qwen2ForCausalLM",Qwen2ForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["starcoder2",["Starcoder2ForCausalLM",Starcoder2ForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]],["stablelm",["StableLmForCausalLM",StableLmForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["fastvit",["FastViTForImageClassification",FastViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["mobilevitv2",["MobileViTV2ForImageClassification",MobileViTV2ForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]],["efficientnet",["EfficientNetForImageClassification",EfficientNetForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]],["owlv2",["Owlv2ForObjectDetection",Owlv2ForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Wav2Vec2BertForCTC]],["unispeech",["UniSpeechForCTC",UniSpeechForCTC]],["unispeech-sat",["UniSpeechSatForCTC",UniSpeechSatForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wav2Vec2BertForSequenceClassification]],["unispeech",["UniSpeechForSequenceClassification",UniSpeechForSequenceClassification]],["unispeech-sat",["UniSpeechSatForSequenceClassification",UniSpeechSatForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES=new Map([["wavlm",["WavLMForXVector",WavLMForXVector]]]),MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",UniSpeechSatForAudioFrameClassification]],["wavlm",["WavLMForAudioFrameClassification",WavLMForAudioFrameClassification]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Wav2Vec2ForAudioFrameClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["depth_anything",["DepthAnythingForDepthEstimation",DepthAnythingForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES=new Map([["clip",["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection]],["siglip",["SiglipVisionModel",SiglipVisionModel]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[a,e]of MODEL_CLASS_TYPE_MAPPING)for(const[c,d]of a.values())MODEL_TYPE_MAPPING.set(c,e),MODEL_CLASS_TO_NAME_MAPPING.set(d,c),MODEL_NAME_TO_CLASS_MAPPING.set(c,d);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[a,e,c]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(a,c),MODEL_CLASS_TO_NAME_MAPPING.set(e,a),MODEL_NAME_TO_CLASS_MAPPING.set(a,e);class AutoModel extends PretrainedMixin{}nr(AutoModel,"MODEL_CLASS_MAPPINGS",MODEL_CLASS_TYPE_MAPPING.map(e=>e[0])),nr(AutoModel,"BASE_IF_FAIL",!0);class AutoModelForSequenceClassification extends PretrainedMixin{}nr(AutoModelForSequenceClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForTokenClassification extends PretrainedMixin{}nr(AutoModelForTokenClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForSeq2SeqLM extends PretrainedMixin{}nr(AutoModelForSeq2SeqLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES]);class AutoModelForSpeechSeq2Seq extends PretrainedMixin{}nr(AutoModelForSpeechSeq2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES]);class AutoModelForTextToSpectrogram extends PretrainedMixin{}nr(AutoModelForTextToSpectrogram,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES]);class AutoModelForTextToWaveform extends PretrainedMixin{}nr(AutoModelForTextToWaveform,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES]);class AutoModelForCausalLM extends PretrainedMixin{}nr(AutoModelForCausalLM,"MODEL_CLASS_MAPPINGS",[MODEL_WITH_LM_HEAD_MAPPING_NAMES]);class AutoModelForMaskedLM extends PretrainedMixin{}nr(AutoModelForMaskedLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_MASKED_LM_MAPPING_NAMES]);class AutoModelForQuestionAnswering extends PretrainedMixin{}nr(AutoModelForQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForVision2Seq extends PretrainedMixin{}nr(AutoModelForVision2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES]);class AutoModelForImageClassification extends PretrainedMixin{}nr(AutoModelForImageClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForImageSegmentation extends PretrainedMixin{}nr(AutoModelForImageSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES]);class AutoModelForSemanticSegmentation extends PretrainedMixin{}nr(AutoModelForSemanticSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES]);class AutoModelForObjectDetection extends PretrainedMixin{}nr(AutoModelForObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForZeroShotObjectDetection extends PretrainedMixin{}nr(AutoModelForZeroShotObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForCTC extends PretrainedMixin{}nr(AutoModelForCTC,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_CTC_MAPPING_NAMES]);class AutoModelForAudioClassification extends PretrainedMixin{}nr(AutoModelForAudioClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForDocumentQuestionAnswering extends PretrainedMixin{}nr(AutoModelForDocumentQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForImageToImage extends PretrainedMixin{}nr(AutoModelForImageToImage,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES]);class AutoModelForDepthEstimation extends PretrainedMixin{}nr(AutoModelForDepthEstimation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES]);class AutoModelForImageFeatureExtraction extends PretrainedMixin{}nr(AutoModelForImageFeatureExtraction,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES]);class Seq2SeqLMOutput extends ModelOutput{constructor({logits:e,past_key_values:c,encoder_outputs:d,decoder_attentions:h=null,cross_attentions:g=null}){super(),this.logits=e,this.past_key_values=c,this.encoder_outputs=d,this.decoder_attentions=h,this.cross_attentions=g}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class XVectorOutput extends ModelOutput{constructor({logits:e,embeddings:c}){super(),this.logits=e,this.embeddings=c}}class TokenClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class MaskedLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:e,end_logits:c}){super(),this.start_logits=e,this.end_logits=c}}class CausalLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class ImageMattingOutput extends ModelOutput{constructor({alphas:e}){super(),this.alphas=e}}class VitsModelOutput extends ModelOutput{constructor({waveform:e,spectrogram:c}){super(),this.waveform=e,this.spectrogram=c}}const BROWSER_ENV=typeof self<"u",WEBWORKER_ENV=BROWSER_ENV&&self.constructor.name==="DedicatedWorkerGlobalScope";let createCanvasFunction,ImageDataClass,loadImageFunction;if(BROWSER_ENV)createCanvasFunction=(a,e)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(a,e)},loadImageFunction=self.createImageBitmap,ImageDataClass=self.ImageData;else if(sharp)loadImageFunction=async a=>{const c=(await a.metadata()).channels;let{data:d,info:h}=await a.rotate().raw().toBuffer({resolveWithObject:!0});const g=new RawImage(new Uint8ClampedArray(d),h.width,h.height,h.channels);return c!==void 0&&c!==h.channels&&g.convert(c),g};else throw new Error("Unable to load image processing library.");const RESAMPLING_MAPPING={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},CONTENT_TYPE_MAP=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class RawImage{constructor(e,c,d,h){this.data=e,this.width=c,this.height=d,this.channels=h}get size(){return[this.width,this.height]}static async read(e){if(e instanceof RawImage)return e;if(typeof e=="string"||e instanceof URL)return await this.fromURL(e);throw new Error(`Unsupported input type: ${typeof e}`)}static async fromURL(e){let c=await getFile(e);if(c.status!==200)throw new Error(`Unable to read image from "${e}" (${c.status} ${c.statusText})`);let d=await c.blob();return this.fromBlob(d)}static async fromBlob(e){if(BROWSER_ENV){let c=await loadImageFunction(e);const d=createCanvasFunction(c.width,c.height).getContext("2d");return d.drawImage(c,0,0),new this(d.getImageData(0,0,c.width,c.height).data,c.width,c.height,4)}else{let c=sharp(await e.arrayBuffer());return await loadImageFunction(c)}}static fromTensor(e,c="CHW"){if(e.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${e.dims.length} dimensions.`);if(c==="CHW")e=e.transpose(1,2,0);else if(c!=="HWC")throw new Error(`Unsupported channel format: ${c}`);if(!(e.data instanceof Uint8ClampedArray||e.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${e.type}`);switch(e.dims[2]){case 1:case 2:case 3:case 4:return new RawImage(e.data,e.dims[1],e.dims[0],e.dims[2]);default:throw new Error(`Unsupported number of channels: ${e.dims[2]}`)}}grayscale(){if(this.channels===1)return this;let e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let c=0,d=0;c<this.data.length;c+=this.channels){const h=this.data[c],g=this.data[c+1],_=this.data[c+2];e[d++]=Math.round(.2989*h+.587*g+.114*_)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,1)}rgb(){if(this.channels===3)return this;let e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let c=0,d=0;c<this.data.length;++c)e[d++]=this.data[c],e[d++]=this.data[c],e[d++]=this.data[c];break;case 4:for(let c=0,d=0;c<this.data.length;c+=4)e[d++]=this.data[c],e[d++]=this.data[c+1],e[d++]=this.data[c+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,3)}rgba(){if(this.channels===4)return this;let e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let c=0,d=0;c<this.data.length;++c)e[d++]=this.data[c],e[d++]=this.data[c],e[d++]=this.data[c],e[d++]=255;break;case 3:for(let c=0,d=0;c<this.data.length;c+=3)e[d++]=this.data[c],e[d++]=this.data[c+1],e[d++]=this.data[c+2],e[d++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,4)}async resize(e,c,{resample:d=2}={}){let h=RESAMPLING_MAPPING[d]??d;if(BROWSER_ENV){let g=this.channels,_=this.toCanvas();const _e=createCanvasFunction(e,c).getContext("2d");return _e.drawImage(_,0,0,e,c),new RawImage(_e.getImageData(0,0,e,c).data,e,c,4).convert(g)}else{let g=this.toSharp();switch(h){case"box":case"hamming":(h==="box"||h==="hamming")&&(console.warn(`Resampling method ${h} is not yet supported. Using bilinear instead.`),h="bilinear");case"nearest":case"bilinear":case"bicubic":g=g.affine([e/this.width,0,0,c/this.height],{interpolator:h});break;case"lanczos":g=g.resize({width:e,height:c,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${h} is not supported.`)}return await loadImageFunction(g)}}async pad([e,c,d,h]){if(e=Math.max(e,0),c=Math.max(c,0),d=Math.max(d,0),h=Math.max(h,0),e===0&&c===0&&d===0&&h===0)return this;if(BROWSER_ENV){let g=this.channels,_=this.toCanvas(),_e=this.width+e+c,et=this.height+d+h;const tt=createCanvasFunction(_e,et).getContext("2d");return tt.drawImage(_,0,0,this.width,this.height,e,d,_e,et),new RawImage(tt.getImageData(0,0,_e,et).data,_e,et,4).convert(g)}else{let g=this.toSharp().extend({left:e,right:c,top:d,bottom:h});return await loadImageFunction(g)}}async crop([e,c,d,h]){if(e=Math.max(e,0),c=Math.max(c,0),d=Math.min(d,this.width-1),h=Math.min(h,this.height-1),e===0&&c===0&&d===this.width-1&&h===this.height-1)return this;const g=d-e+1,_=h-c+1;if(BROWSER_ENV){const _e=this.channels,et=this.toCanvas(),tt=createCanvasFunction(g,_).getContext("2d");return tt.drawImage(et,e,c,g,_,0,0,g,_),new RawImage(tt.getImageData(0,0,g,_).data,g,_,4).convert(_e)}else{const _e=this.toSharp().extract({left:e,top:c,width:g,height:_});return await loadImageFunction(_e)}}async center_crop(e,c){if(this.width===e&&this.height===c)return this;let d=(this.width-e)/2,h=(this.height-c)/2;if(BROWSER_ENV){let g=this.channels,_=this.toCanvas();const _e=createCanvasFunction(e,c).getContext("2d");let et=0,tt=0,rt=0,$=0;return d>=0?et=d:rt=-d,h>=0?tt=h:$=-h,_e.drawImage(_,et,tt,e,c,rt,$,e,c),new RawImage(_e.getImageData(0,0,e,c).data,e,c,4).convert(g)}else{let g=this.toSharp();if(d>=0&&h>=0)g=g.extract({left:Math.floor(d),top:Math.floor(h),width:e,height:c});else if(d<=0&&h<=0){let _=Math.floor(-h),_e=Math.floor(-d);g=g.extend({top:_,left:_e,right:e-this.width-_e,bottom:c-this.height-_})}else{let _=[0,0],_e=0;h<0?(_[0]=Math.floor(-h),_[1]=c-this.height-_[0]):_e=Math.floor(h);let et=[0,0],tt=0;d<0?(et[0]=Math.floor(-d),et[1]=e-this.width-et[0]):tt=Math.floor(d),g=g.extend({top:_[0],bottom:_[1],left:et[0],right:et[1]}).extract({left:tt,top:_e,width:e,height:c})}return await loadImageFunction(g)}}async toBlob(e="image/png",c=1){if(!BROWSER_ENV)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:e,quality:c})}toTensor(e="CHW"){let c=new Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(e!=="HWC")if(e==="CHW")c=c.permute(2,0,1);else throw new Error(`Unsupported channel format: ${e}`);return c}toCanvas(){if(!BROWSER_ENV)throw new Error("toCanvas() is only supported in browser environments.");let e=this.clone().rgba(),c=createCanvasFunction(e.width,e.height),d=new ImageDataClass(e.data,e.width,e.height);return c.getContext("2d").putImageData(d,0,0),c}_update(e,c,d,h=null){return this.data=e,this.width=c,this.height=d,h!==null&&(this.channels=h),this}clone(){return new RawImage(this.data.slice(),this.width,this.height,this.channels)}convert(e){if(this.channels===e)return this;switch(e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(e){if(BROWSER_ENV){if(WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const c=e.split(".").pop().toLowerCase(),d=CONTENT_TYPE_MAP.get(c)??"image/png",h=await this.toBlob(d),g=URL.createObjectURL(h),_=document.createElement("a");_.href=g,_.download=e,_.click(),_.remove()}else{if(env$1.useFS)return await this.toSharp().toFile(e);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(BROWSER_ENV)throw new Error("toSharp() is only supported in server-side environments.");return sharp(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function read_audio(a,e){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const c=await(await getFile(a)).arrayBuffer(),d=new AudioContext({sampleRate:e});typeof e>"u"&&console.warn(`No sampling rate provided, using default of ${d.sampleRate}Hz.`);const h=await d.decodeAudioData(c);let g;if(h.numberOfChannels===2){const _=Math.sqrt(2),_e=h.getChannelData(0),et=h.getChannelData(1);g=new Float32Array(_e.length);for(let tt=0;tt<h.length;++tt)g[tt]=_*(_e[tt]+et[tt])/2}else g=h.getChannelData(0);return g}function hanning(a){if(a<1)return new Float64Array;if(a===1)return new Float64Array([1]);const e=a-1,c=Math.PI/e,d=new Float64Array(a);for(let h=0;h<a;++h){const g=2*h-e;d[h]=.5+.5*Math.cos(c*g)}return d}const HERTZ_TO_MEL_MAPPING={htk:a=>2595*Math.log10(1+a/700),kaldi:a=>1127*Math.log(1+a/700),slaney:(a,e=1e3,c=15,d=27/Math.log(6.4))=>a>=e?c+Math.log(a/e)*d:3*a/200};function hertz_to_mel(a,e="htk"){const c=HERTZ_TO_MEL_MAPPING[e];if(!c)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof a=="number"?c(a):a.map(d=>c(d))}const MEL_TO_HERTZ_MAPPING={htk:a=>700*(10**(a/2595)-1),kaldi:a=>700*(Math.exp(a/1127)-1),slaney:(a,e=1e3,c=15,d=Math.log(6.4)/27)=>a>=c?e*Math.exp(d*(a-c)):200*a/3};function mel_to_hertz(a,e="htk"){const c=MEL_TO_HERTZ_MAPPING[e];if(!c)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof a=="number"?c(a):a.map(d=>c(d))}function _create_triangular_filter_bank(a,e){const c=Float64Array.from({length:e.length-1},(_,_e)=>e[_e+1]-e[_e]),d=Array.from({length:a.length},()=>new Array(e.length));for(let _=0;_<a.length;++_){const _e=d[_];for(let et=0;et<e.length;++et)_e[et]=e[et]-a[_]}const h=e.length-2,g=Array.from({length:h},()=>new Array(a.length));for(let _=0;_<a.length;++_){const _e=d[_];for(let et=0;et<h;++et){const tt=-_e[et]/c[et],rt=_e[et+2]/c[et+1];g[et][_]=Math.max(0,Math.min(tt,rt))}}return g}function linspace(a,e,c){const d=(e-a)/(c-1);return Float64Array.from({length:c},(h,g)=>a+d*g)}function mel_filter_bank(a,e,c,d,h,g=null,_="htk",_e=!1){if(g!==null&&g!=="slaney")throw new Error('norm must be one of null or "slaney"');const et=hertz_to_mel(c,_),tt=hertz_to_mel(d,_),rt=linspace(et,tt,e+2);let $=mel_to_hertz(rt,_),b;if(_e){const st=h/(a*2);b=hertz_to_mel(Float64Array.from({length:a},(ot,it)=>it*st),_),$=rt}else b=linspace(0,Math.floor(h/2),a);const nt=_create_triangular_filter_bank(b,$);if(g!==null&&g==="slaney")for(let st=0;st<e;++st){const ot=nt[st],it=2/($[st+2]-$[st]);for(let at=0;at<a;++at)ot[at]*=it}return nt}function padReflect(a,e,c){const d=new a.constructor(a.length+e+c),h=a.length-1;for(let g=0;g<a.length;++g)d[e+g]=a[g];for(let g=1;g<=e;++g)d[e-g]=a[calculateReflectOffset(g,h)];for(let g=1;g<=c;++g)d[h+e+g]=a[calculateReflectOffset(h-g,h)];return d}function _db_conversion_helper(a,e,c,d,h){if(c<=0)throw new Error("reference must be greater than zero");if(d<=0)throw new Error("min_value must be greater than zero");c=Math.max(d,c);const g=Math.log10(c);for(let _=0;_<a.length;++_)a[_]=e*Math.log10(Math.max(d,a[_])-g);if(h!==null){if(h<=0)throw new Error("db_range must be greater than zero");const _=max(a)[0]-h;for(let _e=0;_e<a.length;++_e)a[_e]=Math.max(a[_e],_)}return a}function amplitude_to_db(a,e=1,c=1e-5,d=null){return _db_conversion_helper(a,20,e,c,d)}function power_to_db(a,e=1,c=1e-10,d=null){return _db_conversion_helper(a,10,e,c,d)}function spectrogram(a,e,c,d,{fft_length:h=null,power:g=1,center:_=!0,pad_mode:_e="reflect",onesided:et=!0,preemphasis:tt=null,mel_filters:rt=null,mel_floor:$=1e-10,log_mel:b=null,reference:nt=1,min_value:st=1e-10,db_range:ot=null,remove_dc_offset:it=null,max_num_frames:at=null,do_pad:lt=!0,transpose:dt=!1}={}){const ht=e.length;if(h===null&&(h=c),c>h)throw Error(`frame_length (${c}) may not be larger than fft_length (${h})`);if(ht!==c)throw new Error(`Length of the window (${ht}) must equal frame_length (${c})`);if(d<=0)throw new Error("hop_length must be greater than zero");if(g===null&&rt!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(_){if(_e!=="reflect")throw new Error(`pad_mode="${_e}" not implemented yet.`);const wt=Math.floor((h-1)/2)+1;a=padReflect(a,wt,wt)}const pt=Math.floor(1+Math.floor((a.length-c)/d)),mt=et?Math.floor(h/2)+1:h;let yt=pt,xt=pt;at!==null&&(at>pt?lt&&(xt=at):xt=yt=at);const gt=new FFT(h),bt=new Float64Array(h),jt=new Float64Array(gt.outputBufferSize),Mt=new Array(yt);for(let wt=0;wt<yt;++wt){const Rt=wt*d;for(let Et=0;Et<c;++Et)bt[Et]=a[Rt+Et];if(it){let Et=0;for(let er=0;er<c;++er)Et+=bt[er];const zt=Et/c;for(let er=0;er<c;++er)bt[er]-=zt}if(tt!==null){for(let Et=c-1;Et>=1;--Et)bt[Et]-=tt*bt[Et-1];bt[0]*=1-tt}for(let Et=0;Et<e.length;++Et)bt[Et]*=e[Et];gt.realTransform(jt,bt);const At=new Array(mt);for(let Et=0;Et<At.length;++Et){const zt=Et<<1;At[Et]=jt[zt]**2+jt[zt+1]**2}Mt[wt]=At}if(g!==null&&g!==2){const wt=2/g;for(let Rt=0;Rt<Mt.length;++Rt){const At=Mt[Rt];for(let Et=0;Et<At.length;++Et)At[Et]**=wt}}const Pt=rt.length,Tt=new Float32Array(Pt*xt),St=dt?[xt,Pt]:[Pt,xt];for(let wt=0;wt<Pt;++wt){const Rt=rt[wt];for(let At=0;At<yt;++At){const Et=Mt[At];let zt=0;for(let er=0;er<mt;++er)zt+=Rt[er]*Et[er];Tt[dt?At*Pt+wt:wt*yt+At]=Math.max($,zt)}}if(g!==null&&b!==null){const wt=Math.min(Tt.length,yt*Pt);switch(b){case"log":for(let Rt=0;Rt<wt;++Rt)Tt[Rt]=Math.log(Tt[Rt]);break;case"log10":for(let Rt=0;Rt<wt;++Rt)Tt[Rt]=Math.log10(Tt[Rt]);break;case"dB":if(g===1)amplitude_to_db(Tt,nt,st,ot);else if(g===2)power_to_db(Tt,nt,st,ot);else throw new Error(`Cannot use log_mel option '${b}' with power ${g}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${b}'`)}}return{data:Tt,dims:St}}function window_function(a,e,{periodic:c=!0,frame_length:d=null,center:h=!0}={}){const g=c?a+1:a;let _;switch(e){case"boxcar":_=new Float64Array(g).fill(1);break;case"hann":case"hann_window":_=hanning(g);break;case"povey":_=hanning(g).map(_e=>Math.pow(_e,.85));break;default:throw new Error(`Unknown window type ${e}.`)}if(c&&(_=_.subarray(0,a)),d===null)return _;if(a>d)throw new Error(`Length of the window (${a}) may not be larger than frame_length (${d})`);return _}function center_to_corners_format([a,e,c,d]){return[a-c/2,e-d/2,a+c/2,e+d/2]}function post_process_object_detection(a,e=.5,c=null,d=!1){const h=a.logits,g=a.pred_boxes,[_,_e,et]=h.dims;if(c!==null&&c.length!==_)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let tt=[];for(let rt=0;rt<_;++rt){let $=c!==null?c[rt]:null,b={boxes:[],classes:[],scores:[]},nt=h[rt],st=g[rt];for(let ot=0;ot<_e;++ot){let it=nt[ot],at=[],lt;if(d){lt=it.sigmoid().data;for(let dt=0;dt<lt.length;++dt)lt[dt]>e&&at.push(dt)}else{let dt=max(it.data)[1];if(dt===et-1)continue;at.push(dt),lt=softmax(it.data)}for(const dt of at){let ht=st[ot].data;ht=center_to_corners_format(ht),$!==null&&(ht=ht.map((pt,mt)=>pt*$[(mt+1)%2])),b.boxes.push(ht),b.classes.push(dt),b.scores.push(lt[dt])}}tt.push(b)}return tt}function validate_audio_inputs(a,e){var c;if(!(a instanceof Float32Array||a instanceof Float64Array))throw new Error(`${e} expects input to be a Float32Array or a Float64Array, but got ${((c=a==null?void 0:a.constructor)==null?void 0:c.name)??typeof a} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function constraint_to_multiple_of(a,e,c=0,d=null){const h=a/e;let g=bankers_round(h)*e;return d!==null&&g>d&&(g=Math.floor(h)*e),g<c&&(g=Math.ceil(h)*e),g}function enforce_size_divisibility([a,e],c){return[Math.max(Math.floor(a/c),1)*c,Math.max(Math.floor(e/c),1)*c]}class FeatureExtractor extends Callable{constructor(e){super(),this.config=e}}class ImageFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}async thumbnail(e,c,d=2){const h=e.height,g=e.width,_=c.height,_e=c.width;let et=Math.min(h,_),tt=Math.min(g,_e);return et===h&&tt===g?e:(h>g?tt=Math.floor(g*et/h):g>h&&(et=Math.floor(h*tt/g)),await e.resize(tt,et,{resample:d}))}async crop_margin(e,c=200){const d=e.clone().grayscale(),h=min(d.data)[0],_=max(d.data)[0]-h;if(_===0)return e;const _e=c/255;let et=d.width,tt=d.height,rt=0,$=0;for(let b=0;b<d.height;++b){const nt=b*d.width;for(let st=0;st<d.width;++st)(d.data[nt+st]-h)/_<_e&&(et=Math.min(et,st),tt=Math.min(tt,b),rt=Math.max(rt,st),$=Math.max($,b))}return e=await e.crop([et,tt,rt,$]),e}pad_image(e,c,d,{mode:h="constant",center:g=!1,constant_values:_=0}={}){const[_e,et,tt]=c;let rt,$;if(typeof d=="number"?(rt=d,$=d):(rt=d.width,$=d.height),rt!==et||$!==_e){const b=new Float32Array(rt*$*tt);if(Array.isArray(_))for(let ot=0;ot<b.length;++ot)b[ot]=_[ot%tt];else _!==0&&b.fill(_);const[nt,st]=g?[Math.floor((rt-et)/2),Math.floor(($-_e)/2)]:[0,0];for(let ot=0;ot<_e;++ot){const it=(ot+st)*rt,at=ot*et;for(let lt=0;lt<et;++lt){const dt=(it+lt+nt)*tt,ht=(at+lt)*tt;for(let pt=0;pt<tt;++pt)b[dt+pt]=e[ht+pt]}}if(h==="symmetric"){if(g)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const ot=_e-1,it=et-1;for(let at=0;at<$;++at){const lt=at*rt,dt=calculateReflectOffset(at,ot)*et;for(let ht=0;ht<rt;++ht){if(at<_e&&ht<et)continue;const pt=(lt+ht)*tt,mt=(dt+calculateReflectOffset(ht,it))*tt;for(let yt=0;yt<tt;++yt)b[pt+yt]=e[mt+yt]}}}e=b,c=[$,rt,tt]}return[e,c]}rescale(e){for(let c=0;c<e.length;++c)e[c]=this.rescale_factor*e[c]}get_resize_output_image_size(e,c){const[d,h]=e.size;let g,_;if(this.do_thumbnail){const{height:_e,width:et}=c;g=Math.min(_e,et)}else Number.isInteger(c)?(g=c,_=this.config.max_size??g):c!==void 0&&(g=c.shortest_edge,_=c.longest_edge);if(g!==void 0||_!==void 0){const _e=g===void 0?1:Math.max(g/d,g/h),et=d*_e,tt=h*_e,rt=_===void 0?1:Math.min(_/et,_/tt);let $=Math.floor(Number((et*rt).toFixed(2))),b=Math.floor(Number((tt*rt).toFixed(2)));return this.size_divisibility!==void 0&&([$,b]=enforce_size_divisibility([$,b],this.size_divisibility)),[$,b]}else if(c!==void 0&&c.width!==void 0&&c.height!==void 0){let _e=c.width,et=c.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let tt=et/h,rt=_e/d;Math.abs(1-rt)<Math.abs(1-tt)?tt=rt:rt=tt,et=constraint_to_multiple_of(tt*h,this.config.ensure_multiple_of),_e=constraint_to_multiple_of(rt*d,this.config.ensure_multiple_of)}return[_e,et]}else{if(this.size_divisibility!==void 0)return enforce_size_divisibility([d,h],this.size_divisibility);throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(c)}`)}}async resize(e){const[c,d]=this.get_resize_output_image_size(e,this.size);return await e.resize(c,d,{resample:this.resample})}async preprocess(e,{do_normalize:c=null,do_pad:d=null,do_convert_rgb:h=null,do_convert_grayscale:g=null,do_flip_channel_order:_=null}={}){this.do_crop_margin&&(e=await this.crop_margin(e));const[_e,et]=e.size;if(h??this.do_convert_rgb?e=e.rgb():g&&(e=e.grayscale()),this.do_resize&&(e=await this.resize(e)),this.do_thumbnail&&(e=await this.thumbnail(e,this.size,this.resample)),this.do_center_crop){let nt,st;Number.isInteger(this.crop_size)?(nt=this.crop_size,st=this.crop_size):(nt=this.crop_size.width,st=this.crop_size.height),e=await e.center_crop(nt,st)}const tt=[e.height,e.width];let rt=Float32Array.from(e.data),$=[e.height,e.width,e.channels];if(this.do_rescale&&this.rescale(rt),c??this.do_normalize){let nt=this.image_mean;Array.isArray(this.image_mean)||(nt=new Array(e.channels).fill(nt));let st=this.image_std;if(Array.isArray(this.image_std)||(st=new Array(e.channels).fill(nt)),nt.length!==e.channels||st.length!==e.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${nt.length}) and \`image_std\` (${st.length}) must match the number of channels in the image (${e.channels}).`);for(let ot=0;ot<rt.length;ot+=e.channels)for(let it=0;it<e.channels;++it)rt[ot+it]=(rt[ot+it]-nt[it])/st[it]}if(d??this.do_pad){if(this.pad_size)[rt,$]=this.pad_image(rt,[e.height,e.width,e.channels],this.pad_size);else if(this.size_divisibility){const[nt,st]=enforce_size_divisibility([$[1],$[0]],this.size_divisibility);[rt,$]=this.pad_image(rt,$,{width:nt,height:st})}}if(_??this.do_flip_channel_order){if($[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let nt=0;nt<rt.length;nt+=3){const st=rt[nt];rt[nt]=rt[nt+2],rt[nt+2]=st}}const b=new Tensor("float32",rt,$).permute(2,0,1);return{original_size:[et,_e],reshaped_input_size:tt,pixel_values:b}}async _call(e,...c){Array.isArray(e)||(e=[e]);const d=await Promise.all(e.map(g=>this.preprocess(g)));return{pixel_values:stack(d.map(g=>g.pixel_values),0),original_sizes:d.map(g=>g.original_size),reshaped_input_sizes:d.map(g=>g.reshaped_input_size)}}}class SegformerFeatureExtractor extends ImageFeatureExtractor{post_process_semantic_segmentation(e,c=null){const d=e.logits,h=d.dims[0];if(c!==null&&c.length!==h)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const g=[];for(let _=0;_<h;++_){const _e=c!==null?c[_]:null;let et=d[_];_e!==null&&(et=interpolate(et,_e,"bilinear",!1));const[tt,rt]=_e??et.dims.slice(-2),$=new Tensor("int32",new Int32Array(tt*rt),[tt,rt]),b=et[0].data;for(let it=1;it<et.dims[0];++it){const at=et[it].data;for(let lt=0;lt<at.length;++lt)at[lt]>b[lt]&&(b[lt]=at[lt],$.data[lt]=it)}const nt=new Array(et.dims[0]),st=$.data;for(let it=0;it<st.length;++it){const at=st[it];nt[at]=at}const ot=nt.filter(it=>it!==void 0);g.push({segmentation:$,labels:ot})}return g}}class DPTFeatureExtractor extends ImageFeatureExtractor{}class DPTImageProcessor extends DPTFeatureExtractor{}class BitImageProcessor extends ImageFeatureExtractor{}class GLPNFeatureExtractor extends ImageFeatureExtractor{}class CLIPFeatureExtractor extends ImageFeatureExtractor{}class ChineseCLIPFeatureExtractor extends ImageFeatureExtractor{}class SiglipImageProcessor extends ImageFeatureExtractor{}class ConvNextFeatureExtractor extends ImageFeatureExtractor{constructor(e){super(e),this.crop_pct=this.config.crop_pct??224/256}async resize(e){var d;const c=(d=this.size)==null?void 0:d.shortest_edge;if(c===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(c<384){const h=Math.floor(c/this.crop_pct),[g,_]=this.get_resize_output_image_size(e,{shortest_edge:h});e=await e.resize(g,_,{resample:this.resample}),e=await e.center_crop(c,c)}else e=await e.resize(c,c,{resample:this.resample});return e}}class ConvNextImageProcessor extends ConvNextFeatureExtractor{}class ViTFeatureExtractor extends ImageFeatureExtractor{}class ViTImageProcessor extends ImageFeatureExtractor{}class EfficientNetImageProcessor extends ImageFeatureExtractor{constructor(e){super(e),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(c=>c*c))}}class MobileViTFeatureExtractor extends ImageFeatureExtractor{}class MobileViTImageProcessor extends MobileViTFeatureExtractor{}class OwlViTFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class Owlv2ImageProcessor extends OwlViTFeatureExtractor{}class DeiTFeatureExtractor extends ImageFeatureExtractor{}class BeitFeatureExtractor extends ImageFeatureExtractor{}class DonutFeatureExtractor extends ImageFeatureExtractor{pad_image(e,c,d,h={}){const[g,_,_e]=c;let et=this.image_mean;Array.isArray(this.image_mean)||(et=new Array(_e).fill(et));let tt=this.image_std;Array.isArray(tt)||(tt=new Array(_e).fill(et));const rt=et.map(($,b)=>-$/tt[b]);return super.pad_image(e,c,d,{center:!0,constant_values:rt,...h})}}class NougatImageProcessor extends DonutFeatureExtractor{}class DetrFeatureExtractor extends ImageFeatureExtractor{async _call(e){const c=await super._call(e),d=[c.pixel_values.dims[0],64,64],h=new Tensor("int64",new BigInt64Array(d.reduce((g,_)=>g*_)).fill(1n),d);return{...c,pixel_mask:h}}post_process_object_detection(...e){return post_process_object_detection(...e)}remove_low_and_no_objects(e,c,d,h){let g=[],_=[],_e=[];for(let et=0;et<e.dims[0];++et){let tt=e[et],rt=c[et],$=max(tt.data)[1];if($===h)continue;let nt=softmax(tt.data)[$];nt>d&&(g.push(rt),_.push(nt),_e.push($))}return[g,_,_e]}check_segment_validity(e,c,d,h=.5,g=.8){let _=[],_e=0,et=0;for(let rt=0;rt<e.length;++rt)e[rt]===d&&(_.push(rt),++_e),c[d].data[rt]>=h&&++et;let tt=_e>0&&et>0;return tt&&(tt=_e/et>g),[tt,_]}compute_segments(e,c,d,h,g,_=null,_e=null){let[et,tt]=_e??e[0].dims,rt=new Tensor("int32",new Int32Array(et*tt),[et,tt]),$=[];if(_e!==null)for(let ot=0;ot<e.length;++ot)e[ot]=interpolate(e[ot],_e,"bilinear",!1);let b=new Int32Array(e[0].data.length),nt=new Float32Array(e[0].data.length);for(let ot=0;ot<e.length;++ot){let it=c[ot];for(let at=0;at<e[ot].data.length;++at)e[ot].data[at]*=it,e[ot].data[at]>nt[at]&&(b[at]=ot,nt[at]=e[ot].data[at])}let st=0;for(let ot=0;ot<d.length;++ot){let it=d[ot],[at,lt]=this.check_segment_validity(b,e,ot,h,g);if(at){++st;for(let dt of lt)rt.data[dt]=st;$.push({id:st,label_id:it,score:c[ot]})}}return[rt,$]}post_process_panoptic_segmentation(e,c=.5,d=.5,h=.8,g=null,_=null){g===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),g=new Set);const _e=e.logits,tt=e.pred_masks.sigmoid();let[rt,$,b]=_e.dims;if(b-=1,_!==null&&_.length!==rt)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let nt=[];for(let st=0;st<rt;++st){let ot=_!==null?_[st]:null,it=_e[st],at=tt[st],[lt,dt,ht]=this.remove_low_and_no_objects(it,at,c,b);if(ht.length===0){let[yt,xt]=ot??at.dims.slice(-2),gt=new Tensor("int32",new Int32Array(yt*xt).fill(-1),[yt,xt]);nt.push({segmentation:gt,segments_info:[]});continue}let[pt,mt]=this.compute_segments(lt,dt,ht,d,h,g,ot);nt.push({segmentation:pt,segments_info:mt})}return nt}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class YolosFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class SamImageProcessor extends ImageFeatureExtractor{reshape_input_points(e,c,d){e=structuredClone(e);let h=calculateDimensions(e);if(h.length===3)h=[1,...h],e=[e];else if(h.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let g=0;g<e.length;++g){let _=c[g],_e=d[g],et=[_e[0]/_[0],_e[1]/_[1]];for(let tt=0;tt<e[g].length;++tt)for(let rt=0;rt<e[g][tt].length;++rt)for(let $=0;$<e[g][tt][rt].length;++$)e[g][tt][rt][$]*=et[$]}return new Tensor("float32",Float32Array.from(e.flat(1/0)),h)}add_input_labels(e,c){let d=calculateDimensions(e);if(d.length===2)d=[1,...d],e=[e];else if(d.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(d.some((h,g)=>h!==c.dims[g]))throw Error(`The first ${d.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new Tensor("int64",e.flat(1/0).map(BigInt),d)}async _call(e,c=null,d=null){const h=await super._call(e);if(c&&(h.input_points=this.reshape_input_points(c,h.original_sizes,h.reshaped_input_sizes)),d){if(!h.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");h.input_labels=this.add_input_labels(d,h.input_points)}return h}post_process_masks(e,c,d,{mask_threshold:h=0,binarize:g=!0,pad_size:_=null}={}){const _e=[];_=_??this.pad_size;const et=[_.height,_.width];for(let tt=0;tt<c.length;++tt){const rt=c[tt],$=d[tt],b=e[tt],nt=[];for(let st=0;st<b.dims[0];++st){const ot=b[st];let it=interpolate(ot,et,"bilinear",!1);if(it=it.slice(null,[0,$[0]],[0,$[1]]),it=interpolate(it,rt,"bilinear",!1),g){const at=new Uint8Array(it.data.length);for(let lt=0;lt<it.data.length;++lt)it.data[lt]>h&&(at[lt]=1);it=new Tensor("bool",at,it.dims)}nt.push(it)}_e.push(stack(nt))}return _e}}class Swin2SRImageProcessor extends ImageFeatureExtractor{pad_image(e,c,d,h={}){const[g,_,_e]=c;return super.pad_image(e,c,{width:_+(d-_%d)%d,height:g+(d-g%d)%d},{mode:"symmetric",center:!1,constant_values:-1,...h})}}class VitMatteImageProcessor extends ImageFeatureExtractor{async _call(e,c){Array.isArray(e)||(e=[e]),Array.isArray(c)||(c=[c]);const d=await Promise.all(e.map(_=>this.preprocess(_))),h=await Promise.all(c.map(_=>this.preprocess(_,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:stack(d.map((_,_e)=>cat([_.pixel_values,h[_e].pixel_values],0)),0),original_sizes:d.map(_=>_.original_size),reshaped_input_sizes:d.map(_=>_.reshaped_input_size)}}}class WhisperFeatureExtractor extends FeatureExtractor{constructor(e){var c;super(e),(c=this.config).mel_filters??(c.mel_filters=mel_filter_bank(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=window_function(this.config.n_fft,"hann")}_extract_fbank_features(e){const{data:c,dims:d}=spectrogram(e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),h=max(c)[0];for(let g=0;g<c.length;++g)c[g]=(Math.max(c[g],h-8)+4)/4;return{data:c,dims:d}}async _call(e){validate_audio_inputs(e,"WhisperFeatureExtractor");let c;e.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),c=e.slice(0,this.config.n_samples)):(c=new Float32Array(this.config.n_samples),c.set(e));const{data:d,dims:h}=this._extract_fbank_features(c);return{input_features:new Tensor("float32",d,[1,...h])}}}class Wav2Vec2FeatureExtractor extends FeatureExtractor{_zero_mean_unit_var_norm(e){const d=e.reduce((g,_)=>g+_,0)/e.length,h=e.reduce((g,_)=>g+(_-d)**2,0)/e.length;return e.map(g=>(g-d)/Math.sqrt(h+1e-7))}async _call(e){validate_audio_inputs(e,"Wav2Vec2FeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));let c=e;this.config.do_normalize&&(c=this._zero_mean_unit_var_norm(c));const d=[1,c.length];return{input_values:new Tensor("float32",c,d),attention_mask:new Tensor("int64",new BigInt64Array(c.length).fill(1n),d)}}}class SeamlessM4TFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const c=this.config.sampling_rate,d=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(c/2),c,null,"kaldi",!0);for(let h=0;h<d.length;++h)d[h].push(0);this.mel_filters=d,this.window=window_function(400,"povey",{periodic:!1})}_extract_fbank_features(e,c){return e=e.map(d=>d*32768),spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:c,transpose:!0})}async _call(e,{padding:c=!0,pad_to_multiple_of:d=2,do_normalize_per_mel_bins:h=!0,return_attention_mask:g=!0}={}){validate_audio_inputs(e,"SeamlessM4TFeatureExtractor");let _=this._extract_fbank_features(e,this.config.max_length);if(h){const[st,ot]=_.dims;for(let it=0;it<ot;++it){let at=0;for(let pt=0;pt<st;++pt)at+=_.data[pt*ot+it];const lt=at/st;let dt=0;for(let pt=0;pt<st;++pt)dt+=(_.data[pt*ot+it]-lt)**2;dt/=st-1;const ht=Math.sqrt(dt+1e-7);for(let pt=0;pt<st;++pt){const mt=pt*ot+it;_.data[mt]=(_.data[mt]-lt)/ht}}}let _e;if(c){const[st,ot]=_.dims,it=st%d;if(it>0){const at=new Float32Array(ot*(st+it));at.set(_.data),at.fill(this.config.padding_value,_.data.length);const lt=st+it;_={data:at,dims:[lt,ot]},g&&(_e=new Tensor("int64",new BigInt64Array(lt),[1,lt]),_e.data.fill(1n,0,st))}}const[et,tt]=_.dims,rt=this.config.stride;if(et%rt!==0)throw new Error(`The number of frames (${et}) must be a multiple of the stride (${rt}).`);const b=new Tensor("float32",_.data,_.dims).view(1,Math.floor(et/rt),tt*rt),nt={input_features:b};if(g){const st=b.dims[1],ot=new Tensor("int64",new BigInt64Array(st),[1,st]);if(_e)for(let it=1,at=0;it<et;it+=rt,++at)ot.data[at]=_e.data[it];else ot.data.fill(1n);nt.attention_mask=ot}return nt}}class ASTFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const c=this.config.sampling_rate,d=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(c/2),c,null,"kaldi",!0);for(let h=0;h<d.length;++h)d[h].push(0);this.mel_filters=d,this.window=window_function(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(e,c){return spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:c,transpose:!0})}async _call(e){validate_audio_inputs(e,"ASTFeatureExtractor");const c=this._extract_fbank_features(e,this.config.max_length);if(this.config.do_normalize){const d=this.std*2;for(let h=0;h<c.data.length;++h)c.data[h]=(c.data[h]-this.mean)/d}return{input_values:new Tensor("float32",c.data,[1,...c.dims])}}}class ClapFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.mel_filters=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.fft_window_size,"hann")}_get_input_mel(e,c,d,h){let g,_=!1;const _e=e.length-c;if(_e>0)if(d==="rand_trunc"){_=!0;const et=Math.floor(Math.random()*(_e+1));e=e.subarray(et,et+c),g=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),g.dims=[1,...g.dims]}else throw new Error(`Truncation strategy "${d}" not implemented`);else{if(_e<0){let et=new Float64Array(c);if(et.set(e),h==="repeat")for(let tt=e.length;tt<c;tt+=e.length)et.set(e.subarray(0,Math.min(e.length,c-tt)),tt);else if(h==="repeatpad")for(let tt=e.length;tt<-_e;tt+=e.length)et.set(e,tt);e=et}if(d==="fusion")throw new Error(`Truncation strategy "${d}" not implemented`);g=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),g.dims=[1,...g.dims]}return{...g,longer:_}}_extract_fbank_features(e,c,d=null){return spectrogram(e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:c,log_mel:"dB",max_num_frames:d,do_pad:!1,transpose:!0})}async _call(e,{max_length:c=null}={}){validate_audio_inputs(e,"ClapFeatureExtractor");const d=this._get_input_mel(e,c??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new Tensor("float32",d.data,[1,...d.dims])}}}class SpeechT5FeatureExtractor extends FeatureExtractor{}class Processor extends Callable{constructor(e){super(),this.feature_extractor=e}async _call(e,...c){return await this.feature_extractor(e,...c)}}class SamProcessor extends Processor{async _call(...e){return await this.feature_extractor(...e)}post_process_masks(...e){return this.feature_extractor.post_process_masks(...e)}reshape_input_points(...e){return this.feature_extractor.reshape_input_points(...e)}}class WhisperProcessor extends Processor{async _call(e){return await this.feature_extractor(e)}}class Wav2Vec2ProcessorWithLM extends Processor{async _call(e){return await this.feature_extractor(e)}}class SpeechT5Processor extends Processor{async _call(e){return await this.feature_extractor(e)}}class OwlViTProcessor extends Processor{}class AutoProcessor{static async from_pretrained(e,{progress_callback:c=null,config:d=null,cache_dir:h=null,local_files_only:g=!1,revision:_="main"}={}){let _e=d??await getModelJSON(e,"preprocessor_config.json",!0,{progress_callback:c,config:d,cache_dir:h,local_files_only:g,revision:_}),et=_e.feature_extractor_type??_e.image_processor_type,tt=this.FEATURE_EXTRACTOR_CLASS_MAPPING[et];if(!tt)if(_e.size!==void 0)console.warn(`Feature extractor type "${et}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),tt=ImageFeatureExtractor;else throw new Error(`Unknown Feature Extractor type: ${et}`);let rt=this.PROCESSOR_CLASS_MAPPING[_e.processor_class]??Processor,$=new tt(_e);return new rt($)}}nr(AutoProcessor,"FEATURE_EXTRACTOR_CLASS_MAPPING",{ImageFeatureExtractor,WhisperFeatureExtractor,ViTFeatureExtractor,MobileViTFeatureExtractor,MobileViTImageProcessor,OwlViTFeatureExtractor,Owlv2ImageProcessor,CLIPFeatureExtractor,ChineseCLIPFeatureExtractor,SiglipImageProcessor,ConvNextFeatureExtractor,ConvNextImageProcessor,SegformerFeatureExtractor,BitImageProcessor,DPTImageProcessor,DPTFeatureExtractor,GLPNFeatureExtractor,BeitFeatureExtractor,DeiTFeatureExtractor,DetrFeatureExtractor,YolosFeatureExtractor,DonutFeatureExtractor,NougatImageProcessor,EfficientNetImageProcessor,ViTImageProcessor,VitMatteImageProcessor,SamImageProcessor,Swin2SRImageProcessor,Wav2Vec2FeatureExtractor,SeamlessM4TFeatureExtractor,SpeechT5FeatureExtractor,ASTFeatureExtractor,ClapFeatureExtractor}),nr(AutoProcessor,"PROCESSOR_CLASS_MAPPING",{WhisperProcessor,Wav2Vec2ProcessorWithLM,SamProcessor,SpeechT5Processor,OwlViTProcessor});async function prepareImages(a){return Array.isArray(a)||(a=[a]),await Promise.all(a.map(e=>RawImage.read(e)))}async function prepareAudios(a,e){return Array.isArray(a)||(a=[a]),await Promise.all(a.map(c=>typeof c=="string"||c instanceof URL?read_audio(c,e):c instanceof Float64Array?new Float32Array(c):c))}function get_bounding_box(a,e){e&&(a=a.map(_=>_|0));const[c,d,h,g]=a;return{xmin:c,ymin:d,xmax:h,ymax:g}}class Pipeline extends Callable{constructor({task:e,model:c,tokenizer:d=null,processor:h=null}){super(),this.task=e,this.model=c,this.tokenizer=d,this.processor=h}async dispose(){await this.model.dispose()}}class TextClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:c=1}={}){const d=this.tokenizer(e,{padding:!0,truncation:!0}),h=await this.model(d),g=this.model.config.problem_type==="multi_label_classification"?et=>et.sigmoid().data:et=>softmax(et.data),_=this.model.config.id2label,_e=[];for(const et of h.logits){const tt=g(et),$=getTopItems(tt,c).map(b=>({label:_[b[0]],score:b[1]}));c===1?_e.push(...$):_e.push($)}return Array.isArray(e)||c===1?_e:_e[0]}}class TokenClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{ignore_labels:c=["O"]}={}){const d=Array.isArray(e),h=this.tokenizer(d?e:[e],{padding:!0,truncation:!0}),_=(await this.model(h)).logits,_e=this.model.config.id2label,et=[];for(let tt=0;tt<_.dims[0];++tt){const rt=h.input_ids[tt],$=_[tt],b=[];for(let nt=0;nt<$.dims[0];++nt){const st=$[nt],ot=max(st.data)[1],it=_e?_e[ot]:`LABEL_${ot}`;if(c.includes(it))continue;const at=this.tokenizer.decode([rt[nt].item()],{skip_special_tokens:!0});if(at==="")continue;const lt=softmax(st.data);b.push({entity:it,score:lt[ot],index:nt,word:at,start:null,end:null})}et.push(b)}return d?et:et[0]}}class QuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,c,{topk:d=1}={}){const h=this.tokenizer(e,{text_pair:c,padding:!0,truncation:!0}),g=await this.model(h),_=[];for(let _e=0;_e<g.start_logits.dims[0];++_e){const et=h.input_ids[_e],tt=et.indexOf(this.tokenizer.sep_token_id),rt=Array.from(softmax(g.start_logits[_e].data)).map((nt,st)=>[nt,st]).filter(nt=>nt[1]>tt),$=Array.from(softmax(g.end_logits[_e].data)).map((nt,st)=>[nt,st]).filter(nt=>nt[1]>tt),b=product(rt,$).filter(nt=>nt[0][1]<=nt[1][1]).map(nt=>[nt[0][1],nt[1][1],nt[0][0]*nt[1][0]]).sort((nt,st)=>st[2]-nt[2]);for(let nt=0;nt<Math.min(b.length,d);++nt){const[st,ot,it]=b[nt],at=[...et].slice(st,ot+1),lt=this.tokenizer.decode(at,{skip_special_tokens:!0});_.push({answer:lt,score:it})}}return d===1?_[0]:_}}class FillMaskPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:c=5}={}){const d=this.tokenizer(e,{padding:!0,truncation:!0}),h=await this.model(d),g=[];for(let _=0;_<d.input_ids.dims[0];++_){const _e=d.input_ids[_],et=_e.indexOf(this.tokenizer.mask_token_id);if(et===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const rt=h.logits[_][et],$=getTopItems(softmax(rt.data),c);g.push($.map(b=>{const nt=[..._e];return nt[et]=b[0],{score:b[1],token:b[0],token_str:this.tokenizer.model.vocab[b[0]],sequence:this.tokenizer.decode(nt,{skip_special_tokens:!0})}}))}return Array.isArray(e)?g:g[0]}}class Text2TextGenerationPipeline extends Pipeline{constructor(c){super(c);nr(this,"_key","generated_text")}async _call(c,d={}){Array.isArray(c)||(c=[c]),this.model.config.prefix&&(c=c.map(tt=>this.model.config.prefix+tt));const h=this.model.config.task_specific_params;h&&h[this.task]&&h[this.task].prefix&&(c=c.map(tt=>h[this.task].prefix+tt));const g=this.tokenizer,_={padding:!0,truncation:!0};let _e;this instanceof TranslationPipeline&&"_build_translation_inputs"in g?_e=g._build_translation_inputs(c,_,d).input_ids:_e=g(c,_).input_ids;const et=await this.model.generate(_e,d);return g.batch_decode(et,{skip_special_tokens:!0}).map(tt=>({[this._key]:tt}))}}class SummarizationPipeline extends Text2TextGenerationPipeline{constructor(c){super(c);nr(this,"_key","summary_text")}}class TranslationPipeline extends Text2TextGenerationPipeline{constructor(c){super(c);nr(this,"_key","translation_text")}}function isChat(a){return Array.isArray(a)&&a.every(e=>"role"in e&&"content"in e)}class TextGenerationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,c={}){let d=!1,h=!1,g;if(typeof e=="string")g=e=[e];else if(Array.isArray(e)&&e.every(st=>typeof st=="string"))d=!0,g=e;else{if(isChat(e))e=[e];else if(Array.isArray(e)&&e.every(isChat))d=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");h=!0,g=e.map(st=>this.tokenizer.apply_chat_template(st,{tokenize:!1,add_generation_prompt:!0}))}const _=c.add_special_tokens??!1,_e=h?!1:c.return_full_text??!0;this.tokenizer.padding_side="left";const{input_ids:et,attention_mask:tt}=this.tokenizer(g,{add_special_tokens:_,padding:!0,truncation:!0}),rt=await this.model.generate(et,c,null,{inputs_attention_mask:tt});let $=this.tokenizer.batch_decode(rt,{skip_special_tokens:!0}),b;!_e&&et.dims.at(-1)>0&&(b=this.tokenizer.batch_decode(et,{skip_special_tokens:!0}).map(st=>st.length));const nt=Array.from({length:e.length},st=>[]);for(let st=0;st<$.length;++st){const ot=Math.floor(st/rt.length*e.length);b&&($[st]=$[st].slice(b[ot])),nt[ot].push({generated_text:h?[...e[ot],{role:"assistant",content:$[st]}]:$[st]})}return!d&&nt.length===1?nt[0]:nt}}class ZeroShotClassificationPipeline extends Pipeline{constructor(e){super(e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([c,d])=>[c.toLowerCase(),d])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(e,c,{hypothesis_template:d="This example is {}.",multi_label:h=!1}={}){const g=Array.isArray(e);g||(e=[e]),Array.isArray(c)||(c=[c]);const _=c.map(tt=>d.replace("{}",tt)),_e=h||c.length===1,et=[];for(const tt of e){const rt=[];for(const nt of _){const st=this.tokenizer(tt,{text_pair:nt,padding:!0,truncation:!0}),ot=await this.model(st);_e?rt.push([ot.logits.data[this.contradiction_id],ot.logits.data[this.entailment_id]]):rt.push(ot.logits.data[this.entailment_id])}const b=(_e?rt.map(nt=>softmax(nt)[1]):softmax(rt)).map((nt,st)=>[nt,st]).sort((nt,st)=>st[0]-nt[0]);et.push({sequence:tt,labels:b.map(nt=>c[nt[1]]),scores:b.map(nt=>nt[0])})}return g?et:et[0]}}class FeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pooling:c="none",normalize:d=!1,quantize:h=!1,precision:g="binary"}={}){const _=this.tokenizer(e,{padding:!0,truncation:!0}),_e=await this.model(_);let et=_e.last_hidden_state??_e.logits??_e.token_embeddings;if(c!=="none")if(c==="mean")et=mean_pooling(et,_.attention_mask);else if(c==="cls")et=et.slice(null,0);else throw Error(`Pooling method '${c}' not supported.`);return d&&(et=et.normalize(2,-1)),h&&(et=quantize_embeddings(et,g)),et}}class ImageFeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pool:c=null}={}){const d=await prepareImages(e),{pixel_values:h}=await this.processor(d),g=await this.model({pixel_values:h});let _;if(c){if(!("pooler_output"in g))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");_=g.pooler_output}else _=g.last_hidden_state??g.logits??g.image_embeds;return _}}class AudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:c=null}={}){const d=!Array.isArray(e),h=this.processor.feature_extractor.config.sampling_rate,g=await prepareAudios(e,h),_=this.model.config.id2label,_e=[];for(const et of g){const tt=await this.processor(et),$=(await this.model(tt)).logits[0],nt=getTopItems(softmax($.data),c).map(st=>({label:_[st[0]],score:st[1]}));c===1?_e.push(...nt):_e.push(nt)}return!d||c===1?_e:_e[0]}}class ZeroShotAudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,c,{hypothesis_template:d="This is a sound of {}."}={}){const h=!Array.isArray(e);h&&(e=[e]);const g=c.map(rt=>d.replace("{}",rt)),_=this.tokenizer(g,{padding:!0,truncation:!0}),_e=this.processor.feature_extractor.config.sampling_rate,et=await prepareAudios(e,_e),tt=[];for(const rt of et){const $=await this.processor(rt),b=await this.model({..._,...$}),nt=softmax(b.logits_per_audio.data);tt.push([...nt].map((st,ot)=>({score:st,label:c[ot]})))}return h?tt[0]:tt}}class AutomaticSpeechRecognitionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,c={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(e,c);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(e,c);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(e,c={}){c.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),c.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const d=!Array.isArray(e);d&&(e=[e]);const h=this.processor.feature_extractor.config.sampling_rate,g=await prepareAudios(e,h),_=[];for(const _e of g){const et=await this.processor(_e),rt=(await this.model(et)).logits[0],$=[];for(const nt of rt)$.push(max(nt.data)[1]);const b=this.tokenizer.decode($);_.push({text:b})}return d?_[0]:_}async _call_whisper(e,c={}){const d=c.return_timestamps??!1,h=c.chunk_length_s??0,g=c.chunk_callback??null,_=c.force_full_sequences??!1;let _e=c.stride_length_s??null;d==="word"&&(c.return_token_timestamps=!0);const et=pop(c,"language",null),tt=pop(c,"task",null);if(et||tt||d){if(c.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const it=this.tokenizer.get_decoder_prompt_ids({language:et,task:tt,no_timestamps:!d});it.length>0&&(c.forced_decoder_ids=it)}const rt=!Array.isArray(e);rt&&(e=[e]);const $=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,b=this.processor.feature_extractor.config.hop_length,nt=this.processor.feature_extractor.config.sampling_rate,st=await prepareAudios(e,nt),ot=[];for(const it of st){let at=[];if(h>0){if(_e===null)_e=h/6;else if(h<=_e)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const ht=nt*h,pt=nt*_e,mt=ht-2*pt;let yt=0;for(;yt<it.length;){const xt=it.subarray(yt,yt+ht),gt=await this.processor(xt),bt=yt===0,jt=yt+mt>=it.length;at.push({stride:[xt.length,bt?0:pt,jt?0:pt],input_features:gt.input_features,is_last:jt}),yt+=mt}}else at=[{stride:[it.length,0,0],input_features:(await this.processor(it)).input_features,is_last:!0}];for(const ht of at){c.num_frames=Math.floor(ht.stride[0]/b);const pt=await this.model.generate(ht.input_features,c);d==="word"?(ht.tokens=pt.sequences[0],ht.token_timestamps=pt.token_timestamps.tolist()[0].map(mt=>round(mt,2))):ht.tokens=pt[0],ht.stride=ht.stride.map(mt=>mt/nt),g!==null&&g(ht)}const[lt,dt]=this.tokenizer._decode_asr(at,{time_precision:$,return_timestamps:d,force_full_sequences:_});ot.push({text:lt,...dt})}return rt?ot[0]:ot}}class ImageToTextPipeline extends Pipeline{constructor(e){super(e)}async _call(e,c={}){const d=Array.isArray(e),h=await prepareImages(e),{pixel_values:g}=await this.processor(h),_=[];for(const _e of g){_e.dims=[1,..._e.dims];const et=await this.model.generate(_e,c),tt=this.tokenizer.batch_decode(et,{skip_special_tokens:!0}).map(rt=>({generated_text:rt.trim()}));_.push(tt)}return d?_:_[0]}}class ImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:c=1}={}){const d=Array.isArray(e),h=await prepareImages(e),{pixel_values:g}=await this.processor(h),_=await this.model({pixel_values:g}),_e=this.model.config.id2label,et=[];for(const tt of _.logits){const $=getTopItems(softmax(tt.data),c).map(b=>({label:_e[b[0]],score:b[1]}));c===1?et.push(...$):et.push($)}return d||c===1?et:et[0]}}class ImageSegmentationPipeline extends Pipeline{constructor(e){super(e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(e,{threshold:c=.5,mask_threshold:d=.5,overlap_mask_area_threshold:h=.8,label_ids_to_fuse:g=null,target_sizes:_=null,subtask:_e=null}={}){if(Array.isArray(e)&&e.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const tt=await prepareImages(e),rt=tt.map(at=>[at.height,at.width]),{pixel_values:$,pixel_mask:b}=await this.processor(tt),nt=await this.model({pixel_values:$,pixel_mask:b});let st=null;if(_e!==null)st=this.subtasks_mapping[_e];else for(let[at,lt]of Object.entries(this.subtasks_mapping))if(lt in this.processor.feature_extractor){st=this.processor.feature_extractor[lt].bind(this.processor.feature_extractor),_e=at;break}const ot=this.model.config.id2label,it=[];if(_e==="panoptic"||_e==="instance"){const at=st(nt,c,d,h,g,_??rt)[0],lt=at.segmentation;for(const dt of at.segments_info){const ht=new Uint8ClampedArray(lt.data.length);for(let mt=0;mt<lt.data.length;++mt)lt.data[mt]===dt.id&&(ht[mt]=255);const pt=new RawImage(ht,lt.dims[1],lt.dims[0],1);it.push({score:dt.score,label:ot[dt.label_id],mask:pt})}}else if(_e==="semantic"){const{segmentation:at,labels:lt}=st(nt,_??rt)[0];for(const dt of lt){const ht=new Uint8ClampedArray(at.data.length);for(let mt=0;mt<at.data.length;++mt)at.data[mt]===dt&&(ht[mt]=255);const pt=new RawImage(ht,at.dims[1],at.dims[0],1);it.push({score:null,label:ot[dt],mask:pt})}}else throw Error(`Subtask ${_e} not supported.`);return it}}class ZeroShotImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,c,{hypothesis_template:d="This is a photo of {}"}={}){const h=Array.isArray(e),g=await prepareImages(e),_=c.map(b=>d.replace("{}",b)),_e=this.tokenizer(_,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:et}=await this.processor(g),tt=await this.model({..._e,pixel_values:et}),rt=this.model.config.model_type==="siglip"?b=>b.sigmoid().data:b=>softmax(b.data),$=[];for(const b of tt.logits_per_image){const st=[...rt(b)].map((ot,it)=>({score:ot,label:c[it]}));st.sort((ot,it)=>it.score-ot.score),$.push(st)}return h?$:$[0]}}class ObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{threshold:c=.9,percentage:d=!1}={}){const h=Array.isArray(e);if(h&&e.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const g=await prepareImages(e),_=d?null:g.map(nt=>[nt.height,nt.width]),{pixel_values:_e,pixel_mask:et}=await this.processor(g),tt=await this.model({pixel_values:_e,pixel_mask:et}),rt=this.processor.feature_extractor.post_process_object_detection(tt,c,_),$=this.model.config.id2label,b=rt.map(nt=>nt.boxes.map((st,ot)=>({score:nt.scores[ot],label:$[nt.classes[ot]],box:get_bounding_box(st,!d)})));return h?b:b[0]}}class ZeroShotObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,c,{threshold:d=.1,topk:h=null,percentage:g=!1}={}){const _=Array.isArray(e),_e=await prepareImages(e),et=this.tokenizer(c,{padding:!0,truncation:!0}),tt=await this.processor(_e),rt=[];for(let $=0;$<_e.length;++$){const b=_e[$],nt=g?null:[[b.height,b.width]],st=tt.pixel_values[$].unsqueeze_(0),ot=await this.model({...et,pixel_values:st}),it=this.processor.feature_extractor.post_process_object_detection(ot,d,nt,!0)[0];let at=it.boxes.map((lt,dt)=>({score:it.scores[dt],label:c[it.classes[dt]],box:get_bounding_box(lt,!g)})).sort((lt,dt)=>dt.score-lt.score);h!==null&&(at=at.slice(0,h)),rt.push(at)}return _?rt:rt[0]}}class DocumentQuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,c,d={}){const h=(await prepareImages(e))[0],{pixel_values:g}=await this.processor(h),_=`<s_docvqa><s_question>${c}</s_question><s_answer>`,_e=this.tokenizer(_,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,et=await this.model.generate(g,{...d,decoder_input_ids:_e,max_length:this.model.config.decoder.max_position_embeddings}),rt=this.tokenizer.batch_decode(et)[0].match(/<s_answer>(.*?)<\/s_answer>/);let $=null;return rt&&rt.length>=2&&($=rt[1].trim()),[{answer:$}]}}class TextToAudioPipeline extends Pipeline{constructor(c){super(c);nr(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan");this.vocoder=c.vocoder??null}async _call(c,{speaker_embeddings:d=null}={}){return this.processor?this._call_text_to_spectrogram(c,{speaker_embeddings:d}):this._call_text_to_waveform(c)}async _call_text_to_waveform(c){const d=this.tokenizer(c,{padding:!0,truncation:!0}),{waveform:h}=await this.model(d),g=this.model.config.sampling_rate;return{audio:h.data,sampling_rate:g}}async _call_text_to_spectrogram(c,{speaker_embeddings:d}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),(typeof d=="string"||d instanceof URL)&&(d=new Float32Array(await(await fetch(d)).arrayBuffer())),d instanceof Float32Array)d=new Tensor("float32",d,[1,d.length]);else if(!(d instanceof Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:h}=this.tokenizer(c,{padding:!0,truncation:!0}),{waveform:g}=await this.model.generate_speech(h,d,{vocoder:this.vocoder}),_=this.processor.feature_extractor.config.sampling_rate;return{audio:g.data,sampling_rate:_}}}class ImageToImagePipeline extends Pipeline{constructor(e){super(e)}async _call(e){const c=await prepareImages(e),d=await this.processor(c),h=await this.model(d),g=[];for(const _ of h.reconstruction){const _e=_.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");g.push(RawImage.fromTensor(_e))}return g.length>1?g:g[0]}}class DepthEstimationPipeline extends Pipeline{constructor(e){super(e)}async _call(e){const c=await prepareImages(e),d=await this.processor(c),{predicted_depth:h}=await this.model(d),g=[];for(let _=0;_<c.length;++_){const _e=interpolate(h[_],c[_].size.reverse(),"bilinear",!1),et=_e.mul_(255/max(_e.data)[0]).to("uint8");g.push({predicted_depth:h[_],depth:RawImage.fromTensor(et)})}return g.length>1?g:g[0]}}const SUPPORTED_TASKS=Object.freeze({"text-classification":{tokenizer:AutoTokenizer,pipeline:TextClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:AutoTokenizer,pipeline:TokenClassificationPipeline,model:AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:AutoTokenizer,pipeline:QuestionAnsweringPipeline,model:AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:AutoTokenizer,pipeline:FillMaskPipeline,model:AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:AutoTokenizer,pipeline:SummarizationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:AutoTokenizer,pipeline:TranslationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:AutoTokenizer,pipeline:Text2TextGenerationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:AutoTokenizer,pipeline:TextGenerationPipeline,model:AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:AudioClassificationPipeline,model:AutoModelForAudioClassification,processor:AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotAudioClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:AutoTokenizer,pipeline:AutomaticSpeechRecognitionPipeline,model:[AutoModelForSpeechSeq2Seq,AutoModelForCTC],processor:AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:AutoTokenizer,pipeline:TextToAudioPipeline,model:[AutoModelForTextToWaveform,AutoModelForTextToSpectrogram],processor:[AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:AutoTokenizer,pipeline:ImageToTextPipeline,model:AutoModelForVision2Seq,processor:AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:ImageClassificationPipeline,model:AutoModelForImageClassification,processor:AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ImageSegmentationPipeline,model:[AutoModelForImageSegmentation,AutoModelForSemanticSegmentation],processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotImageClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ObjectDetectionPipeline,model:AutoModelForObjectDetection,processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:AutoTokenizer,pipeline:ZeroShotObjectDetectionPipeline,model:AutoModelForZeroShotObjectDetection,processor:AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:AutoTokenizer,pipeline:DocumentQuestionAnsweringPipeline,model:AutoModelForDocumentQuestionAnswering,processor:AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ImageToImagePipeline,model:AutoModelForImageToImage,processor:AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:DepthEstimationPipeline,model:AutoModelForDepthEstimation,processor:AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:AutoTokenizer,pipeline:FeatureExtractionPipeline,model:AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:AutoProcessor,pipeline:ImageFeatureExtractionPipeline,model:[AutoModelForImageFeatureExtraction,AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),TASK_ALIASES=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function pipeline(a,e=null,{quantized:c=!0,progress_callback:d=null,config:h=null,cache_dir:g=null,local_files_only:_=!1,revision:_e="main",model_file_name:et=null}={}){a=TASK_ALIASES[a]??a;const tt=SUPPORTED_TASKS[a.split("_",1)[0]];if(!tt)throw Error(`Unsupported pipeline: ${a}. Must be one of [${Object.keys(SUPPORTED_TASKS)}]`);e||(e=tt.default.model,console.log(`No model specified. Using default model: "${e}".`));const rt={quantized:c,progress_callback:d,config:h,cache_dir:g,local_files_only:_,revision:_e,model_file_name:et},$=new Map([["tokenizer",tt.tokenizer],["model",tt.model],["processor",tt.processor]]),b=await loadItems($,e,rt);b.task=a,dispatchCallback(d,{status:"ready",task:a,model:e});const nt=tt.pipeline;return new nt(b)}async function loadItems(a,e,c){const d=Object.create(null),h=[];for(let[g,_]of a.entries()){if(!_)continue;let _e;Array.isArray(_)?_e=new Promise(async(et,tt)=>{let rt;for(let $ of _){if($===null){et(null);return}try{et(await $.from_pretrained(e,c));return}catch(b){rt=b}}tt(rt)}):_e=_.from_pretrained(e,c),d[g]=_e,h.push(_e)}await Promise.all(h);for(let[g,_]of Object.entries(d))d[g]=await _;return d}class Embeddings{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new AsyncCaller(e??{})}}env$1.cacheDir="./.cache/transformers";env$1.allowLocalModels=!1;class XenovaEmbeddings extends Embeddings{constructor(c){super(c??{});nr(this,"embedder");nr(this,"model");this.model=(c==null?void 0:c.model)||"Xenova/all-MiniLM-L6-v2"}async _embed(c){this.embedder||(this.embedder=await pipeline("feature-extraction",this.model));const d=await this.embedder(c,{pooling:"mean",normalize:!0});return Array.from(d.data)}async embedDocuments(c){const d=[];for(const h of c)d.push(await this._embed(h));return d}async embedQuery(c){return this._embed(c)}}const KNOWLEDGE_FILES=["Cake products.txt","FAQ.txt","Price list.txt"];let vectorStore=null;async function loadKnowledgeDocuments(){try{const a=[];for(const e of KNOWLEDGE_FILES){const c=await fetch(`/knowledge/${encodeURIComponent(e)}`);if(!c.ok){console.warn(`Failed to fetch knowledge file: ${e}`);continue}const d=await c.text();a.push(new Document({pageContent:d,metadata:{source:e}}))}return a.length===0?console.warn("No knowledge documents loaded"):console.log(`Loaded ${a.length} knowledge documents`),a}catch(a){return console.error("Error loading knowledge documents:",a),[]}}async function initializeVectorStore(){try{const a=await loadKnowledgeDocuments();if(a.length===0){console.warn("No documents to initialize vector store");return}const c=await new RecursiveCharacterTextSplitter({chunkSize:1e3,chunkOverlap:200}).splitDocuments(a);console.log(`Split into ${c.length} chunks`);const d=new XenovaEmbeddings;vectorStore=await HNSWLib.fromDocuments(c,d),console.log("Vector store initialized successfully")}catch(a){console.error("Failed to initialize vector store:",a)}}async function queryEmbeddings(a,e=3){if(!vectorStore&&(await initializeVectorStore(),!vectorStore))throw new Error("Vector store initialization failed");try{return await vectorStore.similaritySearch(a,e)}catch(c){throw console.error("Error querying embeddings:",c),c}}initializeVectorStore().catch(console.error);function useStateMachine(a,e){return reactExports.useReducer((c,d)=>e[c][d]??c,a)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext,createScrollAreaScope]=createContextScope$2(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea$1=reactExports.forwardRef((a,e)=>{const{__scopeScrollArea:c,type:d="hover",dir:h,scrollHideDelay:g=600,..._}=a,[_e,et]=reactExports.useState(null),[tt,rt]=reactExports.useState(null),[$,b]=reactExports.useState(null),[nt,st]=reactExports.useState(null),[ot,it]=reactExports.useState(null),[at,lt]=reactExports.useState(0),[dt,ht]=reactExports.useState(0),[pt,mt]=reactExports.useState(!1),[yt,xt]=reactExports.useState(!1),gt=useComposedRefs(e,jt=>et(jt)),bt=useDirection(h);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:c,type:d,dir:bt,scrollHideDelay:g,scrollArea:_e,viewport:tt,onViewportChange:rt,content:$,onContentChange:b,scrollbarX:nt,onScrollbarXChange:st,scrollbarXEnabled:pt,onScrollbarXEnabledChange:mt,scrollbarY:ot,onScrollbarYChange:it,scrollbarYEnabled:yt,onScrollbarYEnabledChange:xt,onCornerWidthChange:lt,onCornerHeightChange:ht,children:jsxRuntimeExports.jsx(Primitive.div,{dir:bt,..._,ref:gt,style:{position:"relative","--radix-scroll-area-corner-width":at+"px","--radix-scroll-area-corner-height":dt+"px",...a.style}})})});ScrollArea$1.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef((a,e)=>{const{__scopeScrollArea:c,children:d,asChild:h,nonce:g,..._}=a,_e=useScrollAreaContext(VIEWPORT_NAME,c),et=reactExports.useRef(null),tt=useComposedRefs(e,et,_e.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:g}),jsxRuntimeExports.jsx(Primitive.div,{"data-radix-scroll-area-viewport":"",..._,asChild:h,ref:tt,style:{overflowX:_e.scrollbarXEnabled?"scroll":"hidden",overflowY:_e.scrollbarYEnabled?"scroll":"hidden",...a.style},children:getSubtree({asChild:h,children:d},rt=>jsxRuntimeExports.jsx("div",{"data-radix-scroll-area-content":"",ref:_e.onContentChange,style:{minWidth:_e.scrollbarXEnabled?"fit-content":void 0},children:rt}))})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef((a,e)=>{const{forceMount:c,...d}=a,h=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),{onScrollbarXEnabledChange:g,onScrollbarYEnabledChange:_}=h,_e=a.orientation==="horizontal";return reactExports.useEffect(()=>(_e?g(!0):_(!0),()=>{_e?g(!1):_(!1)}),[_e,g,_]),h.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...d,ref:e,forceMount:c}):h.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...d,ref:e,forceMount:c}):h.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...d,ref:e,forceMount:c}):h.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...d,ref:e}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef((a,e)=>{const{forceMount:c,...d}=a,h=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),[g,_]=reactExports.useState(!1);return reactExports.useEffect(()=>{const _e=h.scrollArea;let et=0;if(_e){const tt=()=>{window.clearTimeout(et),_(!0)},rt=()=>{et=window.setTimeout(()=>_(!1),h.scrollHideDelay)};return _e.addEventListener("pointerenter",tt),_e.addEventListener("pointerleave",rt),()=>{window.clearTimeout(et),_e.removeEventListener("pointerenter",tt),_e.removeEventListener("pointerleave",rt)}}},[h.scrollArea,h.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:c||g,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":g?"visible":"hidden",...d,ref:e})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef((a,e)=>{const{forceMount:c,...d}=a,h=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),g=a.orientation==="horizontal",_=useDebounceCallback(()=>et("SCROLL_END"),100),[_e,et]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(_e==="idle"){const tt=window.setTimeout(()=>et("HIDE"),h.scrollHideDelay);return()=>window.clearTimeout(tt)}},[_e,h.scrollHideDelay,et]),reactExports.useEffect(()=>{const tt=h.viewport,rt=g?"scrollLeft":"scrollTop";if(tt){let $=tt[rt];const b=()=>{const nt=tt[rt];$!==nt&&(et("SCROLL"),_()),$=nt};return tt.addEventListener("scroll",b),()=>tt.removeEventListener("scroll",b)}},[h.viewport,g,et,_]),jsxRuntimeExports.jsx(Presence,{present:c||_e!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":_e==="hidden"?"hidden":"visible",...d,ref:e,onPointerEnter:composeEventHandlers(a.onPointerEnter,()=>et("POINTER_ENTER")),onPointerLeave:composeEventHandlers(a.onPointerLeave,()=>et("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef((a,e)=>{const c=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),{forceMount:d,...h}=a,[g,_]=reactExports.useState(!1),_e=a.orientation==="horizontal",et=useDebounceCallback(()=>{if(c.viewport){const tt=c.viewport.offsetWidth<c.viewport.scrollWidth,rt=c.viewport.offsetHeight<c.viewport.scrollHeight;_(_e?tt:rt)}},10);return useResizeObserver(c.viewport,et),useResizeObserver(c.content,et),jsxRuntimeExports.jsx(Presence,{present:d||g,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":g?"visible":"hidden",...h,ref:e})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef((a,e)=>{const{orientation:c="vertical",...d}=a,h=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),g=reactExports.useRef(null),_=reactExports.useRef(0),[_e,et]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),tt=getThumbRatio(_e.viewport,_e.content),rt={...d,sizes:_e,onSizesChange:et,hasThumb:tt>0&&tt<1,onThumbChange:b=>g.current=b,onThumbPointerUp:()=>_.current=0,onThumbPointerDown:b=>_.current=b};function $(b,nt){return getScrollPositionFromPointer(b,_.current,_e,nt)}return c==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...rt,ref:e,onThumbPositionChange:()=>{if(h.viewport&&g.current){const b=h.viewport.scrollLeft,nt=getThumbOffsetFromScroll(b,_e,h.dir);g.current.style.transform=`translate3d(${nt}px, 0, 0)`}},onWheelScroll:b=>{h.viewport&&(h.viewport.scrollLeft=b)},onDragScroll:b=>{h.viewport&&(h.viewport.scrollLeft=$(b,h.dir))}}):c==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...rt,ref:e,onThumbPositionChange:()=>{if(h.viewport&&g.current){const b=h.viewport.scrollTop,nt=getThumbOffsetFromScroll(b,_e);g.current.style.transform=`translate3d(0, ${nt}px, 0)`}},onWheelScroll:b=>{h.viewport&&(h.viewport.scrollTop=b)},onDragScroll:b=>{h.viewport&&(h.viewport.scrollTop=$(b))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef((a,e)=>{const{sizes:c,onSizesChange:d,...h}=a,g=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),[_,_e]=reactExports.useState(),et=reactExports.useRef(null),tt=useComposedRefs(e,et,g.onScrollbarXChange);return reactExports.useEffect(()=>{et.current&&_e(getComputedStyle(et.current))},[et]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...h,ref:tt,sizes:c,style:{bottom:0,left:g.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:g.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(c)+"px",...a.style},onThumbPointerDown:rt=>a.onThumbPointerDown(rt.x),onDragScroll:rt=>a.onDragScroll(rt.x),onWheelScroll:(rt,$)=>{if(g.viewport){const b=g.viewport.scrollLeft+rt.deltaX;a.onWheelScroll(b),isScrollingWithinScrollbarBounds(b,$)&&rt.preventDefault()}},onResize:()=>{et.current&&g.viewport&&_&&d({content:g.viewport.scrollWidth,viewport:g.viewport.offsetWidth,scrollbar:{size:et.current.clientWidth,paddingStart:toInt(_.paddingLeft),paddingEnd:toInt(_.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef((a,e)=>{const{sizes:c,onSizesChange:d,...h}=a,g=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),[_,_e]=reactExports.useState(),et=reactExports.useRef(null),tt=useComposedRefs(e,et,g.onScrollbarYChange);return reactExports.useEffect(()=>{et.current&&_e(getComputedStyle(et.current))},[et]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...h,ref:tt,sizes:c,style:{top:0,right:g.dir==="ltr"?0:void 0,left:g.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(c)+"px",...a.style},onThumbPointerDown:rt=>a.onThumbPointerDown(rt.y),onDragScroll:rt=>a.onDragScroll(rt.y),onWheelScroll:(rt,$)=>{if(g.viewport){const b=g.viewport.scrollTop+rt.deltaY;a.onWheelScroll(b),isScrollingWithinScrollbarBounds(b,$)&&rt.preventDefault()}},onResize:()=>{et.current&&g.viewport&&_&&d({content:g.viewport.scrollHeight,viewport:g.viewport.offsetHeight,scrollbar:{size:et.current.clientHeight,paddingStart:toInt(_.paddingTop),paddingEnd:toInt(_.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef((a,e)=>{const{__scopeScrollArea:c,sizes:d,hasThumb:h,onThumbChange:g,onThumbPointerUp:_,onThumbPointerDown:_e,onThumbPositionChange:et,onDragScroll:tt,onWheelScroll:rt,onResize:$,...b}=a,nt=useScrollAreaContext(SCROLLBAR_NAME,c),[st,ot]=reactExports.useState(null),it=useComposedRefs(e,gt=>ot(gt)),at=reactExports.useRef(null),lt=reactExports.useRef(""),dt=nt.viewport,ht=d.content-d.viewport,pt=useCallbackRef$1(rt),mt=useCallbackRef$1(et),yt=useDebounceCallback($,10);function xt(gt){if(at.current){const bt=gt.clientX-at.current.left,jt=gt.clientY-at.current.top;tt({x:bt,y:jt})}}return reactExports.useEffect(()=>{const gt=bt=>{const jt=bt.target;(st==null?void 0:st.contains(jt))&&pt(bt,ht)};return document.addEventListener("wheel",gt,{passive:!1}),()=>document.removeEventListener("wheel",gt,{passive:!1})},[dt,st,ht,pt]),reactExports.useEffect(mt,[d,mt]),useResizeObserver(st,yt),useResizeObserver(nt.content,yt),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:c,scrollbar:st,hasThumb:h,onThumbChange:useCallbackRef$1(g),onThumbPointerUp:useCallbackRef$1(_),onThumbPositionChange:mt,onThumbPointerDown:useCallbackRef$1(_e),children:jsxRuntimeExports.jsx(Primitive.div,{...b,ref:it,style:{position:"absolute",...b.style},onPointerDown:composeEventHandlers(a.onPointerDown,gt=>{gt.button===0&&(gt.target.setPointerCapture(gt.pointerId),at.current=st.getBoundingClientRect(),lt.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",nt.viewport&&(nt.viewport.style.scrollBehavior="auto"),xt(gt))}),onPointerMove:composeEventHandlers(a.onPointerMove,xt),onPointerUp:composeEventHandlers(a.onPointerUp,gt=>{const bt=gt.target;bt.hasPointerCapture(gt.pointerId)&&bt.releasePointerCapture(gt.pointerId),document.body.style.webkitUserSelect=lt.current,nt.viewport&&(nt.viewport.style.scrollBehavior=""),at.current=null})})})}),THUMB_NAME="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef((a,e)=>{const{forceMount:c,...d}=a,h=useScrollbarContext(THUMB_NAME,a.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:c||h.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:e,...d})})}),ScrollAreaThumbImpl=reactExports.forwardRef((a,e)=>{const{__scopeScrollArea:c,style:d,...h}=a,g=useScrollAreaContext(THUMB_NAME,c),_=useScrollbarContext(THUMB_NAME,c),{onThumbPositionChange:_e}=_,et=useComposedRefs(e,$=>_.onThumbChange($)),tt=reactExports.useRef(),rt=useDebounceCallback(()=>{tt.current&&(tt.current(),tt.current=void 0)},100);return reactExports.useEffect(()=>{const $=g.viewport;if($){const b=()=>{if(rt(),!tt.current){const nt=addUnlinkedScrollListener($,_e);tt.current=nt,_e()}};return _e(),$.addEventListener("scroll",b),()=>$.removeEventListener("scroll",b)}},[g.viewport,rt,_e]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":_.hasThumb?"visible":"hidden",...h,ref:et,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...d},onPointerDownCapture:composeEventHandlers(a.onPointerDownCapture,$=>{const nt=$.target.getBoundingClientRect(),st=$.clientX-nt.left,ot=$.clientY-nt.top;_.onThumbPointerDown({x:st,y:ot})}),onPointerUp:composeEventHandlers(a.onPointerUp,_.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef((a,e)=>{const c=useScrollAreaContext(CORNER_NAME,a.__scopeScrollArea),d=!!(c.scrollbarX&&c.scrollbarY);return c.type!=="scroll"&&d?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{...a,ref:e}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef((a,e)=>{const{__scopeScrollArea:c,...d}=a,h=useScrollAreaContext(CORNER_NAME,c),[g,_]=reactExports.useState(0),[_e,et]=reactExports.useState(0),tt=!!(g&&_e);return useResizeObserver(h.scrollbarX,()=>{var $;const rt=(($=h.scrollbarX)==null?void 0:$.offsetHeight)||0;h.onCornerHeightChange(rt),et(rt)}),useResizeObserver(h.scrollbarY,()=>{var $;const rt=(($=h.scrollbarY)==null?void 0:$.offsetWidth)||0;h.onCornerWidthChange(rt),_(rt)}),tt?jsxRuntimeExports.jsx(Primitive.div,{...d,ref:e,style:{width:g,height:_e,position:"absolute",right:h.dir==="ltr"?0:void 0,left:h.dir==="rtl"?0:void 0,bottom:0,...a.style}}):null});function toInt(a){return a?parseInt(a,10):0}function getThumbRatio(a,e){const c=a/e;return isNaN(c)?0:c}function getThumbSize(a){const e=getThumbRatio(a.viewport,a.content),c=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,d=(a.scrollbar.size-c)*e;return Math.max(d,18)}function getScrollPositionFromPointer(a,e,c,d="ltr"){const h=getThumbSize(c),g=h/2,_=e||g,_e=h-_,et=c.scrollbar.paddingStart+_,tt=c.scrollbar.size-c.scrollbar.paddingEnd-_e,rt=c.content-c.viewport,$=d==="ltr"?[0,rt]:[rt*-1,0];return linearScale([et,tt],$)(a)}function getThumbOffsetFromScroll(a,e,c="ltr"){const d=getThumbSize(e),h=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,g=e.scrollbar.size-h,_=e.content-e.viewport,_e=g-d,et=c==="ltr"?[0,_]:[_*-1,0],tt=clamp(a,et);return linearScale([0,_],[0,_e])(tt)}function linearScale(a,e){return c=>{if(a[0]===a[1]||e[0]===e[1])return e[0];const d=(e[1]-e[0])/(a[1]-a[0]);return e[0]+d*(c-a[0])}}function isScrollingWithinScrollbarBounds(a,e){return a>0&&a<e}var addUnlinkedScrollListener=(a,e=()=>{})=>{let c={left:a.scrollLeft,top:a.scrollTop},d=0;return function h(){const g={left:a.scrollLeft,top:a.scrollTop},_=c.left!==g.left,_e=c.top!==g.top;(_||_e)&&e(),c=g,d=window.requestAnimationFrame(h)}(),()=>window.cancelAnimationFrame(d)};function useDebounceCallback(a,e){const c=useCallbackRef$1(a),d=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(d.current),[]),reactExports.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(c,e)},[c,e])}function useResizeObserver(a,e){const c=useCallbackRef$1(e);useLayoutEffect2(()=>{let d=0;if(a){const h=new ResizeObserver(()=>{cancelAnimationFrame(d),d=window.requestAnimationFrame(c)});return h.observe(a),()=>{window.cancelAnimationFrame(d),h.unobserve(a)}}},[a,c])}function getSubtree(a,e){const{asChild:c,children:d}=a;if(!c)return typeof e=="function"?e(d):e;const h=reactExports.Children.only(d);return reactExports.cloneElement(h,{children:typeof e=="function"?e(h.props.children):e})}var Root=ScrollArea$1,Viewport=ScrollAreaViewport,Corner=ScrollAreaCorner;const ScrollArea=reactExports.forwardRef(({className:a,children:e,...c},d)=>jsxRuntimeExports.jsxs(Root,{ref:d,className:cn("relative overflow-hidden",a),...c,children:[jsxRuntimeExports.jsx(Viewport,{className:"h-full w-full rounded-[inherit]",children:e}),jsxRuntimeExports.jsx(ScrollBar,{}),jsxRuntimeExports.jsx(Corner,{})]}));ScrollArea.displayName=Root.displayName;const ScrollBar=reactExports.forwardRef(({className:a,orientation:e="vertical",...c},d)=>jsxRuntimeExports.jsx(ScrollAreaScrollbar,{ref:d,orientation:e,className:cn("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...c,children:jsxRuntimeExports.jsx(ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));ScrollBar.displayName=ScrollAreaScrollbar.displayName;const HF_HUB_URL="https://huggingface.co",HF_ROUTER_URL="https://router.huggingface.co",HF_HEADER_X_BILL_TO="X-HF-Bill-To",HARDCODED_MODEL_INFERENCE_MAPPING={"black-forest-labs":{},cerebras:{},cohere:{},"fal-ai":{},"featherless-ai":{},"fireworks-ai":{},groq:{},"hf-inference":{},hyperbolic:{},nebius:{},novita:{},nscale:{},openai:{},ovhcloud:{},replicate:{},sambanova:{},together:{}};class InferenceOutputError extends TypeError{constructor(e){super(`Invalid inference output: ${e}. Use the 'request' method with the same parameters to do a custom call with no type checking.`),this.name="InferenceOutputError"}}function toArray(a){return Array.isArray(a)?a:[a]}class TaskProviderHelper{constructor(e,c,d=!1){nr(this,"provider");nr(this,"baseUrl");nr(this,"clientSideRoutingOnly");this.provider=e,this.baseUrl=c,this.clientSideRoutingOnly=d}makeBaseUrl(e){return e.authMethod!=="provider-key"?`${HF_ROUTER_URL}/${this.provider}`:this.baseUrl}makeBody(e){return"data"in e.args&&e.args.data?e.args.data:JSON.stringify(this.preparePayload(e))}makeUrl(e){const c=this.makeBaseUrl(e),d=this.makeRoute(e).replace(/^\/+/,"");return`${c}/${d}`}prepareHeaders(e,c){const d={Authorization:`Bearer ${e.accessToken}`};return c||(d["Content-Type"]="application/json"),d}}class BaseConversationalTask extends TaskProviderHelper{constructor(e,c,d=!1){super(e,c,d)}makeRoute(){return"v1/chat/completions"}preparePayload(e){return{...e.args,model:e.model}}async getResponse(e){if(typeof e=="object"&&Array.isArray(e==null?void 0:e.choices)&&typeof(e==null?void 0:e.created)=="number"&&typeof(e==null?void 0:e.id)=="string"&&typeof(e==null?void 0:e.model)=="string"&&(e.system_fingerprint===void 0||e.system_fingerprint===null||typeof e.system_fingerprint=="string")&&typeof(e==null?void 0:e.usage)=="object")return e;throw new InferenceOutputError("Expected ChatCompletionOutput")}}class BaseTextGenerationTask extends TaskProviderHelper{constructor(e,c,d=!1){super(e,c,d)}preparePayload(e){return{...e.args,model:e.model}}makeRoute(){return"v1/completions"}async getResponse(e){const c=toArray(e);if(Array.isArray(c)&&c.length>0&&c.every(d=>typeof d=="object"&&!!d&&"generated_text"in d&&typeof d.generated_text=="string"))return c[0];throw new InferenceOutputError("Expected Array<{generated_text: string}>")}}function base64FromBytes(a){if(globalThis.Buffer)return globalThis.Buffer.from(a).toString("base64");{const e=[];return a.forEach(c=>{e.push(String.fromCharCode(c))}),globalThis.btoa(e.join(""))}}function pick(a,e){return Object.assign({},...e.map(c=>{if(a[c]!==void 0)return{[c]:a[c]}}))}function typedInclude(a,e){return a.includes(e)}function omit(a,e){const c=Array.isArray(e)?e:[e],d=Object.keys(a).filter(h=>!typedInclude(c,h));return pick(a,d)}const EQUIVALENT_SENTENCE_TRANSFORMERS_TASKS=["feature-extraction","sentence-similarity"];class HFInferenceTask extends TaskProviderHelper{constructor(){super("hf-inference",`${HF_ROUTER_URL}/hf-inference`)}preparePayload(e){return e.args}makeUrl(e){return e.model.startsWith("http://")||e.model.startsWith("https://")?e.model:super.makeUrl(e)}makeRoute(e){return e.task&&["feature-extraction","sentence-similarity"].includes(e.task)?`models/${e.model}/pipeline/${e.task}`:`models/${e.model}`}async getResponse(e){return e}}class HFInferenceTextToImageTask extends HFInferenceTask{async getResponse(e,c,d,h){if(!e)throw new InferenceOutputError("response is undefined");if(typeof e=="object"){if("data"in e&&Array.isArray(e.data)&&e.data[0].b64_json){const g=e.data[0].b64_json;return h==="url"?`data:image/jpeg;base64,${g}`:await(await fetch(`data:image/jpeg;base64,${g}`)).blob()}if("output"in e&&Array.isArray(e.output))return h==="url"?e.output[0]:await(await fetch(e.output[0])).blob()}if(e instanceof Blob)return h==="url"?`data:image/jpeg;base64,${await e.arrayBuffer().then(_=>Buffer.from(_).toString("base64"))}`:e;throw new InferenceOutputError("Expected a Blob ")}}class HFInferenceConversationalTask extends HFInferenceTask{makeUrl(e){let c;return e.model.startsWith("http://")||e.model.startsWith("https://")?c=e.model.trim():c=`${this.makeBaseUrl(e)}/models/${e.model}`,c=c.replace(/\/+$/,""),c.endsWith("/v1")?c+="/chat/completions":c.endsWith("/chat/completions")||(c+="/v1/chat/completions"),c}preparePayload(e){return{...e.args,model:e.model}}async getResponse(e){return e}}class HFInferenceTextGenerationTask extends HFInferenceTask{async getResponse(e){const c=toArray(e);if(Array.isArray(c)&&c.every(d=>"generated_text"in d&&typeof(d==null?void 0:d.generated_text)=="string"))return c==null?void 0:c[0];throw new InferenceOutputError("Expected Array<{generated_text: string}>")}}class HFInferenceAudioClassificationTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c=="object"&&c!==null&&typeof c.label=="string"&&typeof c.score=="number"))return e;throw new InferenceOutputError("Expected Array<{label: string, score: number}> but received different format")}}class HFInferenceAutomaticSpeechRecognitionTask extends HFInferenceTask{async getResponse(e){return e}async preparePayloadAsync(e){return"data"in e?e:{...omit(e,"inputs"),data:e.inputs}}}class HFInferenceAudioToAudioTask extends HFInferenceTask{async getResponse(e){if(!Array.isArray(e))throw new InferenceOutputError("Expected Array");if(!e.every(c=>typeof c=="object"&&c&&"label"in c&&typeof c.label=="string"&&"content-type"in c&&typeof c["content-type"]=="string"&&"blob"in c&&typeof c.blob=="string"))throw new InferenceOutputError("Expected Array<{label: string, audio: Blob}>");return e}}class HFInferenceDocumentQuestionAnsweringTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c=="object"&&!!c&&typeof(c==null?void 0:c.answer)=="string"&&(typeof c.end=="number"||typeof c.end>"u")&&(typeof c.score=="number"||typeof c.score>"u")&&(typeof c.start=="number"||typeof c.start>"u")))return e[0];throw new InferenceOutputError("Expected Array<{answer: string, end: number, score: number, start: number}>")}}class HFInferenceFeatureExtractionTask extends HFInferenceTask{async getResponse(e){const c=(d,h,g=0)=>g>h?!1:d.every(_=>Array.isArray(_))?d.every(_=>c(_,h,g+1)):d.every(_=>typeof _=="number");if(Array.isArray(e)&&c(e,3,0))return e;throw new InferenceOutputError("Expected Array<number[][][] | number[][] | number[] | number>")}}class HFInferenceImageClassificationTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c.label=="string"&&typeof c.score=="number"))return e;throw new InferenceOutputError("Expected Array<{label: string, score: number}>")}}class HFInferenceImageSegmentationTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c.label=="string"&&typeof c.mask=="string"&&(c.score===void 0||typeof c.score=="number")))return e;throw new InferenceOutputError("Expected Array<{label: string, mask: string, score: number}>")}}class HFInferenceImageToTextTask extends HFInferenceTask{async getResponse(e){if(typeof(e==null?void 0:e.generated_text)!="string")throw new InferenceOutputError("Expected {generated_text: string}");return e}}class HFInferenceImageToImageTask extends HFInferenceTask{async preparePayloadAsync(e){return e.parameters?{...e,inputs:base64FromBytes(new Uint8Array(e.inputs instanceof ArrayBuffer?e.inputs:await e.inputs.arrayBuffer()))}:{...e,model:e.model,data:e.inputs}}async getResponse(e){if(e instanceof Blob)return e;throw new InferenceOutputError("Expected Blob")}}class HFInferenceObjectDetectionTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c.label=="string"&&typeof c.score=="number"&&typeof c.box.xmin=="number"&&typeof c.box.ymin=="number"&&typeof c.box.xmax=="number"&&typeof c.box.ymax=="number"))return e;throw new InferenceOutputError("Expected Array<{label: string, score: number, box: {xmin: number, ymin: number, xmax: number, ymax: number}}>")}}class HFInferenceZeroShotImageClassificationTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c.label=="string"&&typeof c.score=="number"))return e;throw new InferenceOutputError("Expected Array<{label: string, score: number}>")}}class HFInferenceTextClassificationTask extends HFInferenceTask{async getResponse(e){const c=e==null?void 0:e[0];if(Array.isArray(c)&&c.every(d=>typeof(d==null?void 0:d.label)=="string"&&typeof d.score=="number"))return c;throw new InferenceOutputError("Expected Array<{label: string, score: number}>")}}class HFInferenceQuestionAnsweringTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)?e.every(c=>typeof c=="object"&&!!c&&typeof c.answer=="string"&&typeof c.end=="number"&&typeof c.score=="number"&&typeof c.start=="number"):typeof e=="object"&&e&&typeof e.answer=="string"&&typeof e.end=="number"&&typeof e.score=="number"&&typeof e.start=="number")return Array.isArray(e)?e[0]:e;throw new InferenceOutputError("Expected Array<{answer: string, end: number, score: number, start: number}>")}}class HFInferenceFillMaskTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c.score=="number"&&typeof c.sequence=="string"&&typeof c.token=="number"&&typeof c.token_str=="string"))return e;throw new InferenceOutputError("Expected Array<{score: number, sequence: string, token: number, token_str: string}>")}}class HFInferenceZeroShotClassificationTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>Array.isArray(c.labels)&&c.labels.every(d=>typeof d=="string")&&Array.isArray(c.scores)&&c.scores.every(d=>typeof d=="number")&&typeof c.sequence=="string"))return e;throw new InferenceOutputError("Expected Array<{labels: string[], scores: number[], sequence: string}>")}}class HFInferenceSentenceSimilarityTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c=="number"))return e;throw new InferenceOutputError("Expected Array<number>")}}class HFInferenceTableQuestionAnsweringTask extends HFInferenceTask{static validate(e){return typeof e=="object"&&!!e&&"aggregator"in e&&typeof e.aggregator=="string"&&"answer"in e&&typeof e.answer=="string"&&"cells"in e&&Array.isArray(e.cells)&&e.cells.every(c=>typeof c=="string")&&"coordinates"in e&&Array.isArray(e.coordinates)&&e.coordinates.every(c=>Array.isArray(c)&&c.every(d=>typeof d=="number"))}async getResponse(e){if(Array.isArray(e)&&Array.isArray(e)?e.every(c=>HFInferenceTableQuestionAnsweringTask.validate(c)):HFInferenceTableQuestionAnsweringTask.validate(e))return Array.isArray(e)?e[0]:e;throw new InferenceOutputError("Expected {aggregator: string, answer: string, cells: string[], coordinates: number[][]}")}}class HFInferenceTokenClassificationTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c.end=="number"&&typeof c.entity_group=="string"&&typeof c.score=="number"&&typeof c.start=="number"&&typeof c.word=="string"))return e;throw new InferenceOutputError("Expected Array<{end: number, entity_group: string, score: number, start: number, word: string}>")}}class HFInferenceTranslationTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof(c==null?void 0:c.translation_text)=="string"))return(e==null?void 0:e.length)===1?e==null?void 0:e[0]:e;throw new InferenceOutputError("Expected Array<{translation_text: string}>")}}class HFInferenceSummarizationTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof(c==null?void 0:c.summary_text)=="string"))return e==null?void 0:e[0];throw new InferenceOutputError("Expected Array<{summary_text: string}>")}}class HFInferenceTextToSpeechTask extends HFInferenceTask{async getResponse(e){return e}}class HFInferenceTabularClassificationTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c=="number"))return e;throw new InferenceOutputError("Expected Array<number>")}}class HFInferenceVisualQuestionAnsweringTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c=="object"&&!!c&&typeof(c==null?void 0:c.answer)=="string"&&typeof c.score=="number"))return e[0];throw new InferenceOutputError("Expected Array<{answer: string, score: number}>")}}class HFInferenceTabularRegressionTask extends HFInferenceTask{async getResponse(e){if(Array.isArray(e)&&e.every(c=>typeof c=="number"))return e;throw new InferenceOutputError("Expected Array<number>")}}class HFInferenceTextToAudioTask extends HFInferenceTask{async getResponse(e){return e}}const inferenceProviderMappingCache=new Map;async function fetchInferenceProviderMappingForModel(a,e,c){let d;if(inferenceProviderMappingCache.has(a))d=inferenceProviderMappingCache.get(a);else{const h=await((c==null?void 0:c.fetch)??fetch)(`${HF_HUB_URL}/api/models/${a}?expand[]=inferenceProviderMapping`,{headers:e!=null&&e.startsWith("hf_")?{Authorization:`Bearer ${e}`}:{}});if(h.status===404)throw new Error(`Model ${a} does not exist`);d=await h.json().then(g=>g.inferenceProviderMapping).catch(()=>null),d&&inferenceProviderMappingCache.set(a,d)}if(!d)throw new Error(`We have not been able to find inference provider information for model ${a}.`);return d}async function getInferenceProviderMapping(a,e){if(HARDCODED_MODEL_INFERENCE_MAPPING[a.provider][a.modelId])return HARDCODED_MODEL_INFERENCE_MAPPING[a.provider][a.modelId];const d=(await fetchInferenceProviderMappingForModel(a.modelId,a.accessToken,e))[a.provider];if(d){const h=a.provider==="hf-inference"&&typedInclude(EQUIVALENT_SENTENCE_TRANSFORMERS_TASKS,a.task)?EQUIVALENT_SENTENCE_TRANSFORMERS_TASKS:[a.task];if(!typedInclude(h,d.task))throw new Error(`Model ${a.modelId} is not supported for task ${a.task} and provider ${a.provider}. Supported task: ${d.task}.`);return d.status==="staging"&&console.warn(`Model ${a.modelId} is in staging mode for provider ${a.provider}. Meant for test purposes only.`),{...d,hfModelId:a.modelId}}return null}async function resolveProvider(a,e,c){if(c){if(a)throw new Error("Specifying both endpointUrl and provider is not supported.");return"hf-inference"}if(a||(console.log("Defaulting to 'auto' which will select the first provider available for the model, sorted by the user's order in https://hf.co/settings/inference-providers."),a="auto"),a==="auto"){if(!e)throw new Error("Specifying a model is required when provider is 'auto'");const d=await fetchInferenceProviderMappingForModel(e);a=Object.keys(d)[0]}if(!a)throw new Error(`No Inference Provider available for model ${e}.`);return a}function delay(a){return new Promise(e=>{setTimeout(()=>e(),a)})}const BLACK_FOREST_LABS_AI_API_BASE_URL="https://api.us1.bfl.ai";class BlackForestLabsTextToImageTask extends TaskProviderHelper{constructor(){super("black-forest-labs",BLACK_FOREST_LABS_AI_API_BASE_URL)}preparePayload(e){return{...omit(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs}}prepareHeaders(e,c){const d={Authorization:e.authMethod!=="provider-key"?`Bearer ${e.accessToken}`:`X-Key ${e.accessToken}`};return c||(d["Content-Type"]="application/json"),d}makeRoute(e){if(!e)throw new Error("Params are required");return`/v1/${e.model}`}async getResponse(e,c,d,h){const g=new URL(e.polling_url);for(let _=0;_<5;_++){await delay(1e3),console.debug(`Polling Black Forest Labs API for the result... ${_+1}/5`),g.searchParams.set("attempt",_.toString(10));const _e=await fetch(g,{headers:{"Content-Type":"application/json"}});if(!_e.ok)throw new InferenceOutputError("Failed to fetch result from black forest labs API");const et=await _e.json();if(typeof et=="object"&&et&&"status"in et&&typeof et.status=="string"&&et.status==="Ready"&&"result"in et&&typeof et.result=="object"&&et.result&&"sample"in et.result&&typeof et.result.sample=="string")return h==="url"?et.result.sample:await(await fetch(et.result.sample)).blob()}throw new InferenceOutputError("Failed to fetch result from black forest labs API")}}class CerebrasConversationalTask extends BaseConversationalTask{constructor(){super("cerebras","https://api.cerebras.ai")}}class CohereConversationalTask extends BaseConversationalTask{constructor(){super("cohere","https://api.cohere.com")}makeRoute(){return"/compatibility/v1/chat/completions"}}function isUrl(a){return/^http(s?):/.test(a)||a.startsWith("/")}const FAL_AI_SUPPORTED_BLOB_TYPES=["audio/mpeg","audio/mp4","audio/wav","audio/x-wav"];class FalAITask extends TaskProviderHelper{constructor(e){super("fal-ai",e||"https://fal.run")}preparePayload(e){return e.args}makeRoute(e){return`/${e.model}`}prepareHeaders(e,c){const d={Authorization:e.authMethod!=="provider-key"?`Bearer ${e.accessToken}`:`Key ${e.accessToken}`};return c||(d["Content-Type"]="application/json"),d}}function buildLoraPath(a,e){return`${HF_HUB_URL}/${a}/resolve/main/${e}`}class FalAITextToImageTask extends FalAITask{preparePayload(e){var d;const c={...omit(e.args,["inputs","parameters"]),...e.args.parameters,sync_mode:!0,prompt:e.args.inputs};return((d=e.mapping)==null?void 0:d.adapter)==="lora"&&e.mapping.adapterWeightsPath&&(c.loras=[{path:buildLoraPath(e.mapping.hfModelId,e.mapping.adapterWeightsPath),scale:1}],e.mapping.providerId==="fal-ai/lora"&&(c.model_name="stabilityai/stable-diffusion-xl-base-1.0")),c}async getResponse(e,c){if(typeof e=="object"&&"images"in e&&Array.isArray(e.images)&&e.images.length>0&&"url"in e.images[0]&&typeof e.images[0].url=="string")return c==="url"?e.images[0].url:await(await fetch(e.images[0].url)).blob();throw new InferenceOutputError("Expected Fal.ai text-to-image response format")}}class FalAITextToVideoTask extends FalAITask{constructor(){super("https://queue.fal.run")}makeRoute(e){return e.authMethod!=="provider-key"?`/${e.model}?_subdomain=queue`:`/${e.model}`}preparePayload(e){return{...omit(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs}}async getResponse(e,c,d){if(!c||!d)throw new InferenceOutputError("URL and headers are required for text-to-video task");if(!e.request_id)throw new InferenceOutputError("No request ID found in the response");let g=e.status;const _=new URL(c),_e=`${_.protocol}//${_.host}${_.host==="router.huggingface.co"?"/fal-ai":""}`,et=new URL(e.response_url).pathname,tt=_.search,rt=`${_e}${et}/status${tt}`,$=`${_e}${et}${tt}`;for(;g!=="COMPLETED";){await delay(500);const st=await fetch(rt,{headers:d});if(!st.ok)throw new InferenceOutputError("Failed to fetch response status from fal-ai API");try{g=(await st.json()).status}catch{throw new InferenceOutputError("Failed to parse status response from fal-ai API")}}const b=await fetch($,{headers:d});let nt;try{nt=await b.json()}catch{throw new InferenceOutputError("Failed to parse result response from fal-ai API")}if(typeof nt=="object"&&nt&&"video"in nt&&typeof nt.video=="object"&&nt.video&&"url"in nt.video&&typeof nt.video.url=="string"&&isUrl(nt.video.url))return await(await fetch(nt.video.url)).blob();throw new InferenceOutputError("Expected { video: { url: string } } result format, got instead: "+JSON.stringify(nt))}}class FalAIAutomaticSpeechRecognitionTask extends FalAITask{prepareHeaders(e,c){const d=super.prepareHeaders(e,c);return d["Content-Type"]="application/json",d}async getResponse(e){const c=e;if(typeof(c==null?void 0:c.text)!="string")throw new InferenceOutputError(`Expected { text: string } format from Fal.ai Automatic Speech Recognition, got: ${JSON.stringify(e)}`);return{text:c.text}}async preparePayloadAsync(e){const c="data"in e&&e.data instanceof Blob?e.data:"inputs"in e?e.inputs:void 0,d=c==null?void 0:c.type;if(!d)throw new Error("Unable to determine the input's content-type. Make sure your are passing a Blob when using provider fal-ai.");if(!FAL_AI_SUPPORTED_BLOB_TYPES.includes(d))throw new Error(`Provider fal-ai does not support blob type ${d} - supported content types are: ${FAL_AI_SUPPORTED_BLOB_TYPES.join(", ")}`);const h=base64FromBytes(new Uint8Array(await c.arrayBuffer()));return{..."data"in e?omit(e,"data"):omit(e,"inputs"),audio_url:`data:${d};base64,${h}`}}}class FalAITextToSpeechTask extends FalAITask{preparePayload(e){return{...omit(e.args,["inputs","parameters"]),...e.args.parameters,text:e.args.inputs}}async getResponse(e){var d;const c=e;if(typeof((d=c==null?void 0:c.audio)==null?void 0:d.url)!="string")throw new InferenceOutputError(`Expected { audio: { url: string } } format from Fal.ai Text-to-Speech, got: ${JSON.stringify(e)}`);try{const h=await fetch(c.audio.url);if(!h.ok)throw new Error(`Failed to fetch audio from ${c.audio.url}: ${h.statusText}`);return await h.blob()}catch(h){throw new InferenceOutputError(`Error fetching or processing audio from Fal.ai Text-to-Speech URL: ${c.audio.url}. ${h instanceof Error?h.message:String(h)}`)}}}const FEATHERLESS_API_BASE_URL="https://api.featherless.ai";class FeatherlessAIConversationalTask extends BaseConversationalTask{constructor(){super("featherless-ai",FEATHERLESS_API_BASE_URL)}}class FeatherlessAITextGenerationTask extends BaseTextGenerationTask{constructor(){super("featherless-ai",FEATHERLESS_API_BASE_URL)}preparePayload(e){return{model:e.model,...omit(e.args,["inputs","parameters"]),...e.args.parameters?{max_tokens:e.args.parameters.max_new_tokens,...omit(e.args.parameters,"max_new_tokens")}:void 0,prompt:e.args.inputs}}async getResponse(e){if(typeof e=="object"&&"choices"in e&&Array.isArray(e==null?void 0:e.choices)&&typeof(e==null?void 0:e.model)=="string")return{generated_text:e.choices[0].text};throw new InferenceOutputError("Expected Featherless AI text generation response format")}}class FireworksConversationalTask extends BaseConversationalTask{constructor(){super("fireworks-ai","https://api.fireworks.ai")}makeRoute(){return"/inference/v1/chat/completions"}}const GROQ_API_BASE_URL="https://api.groq.com";class GroqTextGenerationTask extends BaseTextGenerationTask{constructor(){super("groq",GROQ_API_BASE_URL)}makeRoute(){return"/openai/v1/chat/completions"}}class GroqConversationalTask extends BaseConversationalTask{constructor(){super("groq",GROQ_API_BASE_URL)}makeRoute(){return"/openai/v1/chat/completions"}}const HYPERBOLIC_API_BASE_URL="https://api.hyperbolic.xyz";class HyperbolicConversationalTask extends BaseConversationalTask{constructor(){super("hyperbolic",HYPERBOLIC_API_BASE_URL)}}class HyperbolicTextGenerationTask extends BaseTextGenerationTask{constructor(){super("hyperbolic",HYPERBOLIC_API_BASE_URL)}makeRoute(){return"v1/chat/completions"}preparePayload(e){return{messages:[{content:e.args.inputs,role:"user"}],...e.args.parameters?{max_tokens:e.args.parameters.max_new_tokens,...omit(e.args.parameters,"max_new_tokens")}:void 0,...omit(e.args,["inputs","parameters"]),model:e.model}}async getResponse(e){if(typeof e=="object"&&"choices"in e&&Array.isArray(e==null?void 0:e.choices)&&typeof(e==null?void 0:e.model)=="string")return{generated_text:e.choices[0].message.content};throw new InferenceOutputError("Expected Hyperbolic text generation response format")}}class HyperbolicTextToImageTask extends TaskProviderHelper{constructor(){super("hyperbolic",HYPERBOLIC_API_BASE_URL)}makeRoute(e){return"/v1/images/generations"}preparePayload(e){return{...omit(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs,model_name:e.model}}async getResponse(e,c,d,h){if(typeof e=="object"&&"images"in e&&Array.isArray(e.images)&&e.images[0]&&typeof e.images[0].image=="string")return h==="url"?`data:image/jpeg;base64,${e.images[0].image}`:fetch(`data:image/jpeg;base64,${e.images[0].image}`).then(g=>g.blob());throw new InferenceOutputError("Expected Hyperbolic text-to-image response format")}}const NEBIUS_API_BASE_URL="https://api.studio.nebius.ai";class NebiusConversationalTask extends BaseConversationalTask{constructor(){super("nebius",NEBIUS_API_BASE_URL)}}class NebiusTextGenerationTask extends BaseTextGenerationTask{constructor(){super("nebius",NEBIUS_API_BASE_URL)}}class NebiusTextToImageTask extends TaskProviderHelper{constructor(){super("nebius",NEBIUS_API_BASE_URL)}preparePayload(e){return{...omit(e.args,["inputs","parameters"]),...e.args.parameters,response_format:"b64_json",prompt:e.args.inputs,model:e.model}}makeRoute(){return"v1/images/generations"}async getResponse(e,c,d,h){if(typeof e=="object"&&"data"in e&&Array.isArray(e.data)&&e.data.length>0&&"b64_json"in e.data[0]&&typeof e.data[0].b64_json=="string"){const g=e.data[0].b64_json;return h==="url"?`data:image/jpeg;base64,${g}`:fetch(`data:image/jpeg;base64,${g}`).then(_=>_.blob())}throw new InferenceOutputError("Expected Nebius text-to-image response format")}}class NebiusFeatureExtractionTask extends TaskProviderHelper{constructor(){super("nebius",NEBIUS_API_BASE_URL)}preparePayload(e){return{input:e.args.inputs,model:e.model}}makeRoute(){return"v1/embeddings"}async getResponse(e){return e.data.map(c=>c.embedding)}}const NOVITA_API_BASE_URL="https://api.novita.ai";class NovitaTextGenerationTask extends BaseTextGenerationTask{constructor(){super("novita",NOVITA_API_BASE_URL)}makeRoute(){return"/v3/openai/chat/completions"}}class NovitaConversationalTask extends BaseConversationalTask{constructor(){super("novita",NOVITA_API_BASE_URL)}makeRoute(){return"/v3/openai/chat/completions"}}class NovitaTextToVideoTask extends TaskProviderHelper{constructor(){super("novita",NOVITA_API_BASE_URL)}makeRoute(e){return`/v3/async/${e.model}`}preparePayload(e){const{num_inference_steps:c,...d}=e.args.parameters??{};return{...omit(e.args,["inputs","parameters"]),...d,steps:c,prompt:e.args.inputs}}async getResponse(e,c,d){if(!c||!d)throw new InferenceOutputError("URL and headers are required for text-to-video task");const h=e.task_id;if(!h)throw new InferenceOutputError("No task ID found in the response");const g=new URL(c),_e=`${`${g.protocol}//${g.host}${g.host==="router.huggingface.co"?"/novita":""}`}/v3/async/task-result?task_id=${h}`;let et="",tt;for(;et!=="TASK_STATUS_SUCCEED"&&et!=="TASK_STATUS_FAILED";){await delay(500);const rt=await fetch(_e,{headers:d});if(!rt.ok)throw new InferenceOutputError("Failed to fetch task result");try{if(tt=await rt.json(),tt&&typeof tt=="object"&&"task"in tt&&tt.task&&typeof tt.task=="object"&&"status"in tt.task&&typeof tt.task.status=="string")et=tt.task.status;else throw new InferenceOutputError("Failed to get task status")}catch{throw new InferenceOutputError("Failed to parse task result")}}if(et==="TASK_STATUS_FAILED")throw new InferenceOutputError("Task failed");if(typeof tt=="object"&&tt&&"videos"in tt&&typeof tt.videos=="object"&&tt.videos&&Array.isArray(tt.videos)&&tt.videos.length>0&&"video_url"in tt.videos[0]&&typeof tt.videos[0].video_url=="string"&&isUrl(tt.videos[0].video_url))return await(await fetch(tt.videos[0].video_url)).blob();throw new InferenceOutputError("Expected { videos: [{ video_url: string }] }")}}const NSCALE_API_BASE_URL="https://inference.api.nscale.com";class NscaleConversationalTask extends BaseConversationalTask{constructor(){super("nscale",NSCALE_API_BASE_URL)}}class NscaleTextToImageTask extends TaskProviderHelper{constructor(){super("nscale",NSCALE_API_BASE_URL)}preparePayload(e){return{...omit(e.args,["inputs","parameters"]),...e.args.parameters,response_format:"b64_json",prompt:e.args.inputs,model:e.model}}makeRoute(){return"v1/images/generations"}async getResponse(e,c,d,h){if(typeof e=="object"&&"data"in e&&Array.isArray(e.data)&&e.data.length>0&&"b64_json"in e.data[0]&&typeof e.data[0].b64_json=="string"){const g=e.data[0].b64_json;return h==="url"?`data:image/jpeg;base64,${g}`:fetch(`data:image/jpeg;base64,${g}`).then(_=>_.blob())}throw new InferenceOutputError("Expected Nscale text-to-image response format")}}const OPENAI_API_BASE_URL="https://api.openai.com";class OpenAIConversationalTask extends BaseConversationalTask{constructor(){super("openai",OPENAI_API_BASE_URL,!0)}}const OVHCLOUD_API_BASE_URL="https://oai.endpoints.kepler.ai.cloud.ovh.net";class OvhCloudConversationalTask extends BaseConversationalTask{constructor(){super("ovhcloud",OVHCLOUD_API_BASE_URL)}}class OvhCloudTextGenerationTask extends BaseTextGenerationTask{constructor(){super("ovhcloud",OVHCLOUD_API_BASE_URL)}preparePayload(e){return{model:e.model,...omit(e.args,["inputs","parameters"]),...e.args.parameters?{max_tokens:e.args.parameters.max_new_tokens,...omit(e.args.parameters,"max_new_tokens")}:void 0,prompt:e.args.inputs}}async getResponse(e){if(typeof e=="object"&&"choices"in e&&Array.isArray(e==null?void 0:e.choices)&&typeof(e==null?void 0:e.model)=="string")return{generated_text:e.choices[0].text};throw new InferenceOutputError("Expected OVHcloud text generation response format")}}class ReplicateTask extends TaskProviderHelper{constructor(e){super("replicate",e||"https://api.replicate.com")}makeRoute(e){return e.model.includes(":")?"v1/predictions":`v1/models/${e.model}/predictions`}preparePayload(e){return{input:{...omit(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs},version:e.model.includes(":")?e.model.split(":")[1]:void 0}}prepareHeaders(e,c){const d={Authorization:`Bearer ${e.accessToken}`,Prefer:"wait"};return c||(d["Content-Type"]="application/json"),d}makeUrl(e){const c=this.makeBaseUrl(e);return e.model.includes(":")?`${c}/v1/predictions`:`${c}/v1/models/${e.model}/predictions`}}class ReplicateTextToImageTask extends ReplicateTask{preparePayload(e){var c;return{input:{...omit(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs,lora_weights:((c=e.mapping)==null?void 0:c.adapter)==="lora"&&e.mapping.adapterWeightsPath?`https://huggingface.co/${e.mapping.hfModelId}`:void 0},version:e.model.includes(":")?e.model.split(":")[1]:void 0}}async getResponse(e,c,d,h){if(typeof e=="object"&&"output"in e&&Array.isArray(e.output)&&e.output.length>0&&typeof e.output[0]=="string")return h==="url"?e.output[0]:await(await fetch(e.output[0])).blob();throw new InferenceOutputError("Expected Replicate text-to-image response format")}}class ReplicateTextToSpeechTask extends ReplicateTask{preparePayload(e){const c=super.preparePayload(e),d=c.input;if(typeof d=="object"&&d!==null&&"prompt"in d){const h=d;h.text=h.prompt,delete h.prompt}return c}async getResponse(e){if(e instanceof Blob)return e;if(e&&typeof e=="object"&&"output"in e){if(typeof e.output=="string")return await(await fetch(e.output)).blob();if(Array.isArray(e.output))return await(await fetch(e.output[0])).blob()}throw new InferenceOutputError("Expected Blob or object with output")}}class ReplicateTextToVideoTask extends ReplicateTask{async getResponse(e){if(typeof e=="object"&&e&&"output"in e&&typeof e.output=="string"&&isUrl(e.output))return await(await fetch(e.output)).blob();throw new InferenceOutputError("Expected { output: string }")}}class SambanovaConversationalTask extends BaseConversationalTask{constructor(){super("sambanova","https://api.sambanova.ai")}}class SambanovaFeatureExtractionTask extends TaskProviderHelper{constructor(){super("sambanova","https://api.sambanova.ai")}makeRoute(){return"/v1/embeddings"}async getResponse(e){if(typeof e=="object"&&"data"in e&&Array.isArray(e.data))return e.data.map(c=>c.embedding);throw new InferenceOutputError("Expected Sambanova feature-extraction (embeddings) response format to be {'data' : list of {'embedding' : number[]}}")}preparePayload(e){return{model:e.model,input:e.args.inputs,...e.args}}}const TOGETHER_API_BASE_URL="https://api.together.xyz";class TogetherConversationalTask extends BaseConversationalTask{constructor(){super("together",TOGETHER_API_BASE_URL)}}class TogetherTextGenerationTask extends BaseTextGenerationTask{constructor(){super("together",TOGETHER_API_BASE_URL)}preparePayload(e){return{model:e.model,...e.args,prompt:e.args.inputs}}async getResponse(e){if(typeof e=="object"&&"choices"in e&&Array.isArray(e==null?void 0:e.choices)&&typeof(e==null?void 0:e.model)=="string")return{generated_text:e.choices[0].text};throw new InferenceOutputError("Expected Together text generation response format")}}class TogetherTextToImageTask extends TaskProviderHelper{constructor(){super("together",TOGETHER_API_BASE_URL)}makeRoute(){return"v1/images/generations"}preparePayload(e){return{...omit(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs,response_format:"base64",model:e.model}}async getResponse(e,c){if(typeof e=="object"&&"data"in e&&Array.isArray(e.data)&&e.data.length>0&&"b64_json"in e.data[0]&&typeof e.data[0].b64_json=="string"){const d=e.data[0].b64_json;return c==="url"?`data:image/jpeg;base64,${d}`:fetch(`data:image/jpeg;base64,${d}`).then(h=>h.blob())}throw new InferenceOutputError("Expected Together text-to-image response format")}}const PROVIDERS={"black-forest-labs":{"text-to-image":new BlackForestLabsTextToImageTask},cerebras:{conversational:new CerebrasConversationalTask},cohere:{conversational:new CohereConversationalTask},"fal-ai":{"text-to-image":new FalAITextToImageTask,"text-to-speech":new FalAITextToSpeechTask,"text-to-video":new FalAITextToVideoTask,"automatic-speech-recognition":new FalAIAutomaticSpeechRecognitionTask},"featherless-ai":{conversational:new FeatherlessAIConversationalTask,"text-generation":new FeatherlessAITextGenerationTask},"hf-inference":{"text-to-image":new HFInferenceTextToImageTask,conversational:new HFInferenceConversationalTask,"text-generation":new HFInferenceTextGenerationTask,"text-classification":new HFInferenceTextClassificationTask,"question-answering":new HFInferenceQuestionAnsweringTask,"audio-classification":new HFInferenceAudioClassificationTask,"automatic-speech-recognition":new HFInferenceAutomaticSpeechRecognitionTask,"fill-mask":new HFInferenceFillMaskTask,"feature-extraction":new HFInferenceFeatureExtractionTask,"image-classification":new HFInferenceImageClassificationTask,"image-segmentation":new HFInferenceImageSegmentationTask,"document-question-answering":new HFInferenceDocumentQuestionAnsweringTask,"image-to-text":new HFInferenceImageToTextTask,"object-detection":new HFInferenceObjectDetectionTask,"audio-to-audio":new HFInferenceAudioToAudioTask,"zero-shot-image-classification":new HFInferenceZeroShotImageClassificationTask,"zero-shot-classification":new HFInferenceZeroShotClassificationTask,"image-to-image":new HFInferenceImageToImageTask,"sentence-similarity":new HFInferenceSentenceSimilarityTask,"table-question-answering":new HFInferenceTableQuestionAnsweringTask,"tabular-classification":new HFInferenceTabularClassificationTask,"text-to-speech":new HFInferenceTextToSpeechTask,"token-classification":new HFInferenceTokenClassificationTask,translation:new HFInferenceTranslationTask,summarization:new HFInferenceSummarizationTask,"visual-question-answering":new HFInferenceVisualQuestionAnsweringTask,"tabular-regression":new HFInferenceTabularRegressionTask,"text-to-audio":new HFInferenceTextToAudioTask},"fireworks-ai":{conversational:new FireworksConversationalTask},groq:{conversational:new GroqConversationalTask,"text-generation":new GroqTextGenerationTask},hyperbolic:{"text-to-image":new HyperbolicTextToImageTask,conversational:new HyperbolicConversationalTask,"text-generation":new HyperbolicTextGenerationTask},nebius:{"text-to-image":new NebiusTextToImageTask,conversational:new NebiusConversationalTask,"text-generation":new NebiusTextGenerationTask,"feature-extraction":new NebiusFeatureExtractionTask},novita:{conversational:new NovitaConversationalTask,"text-generation":new NovitaTextGenerationTask,"text-to-video":new NovitaTextToVideoTask},nscale:{"text-to-image":new NscaleTextToImageTask,conversational:new NscaleConversationalTask},openai:{conversational:new OpenAIConversationalTask},ovhcloud:{conversational:new OvhCloudConversationalTask,"text-generation":new OvhCloudTextGenerationTask},replicate:{"text-to-image":new ReplicateTextToImageTask,"text-to-speech":new ReplicateTextToSpeechTask,"text-to-video":new ReplicateTextToVideoTask},sambanova:{conversational:new SambanovaConversationalTask,"feature-extraction":new SambanovaFeatureExtractionTask},together:{"text-to-image":new TogetherTextToImageTask,conversational:new TogetherConversationalTask,"text-generation":new TogetherTextGenerationTask}};function getProviderHelper(a,e){if(a==="hf-inference"&&!e||a==="auto")return new HFInferenceTask;if(!e)throw new Error("you need to provide a task name when using an external provider, e.g. 'text-to-image'");if(!(a in PROVIDERS))throw new Error(`Provider '${a}' not supported. Available providers: ${Object.keys(PROVIDERS)}`);const c=PROVIDERS[a];if(!c||!(e in c))throw new Error(`Task '${e}' not supported for provider '${a}'. Available tasks: ${Object.keys(c??{})}`);return c[e]}const PACKAGE_VERSION="3.15.0",PACKAGE_NAME="@huggingface/inference";let tasks$1=null;async function makeRequestOptions(a,e,c){const{model:d}=a,h=e.provider,{task:g}=c??{};if(a.endpointUrl&&h!=="hf-inference")throw new Error("Cannot use endpointUrl with a third-party provider.");if(d&&isUrl(d))throw new Error("Model URLs are no longer supported. Use endpointUrl instead.");if(a.endpointUrl)return makeRequestOptionsFromResolvedModel(d??a.endpointUrl,e,a,void 0,c);if(!d&&!g)throw new Error("No model provided, and no task has been specified.");const _=d??await loadDefaultModel(g);if(e.clientSideRoutingOnly&&!d)throw new Error(`Provider ${h} requires a model ID to be passed directly.`);const _e=e.clientSideRoutingOnly?{providerId:removeProviderPrefix(d,h),hfModelId:d,status:"live",task:g}:await getInferenceProviderMapping({modelId:_,task:g,provider:h,accessToken:a.accessToken},{fetch:c==null?void 0:c.fetch});if(!_e)throw new Error(`We have not been able to find inference provider information for model ${_}.`);return makeRequestOptionsFromResolvedModel(_e.providerId,e,a,_e,c)}function makeRequestOptionsFromResolvedModel(a,e,c,d,h){const{accessToken:g,endpointUrl:_,provider:_e,model:et,...tt}=c,rt=e.provider,{includeCredentials:$,task:b,signal:nt,billTo:st}=h??{},ot=(()=>{if(e.clientSideRoutingOnly){if(g&&g.startsWith("hf_"))throw new Error(`Provider ${rt} is closed-source and does not support HF tokens.`);return"provider-key"}return g?g.startsWith("hf_")?"hf-token":"provider-key":$==="include"?"credentials-include":"none"})(),it=_??a,at=e.makeUrl({authMethod:ot,model:it,task:b}),lt=e.prepareHeaders({accessToken:g,authMethod:ot},"data"in c&&!!c.data);st&&(lt[HF_HEADER_X_BILL_TO]=st);const ht=[`${PACKAGE_NAME}/${PACKAGE_VERSION}`,typeof navigator<"u"?navigator.userAgent:void 0].filter(xt=>xt!==void 0).join(" ");lt["User-Agent"]=ht;const pt=e.makeBody({args:tt,model:a,task:b,mapping:d});let mt;typeof $=="string"?mt=$:$===!0&&(mt="include");const yt={headers:lt,method:"POST",body:pt,...mt?{credentials:mt}:void 0,signal:nt};return{url:at,info:yt}}async function loadDefaultModel(a){tasks$1||(tasks$1=await loadTaskInfo());const e=tasks$1[a];if(((e==null?void 0:e.models.length)??0)<=0)throw new Error(`No default model defined for task ${a}, please define the model explicitly.`);return e.models[0].id}async function loadTaskInfo(){const a=await fetch(`${HF_HUB_URL}/api/tasks`);if(!a.ok)throw new Error("Failed to load tasks definitions from Hugging Face Hub.");return await a.json()}function removeProviderPrefix(a,e){if(!a.startsWith(`${e}/`))throw new Error(`Models from ${e} must be prefixed by "${e}/". Got "${a}".`);return a.slice(e.length+1)}function getLines(a){let e,c,d,h=!1;return function(_){e===void 0?(e=_,c=0,d=-1):e=concat(e,_);const _e=e.length;let et=0;for(;c<_e;){h&&(e[c]===10&&(et=++c),h=!1);let tt=-1;for(;c<_e&&tt===-1;++c)switch(e[c]){case 58:d===-1&&(d=c-et);break;case 13:h=!0;case 10:tt=c;break}if(tt===-1)break;a(e.subarray(et,tt),d),et=c,d=-1}et===_e?e=void 0:et!==0&&(e=e.subarray(et),c-=et)}}function getMessages(a,e,c){let d=newMessage();const h=new TextDecoder;return function(_,_e){if(_.length===0)c==null||c(d),d=newMessage();else if(_e>0){const et=h.decode(_.subarray(0,_e)),tt=_e+(_[_e+1]===32?2:1),rt=h.decode(_.subarray(tt));switch(et){case"data":d.data=d.data?d.data+`
`+rt:rt;break;case"event":d.event=rt;break;case"id":a(d.id=rt);break;case"retry":{const $=parseInt(rt,10);isNaN($)||e(d.retry=$);break}}}}}function concat(a,e){const c=new Uint8Array(a.length+e.length);return c.set(a),c.set(e,a.length),c}function newMessage(){return{data:"",event:"",id:"",retry:void 0}}async function innerRequest(a,e,c){var et;const{url:d,info:h}=await makeRequestOptions(a,e,c),g=await((c==null?void 0:c.fetch)??fetch)(d,h),_={url:d,info:h};if((c==null?void 0:c.retry_on_error)!==!1&&g.status===503)return innerRequest(a,e,c);if(!g.ok){const tt=g.headers.get("Content-Type");if(["application/json","application/problem+json"].some($=>tt==null?void 0:tt.startsWith($))){const $=await g.json();throw[400,422,404,500].includes(g.status)&&(c!=null&&c.chatCompletion)?new Error(`Server ${a.model} does not seem to support chat completion. Error: ${JSON.stringify($.error)}`):$.error||$.detail?new Error(JSON.stringify($.error??$.detail)):new Error($)}const rt=tt!=null&&tt.startsWith("text/plain;")?await g.text():void 0;throw new Error(rt??"An error occurred while fetching the blob")}return(et=g.headers.get("Content-Type"))!=null&&et.startsWith("application/json")?{data:await g.json(),requestContext:_}:{data:await g.blob(),requestContext:_}}async function*innerStreamingRequest(a,e,c){var rt,$;const{url:d,info:h}=await makeRequestOptions({...a,stream:!0},e,c),g=await((c==null?void 0:c.fetch)??fetch)(d,h);if((c==null?void 0:c.retry_on_error)!==!1&&g.status===503)return yield*innerStreamingRequest(a,e,c);if(!g.ok){if((rt=g.headers.get("Content-Type"))!=null&&rt.startsWith("application/json")){const b=await g.json();if([400,422,404,500].includes(g.status)&&(c!=null&&c.chatCompletion))throw new Error(`Server ${a.model} does not seem to support chat completion. Error: ${b.error}`);if(typeof b.error=="string")throw new Error(b.error);if(b.error&&"message"in b.error&&typeof b.error.message=="string")throw new Error(b.error.message);if(typeof b.message=="string")throw new Error(b.message)}throw new Error(`Server response contains error: ${g.status}`)}if(!(($=g.headers.get("content-type"))!=null&&$.startsWith("text/event-stream")))throw new Error("Server does not support event stream content type, it returned "+g.headers.get("content-type"));if(!g.body)return;const _=g.body.getReader();let _e=[];const tt=getLines(getMessages(()=>{},()=>{},b=>{_e.push(b)}));try{for(;;){const{done:b,value:nt}=await _.read();if(b)return;tt(nt);for(const st of _e)if(st.data.length>0){if(st.data==="[DONE]")return;const ot=JSON.parse(st.data);if(typeof ot=="object"&&ot!==null&&"error"in ot){const it=typeof ot.error=="string"?ot.error:typeof ot.error=="object"&&ot.error&&"message"in ot.error&&typeof ot.error.message=="string"?ot.error.message:JSON.stringify(ot.error);throw new Error("Error forwarded from backend: "+it)}yield ot}_e=[]}}finally{_.releaseLock()}}async function request(a,e){console.warn("The request method is deprecated and will be removed in a future version of huggingface.js. Use specific task functions instead.");const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,e==null?void 0:e.task);return(await innerRequest(a,d,e)).data}async function*streamingRequest(a,e){console.warn("The streamingRequest method is deprecated and will be removed in a future version of huggingface.js. Use specific task functions instead.");const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,e==null?void 0:e.task);yield*innerStreamingRequest(a,d,e)}function preparePayload$2(a){return"data"in a?a:{...omit(a,"inputs"),data:a.inputs}}async function audioClassification(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"audio-classification"),h=preparePayload$2(a),{data:g}=await innerRequest(h,d,{...e,task:"audio-classification"});return d.getResponse(g)}async function audioToAudio(a,e){const c="inputs"in a?a.model:void 0,d=await resolveProvider(a.provider,c),h=getProviderHelper(d,"audio-to-audio"),g=preparePayload$2(a),{data:_}=await innerRequest(g,h,{...e,task:"audio-to-audio"});return h.getResponse(_)}async function automaticSpeechRecognition(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"automatic-speech-recognition"),h=await d.preparePayloadAsync(a),{data:g}=await innerRequest(h,d,{...e,task:"automatic-speech-recognition"});if(!(typeof(g==null?void 0:g.text)=="string"))throw new InferenceOutputError("Expected {text: string}");return d.getResponse(g)}async function textToSpeech(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"text-to-speech"),{data:h}=await innerRequest(a,d,{...e,task:"text-to-speech"});return d.getResponse(h)}function preparePayload$1(a){return"data"in a?a:{...omit(a,"inputs"),data:a.inputs}}async function imageClassification(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"image-classification"),h=preparePayload$1(a),{data:g}=await innerRequest(h,d,{...e,task:"image-classification"});return d.getResponse(g)}async function imageSegmentation(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"image-segmentation"),h=preparePayload$1(a),{data:g}=await innerRequest(h,d,{...e,task:"image-segmentation"});return d.getResponse(g)}async function imageToImage(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"image-to-image"),h=await d.preparePayloadAsync(a),{data:g}=await innerRequest(h,d,{...e,task:"image-to-image"});return d.getResponse(g)}async function imageToText(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"image-to-text"),h=preparePayload$1(a),{data:g}=await innerRequest(h,d,{...e,task:"image-to-text"});return d.getResponse(g[0])}async function objectDetection(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"object-detection"),h=preparePayload$1(a),{data:g}=await innerRequest(h,d,{...e,task:"object-detection"});return d.getResponse(g)}async function textToImage(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"text-to-image"),{data:h}=await innerRequest(a,d,{...e,task:"text-to-image"}),{url:g,info:_}=await makeRequestOptions(a,d,{...e,task:"text-to-image"});return d.getResponse(h,g,_.headers,e==null?void 0:e.outputType)}async function textToVideo(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"text-to-video"),{data:h}=await innerRequest(a,d,{...e,task:"text-to-video"}),{url:g,info:_}=await makeRequestOptions(a,d,{...e,task:"text-to-video"});return d.getResponse(h,g,_.headers)}async function preparePayload(a){return a.inputs instanceof Blob?{...a,inputs:{image:base64FromBytes(new Uint8Array(await a.inputs.arrayBuffer()))}}:{...a,inputs:{image:base64FromBytes(new Uint8Array(a.inputs.image instanceof ArrayBuffer?a.inputs.image:await a.inputs.image.arrayBuffer()))}}}async function zeroShotImageClassification(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"zero-shot-image-classification"),h=await preparePayload(a),{data:g}=await innerRequest(h,d,{...e,task:"zero-shot-image-classification"});return d.getResponse(g)}async function chatCompletion(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"conversational"),{data:h}=await innerRequest(a,d,{...e,task:"conversational"});return d.getResponse(h)}async function*chatCompletionStream(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"conversational");yield*innerStreamingRequest(a,d,{...e,task:"conversational"})}async function featureExtraction(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"feature-extraction"),{data:h}=await innerRequest(a,d,{...e,task:"feature-extraction"});return d.getResponse(h)}async function fillMask(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"fill-mask"),{data:h}=await innerRequest(a,d,{...e,task:"fill-mask"});return d.getResponse(h)}async function questionAnswering(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"question-answering"),{data:h}=await innerRequest(a,d,{...e,task:"question-answering"});return d.getResponse(h)}async function sentenceSimilarity(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"sentence-similarity"),{data:h}=await innerRequest(a,d,{...e,task:"sentence-similarity"});return d.getResponse(h)}async function summarization(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"summarization"),{data:h}=await innerRequest(a,d,{...e,task:"summarization"});return d.getResponse(h)}async function tableQuestionAnswering(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"table-question-answering"),{data:h}=await innerRequest(a,d,{...e,task:"table-question-answering"});return d.getResponse(h)}async function textClassification(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"text-classification"),{data:h}=await innerRequest(a,d,{...e,task:"text-classification"});return d.getResponse(h)}async function textGeneration(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"text-generation"),{data:h}=await innerRequest(a,d,{...e,task:"text-generation"});return d.getResponse(h)}async function*textGenerationStream(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"text-generation");yield*innerStreamingRequest(a,d,{...e,task:"text-generation"})}async function tokenClassification(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"token-classification"),{data:h}=await innerRequest(a,d,{...e,task:"token-classification"});return d.getResponse(h)}async function translation(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"translation"),{data:h}=await innerRequest(a,d,{...e,task:"translation"});return d.getResponse(h)}async function zeroShotClassification(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"zero-shot-classification"),{data:h}=await innerRequest(a,d,{...e,task:"zero-shot-classification"});return d.getResponse(h)}async function documentQuestionAnswering(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"document-question-answering"),h={...a,inputs:{question:a.inputs.question,image:base64FromBytes(new Uint8Array(await a.inputs.image.arrayBuffer()))}},{data:g}=await innerRequest(h,d,{...e,task:"document-question-answering"});return d.getResponse(g)}async function visualQuestionAnswering(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"visual-question-answering"),h={...a,inputs:{question:a.inputs.question,image:base64FromBytes(new Uint8Array(await a.inputs.image.arrayBuffer()))}},{data:g}=await innerRequest(h,d,{...e,task:"visual-question-answering"});return d.getResponse(g)}async function tabularClassification(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"tabular-classification"),{data:h}=await innerRequest(a,d,{...e,task:"tabular-classification"});return d.getResponse(h)}async function tabularRegression(a,e){const c=await resolveProvider(a.provider,a.model,a.endpointUrl),d=getProviderHelper(c,"tabular-regression"),{data:h}=await innerRequest(a,d,{...e,task:"tabular-regression"});return d.getResponse(h)}const tasks=Object.freeze(Object.defineProperty({__proto__:null,audioClassification,audioToAudio,automaticSpeechRecognition,chatCompletion,chatCompletionStream,documentQuestionAnswering,featureExtraction,fillMask,imageClassification,imageSegmentation,imageToImage,imageToText,objectDetection,questionAnswering,request,sentenceSimilarity,streamingRequest,summarization,tableQuestionAnswering,tabularClassification,tabularRegression,textClassification,textGeneration,textGenerationStream,textToImage,textToSpeech,textToVideo,tokenClassification,translation,visualQuestionAnswering,zeroShotClassification,zeroShotImageClassification},Symbol.toStringTag,{value:"Module"}));function typedEntries(a){return Object.entries(a)}class InferenceClient{constructor(e="",c={}){nr(this,"accessToken");nr(this,"defaultOptions");this.accessToken=e,this.defaultOptions=c;for(const[d,h]of typedEntries(tasks))Object.defineProperty(this,d,{enumerable:!1,value:(g,_)=>h({endpointUrl:c.endpointUrl,accessToken:e,...g},{...omit(c,["endpointUrl"]),..._})})}endpoint(e){return new InferenceClient(this.accessToken,{...this.defaultOptions,endpointUrl:e})}}class HfInference extends InferenceClient{}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Comment:"Comment"}),Token=class{constructor(a,e){this.value=a,this.type=e}};function isWord(a){return/\w/.test(a)}function isInteger(a){return/[0-9]/.test(a)}var ORDERED_MAPPING_TABLE=[["{%",TOKEN_TYPES.OpenStatement],["%}",TOKEN_TYPES.CloseStatement],["{{",TOKEN_TYPES.OpenExpression],["}}",TOKEN_TYPES.CloseExpression],["(",TOKEN_TYPES.OpenParen],[")",TOKEN_TYPES.CloseParen],["{",TOKEN_TYPES.OpenCurlyBracket],["}",TOKEN_TYPES.CloseCurlyBracket],["[",TOKEN_TYPES.OpenSquareBracket],["]",TOKEN_TYPES.CloseSquareBracket],[",",TOKEN_TYPES.Comma],[".",TOKEN_TYPES.Dot],[":",TOKEN_TYPES.Colon],["|",TOKEN_TYPES.Pipe],["<=",TOKEN_TYPES.ComparisonBinaryOperator],[">=",TOKEN_TYPES.ComparisonBinaryOperator],["==",TOKEN_TYPES.ComparisonBinaryOperator],["!=",TOKEN_TYPES.ComparisonBinaryOperator],["<",TOKEN_TYPES.ComparisonBinaryOperator],[">",TOKEN_TYPES.ComparisonBinaryOperator],["+",TOKEN_TYPES.AdditiveBinaryOperator],["-",TOKEN_TYPES.AdditiveBinaryOperator],["~",TOKEN_TYPES.AdditiveBinaryOperator],["*",TOKEN_TYPES.MultiplicativeBinaryOperator],["/",TOKEN_TYPES.MultiplicativeBinaryOperator],["%",TOKEN_TYPES.MultiplicativeBinaryOperator],["=",TOKEN_TYPES.Equals]],ESCAPE_CHARACTERS=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function preprocess(a,e={}){return a.endsWith(`
`)&&(a=a.slice(0,-1)),e.lstrip_blocks&&(a=a.replace(/^[ \t]*({[#%-])/gm,"$1")),e.trim_blocks&&(a=a.replace(/([#%-]})\n/g,"$1")),a.replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{").replace(/-#}\s*/g,"#}").replace(/\s*{#-/g,"{#").replace(/{%\s*generation\s*%}.+?{%\s*endgeneration\s*%}/gs,"")}function tokenize(a,e={}){var _e,et;const c=[],d=preprocess(a,e);let h=0,g=0;const _=tt=>{let rt="";for(;tt(d[h]);){if(d[h]==="\\"){if(++h,h>=d.length)throw new SyntaxError("Unexpected end of input");const $=d[h++],b=ESCAPE_CHARACTERS.get($);if(b===void 0)throw new SyntaxError(`Unexpected escaped character: ${$}`);rt+=b;continue}if(rt+=d[h++],h>=d.length)throw new SyntaxError("Unexpected end of input")}return rt};e:for(;h<d.length;){const tt=(_e=c.at(-1))==null?void 0:_e.type;if(tt===void 0||tt===TOKEN_TYPES.CloseStatement||tt===TOKEN_TYPES.CloseExpression||tt===TOKEN_TYPES.Comment){let $="";for(;h<d.length&&!(d[h]==="{"&&(d[h+1]==="%"||d[h+1]==="{"||d[h+1]==="#"));)$+=d[h++];if($.length>0){c.push(new Token($,TOKEN_TYPES.Text));continue}}if(d[h]==="{"&&d[h+1]==="#"){h+=2;let $="";for(;d[h]!=="#"||d[h+1]!=="}";){if(h+2>=d.length)throw new SyntaxError("Missing end of comment tag");$+=d[h++]}c.push(new Token($,TOKEN_TYPES.Comment)),h+=2;continue}_($=>/\s/.test($));const rt=d[h];if(rt==="-"||rt==="+"){const $=(et=c.at(-1))==null?void 0:et.type;if($===TOKEN_TYPES.Text||$===void 0)throw new SyntaxError(`Unexpected character: ${rt}`);switch($){case TOKEN_TYPES.Identifier:case TOKEN_TYPES.NumericLiteral:case TOKEN_TYPES.StringLiteral:case TOKEN_TYPES.CloseParen:case TOKEN_TYPES.CloseSquareBracket:break;default:{++h;const b=_(isInteger);c.push(new Token(`${rt}${b}`,b.length>0?TOKEN_TYPES.NumericLiteral:TOKEN_TYPES.UnaryOperator));continue}}}for(const[$,b]of ORDERED_MAPPING_TABLE){if($==="}}"&&g>0)continue;if(d.slice(h,h+$.length)===$){c.push(new Token($,b)),b===TOKEN_TYPES.OpenExpression?g=0:b===TOKEN_TYPES.OpenCurlyBracket?++g:b===TOKEN_TYPES.CloseCurlyBracket&&--g,h+=$.length;continue e}}if(rt==="'"||rt==='"'){++h;const $=_(b=>b!==rt);c.push(new Token($,TOKEN_TYPES.StringLiteral)),++h;continue}if(isInteger(rt)){let $=_(isInteger);if(d[h]==="."&&isInteger(d[h+1])){++h;const b=_(isInteger);$=`${$}.${b}`}c.push(new Token($,TOKEN_TYPES.NumericLiteral));continue}if(isWord(rt)){const $=_(isWord);c.push(new Token($,TOKEN_TYPES.Identifier));continue}throw new SyntaxError(`Unexpected character: ${rt}`)}return c}var Statement=class{constructor(){nr(this,"type","Statement")}},Program=class extends Statement{constructor(e){super();nr(this,"type","Program");this.body=e}},If=class extends Statement{constructor(e,c,d){super();nr(this,"type","If");this.test=e,this.body=c,this.alternate=d}},For=class extends Statement{constructor(e,c,d,h){super();nr(this,"type","For");this.loopvar=e,this.iterable=c,this.body=d,this.defaultBlock=h}},Break=class extends Statement{constructor(){super(...arguments);nr(this,"type","Break")}},Continue=class extends Statement{constructor(){super(...arguments);nr(this,"type","Continue")}},SetStatement=class extends Statement{constructor(e,c,d){super();nr(this,"type","Set");this.assignee=e,this.value=c,this.body=d}},Macro=class extends Statement{constructor(e,c,d){super();nr(this,"type","Macro");this.name=e,this.args=c,this.body=d}},Comment=class extends Statement{constructor(e){super();nr(this,"type","Comment");this.value=e}},Expression=class extends Statement{constructor(){super(...arguments);nr(this,"type","Expression")}},MemberExpression=class extends Expression{constructor(e,c,d){super();nr(this,"type","MemberExpression");this.object=e,this.property=c,this.computed=d}},CallExpression=class extends Expression{constructor(e,c){super();nr(this,"type","CallExpression");this.callee=e,this.args=c}},Identifier=class extends Expression{constructor(e){super();nr(this,"type","Identifier");this.value=e}},Literal=class extends Expression{constructor(e){super();nr(this,"type","Literal");this.value=e}},IntegerLiteral=class extends Literal{constructor(){super(...arguments);nr(this,"type","IntegerLiteral")}},FloatLiteral=class extends Literal{constructor(){super(...arguments);nr(this,"type","FloatLiteral")}},StringLiteral=class extends Literal{constructor(){super(...arguments);nr(this,"type","StringLiteral")}},ArrayLiteral=class extends Literal{constructor(){super(...arguments);nr(this,"type","ArrayLiteral")}},TupleLiteral=class extends Literal{constructor(){super(...arguments);nr(this,"type","TupleLiteral")}},ObjectLiteral=class extends Literal{constructor(){super(...arguments);nr(this,"type","ObjectLiteral")}},BinaryExpression=class extends Expression{constructor(e,c,d){super();nr(this,"type","BinaryExpression");this.operator=e,this.left=c,this.right=d}},FilterExpression=class extends Expression{constructor(e,c){super();nr(this,"type","FilterExpression");this.operand=e,this.filter=c}},FilterStatement=class extends Statement{constructor(e,c){super();nr(this,"type","FilterStatement");this.filter=e,this.body=c}},SelectExpression=class extends Expression{constructor(e,c){super();nr(this,"type","SelectExpression");this.lhs=e,this.test=c}},TestExpression=class extends Expression{constructor(e,c,d){super();nr(this,"type","TestExpression");this.operand=e,this.negate=c,this.test=d}},UnaryExpression=class extends Expression{constructor(e,c){super();nr(this,"type","UnaryExpression");this.operator=e,this.argument=c}},SliceExpression=class extends Expression{constructor(e=void 0,c=void 0,d=void 0){super();nr(this,"type","SliceExpression");this.start=e,this.stop=c,this.step=d}},KeywordArgumentExpression=class extends Expression{constructor(e,c){super();nr(this,"type","KeywordArgumentExpression");this.key=e,this.value=c}},SpreadExpression=class extends Expression{constructor(e){super();nr(this,"type","SpreadExpression");this.argument=e}},CallStatement=class extends Statement{constructor(e,c,d){super();nr(this,"type","CallStatement");this.call=e,this.callerArgs=c,this.body=d}},Ternary=class extends Expression{constructor(e,c,d){super();nr(this,"type","Ternary");this.condition=e,this.trueExpr=c,this.falseExpr=d}};function parse(a){const e=new Program([]);let c=0;function d(At,Et){const zt=a[c++];if(!zt||zt.type!==At)throw new Error(`Parser Error: ${Et}. ${zt.type} !== ${At}.`);return zt}function h(At){if(!et(At))throw new SyntaxError(`Expected ${At}`);++c}function g(){switch(a[c].type){case TOKEN_TYPES.Comment:return new Comment(a[c++].value);case TOKEN_TYPES.Text:return tt();case TOKEN_TYPES.OpenStatement:return rt();case TOKEN_TYPES.OpenExpression:return $();default:throw new SyntaxError(`Unexpected token type: ${a[c].type}`)}}function _(...At){return c+At.length<=a.length&&At.every((Et,zt)=>Et===a[c+zt].type)}function _e(...At){var Et,zt,er;return((Et=a[c])==null?void 0:Et.type)===TOKEN_TYPES.OpenStatement&&((zt=a[c+1])==null?void 0:zt.type)===TOKEN_TYPES.Identifier&&At.includes((er=a[c+1])==null?void 0:er.value)}function et(...At){return c+At.length<=a.length&&At.every((Et,zt)=>a[c+zt].type==="Identifier"&&Et===a[c+zt].value)}function tt(){return new StringLiteral(d(TOKEN_TYPES.Text,"Expected text token").value)}function rt(){if(d(TOKEN_TYPES.OpenStatement,"Expected opening statement token"),a[c].type!==TOKEN_TYPES.Identifier)throw new SyntaxError(`Unknown statement, got ${a[c].type}`);const At=a[c].value;let Et;switch(At){case"set":++c,Et=b();break;case"if":++c,Et=nt(),d(TOKEN_TYPES.OpenStatement,"Expected {% token"),h("endif"),d(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case"macro":++c,Et=st(),d(TOKEN_TYPES.OpenStatement,"Expected {% token"),h("endmacro"),d(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case"for":++c,Et=it(),d(TOKEN_TYPES.OpenStatement,"Expected {% token"),h("endfor"),d(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case"call":{++c;let zt=null;_(TOKEN_TYPES.OpenParen)&&(zt=bt());const er=Rt();if(er.type!=="Identifier")throw new SyntaxError("Expected identifier following call statement");const pr=bt();d(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const _r=[];for(;!_e("endcall");)_r.push(g());d(TOKEN_TYPES.OpenStatement,"Expected '{%'"),h("endcall"),d(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const Er=new CallExpression(er,pr);Et=new CallStatement(Er,zt,_r);break}case"break":++c,d(TOKEN_TYPES.CloseStatement,"Expected closing statement token"),Et=new Break;break;case"continue":++c,d(TOKEN_TYPES.CloseStatement,"Expected closing statement token"),Et=new Continue;break;case"filter":{++c;let zt=Rt();zt instanceof Identifier&&_(TOKEN_TYPES.OpenParen)&&(zt=gt(zt)),d(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const er=[];for(;!_e("endfilter");)er.push(g());d(TOKEN_TYPES.OpenStatement,"Expected '{%'"),h("endfilter"),d(TOKEN_TYPES.CloseStatement,"Expected '%}'"),Et=new FilterStatement(zt,er);break}default:throw new SyntaxError(`Unknown statement type: ${At}`)}return Et}function $(){d(TOKEN_TYPES.OpenExpression,"Expected opening expression token");const At=at();return d(TOKEN_TYPES.CloseExpression,"Expected closing expression token"),At}function b(){const At=ot();let Et=null;const zt=[];if(_(TOKEN_TYPES.Equals))++c,Et=ot();else{for(d(TOKEN_TYPES.CloseStatement,"Expected %} token");!_e("endset");)zt.push(g());d(TOKEN_TYPES.OpenStatement,"Expected {% token"),h("endset")}return d(TOKEN_TYPES.CloseStatement,"Expected closing statement token"),new SetStatement(At,Et,zt)}function nt(){const At=at();d(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const Et=[],zt=[];for(;!_e("elif","else","endif");)Et.push(g());if(_e("elif")){++c,++c;const er=nt();zt.push(er)}else if(_e("else"))for(++c,++c,d(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!_e("endif");)zt.push(g());return new If(At,Et,zt)}function st(){const At=Rt();if(At.type!=="Identifier")throw new SyntaxError("Expected identifier following macro statement");const Et=bt();d(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const zt=[];for(;!_e("endmacro");)zt.push(g());return new Macro(At,Et,zt)}function ot(At=!1){const Et=At?Rt:at,zt=[Et()],er=_(TOKEN_TYPES.Comma);for(;er&&(++c,zt.push(Et()),!!_(TOKEN_TYPES.Comma)););return er?new TupleLiteral(zt):zt[0]}function it(){const At=ot(!0);if(!(At instanceof Identifier||At instanceof TupleLiteral))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${At.type} instead`);if(!et("in"))throw new SyntaxError("Expected `in` keyword following loop variable");++c;const Et=at();d(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const zt=[];for(;!_e("endfor","else");)zt.push(g());const er=[];if(_e("else"))for(++c,++c,d(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!_e("endfor");)er.push(g());return new For(At,Et,zt,er)}function at(){return lt()}function lt(){const At=dt();if(et("if")){++c;const Et=dt();if(et("else")){++c;const zt=lt();return new Ternary(Et,At,zt)}else return new SelectExpression(At,Et)}return At}function dt(){let At=ht();for(;et("or");){const Et=a[c];++c;const zt=ht();At=new BinaryExpression(Et,At,zt)}return At}function ht(){let At=pt();for(;et("and");){const Et=a[c];++c;const zt=pt();At=new BinaryExpression(Et,At,zt)}return At}function pt(){let At;for(;et("not");){const Et=a[c];++c;const zt=pt();At=new UnaryExpression(Et,zt)}return At??mt()}function mt(){let At=yt();for(;;){let Et;if(et("not","in"))Et=new Token("not in",TOKEN_TYPES.Identifier),c+=2;else if(et("in"))Et=a[c++];else if(_(TOKEN_TYPES.ComparisonBinaryOperator))Et=a[c++];else break;const zt=yt();At=new BinaryExpression(Et,At,zt)}return At}function yt(){let At=Tt();for(;_(TOKEN_TYPES.AdditiveBinaryOperator);){const Et=a[c];++c;const zt=Tt();At=new BinaryExpression(Et,At,zt)}return At}function xt(){const At=Pt(Rt());return _(TOKEN_TYPES.OpenParen)?gt(At):At}function gt(At){let Et=new CallExpression(At,bt());return Et=Pt(Et),_(TOKEN_TYPES.OpenParen)&&(Et=gt(Et)),Et}function bt(){d(TOKEN_TYPES.OpenParen,"Expected opening parenthesis for arguments list");const At=jt();return d(TOKEN_TYPES.CloseParen,"Expected closing parenthesis for arguments list"),At}function jt(){const At=[];for(;!_(TOKEN_TYPES.CloseParen);){let Et;if(a[c].type===TOKEN_TYPES.MultiplicativeBinaryOperator&&a[c].value==="*"){++c;const zt=at();Et=new SpreadExpression(zt)}else if(Et=at(),_(TOKEN_TYPES.Equals)){if(++c,!(Et instanceof Identifier))throw new SyntaxError("Expected identifier for keyword argument");const zt=at();Et=new KeywordArgumentExpression(Et,zt)}At.push(Et),_(TOKEN_TYPES.Comma)&&++c}return At}function Mt(){const At=[];let Et=!1;for(;!_(TOKEN_TYPES.CloseSquareBracket);)_(TOKEN_TYPES.Colon)?(At.push(void 0),++c,Et=!0):(At.push(at()),_(TOKEN_TYPES.Colon)&&(++c,Et=!0));if(At.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(Et){if(At.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression(...At)}return At[0]}function Pt(At){for(;_(TOKEN_TYPES.Dot)||_(TOKEN_TYPES.OpenSquareBracket);){const Et=a[c];++c;let zt;const er=Et.type===TOKEN_TYPES.OpenSquareBracket;if(er)zt=Mt(),d(TOKEN_TYPES.CloseSquareBracket,"Expected closing square bracket");else if(zt=Rt(),zt.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");At=new MemberExpression(At,zt,er)}return At}function Tt(){let At=St();for(;_(TOKEN_TYPES.MultiplicativeBinaryOperator);){const Et=a[c++],zt=St();At=new BinaryExpression(Et,At,zt)}return At}function St(){let At=wt();for(;et("is");){++c;const Et=et("not");Et&&++c;const zt=Rt();if(!(zt instanceof Identifier))throw new SyntaxError("Expected identifier for the test");At=new TestExpression(At,Et,zt)}return At}function wt(){let At=xt();for(;_(TOKEN_TYPES.Pipe);){++c;let Et=Rt();if(!(Et instanceof Identifier))throw new SyntaxError("Expected identifier for the filter");_(TOKEN_TYPES.OpenParen)&&(Et=gt(Et)),At=new FilterExpression(At,Et)}return At}function Rt(){const At=a[c++];switch(At.type){case TOKEN_TYPES.NumericLiteral:{const Et=At.value;return Et.includes(".")?new FloatLiteral(Number(Et)):new IntegerLiteral(Number(Et))}case TOKEN_TYPES.StringLiteral:{let Et=At.value;for(;_(TOKEN_TYPES.StringLiteral);)Et+=a[c++].value;return new StringLiteral(Et)}case TOKEN_TYPES.Identifier:return new Identifier(At.value);case TOKEN_TYPES.OpenParen:{const Et=ot();return d(TOKEN_TYPES.CloseParen,"Expected closing parenthesis, got ${tokens[current].type} instead."),Et}case TOKEN_TYPES.OpenSquareBracket:{const Et=[];for(;!_(TOKEN_TYPES.CloseSquareBracket);)Et.push(at()),_(TOKEN_TYPES.Comma)&&++c;return++c,new ArrayLiteral(Et)}case TOKEN_TYPES.OpenCurlyBracket:{const Et=new Map;for(;!_(TOKEN_TYPES.CloseCurlyBracket);){const zt=at();d(TOKEN_TYPES.Colon,"Expected colon between key and value in object literal");const er=at();Et.set(zt,er),_(TOKEN_TYPES.Comma)&&++c}return++c,new ObjectLiteral(Et)}default:throw new SyntaxError(`Unexpected token: ${At.type}`)}}for(;c<a.length;)e.body.push(g());return e}function range(a,e,c=1){e===void 0&&(e=a,a=0);const d=[];for(let h=a;h<e;h+=c)d.push(h);return d}function slice(a,e,c,d=1){const h=Math.sign(d);h>=0?(e=(e??(e=0))<0?Math.max(a.length+e,0):Math.min(e,a.length),c=(c??(c=a.length))<0?Math.max(a.length+c,0):Math.min(c,a.length)):(e=(e??(e=a.length-1))<0?Math.max(a.length+e,-1):Math.min(e,a.length-1),c=(c??(c=-1))<-1?Math.max(a.length+c,-1):Math.min(c,a.length-1));const g=[];for(let _=e;h*_<h*c;_+=d)g.push(a[_]);return g}function titleCase(a){return a.replace(/\b\w/g,e=>e.toUpperCase())}function strftime_now(a){return strftime(new Date,a)}function strftime(a,e){const c=new Intl.DateTimeFormat(void 0,{month:"long"}),d=new Intl.DateTimeFormat(void 0,{month:"short"}),h=g=>g<10?"0"+g:g.toString();return e.replace(/%[YmdbBHM%]/g,g=>{switch(g){case"%Y":return a.getFullYear().toString();case"%m":return h(a.getMonth()+1);case"%d":return h(a.getDate());case"%b":return d.format(a);case"%B":return c.format(a);case"%H":return h(a.getHours());case"%M":return h(a.getMinutes());case"%%":return"%";default:return g}})}function escapeRegExp(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replace(a,e,c,d){if(d===0)return a;let h=d==null||d<0?1/0:d;const g=e.length===0?new RegExp("(?=)","gu"):new RegExp(escapeRegExp(e),"gu");return a.replaceAll(g,_=>h>0?(--h,c):_)}var BreakControl=class extends Error{},ContinueControl=class extends Error{},RuntimeValue=class{constructor(a=void 0){nr(this,"type","RuntimeValue");nr(this,"value");nr(this,"builtins",new Map);this.value=a}__bool__(){return new BooleanValue(!!this.value)}toString(){return String(this.value)}},IntegerValue=class extends RuntimeValue{constructor(){super(...arguments);nr(this,"type","IntegerValue")}},FloatValue=class extends RuntimeValue{constructor(){super(...arguments);nr(this,"type","FloatValue")}toString(){return this.value%1===0?this.value.toFixed(1):this.value.toString()}},StringValue=class extends RuntimeValue{constructor(){super(...arguments);nr(this,"type","StringValue");nr(this,"builtins",new Map([["upper",new FunctionValue(()=>new StringValue(this.value.toUpperCase()))],["lower",new FunctionValue(()=>new StringValue(this.value.toLowerCase()))],["strip",new FunctionValue(()=>new StringValue(this.value.trim()))],["title",new FunctionValue(()=>new StringValue(titleCase(this.value)))],["capitalize",new FunctionValue(()=>new StringValue(this.value.charAt(0).toUpperCase()+this.value.slice(1)))],["length",new IntegerValue(this.value.length)],["rstrip",new FunctionValue(()=>new StringValue(this.value.trimEnd()))],["lstrip",new FunctionValue(()=>new StringValue(this.value.trimStart()))],["startswith",new FunctionValue(e=>{if(e.length===0)throw new Error("startswith() requires at least one argument");const c=e[0];if(c instanceof StringValue)return new BooleanValue(this.value.startsWith(c.value));if(c instanceof ArrayValue){for(const d of c.value){if(!(d instanceof StringValue))throw new Error("startswith() tuple elements must be strings");if(this.value.startsWith(d.value))return new BooleanValue(!0)}return new BooleanValue(!1)}throw new Error("startswith() argument must be a string or tuple of strings")})],["endswith",new FunctionValue(e=>{if(e.length===0)throw new Error("endswith() requires at least one argument");const c=e[0];if(c instanceof StringValue)return new BooleanValue(this.value.endsWith(c.value));if(c instanceof ArrayValue){for(const d of c.value){if(!(d instanceof StringValue))throw new Error("endswith() tuple elements must be strings");if(this.value.endsWith(d.value))return new BooleanValue(!0)}return new BooleanValue(!1)}throw new Error("endswith() argument must be a string or tuple of strings")})],["split",new FunctionValue(e=>{const c=e[0]??new NullValue;if(!(c instanceof StringValue||c instanceof NullValue))throw new Error("sep argument must be a string or null");const d=e[1]??new IntegerValue(-1);if(!(d instanceof IntegerValue))throw new Error("maxsplit argument must be a number");let h=[];if(c instanceof NullValue){const g=this.value.trimStart();for(const{0:_,index:_e}of g.matchAll(/\S+/g)){if(d.value!==-1&&h.length>=d.value&&_e!==void 0){h.push(_+g.slice(_e+_.length));break}h.push(_)}}else{if(c.value==="")throw new Error("empty separator");h=this.value.split(c.value),d.value!==-1&&h.length>d.value&&h.push(h.splice(d.value).join(c.value))}return new ArrayValue(h.map(g=>new StringValue(g)))})],["replace",new FunctionValue(e=>{if(e.length<2)throw new Error("replace() requires at least two arguments");const c=e[0],d=e[1];if(!(c instanceof StringValue&&d instanceof StringValue))throw new Error("replace() arguments must be strings");let h;if(e.length>2?e[2].type==="KeywordArgumentsValue"?h=e[2].value.get("count")??new NullValue:h=e[2]:h=new NullValue,!(h instanceof IntegerValue||h instanceof NullValue))throw new Error("replace() count argument must be a number or null");return new StringValue(replace(this.value,c.value,d.value,h.value))})]]))}},BooleanValue=class extends RuntimeValue{constructor(){super(...arguments);nr(this,"type","BooleanValue")}},ObjectValue=class extends RuntimeValue{constructor(){super(...arguments);nr(this,"type","ObjectValue");nr(this,"builtins",new Map([["get",new FunctionValue(([e,c])=>{if(!(e instanceof StringValue))throw new Error(`Object key must be a string: got ${e.type}`);return this.value.get(e.value)??c??new NullValue})],["items",new FunctionValue(()=>this.items())],["keys",new FunctionValue(()=>this.keys())],["values",new FunctionValue(()=>this.values())]]))}__bool__(){return new BooleanValue(this.value.size>0)}items(){return new ArrayValue(Array.from(this.value.entries()).map(([e,c])=>new ArrayValue([new StringValue(e),c])))}keys(){return new ArrayValue(Array.from(this.value.keys()).map(e=>new StringValue(e)))}values(){return new ArrayValue(Array.from(this.value.values()))}},KeywordArgumentsValue=class extends ObjectValue{constructor(){super(...arguments);nr(this,"type","KeywordArgumentsValue")}},ArrayValue=class extends RuntimeValue{constructor(){super(...arguments);nr(this,"type","ArrayValue");nr(this,"builtins",new Map([["length",new IntegerValue(this.value.length)]]))}__bool__(){return new BooleanValue(this.value.length>0)}},TupleValue=class extends ArrayValue{constructor(){super(...arguments);nr(this,"type","TupleValue")}},FunctionValue=class extends RuntimeValue{constructor(){super(...arguments);nr(this,"type","FunctionValue")}},NullValue=class extends RuntimeValue{constructor(){super(...arguments);nr(this,"type","NullValue")}},UndefinedValue=class extends RuntimeValue{constructor(){super(...arguments);nr(this,"type","UndefinedValue")}},Environment=class{constructor(a){nr(this,"variables",new Map([["namespace",new FunctionValue(a=>{if(a.length===0)return new ObjectValue(new Map);if(a.length!==1||!(a[0]instanceof ObjectValue))throw new Error("`namespace` expects either zero arguments or a single object argument");return a[0]})]]));nr(this,"tests",new Map([["boolean",a=>a.type==="BooleanValue"],["callable",a=>a instanceof FunctionValue],["odd",a=>{if(!(a instanceof IntegerValue))throw new Error(`cannot odd on ${a.type}`);return a.value%2!==0}],["even",a=>{if(!(a instanceof IntegerValue))throw new Error(`cannot even on ${a.type}`);return a.value%2===0}],["false",a=>a.type==="BooleanValue"&&!a.value],["true",a=>a.type==="BooleanValue"&&a.value],["none",a=>a.type==="NullValue"],["string",a=>a.type==="StringValue"],["number",a=>a instanceof IntegerValue||a instanceof FloatValue],["integer",a=>a instanceof IntegerValue],["iterable",a=>a.type==="ArrayValue"||a.type==="StringValue"],["mapping",a=>a.type==="ObjectValue"],["lower",a=>{const e=a.value;return a.type==="StringValue"&&e===e.toLowerCase()}],["upper",a=>{const e=a.value;return a.type==="StringValue"&&e===e.toUpperCase()}],["none",a=>a.type==="NullValue"],["defined",a=>a.type!=="UndefinedValue"],["undefined",a=>a.type==="UndefinedValue"],["equalto",(a,e)=>a.value===e.value],["eq",(a,e)=>a.value===e.value]]));this.parent=a}set(a,e){return this.declareVariable(a,convertToRuntimeValues(e))}declareVariable(a,e){if(this.variables.has(a))throw new SyntaxError(`Variable already declared: ${a}`);return this.variables.set(a,e),e}setVariable(a,e){return this.variables.set(a,e),e}resolve(a){if(this.variables.has(a))return this;if(this.parent)return this.parent.resolve(a);throw new Error(`Unknown variable: ${a}`)}lookupVariable(a){try{return this.resolve(a).variables.get(a)??new UndefinedValue}catch{return new UndefinedValue}}};function setupGlobals(a){a.set("false",!1),a.set("true",!0),a.set("none",null),a.set("raise_exception",e=>{throw new Error(e)}),a.set("range",range),a.set("strftime_now",strftime_now),a.set("True",!0),a.set("False",!1),a.set("None",null)}var Interpreter=class{constructor(a){nr(this,"global");this.global=a??new Environment}run(a){return this.evaluate(a,this.global)}evaluateBinaryExpression(a,e){const c=this.evaluate(a.left,e);switch(a.operator.value){case"and":return c.__bool__().value?this.evaluate(a.right,e):c;case"or":return c.__bool__().value?c:this.evaluate(a.right,e)}const d=this.evaluate(a.right,e);switch(a.operator.value){case"==":return new BooleanValue(c.value==d.value);case"!=":return new BooleanValue(c.value!=d.value)}if(c instanceof UndefinedValue||d instanceof UndefinedValue){if(d instanceof UndefinedValue&&["in","not in"].includes(a.operator.value))return new BooleanValue(a.operator.value==="not in");throw new Error(`Cannot perform operation ${a.operator.value} on undefined values`)}else{if(c instanceof NullValue||d instanceof NullValue)throw new Error("Cannot perform operation on null values");if(a.operator.value==="~")return new StringValue(c.value.toString()+d.value.toString());if((c instanceof IntegerValue||c instanceof FloatValue)&&(d instanceof IntegerValue||d instanceof FloatValue)){const h=c.value,g=d.value;switch(a.operator.value){case"+":case"-":case"*":{const _=a.operator.value==="+"?h+g:a.operator.value==="-"?h-g:h*g;return c instanceof FloatValue||d instanceof FloatValue?new FloatValue(_):new IntegerValue(_)}case"/":return new FloatValue(h/g);case"%":{const _=h%g;return c instanceof FloatValue||d instanceof FloatValue?new FloatValue(_):new IntegerValue(_)}case"<":return new BooleanValue(h<g);case">":return new BooleanValue(h>g);case">=":return new BooleanValue(h>=g);case"<=":return new BooleanValue(h<=g)}}else if(c instanceof ArrayValue&&d instanceof ArrayValue)switch(a.operator.value){case"+":return new ArrayValue(c.value.concat(d.value))}else if(d instanceof ArrayValue){const h=d.value.find(g=>g.value===c.value)!==void 0;switch(a.operator.value){case"in":return new BooleanValue(h);case"not in":return new BooleanValue(!h)}}}if(c instanceof StringValue||d instanceof StringValue)switch(a.operator.value){case"+":return new StringValue(c.value.toString()+d.value.toString())}if(c instanceof StringValue&&d instanceof StringValue)switch(a.operator.value){case"in":return new BooleanValue(d.value.includes(c.value));case"not in":return new BooleanValue(!d.value.includes(c.value))}if(c instanceof StringValue&&d instanceof ObjectValue)switch(a.operator.value){case"in":return new BooleanValue(d.value.has(c.value));case"not in":return new BooleanValue(!d.value.has(c.value))}throw new SyntaxError(`Unknown operator "${a.operator.value}" between ${c.type} and ${d.type}`)}evaluateArguments(a,e){const c=[],d=new Map;for(const h of a)if(h.type==="SpreadExpression"){const g=h,_=this.evaluate(g.argument,e);if(!(_ instanceof ArrayValue))throw new Error(`Cannot unpack non-iterable type: ${_.type}`);for(const _e of _.value)c.push(_e)}else if(h.type==="KeywordArgumentExpression"){const g=h;d.set(g.key.value,this.evaluate(g.value,e))}else{if(d.size>0)throw new Error("Positional arguments must come before keyword arguments");c.push(this.evaluate(h,e))}return[c,d]}applyFilter(a,e,c){if(e.type==="Identifier"){const d=e;if(d.value==="tojson")return new StringValue(toJSON(a));if(a instanceof ArrayValue)switch(d.value){case"list":return a;case"first":return a.value[0];case"last":return a.value[a.value.length-1];case"length":return new IntegerValue(a.value.length);case"reverse":return new ArrayValue(a.value.reverse());case"sort":return new ArrayValue(a.value.sort((h,g)=>{if(h.type!==g.type)throw new Error(`Cannot compare different types: ${h.type} and ${g.type}`);switch(h.type){case"IntegerValue":case"FloatValue":return h.value-g.value;case"StringValue":return h.value.localeCompare(g.value);default:throw new Error(`Cannot compare type: ${h.type}`)}}));case"join":return new StringValue(a.value.map(h=>h.value).join(""));case"string":return new StringValue(toJSON(a));case"unique":{const h=new Set,g=[];for(const _ of a.value)h.has(_.value)||(h.add(_.value),g.push(_));return new ArrayValue(g)}default:throw new Error(`Unknown ArrayValue filter: ${d.value}`)}else if(a instanceof StringValue)switch(d.value){case"length":case"upper":case"lower":case"title":case"capitalize":{const h=a.builtins.get(d.value);if(h instanceof FunctionValue)return h.value([],c);if(h instanceof IntegerValue)return h;throw new Error(`Unknown StringValue filter: ${d.value}`)}case"trim":return new StringValue(a.value.trim());case"indent":return new StringValue(a.value.split(`
`).map((h,g)=>g===0||h.length===0?h:"    "+h).join(`
`));case"join":case"string":return a;case"int":{const h=parseInt(a.value,10);return new IntegerValue(isNaN(h)?0:h)}case"float":{const h=parseFloat(a.value);return new FloatValue(isNaN(h)?0:h)}default:throw new Error(`Unknown StringValue filter: ${d.value}`)}else if(a instanceof IntegerValue||a instanceof FloatValue)switch(d.value){case"abs":return a instanceof IntegerValue?new IntegerValue(Math.abs(a.value)):new FloatValue(Math.abs(a.value));case"int":return new IntegerValue(Math.floor(a.value));case"float":return new FloatValue(a.value);default:throw new Error(`Unknown NumericValue filter: ${d.value}`)}else if(a instanceof ObjectValue)switch(d.value){case"items":return new ArrayValue(Array.from(a.value.entries()).map(([h,g])=>new ArrayValue([new StringValue(h),g])));case"length":return new IntegerValue(a.value.size);default:throw new Error(`Unknown ObjectValue filter: ${d.value}`)}else if(a instanceof BooleanValue)switch(d.value){case"bool":return new BooleanValue(a.value);case"int":return new IntegerValue(a.value?1:0);case"float":return new FloatValue(a.value?1:0);case"string":return new StringValue(a.value?"true":"false");default:throw new Error(`Unknown BooleanValue filter: ${d.value}`)}throw new Error(`Cannot apply filter "${d.value}" to type: ${a.type}`)}else if(e.type==="CallExpression"){const d=e;if(d.callee.type!=="Identifier")throw new Error(`Unknown filter: ${d.callee.type}`);const h=d.callee.value;if(h==="tojson"){const[,g]=this.evaluateArguments(d.args,c),_=g.get("indent")??new NullValue;if(!(_ instanceof IntegerValue||_ instanceof NullValue))throw new Error("If set, indent must be a number");return new StringValue(toJSON(a,_.value))}else if(h==="join"){let g;if(a instanceof StringValue)g=Array.from(a.value);else if(a instanceof ArrayValue)g=a.value.map(tt=>tt.value);else throw new Error(`Cannot apply filter "${h}" to type: ${a.type}`);const[_,_e]=this.evaluateArguments(d.args,c),et=_.at(0)??_e.get("separator")??new StringValue("");if(!(et instanceof StringValue))throw new Error("separator must be a string");return new StringValue(g.join(et.value))}else if(h==="int"||h==="float"){const[g,_]=this.evaluateArguments(d.args,c),_e=g.at(0)??_.get("default")??(h==="int"?new IntegerValue(0):new FloatValue(0));if(a instanceof StringValue){const et=h==="int"?parseInt(a.value,10):parseFloat(a.value);return isNaN(et)?_e:h==="int"?new IntegerValue(et):new FloatValue(et)}else{if(a instanceof IntegerValue||a instanceof FloatValue)return a;if(a instanceof BooleanValue)return h==="int"?new IntegerValue(a.value?1:0):new FloatValue(a.value?1:0);throw new Error(`Cannot apply filter "${h}" to type: ${a.type}`)}}else if(h==="default"){const[g,_]=this.evaluateArguments(d.args,c),_e=g[0]??new StringValue(""),et=g[1]??_.get("boolean")??new BooleanValue(!1);if(!(et instanceof BooleanValue))throw new Error("`default` filter flag must be a boolean");return a instanceof UndefinedValue||et.value&&!a.__bool__().value?_e:a}if(a instanceof ArrayValue){switch(h){case"selectattr":case"rejectattr":{const g=h==="selectattr";if(a.value.some($=>!($ instanceof ObjectValue)))throw new Error(`\`${h}\` can only be applied to array of objects`);if(d.args.some($=>$.type!=="StringLiteral"))throw new Error(`arguments of \`${h}\` must be strings`);const[_,_e,et]=d.args.map($=>this.evaluate($,c));let tt;if(_e){const $=c.tests.get(_e.value);if(!$)throw new Error(`Unknown test: ${_e.value}`);tt=$}else tt=(...$)=>$[0].__bool__().value;const rt=a.value.filter($=>{const b=$.value.get(_.value),nt=b?tt(b,et):!1;return g?nt:!nt});return new ArrayValue(rt)}case"map":{const[,g]=this.evaluateArguments(d.args,c);if(g.has("attribute")){const _=g.get("attribute");if(!(_ instanceof StringValue))throw new Error("attribute must be a string");const _e=g.get("default"),et=a.value.map(tt=>{if(!(tt instanceof ObjectValue))throw new Error("items in map must be an object");return tt.value.get(_.value)??_e??new UndefinedValue});return new ArrayValue(et)}else throw new Error("`map` expressions without `attribute` set are not currently supported.")}}throw new Error(`Unknown ArrayValue filter: ${h}`)}else if(a instanceof StringValue){switch(h){case"indent":{const[g,_]=this.evaluateArguments(d.args,c),_e=g.at(0)??_.get("width")??new IntegerValue(4);if(!(_e instanceof IntegerValue))throw new Error("width must be a number");const et=g.at(1)??_.get("first")??new BooleanValue(!1),tt=g.at(2)??_.get("blank")??new BooleanValue(!1),rt=a.value.split(`
`),$=" ".repeat(_e.value),b=rt.map((nt,st)=>!et.value&&st===0||!tt.value&&nt.length===0?nt:$+nt);return new StringValue(b.join(`
`))}case"replace":{const g=a.builtins.get("replace");if(!(g instanceof FunctionValue))throw new Error("replace filter not available");const[_,_e]=this.evaluateArguments(d.args,c);return g.value([..._,new KeywordArgumentsValue(_e)],c)}}throw new Error(`Unknown StringValue filter: ${h}`)}else throw new Error(`Cannot apply filter "${h}" to type: ${a.type}`)}throw new Error(`Unknown filter: ${e.type}`)}evaluateFilterExpression(a,e){const c=this.evaluate(a.operand,e);return this.applyFilter(c,a.filter,e)}evaluateTestExpression(a,e){const c=this.evaluate(a.operand,e),d=e.tests.get(a.test.value);if(!d)throw new Error(`Unknown test: ${a.test.value}`);const h=d(c);return new BooleanValue(a.negate?!h:h)}evaluateSelectExpression(a,e){return this.evaluate(a.test,e).__bool__().value?this.evaluate(a.lhs,e):new UndefinedValue}evaluateUnaryExpression(a,e){const c=this.evaluate(a.argument,e);switch(a.operator.value){case"not":return new BooleanValue(!c.value);default:throw new SyntaxError(`Unknown operator: ${a.operator.value}`)}}evaluateTernaryExpression(a,e){return this.evaluate(a.condition,e).__bool__().value?this.evaluate(a.trueExpr,e):this.evaluate(a.falseExpr,e)}evalProgram(a,e){return this.evaluateBlock(a.body,e)}evaluateBlock(a,e){let c="";for(const d of a){const h=this.evaluate(d,e);h.type!=="NullValue"&&h.type!=="UndefinedValue"&&(c+=h.toString())}return new StringValue(c)}evaluateIdentifier(a,e){return e.lookupVariable(a.value)}evaluateCallExpression(a,e){const[c,d]=this.evaluateArguments(a.args,e);d.size>0&&c.push(new KeywordArgumentsValue(d));const h=this.evaluate(a.callee,e);if(h.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${h.type}`);return h.value(c,e)}evaluateSliceExpression(a,e,c){if(!(a instanceof ArrayValue||a instanceof StringValue))throw new Error("Slice object must be an array or string");const d=this.evaluate(e.start,c),h=this.evaluate(e.stop,c),g=this.evaluate(e.step,c);if(!(d instanceof IntegerValue||d instanceof UndefinedValue))throw new Error("Slice start must be numeric or undefined");if(!(h instanceof IntegerValue||h instanceof UndefinedValue))throw new Error("Slice stop must be numeric or undefined");if(!(g instanceof IntegerValue||g instanceof UndefinedValue))throw new Error("Slice step must be numeric or undefined");return a instanceof ArrayValue?new ArrayValue(slice(a.value,d.value,h.value,g.value)):new StringValue(slice(Array.from(a.value),d.value,h.value,g.value).join(""))}evaluateMemberExpression(a,e){const c=this.evaluate(a.object,e);let d;if(a.computed){if(a.property.type==="SliceExpression")return this.evaluateSliceExpression(c,a.property,e);d=this.evaluate(a.property,e)}else d=new StringValue(a.property.value);let h;if(c instanceof ObjectValue){if(!(d instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${d.type}`);h=c.value.get(d.value)??c.builtins.get(d.value)}else if(c instanceof ArrayValue||c instanceof StringValue)if(d instanceof IntegerValue)h=c.value.at(d.value),c instanceof StringValue&&(h=new StringValue(c.value.at(d.value)));else if(d instanceof StringValue)h=c.builtins.get(d.value);else throw new Error(`Cannot access property with non-string/non-number: got ${d.type}`);else{if(!(d instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${d.type}`);h=c.builtins.get(d.value)}return h instanceof RuntimeValue?h:new UndefinedValue}evaluateSet(a,e){const c=a.value?this.evaluate(a.value,e):this.evaluateBlock(a.body,e);if(a.assignee.type==="Identifier"){const d=a.assignee.value;e.setVariable(d,c)}else if(a.assignee.type==="TupleLiteral"){const d=a.assignee;if(!(c instanceof ArrayValue))throw new Error(`Cannot unpack non-iterable type in set: ${c.type}`);const h=c.value;if(h.length!==d.value.length)throw new Error(`Too ${d.value.length>h.length?"few":"many"} items to unpack in set`);for(let g=0;g<d.value.length;++g){const _=d.value[g];if(_.type!=="Identifier")throw new Error(`Cannot unpack to non-identifier in set: ${_.type}`);e.setVariable(_.value,h[g])}}else if(a.assignee.type==="MemberExpression"){const d=a.assignee,h=this.evaluate(d.object,e);if(!(h instanceof ObjectValue))throw new Error("Cannot assign to member of non-object");if(d.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");h.value.set(d.property.value,c)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(a.assignee)}`);return new NullValue}evaluateIf(a,e){const c=this.evaluate(a.test,e);return this.evaluateBlock(c.__bool__().value?a.body:a.alternate,e)}evaluateFor(a,e){const c=new Environment(e);let d,h;if(a.iterable.type==="SelectExpression"){const tt=a.iterable;h=this.evaluate(tt.lhs,c),d=tt.test}else h=this.evaluate(a.iterable,c);if(!(h instanceof ArrayValue||h instanceof ObjectValue))throw new Error(`Expected iterable or object type in for loop: got ${h.type}`);h instanceof ObjectValue&&(h=h.keys());const g=[],_=[];for(let tt=0;tt<h.value.length;++tt){const rt=new Environment(c),$=h.value[tt];let b;if(a.loopvar.type==="Identifier")b=nt=>nt.setVariable(a.loopvar.value,$);else if(a.loopvar.type==="TupleLiteral"){const nt=a.loopvar;if($.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${$.type}`);const st=$;if(nt.value.length!==st.value.length)throw new Error(`Too ${nt.value.length>st.value.length?"few":"many"} items to unpack`);b=ot=>{for(let it=0;it<nt.value.length;++it){if(nt.value[it].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${nt.value[it].type}`);ot.setVariable(nt.value[it].value,st.value[it])}}}else throw new Error(`Invalid loop variable(s): ${a.loopvar.type}`);d&&(b(rt),!this.evaluate(d,rt).__bool__().value)||(g.push($),_.push(b))}let _e="",et=!0;for(let tt=0;tt<g.length;++tt){const rt=new Map([["index",new IntegerValue(tt+1)],["index0",new IntegerValue(tt)],["revindex",new IntegerValue(g.length-tt)],["revindex0",new IntegerValue(g.length-tt-1)],["first",new BooleanValue(tt===0)],["last",new BooleanValue(tt===g.length-1)],["length",new IntegerValue(g.length)],["previtem",tt>0?g[tt-1]:new UndefinedValue],["nextitem",tt<g.length-1?g[tt+1]:new UndefinedValue]]);c.setVariable("loop",new ObjectValue(rt)),_[tt](c);try{const $=this.evaluateBlock(a.body,c);_e+=$.value}catch($){if($ instanceof ContinueControl)continue;if($ instanceof BreakControl)break;throw $}et=!1}if(et){const tt=this.evaluateBlock(a.defaultBlock,c);_e+=tt.value}return new StringValue(_e)}evaluateMacro(a,e){return e.setVariable(a.name.value,new FunctionValue((c,d)=>{var _;const h=new Environment(d);c=c.slice();let g;((_=c.at(-1))==null?void 0:_.type)==="KeywordArgumentsValue"&&(g=c.pop());for(let _e=0;_e<a.args.length;++_e){const et=a.args[_e],tt=c[_e];if(et.type==="Identifier"){const rt=et;if(!tt)throw new Error(`Missing positional argument: ${rt.value}`);h.setVariable(rt.value,tt)}else if(et.type==="KeywordArgumentExpression"){const rt=et,$=tt??(g==null?void 0:g.value.get(rt.key.value))??this.evaluate(rt.value,h);h.setVariable(rt.key.value,$)}else throw new Error(`Unknown argument type: ${et.type}`)}return this.evaluateBlock(a.body,h)})),new NullValue}evaluateCallStatement(a,e){const c=new FunctionValue((_e,et)=>{const tt=new Environment(et);if(a.callerArgs)for(let rt=0;rt<a.callerArgs.length;++rt){const $=a.callerArgs[rt];if($.type!=="Identifier")throw new Error(`Caller parameter must be an identifier, got ${$.type}`);tt.setVariable($.value,_e[rt]??new UndefinedValue)}return this.evaluateBlock(a.body,tt)}),[d,h]=this.evaluateArguments(a.call.args,e);d.push(new KeywordArgumentsValue(h));const g=this.evaluate(a.call.callee,e);if(g.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${g.type}`);const _=new Environment(e);return _.setVariable("caller",c),g.value(d,_)}evaluateFilterStatement(a,e){const c=this.evaluateBlock(a.body,e);return this.applyFilter(c,a.filter,e)}evaluate(a,e){if(!a)return new UndefinedValue;switch(a.type){case"Program":return this.evalProgram(a,e);case"Set":return this.evaluateSet(a,e);case"If":return this.evaluateIf(a,e);case"For":return this.evaluateFor(a,e);case"Macro":return this.evaluateMacro(a,e);case"CallStatement":return this.evaluateCallStatement(a,e);case"Break":throw new BreakControl;case"Continue":throw new ContinueControl;case"IntegerLiteral":return new IntegerValue(a.value);case"FloatLiteral":return new FloatValue(a.value);case"StringLiteral":return new StringValue(a.value);case"ArrayLiteral":return new ArrayValue(a.value.map(c=>this.evaluate(c,e)));case"TupleLiteral":return new TupleValue(a.value.map(c=>this.evaluate(c,e)));case"ObjectLiteral":{const c=new Map;for(const[d,h]of a.value){const g=this.evaluate(d,e);if(!(g instanceof StringValue))throw new Error(`Object keys must be strings: got ${g.type}`);c.set(g.value,this.evaluate(h,e))}return new ObjectValue(c)}case"Identifier":return this.evaluateIdentifier(a,e);case"CallExpression":return this.evaluateCallExpression(a,e);case"MemberExpression":return this.evaluateMemberExpression(a,e);case"UnaryExpression":return this.evaluateUnaryExpression(a,e);case"BinaryExpression":return this.evaluateBinaryExpression(a,e);case"FilterExpression":return this.evaluateFilterExpression(a,e);case"FilterStatement":return this.evaluateFilterStatement(a,e);case"TestExpression":return this.evaluateTestExpression(a,e);case"SelectExpression":return this.evaluateSelectExpression(a,e);case"Ternary":return this.evaluateTernaryExpression(a,e);case"Comment":return new NullValue;default:throw new SyntaxError(`Unknown node type: ${a.type}`)}}};function convertToRuntimeValues(a){switch(typeof a){case"number":return Number.isInteger(a)?new IntegerValue(a):new FloatValue(a);case"string":return new StringValue(a);case"boolean":return new BooleanValue(a);case"undefined":return new UndefinedValue;case"object":return a===null?new NullValue:Array.isArray(a)?new ArrayValue(a.map(convertToRuntimeValues)):new ObjectValue(new Map(Object.entries(a).map(([e,c])=>[e,convertToRuntimeValues(c)])));case"function":return new FunctionValue((e,c)=>{const d=a(...e.map(h=>h.value))??null;return convertToRuntimeValues(d)});default:throw new Error(`Cannot convert to runtime value: ${a}`)}}function toJSON(a,e,c){const d=c??0;switch(a.type){case"NullValue":case"UndefinedValue":return"null";case"IntegerValue":case"FloatValue":case"StringValue":case"BooleanValue":return JSON.stringify(a.value);case"ArrayValue":case"ObjectValue":{const h=e?" ".repeat(e):"",g=`
`+h.repeat(d),_=g+h;if(a.type==="ArrayValue"){const _e=a.value.map(et=>toJSON(et,e,d+1));return e?`[${_}${_e.join(`,${_}`)}${g}]`:`[${_e.join(", ")}]`}else{const _e=Array.from(a.value.entries()).map(([et,tt])=>{const rt=`"${et}": ${toJSON(tt,e,d+1)}`;return e?`${_}${rt}`:rt});return e?`{${_e.join(",")}${g}}`:`{${_e.join(", ")}}`}}default:throw new Error(`Cannot convert to JSON: ${a.type}`)}}var NEWLINE=`
`,OPEN_STATEMENT="{%- ",CLOSE_STATEMENT=" -%}";function getBinaryOperatorPrecedence(a){switch(a.operator.type){case"MultiplicativeBinaryOperator":return 4;case"AdditiveBinaryOperator":return 3;case"ComparisonBinaryOperator":return 2;case"Identifier":return a.operator.value==="and"?1:a.operator.value==="in"||a.operator.value==="not in"?2:0}return 0}function format(a,e="	"){const c=typeof e=="number"?" ".repeat(e):e;return formatStatements(a.body,0,c).replace(/\n$/,"")}function createStatement(...a){return OPEN_STATEMENT+a.join(" ")+CLOSE_STATEMENT}function formatStatements(a,e,c){return a.map(d=>formatStatement(d,e,c)).join(NEWLINE)}function formatStatement(a,e,c){const d=c.repeat(e);switch(a.type){case"Program":return formatStatements(a.body,e,c);case"If":return formatIf(a,e,c);case"For":return formatFor(a,e,c);case"Set":return formatSet(a,e,c);case"Macro":return formatMacro(a,e,c);case"Break":return d+createStatement("break");case"Continue":return d+createStatement("continue");case"CallStatement":return formatCallStatement(a,e,c);case"FilterStatement":return formatFilterStatement(a,e,c);case"Comment":return d+"{# "+a.value+" #}";default:return d+"{{- "+formatExpression(a)+" -}}"}}function formatIf(a,e,c){const d=c.repeat(e),h=[];let g=a;for(;g&&(h.push({test:g.test,body:g.body}),g.alternate.length===1&&g.alternate[0].type==="If");)g=g.alternate[0];let _=d+createStatement("if",formatExpression(h[0].test))+NEWLINE+formatStatements(h[0].body,e+1,c);for(let _e=1;_e<h.length;++_e)_+=NEWLINE+d+createStatement("elif",formatExpression(h[_e].test))+NEWLINE+formatStatements(h[_e].body,e+1,c);return g&&g.alternate.length>0&&(_+=NEWLINE+d+createStatement("else")+NEWLINE+formatStatements(g.alternate,e+1,c)),_+=NEWLINE+d+createStatement("endif"),_}function formatFor(a,e,c){const d=c.repeat(e);let h="";if(a.iterable.type==="SelectExpression"){const _=a.iterable;h=`${formatExpression(_.lhs)} if ${formatExpression(_.test)}`}else h=formatExpression(a.iterable);let g=d+createStatement("for",formatExpression(a.loopvar),"in",h)+NEWLINE+formatStatements(a.body,e+1,c);return a.defaultBlock.length>0&&(g+=NEWLINE+d+createStatement("else")+NEWLINE+formatStatements(a.defaultBlock,e+1,c)),g+=NEWLINE+d+createStatement("endfor"),g}function formatSet(a,e,c){const d=c.repeat(e),h=formatExpression(a.assignee),g=a.value?formatExpression(a.value):"",_=d+createStatement("set",`${h}${a.value?" = "+g:""}`);return a.body.length===0?_:_+NEWLINE+formatStatements(a.body,e+1,c)+NEWLINE+d+createStatement("endset")}function formatMacro(a,e,c){const d=c.repeat(e),h=a.args.map(formatExpression).join(", ");return d+createStatement("macro",`${a.name.value}(${h})`)+NEWLINE+formatStatements(a.body,e+1,c)+NEWLINE+d+createStatement("endmacro")}function formatCallStatement(a,e,c){const d=c.repeat(e),h=a.callerArgs&&a.callerArgs.length>0?`(${a.callerArgs.map(formatExpression).join(", ")})`:"",g=formatExpression(a.call);let _=d+createStatement(`call${h}`,g)+NEWLINE;return _+=formatStatements(a.body,e+1,c)+NEWLINE,_+=d+createStatement("endcall"),_}function formatFilterStatement(a,e,c){const d=c.repeat(e),h=a.filter.type==="Identifier"?a.filter.value:formatExpression(a.filter);let g=d+createStatement("filter",h)+NEWLINE;return g+=formatStatements(a.body,e+1,c)+NEWLINE,g+=d+createStatement("endfilter"),g}function formatExpression(a,e=-1){switch(a.type){case"SpreadExpression":return`*${formatExpression(a.argument)}`;case"Identifier":return a.value;case"IntegerLiteral":return`${a.value}`;case"FloatLiteral":return`${a.value}`;case"StringLiteral":return JSON.stringify(a.value);case"BinaryExpression":{const c=a,d=getBinaryOperatorPrecedence(c),h=formatExpression(c.left,d),g=formatExpression(c.right,d+1),_=`${h} ${c.operator.value} ${g}`;return d<e?`(${_})`:_}case"UnaryExpression":{const c=a;return c.operator.value+(c.operator.value==="not"?" ":"")+formatExpression(c.argument,1/0)}case"CallExpression":{const c=a,d=c.args.map(formatExpression).join(", ");return`${formatExpression(c.callee)}(${d})`}case"MemberExpression":{const c=a;let d=formatExpression(c.object);["Identifier","MemberExpression","CallExpression","StringLiteral","IntegerLiteral","FloatLiteral","ArrayLiteral","TupleLiteral","ObjectLiteral"].includes(c.object.type)||(d=`(${d})`);let h=formatExpression(c.property);return!c.computed&&c.property.type!=="Identifier"&&(h=`(${h})`),c.computed?`${d}[${h}]`:`${d}.${h}`}case"FilterExpression":{const c=a,d=formatExpression(c.operand,1/0);return c.filter.type==="CallExpression"?`${d} | ${formatExpression(c.filter)}`:`${d} | ${c.filter.value}`}case"SelectExpression":{const c=a;return`${formatExpression(c.lhs)} if ${formatExpression(c.test)}`}case"TestExpression":{const c=a;return`${formatExpression(c.operand)} is${c.negate?" not":""} ${c.test.value}`}case"ArrayLiteral":case"TupleLiteral":{const c=a.value.map(formatExpression),d=a.type==="ArrayLiteral"?"[]":"()";return`${d[0]}${c.join(", ")}${d[1]}`}case"ObjectLiteral":return`{${Array.from(a.value.entries()).map(([d,h])=>`${formatExpression(d)}: ${formatExpression(h)}`).join(", ")}}`;case"SliceExpression":{const c=a,d=c.start?formatExpression(c.start):"",h=c.stop?formatExpression(c.stop):"",g=c.step?`:${formatExpression(c.step)}`:"";return`${d}:${h}${g}`}case"KeywordArgumentExpression":{const c=a;return`${c.key.value}=${formatExpression(c.value)}`}case"Ternary":{const c=a,d=`${formatExpression(c.trueExpr)} if ${formatExpression(c.condition,0)} else ${formatExpression(c.falseExpr)}`;return e>-1?`(${d})`:d}default:throw new Error(`Unknown expression type: ${a.type}`)}}var Template=class{constructor(a){nr(this,"parsed");const e=tokenize(a,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=parse(e)}render(a){const e=new Environment;if(setupGlobals(e),a)for(const[h,g]of Object.entries(a))e.set(h,g);return new Interpreter(e).run(this.parsed).value}format(a){return format(this.parsed,(a==null?void 0:a.indent)||"	")}};const LIBRARY_TASK_MAPPING={"adapter-transformers":["question-answering","text-classification","token-classification"],allennlp:["question-answering"],asteroid:["audio-to-audio"],bertopic:["text-classification"],diffusers:["image-to-image","text-to-image"],doctr:["object-detection"],espnet:["text-to-speech","automatic-speech-recognition"],fairseq:["text-to-speech","audio-to-audio"],fastai:["image-classification"],fasttext:["feature-extraction","text-classification"],flair:["token-classification"],k2:["automatic-speech-recognition"],keras:["image-classification"],nemo:["automatic-speech-recognition"],open_clip:["zero-shot-classification","zero-shot-image-classification"],paddlenlp:["fill-mask","summarization","zero-shot-classification"],peft:["text-generation"],"pyannote-audio":["automatic-speech-recognition"],"sentence-transformers":["feature-extraction","sentence-similarity"],setfit:["text-classification"],sklearn:["tabular-classification","tabular-regression","text-classification"],spacy:["token-classification","text-classification","sentence-similarity"],"span-marker":["token-classification"],speechbrain:["audio-classification","audio-to-audio","automatic-speech-recognition","text-to-speech","text2text-generation"],stanza:["token-classification"],timm:["image-classification","image-feature-extraction"],transformers:["audio-classification","automatic-speech-recognition","depth-estimation","document-question-answering","feature-extraction","fill-mask","image-classification","image-feature-extraction","image-segmentation","image-to-image","image-to-text","image-text-to-text","mask-generation","object-detection","question-answering","summarization","table-question-answering","text2text-generation","text-classification","text-generation","text-to-audio","text-to-speech","token-classification","translation","video-classification","visual-question-answering","zero-shot-classification","zero-shot-image-classification","zero-shot-object-detection"],mindspore:["image-classification"]},PIPELINE_DATA={"text-classification":{name:"Text Classification",subtasks:[{type:"acceptability-classification",name:"Acceptability Classification"},{type:"entity-linking-classification",name:"Entity Linking Classification"},{type:"fact-checking",name:"Fact Checking"},{type:"intent-classification",name:"Intent Classification"},{type:"language-identification",name:"Language Identification"},{type:"multi-class-classification",name:"Multi Class Classification"},{type:"multi-label-classification",name:"Multi Label Classification"},{type:"multi-input-text-classification",name:"Multi-input Text Classification"},{type:"natural-language-inference",name:"Natural Language Inference"},{type:"semantic-similarity-classification",name:"Semantic Similarity Classification"},{type:"sentiment-classification",name:"Sentiment Classification"},{type:"topic-classification",name:"Topic Classification"},{type:"semantic-similarity-scoring",name:"Semantic Similarity Scoring"},{type:"sentiment-scoring",name:"Sentiment Scoring"},{type:"sentiment-analysis",name:"Sentiment Analysis"},{type:"hate-speech-detection",name:"Hate Speech Detection"},{type:"text-scoring",name:"Text Scoring"}],modality:"nlp",color:"orange"},"token-classification":{name:"Token Classification",subtasks:[{type:"named-entity-recognition",name:"Named Entity Recognition"},{type:"part-of-speech",name:"Part of Speech"},{type:"parsing",name:"Parsing"},{type:"lemmatization",name:"Lemmatization"},{type:"word-sense-disambiguation",name:"Word Sense Disambiguation"},{type:"coreference-resolution",name:"Coreference-resolution"}],modality:"nlp",color:"blue"},"table-question-answering":{name:"Table Question Answering",modality:"nlp",color:"green"},"question-answering":{name:"Question Answering",subtasks:[{type:"extractive-qa",name:"Extractive QA"},{type:"open-domain-qa",name:"Open Domain QA"},{type:"closed-domain-qa",name:"Closed Domain QA"}],modality:"nlp",color:"blue"},"zero-shot-classification":{name:"Zero-Shot Classification",modality:"nlp",color:"yellow"},translation:{name:"Translation",modality:"nlp",color:"green"},summarization:{name:"Summarization",subtasks:[{type:"news-articles-summarization",name:"News Articles Summarization"},{type:"news-articles-headline-generation",name:"News Articles Headline Generation"}],modality:"nlp",color:"indigo"},"feature-extraction":{name:"Feature Extraction",modality:"nlp",color:"red"},"text-generation":{name:"Text Generation",subtasks:[{type:"dialogue-modeling",name:"Dialogue Modeling"},{type:"dialogue-generation",name:"Dialogue Generation"},{type:"conversational",name:"Conversational"},{type:"language-modeling",name:"Language Modeling"}],modality:"nlp",color:"indigo"},"text2text-generation":{name:"Text2Text Generation",subtasks:[{type:"text-simplification",name:"Text simplification"},{type:"explanation-generation",name:"Explanation Generation"},{type:"abstractive-qa",name:"Abstractive QA"},{type:"open-domain-abstractive-qa",name:"Open Domain Abstractive QA"},{type:"closed-domain-qa",name:"Closed Domain QA"},{type:"open-book-qa",name:"Open Book QA"},{type:"closed-book-qa",name:"Closed Book QA"}],modality:"nlp",color:"indigo"},"fill-mask":{name:"Fill-Mask",subtasks:[{type:"slot-filling",name:"Slot Filling"},{type:"masked-language-modeling",name:"Masked Language Modeling"}],modality:"nlp",color:"red"},"sentence-similarity":{name:"Sentence Similarity",modality:"nlp",color:"yellow"},"text-to-speech":{name:"Text-to-Speech",modality:"audio",color:"yellow"},"text-to-audio":{name:"Text-to-Audio",modality:"audio",color:"yellow"},"automatic-speech-recognition":{name:"Automatic Speech Recognition",modality:"audio",color:"yellow"},"audio-to-audio":{name:"Audio-to-Audio",modality:"audio",color:"blue"},"audio-classification":{name:"Audio Classification",subtasks:[{type:"keyword-spotting",name:"Keyword Spotting"},{type:"speaker-identification",name:"Speaker Identification"},{type:"audio-intent-classification",name:"Audio Intent Classification"},{type:"audio-emotion-recognition",name:"Audio Emotion Recognition"},{type:"audio-language-identification",name:"Audio Language Identification"}],modality:"audio",color:"green"},"audio-text-to-text":{name:"Audio-Text-to-Text",modality:"multimodal",color:"red",hideInDatasets:!0},"voice-activity-detection":{name:"Voice Activity Detection",modality:"audio",color:"red"},"depth-estimation":{name:"Depth Estimation",modality:"cv",color:"yellow"},"image-classification":{name:"Image Classification",subtasks:[{type:"multi-label-image-classification",name:"Multi Label Image Classification"},{type:"multi-class-image-classification",name:"Multi Class Image Classification"}],modality:"cv",color:"blue"},"object-detection":{name:"Object Detection",subtasks:[{type:"face-detection",name:"Face Detection"},{type:"vehicle-detection",name:"Vehicle Detection"}],modality:"cv",color:"yellow"},"image-segmentation":{name:"Image Segmentation",subtasks:[{type:"instance-segmentation",name:"Instance Segmentation"},{type:"semantic-segmentation",name:"Semantic Segmentation"},{type:"panoptic-segmentation",name:"Panoptic Segmentation"}],modality:"cv",color:"green"},"text-to-image":{name:"Text-to-Image",modality:"cv",color:"yellow"},"image-to-text":{name:"Image-to-Text",subtasks:[{type:"image-captioning",name:"Image Captioning"}],modality:"cv",color:"red"},"image-to-image":{name:"Image-to-Image",subtasks:[{type:"image-inpainting",name:"Image Inpainting"},{type:"image-colorization",name:"Image Colorization"},{type:"super-resolution",name:"Super Resolution"}],modality:"cv",color:"indigo"},"image-to-video":{name:"Image-to-Video",modality:"cv",color:"indigo"},"unconditional-image-generation":{name:"Unconditional Image Generation",modality:"cv",color:"green"},"video-classification":{name:"Video Classification",modality:"cv",color:"blue"},"reinforcement-learning":{name:"Reinforcement Learning",modality:"rl",color:"red"},robotics:{name:"Robotics",modality:"rl",subtasks:[{type:"grasping",name:"Grasping"},{type:"task-planning",name:"Task Planning"}],color:"blue"},"tabular-classification":{name:"Tabular Classification",modality:"tabular",subtasks:[{type:"tabular-multi-class-classification",name:"Tabular Multi Class Classification"},{type:"tabular-multi-label-classification",name:"Tabular Multi Label Classification"}],color:"blue"},"tabular-regression":{name:"Tabular Regression",modality:"tabular",subtasks:[{type:"tabular-single-column-regression",name:"Tabular Single Column Regression"}],color:"blue"},"tabular-to-text":{name:"Tabular to Text",modality:"tabular",subtasks:[{type:"rdf-to-text",name:"RDF to text"}],color:"blue",hideInModels:!0},"table-to-text":{name:"Table to Text",modality:"nlp",color:"blue",hideInModels:!0},"multiple-choice":{name:"Multiple Choice",subtasks:[{type:"multiple-choice-qa",name:"Multiple Choice QA"},{type:"multiple-choice-coreference-resolution",name:"Multiple Choice Coreference Resolution"}],modality:"nlp",color:"blue",hideInModels:!0},"text-ranking":{name:"Text Ranking",modality:"nlp",color:"red"},"text-retrieval":{name:"Text Retrieval",subtasks:[{type:"document-retrieval",name:"Document Retrieval"},{type:"utterance-retrieval",name:"Utterance Retrieval"},{type:"entity-linking-retrieval",name:"Entity Linking Retrieval"},{type:"fact-checking-retrieval",name:"Fact Checking Retrieval"}],modality:"nlp",color:"indigo",hideInModels:!0},"time-series-forecasting":{name:"Time Series Forecasting",modality:"tabular",subtasks:[{type:"univariate-time-series-forecasting",name:"Univariate Time Series Forecasting"},{type:"multivariate-time-series-forecasting",name:"Multivariate Time Series Forecasting"}],color:"blue"},"text-to-video":{name:"Text-to-Video",modality:"cv",color:"green"},"image-text-to-text":{name:"Image-Text-to-Text",modality:"multimodal",color:"red",hideInDatasets:!0},"visual-question-answering":{name:"Visual Question Answering",subtasks:[{type:"visual-question-answering",name:"Visual Question Answering"}],modality:"multimodal",color:"red"},"document-question-answering":{name:"Document Question Answering",subtasks:[{type:"document-question-answering",name:"Document Question Answering"}],modality:"multimodal",color:"blue",hideInDatasets:!0},"zero-shot-image-classification":{name:"Zero-Shot Image Classification",modality:"cv",color:"yellow"},"graph-ml":{name:"Graph Machine Learning",modality:"other",color:"green"},"mask-generation":{name:"Mask Generation",modality:"cv",color:"indigo"},"zero-shot-object-detection":{name:"Zero-Shot Object Detection",modality:"cv",color:"yellow"},"text-to-3d":{name:"Text-to-3D",modality:"cv",color:"yellow"},"image-to-3d":{name:"Image-to-3D",modality:"cv",color:"green"},"image-feature-extraction":{name:"Image Feature Extraction",modality:"cv",color:"indigo"},"video-text-to-text":{name:"Video-Text-to-Text",modality:"multimodal",color:"blue",hideInDatasets:!1},"keypoint-detection":{name:"Keypoint Detection",subtasks:[{type:"pose-estimation",name:"Pose Estimation"}],modality:"cv",color:"red",hideInDatasets:!0},"visual-document-retrieval":{name:"Visual Document Retrieval",modality:"multimodal",color:"yellow",hideInDatasets:!0},"any-to-any":{name:"Any-to-Any",modality:"multimodal",color:"yellow",hideInDatasets:!0},other:{name:"Other",modality:"other",color:"blue",hideInModels:!0,hideInDatasets:!0}},PIPELINE_TYPES=Object.keys(PIPELINE_DATA);Object.values(PIPELINE_DATA).flatMap(a=>"subtasks"in a?a.subtasks:[]).map(a=>a.type);new Set(PIPELINE_TYPES);const taskData$H={datasets:[{description:"A dataset with multiple modality input and output pairs.",id:"PKU-Alignment/align-anything"}],demo:{inputs:[{filename:"any-to-any-input.jpg",type:"img"},{label:"Text Prompt",content:"What is the significance of this place?",type:"text"}],outputs:[{label:"Generated Text",content:"The place in the picture is Osaka Castle, located in Osaka, Japan. Osaka Castle is a historic castle that was originally built in the 16th century by Toyotomi Hideyoshi, a powerful warlord of the time. It is one of the most famous landmarks in Osaka and is known for its distinctive white walls and black roof tiles. The castle has been rebuilt several times over the centuries and is now a popular tourist attraction, offering visitors a glimpse into Japan's rich history and culture.",type:"text"},{filename:"any-to-any-output.wav",type:"audio"}]},metrics:[],models:[{description:"Strong model that can take in video, audio, image, text and output text and natural speech.",id:"Qwen/Qwen2.5-Omni-7B"},{description:"Robust model that can take in image and text and generate image and text.",id:"deepseek-ai/Janus-Pro-7B"},{description:"Any-to-any model with speech, video, audio, image and text understanding capabilities.",id:"openbmb/MiniCPM-o-2_6"},{description:"A model that can understand image and text and generate image and text.",id:"EPFL-VILAB/4M-21_XL"}],spaces:[{description:"An application to chat with an any-to-any (image & text) model.",id:"deepseek-ai/Janus-Pro-7B"}],summary:"Any-to-any models can understand two or more modalities and output two or more modalities.",widgetModels:[],youtubeId:""},taskData$G={datasets:[{description:"A benchmark of 10 different audio tasks.",id:"s3prl/superb"},{description:"A dataset of YouTube clips and their sound categories.",id:"agkphysics/AudioSet"}],demo:{inputs:[{filename:"audio.wav",type:"audio"}],outputs:[{data:[{label:"Up",score:.2},{label:"Down",score:.8}],type:"chart"}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"An easy-to-use model for command recognition.",id:"speechbrain/google_speech_command_xvector"},{description:"An emotion recognition model.",id:"ehcalabres/wav2vec2-lg-xlsr-en-speech-emotion-recognition"},{description:"A language identification model.",id:"facebook/mms-lid-126"}],spaces:[{description:"An application that can classify music into different genre.",id:"kurianbenoy/audioclassification"}],summary:"Audio classification is the task of assigning a label or class to a given audio. It can be used for recognizing which command a user is giving or the emotion of a statement, as well as identifying a speaker.",widgetModels:["MIT/ast-finetuned-audioset-10-10-0.4593"],youtubeId:"KWwzcmG98Ds"},taskData$F={datasets:[{description:"512-element X-vector embeddings of speakers from CMU ARCTIC dataset.",id:"Matthijs/cmu-arctic-xvectors"}],demo:{inputs:[{filename:"input.wav",type:"audio"}],outputs:[{filename:"label-0.wav",type:"audio"},{filename:"label-1.wav",type:"audio"}]},metrics:[{description:"The Signal-to-Noise ratio is the relationship between the target signal level and the background noise level. It is calculated as the logarithm of the target signal divided by the background noise, in decibels.",id:"snri"},{description:"The Signal-to-Distortion ratio is the relationship between the target signal and the sum of noise, interference, and artifact errors",id:"sdri"}],models:[{description:"A speech enhancement model.",id:"ResembleAI/resemble-enhance"},{description:"A model that can change the voice in a speech recording.",id:"microsoft/speecht5_vc"}],spaces:[{description:"An application for speech separation.",id:"younver/speechbrain-speech-separation"},{description:"An application for audio style transfer.",id:"nakas/audio-diffusion_style_transfer"}],summary:"Audio-to-Audio is a family of tasks in which the input is an audio and the output is one or multiple generated audios. Some example tasks are speech enhancement and source separation.",widgetModels:["speechbrain/sepformer-wham"],youtubeId:"iohj7nCCYoM"},taskData$E={datasets:[{description:"31,175 hours of multilingual audio-text dataset in 108 languages.",id:"mozilla-foundation/common_voice_17_0"},{description:"Multilingual and diverse audio dataset with 101k hours of audio.",id:"amphion/Emilia-Dataset"},{description:"A dataset with 44.6k hours of English speaker data and 6k hours of other language speakers.",id:"parler-tts/mls_eng"},{description:"A multilingual audio dataset with 370K hours of audio.",id:"espnet/yodas"}],demo:{inputs:[{filename:"input.flac",type:"audio"}],outputs:[{label:"Transcript",content:"Going along slushy country roads and speaking to damp audiences in...",type:"text"}]},metrics:[{description:"",id:"wer"},{description:"",id:"cer"}],models:[{description:"A powerful ASR model by OpenAI.",id:"openai/whisper-large-v3"},{description:"A good generic speech model by MetaAI for fine-tuning.",id:"facebook/w2v-bert-2.0"},{description:"An end-to-end model that performs ASR and Speech Translation by MetaAI.",id:"facebook/seamless-m4t-v2-large"},{description:"A powerful multilingual ASR and Speech Translation model by Nvidia.",id:"nvidia/canary-1b"},{description:"Powerful speaker diarization model.",id:"pyannote/speaker-diarization-3.1"}],spaces:[{description:"A powerful general-purpose speech recognition application.",id:"hf-audio/whisper-large-v3"},{description:"Latest ASR model from Useful Sensors.",id:"mrfakename/Moonshinex"},{description:"A high quality speech and text translation model by Meta.",id:"facebook/seamless_m4t"},{description:"A powerful multilingual ASR and Speech Translation model by Nvidia",id:"nvidia/canary-1b"}],summary:"Automatic Speech Recognition (ASR), also known as Speech to Text (STT), is the task of transcribing a given audio to text. It has many applications, such as voice user interfaces.",widgetModels:["openai/whisper-large-v3"],youtubeId:"TksaY_FDgnk"},taskData$D={datasets:[{description:"Largest document understanding dataset.",id:"HuggingFaceM4/Docmatix"},{description:"Dataset from the 2020 DocVQA challenge. The documents are taken from the UCSF Industry Documents Library.",id:"eliolio/docvqa"}],demo:{inputs:[{label:"Question",content:"What is the idea behind the consumer relations efficiency team?",type:"text"},{filename:"document-question-answering-input.png",type:"img"}],outputs:[{label:"Answer",content:"Balance cost efficiency with quality customer service",type:"text"}]},metrics:[{description:"The evaluation metric for the DocVQA challenge is the Average Normalized Levenshtein Similarity (ANLS). This metric is flexible to character regognition errors and compares the predicted answer with the ground truth answer.",id:"anls"},{description:"Exact Match is a metric based on the strict character match of the predicted answer and the right answer. For answers predicted correctly, the Exact Match will be 1. Even if only one character is different, Exact Match will be 0",id:"exact-match"}],models:[{description:"A robust document question answering model.",id:"impira/layoutlm-document-qa"},{description:"A document question answering model specialized in invoices.",id:"impira/layoutlm-invoices"},{description:"A special model for OCR-free document question answering.",id:"microsoft/udop-large"},{description:"A powerful model for document question answering.",id:"google/pix2struct-docvqa-large"}],spaces:[{description:"A robust document question answering application.",id:"impira/docquery"},{description:"An application that can answer questions from invoices.",id:"impira/invoices"},{description:"An application to compare different document question answering models.",id:"merve/compare_docvqa_models"}],summary:"Document Question Answering (also known as Document Visual Question Answering) is the task of answering questions on document images. Document question answering models take a (document, question) pair as input and return an answer in natural language. Models usually rely on multi-modal features, combining text, position of words (bounding-boxes) and image.",widgetModels:["impira/layoutlm-invoices"],youtubeId:""},taskData$C={datasets:[{description:"Wikipedia dataset containing cleaned articles of all languages. Can be used to train `feature-extraction` models.",id:"wikipedia"}],demo:{inputs:[{label:"Input",content:"India, officially the Republic of India, is a country in South Asia.",type:"text"}],outputs:[{table:[["Dimension 1","Dimension 2","Dimension 3"],["2.583383083343506","2.757075071334839","0.9023529887199402"],["8.29393482208252","1.1071064472198486","2.03399395942688"],["-0.7754912972450256","-1.647324562072754","-0.6113331913948059"],["0.07087723910808563","1.5942802429199219","1.4610432386398315"]],type:"tabular"}]},metrics:[],models:[{description:"A powerful feature extraction model for natural language processing tasks.",id:"thenlper/gte-large"},{description:"A strong feature extraction model for retrieval.",id:"Alibaba-NLP/gte-Qwen1.5-7B-instruct"}],spaces:[{description:"A leaderboard to rank text feature extraction models based on a benchmark.",id:"mteb/leaderboard"},{description:"A leaderboard to rank best feature extraction models based on human feedback.",id:"mteb/arena"}],summary:"Feature extraction is the task of extracting features learnt in a model.",widgetModels:["facebook/bart-base"]},taskData$B={datasets:[{description:"A common dataset that is used to train models for many languages.",id:"wikipedia"},{description:"A large English dataset with text crawled from the web.",id:"c4"}],demo:{inputs:[{label:"Input",content:"The <mask> barked at me",type:"text"}],outputs:[{type:"chart",data:[{label:"wolf",score:.487},{label:"dog",score:.061},{label:"cat",score:.058},{label:"fox",score:.047},{label:"squirrel",score:.025}]}]},metrics:[{description:"Cross Entropy is a metric that calculates the difference between two probability distributions. Each probability distribution is the distribution of predicted words",id:"cross_entropy"},{description:"Perplexity is the exponential of the cross-entropy loss. It evaluates the probabilities assigned to the next word by the model. Lower perplexity indicates better performance",id:"perplexity"}],models:[{description:"State-of-the-art masked language model.",id:"answerdotai/ModernBERT-large"},{description:"A multilingual model trained on 100 languages.",id:"FacebookAI/xlm-roberta-base"}],spaces:[],summary:"Masked language modeling is the task of masking some of the words in a sentence and predicting which words should replace those masks. These models are useful when we want to get a statistical understanding of the language in which the model is trained in.",widgetModels:["distilroberta-base"],youtubeId:"mqElG5QJWUg"},taskData$A={datasets:[{description:"Benchmark dataset used for image classification with images that belong to 100 classes.",id:"cifar100"},{description:"Dataset consisting of images of garments.",id:"fashion_mnist"}],demo:{inputs:[{filename:"image-classification-input.jpeg",type:"img"}],outputs:[{type:"chart",data:[{label:"Egyptian cat",score:.514},{label:"Tabby cat",score:.193},{label:"Tiger cat",score:.068}]}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"A strong image classification model.",id:"google/vit-base-patch16-224"},{description:"A robust image classification model.",id:"facebook/deit-base-distilled-patch16-224"},{description:"A strong image classification model.",id:"facebook/convnext-large-224"}],spaces:[{description:"A leaderboard to evaluate different image classification models.",id:"timm/leaderboard"}],summary:"Image classification is the task of assigning a label or class to an entire image. Images are expected to have only one class for each image. Image classification models take an image as input and return a prediction about which class the image belongs to.",widgetModels:["google/vit-base-patch16-224"],youtubeId:"tjAIM7BOYhw"},taskData$z={datasets:[{description:"ImageNet-1K is a image classification dataset in which images are used to train image-feature-extraction models.",id:"imagenet-1k"}],demo:{inputs:[{filename:"mask-generation-input.png",type:"img"}],outputs:[{table:[["Dimension 1","Dimension 2","Dimension 3"],["0.21236686408519745","1.0919708013534546","0.8512550592422485"],["0.809657871723175","-0.18544459342956543","-0.7851548194885254"],["1.3103108406066895","-0.2479034662246704","-0.9107287526130676"],["1.8536205291748047","-0.36419737339019775","0.09717650711536407"]],type:"tabular"}]},metrics:[],models:[{description:"A powerful image feature extraction model.",id:"timm/vit_large_patch14_dinov2.lvd142m"},{description:"A strong image feature extraction model.",id:"nvidia/MambaVision-T-1K"},{description:"A robust image feature extraction model.",id:"facebook/dino-vitb16"},{description:"Cutting-edge image feature extraction model.",id:"apple/aimv2-large-patch14-336-distilled"},{description:"Strong image feature extraction model that can be used on images and documents.",id:"OpenGVLab/InternViT-6B-448px-V1-2"}],spaces:[{description:"A leaderboard to evaluate different image-feature-extraction models on classification performances",id:"timm/leaderboard"}],summary:"Image feature extraction is the task of extracting features learnt in a computer vision model.",widgetModels:[]},taskData$y={datasets:[{description:"Synthetic dataset, for image relighting",id:"VIDIT"},{description:"Multiple images of celebrities, used for facial expression translation",id:"huggan/CelebA-faces"},{description:"12M image-caption pairs.",id:"Spawning/PD12M"}],demo:{inputs:[{filename:"image-to-image-input.jpeg",type:"img"}],outputs:[{filename:"image-to-image-output.png",type:"img"}]},isPlaceholder:!1,metrics:[{description:"Peak Signal to Noise Ratio (PSNR) is an approximation of the human perception, considering the ratio of the absolute intensity with respect to the variations. Measured in dB, a high value indicates a high fidelity.",id:"PSNR"},{description:"Structural Similarity Index (SSIM) is a perceptual metric which compares the luminance, contrast and structure of two images. The values of SSIM range between -1 and 1, and higher values indicate closer resemblance to the original image.",id:"SSIM"},{description:"Inception Score (IS) is an analysis of the labels predicted by an image classification model when presented with a sample of the generated images.",id:"IS"}],models:[{description:"An image-to-image model to improve image resolution.",id:"fal/AuraSR-v2"},{description:"A model that increases the resolution of an image.",id:"keras-io/super-resolution"},{description:"A model for applying edits to images through image controls.",id:"Yuanshi/OminiControl"},{description:"A model that generates images based on segments in the input image and the text prompt.",id:"mfidabel/controlnet-segment-anything"},{description:"Strong model for inpainting and outpainting.",id:"black-forest-labs/FLUX.1-Fill-dev"},{description:"Strong model for image editing using depth maps.",id:"black-forest-labs/FLUX.1-Depth-dev-lora"}],spaces:[{description:"Image enhancer application for low light.",id:"keras-io/low-light-image-enhancement"},{description:"Style transfer application.",id:"keras-io/neural-style-transfer"},{description:"An application that generates images based on segment control.",id:"mfidabel/controlnet-segment-anything"},{description:"Image generation application that takes image control and text prompt.",id:"hysts/ControlNet"},{description:"Colorize any image using this app.",id:"ioclab/brightness-controlnet"},{description:"Edit images with instructions.",id:"timbrooks/instruct-pix2pix"}],summary:"Image-to-image is the task of transforming an input image through a variety of possible manipulations and enhancements, such as super-resolution, image inpainting, colorization, and more.",widgetModels:["stabilityai/stable-diffusion-2-inpainting"],youtubeId:""},taskData$x={datasets:[{description:"Dataset from 12M image-text of Reddit",id:"red_caps"},{description:"Dataset from 3.3M images of Google",id:"datasets/conceptual_captions"}],demo:{inputs:[{filename:"savanna.jpg",type:"img"}],outputs:[{label:"Detailed description",content:"a herd of giraffes and zebras grazing in a field",type:"text"}]},metrics:[],models:[{description:"A robust image captioning model.",id:"Salesforce/blip2-opt-2.7b"},{description:"A powerful and accurate image-to-text model that can also localize concepts in images.",id:"microsoft/kosmos-2-patch14-224"},{description:"A strong optical character recognition model.",id:"facebook/nougat-base"},{description:"A powerful model that lets you have a conversation with the image.",id:"llava-hf/llava-1.5-7b-hf"}],spaces:[{description:"An application that compares various image captioning models.",id:"nielsr/comparing-captioning-models"},{description:"A robust image captioning application.",id:"flax-community/image-captioning"},{description:"An application that transcribes handwritings into text.",id:"nielsr/TrOCR-handwritten"},{description:"An application that can caption images and answer questions about a given image.",id:"Salesforce/BLIP"},{description:"An application that can caption images and answer questions with a conversational agent.",id:"Salesforce/BLIP2"},{description:"An image captioning application that demonstrates the effect of noise on captions.",id:"johko/capdec-image-captioning"}],summary:"Image to text models output a text from a given image. Image captioning or optical character recognition can be considered as the most common applications of image to text.",widgetModels:["Salesforce/blip-image-captioning-large"],youtubeId:""},taskData$w={datasets:[{description:"Instructions composed of image and text.",id:"liuhaotian/LLaVA-Instruct-150K"},{description:"Collection of image-text pairs on scientific topics.",id:"DAMO-NLP-SG/multimodal_textbook"},{description:"A collection of datasets made for model fine-tuning.",id:"HuggingFaceM4/the_cauldron"},{description:"Screenshots of websites with their HTML/CSS codes.",id:"HuggingFaceM4/WebSight"}],demo:{inputs:[{filename:"image-text-to-text-input.png",type:"img"},{label:"Text Prompt",content:"Describe the position of the bee in detail.",type:"text"}],outputs:[{label:"Answer",content:"The bee is sitting on a pink flower, surrounded by other flowers. The bee is positioned in the center of the flower, with its head and front legs sticking out.",type:"text"}]},metrics:[],models:[{description:"Small and efficient yet powerful vision language model.",id:"HuggingFaceTB/SmolVLM-Instruct"},{description:"A screenshot understanding model used to control computers.",id:"microsoft/OmniParser-v2.0"},{description:"Cutting-edge vision language model.",id:"allenai/Molmo-7B-D-0924"},{description:"Small yet powerful model.",id:"vikhyatk/moondream2"},{description:"Strong image-text-to-text model.",id:"Qwen/Qwen2.5-VL-7B-Instruct"},{description:"Image-text-to-text model with agentic capabilities.",id:"microsoft/Magma-8B"},{description:"Strong image-text-to-text model focused on documents.",id:"allenai/olmOCR-7B-0225-preview"},{description:"Small yet strong image-text-to-text model.",id:"ibm-granite/granite-vision-3.2-2b"}],spaces:[{description:"Leaderboard to evaluate vision language models.",id:"opencompass/open_vlm_leaderboard"},{description:"Vision language models arena, where models are ranked by votes of users.",id:"WildVision/vision-arena"},{description:"Powerful vision-language model assistant.",id:"akhaliq/Molmo-7B-D-0924"},{description:"Powerful vision language assistant that can understand multiple images.",id:"HuggingFaceTB/SmolVLM2"},{description:"An application for chatting with an image-text-to-text model.",id:"GanymedeNil/Qwen2-VL-7B"},{description:"An application that parses screenshots into actions.",id:"showlab/ShowUI"},{description:"An application that detects gaze.",id:"moondream/gaze-demo"}],summary:"Image-text-to-text models take in an image and text prompt and output text. These models are also called vision-language models, or VLMs. The difference from image-to-text models is that these models take an additional text input, not restricting the model to certain use cases like image captioning, and may also be trained to accept a conversation as input.",widgetModels:["Qwen/Qwen2-VL-7B-Instruct"],youtubeId:"IoGaGfU1CIg"},taskData$v={datasets:[{description:"Scene segmentation dataset.",id:"scene_parse_150"}],demo:{inputs:[{filename:"image-segmentation-input.jpeg",type:"img"}],outputs:[{filename:"image-segmentation-output.png",type:"img"}]},metrics:[{description:"Average Precision (AP) is the Area Under the PR Curve (AUC-PR). It is calculated for each semantic class separately",id:"Average Precision"},{description:"Mean Average Precision (mAP) is the overall average of the AP values",id:"Mean Average Precision"},{description:"Intersection over Union (IoU) is the overlap of segmentation masks. Mean IoU is the average of the IoU of all semantic classes",id:"Mean Intersection over Union"},{description:"AP is the Average Precision at the IoU threshold of a  value, for example, AP50 and AP75",id:"AP"}],models:[{description:"Solid semantic segmentation model trained on ADE20k.",id:"openmmlab/upernet-convnext-small"},{description:"Background removal model.",id:"briaai/RMBG-1.4"},{description:"A multipurpose image segmentation model for high resolution images.",id:"ZhengPeng7/BiRefNet"},{description:"Powerful human-centric image segmentation model.",id:"facebook/sapiens-seg-1b"},{description:"Panoptic segmentation model trained on the COCO (common objects) dataset.",id:"facebook/mask2former-swin-large-coco-panoptic"}],spaces:[{description:"A semantic segmentation application that can predict unseen instances out of the box.",id:"facebook/ov-seg"},{description:"One of the strongest segmentation applications.",id:"jbrinkma/segment-anything"},{description:"A human-centric segmentation model.",id:"facebook/sapiens-pose"},{description:"An instance segmentation application to predict neuronal cell types from microscopy images.",id:"rashmi/sartorius-cell-instance-segmentation"},{description:"An application that segments videos.",id:"ArtGAN/Segment-Anything-Video"},{description:"An panoptic segmentation application built for outdoor environments.",id:"segments/panoptic-segment-anything"}],summary:"Image Segmentation divides an image into segments where each pixel in the image is mapped to an object. This task has multiple variants such as instance segmentation, panoptic segmentation and semantic segmentation.",widgetModels:["nvidia/segformer-b0-finetuned-ade-512-512"],youtubeId:"dKE8SIt9C-w"},taskData$u={datasets:[{description:"A benchmark dataset for reference image controlled video generation.",id:"ali-vilab/VACE-Benchmark"},{description:"A dataset of video generation style preferences.",id:"Rapidata/sora-video-generation-style-likert-scoring"},{description:"A dataset with videos and captions throughout the videos.",id:"BestWishYsh/ChronoMagic"}],demo:{inputs:[{filename:"image-to-video-input.jpg",type:"img"},{label:"Optional Text Prompt",content:"This penguin is dancing",type:"text"}],outputs:[{filename:"image-to-video-output.gif",type:"img"}]},metrics:[{description:"Frchet Video Distance (FVD) measures the perceptual similarity between the distributions of generated videos and a set of real videos, assessing overall visual quality and temporal coherence of the video generated from an input image.",id:"fvd"},{description:"CLIP Score measures the semantic similarity between a textual prompt (if provided alongside the input image) and the generated video frames. It evaluates how well the video's generated content and motion align with the textual description, conditioned on the initial image.",id:"clip_score"},{description:"First Frame Fidelity, often measured using LPIPS (Learned Perceptual Image Patch Similarity), PSNR, or SSIM, quantifies how closely the first frame of the generated video matches the input conditioning image.",id:"lpips"},{description:"Identity Preservation Score measures the consistency of identity (e.g., a person's face or a specific object's characteristics) between the input image and throughout the generated video frames, often calculated using features from specialized models like face recognition (e.g., ArcFace) or re-identification models.",id:"identity_preservation"},{description:"Motion Score evaluates the quality, realism, and temporal consistency of motion in the video generated from a static image. This can be based on optical flow analysis (e.g., smoothness, magnitude), consistency of object trajectories, or specific motion plausibility assessments.",id:"motion_score"}],models:[{description:"LTX-Video, a 13B parameter model for high quality video generation",id:"Lightricks/LTX-Video-0.9.7-dev"},{description:"A 14B parameter model for reference image controlled video generation",id:"Wan-AI/Wan2.1-VACE-14B"},{description:"An image-to-video generation model using FramePack F1 methodology with Hunyuan-DiT architecture",id:"lllyasviel/FramePack_F1_I2V_HY_20250503"},{description:"A distilled version of the LTX-Video-0.9.7-dev model for faster inference",id:"Lightricks/LTX-Video-0.9.7-distilled"},{description:"An image-to-video generation model by Skywork AI, 14B parameters, producing 720p videos.",id:"Skywork/SkyReels-V2-I2V-14B-720P"},{description:"Image-to-video variant of Tencent's HunyuanVideo.",id:"tencent/HunyuanVideo-I2V"},{description:"A 14B parameter model for 720p image-to-video generation by Wan-AI.",id:"Wan-AI/Wan2.1-I2V-14B-720P"},{description:"A Diffusers version of the Wan2.1-I2V-14B-720P model for 720p image-to-video generation.",id:"Wan-AI/Wan2.1-I2V-14B-720P-Diffusers"}],spaces:[{description:"An application to generate videos fast.",id:"Lightricks/ltx-video-distilled"},{description:"Generate videos with the FramePack-F1",id:"linoyts/FramePack-F1"},{description:"Generate videos with the FramePack",id:"lisonallen/framepack-i2v"},{description:"Wan2.1 with CausVid LoRA",id:"multimodalart/wan2-1-fast"},{description:"A demo for Stable Video Diffusion",id:"multimodalart/stable-video-diffusion"}],summary:"Image-to-video models take a still image as input and generate a video. These models can be guided by text prompts to influence the content and style of the output video.",widgetModels:[],youtubeId:void 0},taskData$t={datasets:[{description:"Widely used benchmark dataset for multiple Vision tasks.",id:"merve/coco2017"},{description:"Medical Imaging dataset of the Human Brain for segmentation and mask generating tasks",id:"rocky93/BraTS_segmentation"}],demo:{inputs:[{filename:"mask-generation-input.png",type:"img"}],outputs:[{filename:"mask-generation-output.png",type:"img"}]},metrics:[{description:"IoU is used to measure the overlap between predicted mask and the ground truth mask.",id:"Intersection over Union (IoU)"}],models:[{description:"Small yet powerful mask generation model.",id:"Zigeng/SlimSAM-uniform-50"},{description:"Very strong mask generation model.",id:"facebook/sam2-hiera-large"}],spaces:[{description:"An application that combines a mask generation model with a zero-shot object detection model for text-guided image segmentation.",id:"merve/OWLSAM2"},{description:"An application that compares the performance of a large and a small mask generation model.",id:"merve/slimsam"},{description:"An application based on an improved mask generation model.",id:"SkalskiP/segment-anything-model-2"},{description:"An application to remove objects from videos using mask generation models.",id:"SkalskiP/SAM_and_ProPainter"}],summary:"Mask generation is the task of generating masks that identify a specific object or region of interest in a given image. Masks are often used in segmentation tasks, where they provide a precise way to isolate the object of interest for further processing or analysis.",widgetModels:[],youtubeId:""},taskData$s={datasets:[{description:"Widely used benchmark dataset for multiple vision tasks.",id:"merve/coco2017"},{description:"Multi-task computer vision benchmark.",id:"merve/pascal-voc"}],demo:{inputs:[{filename:"object-detection-input.jpg",type:"img"}],outputs:[{filename:"object-detection-output.jpg",type:"img"}]},metrics:[{description:"The Average Precision (AP) metric is the Area Under the PR Curve (AUC-PR). It is calculated for each class separately",id:"Average Precision"},{description:"The Mean Average Precision (mAP) metric is the overall average of the AP values",id:"Mean Average Precision"},{description:"The AP metric is the Average Precision at the IoU threshold of a  value, for example, AP50 and AP75",id:"AP"}],models:[{description:"Solid object detection model pre-trained on the COCO 2017 dataset.",id:"facebook/detr-resnet-50"},{description:"Accurate object detection model.",id:"IDEA-Research/dab-detr-resnet-50"},{description:"Fast and accurate object detection model.",id:"PekingU/rtdetr_v2_r50vd"},{description:"Object detection model for low-lying objects.",id:"StephanST/WALDO30"}],spaces:[{description:"Leaderboard to compare various object detection models across several metrics.",id:"hf-vision/object_detection_leaderboard"},{description:"An application that contains various object detection models to try from.",id:"Gradio-Blocks/Object-Detection-With-DETR-and-YOLOS"},{description:"A cutting-edge object detection application.",id:"sunsmarterjieleaf/yolov12"},{description:"An object tracking, segmentation and inpainting application.",id:"VIPLab/Track-Anything"},{description:"Very fast object tracking application based on object detection.",id:"merve/RT-DETR-tracking-coco"}],summary:"Object Detection models allow users to identify objects of certain defined classes. Object detection models receive an image as input and output the images with bounding boxes and labels on detected objects.",widgetModels:["facebook/detr-resnet-50"],youtubeId:"WdAeKSOpxhw"},taskData$r={datasets:[{description:"NYU Depth V2 Dataset: Video dataset containing both RGB and depth sensor data.",id:"sayakpaul/nyu_depth_v2"},{description:"Monocular depth estimation benchmark based without noise and errors.",id:"depth-anything/DA-2K"}],demo:{inputs:[{filename:"depth-estimation-input.jpg",type:"img"}],outputs:[{filename:"depth-estimation-output.png",type:"img"}]},metrics:[],models:[{description:"Cutting-edge depth estimation model.",id:"depth-anything/Depth-Anything-V2-Large"},{description:"A strong monocular depth estimation model.",id:"jingheya/lotus-depth-g-v1-0"},{description:"A depth estimation model that predicts depth in videos.",id:"tencent/DepthCrafter"},{description:"A robust depth estimation model.",id:"apple/DepthPro-hf"}],spaces:[{description:"An application that predicts the depth of an image and then reconstruct the 3D model as voxels.",id:"radames/dpt-depth-estimation-3d-voxels"},{description:"An application for bleeding-edge depth estimation.",id:"akhaliq/depth-pro"},{description:"An application on cutting-edge depth estimation in videos.",id:"tencent/DepthCrafter"},{description:"A human-centric depth estimation application.",id:"facebook/sapiens-depth"}],summary:"Depth estimation is the task of predicting depth of the objects present in an image.",widgetModels:[""],youtubeId:""},taskData$q={datasets:[],demo:{inputs:[],outputs:[]},isPlaceholder:!0,metrics:[],models:[],spaces:[],summary:"",widgetModels:[],youtubeId:void 0,canonicalId:void 0},taskData$p={datasets:[{description:"A curation of widely used datasets for Data Driven Deep Reinforcement Learning (D4RL)",id:"edbeeching/decision_transformer_gym_replay"}],demo:{inputs:[{label:"State",content:"Red traffic light, pedestrians are about to pass.",type:"text"}],outputs:[{label:"Action",content:"Stop the car.",type:"text"},{label:"Next State",content:"Yellow light, pedestrians have crossed.",type:"text"}]},metrics:[{description:"Accumulated reward across all time steps discounted by a factor that ranges between 0 and 1 and determines how much the agent optimizes for future relative to immediate rewards. Measures how good is the policy ultimately found by a given algorithm considering uncertainty over the future.",id:"Discounted Total Reward"},{description:"Average return obtained after running the policy for a certain number of evaluation episodes. As opposed to total reward, mean reward considers how much reward a given algorithm receives while learning.",id:"Mean Reward"},{description:"Measures how good a given algorithm is after a predefined time. Some algorithms may be guaranteed to converge to optimal behavior across many time steps. However, an agent that reaches an acceptable level of optimality after a given time horizon may be preferable to one that ultimately reaches optimality but takes a long time.",id:"Level of Performance After Some Time"}],models:[{description:"A Reinforcement Learning model trained on expert data from the Gym Hopper environment",id:"edbeeching/decision-transformer-gym-hopper-expert"},{description:"A PPO agent playing seals/CartPole-v0 using the stable-baselines3 library and the RL Zoo.",id:"HumanCompatibleAI/ppo-seals-CartPole-v0"}],spaces:[{description:"An application for a cute puppy agent learning to catch a stick.",id:"ThomasSimonini/Huggy"},{description:"An application to play Snowball Fight with a reinforcement learning agent.",id:"ThomasSimonini/SnowballFight"}],summary:"Reinforcement learning is the computational approach of learning from action by interacting with an environment through trial and error and receiving rewards (negative or positive) as feedback",widgetModels:[],youtubeId:"q0BiUn5LiBc"},taskData$o={datasets:[{description:"A famous question answering dataset based on English articles from Wikipedia.",id:"squad_v2"},{description:"A dataset of aggregated anonymized actual queries issued to the Google search engine.",id:"natural_questions"}],demo:{inputs:[{label:"Question",content:"Which name is also used to describe the Amazon rainforest in English?",type:"text"},{label:"Context",content:"The Amazon rainforest, also known in English as Amazonia or the Amazon Jungle",type:"text"}],outputs:[{label:"Answer",content:"Amazonia",type:"text"}]},metrics:[{description:"Exact Match is a metric based on the strict character match of the predicted answer and the right answer. For answers predicted correctly, the Exact Match will be 1. Even if only one character is different, Exact Match will be 0",id:"exact-match"},{description:" The F1-Score metric is useful if we value both false positives and false negatives equally. The F1-Score is calculated on each word in the predicted sequence against the correct answer",id:"f1"}],models:[{description:"A robust baseline model for most question answering domains.",id:"deepset/roberta-base-squad2"},{description:"Small yet robust model that can answer questions.",id:"distilbert/distilbert-base-cased-distilled-squad"},{description:"A special model that can answer questions from tables.",id:"google/tapas-base-finetuned-wtq"}],spaces:[{description:"An application that can answer a long question from Wikipedia.",id:"deepset/wikipedia-assistant"}],summary:"Question Answering models can retrieve the answer to a question from a given text, which is useful for searching for an answer in a document. Some question answering models can generate answers without context!",widgetModels:["deepset/roberta-base-squad2"],youtubeId:"ajPx5LwJD-I"},taskData$n={datasets:[{description:"Bing queries with relevant passages from various web sources.",id:"microsoft/ms_marco"}],demo:{inputs:[{label:"Source sentence",content:"Machine learning is so easy.",type:"text"},{label:"Sentences to compare to",content:"Deep learning is so straightforward.",type:"text"},{label:"",content:"This is so difficult, like rocket science.",type:"text"},{label:"",content:"I can't believe how much I struggled with this.",type:"text"}],outputs:[{type:"chart",data:[{label:"Deep learning is so straightforward.",score:.623},{label:"This is so difficult, like rocket science.",score:.413},{label:"I can't believe how much I struggled with this.",score:.256}]}]},metrics:[{description:"Reciprocal Rank is a measure used to rank the relevancy of documents given a set of documents. Reciprocal Rank is the reciprocal of the rank of the document retrieved, meaning, if the rank is 3, the Reciprocal Rank is 0.33. If the rank is 1, the Reciprocal Rank is 1",id:"Mean Reciprocal Rank"},{description:"The similarity of the embeddings is evaluated mainly on cosine similarity. It is calculated as the cosine of the angle between two vectors. It is particularly useful when your texts are not the same length",id:"Cosine Similarity"}],models:[{description:"This model works well for sentences and paragraphs and can be used for clustering/grouping and semantic searches.",id:"sentence-transformers/all-mpnet-base-v2"},{description:"A multilingual robust sentence similarity model.",id:"BAAI/bge-m3"},{description:"A robust sentence similarity model.",id:"HIT-TMG/KaLM-embedding-multilingual-mini-instruct-v1.5"}],spaces:[{description:"An application that leverages sentence similarity to answer questions from YouTube videos.",id:"Gradio-Blocks/Ask_Questions_To_YouTube_Videos"},{description:"An application that retrieves relevant PubMed abstracts for a given online article which can be used as further references.",id:"Gradio-Blocks/pubmed-abstract-retriever"},{description:"An application that leverages sentence similarity to summarize text.",id:"nickmuchi/article-text-summarizer"},{description:"A guide that explains how Sentence Transformers can be used for semantic search.",id:"sentence-transformers/Sentence_Transformers_for_semantic_search"}],summary:"Sentence Similarity is the task of determining how similar two texts are. Sentence similarity models convert input texts into vectors (embeddings) that capture semantic information and calculate how close (similar) they are between them. This task is particularly useful for information retrieval and clustering/grouping.",widgetModels:["BAAI/bge-small-en-v1.5"],youtubeId:"VCZq5AkbNEU"},taskData$m={canonicalId:"text2text-generation",datasets:[{description:"News articles in five different languages along with their summaries. Widely used for benchmarking multilingual summarization models.",id:"mlsum"},{description:"English conversations and their summaries. Useful for benchmarking conversational agents.",id:"samsum"}],demo:{inputs:[{label:"Input",content:"The tower is 324 metres (1,063 ft) tall, about the same height as an 81-storey building, and the tallest structure in Paris. Its base is square, measuring 125 metres (410 ft) on each side. It was the first structure to reach a height of 300 metres. Excluding transmitters, the Eiffel Tower is the second tallest free-standing structure in France after the Millau Viaduct.",type:"text"}],outputs:[{label:"Output",content:"The tower is 324 metres (1,063 ft) tall, about the same height as an 81-storey building. It was the first structure to reach a height of 300 metres.",type:"text"}]},metrics:[{description:"The generated sequence is compared against its summary, and the overlap of tokens are counted. ROUGE-N refers to overlap of N subsequent tokens, ROUGE-1 refers to overlap of single tokens and ROUGE-2 is the overlap of two subsequent tokens.",id:"rouge"}],models:[{description:"A strong summarization model trained on English news articles. Excels at generating factual summaries.",id:"facebook/bart-large-cnn"},{description:"A summarization model trained on medical articles.",id:"Falconsai/medical_summarization"}],spaces:[{description:"An application that can summarize long paragraphs.",id:"pszemraj/summarize-long-text"},{description:"A much needed summarization application for terms and conditions.",id:"ml6team/distilbart-tos-summarizer-tosdr"},{description:"An application that summarizes long documents.",id:"pszemraj/document-summarization"},{description:"An application that can detect errors in abstractive summarization.",id:"ml6team/post-processing-summarization"}],summary:"Summarization is the task of producing a shorter version of a document while preserving its important information. Some models can extract text from the original input, while other models can generate entirely new text.",widgetModels:["facebook/bart-large-cnn"],youtubeId:"yHnr5Dk2zCI"},taskData$l={datasets:[{description:"The WikiTableQuestions dataset is a large-scale dataset for the task of question answering on semi-structured tables.",id:"wikitablequestions"},{description:"WikiSQL is a dataset of 80654 hand-annotated examples of questions and SQL queries distributed across 24241 tables from Wikipedia.",id:"wikisql"}],demo:{inputs:[{table:[["Rank","Name","No.of reigns","Combined days"],["1","lou Thesz","3","3749"],["2","Ric Flair","8","3103"],["3","Harley Race","7","1799"]],type:"tabular"},{label:"Question",content:"What is the number of reigns for Harley Race?",type:"text"}],outputs:[{label:"Result",content:"7",type:"text"}]},metrics:[{description:"Checks whether the predicted answer(s) is the same as the ground-truth answer(s).",id:"Denotation Accuracy"}],models:[{description:"A table question answering model that is capable of neural SQL execution, i.e., employ TAPEX to execute a SQL query on a given table.",id:"microsoft/tapex-base"},{description:"A robust table question answering model.",id:"google/tapas-base-finetuned-wtq"}],spaces:[{description:"An application that answers questions based on table CSV files.",id:"katanaml/table-query"}],summary:"Table Question Answering (Table QA) is the answering a question about an information on a given table.",widgetModels:["google/tapas-base-finetuned-wtq"]},taskData$k={datasets:[{description:"A comprehensive curation of datasets covering all benchmarks.",id:"inria-soda/tabular-benchmark"}],demo:{inputs:[{table:[["Glucose","Blood Pressure ","Skin Thickness","Insulin","BMI"],["148","72","35","0","33.6"],["150","50","30","0","35.1"],["141","60","29","1","39.2"]],type:"tabular"}],outputs:[{table:[["Diabetes"],["1"],["1"],["0"]],type:"tabular"}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"Breast cancer prediction model based on decision trees.",id:"scikit-learn/cancer-prediction-trees"}],spaces:[{description:"An application that can predict defective products on a production line.",id:"scikit-learn/tabular-playground"},{description:"An application that compares various tabular classification techniques on different datasets.",id:"scikit-learn/classification"}],summary:"Tabular classification is the task of classifying a target category (a group) based on set of attributes.",widgetModels:["scikit-learn/tabular-playground"],youtubeId:""},taskData$j={datasets:[{description:"A comprehensive curation of datasets covering all benchmarks.",id:"inria-soda/tabular-benchmark"}],demo:{inputs:[{table:[["Car Name","Horsepower","Weight"],["ford torino","140","3,449"],["amc hornet","97","2,774"],["toyota corolla","65","1,773"]],type:"tabular"}],outputs:[{table:[["MPG (miles per gallon)"],["17"],["18"],["31"]],type:"tabular"}]},metrics:[{description:"",id:"mse"},{description:"Coefficient of determination (or R-squared) is a measure of how well the model fits the data. Higher R-squared is considered a better fit.",id:"r-squared"}],models:[{description:"Fish weight prediction based on length measurements and species.",id:"scikit-learn/Fish-Weight"}],spaces:[{description:"An application that can predict weight of a fish based on set of attributes.",id:"scikit-learn/fish-weight-prediction"}],summary:"Tabular regression is the task of predicting a numerical value given a set of attributes.",widgetModels:["scikit-learn/Fish-Weight"],youtubeId:""},taskData$i={datasets:[{description:"RedCaps is a large-scale dataset of 12M image-text pairs collected from Reddit.",id:"red_caps"},{description:"Conceptual Captions is a dataset consisting of ~3.3M images annotated with captions.",id:"conceptual_captions"},{description:"12M image-caption pairs.",id:"Spawning/PD12M"}],demo:{inputs:[{label:"Input",content:"A city above clouds, pastel colors, Victorian style",type:"text"}],outputs:[{filename:"image.jpeg",type:"img"}]},metrics:[{description:"The Inception Score (IS) measure assesses diversity and meaningfulness. It uses a generated image sample to predict its label. A higher score signifies more diverse and meaningful images.",id:"IS"},{description:"The Frchet Inception Distance (FID) calculates the distance between distributions between synthetic and real samples. A lower FID score indicates better similarity between the distributions of real and generated images.",id:"FID"},{description:"R-precision assesses how the generated image aligns with the provided text description. It uses the generated images as queries to retrieve relevant text descriptions. The top 'r' relevant descriptions are selected and used to calculate R-precision as r/R, where 'R' is the number of ground truth descriptions associated with the generated images. A higher R-precision value indicates a better model.",id:"R-Precision"}],models:[{description:"One of the most powerful image generation models that can generate realistic outputs.",id:"black-forest-labs/FLUX.1-dev"},{description:"A powerful yet fast image generation model.",id:"latent-consistency/lcm-lora-sdxl"},{description:"Text-to-image model for photorealistic generation.",id:"Kwai-Kolors/Kolors"},{description:"A powerful text-to-image model.",id:"stabilityai/stable-diffusion-3-medium-diffusers"}],spaces:[{description:"A powerful text-to-image application.",id:"stabilityai/stable-diffusion-3-medium"},{description:"A text-to-image application to generate comics.",id:"jbilcke-hf/ai-comic-factory"},{description:"An application to match multiple custom image generation models.",id:"multimodalart/flux-lora-lab"},{description:"A powerful yet very fast image generation application.",id:"latent-consistency/lcm-lora-for-sdxl"},{description:"A gallery to explore various text-to-image models.",id:"multimodalart/LoraTheExplorer"},{description:"An application for `text-to-image`, `image-to-image` and image inpainting.",id:"ArtGAN/Stable-Diffusion-ControlNet-WebUI"},{description:"An application to generate realistic images given photos of a person and a prompt.",id:"InstantX/InstantID"}],summary:"Text-to-image is the task of generating images from input text. These pipelines can also be used to modify and edit images based on text prompts.",widgetModels:["black-forest-labs/FLUX.1-dev"],youtubeId:""},taskData$h={canonicalId:"text-to-audio",datasets:[{description:"10K hours of multi-speaker English dataset.",id:"parler-tts/mls_eng_10k"},{description:"Multi-speaker English dataset.",id:"mythicinfinity/libritts_r"},{description:"Multi-lingual dataset.",id:"facebook/multilingual_librispeech"}],demo:{inputs:[{label:"Input",content:"I love audio models on the Hub!",type:"text"}],outputs:[{filename:"audio.wav",type:"audio"}]},metrics:[{description:"The Mel Cepstral Distortion (MCD) metric is used to calculate the quality of generated speech.",id:"mel cepstral distortion"}],models:[{description:"A prompt based, powerful TTS model.",id:"parler-tts/parler-tts-large-v1"},{description:"A powerful TTS model that supports English and Chinese.",id:"SWivid/F5-TTS"},{description:"A massively multi-lingual TTS model.",id:"fishaudio/fish-speech-1.5"},{description:"A powerful TTS model.",id:"OuteAI/OuteTTS-0.1-350M"},{description:"Small yet powerful TTS model.",id:"hexgrad/Kokoro-82M"}],spaces:[{description:"An application for generate high quality speech in different languages.",id:"hexgrad/Kokoro-TTS"},{description:"A multilingual text-to-speech application.",id:"fishaudio/fish-speech-1"},{description:"An application that generates speech in different styles in English and Chinese.",id:"mrfakename/E2-F5-TTS"},{description:"An application that synthesizes emotional speech for diverse speaker prompts.",id:"parler-tts/parler-tts-expresso"},{description:"An application that generates podcast episodes.",id:"ngxson/kokoro-podcast-generator"}],summary:"Text-to-Speech (TTS) is the task of generating natural sounding speech given text input. TTS models can be extended to have a single model that generates speech for multiple speakers and multiple languages.",widgetModels:["suno/bark"],youtubeId:"NW62DpzJ274"},taskData$g={datasets:[{description:"A widely used dataset useful to benchmark named entity recognition models.",id:"eriktks/conll2003"},{description:"A multilingual dataset of Wikipedia articles annotated for named entity recognition in over 150 different languages.",id:"unimelb-nlp/wikiann"}],demo:{inputs:[{label:"Input",content:"My name is Omar and I live in Zrich.",type:"text"}],outputs:[{text:"My name is Omar and I live in Zrich.",tokens:[{type:"PERSON",start:11,end:15},{type:"GPE",start:30,end:36}],type:"text-with-tokens"}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"A robust performance model to identify people, locations, organizations and names of miscellaneous entities.",id:"dslim/bert-base-NER"},{description:"A strong model to identify people, locations, organizations and names in multiple languages.",id:"FacebookAI/xlm-roberta-large-finetuned-conll03-english"},{description:"A token classification model specialized on medical entity recognition.",id:"blaze999/Medical-NER"},{description:"Flair models are typically the state of the art in named entity recognition tasks.",id:"flair/ner-english"}],spaces:[{description:"An application that can recognizes entities, extracts noun chunks and recognizes various linguistic features of each token.",id:"spacy/gradio_pipeline_visualizer"}],summary:"Token classification is a natural language understanding task in which a label is assigned to some tokens in a text. Some popular token classification subtasks are Named Entity Recognition (NER) and Part-of-Speech (PoS) tagging. NER models could be trained to identify specific entities in a text, such as dates, individuals and places; and PoS tagging would identify, for example, which words in a text are verbs, nouns, and punctuation marks.",widgetModels:["FacebookAI/xlm-roberta-large-finetuned-conll03-english"],youtubeId:"wVHdVlPScxA"},taskData$f={canonicalId:"text2text-generation",datasets:[{description:"A dataset of copyright-free books translated into 16 different languages.",id:"Helsinki-NLP/opus_books"},{description:"An example of translation between programming languages. This dataset consists of functions in Java and C#.",id:"google/code_x_glue_cc_code_to_code_trans"}],demo:{inputs:[{label:"Input",content:"My name is Omar and I live in Zrich.",type:"text"}],outputs:[{label:"Output",content:"Mein Name ist Omar und ich wohne in Zrich.",type:"text"}]},metrics:[{description:"BLEU score is calculated by counting the number of shared single or subsequent tokens between the generated sequence and the reference. Subsequent n tokens are called n-grams. Unigram refers to a single token while bi-gram refers to token pairs and n-grams refer to n subsequent tokens. The score ranges from 0 to 1, where 1 means the translation perfectly matched and 0 did not match at all",id:"bleu"},{description:"",id:"sacrebleu"}],models:[{description:"Very powerful model that can translate many languages between each other, especially low-resource languages.",id:"facebook/nllb-200-1.3B"},{description:"A general-purpose Transformer that can be used to translate from English to German, French, or Romanian.",id:"google-t5/t5-base"}],spaces:[{description:"An application that can translate between 100 languages.",id:"Iker/Translate-100-languages"},{description:"An application that can translate between many languages.",id:"Geonmo/nllb-translation-demo"}],summary:"Translation is the task of converting text from one language to another.",widgetModels:["facebook/mbart-large-50-many-to-many-mmt"],youtubeId:"1JvfrvZgi6c"},taskData$e={datasets:[{description:"A widely used dataset used to benchmark multiple variants of text classification.",id:"nyu-mll/glue"},{description:"A text classification dataset used to benchmark natural language inference models",id:"stanfordnlp/snli"}],demo:{inputs:[{label:"Input",content:"I love Hugging Face!",type:"text"}],outputs:[{type:"chart",data:[{label:"POSITIVE",score:.9},{label:"NEUTRAL",score:.1},{label:"NEGATIVE",score:0}]}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"The F1 metric is the harmonic mean of the precision and recall. It can be calculated as: F1 = 2 * (precision * recall) / (precision + recall)",id:"f1"}],models:[{description:"A robust model trained for sentiment analysis.",id:"distilbert/distilbert-base-uncased-finetuned-sst-2-english"},{description:"A sentiment analysis model specialized in financial sentiment.",id:"ProsusAI/finbert"},{description:"A sentiment analysis model specialized in analyzing tweets.",id:"cardiffnlp/twitter-roberta-base-sentiment-latest"},{description:"A model that can classify languages.",id:"papluca/xlm-roberta-base-language-detection"},{description:"A model that can classify text generation attacks.",id:"meta-llama/Prompt-Guard-86M"}],spaces:[{description:"An application that can classify financial sentiment.",id:"IoannisTr/Tech_Stocks_Trading_Assistant"},{description:"A dashboard that contains various text classification tasks.",id:"miesnerjacob/Multi-task-NLP"},{description:"An application that analyzes user reviews in healthcare.",id:"spacy/healthsea-demo"}],summary:"Text Classification is the task of assigning a label or class to a given text. Some use cases are sentiment analysis, natural language inference, and assessing grammatical correctness.",widgetModels:["distilbert/distilbert-base-uncased-finetuned-sst-2-english"],youtubeId:"leNG9fN9FQU"},taskData$d={datasets:[{description:"Multilingual dataset used to evaluate text generation models.",id:"CohereForAI/Global-MMLU"},{description:"High quality multilingual data used to train text-generation models.",id:"HuggingFaceFW/fineweb-2"},{description:"Truly open-source, curated and cleaned dialogue dataset.",id:"HuggingFaceH4/ultrachat_200k"},{description:"A reasoning dataset.",id:"open-r1/OpenThoughts-114k-math"},{description:"A multilingual instruction dataset with preference ratings on responses.",id:"allenai/tulu-3-sft-mixture"},{description:"A large synthetic dataset for alignment of text generation models.",id:"HuggingFaceTB/smoltalk"},{description:"A dataset made for training text generation models solving math questions.",id:"HuggingFaceTB/finemath"}],demo:{inputs:[{label:"Input",content:"Once upon a time,",type:"text"}],outputs:[{label:"Output",content:"Once upon a time, we knew that our ancestors were on the verge of extinction. The great explorers and poets of the Old World, from Alexander the Great to Chaucer, are dead and gone. A good many of our ancient explorers and poets have",type:"text"}]},metrics:[{description:"Cross Entropy is a metric that calculates the difference between two probability distributions. Each probability distribution is the distribution of predicted words",id:"Cross Entropy"},{description:"The Perplexity metric is the exponential of the cross-entropy loss. It evaluates the probabilities assigned to the next word by the model. Lower perplexity indicates better performance",id:"Perplexity"}],models:[{description:"A text-generation model trained to follow instructions.",id:"google/gemma-2-2b-it"},{description:"Smaller variant of one of the most powerful models.",id:"deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B"},{description:"Very powerful text generation model trained to follow instructions.",id:"meta-llama/Meta-Llama-3.1-8B-Instruct"},{description:"Powerful text generation model by Microsoft.",id:"microsoft/phi-4"},{description:"A very powerful model with reasoning capabilities.",id:"simplescaling/s1.1-32B"},{description:"Strong conversational model that supports very long instructions.",id:"Qwen/Qwen2.5-7B-Instruct-1M"},{description:"Text generation model used to write code.",id:"Qwen/Qwen2.5-Coder-32B-Instruct"},{description:"Powerful reasoning based open large language model.",id:"deepseek-ai/DeepSeek-R1"}],spaces:[{description:"A leaderboard to compare different open-source text generation models based on various benchmarks.",id:"open-llm-leaderboard/open_llm_leaderboard"},{description:"A leaderboard for comparing chain-of-thought performance of models.",id:"logikon/open_cot_leaderboard"},{description:"An text generation based application based on a very powerful LLaMA2 model.",id:"ysharma/Explore_llamav2_with_TGI"},{description:"An text generation based application to converse with Zephyr model.",id:"HuggingFaceH4/zephyr-chat"},{description:"A leaderboard that ranks text generation models based on blind votes from people.",id:"lmsys/chatbot-arena-leaderboard"},{description:"An chatbot to converse with a very powerful text generation model.",id:"mlabonne/phixtral-chat"}],summary:"Generating text is the task of generating new text given another text. These models can, for example, fill in incomplete text or paraphrase.",widgetModels:["mistralai/Mistral-Nemo-Instruct-2407"],youtubeId:"e9gNEAlsOvU"},taskData$c={datasets:[{description:"Bing queries with relevant passages from various web sources.",id:"microsoft/ms_marco"}],demo:{inputs:[{label:"Source sentence",content:"Machine learning is so easy.",type:"text"},{label:"Sentences to compare to",content:"Deep learning is so straightforward.",type:"text"},{label:"",content:"This is so difficult, like rocket science.",type:"text"},{label:"",content:"I can't believe how much I struggled with this.",type:"text"}],outputs:[{type:"chart",data:[{label:"Deep learning is so straightforward.",score:2.2006407},{label:"This is so difficult, like rocket science.",score:-6.2634873},{label:"I can't believe how much I struggled with this.",score:-10.251488}]}]},metrics:[{description:"Discounted Cumulative Gain (DCG) measures the gain, or usefulness, of search results discounted by their position. The normalization is done by dividing the DCG by the ideal DCG, which is the DCG of the perfect ranking.",id:"Normalized Discounted Cumulative Gain"},{description:"Reciprocal Rank is a measure used to rank the relevancy of documents given a set of documents. Reciprocal Rank is the reciprocal of the rank of the document retrieved, meaning, if the rank is 3, the Reciprocal Rank is 0.33. If the rank is 1, the Reciprocal Rank is 1",id:"Mean Reciprocal Rank"},{description:"Mean Average Precision (mAP) is the overall average of the Average Precision (AP) values, where AP is the Area Under the PR Curve (AUC-PR)",id:"Mean Average Precision"}],models:[{description:"An extremely efficient text ranking model trained on a web search dataset.",id:"cross-encoder/ms-marco-MiniLM-L6-v2"},{description:"A strong multilingual text reranker model.",id:"Alibaba-NLP/gte-multilingual-reranker-base"},{description:"An efficient text ranking model that punches above its weight.",id:"Alibaba-NLP/gte-reranker-modernbert-base"}],spaces:[],summary:"Text Ranking is the task of ranking a set of texts based on their relevance to a query. Text ranking models are trained on large datasets of queries and relevant documents to learn how to rank documents based on their relevance to the query. This task is particularly useful for search engines and information retrieval systems.",widgetModels:["cross-encoder/ms-marco-MiniLM-L6-v2"],youtubeId:""},taskData$b={datasets:[{description:"Microsoft Research Video to Text is a large-scale dataset for open domain video captioning",id:"iejMac/CLIP-MSR-VTT"},{description:"UCF101 Human Actions dataset consists of 13,320 video clips from YouTube, with 101 classes.",id:"quchenyuan/UCF101-ZIP"},{description:"A high-quality dataset for human action recognition in YouTube videos.",id:"nateraw/kinetics"},{description:"A dataset of video clips of humans performing pre-defined basic actions with everyday objects.",id:"HuggingFaceM4/something_something_v2"},{description:"This dataset consists of text-video pairs and contains noisy samples with irrelevant video descriptions",id:"HuggingFaceM4/webvid"},{description:"A dataset of short Flickr videos for the temporal localization of events with descriptions.",id:"iejMac/CLIP-DiDeMo"}],demo:{inputs:[{label:"Input",content:"Darth Vader is surfing on the waves.",type:"text"}],outputs:[{filename:"text-to-video-output.gif",type:"img"}]},metrics:[{description:"Inception Score uses an image classification model that predicts class labels and evaluates how distinct and diverse the images are. A higher score indicates better video generation.",id:"is"},{description:"Frechet Inception Distance uses an image classification model to obtain image embeddings. The metric compares mean and standard deviation of the embeddings of real and generated images. A smaller score indicates better video generation.",id:"fid"},{description:"Frechet Video Distance uses a model that captures coherence for changes in frames and the quality of each frame. A smaller score indicates better video generation.",id:"fvd"},{description:"CLIPSIM measures similarity between video frames and text using an image-text similarity model. A higher score indicates better video generation.",id:"clipsim"}],models:[{description:"A strong model for consistent video generation.",id:"tencent/HunyuanVideo"},{description:"A text-to-video model with high fidelity motion and strong prompt adherence.",id:"Lightricks/LTX-Video"},{description:"A text-to-video model focusing on physics-aware applications like robotics.",id:"nvidia/Cosmos-1.0-Diffusion-7B-Text2World"},{description:"A robust model for video generation.",id:"Wan-AI/Wan2.1-T2V-1.3B"}],spaces:[{description:"An application that generates video from text.",id:"VideoCrafter/VideoCrafter"},{description:"Consistent video generation application.",id:"Wan-AI/Wan2.1"},{description:"A cutting edge video generation application.",id:"Pyramid-Flow/pyramid-flow"}],summary:"Text-to-video models can be used in any application that requires generating consistent sequence of images from text. ",widgetModels:["Wan-AI/Wan2.1-T2V-14B"],youtubeId:void 0},taskData$a={datasets:[{description:"The CIFAR-100 dataset consists of 60000 32x32 colour images in 100 classes, with 600 images per class.",id:"cifar100"},{description:"Multiple images of celebrities, used for facial expression translation.",id:"CelebA"}],demo:{inputs:[{label:"Seed",content:"42",type:"text"},{label:"Number of images to generate:",content:"4",type:"text"}],outputs:[{filename:"unconditional-image-generation-output.jpeg",type:"img"}]},metrics:[{description:"The inception score (IS) evaluates the quality of generated images. It measures the diversity of the generated images (the model predictions are evenly distributed across all possible labels) and their 'distinction' or 'sharpness' (the model confidently predicts a single label for each image).",id:"Inception score (IS)"},{description:"The Frchet Inception Distance (FID) evaluates the quality of images created by a generative model by calculating the distance between feature vectors for real and generated images.",id:"Frehet Inception Distance (FID)"}],models:[{description:"High-quality image generation model trained on the CIFAR-10 dataset. It synthesizes images of the ten classes presented in the dataset using diffusion probabilistic models, a class of latent variable models inspired by considerations from nonequilibrium thermodynamics.",id:"google/ddpm-cifar10-32"},{description:"High-quality image generation model trained on the 256x256 CelebA-HQ dataset. It synthesizes images of faces using diffusion probabilistic models, a class of latent variable models inspired by considerations from nonequilibrium thermodynamics.",id:"google/ddpm-celebahq-256"}],spaces:[{description:"An application that can generate realistic faces.",id:"CompVis/celeba-latent-diffusion"}],summary:"Unconditional image generation is the task of generating images with no condition in any context (like a prompt text or another image). Once trained, the model will create images that resemble its training data distribution.",widgetModels:[""],youtubeId:""},taskData$9={datasets:[{description:"Benchmark dataset used for video classification with videos that belong to 400 classes.",id:"kinetics400"}],demo:{inputs:[{filename:"video-classification-input.gif",type:"img"}],outputs:[{type:"chart",data:[{label:"Playing Guitar",score:.514},{label:"Playing Tennis",score:.193},{label:"Cooking",score:.068}]}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"Strong Video Classification model trained on the Kinetics 400 dataset.",id:"google/vivit-b-16x2-kinetics400"},{description:"Strong Video Classification model trained on the Kinetics 400 dataset.",id:"microsoft/xclip-base-patch32"}],spaces:[{description:"An application that classifies video at different timestamps.",id:"nateraw/lavila"},{description:"An application that classifies video.",id:"fcakyon/video-classification"}],summary:"Video classification is the task of assigning a label or class to an entire video. Videos are expected to have only one class for each video. Video classification models take a video as input and return a prediction about which class the video belongs to.",widgetModels:[],youtubeId:""},taskData$8={datasets:[{description:"A large dataset used to train visual document retrieval models.",id:"vidore/colpali_train_set"}],demo:{inputs:[{filename:"input.png",type:"img"},{label:"Question",content:"Is the model in this paper the fastest for inference?",type:"text"}],outputs:[{type:"chart",data:[{label:"Page 10",score:.7},{label:"Page 11",score:.06},{label:"Page 9",score:.003}]}]},isPlaceholder:!1,metrics:[{description:"NDCG@k scores ranked recommendation lists for top-k results. 0 is the worst, 1 is the best.",id:"Normalized Discounted Cumulative Gain at K"}],models:[{description:"Very accurate visual document retrieval model for multilingual queries and documents.",id:"vidore/colqwen2-v1.0"},{description:"Very fast and efficient visual document retrieval model that works on five languages.",id:"marco/mcdse-2b-v1"}],spaces:[{description:"A leaderboard of visual document retrieval models.",id:"vidore/vidore-leaderboard"}],summary:"Visual document retrieval is the task of searching for relevant image-based documents, such as PDFs. These models take a text query and multiple documents as input and return the top-most relevant documents and relevancy scores as output.",widgetModels:[""],youtubeId:""},taskData$7={datasets:[{description:"A widely used dataset containing questions (with answers) about images.",id:"Graphcore/vqa"},{description:"A dataset to benchmark visual reasoning based on text in images.",id:"facebook/textvqa"}],demo:{inputs:[{filename:"elephant.jpeg",type:"img"},{label:"Question",content:"What is in this image?",type:"text"}],outputs:[{type:"chart",data:[{label:"elephant",score:.97},{label:"elephants",score:.06},{label:"animal",score:.003}]}]},isPlaceholder:!1,metrics:[{description:"",id:"accuracy"},{description:"Measures how much a predicted answer differs from the ground truth based on the difference in their semantic meaning.",id:"wu-palmer similarity"}],models:[{description:"A visual question answering model trained to convert charts and plots to text.",id:"google/deplot"},{description:"A visual question answering model trained for mathematical reasoning and chart derendering from images.",id:"google/matcha-base"},{description:"A strong visual question answering that answers questions from book covers.",id:"google/pix2struct-ocrvqa-large"}],spaces:[{description:"An application that compares visual question answering models across different tasks.",id:"merve/pix2struct"},{description:"An application that can answer questions based on images.",id:"nielsr/vilt-vqa"},{description:"An application that can caption images and answer questions about a given image. ",id:"Salesforce/BLIP"},{description:"An application that can caption images and answer questions about a given image. ",id:"vumichien/Img2Prompt"}],summary:"Visual Question Answering is the task of answering open-ended questions based on an image. They output natural language responses to natural language questions.",widgetModels:["dandelin/vilt-b32-finetuned-vqa"],youtubeId:""},taskData$6={datasets:[{description:"A widely used dataset used to benchmark multiple variants of text classification.",id:"nyu-mll/glue"},{description:"The Multi-Genre Natural Language Inference (MultiNLI) corpus is a crowd-sourced collection of 433k sentence pairs annotated with textual entailment information.",id:"nyu-mll/multi_nli"},{description:"FEVER is a publicly available dataset for fact extraction and verification against textual sources.",id:"fever/fever"}],demo:{inputs:[{label:"Text Input",content:"Dune is the best movie ever.",type:"text"},{label:"Candidate Labels",content:"CINEMA, ART, MUSIC",type:"text"}],outputs:[{type:"chart",data:[{label:"CINEMA",score:.9},{label:"ART",score:.1},{label:"MUSIC",score:0}]}]},metrics:[],models:[{description:"Powerful zero-shot text classification model.",id:"facebook/bart-large-mnli"},{description:"Cutting-edge zero-shot multilingual text classification model.",id:"MoritzLaurer/ModernBERT-large-zeroshot-v2.0"},{description:"Zero-shot text classification model that can be used for topic and sentiment classification.",id:"knowledgator/gliclass-modern-base-v2.0-init"}],spaces:[],summary:"Zero-shot text classification is a task in natural language processing where a model is trained on a set of labeled examples but is then able to classify new examples from previously unseen classes.",widgetModels:["facebook/bart-large-mnli"]},taskData$5={datasets:[{description:"",id:""}],demo:{inputs:[{filename:"image-classification-input.jpeg",type:"img"},{label:"Classes",content:"cat, dog, bird",type:"text"}],outputs:[{type:"chart",data:[{label:"Cat",score:.664},{label:"Dog",score:.329},{label:"Bird",score:.008}]}]},metrics:[{description:"Computes the number of times the correct label appears in top K labels predicted",id:"top-K accuracy"}],models:[{description:"Multilingual image classification model for 80 languages.",id:"visheratin/mexma-siglip"},{description:"Strong zero-shot image classification model.",id:"google/siglip2-base-patch16-224"},{description:"Robust zero-shot image classification model.",id:"intfloat/mmE5-mllama-11b-instruct"},{description:"Powerful zero-shot image classification model supporting 94 languages.",id:"jinaai/jina-clip-v2"},{description:"Strong image classification model for biomedical domain.",id:"microsoft/BiomedCLIP-PubMedBERT_256-vit_base_patch16_224"}],spaces:[{description:"An application that leverages zero-shot image classification to find best captions to generate an image. ",id:"pharma/CLIP-Interrogator"},{description:"An application to compare different zero-shot image classification models. ",id:"merve/compare_clip_siglip"}],summary:"Zero-shot image classification is the task of classifying previously unseen classes during training of a model.",widgetModels:["google/siglip-so400m-patch14-224"],youtubeId:""},taskData$4={datasets:[],demo:{inputs:[{filename:"zero-shot-object-detection-input.jpg",type:"img"},{label:"Classes",content:"cat, dog, bird",type:"text"}],outputs:[{filename:"zero-shot-object-detection-output.jpg",type:"img"}]},metrics:[{description:"The Average Precision (AP) metric is the Area Under the PR Curve (AUC-PR). It is calculated for each class separately",id:"Average Precision"},{description:"The Mean Average Precision (mAP) metric is the overall average of the AP values",id:"Mean Average Precision"},{description:"The AP metric is the Average Precision at the IoU threshold of a  value, for example, AP50 and AP75",id:"AP"}],models:[{description:"Solid zero-shot object detection model.",id:"IDEA-Research/grounding-dino-base"},{description:"Cutting-edge zero-shot object detection model.",id:"google/owlv2-base-patch16-ensemble"}],spaces:[{description:"A demo to try the state-of-the-art zero-shot object detection model, OWLv2.",id:"merve/owlv2"},{description:"A demo that combines a zero-shot object detection and mask generation model for zero-shot segmentation.",id:"merve/OWLSAM"}],summary:"Zero-shot object detection is a computer vision task to detect objects and their classes in images, without any prior training or knowledge of the classes. Zero-shot object detection models receive an image as input, as well as a list of candidate classes, and output the bounding boxes and labels where the objects have been detected.",widgetModels:[],youtubeId:""},taskData$3={datasets:[{description:"A large dataset of over 10 million 3D objects.",id:"allenai/objaverse-xl"},{description:"A dataset of isolated object images for evaluating image-to-3D models.",id:"dylanebert/iso3d"}],demo:{inputs:[{filename:"image-to-3d-image-input.png",type:"img"}],outputs:[{label:"Result",content:"image-to-3d-3d-output-filename.glb",type:"text"}]},metrics:[],models:[{description:"Fast image-to-3D mesh model by Tencent.",id:"TencentARC/InstantMesh"},{description:"Fast image-to-3D mesh model by StabilityAI",id:"stabilityai/TripoSR"},{description:"A scaled up image-to-3D mesh model derived from TripoSR.",id:"hwjiang/Real3D"},{description:"Consistent image-to-3d generation model.",id:"stabilityai/stable-point-aware-3d"}],spaces:[{description:"Leaderboard to evaluate image-to-3D models.",id:"dylanebert/3d-arena"},{description:"Image-to-3D demo with mesh outputs.",id:"TencentARC/InstantMesh"},{description:"Image-to-3D demo.",id:"stabilityai/stable-point-aware-3d"},{description:"Image-to-3D demo with mesh outputs.",id:"hwjiang/Real3D"},{description:"Image-to-3D demo with splat outputs.",id:"dylanebert/LGM-mini"}],summary:"Image-to-3D models take in image input and produce 3D output.",widgetModels:[],youtubeId:""},taskData$2={datasets:[{description:"A large dataset of over 10 million 3D objects.",id:"allenai/objaverse-xl"},{description:"Descriptive captions for 3D objects in Objaverse.",id:"tiange/Cap3D"}],demo:{inputs:[{label:"Prompt",content:"a cat statue",type:"text"}],outputs:[{label:"Result",content:"text-to-3d-3d-output-filename.glb",type:"text"}]},metrics:[],models:[{description:"Text-to-3D mesh model by OpenAI",id:"openai/shap-e"},{description:"Generative 3D gaussian splatting model.",id:"ashawkey/LGM"}],spaces:[{description:"Text-to-3D demo with mesh outputs.",id:"hysts/Shap-E"},{description:"Text/image-to-3D demo with splat outputs.",id:"ashawkey/LGM"}],summary:"Text-to-3D models take in text input and produce 3D output.",widgetModels:[],youtubeId:""},taskData$1={datasets:[{description:"A dataset of hand keypoints of over 500k examples.",id:"Vincent-luo/hagrid-mediapipe-hands"}],demo:{inputs:[{filename:"keypoint-detection-input.png",type:"img"}],outputs:[{filename:"keypoint-detection-output.png",type:"img"}]},metrics:[],models:[{description:"A robust keypoint detection model.",id:"magic-leap-community/superpoint"},{description:"A robust keypoint matching model.",id:"magic-leap-community/superglue_outdoor"},{description:"Strong keypoint detection model used to detect human pose.",id:"facebook/sapiens-pose-1b"},{description:"Powerful keypoint detection model used to detect human pose.",id:"usyd-community/vitpose-plus-base"}],spaces:[{description:"An application that detects hand keypoints in real-time.",id:"datasciencedojo/Hand-Keypoint-Detection-Realtime"},{description:"An application to try a universal keypoint detection model.",id:"merve/SuperPoint"}],summary:"Keypoint detection is the task of identifying meaningful distinctive points or features in an image.",widgetModels:[],youtubeId:""},taskData={datasets:[{description:"Multiple-choice questions and answers about videos.",id:"lmms-lab/Video-MME"},{description:"A dataset of instructions and question-answer pairs about videos.",id:"lmms-lab/VideoChatGPT"},{description:"Large video understanding dataset.",id:"HuggingFaceFV/finevideo"}],demo:{inputs:[{filename:"video-text-to-text-input.gif",type:"img"},{label:"Text Prompt",content:"What is happening in this video?",type:"text"}],outputs:[{label:"Answer",content:"The video shows a series of images showing a fountain with water jets and a variety of colorful flowers and butterflies in the background.",type:"text"}]},metrics:[],models:[{description:"A robust video-text-to-text model.",id:"Vision-CAIR/LongVU_Qwen2_7B"},{description:"Strong video-text-to-text model with reasoning capabilities.",id:"GoodiesHere/Apollo-LMMs-Apollo-7B-t32"},{description:"Strong video-text-to-text model.",id:"HuggingFaceTB/SmolVLM2-2.2B-Instruct"}],spaces:[{description:"An application to chat with a video-text-to-text model.",id:"llava-hf/video-llava"},{description:"A leaderboard for various video-text-to-text models.",id:"opencompass/openvlm_video_leaderboard"},{description:"An application to generate highlights from a video.",id:"HuggingFaceTB/SmolVLM2-HighlightGenerator"}],summary:"Video-text-to-text models take in a video and a text prompt and output text. These models are also called video-language models.",widgetModels:[""],youtubeId:""},TASKS_MODEL_LIBRARIES={"audio-classification":["speechbrain","transformers","transformers.js"],"audio-to-audio":["asteroid","fairseq","speechbrain"],"automatic-speech-recognition":["espnet","nemo","speechbrain","transformers","transformers.js"],"audio-text-to-text":[],"depth-estimation":["transformers","transformers.js"],"document-question-answering":["transformers","transformers.js"],"feature-extraction":["sentence-transformers","transformers","transformers.js"],"fill-mask":["transformers","transformers.js"],"graph-ml":["transformers"],"image-classification":["keras","timm","transformers","transformers.js"],"image-feature-extraction":["timm","transformers"],"image-segmentation":["transformers","transformers.js"],"image-text-to-text":["transformers"],"image-to-image":["diffusers","transformers","transformers.js"],"image-to-text":["transformers","transformers.js"],"image-to-video":["diffusers"],"keypoint-detection":["transformers"],"video-classification":["transformers"],"mask-generation":["transformers"],"multiple-choice":["transformers"],"object-detection":["transformers","transformers.js","ultralytics"],other:[],"question-answering":["adapter-transformers","allennlp","transformers","transformers.js"],robotics:[],"reinforcement-learning":["transformers","stable-baselines3","ml-agents","sample-factory"],"sentence-similarity":["sentence-transformers","spacy","transformers.js"],summarization:["transformers","transformers.js"],"table-question-answering":["transformers"],"table-to-text":["transformers"],"tabular-classification":["sklearn"],"tabular-regression":["sklearn"],"tabular-to-text":["transformers"],"text-classification":["adapter-transformers","setfit","spacy","transformers","transformers.js"],"text-generation":["transformers","transformers.js"],"text-ranking":["sentence-transformers","transformers"],"text-retrieval":[],"text-to-image":["diffusers"],"text-to-speech":["espnet","tensorflowtts","transformers","transformers.js"],"text-to-audio":["transformers","transformers.js"],"text-to-video":["diffusers"],"text2text-generation":["transformers","transformers.js"],"time-series-forecasting":[],"token-classification":["adapter-transformers","flair","spacy","span-marker","stanza","transformers","transformers.js"],translation:["transformers","transformers.js"],"unconditional-image-generation":["diffusers"],"video-text-to-text":["transformers"],"visual-question-answering":["transformers","transformers.js"],"voice-activity-detection":[],"zero-shot-classification":["transformers","transformers.js"],"zero-shot-image-classification":["transformers","transformers.js"],"zero-shot-object-detection":["transformers","transformers.js"],"text-to-3d":["diffusers"],"image-to-3d":["diffusers"],"any-to-any":["transformers"],"visual-document-retrieval":["transformers"]};function getData(a,e=taskData$q){return{...e,id:a,label:PIPELINE_DATA[a].name,libraries:TASKS_MODEL_LIBRARIES[a]}}getData("any-to-any",taskData$H),getData("audio-classification",taskData$G),getData("audio-to-audio",taskData$F),getData("audio-text-to-text",taskData$q),getData("automatic-speech-recognition",taskData$E),getData("depth-estimation",taskData$r),getData("document-question-answering",taskData$D),getData("visual-document-retrieval",taskData$8),getData("feature-extraction",taskData$C),getData("fill-mask",taskData$B),getData("image-classification",taskData$A),getData("image-feature-extraction",taskData$z),getData("image-segmentation",taskData$v),getData("image-to-image",taskData$y),getData("image-text-to-text",taskData$w),getData("image-to-text",taskData$x),getData("image-to-video",taskData$u),getData("keypoint-detection",taskData$1),getData("mask-generation",taskData$t),getData("object-detection",taskData$s),getData("video-classification",taskData$9),getData("question-answering",taskData$o),getData("reinforcement-learning",taskData$p),getData("sentence-similarity",taskData$n),getData("summarization",taskData$m),getData("table-question-answering",taskData$l),getData("tabular-classification",taskData$k),getData("tabular-regression",taskData$j),getData("text-classification",taskData$e),getData("text-generation",taskData$d),getData("text-ranking",taskData$c),getData("text-to-image",taskData$i),getData("text-to-speech",taskData$h),getData("text-to-video",taskData$b),getData("token-classification",taskData$g),getData("translation",taskData$f),getData("unconditional-image-generation",taskData$a),getData("video-text-to-text",taskData),getData("visual-question-answering",taskData$7),getData("zero-shot-classification",taskData$6),getData("zero-shot-image-classification",taskData$5),getData("zero-shot-object-detection",taskData$4),getData("text-to-3d",taskData$2),getData("image-to-3d",taskData$3);const inputsZeroShotClassification=()=>'"Hi, I recently bought a device from your company but it is not working as advertised and I would like to get reimbursed!"',inputsTranslation=()=>'"       "',inputsSummarization=()=>'"The tower is 324 metres (1,063 ft) tall, about the same height as an 81-storey building, and the tallest structure in Paris. Its base is square, measuring 125 metres (410 ft) on each side. During its construction, the Eiffel Tower surpassed the Washington Monument to become the tallest man-made structure in the world, a title it held for 41 years until the Chrysler Building in New York City was finished in 1930. It was the first structure to reach a height of 300 metres. Due to the addition of a broadcasting aerial at the top of the tower in 1957, it is now taller than the Chrysler Building by 5.2 metres (17 ft). Excluding transmitters, the Eiffel Tower is the second tallest free-standing structure in France after the Millau Viaduct."',inputsTableQuestionAnswering=()=>`{
    "query": "How many stars does the transformers repository have?",
    "table": {
        "Repository": ["Transformers", "Datasets", "Tokenizers"],
        "Stars": ["36542", "4512", "3934"],
        "Contributors": ["651", "77", "34"],
        "Programming language": [
            "Python",
            "Python",
            "Rust, Python and NodeJS"
        ]
    }
}`,inputsVisualQuestionAnswering=()=>`{
        "image": "cat.png",
        "question": "What is in this image?"
    }`,inputsQuestionAnswering=()=>`{
    "question": "What is my name?",
    "context": "My name is Clara and I live in Berkeley."
}`,inputsTextClassification=()=>'"I like you. I love you"',inputsTokenClassification=()=>'"My name is Sarah Jessica Parker but you can call me Jessica"',inputsTextGeneration=a=>a.tags.includes("conversational")?a.pipeline_tag==="text-generation"?[{role:"user",content:"What is the capital of France?"}]:[{role:"user",content:[{type:"text",text:"Describe this image in one sentence."},{type:"image_url",image_url:{url:"https://cdn.britannica.com/61/93061-050-99147DCE/Statue-of-Liberty-Island-New-York-Bay.jpg"}}]}]:'"Can you please let us know more details about your "',inputsText2TextGeneration=()=>'"The answer to the universe is"',inputsFillMask=a=>`"The answer to the universe is ${a.mask_token}."`,inputsSentenceSimilarity=()=>`{
    "source_sentence": "That is a happy person",
    "sentences": [
        "That is a happy dog",
        "That is a very happy person",
        "Today is a sunny day"
    ]
}`,inputsFeatureExtraction=()=>'"Today is a sunny day and I will get some ice cream."',inputsImageClassification=()=>'"cats.jpg"',inputsImageToText=()=>'"cats.jpg"',inputsImageToImage=()=>`{
    "image": "cat.png",
    "prompt": "Turn the cat into a tiger."
}`,inputsImageToVideo=()=>`{
    "image": "cat.png",
    "prompt": "The cat starts to dance"
}`,inputsImageSegmentation=()=>'"cats.jpg"',inputsObjectDetection=()=>'"cats.jpg"',inputsAudioToAudio=()=>'"sample1.flac"',inputsAudioClassification=()=>'"sample1.flac"',inputsTextToImage=()=>'"Astronaut riding a horse"',inputsTextToVideo=()=>'"A young man walking on the street"',inputsTextToSpeech=()=>'"The answer to the universe is 42"',inputsTextToAudio=()=>'"liquid drum and bass, atmospheric synths, airy sounds"',inputsAutomaticSpeechRecognition=()=>'"sample1.flac"',inputsTabularPrediction=()=>`'{"Height":[11.52,12.48],"Length1":[23.2,24.0],"Length2":[25.4,26.3],"Species": ["Bream","Bream"]}'`,inputsZeroShotImageClassification=()=>'"cats.jpg"',modelInputSnippets={"audio-to-audio":inputsAudioToAudio,"audio-classification":inputsAudioClassification,"automatic-speech-recognition":inputsAutomaticSpeechRecognition,"document-question-answering":inputsVisualQuestionAnswering,"feature-extraction":inputsFeatureExtraction,"fill-mask":inputsFillMask,"image-classification":inputsImageClassification,"image-to-text":inputsImageToText,"image-to-image":inputsImageToImage,"image-to-video":inputsImageToVideo,"image-segmentation":inputsImageSegmentation,"object-detection":inputsObjectDetection,"question-answering":inputsQuestionAnswering,"sentence-similarity":inputsSentenceSimilarity,summarization:inputsSummarization,"table-question-answering":inputsTableQuestionAnswering,"tabular-regression":inputsTabularPrediction,"tabular-classification":inputsTabularPrediction,"text-classification":inputsTextClassification,"text-generation":inputsTextGeneration,"image-text-to-text":inputsTextGeneration,"text-to-image":inputsTextToImage,"text-to-video":inputsTextToVideo,"text-to-speech":inputsTextToSpeech,"text-to-audio":inputsTextToAudio,"text2text-generation":inputsText2TextGeneration,"token-classification":inputsTokenClassification,translation:inputsTranslation,"zero-shot-classification":inputsZeroShotClassification,"zero-shot-image-classification":inputsZeroShotImageClassification};function getModelInputSnippet(a,e=!1,c=!1){if(a.pipeline_tag){const d=modelInputSnippets[a.pipeline_tag];if(d){let h=d(a);if(typeof h=="string"&&(e&&(h=h.replace(/(?:(?:\r?\n|\r)\t*)|\t+/g," ")),c)){const g=/^"(.+)"$/s,_=h.match(g);h=_?_[1]:h}return h}}return"No input example has been defined for this model task."}function stringifyMessages(a,e){let c=JSON.stringify(a,null,"	");return e!=null&&e.indent&&(c=c.replaceAll(`
`,`
${e.indent}`)),e!=null&&e.attributeKeyQuotes||(c=c.replace(/"([^"]+)":/g,"$1:")),e!=null&&e.customContentEscaper&&(c=e.customContentEscaper(c)),c}const TAG_CUSTOM_CODE="custom_code";function nameWithoutNamespace(a){const e=a.split("/");return e.length===1?e[0]:e[1]}const escapeStringForJson=a=>JSON.stringify(a).slice(1,-1),adapters=a=>{var e,c;return[`from adapters import AutoAdapterModel

model = AutoAdapterModel.from_pretrained("${(c=(e=a.config)==null?void 0:e.adapter_transformers)==null?void 0:c.model_name}")
model.load_adapter("${a.id}", set_active=True)`]},allennlpUnknown=a=>[`import allennlp_models
from allennlp.predictors.predictor import Predictor

predictor = Predictor.from_path("hf://${a.id}")`],allennlpQuestionAnswering=a=>[`import allennlp_models
from allennlp.predictors.predictor import Predictor

predictor = Predictor.from_path("hf://${a.id}")
predictor_input = {"passage": "My name is Wolfgang and I live in Berlin", "question": "Where do I live?"}
predictions = predictor.predict_json(predictor_input)`],allennlp=a=>a.tags.includes("question-answering")?allennlpQuestionAnswering(a):allennlpUnknown(a),araclip=a=>[`from araclip import AraClip

model = AraClip.from_pretrained("${a.id}")`],asteroid=a=>[`from asteroid.models import BaseModel

model = BaseModel.from_pretrained("${a.id}")`],audioseal=a=>{const e=`# Watermark Generator
from audioseal import AudioSeal

model = AudioSeal.load_generator("${a.id}")
# pass a tensor (tensor_wav) of shape (batch, channels, samples) and a sample rate
wav, sr = tensor_wav, 16000
	
watermark = model.get_watermark(wav, sr)
watermarked_audio = wav + watermark`,c=`# Watermark Detector
from audioseal import AudioSeal

detector = AudioSeal.load_detector("${a.id}")
	
result, message = detector.detect_watermark(watermarked_audio, sr)`;return[e,c]};function get_base_diffusers_model(a){var e,c;return((c=(e=a.cardData)==null?void 0:e.base_model)==null?void 0:c.toString())??"fill-in-base-model"}function get_prompt_from_diffusers_model(a){var c,d,h;const e=((d=(c=a.widgetData)==null?void 0:c[0])==null?void 0:d.text)??((h=a.cardData)==null?void 0:h.instance_prompt);if(e)return escapeStringForJson(e)}const ben2=a=>[`import requests
from PIL import Image
from ben2 import AutoModel

url = "https://huggingface.co/datasets/mishig/sample_images/resolve/main/teapot.jpg"
image = Image.open(requests.get(url, stream=True).raw)

model = AutoModel.from_pretrained("${a.id}")
model.to("cuda").eval()
foreground = model.inference(image)
`],bertopic=a=>[`from bertopic import BERTopic

model = BERTopic.load("${a.id}")`],bm25s=a=>[`from bm25s.hf import BM25HF

retriever = BM25HF.load_from_hub("${a.id}")`],cxr_foundation=()=>[`# pip install git+https://github.com/Google-Health/cxr-foundation.git#subdirectory=python

# Load image as grayscale (Stillwaterising, CC0, via Wikimedia Commons)
import requests
from PIL import Image
from io import BytesIO
image_url = "https://upload.wikimedia.org/wikipedia/commons/c/c8/Chest_Xray_PA_3-8-2010.png"
img = Image.open(requests.get(image_url, headers={'User-Agent': 'Demo'}, stream=True).raw).convert('L')

# Run inference
from clientside.clients import make_hugging_face_client
cxr_client = make_hugging_face_client('cxr_model')
print(cxr_client.get_image_embeddings_from_images([img]))`],depth_anything_v2=a=>{let e,c,d;return e="<ENCODER>",c="<NUMBER_OF_FEATURES>",d="<OUT_CHANNELS>",a.id==="depth-anything/Depth-Anything-V2-Small"?(e="vits",c="64",d="[48, 96, 192, 384]"):a.id==="depth-anything/Depth-Anything-V2-Base"?(e="vitb",c="128",d="[96, 192, 384, 768]"):a.id==="depth-anything/Depth-Anything-V2-Large"&&(e="vitl",c="256",d="[256, 512, 1024, 1024"),[`
# Install from https://github.com/DepthAnything/Depth-Anything-V2

# Load the model and infer depth from an image
import cv2
import torch

from depth_anything_v2.dpt import DepthAnythingV2

# instantiate the model
model = DepthAnythingV2(encoder="${e}", features=${c}, out_channels=${d})

# load the weights
filepath = hf_hub_download(repo_id="${a.id}", filename="depth_anything_v2_${e}.pth", repo_type="model")
state_dict = torch.load(filepath, map_location="cpu")
model.load_state_dict(state_dict).eval()

raw_img = cv2.imread("your/image/path")
depth = model.infer_image(raw_img) # HxW raw depth map in numpy
    `]},depth_pro=a=>[`# Download checkpoint
pip install huggingface-hub
huggingface-cli download --local-dir checkpoints ${a.id}`,`import depth_pro

# Load model and preprocessing transform
model, transform = depth_pro.create_model_and_transforms()
model.eval()

# Load and preprocess an image.
image, _, f_px = depth_pro.load_rgb("example.png")
image = transform(image)

# Run inference.
prediction = model.infer(image, f_px=f_px)

# Results: 1. Depth in meters
depth = prediction["depth"]
# Results: 2. Focal length in pixels
focallength_px = prediction["focallength_px"]`],derm_foundation=()=>[`from huggingface_hub import from_pretrained_keras
import tensorflow as tf, requests

# Load and format input
IMAGE_URL = "https://storage.googleapis.com/dx-scin-public-data/dataset/images/3445096909671059178.png"
input_tensor = tf.train.Example(
    features=tf.train.Features(
        feature={
            "image/encoded": tf.train.Feature(
                bytes_list=tf.train.BytesList(value=[requests.get(IMAGE_URL, stream=True).content])
            )
        }
    )
).SerializeToString()

# Load model and run inference
loaded_model = from_pretrained_keras("google/derm-foundation")
infer = loaded_model.signatures["serving_default"]
print(infer(inputs=tf.constant([input_tensor])))`],dia=a=>[`import soundfile as sf
from dia.model import Dia

model = Dia.from_pretrained("${a.id}")
text = "[S1] Dia is an open weights text to dialogue model. [S2] You get full control over scripts and voices. [S1] Wow. Amazing. (laughs) [S2] Try it now on Git hub or Hugging Face."
output = model.generate(text)

sf.write("simple.mp3", output, 44100)`],describe_anything=a=>[`# pip install git+https://github.com/NVlabs/describe-anything
from huggingface_hub import snapshot_download
from dam import DescribeAnythingModel

snapshot_download(${a.id}, local_dir="checkpoints")

dam = DescribeAnythingModel(
	model_path="checkpoints",
	conv_mode="v1",
	prompt_mode="focal_prompt",
)`],diffusersDefaultPrompt="Astronaut in a jungle, cold color palette, muted colors, detailed, 8k",diffusers_default=a=>[`from diffusers import DiffusionPipeline

pipe = DiffusionPipeline.from_pretrained("${a.id}")

prompt = "${get_prompt_from_diffusers_model(a)??diffusersDefaultPrompt}"
image = pipe(prompt).images[0]`],diffusers_controlnet=a=>[`from diffusers import ControlNetModel, StableDiffusionControlNetPipeline

controlnet = ControlNetModel.from_pretrained("${a.id}")
pipe = StableDiffusionControlNetPipeline.from_pretrained(
	"${get_base_diffusers_model(a)}", controlnet=controlnet
)`],diffusers_lora=a=>[`from diffusers import DiffusionPipeline

pipe = DiffusionPipeline.from_pretrained("${get_base_diffusers_model(a)}")
pipe.load_lora_weights("${a.id}")

prompt = "${get_prompt_from_diffusers_model(a)??diffusersDefaultPrompt}"
image = pipe(prompt).images[0]`],diffusers_textual_inversion=a=>[`from diffusers import DiffusionPipeline

pipe = DiffusionPipeline.from_pretrained("${get_base_diffusers_model(a)}")
pipe.load_textual_inversion("${a.id}")`],diffusers=a=>a.tags.includes("controlnet")?diffusers_controlnet(a):a.tags.includes("lora")?diffusers_lora(a):a.tags.includes("textual_inversion")?diffusers_textual_inversion(a):diffusers_default(a),diffusionkit=a=>{const e=`# Pipeline for Stable Diffusion 3
from diffusionkit.mlx import DiffusionPipeline

pipeline = DiffusionPipeline(
	shift=3.0,
	use_t5=False,
	model_version=${a.id},
	low_memory_mode=True,
	a16=True,
	w16=True,
)`,c=`# Pipeline for Flux
from diffusionkit.mlx import FluxPipeline

pipeline = FluxPipeline(
  shift=1.0,
  model_version=${a.id},
  low_memory_mode=True,
  a16=True,
  w16=True,
)`,d=`# Image Generation
HEIGHT = 512
WIDTH = 512
NUM_STEPS = ${a.tags.includes("flux")?4:50}
CFG_WEIGHT = ${a.tags.includes("flux")?0:5}

image, _ = pipeline.generate_image(
  "a photo of a cat",
  cfg_weight=CFG_WEIGHT,
  num_steps=NUM_STEPS,
  latent_size=(HEIGHT // 8, WIDTH // 8),
)`;return[a.tags.includes("flux")?c:e,d]},cartesia_pytorch=a=>[`# pip install --no-binary :all: cartesia-pytorch
from cartesia_pytorch import ReneLMHeadModel
from transformers import AutoTokenizer

model = ReneLMHeadModel.from_pretrained("${a.id}")
tokenizer = AutoTokenizer.from_pretrained("allenai/OLMo-1B-hf")

in_message = ["Rene Descartes was"]
inputs = tokenizer(in_message, return_tensors="pt")

outputs = model.generate(inputs.input_ids, max_length=50, top_k=100, top_p=0.99)
out_message = tokenizer.batch_decode(outputs, skip_special_tokens=True)[0]

print(out_message)
)`],cartesia_mlx=a=>[`import mlx.core as mx
import cartesia_mlx as cmx

model = cmx.from_pretrained("${a.id}")
model.set_dtype(mx.float32)   

prompt = "Rene Descartes was"

for text in model.generate(
    prompt,
    max_tokens=500,
    eval_every_n=5,
    verbose=True,
    top_p=0.99,
    temperature=0.85,
):
    print(text, end="", flush=True)
`],edsnlp=a=>{const e=nameWithoutNamespace(a.id).replaceAll("-","_");return[`# Load it from the Hub directly
import edsnlp
nlp = edsnlp.load("${a.id}")
`,`# Or install it as a package
!pip install git+https://huggingface.co/${a.id}

# and import it as a module
import ${e}

nlp = ${e}.load()  # or edsnlp.load("${e}")
`]},espnetTTS=a=>[`from espnet2.bin.tts_inference import Text2Speech

model = Text2Speech.from_pretrained("${a.id}")

speech, *_ = model("text to generate speech from")`],espnetASR=a=>[`from espnet2.bin.asr_inference import Speech2Text

model = Speech2Text.from_pretrained(
  "${a.id}"
)

speech, rate = soundfile.read("speech.wav")
text, *_ = model(speech)[0]`],espnetUnknown=()=>["unknown model type (must be text-to-speech or automatic-speech-recognition)"],espnet=a=>a.tags.includes("text-to-speech")?espnetTTS(a):a.tags.includes("automatic-speech-recognition")?espnetASR(a):espnetUnknown(),fairseq=a=>[`from fairseq.checkpoint_utils import load_model_ensemble_and_task_from_hf_hub

models, cfg, task = load_model_ensemble_and_task_from_hf_hub(
    "${a.id}"
)`],flair=a=>[`from flair.models import SequenceTagger

tagger = SequenceTagger.load("${a.id}")`],gliner=a=>[`from gliner import GLiNER

model = GLiNER.from_pretrained("${a.id}")`],indextts=a=>[`# Download model
from huggingface_hub import snapshot_download

snapshot_download(${a.id}, local_dir="checkpoints")

from indextts.infer import IndexTTS

# Ensure config.yaml is present in the checkpoints directory
tts = IndexTTS(model_dir="checkpoints", cfg_path="checkpoints/config.yaml")

voice = "path/to/your/reference_voice.wav"  # Path to the voice reference audio file
text = "Hello, how are you?"
output_path = "output_index.wav"

tts.infer(voice, text, output_path)`],htrflow=a=>[`# CLI usage
# see docs: https://ai-riksarkivet.github.io/htrflow/latest/getting_started/quick_start.html
htrflow pipeline <path/to/pipeline.yaml> <path/to/image>`,`# Python usage
from htrflow.pipeline.pipeline import Pipeline
from htrflow.pipeline.steps import Task
from htrflow.models.framework.model import ModelClass

pipeline = Pipeline(
    [
        Task(
            ModelClass, {"model": "${a.id}"}, {}
        ),
    ])`],keras=a=>[`# Available backend options are: "jax", "torch", "tensorflow".
import os
os.environ["KERAS_BACKEND"] = "jax"
	
import keras

model = keras.saving.load_model("hf://${a.id}")
`],_keras_hub_causal_lm=a=>`
import keras_hub

# Load CausalLM model (optional: use half precision for inference)
causal_lm = keras_hub.models.CausalLM.from_preset("hf://${a}", dtype="bfloat16")
causal_lm.compile(sampler="greedy")  # (optional) specify a sampler

# Generate text
causal_lm.generate("Keras: deep learning for", max_length=64)
`,_keras_hub_text_to_image=a=>`
import keras_hub

# Load TextToImage model (optional: use half precision for inference)
text_to_image = keras_hub.models.TextToImage.from_preset("hf://${a}", dtype="bfloat16")

# Generate images with a TextToImage model.
text_to_image.generate("Astronaut in a jungle")
`,_keras_hub_text_classifier=a=>`
import keras_hub

# Load TextClassifier model
text_classifier = keras_hub.models.TextClassifier.from_preset(
    "hf://${a}",
    num_classes=2,
)
# Fine-tune
text_classifier.fit(x=["Thilling adventure!", "Total snoozefest."], y=[1, 0])
# Classify text
text_classifier.predict(["Not my cup of tea."])
`,_keras_hub_image_classifier=a=>`
import keras_hub
import keras

# Load ImageClassifier model
image_classifier = keras_hub.models.ImageClassifier.from_preset(
    "hf://${a}",
    num_classes=2,
)
# Fine-tune
image_classifier.fit(
    x=keras.random.randint((32, 64, 64, 3), 0, 256),
    y=keras.random.randint((32, 1), 0, 2),
)
# Classify image
image_classifier.predict(keras.random.randint((1, 64, 64, 3), 0, 256))
`,_keras_hub_tasks_with_example={CausalLM:_keras_hub_causal_lm,TextToImage:_keras_hub_text_to_image,TextClassifier:_keras_hub_text_classifier,ImageClassifier:_keras_hub_image_classifier},_keras_hub_task_without_example=(a,e)=>`
import keras_hub

# Create a ${a} model
task = keras_hub.models.${a}.from_preset("hf://${e}")
`,_keras_hub_generic_backbone=a=>`
import keras_hub

# Create a Backbone model unspecialized for any task
backbone = keras_hub.models.Backbone.from_preset("hf://${a}")
`,keras_hub=a=>{var h,g;const e=a.id,c=((g=(h=a.config)==null?void 0:h.keras_hub)==null?void 0:g.tasks)??[],d=[];for(const[_,_e]of Object.entries(_keras_hub_tasks_with_example))c.includes(_)&&d.push(_e(e));for(const _ of c)Object.keys(_keras_hub_tasks_with_example).includes(_)||d.push(_keras_hub_task_without_example(_,e));return d.push(_keras_hub_generic_backbone(e)),d},kimi_audio=a=>[`# Example usage for KimiAudio
# pip install git+https://github.com/MoonshotAI/Kimi-Audio.git

from kimia_infer.api.kimia import KimiAudio

model = KimiAudio(model_path="${a.id}", load_detokenizer=True)

sampling_params = {
    "audio_temperature": 0.8,
    "audio_top_k": 10,
    "text_temperature": 0.0,
    "text_top_k": 5,
}

# For ASR
asr_audio = "asr_example.wav"
messages_asr = [
    {"role": "user", "message_type": "text", "content": "Please transcribe the following audio:"},
    {"role": "user", "message_type": "audio", "content": asr_audio}
]
_, text = model.generate(messages_asr, **sampling_params, output_type="text")
print(text)

# For Q&A
qa_audio = "qa_example.wav"
messages_conv = [{"role": "user", "message_type": "audio", "content": qa_audio}]
wav, text = model.generate(messages_conv, **sampling_params, output_type="both")
sf.write("output_audio.wav", wav.cpu().view(-1).numpy(), 24000)
print(text)
`],lightning_ir=a=>a.tags.includes("bi-encoder")?[`#install from https://github.com/webis-de/lightning-ir

from lightning_ir import BiEncoderModule
model = BiEncoderModule("${a.id}")

model.score("query", ["doc1", "doc2", "doc3"])`]:a.tags.includes("cross-encoder")?[`#install from https://github.com/webis-de/lightning-ir

from lightning_ir import CrossEncoderModule
model = CrossEncoderModule("${a.id}")

model.score("query", ["doc1", "doc2", "doc3"])`]:[`#install from https://github.com/webis-de/lightning-ir

from lightning_ir import BiEncoderModule, CrossEncoderModule

# depending on the model type, use either BiEncoderModule or CrossEncoderModule
model = BiEncoderModule("${a.id}") 
# model = CrossEncoderModule("${a.id}")

model.score("query", ["doc1", "doc2", "doc3"])`],llama_cpp_python=a=>{const e=[`from llama_cpp import Llama

llm = Llama.from_pretrained(
	repo_id="${a.id}",
	filename="{{GGUF_FILE}}",
)
`];if(a.tags.includes("conversational")){const c=getModelInputSnippet(a);e.push(`llm.create_chat_completion(
	messages = ${stringifyMessages(c,{attributeKeyQuotes:!0,indent:"	"})}
)`)}else e.push(`output = llm(
	"Once upon a time,",
	max_tokens=512,
	echo=True
)
print(output)`);return e},tf_keras=a=>[`# Note: 'keras<3.x' or 'tf_keras' must be installed (legacy)
# See https://github.com/keras-team/tf-keras for more details.
from huggingface_hub import from_pretrained_keras

model = from_pretrained_keras("${a.id}")
`],mamba_ssm=a=>[`from mamba_ssm import MambaLMHeadModel

model = MambaLMHeadModel.from_pretrained("${a.id}")`],mars5_tts=a=>[`# Install from https://github.com/Camb-ai/MARS5-TTS

from inference import Mars5TTS
mars5 = Mars5TTS.from_pretrained("${a.id}")`],matanyone=a=>[`# Install from https://github.com/pq-yang/MatAnyone.git

from matanyone.model.matanyone import MatAnyone
model = MatAnyone.from_pretrained("${a.id}")`],mesh_anything=()=>[`# Install from https://github.com/buaacyw/MeshAnything.git

from MeshAnything.models.meshanything import MeshAnything

# refer to https://github.com/buaacyw/MeshAnything/blob/main/main.py#L91 on how to define args
# and https://github.com/buaacyw/MeshAnything/blob/main/app.py regarding usage
model = MeshAnything(args)`],open_clip=a=>[`import open_clip

model, preprocess_train, preprocess_val = open_clip.create_model_and_transforms('hf-hub:${a.id}')
tokenizer = open_clip.get_tokenizer('hf-hub:${a.id}')`],paddlenlp=a=>{var e,c;if((c=(e=a.config)==null?void 0:e.architectures)!=null&&c[0]){const d=a.config.architectures[0];return[[`from paddlenlp.transformers import AutoTokenizer, ${d}`,"",`tokenizer = AutoTokenizer.from_pretrained("${a.id}", from_hf_hub=True)`,`model = ${d}.from_pretrained("${a.id}", from_hf_hub=True)`].join(`
`)]}else return[["#  Type of model unknown","from paddlenlp.transformers import AutoTokenizer, AutoModel","",`tokenizer = AutoTokenizer.from_pretrained("${a.id}", from_hf_hub=True)`,`model = AutoModel.from_pretrained("${a.id}", from_hf_hub=True)`].join(`
`)]},perception_encoder=a=>{const e=`# Use PE-Core models as CLIP models
import core.vision_encoder.pe as pe

model = pe.CLIP.from_config("${a.id}", pretrained=True)`,c=`# Use any PE model as a vision encoder
import core.vision_encoder.pe as pe

model = pe.VisionTransformer.from_config("${a.id}", pretrained=True)`;return a.id.includes("Core")?[e,c]:[c]},phantom_wan=a=>[`from huggingface_hub import snapshot_download
from phantom_wan import WANI2V, configs

checkpoint_dir = snapshot_download("${a.id}")
wan_i2v = WanI2V(
            config=configs.WAN_CONFIGS['i2v-14B'],
            checkpoint_dir=checkpoint_dir,
        )
 video = wan_i2v.generate(text_prompt, image_prompt)`],pyannote_audio_pipeline=a=>[`from pyannote.audio import Pipeline
  
pipeline = Pipeline.from_pretrained("${a.id}")

# inference on the whole file
pipeline("file.wav")

# inference on an excerpt
from pyannote.core import Segment
excerpt = Segment(start=2.0, end=5.0)

from pyannote.audio import Audio
waveform, sample_rate = Audio().crop("file.wav", excerpt)
pipeline({"waveform": waveform, "sample_rate": sample_rate})`],pyannote_audio_model=a=>[`from pyannote.audio import Model, Inference

model = Model.from_pretrained("${a.id}")
inference = Inference(model)

# inference on the whole file
inference("file.wav")

# inference on an excerpt
from pyannote.core import Segment
excerpt = Segment(start=2.0, end=5.0)
inference.crop("file.wav", excerpt)`],pyannote_audio=a=>a.tags.includes("pyannote-audio-pipeline")?pyannote_audio_pipeline(a):pyannote_audio_model(a),relik=a=>[`from relik import Relik
 
relik = Relik.from_pretrained("${a.id}")`],tensorflowttsTextToMel=a=>[`from tensorflow_tts.inference import AutoProcessor, TFAutoModel

processor = AutoProcessor.from_pretrained("${a.id}")
model = TFAutoModel.from_pretrained("${a.id}")
`],tensorflowttsMelToWav=a=>[`from tensorflow_tts.inference import TFAutoModel

model = TFAutoModel.from_pretrained("${a.id}")
audios = model.inference(mels)
`],tensorflowttsUnknown=a=>[`from tensorflow_tts.inference import TFAutoModel

model = TFAutoModel.from_pretrained("${a.id}")
`],tensorflowtts=a=>a.tags.includes("text-to-mel")?tensorflowttsTextToMel(a):a.tags.includes("mel-to-wav")?tensorflowttsMelToWav(a):tensorflowttsUnknown(a),timm=a=>[`import timm

model = timm.create_model("hf_hub:${a.id}", pretrained=True)`],saelens=()=>[`# pip install sae-lens
from sae_lens import SAE

sae, cfg_dict, sparsity = SAE.from_pretrained(
    release = "RELEASE_ID", # e.g., "gpt2-small-res-jb". See other options in https://github.com/jbloomAus/SAELens/blob/main/sae_lens/pretrained_saes.yaml
    sae_id = "SAE_ID", # e.g., "blocks.8.hook_resid_pre". Won't always be a hook point
)`],seed_story=()=>[`# seed_story_cfg_path refers to 'https://github.com/TencentARC/SEED-Story/blob/master/configs/clm_models/agent_7b_sft.yaml'
# llm_cfg_path refers to 'https://github.com/TencentARC/SEED-Story/blob/master/configs/clm_models/llama2chat7b_lora.yaml'
from omegaconf import OmegaConf
import hydra

# load Llama2
llm_cfg = OmegaConf.load(llm_cfg_path)
llm = hydra.utils.instantiate(llm_cfg, torch_dtype="fp16")

# initialize seed_story
seed_story_cfg = OmegaConf.load(seed_story_cfg_path)
seed_story = hydra.utils.instantiate(seed_story_cfg, llm=llm) `],skopsPickle=(a,e)=>[`import joblib
from skops.hub_utils import download
download("${a.id}", "path_to_folder")
model = joblib.load(
	"${e}"
)
# only load pickle files from sources you trust
# read more about it here https://skops.readthedocs.io/en/stable/persistence.html`],skopsFormat=(a,e)=>[`from skops.hub_utils import download
from skops.io import load
download("${a.id}", "path_to_folder")
# make sure model file is in skops format
# if model is a pickle file, make sure it's from a source you trust
model = load("path_to_folder/${e}")`],skopsJobLib=a=>[`from huggingface_hub import hf_hub_download
import joblib
model = joblib.load(
	hf_hub_download("${a.id}", "sklearn_model.joblib")
)
# only load pickle files from sources you trust
# read more about it here https://skops.readthedocs.io/en/stable/persistence.html`],sklearn=a=>{var e,c,d,h,g;if(a.tags.includes("skops")){const _=(d=(c=(e=a.config)==null?void 0:e.sklearn)==null?void 0:c.model)==null?void 0:d.file,_e=(g=(h=a.config)==null?void 0:h.sklearn)==null?void 0:g.model_format;return _?_e==="pickle"?skopsPickle(a,_):skopsFormat(a,_):["#  Model filename not specified in config.json"]}else return skopsJobLib(a)},stable_audio_tools=a=>[`import torch
import torchaudio
from einops import rearrange
from stable_audio_tools import get_pretrained_model
from stable_audio_tools.inference.generation import generate_diffusion_cond

device = "cuda" if torch.cuda.is_available() else "cpu"

# Download model
model, model_config = get_pretrained_model("${a.id}")
sample_rate = model_config["sample_rate"]
sample_size = model_config["sample_size"]

model = model.to(device)

# Set up text and timing conditioning
conditioning = [{
	"prompt": "128 BPM tech house drum loop",
}]

# Generate stereo audio
output = generate_diffusion_cond(
	model,
	conditioning=conditioning,
	sample_size=sample_size,
	device=device
)

# Rearrange audio batch to a single sequence
output = rearrange(output, "b d n -> d (b n)")

# Peak normalize, clip, convert to int16, and save to file
output = output.to(torch.float32).div(torch.max(torch.abs(output))).clamp(-1, 1).mul(32767).to(torch.int16).cpu()
torchaudio.save("output.wav", output, sample_rate)`],fastai=a=>[`from huggingface_hub import from_pretrained_fastai

learn = from_pretrained_fastai("${a.id}")`],sam2=a=>{const e=`# Use SAM2 with images
import torch
from sam2.sam2_image_predictor import SAM2ImagePredictor

predictor = SAM2ImagePredictor.from_pretrained(${a.id})

with torch.inference_mode(), torch.autocast("cuda", dtype=torch.bfloat16):
    predictor.set_image(<your_image>)
    masks, _, _ = predictor.predict(<input_prompts>)`,c=`# Use SAM2 with videos
import torch
from sam2.sam2_video_predictor import SAM2VideoPredictor
	
predictor = SAM2VideoPredictor.from_pretrained(${a.id})

with torch.inference_mode(), torch.autocast("cuda", dtype=torch.bfloat16):
    state = predictor.init_state(<your_video>)

    # add new prompts and instantly get the output on the same frame
    frame_idx, object_ids, masks = predictor.add_new_points(state, <your_prompts>):

    # propagate the prompts to get masklets throughout the video
    for frame_idx, object_ids, masks in predictor.propagate_in_video(state):
        ...`;return[e,c]},sampleFactory=a=>[`python -m sample_factory.huggingface.load_from_hub -r ${a.id} -d ./train_dir`];function get_widget_examples_from_st_model(a){var c,d;const e=(c=a.widgetData)==null?void 0:c[0];if(e!=null&&e.source_sentence&&((d=e==null?void 0:e.sentences)!=null&&d.length))return[e.source_sentence,...e.sentences]}const sentenceTransformers=a=>{const e=a.tags.includes(TAG_CUSTOM_CODE)?", trust_remote_code=True":"";if(a.tags.includes("cross-encoder")||a.pipeline_tag=="text-ranking")return[`from sentence_transformers import CrossEncoder

model = CrossEncoder("${a.id}"${e})

query = "Which planet is known as the Red Planet?"
passages = [
	"Venus is often called Earth's twin because of its similar size and proximity.",
	"Mars, known for its reddish appearance, is often referred to as the Red Planet.",
	"Jupiter, the largest planet in our solar system, has a prominent red spot.",
	"Saturn, famous for its rings, is sometimes mistaken for the Red Planet."
]

scores = model.predict([(query, passage) for passage in passages])
print(scores)`];const c=get_widget_examples_from_st_model(a)??["The weather is lovely today.","It's so sunny outside!","He drove to the stadium."];return[`from sentence_transformers import SentenceTransformer

model = SentenceTransformer("${a.id}"${e})

sentences = ${JSON.stringify(c,null,4)}
embeddings = model.encode(sentences)

similarities = model.similarity(embeddings, embeddings)
print(similarities.shape)
# [${c.length}, ${c.length}]`]},setfit=a=>[`from setfit import SetFitModel

model = SetFitModel.from_pretrained("${a.id}")`],spacy=a=>[`!pip install https://huggingface.co/${a.id}/resolve/main/${nameWithoutNamespace(a.id)}-any-py3-none-any.whl

# Using spacy.load().
import spacy
nlp = spacy.load("${nameWithoutNamespace(a.id)}")

# Importing as module.
import ${nameWithoutNamespace(a.id)}
nlp = ${nameWithoutNamespace(a.id)}.load()`],span_marker=a=>[`from span_marker import SpanMarkerModel

model = SpanMarkerModel.from_pretrained("${a.id}")`],stanza=a=>[`import stanza

stanza.download("${nameWithoutNamespace(a.id).replace("stanza-","")}")
nlp = stanza.Pipeline("${nameWithoutNamespace(a.id).replace("stanza-","")}")`],speechBrainMethod=a=>{switch(a){case"EncoderClassifier":return"classify_file";case"EncoderDecoderASR":case"EncoderASR":return"transcribe_file";case"SpectralMaskEnhancement":return"enhance_file";case"SepformerSeparation":return"separate_file";default:return}},speechbrain=a=>{var d,h;const e=(h=(d=a.config)==null?void 0:d.speechbrain)==null?void 0:h.speechbrain_interface;if(e===void 0)return["# interface not specified in config.json"];const c=speechBrainMethod(e);return c===void 0?["# interface in config.json invalid"]:[`from speechbrain.pretrained import ${e}
model = ${e}.from_hparams(
  "${a.id}"
)
model.${c}("file.wav")`]},terratorch=a=>[`from terratorch.registry import BACKBONE_REGISTRY

model = BACKBONE_REGISTRY.build("${a.id}")`],transformers=a=>{var h;const e=a.transformersInfo;if(!e)return["#  Type of model unknown"];const c=a.tags.includes(TAG_CUSTOM_CODE)?", trust_remote_code=True":"";let d;if(e.processor){const g=e.processor==="AutoTokenizer"?"tokenizer":e.processor==="AutoFeatureExtractor"?"extractor":"processor";d=["# Load model directly",`from transformers import ${e.processor}, ${e.auto_model}`,"",`${g} = ${e.processor}.from_pretrained("${a.id}"`+c+")",`model = ${e.auto_model}.from_pretrained("${a.id}"`+c+")"].join(`
`)}else d=["# Load model directly",`from transformers import ${e.auto_model}`,`model = ${e.auto_model}.from_pretrained("${a.id}"`+c+")"].join(`
`);if(a.pipeline_tag&&((h=LIBRARY_TASK_MAPPING.transformers)!=null&&h.includes(a.pipeline_tag))){const g=["# Use a pipeline as a high-level helper","from transformers import pipeline","",`pipe = pipeline("${a.pipeline_tag}", model="${a.id}"`+c+")"];return a.tags.includes("conversational")&&(a.tags.includes("image-text-to-text")?(g.push("messages = [",["    {",'        "role": "user",','        "content": [','            {"type": "image", "url": "https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/p-blog/candy.JPG"},','            {"type": "text", "text": "What animal is on the candy?"}',"        ]","    },"].join(`
`),"]"),g.push("pipe(text=messages)")):(g.push("messages = [",'    {"role": "user", "content": "Who are you?"},',"]"),g.push("pipe(messages)"))),[g.join(`
`),d]}return[d]},transformersJS=a=>{if(!a.pipeline_tag)return["//  Unknown pipeline tag"];const e="@huggingface/transformers";return[`// npm i ${e}
import { pipeline } from '${e}';

// Allocate pipeline
const pipe = await pipeline('${a.pipeline_tag}', '${a.id}');`]},peftTask=a=>{switch(a){case"CAUSAL_LM":return"CausalLM";case"SEQ_2_SEQ_LM":return"Seq2SeqLM";case"TOKEN_CLS":return"TokenClassification";case"SEQ_CLS":return"SequenceClassification";default:return}},peft=a=>{var h;const{base_model_name_or_path:e,task_type:c}=((h=a.config)==null?void 0:h.peft)??{},d=peftTask(c);return d?e?[`from peft import PeftModel
from transformers import AutoModelFor${d}

base_model = AutoModelFor${d}.from_pretrained("${e}")
model = PeftModel.from_pretrained(base_model, "${a.id}")`]:["Base model is not found."]:["Task type is invalid."]},fasttext=a=>[`from huggingface_hub import hf_hub_download
import fasttext

model = fasttext.load_model(hf_hub_download("${a.id}", "model.bin"))`],stableBaselines3=a=>[`from huggingface_sb3 import load_from_hub
checkpoint = load_from_hub(
	repo_id="${a.id}",
	filename="{MODEL FILENAME}.zip",
)`],nemoDomainResolver=(a,e)=>{switch(a){case"ASR":return[`import nemo.collections.asr as nemo_asr
asr_model = nemo_asr.models.ASRModel.from_pretrained("${e.id}")

transcriptions = asr_model.transcribe(["file.wav"])`];default:return}},mlAgents=a=>[`mlagents-load-from-hf --repo-id="${a.id}" --local-dir="./download: string[]s"`],sentis=()=>[`string modelName = "[Your model name here].sentis";
Model model = ModelLoader.Load(Application.streamingAssetsPath + "/" + modelName);
IWorker engine = WorkerFactory.CreateWorker(BackendType.GPUCompute, model);
// Please see provided C# file for more details
`],sana=a=>[`
# Load the model and infer image from text
import torch
from app.sana_pipeline import SanaPipeline
from torchvision.utils import save_image

sana = SanaPipeline("configs/sana_config/1024ms/Sana_1600M_img1024.yaml")
sana.from_pretrained("hf://${a.id}")

image = sana(
    prompt='a cyberpunk cat with a neon sign that says "Sana"',
    height=1024,
    width=1024,
    guidance_scale=5.0,
    pag_guidance_scale=2.0,
    num_inference_steps=18,
) `],vfimamba=a=>[`from Trainer_finetune import Model

model = Model.from_pretrained("${a.id}")`],voicecraft=a=>[`from voicecraft import VoiceCraft

model = VoiceCraft.from_pretrained("${a.id}")`],chattts=()=>[`import ChatTTS
import torchaudio

chat = ChatTTS.Chat()
chat.load_models(compile=False) # Set to True for better performance

texts = ["PUT YOUR TEXT HERE",]

wavs = chat.infer(texts, )

torchaudio.save("output1.wav", torch.from_numpy(wavs[0]), 24000)`],ultralytics=a=>{const e=a.tags.find(h=>h.match(/^yolov\d+$/)),c=e?`YOLOv${e.slice(4)}`:"YOLOvXX";return[(e?"":`# Couldn't find a valid YOLO version tag.
# Replace XX with the correct version.
`)+`from ultralytics import ${c}

model = ${c}.from_pretrained("${a.id}")
source = 'http://images.cocodataset.org/val2017/000000039769.jpg'
model.predict(source=source, save=True)`]},birefnet=a=>[`# Option 1: use with transformers

from transformers import AutoModelForImageSegmentation
birefnet = AutoModelForImageSegmentation.from_pretrained("${a.id}", trust_remote_code=True)
`,`# Option 2: use with BiRefNet

# Install from https://github.com/ZhengPeng7/BiRefNet

from models.birefnet import BiRefNet
model = BiRefNet.from_pretrained("${a.id}")`],swarmformer=a=>[`from swarmformer import SwarmFormerModel

model = SwarmFormerModel.from_pretrained("${a.id}")
`],mlx_unknown=a=>[`# Download the model from the Hub
pip install huggingface_hub[hf_xet]

huggingface-cli download --local-dir ${nameWithoutNamespace(a.id)} ${a.id}`],mlxlm=a=>[`# Make sure mlx-lm is installed
# pip install --upgrade mlx-lm

# Generate text with mlx-lm
from mlx_lm import load, generate

model, tokenizer = load("${a.id}")

prompt = "Once upon a time in"
text = generate(model, tokenizer, prompt=prompt, verbose=True)`],mlxchat=a=>[`# Make sure mlx-lm is installed
# pip install --upgrade mlx-lm

# Generate text with mlx-lm
from mlx_lm import load, generate

model, tokenizer = load("${a.id}")

prompt = "Write a story about Einstein"
messages = [{"role": "user", "content": prompt}]
prompt = tokenizer.apply_chat_template(
    messages, add_generation_prompt=True
)

text = generate(model, tokenizer, prompt=prompt, verbose=True)`],mlxvlm=a=>[`# Make sure mlx-vlm is installed
# pip install --upgrade mlx-vlm

from mlx_vlm import load, generate
from mlx_vlm.prompt_utils import apply_chat_template
from mlx_vlm.utils import load_config

# Load the model
model, processor = load("${a.id}")
config = load_config("${a.id}")

# Prepare input
image = ["http://images.cocodataset.org/val2017/000000039769.jpg"]
prompt = "Describe this image."

# Apply chat template
formatted_prompt = apply_chat_template(
    processor, config, prompt, num_images=1
)

# Generate output
output = generate(model, processor, formatted_prompt, image)
print(output)`],mlxim=a=>[`from mlxim.model import create_model

model = create_model(${a.id})`],mlx=a=>a.pipeline_tag==="image-text-to-text"?mlxvlm(a):a.pipeline_tag==="text-generation"?a.tags.includes("conversational")?mlxchat(a):mlxlm(a):mlx_unknown(a),model2vec=a=>[`from model2vec import StaticModel

model = StaticModel.from_pretrained("${a.id}")`],nemo=a=>{let e;return a.tags.includes("automatic-speech-recognition")&&(e=nemoDomainResolver("ASR",a)),e??["# tag did not correspond to a valid NeMo domain."]},outetts=a=>{const e=a.tags??[];return e.includes("gguf")||e.includes("onnx")?[]:[`
  import outetts
  
  enum = outetts.Models("${a.id}".split("/", 1)[1])       # VERSION_1_0_SIZE_1B
  cfg  = outetts.ModelConfig.auto_config(enum, outetts.Backend.HF)
  tts  = outetts.Interface(cfg)
  
  speaker = tts.load_default_speaker("EN-FEMALE-1-NEUTRAL")
  tts.generate(
	  outetts.GenerationConfig(
		  text="Hello there, how are you doing?",
		  speaker=speaker,
	  )
  ).save("output.wav")
  `]},pxia=a=>[`from pxia import AutoModel

model = AutoModel.from_pretrained("${a.id}")`],pythae=a=>[`from pythae.models import AutoModel

model = AutoModel.load_from_hf_hub("${a.id}")`],musicgen=a=>[`from audiocraft.models import MusicGen

model = MusicGen.get_pretrained("${a.id}")

descriptions = ['happy rock', 'energetic EDM', 'sad jazz']
wav = model.generate(descriptions)  # generates 3 samples.`],magnet=a=>[`from audiocraft.models import MAGNeT
	
model = MAGNeT.get_pretrained("${a.id}")

descriptions = ['disco beat', 'energetic EDM', 'funky groove']
wav = model.generate(descriptions)  # generates 3 samples.`],audiogen=a=>[`from audiocraft.models import AudioGen
	
model = AudioGen.get_pretrained("${a.id}")
model.set_generation_params(duration=5)  # generate 5 seconds.
descriptions = ['dog barking', 'sirene of an emergency vehicle', 'footsteps in a corridor']
wav = model.generate(descriptions)  # generates 3 samples.`],anemoi=a=>[`from anemoi.inference.runners.default import DefaultRunner
from anemoi.inference.config import Configuration
# Create Configuration
config = Configuration(checkpoint = {"huggingface":{"repo_id":"${a.id}"}})
# Load Runner
runner = DefaultRunner(config)`],audiocraft=a=>a.tags.includes("musicgen")?musicgen(a):a.tags.includes("audiogen")?audiogen(a):a.tags.includes("magnet")?magnet(a):["# Type of model unknown."],whisperkit=()=>[`# Install CLI with Homebrew on macOS device
brew install whisperkit-cli

# View all available inference options
whisperkit-cli transcribe --help
	
# Download and run inference using whisper base model
whisperkit-cli transcribe --audio-path /path/to/audio.mp3

# Or use your preferred model variant
whisperkit-cli transcribe --model "large-v3" --model-prefix "distil" --audio-path /path/to/audio.mp3 --verbose`],threedtopia_xl=a=>[`from threedtopia_xl.models import threedtopia_xl

model = threedtopia_xl.from_pretrained("${a.id}")
model.generate(cond="path/to/image.png")`],zonos=a=>[`# pip install git+https://github.com/Zyphra/Zonos.git
import torchaudio
from zonos.model import Zonos
from zonos.conditioning import make_cond_dict

model = Zonos.from_pretrained("${a.id}", device="cuda")

wav, sr = torchaudio.load("speaker.wav")           # 5-10s reference clip
speaker = model.make_speaker_embedding(wav, sr)

cond  = make_cond_dict(text="Hello, world!", speaker=speaker, language="en-us")
codes = model.generate(model.prepare_conditioning(cond))

audio = model.autoencoder.decode(codes)[0].cpu()
torchaudio.save("sample.wav", audio, model.autoencoder.sampling_rate)
`],MODEL_LIBRARIES_UI_ELEMENTS={acestep:{prettyLabel:"ACE-Step",repoName:"ACE-Step",repoUrl:"https://github.com/ace-step/ACE-Step",filter:!1,countDownloads:'path:"ace_step_transformer/config.json"'},"adapter-transformers":{prettyLabel:"Adapters",repoName:"adapters",repoUrl:"https://github.com/Adapter-Hub/adapters",docsUrl:"https://huggingface.co/docs/hub/adapters",snippets:adapters,filter:!0,countDownloads:'path:"adapter_config.json"'},allennlp:{prettyLabel:"AllenNLP",repoName:"AllenNLP",repoUrl:"https://github.com/allenai/allennlp",docsUrl:"https://huggingface.co/docs/hub/allennlp",snippets:allennlp,filter:!0},anemoi:{prettyLabel:"AnemoI",repoName:"AnemoI",repoUrl:"https://github.com/ecmwf/anemoi-inference",docsUrl:"https://anemoi-docs.readthedocs.io/en/latest/",filter:!1,countDownloads:'path_extension:"ckpt"',snippets:anemoi},araclip:{prettyLabel:"AraClip",repoName:"AraClip",repoUrl:"https://huggingface.co/Arabic-Clip/araclip",filter:!1,snippets:araclip},asteroid:{prettyLabel:"Asteroid",repoName:"Asteroid",repoUrl:"https://github.com/asteroid-team/asteroid",docsUrl:"https://huggingface.co/docs/hub/asteroid",snippets:asteroid,filter:!0,countDownloads:'path:"pytorch_model.bin"'},audiocraft:{prettyLabel:"Audiocraft",repoName:"audiocraft",repoUrl:"https://github.com/facebookresearch/audiocraft",snippets:audiocraft,filter:!1,countDownloads:'path:"state_dict.bin"'},audioseal:{prettyLabel:"AudioSeal",repoName:"audioseal",repoUrl:"https://github.com/facebookresearch/audioseal",filter:!1,countDownloads:'path_extension:"pth"',snippets:audioseal},"bagel-mot":{prettyLabel:"Bagel",repoName:"Bagel",repoUrl:"https://github.com/ByteDance-Seed/Bagel/",filter:!1,countDownloads:'path:"llm_config.json"'},ben2:{prettyLabel:"BEN2",repoName:"BEN2",repoUrl:"https://github.com/PramaLLC/BEN2",snippets:ben2,filter:!1},bertopic:{prettyLabel:"BERTopic",repoName:"BERTopic",repoUrl:"https://github.com/MaartenGr/BERTopic",snippets:bertopic,filter:!0},big_vision:{prettyLabel:"Big Vision",repoName:"big_vision",repoUrl:"https://github.com/google-research/big_vision",filter:!1,countDownloads:'path_extension:"npz"'},birder:{prettyLabel:"Birder",repoName:"Birder",repoUrl:"https://gitlab.com/birder/birder",filter:!1,countDownloads:'path_extension:"pt"'},birefnet:{prettyLabel:"BiRefNet",repoName:"BiRefNet",repoUrl:"https://github.com/ZhengPeng7/BiRefNet",snippets:birefnet,filter:!1},bm25s:{prettyLabel:"BM25S",repoName:"bm25s",repoUrl:"https://github.com/xhluca/bm25s",snippets:bm25s,filter:!1,countDownloads:'path:"params.index.json"'},champ:{prettyLabel:"Champ",repoName:"Champ",repoUrl:"https://github.com/fudan-generative-vision/champ",countDownloads:'path:"champ/motion_module.pth"'},chat_tts:{prettyLabel:"ChatTTS",repoName:"ChatTTS",repoUrl:"https://github.com/2noise/ChatTTS.git",snippets:chattts,filter:!1,countDownloads:'path:"asset/GPT.pt"'},colpali:{prettyLabel:"ColPali",repoName:"ColPali",repoUrl:"https://github.com/ManuelFay/colpali",filter:!1,countDownloads:'path:"adapter_config.json"'},comet:{prettyLabel:"COMET",repoName:"COMET",repoUrl:"https://github.com/Unbabel/COMET/",countDownloads:'path:"hparams.yaml"'},cosmos:{prettyLabel:"Cosmos",repoName:"Cosmos",repoUrl:"https://github.com/NVIDIA/Cosmos",countDownloads:'path:"config.json" OR path_extension:"pt"'},"cxr-foundation":{prettyLabel:"CXR Foundation",repoName:"cxr-foundation",repoUrl:"https://github.com/google-health/cxr-foundation",snippets:cxr_foundation,filter:!1,countDownloads:'path:"precomputed_embeddings/embeddings.npz" OR path:"pax-elixr-b-text/saved_model.pb"'},deepforest:{prettyLabel:"DeepForest",repoName:"deepforest",docsUrl:"https://deepforest.readthedocs.io/en/latest/",repoUrl:"https://github.com/weecology/DeepForest"},"depth-anything-v2":{prettyLabel:"DepthAnythingV2",repoName:"Depth Anything V2",repoUrl:"https://github.com/DepthAnything/Depth-Anything-V2",snippets:depth_anything_v2,filter:!1,countDownloads:'path_extension:"pth"'},"depth-pro":{prettyLabel:"Depth Pro",repoName:"Depth Pro",repoUrl:"https://github.com/apple/ml-depth-pro",countDownloads:'path_extension:"pt"',snippets:depth_pro,filter:!1},"derm-foundation":{prettyLabel:"Derm Foundation",repoName:"derm-foundation",repoUrl:"https://github.com/google-health/derm-foundation",snippets:derm_foundation,filter:!1,countDownloads:'path:"scin_dataset_precomputed_embeddings.npz" OR path:"saved_model.pb"'},"describe-anything":{prettyLabel:"Describe Anything",repoName:"Describe Anything",repoUrl:"https://github.com/NVlabs/describe-anything",snippets:describe_anything,filter:!1},"dia-tts":{prettyLabel:"Dia",repoName:"Dia",repoUrl:"https://github.com/nari-labs/dia",snippets:dia,filter:!1},diffree:{prettyLabel:"Diffree",repoName:"Diffree",repoUrl:"https://github.com/OpenGVLab/Diffree",filter:!1,countDownloads:'path:"diffree-step=000010999.ckpt"'},diffusers:{prettyLabel:"Diffusers",repoName:"/diffusers",repoUrl:"https://github.com/huggingface/diffusers",docsUrl:"https://huggingface.co/docs/hub/diffusers",snippets:diffusers,filter:!0},diffusionkit:{prettyLabel:"DiffusionKit",repoName:"DiffusionKit",repoUrl:"https://github.com/argmaxinc/DiffusionKit",snippets:diffusionkit},doctr:{prettyLabel:"docTR",repoName:"doctr",repoUrl:"https://github.com/mindee/doctr"},cartesia_pytorch:{prettyLabel:"Cartesia Pytorch",repoName:"Cartesia Pytorch",repoUrl:"https://github.com/cartesia-ai/cartesia_pytorch",snippets:cartesia_pytorch},cartesia_mlx:{prettyLabel:"Cartesia MLX",repoName:"Cartesia MLX",repoUrl:"https://github.com/cartesia-ai/cartesia_mlx",snippets:cartesia_mlx},clipscope:{prettyLabel:"clipscope",repoName:"clipscope",repoUrl:"https://github.com/Lewington-pitsos/clipscope",filter:!1,countDownloads:'path_extension:"pt"'},cosyvoice:{prettyLabel:"CosyVoice",repoName:"CosyVoice",repoUrl:"https://github.com/FunAudioLLM/CosyVoice",filter:!1,countDownloads:'path_extension:"onnx" OR path_extension:"pt"'},cotracker:{prettyLabel:"CoTracker",repoName:"CoTracker",repoUrl:"https://github.com/facebookresearch/co-tracker",filter:!1,countDownloads:'path_extension:"pth"'},edsnlp:{prettyLabel:"EDS-NLP",repoName:"edsnlp",repoUrl:"https://github.com/aphp/edsnlp",docsUrl:"https://aphp.github.io/edsnlp/latest/",filter:!1,snippets:edsnlp,countDownloads:'path_filename:"config" AND path_extension:"cfg"'},elm:{prettyLabel:"ELM",repoName:"elm",repoUrl:"https://github.com/slicex-ai/elm",filter:!1,countDownloads:'path_filename:"slicex_elm_config" AND path_extension:"json"'},espnet:{prettyLabel:"ESPnet",repoName:"ESPnet",repoUrl:"https://github.com/espnet/espnet",docsUrl:"https://huggingface.co/docs/hub/espnet",snippets:espnet,filter:!0},fairseq:{prettyLabel:"Fairseq",repoName:"fairseq",repoUrl:"https://github.com/pytorch/fairseq",snippets:fairseq,filter:!0},fastai:{prettyLabel:"fastai",repoName:"fastai",repoUrl:"https://github.com/fastai/fastai",docsUrl:"https://huggingface.co/docs/hub/fastai",snippets:fastai,filter:!0},fasttext:{prettyLabel:"fastText",repoName:"fastText",repoUrl:"https://fasttext.cc/",snippets:fasttext,filter:!0,countDownloads:'path_extension:"bin"'},flair:{prettyLabel:"Flair",repoName:"Flair",repoUrl:"https://github.com/flairNLP/flair",docsUrl:"https://huggingface.co/docs/hub/flair",snippets:flair,filter:!0,countDownloads:'path:"pytorch_model.bin"'},"gemma.cpp":{prettyLabel:"gemma.cpp",repoName:"gemma.cpp",repoUrl:"https://github.com/google/gemma.cpp",filter:!1,countDownloads:'path_extension:"sbs"'},"geometry-crafter":{prettyLabel:"GeometryCrafter",repoName:"GeometryCrafter",repoUrl:"https://github.com/TencentARC/GeometryCrafter",countDownloads:'path:"point_map_vae/diffusion_pytorch_model.safetensors"'},gliner:{prettyLabel:"GLiNER",repoName:"GLiNER",repoUrl:"https://github.com/urchade/GLiNER",snippets:gliner,filter:!1,countDownloads:'path:"gliner_config.json"'},"glyph-byt5":{prettyLabel:"Glyph-ByT5",repoName:"Glyph-ByT5",repoUrl:"https://github.com/AIGText/Glyph-ByT5",filter:!1,countDownloads:'path:"checkpoints/byt5_model.pt"'},grok:{prettyLabel:"Grok",repoName:"Grok",repoUrl:"https://github.com/xai-org/grok-1",filter:!1,countDownloads:'path:"ckpt/tensor00000_000" OR path:"ckpt-0/tensor00000_000"'},hallo:{prettyLabel:"Hallo",repoName:"Hallo",repoUrl:"https://github.com/fudan-generative-vision/hallo",countDownloads:'path:"hallo/net.pth"'},hezar:{prettyLabel:"Hezar",repoName:"Hezar",repoUrl:"https://github.com/hezarai/hezar",docsUrl:"https://hezarai.github.io/hezar",countDownloads:'path:"model_config.yaml" OR path:"embedding/embedding_config.yaml"'},htrflow:{prettyLabel:"HTRflow",repoName:"HTRflow",repoUrl:"https://github.com/AI-Riksarkivet/htrflow",docsUrl:"https://ai-riksarkivet.github.io/htrflow",snippets:htrflow},"hunyuan-dit":{prettyLabel:"HunyuanDiT",repoName:"HunyuanDiT",repoUrl:"https://github.com/Tencent/HunyuanDiT",countDownloads:'path:"pytorch_model_ema.pt" OR path:"pytorch_model_distill.pt"'},"hunyuan3d-2":{prettyLabel:"Hunyuan3D-2",repoName:"Hunyuan3D-2",repoUrl:"https://github.com/Tencent/Hunyuan3D-2",countDownloads:'path_filename:"model_index" OR path_filename:"config"'},imstoucan:{prettyLabel:"IMS Toucan",repoName:"IMS-Toucan",repoUrl:"https://github.com/DigitalPhonetics/IMS-Toucan",countDownloads:'path:"embedding_gan.pt" OR path:"Vocoder.pt" OR path:"ToucanTTS.pt"'},"index-tts":{prettyLabel:"IndexTTS",repoName:"IndexTTS",repoUrl:"https://github.com/index-tts/index-tts",snippets:indextts,filter:!1},"infinite-you":{prettyLabel:"InfiniteYou",repoName:"InfiniteYou",repoUrl:"https://github.com/bytedance/InfiniteYou",filter:!1,countDownloads:'path:"infu_flux_v1.0/sim_stage1/image_proj_model.bin" OR path:"infu_flux_v1.0/aes_stage2/image_proj_model.bin"'},keras:{prettyLabel:"Keras",repoName:"Keras",repoUrl:"https://github.com/keras-team/keras",docsUrl:"https://huggingface.co/docs/hub/keras",snippets:keras,filter:!0,countDownloads:'path:"config.json" OR path_extension:"keras"'},"tf-keras":{prettyLabel:"TF-Keras",repoName:"TF-Keras",repoUrl:"https://github.com/keras-team/tf-keras",docsUrl:"https://huggingface.co/docs/hub/tf-keras",snippets:tf_keras,countDownloads:'path:"saved_model.pb"'},"keras-hub":{prettyLabel:"KerasHub",repoName:"KerasHub",repoUrl:"https://github.com/keras-team/keras-hub",docsUrl:"https://keras.io/keras_hub/",snippets:keras_hub,filter:!0},"kimi-audio":{prettyLabel:"KimiAudio",repoName:"KimiAudio",repoUrl:"https://github.com/MoonshotAI/Kimi-Audio",snippets:kimi_audio,filter:!1},k2:{prettyLabel:"K2",repoName:"k2",repoUrl:"https://github.com/k2-fsa/k2"},"lightning-ir":{prettyLabel:"Lightning IR",repoName:"Lightning IR",repoUrl:"https://github.com/webis-de/lightning-ir",snippets:lightning_ir},liveportrait:{prettyLabel:"LivePortrait",repoName:"LivePortrait",repoUrl:"https://github.com/KwaiVGI/LivePortrait",filter:!1,countDownloads:'path:"liveportrait/landmark.onnx"'},"llama-cpp-python":{prettyLabel:"llama-cpp-python",repoName:"llama-cpp-python",repoUrl:"https://github.com/abetlen/llama-cpp-python",snippets:llama_cpp_python},"mini-omni2":{prettyLabel:"Mini-Omni2",repoName:"Mini-Omni2",repoUrl:"https://github.com/gpt-omni/mini-omni2",countDownloads:'path:"model_config.yaml"'},mindspore:{prettyLabel:"MindSpore",repoName:"mindspore",repoUrl:"https://github.com/mindspore-ai/mindspore"},"magi-1":{prettyLabel:"MAGI-1",repoName:"MAGI-1",repoUrl:"https://github.com/SandAI-org/MAGI-1",countDownloads:'path:"ckpt/vae/config.json"'},"mamba-ssm":{prettyLabel:"MambaSSM",repoName:"MambaSSM",repoUrl:"https://github.com/state-spaces/mamba",filter:!1,snippets:mamba_ssm},"mars5-tts":{prettyLabel:"MARS5-TTS",repoName:"MARS5-TTS",repoUrl:"https://github.com/Camb-ai/MARS5-TTS",filter:!1,countDownloads:'path:"mars5_ar.safetensors"',snippets:mars5_tts},matanyone:{prettyLabel:"MatAnyone",repoName:"MatAnyone",repoUrl:"https://github.com/pq-yang/MatAnyone",snippets:matanyone,filter:!1},"mesh-anything":{prettyLabel:"MeshAnything",repoName:"MeshAnything",repoUrl:"https://github.com/buaacyw/MeshAnything",filter:!1,countDownloads:'path:"MeshAnything_350m.pth"',snippets:mesh_anything},merlin:{prettyLabel:"Merlin",repoName:"Merlin",repoUrl:"https://github.com/StanfordMIMI/Merlin",filter:!1,countDownloads:'path_extension:"pt"'},medvae:{prettyLabel:"MedVAE",repoName:"MedVAE",repoUrl:"https://github.com/StanfordMIMI/MedVAE",filter:!1,countDownloads:'path_extension:"ckpt"'},mitie:{prettyLabel:"MITIE",repoName:"MITIE",repoUrl:"https://github.com/mit-nlp/MITIE",countDownloads:'path_filename:"total_word_feature_extractor"'},"ml-agents":{prettyLabel:"ml-agents",repoName:"ml-agents",repoUrl:"https://github.com/Unity-Technologies/ml-agents",docsUrl:"https://huggingface.co/docs/hub/ml-agents",snippets:mlAgents,filter:!0,countDownloads:'path_extension:"onnx"'},mlx:{prettyLabel:"MLX",repoName:"MLX",repoUrl:"https://github.com/ml-explore/mlx-examples/tree/main",snippets:mlx,filter:!0},"mlx-image":{prettyLabel:"mlx-image",repoName:"mlx-image",repoUrl:"https://github.com/riccardomusmeci/mlx-image",docsUrl:"https://huggingface.co/docs/hub/mlx-image",snippets:mlxim,filter:!1,countDownloads:'path:"model.safetensors"'},"mlc-llm":{prettyLabel:"MLC-LLM",repoName:"MLC-LLM",repoUrl:"https://github.com/mlc-ai/mlc-llm",docsUrl:"https://llm.mlc.ai/docs/",filter:!1,countDownloads:'path:"mlc-chat-config.json"'},model2vec:{prettyLabel:"Model2Vec",repoName:"model2vec",repoUrl:"https://github.com/MinishLab/model2vec",snippets:model2vec,filter:!1},moshi:{prettyLabel:"Moshi",repoName:"Moshi",repoUrl:"https://github.com/kyutai-labs/moshi",filter:!1,countDownloads:'path:"tokenizer-e351c8d8-checkpoint125.safetensors"'},nemo:{prettyLabel:"NeMo",repoName:"NeMo",repoUrl:"https://github.com/NVIDIA/NeMo",snippets:nemo,filter:!0,countDownloads:'path_extension:"nemo" OR path:"model_config.yaml"'},"open-oasis":{prettyLabel:"open-oasis",repoName:"open-oasis",repoUrl:"https://github.com/etched-ai/open-oasis",countDownloads:'path:"oasis500m.safetensors"'},open_clip:{prettyLabel:"OpenCLIP",repoName:"OpenCLIP",repoUrl:"https://github.com/mlfoundations/open_clip",snippets:open_clip,filter:!0,countDownloads:`path:"open_clip_model.safetensors"
			OR path:"model.safetensors"
			OR path:"open_clip_pytorch_model.bin"
			OR path:"pytorch_model.bin"`},"open-sora":{prettyLabel:"Open-Sora",repoName:"Open-Sora",repoUrl:"https://github.com/hpcaitech/Open-Sora",filter:!1,countDownloads:'path:"Open_Sora_v2.safetensors"'},outetts:{prettyLabel:"OuteTTS",repoName:"OuteTTS",repoUrl:"https://github.com/edwko/OuteTTS",snippets:outetts,filter:!1},paddlenlp:{prettyLabel:"paddlenlp",repoName:"PaddleNLP",repoUrl:"https://github.com/PaddlePaddle/PaddleNLP",docsUrl:"https://huggingface.co/docs/hub/paddlenlp",snippets:paddlenlp,filter:!0,countDownloads:'path:"model_config.json"'},peft:{prettyLabel:"PEFT",repoName:"PEFT",repoUrl:"https://github.com/huggingface/peft",snippets:peft,filter:!0,countDownloads:'path:"adapter_config.json"'},"perception-encoder":{prettyLabel:"PerceptionEncoder",repoName:"PerceptionModels",repoUrl:"https://github.com/facebookresearch/perception_models",filter:!1,snippets:perception_encoder,countDownloads:'path_extension:"pt"'},"phantom-wan":{prettyLabel:"Phantom",repoName:"Phantom",repoUrl:"https://github.com/Phantom-video/Phantom",snippets:phantom_wan,filter:!1,countDownloads:'path_extension:"pth"'},pxia:{prettyLabel:"pxia",repoName:"pxia",repoUrl:"https://github.com/not-lain/pxia",snippets:pxia,filter:!1},"pyannote-audio":{prettyLabel:"pyannote.audio",repoName:"pyannote-audio",repoUrl:"https://github.com/pyannote/pyannote-audio",snippets:pyannote_audio,filter:!0},"py-feat":{prettyLabel:"Py-Feat",repoName:"Py-Feat",repoUrl:"https://github.com/cosanlab/py-feat",docsUrl:"https://py-feat.org/",filter:!1},pythae:{prettyLabel:"pythae",repoName:"pythae",repoUrl:"https://github.com/clementchadebec/benchmark_VAE",snippets:pythae,filter:!1},recurrentgemma:{prettyLabel:"RecurrentGemma",repoName:"recurrentgemma",repoUrl:"https://github.com/google-deepmind/recurrentgemma",filter:!1,countDownloads:'path:"tokenizer.model"'},relik:{prettyLabel:"Relik",repoName:"Relik",repoUrl:"https://github.com/SapienzaNLP/relik",snippets:relik,filter:!1},refiners:{prettyLabel:"Refiners",repoName:"Refiners",repoUrl:"https://github.com/finegrain-ai/refiners",docsUrl:"https://refine.rs/",filter:!1,countDownloads:'path:"model.safetensors"'},reverb:{prettyLabel:"Reverb",repoName:"Reverb",repoUrl:"https://github.com/revdotcom/reverb",filter:!1},saelens:{prettyLabel:"SAELens",repoName:"SAELens",repoUrl:"https://github.com/jbloomAus/SAELens",snippets:saelens,filter:!1},sam2:{prettyLabel:"sam2",repoName:"sam2",repoUrl:"https://github.com/facebookresearch/segment-anything-2",filter:!1,snippets:sam2,countDownloads:'path_extension:"pt"'},"sample-factory":{prettyLabel:"sample-factory",repoName:"sample-factory",repoUrl:"https://github.com/alex-petrenko/sample-factory",docsUrl:"https://huggingface.co/docs/hub/sample-factory",snippets:sampleFactory,filter:!0,countDownloads:'path:"cfg.json"'},sapiens:{prettyLabel:"sapiens",repoName:"sapiens",repoUrl:"https://github.com/facebookresearch/sapiens",filter:!1,countDownloads:'path_extension:"pt2" OR path_extension:"pth" OR path_extension:"onnx"'},"sentence-transformers":{prettyLabel:"sentence-transformers",repoName:"sentence-transformers",repoUrl:"https://github.com/UKPLab/sentence-transformers",docsUrl:"https://huggingface.co/docs/hub/sentence-transformers",snippets:sentenceTransformers,filter:!0},setfit:{prettyLabel:"setfit",repoName:"setfit",repoUrl:"https://github.com/huggingface/setfit",docsUrl:"https://huggingface.co/docs/hub/setfit",snippets:setfit,filter:!0},sklearn:{prettyLabel:"Scikit-learn",repoName:"Scikit-learn",repoUrl:"https://github.com/scikit-learn/scikit-learn",snippets:sklearn,filter:!0,countDownloads:'path:"sklearn_model.joblib"'},spacy:{prettyLabel:"spaCy",repoName:"spaCy",repoUrl:"https://github.com/explosion/spaCy",docsUrl:"https://huggingface.co/docs/hub/spacy",snippets:spacy,filter:!0,countDownloads:'path_extension:"whl"'},"span-marker":{prettyLabel:"SpanMarker",repoName:"SpanMarkerNER",repoUrl:"https://github.com/tomaarsen/SpanMarkerNER",docsUrl:"https://huggingface.co/docs/hub/span_marker",snippets:span_marker,filter:!0},speechbrain:{prettyLabel:"speechbrain",repoName:"speechbrain",repoUrl:"https://github.com/speechbrain/speechbrain",docsUrl:"https://huggingface.co/docs/hub/speechbrain",snippets:speechbrain,filter:!0,countDownloads:'path:"hyperparams.yaml"'},"ssr-speech":{prettyLabel:"SSR-Speech",repoName:"SSR-Speech",repoUrl:"https://github.com/WangHelin1997/SSR-Speech",filter:!1,countDownloads:'path_extension:".pth"'},"stable-audio-tools":{prettyLabel:"Stable Audio Tools",repoName:"stable-audio-tools",repoUrl:"https://github.com/Stability-AI/stable-audio-tools.git",filter:!1,countDownloads:'path:"model.safetensors"',snippets:stable_audio_tools},"diffusion-single-file":{prettyLabel:"Diffusion Single File",repoName:"diffusion-single-file",repoUrl:"https://github.com/comfyanonymous/ComfyUI",filter:!1,countDownloads:'path_extension:"safetensors"'},"seed-story":{prettyLabel:"SEED-Story",repoName:"SEED-Story",repoUrl:"https://github.com/TencentARC/SEED-Story",filter:!1,countDownloads:'path:"cvlm_llama2_tokenizer/tokenizer.model"',snippets:seed_story},soloaudio:{prettyLabel:"SoloAudio",repoName:"SoloAudio",repoUrl:"https://github.com/WangHelin1997/SoloAudio",filter:!1,countDownloads:'path:"soloaudio_v2.pt"'},"stable-baselines3":{prettyLabel:"stable-baselines3",repoName:"stable-baselines3",repoUrl:"https://github.com/huggingface/huggingface_sb3",docsUrl:"https://huggingface.co/docs/hub/stable-baselines3",snippets:stableBaselines3,filter:!0,countDownloads:'path_extension:"zip"'},stanza:{prettyLabel:"Stanza",repoName:"stanza",repoUrl:"https://github.com/stanfordnlp/stanza",docsUrl:"https://huggingface.co/docs/hub/stanza",snippets:stanza,filter:!0,countDownloads:'path:"models/default.zip"'},swarmformer:{prettyLabel:"SwarmFormer",repoName:"SwarmFormer",repoUrl:"https://github.com/takara-ai/SwarmFormer",snippets:swarmformer,filter:!1},"f5-tts":{prettyLabel:"F5-TTS",repoName:"F5-TTS",repoUrl:"https://github.com/SWivid/F5-TTS",filter:!1,countDownloads:'path_extension:"safetensors" OR path_extension:"pt"'},genmo:{prettyLabel:"Genmo",repoName:"Genmo",repoUrl:"https://github.com/genmoai/models",filter:!1,countDownloads:'path:"vae_stats.json"'},tensorflowtts:{prettyLabel:"TensorFlowTTS",repoName:"TensorFlowTTS",repoUrl:"https://github.com/TensorSpeech/TensorFlowTTS",snippets:tensorflowtts},tabpfn:{prettyLabel:"TabPFN",repoName:"TabPFN",repoUrl:"https://github.com/PriorLabs/TabPFN"},terratorch:{prettyLabel:"TerraTorch",repoName:"TerraTorch",repoUrl:"https://github.com/IBM/terratorch",docsUrl:"https://ibm.github.io/terratorch/",filter:!1,countDownloads:'path_extension:"pt"',snippets:terratorch},"tic-clip":{prettyLabel:"TiC-CLIP",repoName:"TiC-CLIP",repoUrl:"https://github.com/apple/ml-tic-clip",filter:!1,countDownloads:'path_extension:"pt" AND path_prefix:"checkpoints/"'},timesfm:{prettyLabel:"TimesFM",repoName:"timesfm",repoUrl:"https://github.com/google-research/timesfm",filter:!1,countDownloads:'path:"checkpoints/checkpoint_1100000/state/checkpoint" OR path:"checkpoints/checkpoint_2150000/state/checkpoint" OR path_extension:"ckpt"'},timm:{prettyLabel:"timm",repoName:"pytorch-image-models",repoUrl:"https://github.com/rwightman/pytorch-image-models",docsUrl:"https://huggingface.co/docs/hub/timm",snippets:timm,filter:!0,countDownloads:'path:"pytorch_model.bin" OR path:"model.safetensors"'},tirex:{prettyLabel:"TiRex",repoName:"TiRex",repoUrl:"https://github.com/NX-AI/tirex",countDownloads:'path_extension:"ckpt"'},torchgeo:{prettyLabel:"TorchGeo",repoName:"TorchGeo",repoUrl:"https://github.com/microsoft/torchgeo",docsUrl:"https://torchgeo.readthedocs.io/",filter:!1,countDownloads:'path_extension:"pt" OR path_extension:"pth"'},transformers:{prettyLabel:"Transformers",repoName:"/transformers",repoUrl:"https://github.com/huggingface/transformers",docsUrl:"https://huggingface.co/docs/hub/transformers",snippets:transformers,filter:!0},"transformers.js":{prettyLabel:"Transformers.js",repoName:"transformers.js",repoUrl:"https://github.com/huggingface/transformers.js",docsUrl:"https://huggingface.co/docs/hub/transformers-js",snippets:transformersJS,filter:!0},trellis:{prettyLabel:"Trellis",repoName:"Trellis",repoUrl:"https://github.com/microsoft/TRELLIS",countDownloads:'path_extension:"safetensors"'},ultralytics:{prettyLabel:"ultralytics",repoName:"ultralytics",repoUrl:"https://github.com/ultralytics/ultralytics",docsUrl:"https://github.com/ultralytics/ultralytics",filter:!1,countDownloads:'path_extension:"pt"',snippets:ultralytics},"uni-3dar":{prettyLabel:"Uni-3DAR",repoName:"Uni-3DAR",repoUrl:"https://github.com/dptech-corp/Uni-3DAR",docsUrl:"https://github.com/dptech-corp/Uni-3DAR",countDownloads:'path_extension:"pt"'},"unity-sentis":{prettyLabel:"unity-sentis",repoName:"unity-sentis",repoUrl:"https://github.com/Unity-Technologies/sentis-samples",snippets:sentis,filter:!0,countDownloads:'path_extension:"sentis"'},sana:{prettyLabel:"Sana",repoName:"Sana",repoUrl:"https://github.com/NVlabs/Sana",countDownloads:'path_extension:"pth"',snippets:sana},"vfi-mamba":{prettyLabel:"VFIMamba",repoName:"VFIMamba",repoUrl:"https://github.com/MCG-NJU/VFIMamba",countDownloads:'path_extension:"pkl"',snippets:vfimamba},voicecraft:{prettyLabel:"VoiceCraft",repoName:"VoiceCraft",repoUrl:"https://github.com/jasonppy/VoiceCraft",docsUrl:"https://github.com/jasonppy/VoiceCraft",snippets:voicecraft},wham:{prettyLabel:"WHAM",repoName:"wham",repoUrl:"https://huggingface.co/microsoft/wham",docsUrl:"https://huggingface.co/microsoft/wham/blob/main/README.md",countDownloads:'path_extension:"ckpt"'},whisperkit:{prettyLabel:"WhisperKit",repoName:"WhisperKit",repoUrl:"https://github.com/argmaxinc/WhisperKit",docsUrl:"https://github.com/argmaxinc/WhisperKit?tab=readme-ov-file#homebrew",snippets:whisperkit,countDownloads:'path_filename:"model" AND path_extension:"mil" AND _exists_:"path_prefix"'},yolov10:{prettyLabel:"YOLOv10",repoName:"YOLOv10",repoUrl:"https://github.com/THU-MIG/yolov10",docsUrl:"https://github.com/THU-MIG/yolov10",countDownloads:'path_extension:"pt" OR path_extension:"safetensors"',snippets:ultralytics},zonos:{prettyLabel:"Zonos",repoName:"Zonos",repoUrl:"https://github.com/Zyphra/Zonos",docsUrl:"https://github.com/Zyphra/Zonos",snippets:zonos,filter:!1},"3dtopia-xl":{prettyLabel:"3DTopia-XL",repoName:"3DTopia-XL",repoUrl:"https://github.com/3DTopia/3DTopia-XL",filter:!1,countDownloads:'path:"model_vae_fp16.pt"',snippets:threedtopia_xl}};Object.entries(MODEL_LIBRARIES_UI_ELEMENTS).filter(([a,e])=>e.filter).map(([a])=>a);var GGMLFileQuantizationType;(function(a){a[a.F32=0]="F32",a[a.F16=1]="F16",a[a.Q4_0=2]="Q4_0",a[a.Q4_1=3]="Q4_1",a[a.Q4_1_SOME_F16=4]="Q4_1_SOME_F16",a[a.Q4_2=5]="Q4_2",a[a.Q4_3=6]="Q4_3",a[a.Q8_0=7]="Q8_0",a[a.Q5_0=8]="Q5_0",a[a.Q5_1=9]="Q5_1",a[a.Q2_K=10]="Q2_K",a[a.Q3_K_S=11]="Q3_K_S",a[a.Q3_K_M=12]="Q3_K_M",a[a.Q3_K_L=13]="Q3_K_L",a[a.Q4_K_S=14]="Q4_K_S",a[a.Q4_K_M=15]="Q4_K_M",a[a.Q5_K_S=16]="Q5_K_S",a[a.Q5_K_M=17]="Q5_K_M",a[a.Q6_K=18]="Q6_K",a[a.IQ2_XXS=19]="IQ2_XXS",a[a.IQ2_XS=20]="IQ2_XS",a[a.Q2_K_S=21]="Q2_K_S",a[a.IQ3_XS=22]="IQ3_XS",a[a.IQ3_XXS=23]="IQ3_XXS",a[a.IQ1_S=24]="IQ1_S",a[a.IQ4_NL=25]="IQ4_NL",a[a.IQ3_S=26]="IQ3_S",a[a.IQ3_M=27]="IQ3_M",a[a.IQ2_S=28]="IQ2_S",a[a.IQ2_M=29]="IQ2_M",a[a.IQ4_XS=30]="IQ4_XS",a[a.IQ1_M=31]="IQ1_M",a[a.BF16=32]="BF16",a[a.Q4_0_4_4=33]="Q4_0_4_4",a[a.Q4_0_4_8=34]="Q4_0_4_8",a[a.Q4_0_8_8=35]="Q4_0_8_8",a[a.TQ1_0=36]="TQ1_0",a[a.TQ2_0=37]="TQ2_0",a[a.Q2_K_XL=1e3]="Q2_K_XL",a[a.Q3_K_XL=1001]="Q3_K_XL",a[a.Q4_K_XL=1002]="Q4_K_XL",a[a.Q5_K_XL=1003]="Q5_K_XL",a[a.Q6_K_XL=1004]="Q6_K_XL",a[a.Q8_K_XL=1005]="Q8_K_XL"})(GGMLFileQuantizationType||(GGMLFileQuantizationType={}));const ggufQuants=Object.values(GGMLFileQuantizationType).filter(a=>typeof a=="string");new RegExp(`(?<quant>${ggufQuants.join("|")})(_(?<sizeVariation>[A-Z]+))?`);GGMLFileQuantizationType.F32,GGMLFileQuantizationType.BF16,GGMLFileQuantizationType.F16,GGMLFileQuantizationType.Q8_K_XL,GGMLFileQuantizationType.Q8_0,GGMLFileQuantizationType.Q6_K_XL,GGMLFileQuantizationType.Q6_K,GGMLFileQuantizationType.Q5_K_XL,GGMLFileQuantizationType.Q5_K_M,GGMLFileQuantizationType.Q5_K_S,GGMLFileQuantizationType.Q5_0,GGMLFileQuantizationType.Q5_1,GGMLFileQuantizationType.Q4_K_XL,GGMLFileQuantizationType.Q4_K_M,GGMLFileQuantizationType.Q4_K_S,GGMLFileQuantizationType.IQ4_NL,GGMLFileQuantizationType.IQ4_XS,GGMLFileQuantizationType.Q4_0_4_4,GGMLFileQuantizationType.Q4_0_4_8,GGMLFileQuantizationType.Q4_0_8_8,GGMLFileQuantizationType.Q4_1_SOME_F16,GGMLFileQuantizationType.Q4_0,GGMLFileQuantizationType.Q4_1,GGMLFileQuantizationType.Q4_2,GGMLFileQuantizationType.Q4_3,GGMLFileQuantizationType.Q3_K_XL,GGMLFileQuantizationType.Q3_K_L,GGMLFileQuantizationType.Q3_K_M,GGMLFileQuantizationType.Q3_K_S,GGMLFileQuantizationType.IQ3_M,GGMLFileQuantizationType.IQ3_S,GGMLFileQuantizationType.IQ3_XS,GGMLFileQuantizationType.IQ3_XXS,GGMLFileQuantizationType.Q2_K_XL,GGMLFileQuantizationType.Q2_K,GGMLFileQuantizationType.Q2_K_S,GGMLFileQuantizationType.IQ2_M,GGMLFileQuantizationType.IQ2_S,GGMLFileQuantizationType.IQ2_XS,GGMLFileQuantizationType.IQ2_XXS,GGMLFileQuantizationType.IQ1_S,GGMLFileQuantizationType.IQ1_M,GGMLFileQuantizationType.TQ1_0,GGMLFileQuantizationType.TQ2_0;var GGMLQuantizationType;(function(a){a[a.F32=0]="F32",a[a.F16=1]="F16",a[a.Q4_0=2]="Q4_0",a[a.Q4_1=3]="Q4_1",a[a.Q5_0=6]="Q5_0",a[a.Q5_1=7]="Q5_1",a[a.Q8_0=8]="Q8_0",a[a.Q8_1=9]="Q8_1",a[a.Q2_K=10]="Q2_K",a[a.Q3_K=11]="Q3_K",a[a.Q4_K=12]="Q4_K",a[a.Q5_K=13]="Q5_K",a[a.Q6_K=14]="Q6_K",a[a.Q8_K=15]="Q8_K",a[a.IQ2_XXS=16]="IQ2_XXS",a[a.IQ2_XS=17]="IQ2_XS",a[a.IQ3_XXS=18]="IQ3_XXS",a[a.IQ1_S=19]="IQ1_S",a[a.IQ4_NL=20]="IQ4_NL",a[a.IQ3_S=21]="IQ3_S",a[a.IQ2_S=22]="IQ2_S",a[a.IQ4_XS=23]="IQ4_XS",a[a.I8=24]="I8",a[a.I16=25]="I16",a[a.I32=26]="I32",a[a.I64=27]="I64",a[a.F64=28]="F64",a[a.IQ1_M=29]="IQ1_M",a[a.BF16=30]="BF16",a[a.TQ1_0=34]="TQ1_0",a[a.TQ2_0=35]="TQ2_0"})(GGMLQuantizationType||(GGMLQuantizationType={}));const templates={js:{fetch:{basic:`async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.json();
	return result;
}

query({ inputs: {{ providerInputs.asObj.inputs }} }).then((response) => {
    console.log(JSON.stringify(response));
});`,basicAudio:`async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "audio/flac",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.json();
	return result;
}

query({ inputs: {{ providerInputs.asObj.inputs }} }).then((response) => {
    console.log(JSON.stringify(response));
});`,basicImage:`async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "image/jpeg",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.json();
	return result;
}

query({ inputs: {{ providerInputs.asObj.inputs }} }).then((response) => {
    console.log(JSON.stringify(response));
});`,textToAudio:`{% if model.library_name == "transformers" %}
async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.blob();
    return result;
}

query({ inputs: {{ providerInputs.asObj.inputs }} }).then((response) => {
    // Returns a byte object of the Audio wavform. Use it directly!
});
{% else %}
async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
    const result = await response.json();
    return result;
}

query({ inputs: {{ providerInputs.asObj.inputs }} }).then((response) => {
    console.log(JSON.stringify(response));
});
{% endif %} `,textToImage:`async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.blob();
	return result;
}


query({ {{ providerInputs.asTsString }} }).then((response) => {
    // Use image
});`,textToSpeech:`{% if model.library_name == "transformers" %}
async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.blob();
    return result;
}

query({ text: {{ inputs.asObj.inputs }} }).then((response) => {
    // Returns a byte object of the Audio wavform. Use it directly!
});
{% else %}
async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
    const result = await response.json();
    return result;
}

query({ text: {{ inputs.asObj.inputs }} }).then((response) => {
    console.log(JSON.stringify(response));
});
{% endif %} `,zeroShotClassification:`async function query(data) {
    const response = await fetch(
		"{{ fullUrl }}",
        {
            headers: {
				Authorization: "{{ authorizationHeader }}",
                "Content-Type": "application/json",
{% if billTo %}
                "X-HF-Bill-To": "{{ billTo }}",
{% endif %}         },
            method: "POST",
            body: JSON.stringify(data),
        }
    );
    const result = await response.json();
    return result;
}

query({
    inputs: {{ providerInputs.asObj.inputs }},
    parameters: { candidate_labels: ["refund", "legal", "faq"] }
}).then((response) => {
    console.log(JSON.stringify(response));
});`},"huggingface.js":{basic:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const output = await client.{{ methodName }}({
	model: "{{ model.id }}",
	inputs: {{ inputs.asObj.inputs }},
	provider: "{{ provider }}",
}{% if billTo %}, {
	billTo: "{{ billTo }}",
}{% endif %});

console.log(output);`,basicAudio:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const data = fs.readFileSync({{inputs.asObj.inputs}});

const output = await client.{{ methodName }}({
	data,
	model: "{{ model.id }}",
	provider: "{{ provider }}",
}{% if billTo %}, {
	billTo: "{{ billTo }}",
}{% endif %});

console.log(output);`,basicImage:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const data = fs.readFileSync({{inputs.asObj.inputs}});

const output = await client.{{ methodName }}({
	data,
	model: "{{ model.id }}",
	provider: "{{ provider }}",
}{% if billTo %}, {
	billTo: "{{ billTo }}",
}{% endif %});

console.log(output);`,conversational:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const chatCompletion = await client.chatCompletion({
    provider: "{{ provider }}",
    model: "{{ model.id }}",
{{ inputs.asTsString }}
}{% if billTo %}, {
    billTo: "{{ billTo }}",
}{% endif %});

console.log(chatCompletion.choices[0].message);`,conversationalStream:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

let out = "";

const stream = client.chatCompletionStream({
    provider: "{{ provider }}",
    model: "{{ model.id }}",
{{ inputs.asTsString }}
}{% if billTo %}, {
    billTo: "{{ billTo }}",
}{% endif %});

for await (const chunk of stream) {
	if (chunk.choices && chunk.choices.length > 0) {
		const newContent = chunk.choices[0].delta.content;
		out += newContent;
		console.log(newContent);
	}
}`,textToImage:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const image = await client.textToImage({
    provider: "{{ provider }}",
    model: "{{ model.id }}",
	inputs: {{ inputs.asObj.inputs }},
	parameters: { num_inference_steps: 5 },
}{% if billTo %}, {
    billTo: "{{ billTo }}",
}{% endif %});
/// Use the generated image (it's a Blob)`,textToSpeech:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const audio = await client.textToSpeech({
    provider: "{{ provider }}",
    model: "{{ model.id }}",
	inputs: {{ inputs.asObj.inputs }},
}{% if billTo %}, {
    billTo: "{{ billTo }}",
}{% endif %});
// Use the generated audio (it's a Blob)`,textToVideo:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const video = await client.textToVideo({
    provider: "{{ provider }}",
    model: "{{ model.id }}",
	inputs: {{ inputs.asObj.inputs }},
}{% if billTo %}, {
    billTo: "{{ billTo }}",
}{% endif %});
// Use the generated video (it's a Blob)`},openai:{conversational:`import { OpenAI } from "openai";

const client = new OpenAI({
	baseURL: "{{ baseUrl }}",
	apiKey: "{{ accessToken }}",
{% if billTo %}
	defaultHeaders: {
		"X-HF-Bill-To": "{{ billTo }}" 
	}
{% endif %}
});

const chatCompletion = await client.chat.completions.create({
	model: "{{ providerModelId }}",
{{ inputs.asTsString }}
});

console.log(chatCompletion.choices[0].message);`,conversationalStream:`import { OpenAI } from "openai";

const client = new OpenAI({
	baseURL: "{{ baseUrl }}",
	apiKey: "{{ accessToken }}",
{% if billTo %}
    defaultHeaders: {
		"X-HF-Bill-To": "{{ billTo }}" 
	}
{% endif %}
});

const stream = await client.chat.completions.create({
    model: "{{ providerModelId }}",
{{ inputs.asTsString }}
    stream: true,
});

for await (const chunk of stream) {
    process.stdout.write(chunk.choices[0]?.delta?.content || "");
}`}},python:{fal_client:{textToImage:`{% if provider == "fal-ai" %}
import fal_client

{% if providerInputs.asObj.loras is defined and providerInputs.asObj.loras != none %}
result = fal_client.subscribe(
    "{{ providerModelId }}",
    arguments={
        "prompt": {{ inputs.asObj.inputs }},
        "loras":{{ providerInputs.asObj.loras | tojson }},
    },
)
{% else %}
result = fal_client.subscribe(
    "{{ providerModelId }}",
    arguments={
        "prompt": {{ inputs.asObj.inputs }},
    },
)
{% endif %} 
print(result)
{% endif %} `},huggingface_hub:{basic:`result = client.{{ methodName }}(
    {{ inputs.asObj.inputs }},
    model="{{ model.id }}",
)`,basicAudio:'output = client.{{ methodName }}({{ inputs.asObj.inputs }}, model="{{ model.id }}")',basicImage:'output = client.{{ methodName }}({{ inputs.asObj.inputs }}, model="{{ model.id }}")',conversational:`completion = client.chat.completions.create(
    model="{{ model.id }}",
{{ inputs.asPythonString }}
)

print(completion.choices[0].message) `,conversationalStream:`stream = client.chat.completions.create(
    model="{{ model.id }}",
{{ inputs.asPythonString }}
    stream=True,
)

for chunk in stream:
    print(chunk.choices[0].delta.content, end="") `,documentQuestionAnswering:`output = client.document_question_answering(
    "{{ inputs.asObj.image }}",
    question="{{ inputs.asObj.question }}",
    model="{{ model.id }}",
) `,imageToImage:`# output is a PIL.Image object
image = client.image_to_image(
    "{{ inputs.asObj.inputs }}",
    prompt="{{ inputs.asObj.parameters.prompt }}",
    model="{{ model.id }}",
) `,importInferenceClient:`from huggingface_hub import InferenceClient

client = InferenceClient(
    provider="{{ provider }}",
    api_key="{{ accessToken }}",
{% if billTo %}
    bill_to="{{ billTo }}",
{% endif %}
)`,questionAnswering:`answer = client.question_answering(
    question="{{ inputs.asObj.question }}",
    context="{{ inputs.asObj.context }}",
    model="{{ model.id }}",
) `,tableQuestionAnswering:`answer = client.question_answering(
    query="{{ inputs.asObj.query }}",
    table={{ inputs.asObj.table }},
    model="{{ model.id }}",
) `,textToImage:`# output is a PIL.Image object
image = client.text_to_image(
    {{ inputs.asObj.inputs }},
    model="{{ model.id }}",
) `,textToSpeech:`# audio is returned as bytes
audio = client.text_to_speech(
    {{ inputs.asObj.inputs }},
    model="{{ model.id }}",
) 
`,textToVideo:`video = client.text_to_video(
    {{ inputs.asObj.inputs }},
    model="{{ model.id }}",
) `},openai:{conversational:`from openai import OpenAI

client = OpenAI(
    base_url="{{ baseUrl }}",
    api_key="{{ accessToken }}",
{% if billTo %}
    default_headers={
        "X-HF-Bill-To": "{{ billTo }}"
    }
{% endif %}
)

completion = client.chat.completions.create(
    model="{{ providerModelId }}",
{{ inputs.asPythonString }}
)

print(completion.choices[0].message) `,conversationalStream:`from openai import OpenAI

client = OpenAI(
    base_url="{{ baseUrl }}",
    api_key="{{ accessToken }}",
{% if billTo %}
    default_headers={
        "X-HF-Bill-To": "{{ billTo }}"
    }
{% endif %}
)

stream = client.chat.completions.create(
    model="{{ providerModelId }}",
{{ inputs.asPythonString }}
    stream=True,
)

for chunk in stream:
    print(chunk.choices[0].delta.content, end="")`},requests:{basic:`def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

output = query({
    "inputs": {{ providerInputs.asObj.inputs }},
}) `,basicAudio:`def query(filename):
    with open(filename, "rb") as f:
        data = f.read()
    response = requests.post(API_URL, headers={"Content-Type": "audio/flac", **headers}, data=data)
    return response.json()

output = query({{ providerInputs.asObj.inputs }})`,basicImage:`def query(filename):
    with open(filename, "rb") as f:
        data = f.read()
    response = requests.post(API_URL, headers={"Content-Type": "image/jpeg", **headers}, data=data)
    return response.json()

output = query({{ providerInputs.asObj.inputs }})`,conversational:`def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

response = query({
{{ providerInputs.asJsonString }}
})

print(response["choices"][0]["message"])`,conversationalStream:`def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload, stream=True)
    for line in response.iter_lines():
        if not line.startswith(b"data:"):
            continue
        if line.strip() == b"data: [DONE]":
            return
        yield json.loads(line.decode("utf-8").lstrip("data:").rstrip("/n"))

chunks = query({
{{ providerInputs.asJsonString }},
    "stream": True,
})

for chunk in chunks:
    print(chunk["choices"][0]["delta"]["content"], end="")`,documentQuestionAnswering:`def query(payload):
    with open(payload["image"], "rb") as f:
        img = f.read()
        payload["image"] = base64.b64encode(img).decode("utf-8")
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

output = query({
    "inputs": {
        "image": "{{ inputs.asObj.image }}",
        "question": "{{ inputs.asObj.question }}",
    },
}) `,imageToImage:`def query(payload):
    with open(payload["inputs"], "rb") as f:
        img = f.read()
        payload["inputs"] = base64.b64encode(img).decode("utf-8")
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.content

image_bytes = query({
{{ providerInputs.asJsonString }}
})

# You can access the image with PIL.Image for example
import io
from PIL import Image
image = Image.open(io.BytesIO(image_bytes)) `,importRequests:`{% if importBase64 %}
import base64
{% endif %}
{% if importJson %}
import json
{% endif %}
import requests

API_URL = "{{ fullUrl }}"
headers = {
    "Authorization": "{{ authorizationHeader }}",
{% if billTo %}
    "X-HF-Bill-To": "{{ billTo }}"
{% endif %}
}`,tabular:`def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.content

response = query({
    "inputs": {
        "data": {{ providerInputs.asObj.inputs }}
    },
}) `,textToAudio:`{% if model.library_name == "transformers" %}
def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.content

audio_bytes = query({
    "inputs": {{ inputs.asObj.inputs }},
})
# You can access the audio with IPython.display for example
from IPython.display import Audio
Audio(audio_bytes)
{% else %}
def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

audio, sampling_rate = query({
    "inputs": {{ inputs.asObj.inputs }},
})
# You can access the audio with IPython.display for example
from IPython.display import Audio
Audio(audio, rate=sampling_rate)
{% endif %} `,textToImage:`{% if provider == "hf-inference" %}
def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.content

image_bytes = query({
    "inputs": {{ providerInputs.asObj.inputs }},
})

# You can access the image with PIL.Image for example
import io
from PIL import Image
image = Image.open(io.BytesIO(image_bytes))
{% endif %}`,textToSpeech:`{% if model.library_name == "transformers" %}
def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.content

audio_bytes = query({
    "text": {{ inputs.asObj.inputs }},
})
# You can access the audio with IPython.display for example
from IPython.display import Audio
Audio(audio_bytes)
{% else %}
def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

audio, sampling_rate = query({
    "text": {{ inputs.asObj.inputs }},
})
# You can access the audio with IPython.display for example
from IPython.display import Audio
Audio(audio, rate=sampling_rate)
{% endif %} `,zeroShotClassification:`def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

output = query({
    "inputs": {{ providerInputs.asObj.inputs }},
    "parameters": {"candidate_labels": ["refund", "legal", "faq"]},
}) `,zeroShotImageClassification:`def query(data):
    with open(data["image_path"], "rb") as f:
        img = f.read()
    payload={
        "parameters": data["parameters"],
        "inputs": base64.b64encode(img).decode("utf-8")
    }
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

output = query({
    "image_path": {{ providerInputs.asObj.inputs }},
    "parameters": {"candidate_labels": ["cat", "dog", "llama"]},
}) `}},sh:{curl:{basic:`curl {{ fullUrl }} \\
    -X POST \\
    -H 'Authorization: {{ authorizationHeader }}' \\
    -H 'Content-Type: application/json' \\
{% if billTo %}
    -H 'X-HF-Bill-To: {{ billTo }}' \\
{% endif %}
    -d '{
{{ providerInputs.asCurlString }}
    }'`,basicAudio:`curl {{ fullUrl }} \\
    -X POST \\
    -H 'Authorization: {{ authorizationHeader }}' \\
    -H 'Content-Type: audio/flac' \\
{% if billTo %}
    -H 'X-HF-Bill-To: {{ billTo }}' \\
{% endif %}
    --data-binary @{{ providerInputs.asObj.inputs }}`,basicImage:`curl {{ fullUrl }} \\
    -X POST \\
    -H 'Authorization: {{ authorizationHeader }}' \\
    -H 'Content-Type: image/jpeg' \\
{% if billTo %}
    -H 'X-HF-Bill-To: {{ billTo }}' \\
{% endif %}
    --data-binary @{{ providerInputs.asObj.inputs }}`,conversational:`curl {{ fullUrl }} \\
    -H 'Authorization: {{ authorizationHeader }}' \\
    -H 'Content-Type: application/json' \\
{% if billTo %}
    -H 'X-HF-Bill-To: {{ billTo }}' \\
{% endif %}
    -d '{
{{ providerInputs.asCurlString }},
        "stream": false
    }'`,conversationalStream:`curl {{ fullUrl }} \\
    -H 'Authorization: {{ authorizationHeader }}' \\
    -H 'Content-Type: application/json' \\
{% if billTo %}
    -H 'X-HF-Bill-To: {{ billTo }}' \\
{% endif %}
    -d '{
{{ providerInputs.asCurlString }},
        "stream": true
    }'`,zeroShotClassification:`curl {{ fullUrl }} \\
    -X POST \\
    -d '{"inputs": {{ providerInputs.asObj.inputs }}, "parameters": {"candidate_labels": ["refund", "legal", "faq"]}}' \\
    -H 'Content-Type: application/json' \\
    -H 'Authorization: {{ authorizationHeader }}'
{% if billTo %} \\
    -H 'X-HF-Bill-To: {{ billTo }}'
{% endif %}`}}},loadTemplate=(a,e,c)=>{var h,g;const d=(g=(h=templates[a])==null?void 0:h[e])==null?void 0:g[c];if(!d)throw new Error(`Template not found: ${a}/${e}/${c}`);return _=>new Template(d).render({..._})};loadTemplate("python","huggingface_hub","importInferenceClient");loadTemplate("python","requests","importRequests");const __vite_import_meta_env__={BASE_URL:"/cake-ordering-gateway/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},getEnvVariable=a=>{const e=__vite_import_meta_env__[a];return e||(console.warn(`Environment variable ${a} is not set`),"")},hf=new HfInference(getEnvVariable("VITE_HUGGINGFACE_API_KEY"));async function generateChatResponse(a){var e,c;try{const d=a.filter(tt=>tt.role==="user"),h=a.filter(tt=>tt.role==="system"),g=((e=d[d.length-1])==null?void 0:e.content)||"",_e=`${((c=h[0])==null?void 0:c.content)||""}

User: ${g}

Assistant:`;return(await hf.textGeneration({model:"google/flan-t5-base",inputs:_e,parameters:{max_new_tokens:150,temperature:.7,top_p:.95,repetition_penalty:1.15}})).generated_text.trim()}catch(d){throw console.error("Error generating text with Hugging Face:",d),new Error(`Failed to generate response: ${d instanceof Error?d.message:"Unknown error"}`)}}const ChatBot=({isOpen:a,setIsOpen:e})=>{const[c,d]=reactExports.useState([]),[h,g]=reactExports.useState(""),[_,_e]=reactExports.useState(!1),[et,tt]=reactExports.useState([]),rt=reactExports.useRef(null),{user:$}=useAuth(),[b,nt]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{if($)try{const{data:at}=await supabase.from("profiles").select("first_name").eq("id",$.id).single();at&&at.first_name&&nt(at.first_name)}catch(at){console.error("Error fetching user profile:",at)}})()},[$]),reactExports.useEffect(()=>{const it=new Date().getHours();let at="Hello";it>=5&&it<12?at="Good morning":it>=12&&it<18?at="Good afternoon":at="Good evening";const lt=b?`${at}, ${b}! Welcome to Cake A Day. How can I assist you today?`:"Hello! Welcome to Cake A Day. How can I assist you today?",dt={id:`welcome-${Date.now()}`,text:lt,sender:"agent",timestamp:new Date};d([dt]),tt([{role:"assistant",content:dt.text}])},[$,b]),reactExports.useEffect(()=>{var it;(it=rt.current)==null||it.scrollIntoView({behavior:"smooth"})},[c]);const st=async()=>{if(!h.trim()||_)return;const it={id:`user-${Date.now()}`,text:h,sender:"user",timestamp:new Date};d(lt=>[...lt,it]);const at=[...et,{role:"user",content:h}];tt(at),g(""),_e(!0);try{let lt="";try{console.log("Querying embeddings for:",h);const yt=await queryEmbeddings(h,5);yt&&yt.length>0?(lt=yt.map(xt=>`[Source: ${xt.metadata.source||"unknown"}]
${xt.pageContent}`).join(`

`),console.log(`Retrieved ${yt.length} relevant documents for context`),console.log("Context sample:",lt.substring(0,150)+"...")):console.log("No relevant documents found for query")}catch(yt){console.error("RAG error details:",yt),console.warn("Could not retrieve embeddings, continuing without RAG context")}const ht=[{role:"system",content:`You are a concise, friendly, and helpful assistant for Cake A Day, a cake shop based in South Africa. 
Your responses should be short and to the point.
When providing prices, always use the format "R[amount]" for South African Rands.
${lt?`Answer questions based on this context information:
${lt}`:""}
If you don't have specific information about a product or service in the context, check if it appears in our product listings before saying we don't offer it.
Only answer questions related to the Cake A Day website and products. If you cannot find the answer in the provided context or website information, politely state that you'll need to check with the team for more details.`},...at.map(yt=>({...yt,role:yt.role}))];let pt;try{pt=await generateChatResponse(ht)}catch(yt){console.error("AI Service API error:",yt),pt="I'm sorry, I'm having trouble connecting to my knowledge base right now. Please try again later or contact us directly at contact@cakeaday.com or call (123) 456-7890 for immediate assistance with your cake order or inquiry."}const mt={id:`agent-${Date.now()}`,text:pt,sender:"agent",timestamp:new Date};d(yt=>[...yt,mt]),tt([...at,{role:"assistant",content:pt}])}catch(lt){console.error("Error in chat flow:",lt);const dt={id:`error-${Date.now()}`,text:"Sorry, I'm having trouble thinking right now. Please try again.",sender:"agent",timestamp:new Date};d(ht=>[...ht,dt])}finally{_e(!1)}},ot=it=>{it.key==="Enter"&&!_&&st()};return jsxRuntimeExports.jsxs("div",{className:"fixed bottom-4 right-4 w-80 h-96 bg-white dark:bg-card rounded-lg shadow-lg flex flex-col border border-gray-200 z-50",children:[jsxRuntimeExports.jsxs("div",{className:"bg-primary text-primary-foreground p-3 rounded-t-lg flex justify-between items-center",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold",children:"Cake A Day Assistant"}),jsxRuntimeExports.jsx("button",{onClick:()=>e(!1),className:"text-primary-foreground hover:text-primary-foreground/80","aria-label":"Close chat",children:jsxRuntimeExports.jsx(X,{size:18})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-3 overflow-y-auto",children:jsxRuntimeExports.jsx(ScrollArea,{className:"h-full pr-4",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[c.map(it=>jsxRuntimeExports.jsxs("div",{className:`mb-2 ${it.sender==="user"?"text-right":"text-left"}`,children:[jsxRuntimeExports.jsx("div",{className:`inline-block p-2 rounded-lg ${it.sender==="user"?"bg-primary text-primary-foreground rounded-br-none":"bg-muted text-foreground rounded-bl-none"}`,children:it.text}),jsxRuntimeExports.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:it.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},it.id)),_&&jsxRuntimeExports.jsx("div",{className:"text-left mb-2",children:jsxRuntimeExports.jsx("div",{className:"inline-block p-2 rounded-lg bg-muted text-foreground rounded-bl-none",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-1",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce delay-75"}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce delay-150"})]})})}),jsxRuntimeExports.jsx("div",{ref:rt})]})})}),jsxRuntimeExports.jsx("div",{className:"p-3 border-t border-border",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx(Input,{type:"text",value:h,onChange:it=>g(it.target.value),onKeyDown:ot,placeholder:"Type your message...",disabled:_,className:"flex-1 rounded-r-none",id:"chat-input",name:"chat-input"}),jsxRuntimeExports.jsx(Button,{onClick:st,disabled:_||!h.trim(),className:"rounded-l-none","aria-label":"Send message",children:jsxRuntimeExports.jsx(Send,{size:18})})]})})]})};function ChatBotButton(){const[a,e]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!a&&jsxRuntimeExports.jsx(Button,{onClick:()=>e(!0),className:"fixed bottom-4 right-4 rounded-full w-14 h-14 shadow-lg z-50",size:"icon",children:jsxRuntimeExports.jsx(MessageCircle,{className:"h-6 w-6"})}),a&&jsxRuntimeExports.jsx(ChatBot,{isOpen:a,setIsOpen:e})]})}const AuthCallback=()=>{const a=useNavigate(),e=useLocation(),[c,d]=reactExports.useState(null);return reactExports.useEffect(()=>{(async()=>{try{console.log("Auth callback triggered"),console.log("URL:",window.location.href);const g=new URLSearchParams(e.search),_=g.get("error"),_e=g.get("error_description");if(_){console.error("Auth error from URL:",_,_e),d(_e||"Authentication failed"),toast({variant:"destructive",title:"Authentication Error",description:_e||"Authentication failed"}),setTimeout(()=>a("/auth"),3e3);return}const{data:et,error:tt}=await supabase.auth.getSession();if(tt){console.error("Auth callback error:",tt),d("Unable to authenticate"),toast({variant:"destructive",title:"Authentication Error",description:tt.message}),setTimeout(()=>a("/auth"),3e3);return}et.session?(console.log("Authentication successful"),toast({title:"Authentication Successful",description:"You have been signed in successfully."}),a("/")):(console.error("No session found"),d("Authentication failed - no session found"),toast({variant:"destructive",title:"Authentication Error",description:"No session found. Please try again."}),setTimeout(()=>a("/auth"),3e3))}catch(g){console.error("Auth callback exception:",g),d("Authentication failed - unexpected error"),toast({variant:"destructive",title:"Authentication Error",description:"An unexpected error occurred. Please try again."}),setTimeout(()=>a("/auth"),3e3)}})()},[a,e]),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen",children:jsxRuntimeExports.jsx("div",{className:"text-center",children:c?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"text-red-500 text-xl mb-4",children:" Error"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Authentication Failed"}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:c}),jsxRuntimeExports.jsx("p",{children:"Redirecting you back to the login page..."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-cake-pink"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Authenticating..."}),jsxRuntimeExports.jsx("p",{children:"Please wait while we complete your sign-in process."})]})})})},queryClient=new QueryClient,App=()=>jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsxs(TooltipProvider,{children:[jsxRuntimeExports.jsx(Toaster$1,{}),jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsxs(CartProvider,{children:[jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/products",element:jsxRuntimeExports.jsx(ProductsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/products/:id",element:jsxRuntimeExports.jsx(ProductDetail,{})}),jsxRuntimeExports.jsx(Route,{path:"/product/:id",element:jsxRuntimeExports.jsx(ProductDetail,{})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(About,{})}),jsxRuntimeExports.jsx(Route,{path:"/contact",element:jsxRuntimeExports.jsx(Contact,{})}),jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Index,{})}),jsxRuntimeExports.jsx(Route,{path:"/everyday-cake-plan",element:jsxRuntimeExports.jsx(EverydayCakePlan,{})}),jsxRuntimeExports.jsx(Route,{path:"/cake-lovers-plan",element:jsxRuntimeExports.jsx(CakeLoversPlan,{})}),jsxRuntimeExports.jsx(Route,{path:"/super-cake-lovers-plan",element:jsxRuntimeExports.jsx(SuperCakeLoversPlan,{})}),jsxRuntimeExports.jsx(Route,{path:"/auth",element:jsxRuntimeExports.jsx(Auth,{})}),jsxRuntimeExports.jsx(Route,{path:"/signin",element:jsxRuntimeExports.jsx(SignIn,{})})," ",jsxRuntimeExports.jsx(Route,{path:"/auth/callback",element:jsxRuntimeExports.jsx(AuthCallback,{})}),jsxRuntimeExports.jsx(Route,{path:"/cart",element:jsxRuntimeExports.jsx(CartPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/checkout",element:jsxRuntimeExports.jsx(CheckoutPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/design-cake",element:jsxRuntimeExports.jsx(DesignCake,{})})," ",jsxRuntimeExports.jsx(Route,{path:"/profile",element:jsxRuntimeExports.jsx(Profile,{})}),jsxRuntimeExports.jsx(Route,{path:"/orders",element:jsxRuntimeExports.jsx(OrdersPage,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]}),jsxRuntimeExports.jsx(Outlet,{}),jsxRuntimeExports.jsx(ChatBotButton,{})]})})]})}),rootElement=document.getElementById("root");if(!rootElement)throw new Error("Failed to find the root element");client.createRoot(rootElement).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(HashRouter,{children:jsxRuntimeExports.jsx(App,{})})}));export{getDefaultExportFromCjs as g};
